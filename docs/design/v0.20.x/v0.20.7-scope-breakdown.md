# v0.20.7 Scope Breakdown: Veiðimaðr (Hunter)

**Version:** 0.20.7
**Theme:** Veiðimaðr Specialization Implementation
**Prerequisites:** v0.20.6 Complete (Bone-Setter Specialization)
**Total Estimated Tests:** ~25 new tests

---

## Executive Summary

v0.20.7 implements the **Veiðimaðr** (Hunter) specialization — the tracker and ranged combat specialist for the Skirmisher archetype. The Veiðimaðr is the **first Coherent path Skirmisher** in the v0.20.x series, providing a contrast to the Heretical Myrk-gengr (v0.20.4). These hunters are masters of patience and precision, marking their quarry and exploiting every weakness. Their abilities emphasize tracking, ranged combat superiority, and the inevitable taking of prey.

> *"Every creature leaves a trail. Every trail has an end."*

The work is divided into **3 sub-phases**:

| Phase | Name | Focus | Est. Tests |
|-------|------|-------|------------|
| v0.20.7a | Framework & Tier 1 Abilities | Quarry Marks resource, Mark Quarry, Keen Senses, Read the Signs | ~10 |
| v0.20.7b | Tier 2 Abilities | Hunter's Eye, Trap Mastery, Predator's Patience | ~8 |
| v0.20.7c | Tier 3 Abilities & Capstone | Apex Predator, Crippling Shot, The Perfect Hunt | ~7 |

---

## Specialization Profile

### Veiðimaðr Identity

| Attribute | Value |
|-----------|-------|
| **Display Name** | Veiðimaðr |
| **Pronunciation** | VAY-thee-math-ur |
| **Translation** | Hunter / Huntsman (Old Norse) |
| **Archetype** | Skirmisher |
| **Path Type** | Coherent |
| **Role** | Hunter / Tracker / Ranged Combat |
| **Special Resource** | Quarry Marks (Max 3) |
| **Tagline** | "Master of the Hunt" |

### Thematic Elements

The Veiðimaðr represents the patient, methodical predator in Aethelgard. While the Myrk-gengr strikes from shadows using Heretical power, the Veiðimaðr relies on skill, patience, and an intimate understanding of prey. In a world filled with dangers from the Blight, corrupted machines, and hostile survivors, the Veiðimaðr is the one who tracks, studies, and eliminates threats with calculated precision. They are the hunters who feed their holds, the scouts who map enemy movements, and the executioners who never miss.

**Design Principles:**
1. **Coherent Safety**: No Corruption risk — hunting through skill, not dark power
2. **Quarry Focus**: Most abilities center on designated targets (Quarry Marks)
3. **Ranged Superiority**: Specializes in ranged attacks and positioning
4. **Patience Rewarded**: Bonuses for not moving, waiting for the perfect shot
5. **Tracking Mastery**: Excels at finding and following prey

### Coherent Path — No Corruption

As a Coherent path specialization, the Veiðimaðr has no Corruption risk:

| Trigger | Corruption Risk |
|---------|-----------------|
| Any ability use | None |
| Marking Quarry | None |
| Hunting Heretical creatures | None |
| Capstone use | None |

---

## Feature Analysis & Categorization

### From v0.20.x-overview.md — Ability Tier Structure

| Ability | Tier | Type | Complexity | Assigned Phase |
|---------|------|------|------------|----------------|
| Mark Quarry | T1 | Active | Medium | **v0.20.7a** |
| Keen Senses | T1 | Passive | Low | **v0.20.7a** |
| Read the Signs | T1 | Active | Low | **v0.20.7a** |
| Hunter's Eye | T2 | Active | Medium | **v0.20.7b** |
| Trap Mastery | T2 | Active | High | **v0.20.7b** |
| Predator's Patience | T2 | Stance | Medium | **v0.20.7b** |
| Apex Predator | T3 | Passive | Medium | **v0.20.7c** |
| Crippling Shot | T3 | Attack | Medium | **v0.20.7c** |
| The Perfect Hunt | Cap | Ultimate | High | **v0.20.7c** |

### From v0.20.x-overview.md — Special Resource

| Feature | Complexity | Dependencies | Assigned Phase |
|---------|------------|--------------|----------------|
| Quarry Marks (Max 3) | Medium | Target tracking | **v0.20.7a** |
| Mark acquisition (tracking/ability) | Medium | Combat System | **v0.20.7a** |
| Mark consumption (abilities) | Low | Ability execution | **v0.20.7a** |
| Mark persistence (encounter-based) | Medium | Encounter System | **v0.20.7a** |

---

## Phase Definitions

---

## v0.20.7a: Framework & Tier 1 Abilities

[v0.20.7a Design Specification](v0.20.7a-design-specification.md)

### Overview

This phase establishes the Veiðimaðr specialization framework including the Quarry Marks tracking resource system and implements the three Tier 1 abilities that define the core hunter identity: marking prey, enhanced perception, and reading environmental signs.

### Scope

**In Scope:**
- `VeiðimaðrSpecialization` registration with v0.17.4 framework
- `QuarryMarksResource` special resource implementation (Max 3)
- Quarry Mark target designation system
- Mark Quarry active ability (designate target, gain +2 to hit)
- Keen Senses passive ability (+1 passive perception always)
- Read the Signs active ability (bonus to investigate creature remains)
- Ability slot initialization for Veiðimaðr
- Configuration entries in `specializations.json` and `abilities.json`

**Out of Scope:**
- Tier 2 abilities (v0.20.7b)
- Tier 3 abilities and Capstone (v0.20.7c)
- Other specialization implementations (v0.20.8)

### Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Domain Value Objects | 4 | `QuarryMarksResource`, `QuarryMark`, `MarkQuarryResult`, `ReadTheSignsResult` |
| Domain Enums | 3 | `VeiðimaðrAbilityId`, `QuarryStatus`, `CreatureTrackType` |
| Application Services | 2 | `QuarryMarksService`, `VeiðimaðrAbilityService` |
| Ability Implementations | 3 | Mark Quarry, Keen Senses, Read the Signs |
| Configuration | 2 | `specializations.json` updates, `abilities.json` updates |
| Unit Tests | ~10 | |

### Data Model Changes

```
NEW: QuarryMarksResource (Value Object)
├── ActiveMarks: IReadOnlyList<QuarryMark>
├── MaxMarks: int (3)
├── CurrentMarkCount: int (computed)
├── MarkGainedThisTurn: bool
├── LastMarkGainedAt: DateTime?
└── Methods:
    ├── AddMark(QuarryMark mark): bool
    ├── RemoveMark(Guid targetId): bool
    ├── HasMark(Guid targetId): bool
    ├── GetMark(Guid targetId): QuarryMark?
    ├── GetOldestMark(): QuarryMark?
    ├── CanAddMark(): bool
    ├── ClearAllMarks(): void
    └── ClearExpiredMarks(): int

NEW: QuarryMark (Value Object)
├── MarkId: Guid
├── TargetId: Guid
├── TargetName: string
├── MarkedAt: DateTime
├── MarkedBy: Guid (hunter character ID)
├── Status: QuarryStatus
├── HitBonus: int (+2)
├── EncounterId: Guid?
├── TurnsActive: int
├── AdditionalBonuses: IReadOnlyDictionary<string, int>
└── Methods:
    ├── GetTotalHitBonus(): int
    ├── GetDescription(): string
    ├── IsExpired(): bool
    ├── IncrementTurn(): void
    └── AddBonus(string source, int value): void

NEW: MarkQuarryResult (Value Object)
├── HunterId: Guid
├── HunterName: string
├── TargetId: Guid
├── TargetName: string
├── MarkCreated: QuarryMark
├── PreviousMarksCount: int
├── CurrentMarksCount: int
├── ReplacedMark: QuarryMark? (if at max)
├── MarkedAt: DateTime
└── Methods:
    ├── GetDescription(): string
    ├── WasReplacement(): bool
    └── GetHitBonus(): int

NEW: ReadTheSignsResult (Value Object)
├── InvestigatorId: Guid
├── LocationDescription: string
├── CreatureType: string?
├── CreatureCount: int?
├── TimePassedEstimate: string?
├── DirectionOfTravel: string?
├── CreatureCondition: string?
├── TrackQuality: CreatureTrackType
├── BonusApplied: int
├── SkillCheckRoll: int
├── SkillCheckDc: int
├── Success: bool
├── InformationRevealed: IReadOnlyList<string>
└── Methods:
    ├── GetFullDescription(): string
    ├── WasCriticalSuccess(): bool
    ├── GetTrackAge(): string
    └── GetCreatureSummary(): string

NEW: QuarryStatus (Enum)
├── Active - Currently marked and trackable
├── Wounded - Marked target is bloodied
├── Fleeing - Marked target is retreating
├── Hidden - Marked target is attempting to hide
├── Defeated - Target killed/incapacitated
└── Expired - Mark duration ended

NEW: VeiðimaðrAbilityId (Enum)
├── MarkQuarry
├── KeenSenses
├── ReadTheSigns
├── HuntersEye
├── TrapMastery
├── PredatorsPatience
├── ApexPredator
├── CripplingShot
└── ThePerfectHunt

NEW: CreatureTrackType (Enum)
├── Fresh - Within 1 hour
├── Recent - Within 8 hours
├── Old - Within 24 hours
├── Faint - Within 3 days
└── Ancient - Older than 3 days

MODIFY: Character (Entity)
├── ADD: QuarryMarks: QuarryMarksResource?
├── ADD: PassivePerceptionBonus: int (from Keen Senses)
└── ADD: TrackedQuarryIds: IReadOnlyList<Guid>
```

### Tier 1 Ability Specifications

#### Mark Quarry (Active)

| Property | Value |
|----------|-------|
| **ID** | `mark-quarry` |
| **Type** | Active |
| **AP Cost** | 1 AP |
| **Range** | Line of sight (no limit) |
| **Effect** | Designate target as Quarry, gain +2 to hit |
| **Duration** | Until target defeated or encounter ends |
| **Corruption Risk** | None (Coherent path) |

**Mechanics:**
- Designate one visible target as your Quarry
- Gain +2 to all attack rolls against that target
- Mark persists until target is defeated or encounter ends
- Maximum 3 Quarry Marks at once
- If at maximum, oldest mark is replaced
- Can mark the same target multiple times (refreshes duration, no stacking)
- Marking does not require an attack — pure designation
- Works on any creature (enemies, beasts, even allies if needed)

**Quarry Mark Bonuses:**
| Bonus Source | Value |
|--------------|-------|
| Base Hit Bonus | +2 |
| Predator's Patience (T2) | +3 additional |
| Apex Predator (T3) | No concealment |

**Mark Replacement Rules:**
| Scenario | Result |
|----------|--------|
| Under 3 marks | New mark added |
| At 3 marks, new target | Oldest mark replaced |
| Re-marking existing target | Mark refreshed |
| Target defeated | Mark removed |
| Encounter ends | All marks cleared |

#### Keen Senses (Passive)

| Property | Value |
|----------|-------|
| **ID** | `keen-senses` |
| **Type** | Passive |
| **Effect** | +1 passive perception always |
| **Corruption Risk** | None (Coherent path) |

**Mechanics:**
- Permanent +1 bonus to passive perception score
- Always active while conscious
- Stacks with other perception bonuses
- Applies to detecting hidden creatures
- Applies to noticing environmental hazards
- Applies to spotting traps (synergy with T2 Trap Mastery)
- Also grants +1 to active Perception checks

**Perception Applications:**
| Check Type | Bonus |
|------------|-------|
| Passive Perception | +1 |
| Active Perception | +1 |
| Detecting Hidden | +1 |
| Spotting Traps | +1 |
| Noticing Ambush | +1 |

#### Read the Signs (Active)

| Property | Value |
|----------|-------|
| **ID** | `read-the-signs` |
| **Type** | Active |
| **AP Cost** | 2 AP |
| **Range** | 2 spaces (investigation area) |
| **Effect** | Bonus to investigate creature remains/tracks |
| **Corruption Risk** | None (Coherent path) |

**Mechanics:**
- Examine an area for creature tracks, remains, or signs
- Gain +4 bonus to investigation checks for creature-related evidence
- Can determine: creature type, approximate count, time passed, direction traveled
- Higher rolls reveal more information
- Works on: tracks, scat, kill sites, dens, feeding areas
- If successful on tracks, can auto-mark the creature when found (next encounter)
- Keen Senses bonus (+1) also applies

**Investigation Results by DC:**
| DC | Information Revealed |
|----|---------------------|
| 10 | Creature type (general) |
| 12 | Approximate count |
| 14 | Time passed estimate |
| 16 | Direction of travel |
| 18 | Creature condition (wounded, healthy) |
| 20+ | Exact creature, vulnerabilities |

**Check Calculation:**
| Component | Bonus |
|-----------|-------|
| Base Investigation | Skill modifier |
| Read the Signs | +4 |
| Keen Senses | +1 |
| Total | Skill + 5 |

### User-Facing Changes

**Commands:**
```
> ability mark-quarry <target>     # Mark target as Quarry
> ability read-the-signs           # Investigate area for tracks
> status                           # Shows Quarry Marks: 2/3
> quarry list                      # Show all marked targets
```

**Output Example:**
```
╔══════════════════════════════════════════════════════════════╗
║  VEIÐIMAÐR - Torvin Blackarrow                               ║
╠══════════════════════════════════════════════════════════════╣
║  HP: 32/32    Defense: 13    AP: 6/6                         ║
║  Quarry Marks: ███░░░ 2/3                                    ║
║                                                              ║
║  Active Quarry:                                              ║
║    [1] Draugr Scout - +2 to hit (3 turns)                    ║
║    [2] Blight Wolf Alpha - +2 to hit (1 turn)                ║
║                                                              ║
║  [Keen Senses] +1 passive perception                         ║
║  [COHERENT] No Corruption risk                               ║
╚══════════════════════════════════════════════════════════════╝

> mark-quarry "Corrupted Machine"

You study the Corrupted Machine, marking it as your Quarry.
╔══════════════════════════════════════════════════════════════╗
║  QUARRY MARKED                                               ║
╠══════════════════════════════════════════════════════════════╣
║  Target: Corrupted Machine                                   ║
║  Bonus: +2 to hit                                            ║
║  Duration: Until defeated or encounter ends                  ║
║  Quarry Marks: 3/3                                           ║
╚══════════════════════════════════════════════════════════════╝

> read-the-signs

You examine the area for signs of creatures...
Investigation Check: 18 (Roll: 12 + 5 Read the Signs/Keen Senses + 1 Skill)
╔══════════════════════════════════════════════════════════════╗
║  TRACKING RESULTS                                            ║
╠══════════════════════════════════════════════════════════════╣
║  Creature Type: Blight Wolf (pack)                           ║
║  Count: 4-6 individuals                                      ║
║  Time Passed: ~2 hours ago (Recent tracks)                   ║
║  Direction: Northeast, toward the abandoned hold             ║
║  Condition: One appears wounded (blood trail)                ║
║                                                              ║
║  [Auto-mark available when encountered]                      ║
╚══════════════════════════════════════════════════════════════╝
```

### Acceptance Criteria

- [ ] Veiðimaðr specialization registered in SpecializationDefinition
- [ ] Quarry Marks initializes with 0/3 marks
- [ ] Quarry Marks tracks individual targets with bonuses
- [ ] Mark Quarry designates target and grants +2 to hit
- [ ] Mark Quarry costs 1 AP and requires line of sight
- [ ] Maximum 3 marks, oldest replaced when exceeded
- [ ] Marks persist until target defeated or encounter ends
- [ ] Keen Senses grants +1 passive perception always
- [ ] Read the Signs grants +4 to investigate creature evidence
- [ ] Read the Signs can reveal creature information based on DC
- [ ] No Corruption risk for any Veiðimaðr abilities
- [ ] Ability slots correctly show Tier 1 abilities as unlocked
- [ ] ~10 unit tests pass

---

## v0.20.7b: Tier 2 Abilities

[v0.20.7b Design Specification](v0.20.7b-design-specification.md)

### Overview

This phase implements the three Tier 2 abilities that expand the Veiðimaðr's hunting capabilities with ranged attack superiority, trap expertise, and patient precision bonuses.

### Scope

**In Scope:**
- Hunter's Eye active ability (ranged attacks ignore partial cover)
- Trap Mastery active ability (place and detect traps more effectively)
- Predator's Patience stance (if you didn't move, +3 to hit)
- Tier 2 unlock validation (requires 8 PP invested in tree)
- PP cost enforcement (4 PP per Tier 2 ability)
- Trap creation and detection integration

**Out of Scope:**
- Tier 3 abilities and Capstone (v0.20.7c)
- Quarry Marks modifications (established in v0.20.7a)

### Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Domain Value Objects | 4 | `HuntersEyeResult`, `TrapPlacement`, `TrapDetectionResult`, `PredatorsPatienceState` |
| Domain Enums | 2 | `TrapType`, `CoverType` |
| Ability Implementations | 3 | Hunter's Eye, Trap Mastery, Predator's Patience |
| Combat Integration | 2 | Cover bypass, stance management |
| Unit Tests | ~8 | |

### Tier 2 Ability Specifications

#### Hunter's Eye (Active)

| Property | Value |
|----------|-------|
| **ID** | `hunters-eye` |
| **Type** | Active |
| **AP Cost** | 1 AP |
| **Duration** | 3 turns or until used |
| **Effect** | Ranged attacks ignore partial cover |
| **PP Cost** | 4 PP to unlock |
| **Prerequisite** | 8 PP invested in Veiðimaðr tree |
| **Corruption Risk** | None (Coherent path) |

**Mechanics:**
- Activate to gain cover-piercing vision for ranged attacks
- Ranged attacks ignore partial cover bonus (+2 AC)
- Does not ignore full cover (target must still be targetable)
- Lasts 3 turns or until you make a ranged attack (whichever comes first)
- Works with all ranged weapons (bows, crossbows, thrown)
- Stacks with Quarry Mark bonus (+2 + ignore cover)
- Visual indicator shows when Hunter's Eye is active

**Cover Interaction:**
| Cover Type | Normal Penalty | With Hunter's Eye |
|------------|----------------|-------------------|
| No Cover | +0 AC | +0 AC |
| Partial Cover | +2 AC | +0 AC (ignored) |
| Three-Quarters | +5 AC | +5 AC (not ignored) |
| Full Cover | Cannot target | Cannot target |

#### Trap Mastery (Active)

| Property | Value |
|----------|-------|
| **ID** | `trap-mastery` |
| **Type** | Active |
| **AP Cost** | 3 AP (place) / 1 AP (detect) |
| **Range** | Adjacent (place) / 6 spaces (detect) |
| **Effect** | Place and detect traps more effectively |
| **PP Cost** | 4 PP to unlock |
| **Prerequisite** | 8 PP invested in Veiðimaðr tree |
| **Corruption Risk** | None (Coherent path) |

**Mechanics:**
- Two modes: Place Trap or Detect Traps
- **Place Trap (3 AP):** Set a hunting trap in adjacent space
  - Trap remains until triggered or encounter ends
  - When enemy enters space: 1d8 damage + immobilized 1 turn
  - DC to notice trap = 10 + Veiðimaðr's perception modifier
  - Maximum 2 traps active at once
- **Detect Traps (1 AP):** Scan for traps within 6 spaces
  - Automatically detect traps up to DC 15
  - Higher DC traps require Perception check with +4 bonus
  - Keen Senses bonus (+1) also applies
  - Detected traps are marked for all allies

**Trap Specifications:**
| Property | Value |
|----------|-------|
| Damage | 1d8 piercing |
| Condition | Immobilized (1 turn) |
| Notice DC | 10 + Perception modifier |
| Max Active | 2 traps |
| Persistence | Until triggered or encounter ends |

**Detection Check:**
| Trap DC | Auto-Detect? | Check Bonus |
|---------|--------------|-------------|
| ≤15 | Yes | N/A |
| 16-20 | Perception check | +4 (Trap Mastery) +1 (Keen Senses) |
| 21+ | Perception check | +5 total |

#### Predator's Patience (Stance)

| Property | Value |
|----------|-------|
| **ID** | `predators-patience` |
| **Type** | Stance |
| **AP Cost** | 0 AP (free to enter/exit) |
| **Effect** | +3 to hit if you didn't move this turn |
| **PP Cost** | 4 PP to unlock |
| **Prerequisite** | 8 PP invested in Veiðimaðr tree |
| **Corruption Risk** | None (Coherent path) |

**Mechanics:**
- Toggle stance on/off as a free action
- While in stance: if you didn't move this turn, gain +3 to hit
- Movement of any kind breaks the bonus (walk, teleport, forced movement)
- Bonus applies to all attacks, not just ranged
- Stacks with Quarry Mark (+2 + 3 = +5 total)
- Cannot be in Predator's Patience and another stance simultaneously
- Staying still rewards patience with deadly accuracy

**Stance Interaction:**
| Movement | Bonus Active? |
|----------|---------------|
| No movement | Yes (+3 to hit) |
| Walked | No |
| Teleported | No |
| Pushed/Pulled | No |
| Turned in place | Yes (rotation isn't movement) |

**Combined Bonuses (Patience + Quarry):**
| Scenario | Total Hit Bonus |
|----------|-----------------|
| No Quarry, moved | +0 |
| No Quarry, stationary | +3 |
| Quarry, moved | +2 |
| Quarry, stationary | +5 |

### Data Model Changes

```
NEW: HuntersEyeResult (Value Object)
├── HunterId: Guid
├── ActivatedAt: DateTime
├── TurnsRemaining: int (3)
├── CoversIgnored: IReadOnlyList<CoverType>
├── IsActive: bool
├── UsedOn: Guid? (target of ranged attack)
└── Methods:
    ├── GetDescription(): string
    ├── DecrementTurn(): void
    ├── Consume(): void
    └── IgnoresCover(CoverType cover): bool

NEW: TrapPlacement (Value Object)
├── TrapId: Guid
├── PlacedBy: Guid
├── Position: Position
├── TrapType: TrapType
├── Damage: DiceRoll (1d8)
├── Condition: string (Immobilized)
├── ConditionDuration: int (1)
├── NoticeDc: int
├── PlacedAt: DateTime
├── Triggered: bool
├── TriggeredBy: Guid?
└── Methods:
    ├── GetDescription(): string
    ├── Trigger(Guid targetId): TrapTriggerResult
    ├── IsInPosition(Position pos): bool
    └── CalculateNoticeDc(int perceptionMod): int

NEW: TrapDetectionResult (Value Object)
├── DetectorId: Guid
├── TrapsDetected: IReadOnlyList<TrapPlacement>
├── TrapsAutoDetected: int
├── TrapsCheckRequired: int
├── PerceptionRoll: int?
├── BonusApplied: int (+5)
├── AreaScanned: int (6 spaces)
└── Methods:
    ├── GetDescription(): string
    ├── GetDetectedCount(): int
    └── GetMissedCount(): int

NEW: PredatorsPatienceState (Value Object)
├── HunterId: Guid
├── IsActive: bool
├── MovedThisTurn: bool
├── HitBonus: int (+3)
├── EnteredAt: DateTime?
├── TurnsInStance: int
└── Methods:
    ├── Enter(): void
    ├── Exit(): void
    ├── RecordMovement(): void
    ├── ResetForNewTurn(): void
    ├── GetCurrentBonus(): int
    └── GetDescription(): string

NEW: TrapType (Enum)
├── HunterSnare - Basic immobilizing trap
├── SpikedPit - Fall damage + prone
├── Tripwire - Knocks prone
├── BearTrap - Damage + immobilize
└── AlarmTrap - No damage, alerts hunter

NEW: CoverType (Enum)
├── None - No cover
├── Partial - +2 AC (half cover)
├── ThreeQuarters - +5 AC
└── Full - Cannot be targeted
```

### Acceptance Criteria

- [ ] Tier 2 abilities locked until 8 PP invested in tree
- [ ] Each Tier 2 ability costs 4 PP to unlock
- [ ] Hunter's Eye allows ranged attacks to ignore partial cover
- [ ] Hunter's Eye lasts 3 turns or until ranged attack made
- [ ] Trap Mastery can place traps (3 AP) dealing 1d8 + immobilize
- [ ] Trap Mastery can detect traps (1 AP) with +5 bonus
- [ ] Maximum 2 traps can be active at once
- [ ] Predator's Patience grants +3 to hit if no movement
- [ ] Predator's Patience bonus lost if any movement occurs
- [ ] Stance bonuses stack with Quarry Mark
- [ ] No Corruption risk for any abilities
- [ ] ~8 unit tests pass

---

## v0.20.7c: Tier 3 Abilities & Capstone

[v0.20.7c Design Specification](v0.20.7c-design-specification.md)

### Overview

This phase implements the two Tier 3 abilities and the Capstone ultimate that represent the pinnacle of hunting mastery, including denying quarry concealment, crippling movement, and the devastating automatic critical strike.

### Scope

**In Scope:**
- Apex Predator passive ability (Quarry cannot benefit from concealment)
- Crippling Shot attack ability (target's movement halved for 2 turns)
- The Perfect Hunt ultimate ability (next attack on Quarry is automatic critical)
- Tier 3 unlock validation (requires 16 PP invested in tree)
- Capstone unlock validation (requires 24 PP invested in tree)
- PP cost enforcement (5 PP per Tier 3, 6 PP for Capstone)

**Out of Scope:**
- Other specialization implementations (v0.20.8)
- Seiðkona (v0.20.8)

### Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Domain Value Objects | 3 | `ApexPredatorEffect`, `CripplingShotResult`, `PerfectHuntResult` |
| Domain Enums | 1 | `MovementReductionType` |
| Ability Implementations | 3 | Apex Predator, Crippling Shot, The Perfect Hunt |
| Combat Integration | 3 | Concealment denial, movement debuff, automatic critical |
| Unit Tests | ~7 | |

### Tier 3 & Capstone Ability Specifications

#### Apex Predator (Passive)

| Property | Value |
|----------|-------|
| **ID** | `apex-predator` |
| **Type** | Passive |
| **Effect** | Quarry cannot benefit from concealment |
| **PP Cost** | 5 PP to unlock |
| **Prerequisite** | 16 PP invested in Veiðimaðr tree |
| **Corruption Risk** | None (Coherent path) |

**Mechanics:**
- Your marked Quarry cannot benefit from concealment against you
- Applies to: darkness, invisibility, fog, magical obscurement
- Does not apply to cover (that's Hunter's Eye)
- Only affects targets you have marked as Quarry
- Quarry effectively has no miss chance from concealment
- Works in all light conditions
- Represents your intimate knowledge of the Quarry's patterns

**Concealment Denial:**
| Concealment Type | Normal Miss Chance | With Apex Predator |
|------------------|--------------------|--------------------|
| Light Concealment | 20% miss | 0% miss |
| Heavy Concealment | 50% miss | 0% miss |
| Invisibility | 50% miss | 0% miss |
| Magical Darkness | Cannot target | 0% miss (if marked) |
| Fog/Smoke | 20-50% miss | 0% miss |

**Combined with Hunter's Eye:**
| Defense Type | Apex Predator | Hunter's Eye | Combined |
|--------------|---------------|--------------|----------|
| Cover | No | Yes | Full bypass |
| Concealment | Yes | No | Full bypass |

#### Crippling Shot (Attack)

| Property | Value |
|----------|-------|
| **ID** | `crippling-shot` |
| **Type** | Attack |
| **AP Cost** | 3 AP |
| **Range** | Weapon range |
| **Effect** | Target's movement halved for 2 turns |
| **PP Cost** | 5 PP to unlock |
| **Prerequisite** | 16 PP invested in Veiðimaðr tree |
| **Corruption Risk** | None (Coherent path) |

**Mechanics:**
- Make a ranged weapon attack against target
- On hit: deal normal weapon damage
- On hit: target's movement speed is halved for 2 turns
- Requires ranged weapon
- Benefits from all Quarry Mark and stance bonuses
- Does not stack with itself (reapplying refreshes duration)
- Target can still take all actions, just moves slower
- Effective for preventing escape or catching fleeing enemies

**Movement Reduction:**
| Target Speed | Reduced Speed |
|--------------|---------------|
| 30 ft | 15 ft |
| 40 ft | 20 ft |
| 50 ft | 25 ft |
| Flight | Also halved |

**Crippled Condition:**
| Effect | Description |
|--------|-------------|
| Movement | Halved |
| Actions | Normal |
| Duration | 2 turns |
| Stacking | Refreshes (no stack) |
| Removal | Wait or magical cure |

#### The Perfect Hunt (Ultimate/Capstone)

| Property | Value |
|----------|-------|
| **ID** | `the-perfect-hunt` |
| **Type** | Ultimate |
| **AP Cost** | 2 AP (declare) |
| **Target** | One marked Quarry |
| **Effect** | Next attack on Quarry is automatic critical |
| **Cooldown** | Once per long rest |
| **PP Cost** | 6 PP to unlock |
| **Prerequisite** | 24 PP invested in Veiðimaðr tree |
| **Corruption Risk** | None (Coherent path) |

**Mechanics:**
- Declare The Perfect Hunt targeting one of your marked Quarry
- Your next attack against that specific Quarry automatically crits
- Does not require an attack roll — the hit is guaranteed
- Critical doubles all damage dice (not modifiers)
- Must attack the declared target with your next attack
- If you attack a different target first, effect is wasted
- Lasts until next attack or end of encounter
- Usable once per long rest
- Represents the culmination of patient hunting

**Critical Damage Calculation:**
| Damage Component | Multiplier |
|------------------|------------|
| Weapon damage dice | x2 |
| Bonus dice (sneak, etc.) | x2 |
| Static modifiers | x1 |
| Quarry mark bonus | x1 |

**Usage Requirements:**
| Requirement | Status |
|-------------|--------|
| Target must be Quarry | Required |
| Line of sight | Required for declaration |
| Ranged/Melee | Either works |
| Attack same target | Required |
| Once per long rest | Enforced |

**Example Damage:**
```
Base weapon: 1d8+4 (longbow + DEX)
Quarry Mark: +2 to hit
Perfect Hunt: Automatic Critical

Normal hit: 1d8+4 = 4-12 damage
Critical hit: 2d8+4 = 6-20 damage
```

### Data Model Changes

```
NEW: ApexPredatorEffect (Value Object)
├── HunterId: Guid
├── IsActive: bool
├── AffectedQuarryIds: IReadOnlyList<Guid>
├── ConcealmentTypesIgnored: IReadOnlyList<string>
└── Methods:
    ├── IgnoresConcealment(Guid targetId): bool
    ├── GetAffectedTargets(): IReadOnlyList<Guid>
    ├── AddQuarry(Guid targetId): void
    ├── RemoveQuarry(Guid targetId): void
    └── GetDescription(): string

NEW: CripplingShotResult (Value Object)
├── AttackerId: Guid
├── TargetId: Guid
├── TargetName: string
├── AttackRoll: int
├── HitSuccess: bool
├── DamageDealt: int
├── DamageBreakdown: string
├── MovementReduced: bool
├── OriginalSpeed: int
├── ReducedSpeed: int
├── DebuffDuration: int (2)
├── QuarryBonusApplied: bool
├── StanceBonusApplied: bool
└── Methods:
    ├── GetFullDescription(): string
    ├── GetDamageSummary(): string
    ├── GetDebuffSummary(): string
    └── WasQuarry(): bool

NEW: PerfectHuntResult (Value Object)
├── HunterId: Guid
├── HunterName: string
├── TargetId: Guid
├── TargetName: string
├── DeclaredAt: DateTime
├── ExecutedAt: DateTime?
├── DamageDealt: int
├── CriticalDamage: int (doubled dice)
├── WeaponUsed: string
├── BaseDamage: string
├── WasExecuted: bool
├── WasWasted: bool
├── CooldownResetAt: DateTime
└── Methods:
    ├── GetDeclarationDescription(): string
    ├── GetExecutionDescription(): string
    ├── GetDamageBreakdown(): string
    ├── CalculateCriticalDamage(int baseDice): int
    └── WasPerfect(): bool

NEW: MovementReductionType (Enum)
├── Halved - 50% reduction (Crippling Shot)
├── Slowed - Specific amount reduction
├── Immobilized - Cannot move
├── Rooted - Cannot move, can act
└── Restrained - Cannot move, disadvantage
```

### Acceptance Criteria

- [ ] Tier 3 abilities locked until 16 PP invested in tree
- [ ] Capstone locked until 24 PP invested in tree
- [ ] Tier 3 abilities cost 5 PP each to unlock
- [ ] Capstone costs 6 PP to unlock
- [ ] Apex Predator denies concealment to marked Quarry
- [ ] Apex Predator works against darkness, invisibility, fog
- [ ] Crippling Shot halves target movement for 2 turns
- [ ] Crippling Shot deals normal weapon damage on hit
- [ ] The Perfect Hunt requires marked Quarry target
- [ ] The Perfect Hunt makes next attack automatic critical
- [ ] The Perfect Hunt doubles damage dice only
- [ ] The Perfect Hunt is once per long rest
- [ ] No Corruption risk for any abilities
- [ ] ~7 unit tests pass

---

## Dependencies & Prerequisites

```
v0.17.3 (Archetype System) - REQUIRED
    │
    └── Skirmisher archetype foundation
                                    │
                                    ▼
v0.17.4 (Specialization Framework) - REQUIRED
    │
    ├── SpecializationDefinition entity
    ├── SpecializationPathType enum (includes Coherent)
    ├── SpecializationId enum (includes Veiðimaðr)
    ├── SpecialResourceDefinition
    └── Tier unlock mechanics (8/16/24 PP)
                                    │
                                    ▼
v0.10.x (Status Effect System) - REQUIRED
    │
    ├── StatusEffectService
    ├── Condition tracking (Immobilized, Crippled)
    └── Debuff application
                                    │
                                    ▼
v0.20.0 (Legacy Class Removal) - REQUIRED
    │
    ├── IAbilitySlotService
    ├── ISpecializationPrerequisiteService
    └── Migration infrastructure
                                    │
                                    ▼
v0.20.1-v0.20.6 (Prior Specializations) - REQUIRED
    │
    └── Establish specialization ability patterns
                                    │
                                    ▼
v0.20.7 (Veiðimaðr)
    │
    ├── v0.20.7a: Framework & Tier 1 ──────────────────┐
    │       ├── QuarryMarksResource                    │
    │       ├── First Coherent Skirmisher              │
    │       ├── Mark Quarry                            │
    │       ├── Keen Senses                            │
    │       └── Read the Signs                         │
    │                                                  │
    ├── v0.20.7b: Tier 2 Abilities ───────────────────┤
    │       Dependencies: v0.20.7a                     │
    │       ├── Hunter's Eye                           │
    │       ├── Trap Mastery                           │
    │       └── Predator's Patience                    │
    │                                                  │
    └── v0.20.7c: Tier 3 & Capstone ──────────────────┘
            Dependencies: v0.20.7a, v0.20.7b
            ├── Apex Predator
            ├── Crippling Shot
            └── The Perfect Hunt
```

---

## Quarry Marks Resource

### Resource Specification

```csharp
/// <summary>
/// Special resource for Veiðimaðr specialization.
/// Quarry Marks track designated targets and provide combat bonuses.
/// </summary>
public sealed record QuarryMarksResource
{
    /// <summary>Currently active quarry marks.</summary>
    public IReadOnlyList<QuarryMark> ActiveMarks { get; private set; }

    /// <summary>Maximum marks allowed.</summary>
    public int MaxMarks { get; init; } = 3;

    /// <summary>Whether a mark was gained this turn.</summary>
    public bool MarkGainedThisTurn { get; private set; }

    /// <summary>Current number of marks.</summary>
    public int CurrentMarkCount => ActiveMarks.Count;

    /// <summary>
    /// Adds a new quarry mark, replacing oldest if at max.
    /// </summary>
    /// <returns>The created mark and any replaced mark.</returns>
    public (QuarryMark created, QuarryMark? replaced) AddMark(QuarryMark mark)
    {
        QuarryMark? replaced = null;

        // Check if target already marked
        var existing = ActiveMarks.FirstOrDefault(m => m.TargetId == mark.TargetId);
        if (existing != null)
        {
            // Refresh existing mark
            ActiveMarks = ActiveMarks
                .Where(m => m.TargetId != mark.TargetId)
                .Append(mark)
                .ToList();
            return (mark, null);
        }

        // Check capacity
        if (CurrentMarkCount >= MaxMarks)
        {
            // Replace oldest
            replaced = GetOldestMark();
            ActiveMarks = ActiveMarks
                .Where(m => m.MarkId != replaced!.MarkId)
                .Append(mark)
                .ToList();
        }
        else
        {
            ActiveMarks = ActiveMarks.Append(mark).ToList();
        }

        MarkGainedThisTurn = true;
        return (mark, replaced);
    }

    /// <summary>
    /// Removes a mark for a specific target.
    /// </summary>
    public bool RemoveMark(Guid targetId)
    {
        var mark = ActiveMarks.FirstOrDefault(m => m.TargetId == targetId);
        if (mark == null) return false;

        ActiveMarks = ActiveMarks.Where(m => m.TargetId != targetId).ToList();
        return true;
    }

    /// <summary>
    /// Checks if target is marked.
    /// </summary>
    public bool HasMark(Guid targetId) =>
        ActiveMarks.Any(m => m.TargetId == targetId);

    /// <summary>
    /// Gets the oldest active mark.
    /// </summary>
    public QuarryMark? GetOldestMark() =>
        ActiveMarks.OrderBy(m => m.MarkedAt).FirstOrDefault();

    /// <summary>
    /// Clears all marks (called at encounter end).
    /// </summary>
    public void ClearAllMarks()
    {
        ActiveMarks = new List<QuarryMark>();
        MarkGainedThisTurn = false;
    }

    /// <summary>
    /// Resets turn-based tracking.
    /// </summary>
    public void ResetForNewTurn()
    {
        MarkGainedThisTurn = false;
    }
}
```

### Resource Acquisition & Consumption

| Action | Effect |
|--------|--------|
| Mark Quarry ability | Add/refresh Quarry Mark |
| Read the Signs (success) | Grants auto-mark when encountered |
| Target defeated | Mark removed automatically |
| Encounter ends | All marks cleared |
| Re-mark same target | Mark refreshed, not added |
| Mark when at max | Oldest mark replaced |

### Mark Bonus Stacking

| Bonus Source | Hit Bonus | Stacking |
|--------------|-----------|----------|
| Quarry Mark (base) | +2 | Always |
| Predator's Patience | +3 | If stationary |
| Hunter's Eye | Ignore partial cover | If active |
| Apex Predator | No concealment | If T3 unlocked |
| The Perfect Hunt | Auto-crit | Once/rest |

**Maximum Attack Bonus on Quarry (stationary):** +5 to hit, ignore cover, ignore concealment

---

## Configuration Updates

### specializations.json

```json
{
  "specializations": [
    {
      "specializationId": "Veiðimaðr",
      "displayName": "Veiðimaðr",
      "tagline": "Master of the Hunt",
      "description": "The Veiðimaðr represents the patient, methodical predator in Aethelgard. While others strike from shadows using Heretical power, the Veiðimaðr relies on skill, patience, and an intimate understanding of prey. They are the hunters who feed their holds, the scouts who map enemy movements, and the executioners who never miss.",
      "selectionText": "Every creature leaves a trail. Every trail has an end. Let me show you the way of the hunt.",
      "parentArchetype": "Skirmisher",
      "pathType": "Coherent",
      "corruptionRisk": null,
      "specialResource": {
        "resourceId": "quarry-marks",
        "resourceName": "Quarry Marks",
        "description": "Designated targets marked for hunting. Marked quarry are easier to hit and track.",
        "maxValue": 3,
        "startingValue": 0,
        "generationMethod": "Mark targets using Mark Quarry ability",
        "consumptionMethod": "Marks cleared when target defeated or encounter ends"
      },
      "unlockCost": 0,
      "abilityTiers": [
        {
          "tier": 1,
          "ppRequirement": 0,
          "abilityCost": 0,
          "abilities": ["mark-quarry", "keen-senses", "read-the-signs"]
        },
        {
          "tier": 2,
          "ppRequirement": 8,
          "abilityCost": 4,
          "abilities": ["hunters-eye", "trap-mastery", "predators-patience"]
        },
        {
          "tier": 3,
          "ppRequirement": 16,
          "abilityCost": 5,
          "abilities": ["apex-predator", "crippling-shot"]
        },
        {
          "tier": "capstone",
          "ppRequirement": 24,
          "abilityCost": 6,
          "abilities": ["the-perfect-hunt"]
        }
      ]
    }
  ]
}
```

### abilities.json (Veiðimaðr Section)

```json
{
  "abilities": [
    {
      "abilityId": "mark-quarry",
      "displayName": "Mark Quarry",
      "specializationId": "Veiðimaðr",
      "tier": 1,
      "type": "Active",
      "apCost": 1,
      "range": -1,
      "rangeType": "LineOfSight",
      "description": "Designate a visible target as your Quarry. Gain +2 to all attack rolls against that target. Mark persists until target defeated or encounter ends. Maximum 3 marks.",
      "effects": [
        {
          "type": "ApplyMark",
          "markType": "Quarry",
          "hitBonus": 2
        }
      ],
      "targeting": {
        "validTargets": ["Any"],
        "requiresLineOfSight": true
      }
    },
    {
      "abilityId": "keen-senses",
      "displayName": "Keen Senses",
      "specializationId": "Veiðimaðr",
      "tier": 1,
      "type": "Passive",
      "description": "Your honed senses grant +1 to passive perception and all Perception checks. Always active while conscious.",
      "effects": [
        {
          "type": "PerceptionBonus",
          "passive": 1,
          "active": 1
        }
      ]
    },
    {
      "abilityId": "read-the-signs",
      "displayName": "Read the Signs",
      "specializationId": "Veiðimaðr",
      "tier": 1,
      "type": "Active",
      "apCost": 2,
      "range": 2,
      "rangeUnit": "Spaces",
      "description": "Examine an area for creature tracks and remains. Gain +4 to investigation checks for creature-related evidence. Higher rolls reveal more information.",
      "effects": [
        {
          "type": "InvestigationBonus",
          "category": "CreatureTracks",
          "bonus": 4
        },
        {
          "type": "RevealCreatureInfo",
          "dcScaling": true
        }
      ]
    },
    {
      "abilityId": "hunters-eye",
      "displayName": "Hunter's Eye",
      "specializationId": "Veiðimaðr",
      "tier": 2,
      "type": "Active",
      "apCost": 1,
      "duration": 3,
      "durationUnit": "Turns",
      "description": "Focus your aim to pierce cover. For 3 turns or until you make a ranged attack, your ranged attacks ignore partial cover (+2 AC).",
      "effects": [
        {
          "type": "IgnoreCover",
          "coverTypes": ["Partial"]
        }
      ]
    },
    {
      "abilityId": "trap-mastery",
      "displayName": "Trap Mastery",
      "specializationId": "Veiðimaðr",
      "tier": 2,
      "type": "Active",
      "apCost": 3,
      "apCostDetect": 1,
      "range": 1,
      "rangeDetect": 6,
      "description": "Place a hunting trap in adjacent space (3 AP) dealing 1d8 damage and immobilizing for 1 turn. Or detect traps within 6 spaces (1 AP) with +5 bonus. Maximum 2 active traps.",
      "effects": [
        {
          "type": "PlaceTrap",
          "damage": "1d8",
          "damageType": "Piercing",
          "condition": "Immobilized",
          "conditionDuration": 1,
          "maxActive": 2
        },
        {
          "type": "DetectTraps",
          "bonus": 5,
          "autoDetectDc": 15
        }
      ]
    },
    {
      "abilityId": "predators-patience",
      "displayName": "Predator's Patience",
      "specializationId": "Veiðimaðr",
      "tier": 2,
      "type": "Stance",
      "apCost": 0,
      "description": "Enter a patient hunting stance. While in stance, if you didn't move this turn, gain +3 to hit on all attacks. Toggle on/off as free action.",
      "effects": [
        {
          "type": "ConditionalHitBonus",
          "condition": "NoMovement",
          "bonus": 3
        }
      ]
    },
    {
      "abilityId": "apex-predator",
      "displayName": "Apex Predator",
      "specializationId": "Veiðimaðr",
      "tier": 3,
      "type": "Passive",
      "description": "Your marked Quarry cannot benefit from concealment against you. Applies to darkness, invisibility, fog, and magical obscurement.",
      "effects": [
        {
          "type": "DenyConcealment",
          "condition": "IsQuarry",
          "concealmentTypes": ["Light", "Heavy", "Invisibility", "Darkness", "Fog"]
        }
      ]
    },
    {
      "abilityId": "crippling-shot",
      "displayName": "Crippling Shot",
      "specializationId": "Veiðimaðr",
      "tier": 3,
      "type": "Attack",
      "apCost": 3,
      "range": -1,
      "rangeType": "WeaponRange",
      "requiresRanged": true,
      "description": "Make a ranged attack. On hit, deal weapon damage and halve target's movement speed for 2 turns.",
      "effects": [
        {
          "type": "WeaponAttack",
          "weaponType": "Ranged"
        },
        {
          "type": "ApplyDebuff",
          "debuff": "Crippled",
          "movementReduction": 0.5,
          "duration": 2
        }
      ],
      "targeting": {
        "validTargets": ["Enemy"],
        "requiresRangedWeapon": true
      }
    },
    {
      "abilityId": "the-perfect-hunt",
      "displayName": "The Perfect Hunt",
      "specializationId": "Veiðimaðr",
      "tier": "capstone",
      "type": "Ultimate",
      "apCost": 2,
      "cooldown": "LongRest",
      "description": "Declare a Perfect Hunt against one marked Quarry. Your next attack against that target is an automatic critical hit, doubling all damage dice. Once per long rest.",
      "requirements": {
        "targetHasQuarryMark": true
      },
      "effects": [
        {
          "type": "AutomaticCritical",
          "nextAttackOnly": true,
          "mustTargetDeclaredQuarry": true
        }
      ],
      "targeting": {
        "validTargets": ["Quarry"],
        "requiresQuarryMark": true
      }
    }
  ]
}
```

---

## Estimated Effort Summary

| Phase | New Files | Modified Files | Est. Tests | Complexity |
|-------|-----------|----------------|------------|------------|
| v0.20.7a | ~8 | ~4 | ~10 | Medium |
| v0.20.7b | ~5 | ~3 | ~8 | Medium |
| v0.20.7c | ~4 | ~2 | ~7 | Medium |
| **Total** | **~17** | **~9** | **~25** | |

---

## Risk Assessment

| Risk | Impact | Probability | Mitigation |
|------|--------|-------------|------------|
| Quarry Mark tracking complexity | Medium | Medium | Clear mark lifecycle rules, auto-cleanup |
| Predator's Patience balance (too strong) | Medium | Medium | Only +3, requires no movement |
| Trap placement edge cases | Medium | Low | Clear placement rules, max 2 limit |
| Perfect Hunt auto-crit balance | High | Low | Once per long rest, requires setup |
| Cover/Concealment rule confusion | Medium | Medium | Clear documentation, separate abilities |
| Mark persistence across encounters | Low | Low | Always clear on encounter end |

---

## Design Decisions (Confirmed)

### Quarry Marks Resource

| Decision | Value | Notes |
|----------|-------|-------|
| **Max Marks** | 3 | Multiple targets, manageable tracking |
| **Starting Marks** | 0 | Must earn marks through ability |
| **Mark Duration** | Until defeated/encounter end | No turn-based decay |
| **Base Hit Bonus** | +2 | Significant but not overwhelming |

### Combat Balance

| Decision | Value | Notes |
|----------|-------|-------|
| **Mark Quarry Cost** | 1 AP | Low cost, marking is core identity |
| **Predator's Patience Bonus** | +3 | High reward for positioning sacrifice |
| **Crippling Shot Duration** | 2 turns | Meaningful without permanent cripple |
| **Perfect Hunt Cooldown** | Once/long rest | Prevents abuse of auto-crit |

### Ability Interactions

| Decision | Value | Notes |
|----------|-------|-------|
| **Stance Stacking** | No | Cannot be in multiple stances |
| **Mark + Patience** | Yes | +5 total to hit on Quarry |
| **Hunter's Eye + Apex** | Complementary | One for cover, one for concealment |
| **Perfect Hunt Requirement** | Must be Quarry | Prevents use on any target |

---

## Unit Test Specifications

### v0.20.7a Tests (~10 tests)

#### QuarryMarksResourceTests.cs

```csharp
[TestFixture]
public class QuarryMarksResourceTests
{
    [Test]
    public void Create_InitializesWithZeroMarks();

    [Test]
    public void AddMark_UnderMax_AddsSuccessfully();

    [Test]
    public void AddMark_AtMax_ReplacesOldest();

    [Test]
    public void AddMark_SameTarget_RefreshesMark();

    [Test]
    public void RemoveMark_ExistingTarget_ReturnsTrue();

    [Test]
    public void HasMark_MarkedTarget_ReturnsTrue();

    [Test]
    public void ClearAllMarks_RemovesAllMarks();
}
```

#### VeiðimaðrAbilityServiceTests.cs

```csharp
[TestFixture]
public class VeiðimaðrAbilityServiceTests
{
    [Test]
    public void MarkQuarry_ValidTarget_CreatesMarkWithBonus();

    [Test]
    public void KeenSenses_GrantsPerceptionBonus();

    [Test]
    public void ReadTheSigns_HighRoll_RevealsMoreInfo();
}
```

### v0.20.7b Tests (~8 tests)

#### Tier2AbilityTests.cs

```csharp
[TestFixture]
public class Tier2AbilityTests
{
    [Test]
    public void HuntersEye_IgnoresPartialCover();

    [Test]
    public void HuntersEye_DoesNotIgnoreFullCover();

    [Test]
    public void TrapMastery_PlaceTrap_DealsCorrectDamage();

    [Test]
    public void TrapMastery_MaxTwoTraps_Enforced();

    [Test]
    public void TrapMastery_DetectTraps_AppliesBonus();

    [Test]
    public void PredatorsPatience_NoMovement_GrantsBonus();

    [Test]
    public void PredatorsPatience_AfterMovement_NoBonus();

    [Test]
    public void Tier2_LockedUntil8PPInvested();
}
```

### v0.20.7c Tests (~7 tests)

#### Tier3AndCapstoneTests.cs

```csharp
[TestFixture]
public class Tier3AndCapstoneTests
{
    [Test]
    public void ApexPredator_DeniesConcealment_ToQuarry();

    [Test]
    public void ApexPredator_DoesNotAffect_NonQuarry();

    [Test]
    public void CripplingShot_HalvesMovement();

    [Test]
    public void CripplingShot_LastsTwoTurns();

    [Test]
    public void PerfectHunt_AutomaticCritical();

    [Test]
    public void PerfectHunt_RequiresQuarryMark();

    [Test]
    public void PerfectHunt_OncePerLongRest();
}
```

---

## Integration Points

### With Prior Specializations

| System | Integration Point |
|--------|-------------------|
| Specialization framework | Follows established v0.20.1-v0.20.6 patterns |
| Special resource patterns | Target-tracking resource (different from consumable/regenerating) |
| Coherent path | No Corruption integration needed |
| Skirmisher archetype | Second Skirmisher after Myrk-gengr (contrasting path) |

### With Core Systems

| System | Integration Point |
|--------|-------------------|
| Status Effect System (v0.10.x) | Crippled condition, Immobilized from traps |
| Combat System | Hit bonuses, cover mechanics, concealment |
| Perception System | Keen Senses bonus, trap detection |
| Target Tracking | Quarry Mark persistence |

### Provides to Future Versions

| Provides | Consumer |
|----------|----------|
| Target-tracking resource patterns | Future mark/focus specializations |
| Cover/concealment bypass patterns | Other ranged specialists |
| Trap placement system | Future trap-using classes |
| Stance mechanics | Other stance-based specializations |
| Auto-critical patterns | Other high-damage capstones |

---

## Deliverable Checklist

### Domain Layer

- [ ] `QuarryMarksResource` value object
- [ ] `QuarryMark` value object
- [ ] `MarkQuarryResult` value object
- [ ] `ReadTheSignsResult` value object
- [ ] `HuntersEyeResult` value object
- [ ] `TrapPlacement` value object
- [ ] `TrapDetectionResult` value object
- [ ] `PredatorsPatienceState` value object
- [ ] `ApexPredatorEffect` value object
- [ ] `CripplingShotResult` value object
- [ ] `PerfectHuntResult` value object
- [ ] `VeiðimaðrAbilityId` enum
- [ ] `QuarryStatus` enum
- [ ] `CreatureTrackType` enum
- [ ] `TrapType` enum
- [ ] `CoverType` enum
- [ ] `MovementReductionType` enum

### Application Layer

- [ ] `QuarryMarksService` implementation
- [ ] `VeiðimaðrAbilityService` implementation
- [ ] Mark Quarry ability handler
- [ ] Keen Senses passive integration
- [ ] Read the Signs ability handler
- [ ] Hunter's Eye ability handler
- [ ] Trap Mastery ability handler
- [ ] Predator's Patience stance handler
- [ ] Apex Predator passive integration
- [ ] Crippling Shot ability handler
- [ ] The Perfect Hunt ability handler

### Infrastructure Layer

- [ ] `specializations.json` Veiðimaðr entry
- [ ] `abilities.json` Veiðimaðr abilities (9 total)

### Tests

- [ ] QuarryMarksResourceTests.cs (~7 tests)
- [ ] VeiðimaðrAbilityServiceTests.cs (~3 tests)
- [ ] Tier2AbilityTests.cs (~8 tests)
- [ ] Tier3AndCapstoneTests.cs (~7 tests)

---

## Next Steps

1. **Review & Approve** - Confirm scope breakdown with stakeholders
2. **v0.20.7a Design Spec** - Create detailed design specification for Tier 1
3. **Implement v0.20.7a** - Build Quarry Marks resource and Tier 1 abilities
4. **v0.20.7b Design Spec** - Create detailed design specification for Tier 2
5. **Implement v0.20.7b** - Build Tier 2 abilities including traps and stance
6. **v0.20.7c Design Spec** - Create detailed design specification for Tier 3 & Capstone
7. **Implement v0.20.7c** - Build Tier 3 abilities and The Perfect Hunt
8. **Proceed to v0.20.8** - Seiðkona specialization (Heretical mystic path)

---

*This scope breakdown provides a structured approach to implementing the Veiðimaðr specialization — the master hunter of the Skirmisher archetype. As a Coherent path with no Corruption risk, the Veiðimaðr offers reliable ranged combat superiority through patience and precision rather than dark power. The Quarry Marks resource creates a target-focused playstyle where marking and tracking prey leads to devastating culminating strikes. Each sub-phase builds on the previous, allowing for incremental development and testing of the hunter archetype.*
