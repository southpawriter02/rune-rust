{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "backgrounds.schema.json",
    "title": "Backgrounds Configuration",
    "description": "Defines background data for the character creation system. Each background represents a pre-Silence profession that determines starting skills, equipment, social standing, and narrative hooks.",
    "type": "object",
    "required": ["backgrounds"],
    "properties": {
        "$schema": {
            "type": "string",
            "description": "JSON schema reference for editor support"
        },
        "backgrounds": {
            "type": "array",
            "description": "Array of background definitions. Must contain exactly 6 backgrounds, one for each Background enum value.",
            "minItems": 6,
            "maxItems": 6,
            "items": {
                "$ref": "#/definitions/backgroundDefinition"
            }
        }
    },
    "definitions": {
        "skillGrant": {
            "type": "object",
            "description": "A skill bonus granted by the background. Each background typically grants a primary (+2) and secondary (+1) skill bonus reflecting pre-Silence professional expertise.",
            "required": ["skillId", "bonusAmount", "grantType"],
            "properties": {
                "skillId": {
                    "type": "string",
                    "description": "Lowercase skill identifier matching the skill system (e.g., 'craft', 'medicine', 'combat').",
                    "pattern": "^[a-z][a-z0-9-]*$",
                    "minLength": 1,
                    "maxLength": 50
                },
                "bonusAmount": {
                    "type": "integer",
                    "description": "Bonus amount to add to the skill (typically +1 or +2 for background grants).",
                    "minimum": 0,
                    "maximum": 5
                },
                "grantType": {
                    "type": "string",
                    "description": "How the bonus is applied: Permanent (added to base forever), StartingBonus (creation only), Proficiency (removes untrained penalty).",
                    "enum": ["Permanent", "StartingBonus", "Proficiency"]
                }
            },
            "additionalProperties": false
        },
        "equipmentGrant": {
            "type": "object",
            "description": "Starting equipment granted by the background. Items may be auto-equipped to specific slots or placed in inventory.",
            "required": ["itemId", "quantity", "isEquipped"],
            "properties": {
                "itemId": {
                    "type": "string",
                    "description": "Lowercase item identifier using kebab-case (e.g., 'smiths-hammer', 'healers-kit').",
                    "pattern": "^[a-z][a-z0-9-]*$",
                    "minLength": 1,
                    "maxLength": 50
                },
                "quantity": {
                    "type": "integer",
                    "description": "Number of items to grant. Consumables like bandages and rations may have quantity > 1.",
                    "minimum": 1,
                    "maximum": 99
                },
                "isEquipped": {
                    "type": "boolean",
                    "description": "Whether to auto-equip the item to the specified slot at character creation."
                },
                "slot": {
                    "type": ["string", "null"],
                    "description": "Equipment slot for auto-equip. Required when isEquipped is true. Uses EquipmentSlot enum values.",
                    "enum": [
                        null,
                        "Weapon",
                        "Armor",
                        "Shield",
                        "Helmet",
                        "Boots",
                        "Ring",
                        "Amulet"
                    ]
                }
            },
            "additionalProperties": false
        },
        "backgroundDefinition": {
            "type": "object",
            "description": "Definition of a single background including display properties, profession context, social standing, narrative hooks, skill grants, and equipment grants.",
            "required": [
                "backgroundId",
                "displayName",
                "description",
                "selectionText",
                "professionBefore",
                "socialStanding"
            ],
            "properties": {
                "backgroundId": {
                    "type": "string",
                    "description": "The enum name for this background. Must match a value in the Background enum exactly.",
                    "enum": [
                        "VillageSmith",
                        "TravelingHealer",
                        "RuinDelver",
                        "ClanGuard",
                        "WanderingSkald",
                        "OutcastScavenger"
                    ]
                },
                "displayName": {
                    "type": "string",
                    "description": "Display name shown in the character creation UI and character sheet.",
                    "minLength": 1,
                    "maxLength": 50
                },
                "description": {
                    "type": "string",
                    "description": "Full lore description of the background for detail views and character sheet.",
                    "minLength": 10,
                    "maxLength": 500
                },
                "selectionText": {
                    "type": "string",
                    "description": "Flavor text for character creation selection screen. Written in second person to help players connect with the backstory.",
                    "minLength": 10,
                    "maxLength": 500
                },
                "professionBefore": {
                    "type": "string",
                    "description": "Brief description of the character's pre-Silence occupation (e.g., 'Blacksmith and metalworker').",
                    "minLength": 1,
                    "maxLength": 100
                },
                "socialStanding": {
                    "type": "string",
                    "description": "How post-Silence society views characters with this background. Affects NPC reactions and dialogue options.",
                    "minLength": 1,
                    "maxLength": 200
                },
                "narrativeHooks": {
                    "type": "array",
                    "description": "Quest and dialogue trigger strings that the narrative event system can match against. Each hook provides a background-specific interaction opportunity.",
                    "items": {
                        "type": "string",
                        "description": "A single narrative hook string describing a potential background-specific interaction.",
                        "minLength": 1,
                        "maxLength": 200
                    },
                    "minItems": 0,
                    "maxItems": 10
                },
                "skillGrants": {
                    "type": "array",
                    "description": "Skill bonuses granted by this background. Each background typically has a primary (+2) and secondary (+1) skill grant.",
                    "items": {
                        "$ref": "#/definitions/skillGrant"
                    },
                    "minItems": 0,
                    "maxItems": 5
                },
                "equipmentGrants": {
                    "type": "array",
                    "description": "Starting equipment from this background. Items may be auto-equipped or inventory-only.",
                    "items": {
                        "$ref": "#/definitions/equipmentGrant"
                    },
                    "minItems": 0,
                    "maxItems": 10
                }
            },
            "additionalProperties": false
        }
    }
}
