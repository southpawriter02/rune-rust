# v0.16.1 Weapon Proficiency System - Scope Breakdown

**Version:** 0.16.1  
**Theme:** Weapon Proficiency System  
**Prerequisites:** v0.16.0 Complete (Quality Tier System)  
**Total Estimated Tests:** ~20 new tests

---

## Executive Summary

This version implements the weapon proficiency system that determines how effectively characters can use different weapon types. Using a weapon without proficiency imposes significant penalties, while advanced proficiency levels provide bonuses. Each archetype starts with different proficiencies, and characters can acquire new ones through training or experience.

The work is divided into **6 sub-phases**:

| Phase    | Name                            | Focus                                                  | Est. Tests |
| -------- | ------------------------------- | ------------------------------------------------------ | ---------- |
| v0.16.1a | Proficiency Level Enum          | WeaponProficiencyLevel, ProficiencyEffect              | ~4         |
| v0.16.1b | Weapon Category System          | WeaponCategory enum, WeaponCategoryDefinition          | ~2         |
| v0.16.1c | Archetype Proficiency Matrix    | ArchetypeProficiencySet, IArchetypeProficiencyProvider | ~4         |
| v0.16.1d | Character Proficiency Tracking  | CharacterProficiencies, ProficiencyProgress            | ~4         |
| v0.16.1e | Proficiency Acquisition Service | IProficiencyAcquisitionService, training logic         | ~4         |
| v0.16.1f | Combat Integration              | IProficiencyCheckService, combat modifiers             | ~2         |

---

## Feature Analysis & Categorization

### Proficiency Levels

| Feature                     | Complexity | Dependencies           | Assigned Phase |
| --------------------------- | ---------- | ---------------------- | -------------- |
| WeaponProficiencyLevel enum | Low        | None                   | **v0.16.1a**   |
| ProficiencyEffect VO        | Low        | WeaponProficiencyLevel | **v0.16.1a**   |
| proficiency-effects.json    | Low        | ProficiencyEffect      | **v0.16.1a**   |

### Weapon Categories

| Feature                             | Complexity | Dependencies             | Assigned Phase |
| ----------------------------------- | ---------- | ------------------------ | -------------- |
| WeaponCategory enum (11 categories) | Low        | None                     | **v0.16.1b**   |
| WeaponCategoryDefinition VO         | Medium     | WeaponCategory           | **v0.16.1b**   |
| weapon-categories.json              | Low        | WeaponCategoryDefinition | **v0.16.1b**   |

### Archetype Matrix

| Feature                        | Complexity | Dependencies            | Assigned Phase |
| ------------------------------ | ---------- | ----------------------- | -------------- |
| ArchetypeProficiencySet entity | Medium     | WeaponCategory          | **v0.16.1c**   |
| IArchetypeProficiencyProvider  | Medium     | ArchetypeProficiencySet | **v0.16.1c**   |
| archetype-proficiencies.json   | Low        | ArchetypeProficiencySet | **v0.16.1c**   |

### Character Tracking

| Feature                       | Complexity | Dependencies           | Assigned Phase |
| ----------------------------- | ---------- | ---------------------- | -------------- |
| CharacterProficiencies entity | Medium     | All enums              | **v0.16.1d**   |
| ProficiencyProgress VO        | Low        | CharacterProficiencies | **v0.16.1d**   |
| Combat experience tracking    | Medium     | CharacterProficiencies | **v0.16.1d**   |

### Acquisition

| Feature                        | Complexity | Dependencies                   | Assigned Phase |
| ------------------------------ | ---------- | ------------------------------ | -------------- |
| IProficiencyAcquisitionService | Medium     | CharacterProficiencies         | **v0.16.1e**   |
| ProficiencyGainResult VO       | Low        | IProficiencyAcquisitionService | **v0.16.1e**   |
| TrainingResult VO              | Low        | IProficiencyAcquisitionService | **v0.16.1e**   |

### Combat Integration

| Feature                  | Complexity | Dependencies             | Assigned Phase |
| ------------------------ | ---------- | ------------------------ | -------------- |
| IProficiencyCheckService | Medium     | All v0.16.1a-e           | **v0.16.1f**   |
| Attack/damage modifiers  | Medium     | IProficiencyCheckService | **v0.16.1f**   |

---

## Phase Definitions

---

## v0.16.1a: Proficiency Level Enum

[v0.16.1a Design Specification](v0.16.1a-design-specification.md)

### Overview

Defines proficiency levels and their combat effects (attack/damage modifiers, technique access).

### Scope

**In Scope:**

- WeaponProficiencyLevel enum (NonProficient, Proficient, Expert, Master)
- ProficiencyEffect value object
- proficiency-effects.json configuration

**Out of Scope:**

- Weapon categories (v0.16.1b)
- Archetype matrix (v0.16.1c)

### Key Deliverables

| Type                 | Count | Details                    |
| -------------------- | ----- | -------------------------- |
| Domain Enums         | 1     | `WeaponProficiencyLevel`   |
| Domain Value Objects | 1     | `ProficiencyEffect`        |
| Configuration        | 1     | `proficiency-effects.json` |
| Unit Tests           | ~4    |                            |

### Data Model Changes

```
NEW: WeaponProficiencyLevel (Enum)
├── NonProficient = 0
├── Proficient = 1
├── Expert = 2
└── Master = 3

NEW: ProficiencyEffect (Value Object)
├── Level: WeaponProficiencyLevel
├── AttackModifier: int
├── DamageModifier: int
├── CanUseSpecialProperties: bool
└── UnlockedTechniques: List<string>
```

### Proficiency Effects

| Level         | Attack | Damage | Special Props | Techniques |
| ------------- | ------ | ------ | ------------- | ---------- |
| NonProficient | -3     | -2     | No            | None       |
| Proficient    | 0      | 0      | Yes           | Basic      |
| Expert        | +1     | 0      | Yes           | Advanced   |
| Master        | +2     | +1     | Yes           | Signature  |

### Acceptance Criteria

- [ ] NonProficient applies -3 attack, -2 damage
- [ ] Proficient has no penalties
- [ ] Expert grants +1 attack
- [ ] Master grants +2 attack, +1 damage
- [ ] ~4 unit tests pass

---

## v0.16.1b: Weapon Category System

[v0.16.1b Design Specification](v0.16.1b-design-specification.md)

### Overview

Defines the 11 weapon categories and their primary attributes.

### Scope

**In Scope:**

- WeaponCategory enum (11 categories)
- WeaponCategoryDefinition value object
- weapon-categories.json configuration
- Attribute mapping (MIGHT, FINESSE, WILL, WITS)

**Out of Scope:**

- Archetype matrix (v0.16.1c)
- Character tracking (v0.16.1d)

### Key Deliverables

| Type                 | Count | Details                    |
| -------------------- | ----- | -------------------------- |
| Domain Enums         | 1     | `WeaponCategory`           |
| Domain Value Objects | 1     | `WeaponCategoryDefinition` |
| Configuration        | 1     | `weapon-categories.json`   |
| Unit Tests           | ~2    |                            |

### Data Model Changes

```
NEW: WeaponCategory (Enum)
├── Axes
├── Swords
├── Hammers
├── Daggers
├── Polearms
├── Staves
├── Bows
├── Crossbows
├── Shields
├── Firearms
└── ArcaneImplements

NEW: WeaponCategoryDefinition (Value Object)
├── Category: WeaponCategory
├── DisplayName: string
├── Description: string
├── ExampleWeapons: List<string>
├── PrimaryAttribute: string
└── RequiresSpecialTraining: bool
```

### Acceptance Criteria

- [ ] All 11 categories defined
- [ ] Special training flag set for Firearms
- [ ] ~2 unit tests pass

---

## v0.16.1c: Archetype Proficiency Matrix

[v0.16.1c Design Specification](v0.16.1c-design-specification.md)

### Overview

Defines which archetypes are proficient with which weapon categories.

### Scope

**In Scope:**

- ArchetypeProficiencySet entity
- IArchetypeProficiencyProvider interface
- archetype-proficiencies.json configuration

**Out of Scope:**

- Character-level tracking (v0.16.1d)
- Acquisition methods (v0.16.1e)

### Key Deliverables

| Type                   | Count | Details                         |
| ---------------------- | ----- | ------------------------------- |
| Domain Entities        | 1     | `ArchetypeProficiencySet`       |
| Application Interfaces | 1     | `IArchetypeProficiencyProvider` |
| Configuration          | 1     | `archetype-proficiencies.json`  |
| Unit Tests             | ~4    |                                 |

### Archetype Matrix

| Archetype  | Proficient Categories                                        |
| ---------- | ------------------------------------------------------------ |
| Warrior    | All weapons, all armor, shields                              |
| Skirmisher | Daggers, one-handed swords, one-handed axes, bows, crossbows |
| Mystic     | Daggers, staves, arcane implements                           |
| Adept      | Daggers, staves, one-handed hammers, light crossbows         |

### Acceptance Criteria

- [ ] Warrior proficient with all weapons
- [ ] Mystic only proficient with Daggers, Staves, ArcaneImplements
- [ ] Skirmisher non-proficient with two-handed melee
- [ ] Adept proficient with light crossbows
- [ ] ~4 unit tests pass

---

## v0.16.1d: Character Proficiency Tracking

[v0.16.1d Design Specification](v0.16.1d-design-specification.md)

### Overview

Tracks individual character proficiency levels and combat experience progress.

### Scope

**In Scope:**

- CharacterProficiencies entity
- ProficiencyProgress value object
- Combat experience thresholds (10 combats → Proficient)

**Out of Scope:**

- Acquisition service (v0.16.1e)
- Combat integration (v0.16.1f)

### Key Deliverables

| Type                 | Count | Details                  |
| -------------------- | ----- | ------------------------ |
| Domain Entities      | 1     | `CharacterProficiencies` |
| Domain Value Objects | 1     | `ProficiencyProgress`    |
| Unit Tests           | ~4    |                          |

### Combat Experience Thresholds

| Transition                 | Combats Required |
| -------------------------- | ---------------- |
| NonProficient → Proficient | 10               |
| Proficient → Expert        | 25               |
| Expert → Master            | 50               |

### Acceptance Criteria

- [ ] New character has archetype proficiencies
- [ ] Combat experience increments correctly
- [ ] 10 combats grants proficiency
- [ ] Cannot advance beyond Master
- [ ] ~4 unit tests pass

---

## v0.16.1e: Proficiency Acquisition Service

[v0.16.1e Design Specification](v0.16.1e-design-specification.md)

### Overview

Handles all methods of acquiring proficiency: archetype, specialization, NPC training, combat experience, and PP purchase.

### Scope

**In Scope:**

- IProficiencyAcquisitionService interface
- ProficiencyGainResult value object
- TrainingResult value object
- All acquisition methods

**Out of Scope:**

- Combat integration (v0.16.1f)

### Key Deliverables

| Type                   | Count | Details                                   |
| ---------------------- | ----- | ----------------------------------------- |
| Application Interfaces | 1     | `IProficiencyAcquisitionService`          |
| Domain Value Objects   | 2     | `ProficiencyGainResult`, `TrainingResult` |
| Unit Tests             | ~4    |                                           |

### Acquisition Methods

| Method            | PP Cost | PS Cost | Time      |
| ----------------- | ------- | ------- | --------- |
| Archetype         | Free    | —       | Instant   |
| Specialization    | Free    | —       | Instant   |
| NPC Training      | —       | 50-200  | 1-4 weeks |
| Combat Experience | —       | —       | 10 fights |
| Progression Point | 2 PP    | —       | Instant   |

### Acceptance Criteria

- [ ] InitializeFromArchetype sets correct proficiencies
- [ ] 10 combats transitions to Proficient
- [ ] PP purchase grants proficiency
- [ ] Training calculates correct cost/time
- [ ] ~4 unit tests pass

---

## v0.16.1f: Combat Integration

[v0.16.1f Design Specification](v0.16.1f-design-specification.md)

### Overview

Integrates proficiency checks into the combat system for attack/damage modifiers.

### Scope

**In Scope:**

- IProficiencyCheckService interface
- Attack modifier calculation
- Damage modifier calculation
- Special property blocking for NonProficient
- Combat experience recording

**Out of Scope:**

- Advanced techniques (future version)

### Key Deliverables

| Type                   | Count | Details                    |
| ---------------------- | ----- | -------------------------- |
| Application Interfaces | 1     | `IProficiencyCheckService` |
| Unit Tests             | ~2    |                            |

### Acceptance Criteria

- [ ] NonProficient attack has -3 modifier
- [ ] Combat experience recorded on attack
- [ ] ~2 unit tests pass

---

## Dependencies & Prerequisites

```
v0.16.0 (Quality Tier System) - REQUIRED
    │
    └── Complete
            │
            ▼
v0.16.1 (Weapon Proficiency System)
    │
    ├── v0.16.1a: Proficiency Level Enum ──────────┐
    │       Dependencies: None                      │
    │                                               │
    ├── v0.16.1b: Weapon Category System ──────────┤
    │       Dependencies: None                      │
    │                                               │
    ├── v0.16.1c: Archetype Proficiency Matrix ────┤
    │       Dependencies: v0.16.1a, v0.16.1b        │
    │                                               │
    ├── v0.16.1d: Character Proficiency Tracking ──┤
    │       Dependencies: v0.16.1a, v0.16.1b        │
    │                                               │
    ├── v0.16.1e: Proficiency Acquisition Service ─┤
    │       Dependencies: v0.16.1c, v0.16.1d        │
    │                                               │
    └── v0.16.1f: Combat Integration ──────────────┘
            Dependencies: v0.16.1a-e
```

---

## Configuration Files

| File                           | Purpose                     | Phase    |
| ------------------------------ | --------------------------- | -------- |
| `proficiency-effects.json`     | Level bonuses/penalties     | v0.16.1a |
| `weapon-categories.json`       | Category definitions        | v0.16.1b |
| `archetype-proficiencies.json` | Starting proficiency matrix | v0.16.1c |
| `proficiency-training.json`    | NPC training costs/times    | v0.16.1e |

---

## Estimated Effort Summary

| Phase     | New Files | Modified Files | Est. Tests | Complexity |
| --------- | --------- | -------------- | ---------- | ---------- |
| v0.16.1a  | ~3        | 0              | ~4         | Low        |
| v0.16.1b  | ~3        | 0              | ~2         | Low        |
| v0.16.1c  | ~3        | 0              | ~4         | Medium     |
| v0.16.1d  | ~3        | 0              | ~4         | Medium     |
| v0.16.1e  | ~4        | 0              | ~4         | Medium     |
| v0.16.1f  | ~2        | ~2             | ~2         | Medium     |
| **Total** | **~18**   | **~2**         | **~20**    |            |

---

## Risk Assessment

| Risk                          | Impact | Probability | Mitigation                                |
| ----------------------------- | ------ | ----------- | ----------------------------------------- |
| Combat integration complexity | Medium | Medium      | Extensive testing of modifier application |
| Experience threshold balance  | Low    | Medium      | Configurable thresholds for tuning        |

---

_This scope breakdown provides a structured approach to implementing v0.16.1 Weapon Proficiency System. Each sub-phase builds on the previous, allowing for incremental development and testing._
