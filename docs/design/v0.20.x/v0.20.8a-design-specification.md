# Design Specification: v0.20.8a - Seiðkona Framework & Tier 1 Abilities

**Version:** v0.20.8a
**Status:** Design Phase
**Last Updated:** 2026-01-28
**Target Tests:** ~12 unit and integration tests
**Specialization:** Seiðkona (Seeress)
**Path Type:** Heretical (Final)
**Archetype:** Mystic
**Pronunciation:** SAY-th-koh-nah

---

## Table of Contents

1. [Executive Summary](#1-executive-summary)
2. [Specialization Overview](#2-specialization-overview)
3. [Architecture Diagrams](#3-architecture-diagrams)
4. [Domain Model Specifications](#4-domain-model-specifications)
5. [Aether Resonance Resource System](#5-aether-resonance-resource-system)
6. [Corruption Risk Framework](#6-corruption-risk-framework)
7. [Seiðr Bolt Ability Specification](#7-seiðr-bolt-ability-specification)
8. [Wyrd Sight Ability Specification](#8-wyrd-sight-ability-specification)
9. [Aether Attunement Ability Specification](#9-aether-attunement-ability-specification)
10. [User Stories](#10-user-stories)
11. [Application Service Layer](#11-application-service-layer)
12. [Configuration Specifications](#12-configuration-specifications)
13. [Code Examples & Implementation](#13-code-examples--implementation)
14. [Accumulated Aetheric Damage Tracking](#14-accumulated-aetheric-damage-tracking)
15. [Corruption Integration Patterns](#15-corruption-integration-patterns)
16. [Logging Specifications](#16-logging-specifications)
17. [Unit Testing Requirements](#17-unit-testing-requirements)
18. [Deliverable Checklist](#18-deliverable-checklist)
19. [Acceptance Criteria](#19-acceptance-criteria)
20. [Dependencies & Prerequisites](#20-dependencies--prerequisites)

---

## 1. Executive Summary

Version 0.20.8a introduces the **Seiðkona (Seeress)** specialization framework, establishing the **final Heretical path** in v0.20.x and the **only Mystic archetype**. This phase focuses on:

- **Aether Resonance Resource:** Special resource unique to Seiðkona, built through casting (not consumed except by capstone)
- **Corruption Risk Integration:** Dynamic risk scaling with Resonance level (5% at 5-7, 15% at 8-9, 25% at max)
- **Accumulated Aetheric Damage Tracking:** Separate damage accumulation for Unraveling capstone reset
- **Tier 1 Abilities (3):** Seiðr Bolt (damage + Resonance build), Wyrd Sight (detection), Aether Attunement (resource regen)

### Key Deliverables

| Category | Count | Details |
|----------|-------|---------|
| **Domain Value Objects** | 5 | AetherResonanceResource, AccumulatedAethericDamage, CorruptionRiskResult, ResidualWeave, RitualComponent |
| **Domain Enums** | 2 | SeiðkonaAbilityId, WyrdSightEffect |
| **Application Services** | 3 | AetherResonanceService, SeiðkonaAbilityService, ResidualWeaveService |
| **Ability Implementations** | 3 | Seiðr Bolt, Wyrd Sight, Aether Attunement |
| **Configuration Files** | 2 | specializations.json (Seiðkona entry), abilities.json (Tier 1) |
| **Unit Tests** | ~12 | Comprehensive coverage including Corruption risk scaling |

### Specialization Profile

| Attribute | Value |
|-----------|-------|
| **Display Name** | Seiðkona |
| **Pronunciation** | SAY-th-koh-nah |
| **Translation** | Seeress / Mystic / Aether-Walker |
| **Archetype** | Mystic |
| **Path Type** | Heretical |
| **Role** | Aether Magic / Prophecy / Corruption Mastery |
| **Special Resource** | Aether Resonance (Max 10) |
| **Tagline** | "Weaver of the Wyrd" |
| **Unlock Cost** | 0 PP (automatically available at Mystic selection) |
| **Tier 1 Cost** | 0 PP (core specialization abilities) |
| **Corruption Path** | Resonance-Locked (builds, not consumed except by Unraveling) |

---

## 2. Specialization Overview

### 2.1 Thematic Foundation

The Seiðkona stands as the ultimate heretic practitioner of Aethelgard's most dangerous magic: Aether manipulation. Unlike clerics bound by divine order or rogues stealing power from shadow, the Seiðkona weaves raw Wyrd-force—the chaotic probability stream itself. In doing so, she accumulates Aether Resonance, a passive attunement to the underlying chaos of reality. This resonance opens her to corruption, but provides unmatched magical flexibility.

**Design Principles:**

1. **Heretical Escalation:** Corruption risk increases with Resonance level (0-4 safe, 5-7 risky, 8-9 dangerous, 10 critical)
2. **Resource Builds:** Aether Resonance builds through casting (not spent), creating risk-reward tension
3. **Damage Accumulation:** Aetheric damage accumulates separately, enabling Unraveling's massive payoff
4. **Prophecy & Detection:** Access to hidden knowledge and perception-related effects
5. **Final Heretical Path:** Seiðkona represents the most powerful but most dangerous Heretical specialization
6. **Only Mystic Specialization:** Unique archetype representation in v0.20.x

### 2.2 Tier 1 Identity

**Tier 1 Abilities (Immediately Available):**

| Ability | Type | AP Cost | Effect |
|---------|------|---------|--------|
| **Seiðr Bolt** | Active | 1 AP | 2d6 Aetheric damage, +1 Resonance, +1 Accumulated Aetheric Damage |
| **Wyrd Sight** | Active | 2 AP | See invisible/detect magic, 3 turns duration, no Resonance gain |
| **Aether Attunement** | Passive | — | +10% AP regeneration rate (passive, always active) |

**Resource Status:**
- Starts at Resonance 0/10
- Builds through Seiðr Bolt casting
- Each cast triggers Corruption check based on current Resonance
- Accumulated Aetheric Damage tracks for Unraveling capstone

---

## 3. Architecture Diagrams

### 3.1 Domain Layer Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│             v0.20.8a - Seiðkona Domain Layer                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌────────────────────────┐  ┌────────────────────────────┐    │
│  │ AetherResonanceResource│  │ AccumulatedAethericDamage  │    │
│  │ (Value Object)         │  │ (Value Object)             │    │
│  ├────────────────────────┤  ├────────────────────────────┤    │
│  │ + CurrentResonance: int│  │ + TotalDamage: int         │    │
│  │ + MaxResonance: int=10 │  │ + CastsToMax: int          │    │
│  │ + LastCastAt?: DateTime│  │ + DamageBreakdown: dict    │    │
│  │ + BuildRate: decimal   │  │ + LastUpdateAt: DateTime   │    │
│  ├────────────────────────┤  ├────────────────────────────┤    │
│  │ + Build(int): void     │  │ + AddDamage(int): void     │    │
│  │ + CanCast(): bool      │  │ + Reset(): void            │    │
│  │ + GetCorruptionRisk(): %│ │ + GetDescription(): string │    │
│  │ + ToString(): string   │  │ + CanUnravelNow(): bool    │    │
│  └────────────────────────┘  └────────────────────────────┘    │
│                                                                  │
│  ┌────────────────────────┐  ┌────────────────────────────┐    │
│  │ CorruptionRiskResult   │  │ ResidualWeave              │    │
│  │ (Value Object)         │  │ (Value Object)             │    │
│  ├────────────────────────┤  ├────────────────────────────┤    │
│  │ + RiskTriggered: bool  │  │ + WeavedAt: DateTime       │    │
│  │ + RiskPercentage: int  │  │ + IsActive: bool           │    │
│  │ + Reason: string       │  │ + DurationTurns: int       │    │
│  │ + AbilityUsed: string  │  │ + AffectedTarget: string   │    │
│  │ + ResonanceLevel: int  │  │ + Effect: string           │    │
│  ├────────────────────────┤  ├────────────────────────────┤    │
│  │ + WasInHighRisk(): bool│  │ + Expires(): bool          │    │
│  │ + GetDescription(): str│  │ + GetExpireTime(): DateTime│    │
│  │ + NeedsRoll(): bool    │  │ + ToString(): string       │    │
│  └────────────────────────┘  └────────────────────────────┘    │
│                                                                  │
│  ┌────────────────────────┐  ┌────────────────────────────┐    │
│  │ SeiðkonaAbilityId      │  │ WyrdSightEffect            │    │
│  │ (Enum)                 │  │ (Enum)                     │    │
│  ├────────────────────────┤  ├────────────────────────────┤    │
│  │ - SeiðrBolt            │  │ - SeeInvisible             │    │
│  │ - WyrdSight            │  │ - DetectMagic              │    │
│  │ - AetherAttunement     │  │ - SeeEthereal              │    │
│  │ - FatesThread          │  │ - DetectCorruption         │    │
│  │ - WeaveDisruption      │  │                            │    │
│  │ - ResonanceCascade     │  │                            │    │
│  │ - VölvasVision         │  │                            │    │
│  │ - AetherStorm          │  │                            │    │
│  │ - Unraveling           │  │                            │    │
│  └────────────────────────┘  └────────────────────────────┘    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 Service Layer Architecture

```
┌──────────────────────────────────────────────────────────────────┐
│         v0.20.8a - Application Services Layer                    │
├──────────────────────────────────────────────────────────────────┤
│                                                                   │
│  ┌────────────────────────────┐  ┌─────────────────────────────┐ │
│  │ IAetherResonanceService    │  │ IResidualWeaveService       │ │
│  │ (Interface)                │  │ (Interface)                 │ │
│  ├────────────────────────────┤  ├─────────────────────────────┤ │
│  │ + GetCurrentResonance()    │  │ + CreateWeave()             │ │
│  │ + BuildResonance(int)      │  │ + ApplyEffect()             │ │
│  │ + GetMaxResonance()        │  │ + RemoveExpiredWeaves()     │ │
│  │ + CanBuildMore(): bool     │  │ + GetActiveWeaves()         │ │
│  │ + GetCorruptionRisk(): %   │  │ + IsWoven(target): bool     │ │
│  │ + GetAccumulatedDamage()   │  │ + GetDuration(weave): int   │ │
│  │ + AddAccumulatedDamage()   │  │ + TogggleExpiration()       │ │
│  │ + ResetAccumulation()      │  └─────────────────────────────┘ │
│  └────────────────────────────┘                                   │
│             │                                                      │
│             └────────────────┬─────────────────┐                 │
│                              │                 │                 │
│  ┌────────────────────────────────────────────────────────────┐  │
│  │ ISeiðkonaAbilityService                                    │  │
│  │ (Core Ability Handler)                                     │  │
│  ├────────────────────────────────────────────────────────────┤  │
│  │ + ExecuteSeiðrBolt()                                       │  │
│  │ + ExecuteWyrdSight()                                       │  │
│  │ + ApplyAetherAttunement()                                  │  │
│  │ + ValidateAbilityUsage()                                   │  │
│  │ + CalculateResourceCost()                                  │  │
│  │ + GetAbilityDescription()                                  │  │
│  │ + TriggerCorruptionCheck()                                 │  │
│  └────────────────────────────────────────────────────────────┘  │
│                              │                                    │
│  ┌────────────────────────────────────────────────────────────┐  │
│  │ ICorruptionService (v0.18.x Integration)                  │  │
│  │ (Heretical Path Integration)                               │  │
│  ├────────────────────────────────────────────────────────────┤  │
│  │ + EvaluateCorruptionRisk()                                 │  │
│  │ + RollCorruptionCheck()                                    │  │
│  │ + ApplyCorruption()                                        │  │
│  │ + GetCurrentCorruptionLevel()                              │  │
│  │ + LogCorruptionEvent()                                     │  │
│  └────────────────────────────────────────────────────────────┘  │
│                                                                   │
└──────────────────────────────────────────────────────────────────┘
```

### 3.3 Aether Resonance Resource Flow

```
┌─────────────────┐
│ Seiðkona Cast   │
│ Seiðr Bolt      │
└────────┬────────┘
         │
         ▼
┌─────────────────────────────────────────┐
│ Check Current Resonance Level           │
│ 0-4: No corruption risk                 │
│ 5-7: 5% corruption chance               │
│ 8-9: 15% corruption chance              │
│ 10: 25% corruption chance               │
└────────────────┬────────────────────────┘
                 │
                 ▼
        ┌────────────────────┐
        │ Roll Corruption?   │
        └───────┬────────┬───┘
                │        │
              Pass      Fail
                │        │
                ▼        ▼
        ┌──────────┐  ┌──────────────────┐
        │ Success: │  │ CORRUPTED!       │
        │ +1 Damage│  │ Apply Corruption │
        │ Keep     │  │ Ability affected  │
        │ Resonance│  │                  │
        └──────────┘  └──────────────────┘
                │              │
                └──────┬───────┘
                       │
                       ▼
             ┌──────────────────┐
             │ Next Tier 2 Cast │
             │ (v0.20.8b)       │
             └──────────────────┘
```

### 3.4 Accumulated Aetheric Damage Mechanic

```
                 SEIÐKONA TIER 1 PHASE
           ┌─────────────────────────────┐
           │  Accumulated Aetheric       │
           │  Damage Tracking            │
           └──────────┬──────────────────┘
                      │
        Seiðr Bolt #1:+2d6 aetheric        Track separately from:
        └─►Accum: 2d6  Resonance: 0→1     - Character HP damage
                      │                    - Spell damage (instant)
        Seiðr Bolt #2:+2d6 aetheric        - Combat damage
        └─►Accum: 2d6+2d6 Resonance: 1→2   Result: Available for Unraveling
                      │                    Capstone only (v0.20.8c)
        [Continue for 10 casts to max Resonance]
                      │
                      ▼
        At Resonance 10 + Accum X damage:

        Option A: Use Unraveling Capstone
        └─►Deal ALL accumulated damage as once-off
           Reset Resonance to 0
           Reset Accumulated Damage to 0
           Trigger guaranteed 20% corruption check

        Option B: Do not use Capstone
        └─►Accumulated damage persists
           (Useful for setup rounds)
```

---

## 4. Domain Model Specifications

### 4.1 AetherResonanceResource Value Object

**File:** `src/Core/RuneAndRust.Domain/Specializations/Seiðkona/AetherResonanceResource.cs`

```csharp
namespace RuneAndRust.Domain.Specializations.Seiðkona;

using System;
using RuneAndRust.Domain.ValueObjects;

/// <summary>
/// Represents the Aether Resonance resource for Seiðkona specialization.
/// </summary>
/// <remarks>
/// <para>
/// Aether Resonance is a unique resource that BUILDS through Aether magic casting
/// (notably Seiðr Bolt) but is NOT consumed except by the Unraveling capstone ability.
/// This creates a tension between accumulating power and accumulating corruption risk.
/// </para>
/// <para>
/// Corruption risk scales with Resonance level:
/// - 0-4: No corruption risk
/// - 5-7: 5% corruption chance per cast
/// - 8-9: 15% corruption chance per cast
/// - 10: 25% corruption chance per cast (critical threshold)
/// </para>
/// <para>
/// Resonance persists across combats and only resets upon death or via specific
/// mechanics. This creates a strategic resource management puzzle where higher
/// Resonance unlocks powerful abilities but increases corruption exposure.
/// </para>
/// </remarks>
public sealed class AetherResonanceResource : ValueObject
{
    /// <summary>
    /// The maximum Aether Resonance a Seiðkona can achieve.
    /// </summary>
    public const int MaxResonance = 10;

    /// <summary>
    /// The minimum Aether Resonance value.
    /// </summary>
    public const int MinResonance = 0;

    /// <summary>
    /// Current Aether Resonance level (0-10).
    /// </summary>
    /// <remarks>
    /// This value increases through casting Aether magic (primarily Seiðr Bolt)
    /// and only resets through death or the Unraveling capstone ability.
    /// </remarks>
    public int CurrentResonance { get; }

    /// <summary>
    /// Timestamp of the last cast that increased Resonance.
    /// </summary>
    public DateTime? LastCastAt { get; }

    /// <summary>
    /// The rate at which Resonance builds per cast (typically 1).
    /// </summary>
    /// <remarks>
    /// May be modified by abilities or buffs in Tier 2+ versions.
    /// </remarks>
    public int BuildRate { get; }

    /// <summary>
    /// Private constructor for value object creation.
    /// </summary>
    private AetherResonanceResource(int currentResonance, DateTime? lastCastAt, int buildRate)
    {
        if (currentResonance < MinResonance || currentResonance > MaxResonance)
            throw new ArgumentOutOfRangeException(nameof(currentResonance),
                $"Resonance must be between {MinResonance} and {MaxResonance}");

        if (buildRate < 0)
            throw new ArgumentOutOfRangeException(nameof(buildRate),
                "Build rate cannot be negative");

        CurrentResonance = currentResonance;
        LastCastAt = lastCastAt;
        BuildRate = buildRate;
    }

    /// <summary>
    /// Creates a new AetherResonanceResource at specified level.
    /// </summary>
    /// <param name="initialResonance">The initial resonance level (default 0).</param>
    /// <returns>A new AetherResonanceResource instance.</returns>
    /// <exception cref="ArgumentOutOfRangeException">
    /// Thrown if initialResonance is outside valid range.
    /// </exception>
    public static AetherResonanceResource Create(int initialResonance = MinResonance)
    {
        return new AetherResonanceResource(initialResonance, null, 1);
    }

    /// <summary>
    /// Attempts to build Resonance by the specified amount.
    /// </summary>
    /// <param name="amount">The amount to build (typically 1).</param>
    /// <returns>A new AetherResonanceResource with updated Resonance.</returns>
    /// <remarks>
    /// Building caps at MaxResonance (10). Attempting to build beyond max
    /// returns a resource at exactly max.
    /// </remarks>
    public AetherResonanceResource Build(int amount = 1)
    {
        if (amount < 0)
            throw new ArgumentOutOfRangeException(nameof(amount),
                "Build amount cannot be negative");

        var newResonance = Math.Min(CurrentResonance + amount, MaxResonance);
        return new AetherResonanceResource(newResonance, DateTime.UtcNow, BuildRate);
    }

    /// <summary>
    /// Gets the corruption risk percentage for the current Resonance level.
    /// </summary>
    /// <returns>
    /// 0 (0-4 Resonance), 5 (5-7 Resonance), 15 (8-9 Resonance), or 25 (10 Resonance).
    /// </returns>
    public int GetCorruptionRiskPercentage()
    {
        return CurrentResonance switch
        {
            0 or 1 or 2 or 3 or 4 => 0,      // No risk
            5 or 6 or 7 => 5,                 // Low risk
            8 or 9 => 15,                     // High risk
            10 => 25,                         // Critical risk
            _ => throw new InvalidOperationException("Invalid Resonance level")
        };
    }

    /// <summary>
    /// Determines if the Seiðkona is at maximum Resonance (10).
    /// </summary>
    /// <returns>True if CurrentResonance equals MaxResonance.</returns>
    public bool IsAtMaxResonance()
    {
        return CurrentResonance == MaxResonance;
    }

    /// <summary>
    /// Determines if the Seiðkona has any corruption risk at current Resonance.
    /// </summary>
    /// <returns>True if CurrentResonance >= 5.</returns>
    public bool HasCorruptionRisk()
    {
        return CurrentResonance >= 5;
    }

    /// <summary>
    /// Resets Resonance to minimum (0), typically called by Unraveling capstone.
    /// </summary>
    /// <returns>A new AetherResonanceResource at minimum level.</returns>
    public AetherResonanceResource Reset()
    {
        return new AetherResonanceResource(MinResonance, null, BuildRate);
    }

    /// <summary>
    /// Returns a human-readable description of the current Resonance state.
    /// </summary>
    public override string ToString()
    {
        var riskLevel = GetCorruptionRiskPercentage() switch
        {
            0 => "None",
            5 => "Low (5%)",
            15 => "High (15%)",
            25 => "Critical (25%)",
            _ => "Unknown"
        };

        return $"Aether Resonance {CurrentResonance}/10 (Risk: {riskLevel})";
    }

    /// <summary>
    /// Implements value object equality based on state.
    /// </summary>
    protected override IEnumerable<object> GetEqualityComponents()
    {
        yield return CurrentResonance;
        yield return LastCastAt;
        yield return BuildRate;
    }
}
```

### 4.2 AccumulatedAethericDamage Value Object

**File:** `src/Core/RuneAndRust.Domain/Specializations/Seiðkona/AccumulatedAethericDamage.cs`

```csharp
namespace RuneAndRust.Domain.Specializations.Seiðkona;

using System;
using System.Collections.Generic;
using RuneAndRust.Domain.ValueObjects;

/// <summary>
/// Tracks accumulated Aetheric damage dealt by Seiðkona for the Unraveling capstone.
/// </summary>
/// <remarks>
/// <para>
/// This tracks ONLY damage from Seiðr Bolt and similar Aetheric abilities that
/// build Resonance. It is separate from regular combat damage and serves as
/// a resource pool for the Unraveling capstone ability (v0.20.8c).
/// </para>
/// <para>
/// The accumulated damage is NOT applied to enemies; it is stored until the
/// Seiðkona uses Unraveling at Resonance 10, which deals all accumulated
/// damage as a massive once-off attack and resets both Resonance and this
/// accumulation to 0.
/// </para>
/// </remarks>
public sealed class AccumulatedAethericDamage : ValueObject
{
    /// <summary>
    /// Total accumulated Aetheric damage across all casts.
    /// </summary>
    public int TotalDamage { get; }

    /// <summary>
    /// Number of Seiðr Bolt casts that contributed to this accumulation.
    /// </summary>
    public int CastCount { get; }

    /// <summary>
    /// Timestamp of the last cast that contributed to accumulation.
    /// </summary>
    public DateTime? LastUpdatedAt { get; }

    /// <summary>
    /// Breakdown of damage by ability type and cast order.
    /// </summary>
    /// <remarks>
    /// Format: Dictionary of cast number to damage dealt in that cast.
    /// </remarks>
    public IReadOnlyDictionary<int, int> DamageBreakdown { get; }

    private AccumulatedAethericDamage(
        int totalDamage,
        int castCount,
        DateTime? lastUpdatedAt,
        Dictionary<int, int> damageBreakdown)
    {
        if (totalDamage < 0)
            throw new ArgumentOutOfRangeException(nameof(totalDamage),
                "Total damage cannot be negative");

        if (castCount < 0)
            throw new ArgumentOutOfRangeException(nameof(castCount),
                "Cast count cannot be negative");

        TotalDamage = totalDamage;
        CastCount = castCount;
        LastUpdatedAt = lastUpdatedAt;
        DamageBreakdown = damageBreakdown ?? new Dictionary<int, int>();
    }

    /// <summary>
    /// Creates a new AccumulatedAethericDamage instance with no damage.
    /// </summary>
    public static AccumulatedAethericDamage CreateEmpty()
    {
        return new AccumulatedAethericDamage(0, 0, null, new Dictionary<int, int>());
    }

    /// <summary>
    /// Adds damage from a single Seiðr Bolt cast.
    /// </summary>
    /// <param name="damageAmount">The damage dealt in this cast.</param>
    /// <returns>A new AccumulatedAethericDamage with damage added.</returns>
    public AccumulatedAethericDamage AddDamage(int damageAmount)
    {
        if (damageAmount < 0)
            throw new ArgumentOutOfRangeException(nameof(damageAmount),
                "Damage amount cannot be negative");

        var newBreakdown = new Dictionary<int, int>(DamageBreakdown)
        {
            { CastCount + 1, damageAmount }
        };

        return new AccumulatedAethericDamage(
            TotalDamage + damageAmount,
            CastCount + 1,
            DateTime.UtcNow,
            newBreakdown);
    }

    /// <summary>
    /// Resets accumulated damage to zero, typically called by Unraveling capstone.
    /// </summary>
    /// <returns>A new AccumulatedAethericDamage with zero values.</returns>
    public AccumulatedAethericDamage Reset()
    {
        return CreateEmpty();
    }

    /// <summary>
    /// Determines if Unraveling can be used (requires at least 1 accumulated damage).
    /// </summary>
    public bool CanUnravelNow()
    {
        return TotalDamage > 0;
    }

    /// <summary>
    /// Returns the average damage per cast.
    /// </summary>
    public decimal GetAverageDamagePerCast()
    {
        if (CastCount == 0)
            return 0m;

        return (decimal)TotalDamage / CastCount;
    }

    /// <summary>
    /// Gets a human-readable description of the accumulated damage.
    /// </summary>
    public override string ToString()
    {
        var avgDamage = CastCount > 0
            ? $" (avg {GetAverageDamagePerCast():F1}/cast)"
            : "";

        return $"Accumulated Aetheric Damage: {TotalDamage} from {CastCount} casts{avgDamage}";
    }

    /// <summary>
    /// Implements value object equality based on state.
    /// </summary>
    protected override IEnumerable<object> GetEqualityComponents()
    {
        yield return TotalDamage;
        yield return CastCount;
        yield return LastUpdatedAt;
    }
}
```

### 4.3 CorruptionRiskResult Value Object

**File:** `src/Core/RuneAndRust.Domain/Specializations/Seiðkona/CorruptionRiskResult.cs`

```csharp
namespace RuneAndRust.Domain.Specializations.Seiðkona;

using System;
using RuneAndRust.Domain.ValueObjects;

/// <summary>
/// Represents the result of a corruption risk evaluation for a Seiðkona ability cast.
/// </summary>
/// <remarks>
/// This captures the complete context of a potential corruption event, including
/// the Resonance level at time of cast, the ability used, and whether corruption occurred.
/// </remarks>
public sealed class CorruptionRiskResult : ValueObject
{
    /// <summary>
    /// Whether a corruption event was triggered.
    /// </summary>
    public bool RiskTriggered { get; }

    /// <summary>
    /// The corruption risk percentage at time of evaluation (0, 5, 15, or 25).
    /// </summary>
    public int RiskPercentage { get; }

    /// <summary>
    /// Human-readable reason for the corruption check.
    /// </summary>
    /// <remarks>
    /// Examples: "Resonance at 5-7 range (5% risk)", "Maximum Resonance reached (25% risk)"
    /// </remarks>
    public string Reason { get; }

    /// <summary>
    /// The ability that triggered the corruption check.
    /// </summary>
    public string AbilityUsed { get; }

    /// <summary>
    /// The Resonance level at time of evaluation.
    /// </summary>
    public int ResonanceLevel { get; }

    /// <summary>
    /// Whether the Seiðkona was at maximum Resonance (10) during this check.
    /// </summary>
    public bool WasAtMaxResonance { get; }

    /// <summary>
    /// Timestamp of the evaluation.
    /// </summary>
    public DateTime EvaluatedAt { get; }

    private CorruptionRiskResult(
        bool riskTriggered,
        int riskPercentage,
        string reason,
        string abilityUsed,
        int resonanceLevel,
        bool wasAtMaxResonance,
        DateTime evaluatedAt)
    {
        if (string.IsNullOrWhiteSpace(reason))
            throw new ArgumentException("Reason cannot be empty", nameof(reason));

        if (string.IsNullOrWhiteSpace(abilityUsed))
            throw new ArgumentException("Ability used cannot be empty", nameof(abilityUsed));

        if (riskPercentage < 0 || riskPercentage > 100)
            throw new ArgumentOutOfRangeException(nameof(riskPercentage),
                "Risk percentage must be 0-100");

        RiskTriggered = riskTriggered;
        RiskPercentage = riskPercentage;
        Reason = reason;
        AbilityUsed = abilityUsed;
        ResonanceLevel = resonanceLevel;
        WasAtMaxResonance = wasAtMaxResonance;
        EvaluatedAt = evaluatedAt;
    }

    /// <summary>
    /// Creates a no-risk evaluation result.
    /// </summary>
    public static CorruptionRiskResult NoRisk(string abilityUsed, int resonanceLevel)
    {
        return new CorruptionRiskResult(
            riskTriggered: false,
            riskPercentage: 0,
            reason: $"Resonance {resonanceLevel} (0-4 range): No corruption risk",
            abilityUsed: abilityUsed,
            resonanceLevel: resonanceLevel,
            wasAtMaxResonance: false,
            evaluatedAt: DateTime.UtcNow);
    }

    /// <summary>
    /// Creates an at-risk evaluation result.
    /// </summary>
    public static CorruptionRiskResult AtRisk(
        bool triggered,
        int riskPercentage,
        string reason,
        string abilityUsed,
        int resonanceLevel,
        bool wasAtMax)
    {
        return new CorruptionRiskResult(
            riskTriggered: triggered,
            riskPercentage: riskPercentage,
            reason: reason,
            abilityUsed: abilityUsed,
            resonanceLevel: resonanceLevel,
            wasAtMaxResonance: wasAtMax,
            evaluatedAt: DateTime.UtcNow);
    }

    /// <summary>
    /// Gets a human-readable description of the corruption risk event.
    /// </summary>
    public override string ToString()
    {
        var status = RiskTriggered ? "CORRUPTED" : "Avoided";
        return $"[{status}] {AbilityUsed} - {Reason}";
    }

    protected override IEnumerable<object> GetEqualityComponents()
    {
        yield return RiskTriggered;
        yield return RiskPercentage;
        yield return AbilityUsed;
        yield return ResonanceLevel;
    }
}
```

### 4.4 SeiðkonaAbilityId Enum

**File:** `src/Core/RuneAndRust.Domain/Specializations/Seiðkona/SeiðkonaAbilityId.cs`

```csharp
namespace RuneAndRust.Domain.Specializations.Seiðkona;

/// <summary>
/// Identifies all Seiðkona specialization abilities across three tiers.
/// </summary>
public enum SeiðkonaAbilityId
{
    /// <summary>
    /// Tier 1: Seiðr Bolt - Direct Aetheric damage dealing.
    /// Cost: 1 AP | Effect: 2d6 Aetheric damage, +1 Resonance
    /// </summary>
    SeiðrBolt = 1,

    /// <summary>
    /// Tier 1: Wyrd Sight - Divination and detection ability.
    /// Cost: 2 AP | Effect: See invisible, detect magic (3 turns)
    /// </summary>
    WyrdSight = 2,

    /// <summary>
    /// Tier 1: Aether Attunement - Passive resource regeneration.
    /// Cost: — | Effect: +10% AP regen (always active)
    /// </summary>
    AetherAttunement = 3,

    /// <summary>
    /// Tier 2: Fate's Thread - Precognitive ability to glimpse enemy actions.
    /// Cost: 2 AP | Effect: Glimpse enemy's next action, +2 Resonance
    /// </summary>
    FatesThread = 4,

    /// <summary>
    /// Tier 2: Weave Disruption - Dispel magical effects.
    /// Cost: 3 AP | Effect: Dispel d20+Resonance vs DC, +1 Resonance
    /// </summary>
    WeaveDisruption = 5,

    /// <summary>
    /// Tier 2: Resonance Cascade - AP cost reduction at high Resonance.
    /// Cost: Special | Effect: At 5+ Resonance, -2 AP cost (min 1), +1 Resonance
    /// </summary>
    ResonanceCascade = 6,

    /// <summary>
    /// Tier 3: Völva's Vision - Reveal all hidden enemies in large area.
    /// Cost: 3 AP | Effect: See all hidden within 15 spaces, +2 Resonance
    /// </summary>
    VölvasVision = 7,

    /// <summary>
    /// Tier 3: Aether Storm - Cone area attack dealing massive damage.
    /// Cost: 5 AP | Effect: 4d6 cone, +2 Resonance, +4d6 Accumulated Damage
    /// </summary>
    AetherStorm = 8,

    /// <summary>
    /// Tier 3 Capstone: Unraveling - Ultimate ability requiring Resonance 10.
    /// Cost: 5 AP | Effect: Deal all Accumulated Aetheric Damage, reset Resonance/Accumulation
    /// </summary>
    Unraveling = 9
}
```

### 4.5 WyrdSightEffect Enum

**File:** `src/Core/RuneAndRust.Domain/Specializations/Seiðkona/WyrdSightEffect.cs`

```csharp
namespace RuneAndRust.Domain.Specializations.Seiðkona;

/// <summary>
/// Identifies the specific detection effects granted by Wyrd Sight ability.
/// </summary>
public enum WyrdSightEffect
{
    /// <summary>
    /// See through darkness and concealment; reveal invisible creatures.
    /// </summary>
    SeeInvisible = 1,

    /// <summary>
    /// Detect magical auras and active spell effects.
    /// </summary>
    DetectMagic = 2,

    /// <summary>
    /// See creatures on the Ethereal Plane or similar phased states.
    /// </summary>
    SeeEthereal = 3,

    /// <summary>
    /// Detect Corruption auras and corrupted beings.
    /// </summary>
    DetectCorruption = 4
}
```

---

## 5. Aether Resonance Resource System

### 5.1 Resonance Building Mechanics

The Aether Resonance resource has unique mechanics compared to other specialization resources:

**Resource Build Pattern (NOT Consumption):**

```
Seiðr Bolt Cast #1 → Resonance 0→1 (no corruption risk)
Seiðr Bolt Cast #2 → Resonance 1→2 (no corruption risk)
Seiðr Bolt Cast #3 → Resonance 2→3 (no corruption risk)
Seiðr Bolt Cast #4 → Resonance 3→4 (no corruption risk)
Seiðr Bolt Cast #5 → Resonance 4→5 (5% corruption risk START)
Seiðr Bolt Cast #6 → Resonance 5→6 (5% corruption risk)
Seiðr Bolt Cast #7 → Resonance 6→7 (5% corruption risk)
Seiðr Bolt Cast #8 → Resonance 7→8 (15% corruption risk ESCALATES)
Seiðr Bolt Cast #9 → Resonance 8→9 (15% corruption risk)
Seiðr Bolt Cast #10 → Resonance 9→10 (25% corruption risk CRITICAL)
```

**Key Characteristics:**

1. **Unidirectional Build:** Only increases, never decreases except via Unraveling
2. **No Consumption:** Unlike AP or Health, Resonance does not get spent on abilities
3. **Risk Scales with Value:** Higher Resonance = higher corruption chance
4. **Persistent State:** Survives combat rounds; only resets on death or Unraveling

### 5.2 Corruption Risk Table

| Resonance Level | Risk % | Description | Effect |
|-----------------|--------|-------------|--------|
| 0-4 | 0% | Safe Zone | No corruption checks |
| 5-7 | 5% | Low Risk | 1 in 20 casts risks corruption |
| 8-9 | 15% | High Risk | 3 in 20 casts risk corruption |
| 10 | 25% | Critical | 1 in 4 casts risks corruption |

**Corruption Check Timing:**
- Trigger AFTER ability successfully resolves
- Not affected by ability success/failure (always roll if in risk zone)
- Logged separately for debugging/audit trail

### 5.3 Accumulated Aetheric Damage

**Purpose:** Tracks damage from Resonance-building casts for Unraveling capstone use.

**Generation:**
- Seiðr Bolt: +damage rolled (e.g., 2d6 rolls = 2-12 damage per cast)
- Other Tier 1 abilities: +0 (Wyrd Sight, Aether Attunement do not generate)
- Tier 2 abilities: +varying (Fate's Thread, Weave Disruption)
- Tier 3 abilities: +high (Aether Storm generates 4d6)

**Storage & Tracking:**
- Stored separately from all other damage systems
- Only retrieved at Unraveling cast time (v0.20.8c)
- Survives combat, encounters, and scene transitions
- Resets to 0 on character death or explicit reset

---

## 6. Corruption Risk Framework

### 6.1 Integration with CorruptionService (v0.18.x)

The Seiðkona's corruption system integrates with the established CorruptionService from v0.18.x. When a Seiðkona ability triggers corruption:

1. **Corruption Check:** Roll d100 against corruption percentage
2. **On Success (Roll < Percentage):** Apply corruption via CorruptionService
3. **On Failure (Roll > Percentage):** No effect; continue normally
4. **Logging:** All checks logged to corruption event log

### 6.2 Corruption Risk Evaluation Flow

```csharp
// Pseudo-code for corruption check in SeiðkonaAbilityService

public async Task<CorruptionRiskResult> EvaluateCorruptionRiskAsync(
    Guid characterId,
    SeiðkonaAbilityId abilityId)
{
    var resonance = await GetCurrentResonanceAsync(characterId);
    var riskPercentage = GetRiskPercentage(resonance);

    // No risk in safe zone
    if (riskPercentage == 0)
        return CorruptionRiskResult.NoRisk(abilityId.ToString(), resonance);

    // Roll for corruption
    var roll = _diceService.Roll(1, 100).Total;
    var triggered = roll < riskPercentage;

    // Create result capturing full context
    var result = CorruptionRiskResult.AtRisk(
        triggered: triggered,
        riskPercentage: riskPercentage,
        reason: BuildRiskReason(resonance),
        abilityUsed: abilityId.ToString(),
        resonanceLevel: resonance,
        wasAtMax: resonance == 10);

    // If triggered, apply corruption
    if (triggered)
        await _corruptionService.ApplyCorruptionAsync(
            characterId,
            source: "Seiðkona_Resonance_" + abilityId,
            amount: 10); // Base corruption amount

    return result;
}
```

### 6.3 Corruption Risk Reason Building

```csharp
private string BuildRiskReason(int resonanceLevel)
{
    return resonanceLevel switch
    {
        5 or 6 or 7 => $"Resonance {resonanceLevel}/10 (Low Risk Zone: 5%)",
        8 or 9 => $"Resonance {resonanceLevel}/10 (High Risk Zone: 15%)",
        10 => "Resonance 10/10 (CRITICAL: 25% per cast)",
        _ => $"Resonance {resonanceLevel}/10 (Safe Zone: 0%)"
    };
}
```

---

## 7. Seiðr Bolt Ability Specification

### 7.1 Overview

**Seiðr Bolt** is the foundational Aether-weaving ability of the Seiðkona, dealing direct Aetheric damage while building Resonance and accumulating Aetheric damage for the capstone.

**Mechanical Focus:** Direct damage dealer + Resonance builder + Corruption trigger

### 7.2 Ability Details

| Property | Value |
|----------|-------|
| **Ability ID** | SeiðkonaAbilityId.SeiðrBolt |
| **Display Name** | Seiðr Bolt |
| **Tier** | 1 (Immediately Available) |
| **Type** | Active Spell (Ranged) |
| **AP Cost** | 1 AP |
| **Resource Cost** | None (generates Resonance instead) |
| **Range** | 8 spaces |
| **Target Type** | Single hostile creature |
| **Damage Dice** | 2d6 |
| **Damage Type** | Aetheric |

### 7.3 Effect Resolution

**On Successful Cast:**

1. **Damage Calculation:**
   - Roll 2d6 and apply to target
   - Target makes DEF save to reduce by half (no save = full damage)
   - Apply total damage to target's HP

2. **Resource Generation:**
   - Increase Aether Resonance by +1 (capped at 10)
   - Add rolled damage to Accumulated Aetheric Damage
   - Log generation event

3. **Corruption Check:**
   - Evaluate corruption risk based on new Resonance level
   - Roll if in risk zone (Resonance 5+)
   - Apply corruption if check fails

4. **Effect Logging:**
   - Record ability use with full context
   - Include damage, Resonance change, Corruption outcome
   - Timestamp for audit trail

### 7.4 Code Implementation Example

**File:** `src/Core/RuneAndRust.Application/Specializations/Seiðkona/Services/SeiðkonaAbilityService.cs`

```csharp
namespace RuneAndRust.Application.Specializations.Seiðkona.Services;

using System;
using System.Threading.Tasks;
using RuneAndRust.Domain.Specializations.Seiðkona;
using RuneAndRust.Application.Dice;
using RuneAndRust.Application.Combat;

/// <summary>
/// Application service for executing Seiðkona tier 1 abilities.
/// </summary>
public interface ISeiðkonaAbilityService
{
    /// <summary>
    /// Execute the Seiðr Bolt ability targeting a hostile creature.
    /// </summary>
    /// <param name="characterId">The casting Seiðkona.</param>
    /// <param name="targetId">The target creature.</param>
    /// <returns>Ability execution result with damage and Resonance changes.</returns>
    Task<SeiðrBoltResult> ExecuteSeiðrBoltAsync(Guid characterId, Guid targetId);

    /// <summary>
    /// Execute the Wyrd Sight ability for detection.
    /// </summary>
    Task<WyrdSightResult> ExecuteWyrdSightAsync(Guid characterId);

    /// <summary>
    /// Apply the Aether Attunement passive effect.
    /// </summary>
    Task ApplyAetherAttunementAsync(Guid characterId);

    /// <summary>
    /// Validate that an ability can be cast given current state.
    /// </summary>
    Task<bool> CanCastAbilityAsync(Guid characterId, SeiðkonaAbilityId abilityId);

    /// <summary>
    /// Get detailed ability information for UI display.
    /// </summary>
    Task<AbilityInfo> GetAbilityInfoAsync(SeiðkonaAbilityId abilityId);
}

public class SeiðkonaAbilityService : ISeiðkonaAbilityService
{
    private readonly IDiceService _diceService;
    private readonly IAetherResonanceService _resonanceService;
    private readonly ICorruptionService _corruptionService;
    private readonly ICombatService _combatService;

    public SeiðkonaAbilityService(
        IDiceService diceService,
        IAetherResonanceService resonanceService,
        ICorruptionService corruptionService,
        ICombatService combatService)
    {
        _diceService = diceService;
        _resonanceService = resonanceService;
        _corruptionService = corruptionService;
        _combatService = combatService;
    }

    public async Task<SeiðrBoltResult> ExecuteSeiðrBoltAsync(Guid characterId, Guid targetId)
    {
        // Validate cast preconditions
        if (!await CanCastAbilityAsync(characterId, SeiðkonaAbilityId.SeiðrBolt))
            throw new InvalidOperationException("Cannot cast Seiðr Bolt in current state");

        // Get current state
        var resonance = await _resonanceService.GetCurrentResonanceAsync(characterId);
        var currentDamage = await _resonanceService.GetAccumulatedDamageAsync(characterId);

        // Roll damage: 2d6
        var damageRoll = _diceService.Roll(2, 6);
        var baseDamage = damageRoll.Total;

        // Apply to target (with DEF save for half)
        var actualDamage = await _combatService.ApplyDamageAsync(
            targetId: targetId,
            damageAmount: baseDamage,
            damageType: DamageType.Aetheric,
            allowDefenseSave: true);

        // Build Resonance (+1)
        var newResonance = await _resonanceService.BuildResonanceAsync(characterId, 1);

        // Add to accumulated Aetheric damage
        var newAccumulatedDamage = await _resonanceService.AddAccumulatedDamageAsync(
            characterId,
            actualDamage);

        // Evaluate and apply corruption check
        var corruptionResult = await EvaluateCorruptionRiskAsync(characterId, newResonance);

        return new SeiðrBoltResult(
            Success: true,
            DamageDealt: actualDamage,
            DamageRoll: damageRoll,
            ResonanceBefore: resonance,
            ResonanceAfter: newResonance,
            AccumulatedDamageBefore: currentDamage,
            AccumulatedDamageAfter: newAccumulatedDamage,
            CorruptionResult: corruptionResult);
    }

    public async Task<WyrdSightResult> ExecuteWyrdSightAsync(Guid characterId)
    {
        if (!await CanCastAbilityAsync(characterId, SeiðkonaAbilityId.WyrdSight))
            throw new InvalidOperationException("Cannot cast Wyrd Sight in current state");

        // Get current position
        var position = await _combatService.GetCharacterPositionAsync(characterId);

        // Determine visible entities based on effects
        var visibleInvisible = await _combatService.FindInvisibleCreaturesNearbyAsync(
            centerPosition: position,
            radiusSpaces: 10);

        var detectedMagic = await _combatService.FindMagicalEffectsAsync(
            centerPosition: position,
            radiusSpaces: 10);

        var corruptedCreatures = await _combatService.FindCorruptedCreaturesAsync(
            centerPosition: position,
            radiusSpaces: 10);

        return new WyrdSightResult(
            Success: true,
            DurationTurns: 3,
            InvisibleCreaturesRevealed: visibleInvisible,
            MagicDetected: detectedMagic,
            CorruptedCreaturesDetected: corruptedCreatures);
    }

    public async Task ApplyAetherAttunementAsync(Guid characterId)
    {
        // This is a passive effect, applied at character initialization and persists
        // Increases AP regen by 10%
        await _combatService.ApplyAPRegenBonusAsync(
            characterId,
            bonusPercentage: 10,
            source: "Aether Attunement");
    }

    public async Task<bool> CanCastAbilityAsync(Guid characterId, SeiðkonaAbilityId abilityId)
    {
        var apAvailable = await _combatService.GetAvailableAPAsync(characterId);

        var apCost = abilityId switch
        {
            SeiðkonaAbilityId.SeiðrBolt => 1,
            SeiðkonaAbilityId.WyrdSight => 2,
            _ => throw new ArgumentException("Unknown ability", nameof(abilityId))
        };

        return apAvailable >= apCost;
    }

    public async Task<AbilityInfo> GetAbilityInfoAsync(SeiðkonaAbilityId abilityId)
    {
        return abilityId switch
        {
            SeiðkonaAbilityId.SeiðrBolt => new AbilityInfo(
                Name: "Seiðr Bolt",
                Description: "Weave raw Aether into a bolt of magical force, striking with devastating effect.",
                APCost: 1,
                Range: 8,
                Target: "Single hostile",
                DamageDice: "2d6",
                DamageType: "Aetheric",
                Effects: new[] { "+1 Resonance", "+Accumulated Aetheric Damage", "Corruption check if Resonance 5+" }),

            SeiðkonaAbilityId.WyrdSight => new AbilityInfo(
                Name: "Wyrd Sight",
                Description: "Your perception expands across the Wyrd, revealing hidden threats and magical auras.",
                APCost: 2,
                Range: "10 spaces",
                Target: "Area around self",
                DamageDice: "—",
                DamageType: "—",
                Effects: new[] { "See invisible creatures", "Detect magical auras", "Detect Corruption", "3 turn duration" }),

            SeiðkonaAbilityId.AetherAttunement => new AbilityInfo(
                Name: "Aether Attunement",
                Description: "You are permanently attuned to Aetheric forces, enhancing your magical recovery.",
                APCost: 0,
                Range: "Self",
                Target: "Self",
                DamageDice: "—",
                DamageType: "—",
                Effects: new[] { "+10% AP regeneration (passive, always active)" }),

            _ => throw new ArgumentException("Unknown ability", nameof(abilityId))
        };
    }

    private async Task<CorruptionRiskResult> EvaluateCorruptionRiskAsync(
        Guid characterId,
        int newResonanceLevel)
    {
        var riskPercentage = newResonanceLevel switch
        {
            0 or 1 or 2 or 3 or 4 => 0,
            5 or 6 or 7 => 5,
            8 or 9 => 15,
            10 => 25,
            _ => throw new InvalidOperationException("Invalid Resonance level")
        };

        // No risk in safe zone
        if (riskPercentage == 0)
            return CorruptionRiskResult.NoRisk(
                "Seiðr Bolt",
                newResonanceLevel);

        // Roll for corruption
        var roll = _diceService.Roll(1, 100).Total;
        var triggered = roll < riskPercentage;

        var reason = newResonanceLevel switch
        {
            5 or 6 or 7 => $"Resonance {newResonanceLevel}/10 (Low Risk: 5%)",
            8 or 9 => $"Resonance {newResonanceLevel}/10 (High Risk: 15%)",
            10 => "Resonance 10/10 (CRITICAL: 25%)",
            _ => "Unknown"
        };

        var result = CorruptionRiskResult.AtRisk(
            triggered: triggered,
            riskPercentage: riskPercentage,
            reason: reason,
            abilityUsed: "Seiðr Bolt",
            resonanceLevel: newResonanceLevel,
            wasAtMax: newResonanceLevel == 10);

        // If triggered, apply corruption
        if (triggered)
        {
            await _corruptionService.ApplyCorruptionAsync(
                characterId,
                source: "Seiðkona_SeiðrBolt_Resonance",
                amount: 10,
                description: $"Corruption from Seiðr Bolt casting (Resonance {newResonanceLevel}/10)");
        }

        return result;
    }
}
```

### 7.5 Output Display Format

```
SEIÐR BOLT CAST SUCCESSFUL

Target Affected: Corrupted Wolf
Damage Dealt: 8 Aetheric [2d6: 3+5]
└─ Target rolled DEF save: Failure (no reduction)

RESONANCE UPDATE
├─ Before: 2/10 (Safe Zone)
├─ After:  3/10 (Safe Zone)
└─ Corruption Risk: 0% (no check required)

ACCUMULATED AETHERIC DAMAGE
├─ Before: 5 total
├─ Cast:   +8 damage
└─ After:  13 total

STATUS: Ready for next action
```

---

## 8. Wyrd Sight Ability Specification

### 8.1 Overview

**Wyrd Sight** grants temporary enhanced perception, allowing the Seiðkona to pierce illusions, detect magic, and perceive corruption.

**Mechanical Focus:** Detection / Intelligence gathering (no Resonance build)

### 8.2 Ability Details

| Property | Value |
|----------|-------|
| **Ability ID** | SeiðkonaAbilityId.WyrdSight |
| **Display Name** | Wyrd Sight |
| **Tier** | 1 (Immediately Available) |
| **Type** | Active Detection |
| **AP Cost** | 2 AP |
| **Resource Cost** | None |
| **Duration** | 3 turns |
| **Range** | 10 spaces from self |
| **Effect Area** | Circle centered on caster |
| **Resonance Generated** | None (0) |

### 8.3 Detection Effects

| Effect | Details |
|--------|---------|
| **See Invisible** | Reveal all invisible creatures within area (10 spaces) |
| **Detect Magic** | Show active magical effects and their approximate sources |
| **Detect Corruption** | Identify corrupted beings and corrupted objects |
| **See Ethereal** | Perception extends to Ethereal Plane and similar dimensions |

### 8.4 Effect Resolution

**On Successful Cast:**

1. **Activate Detection Mode:**
   - Create perception aura centered on caster
   - 10-space radius circle
   - 3-turn duration

2. **Scan Area:**
   - Query all creatures/objects in range
   - Apply detection filters (invisibility, magic, corruption, ethereal)
   - Compile list of revealed entities

3. **Apply Visibility:**
   - Mark invisible creatures as visible to Seiðkona only
   - Display magical effects with rough intensity (weak/moderate/strong)
   - Flag corrupted targets

4. **No Resonance Impact:**
   - Does NOT build Resonance
   - Does NOT trigger corruption check
   - Does NOT accumulate damage

### 8.5 Code Implementation Fragment

```csharp
public async Task<WyrdSightResult> ExecuteWyrdSightAsync(Guid characterId)
{
    if (!await CanCastAbilityAsync(characterId, SeiðkonaAbilityId.WyrdSight))
        throw new InvalidOperationException("Cannot cast Wyrd Sight");

    var position = await _combatService.GetCharacterPositionAsync(characterId);

    // Find all entities that should be revealed
    var nearbyCreatures = await _combatService.FindCreaturesInRangeAsync(
        centerPosition: position,
        radiusSpaces: 10);

    var revealed = new List<DetectedEntity>();

    foreach (var creature in nearbyCreatures)
    {
        var isInvisible = await _combatService.HasInvisibilityAsync(creature.Id);
        var magicEffects = await _combatService.GetActiveEffectsAsync(creature.Id);
        var corruptionLevel = await _corruptionService.GetCorruptionLevelAsync(creature.Id);

        if (isInvisible || magicEffects.Any() || corruptionLevel > 0)
        {
            revealed.Add(new DetectedEntity(
                EntityId: creature.Id,
                Type: creature.Type,
                Position: creature.Position,
                IsInvisible: isInvisible,
                MagicAura: magicEffects.Any() ? "Detected" : "None",
                CorruptionAura: corruptionLevel > 0 ? $"Level {corruptionLevel}" : "None",
                DurationTurns: 3));
        }
    }

    return new WyrdSightResult(
        Success: true,
        DurationTurns: 3,
        RevealedEntities: revealed);
}
```

---

## 9. Aether Attunement Ability Specification

### 9.1 Overview

**Aether Attunement** is a passive ability that grants the Seiðkona a permanent +10% bonus to AP regeneration.

**Mechanical Focus:** Passive resource generation enhancement (always active)

### 9.2 Ability Details

| Property | Value |
|----------|-------|
| **Ability ID** | SeiðkonaAbilityId.AetherAttunement |
| **Display Name** | Aether Attunement |
| **Tier** | 1 (Immediately Available) |
| **Type** | Passive Enhancement |
| **AP Cost** | — (no cost) |
| **Resource Cost** | — (no cost) |
| **Duration** | Permanent (always active) |
| **Resonance Generated** | None (passive, no casting) |

### 9.3 Effect Details

**AP Regen Bonus:** +10% to all AP regeneration sources

**Example Calculations:**

```
Base AP Regen per Turn: 3 AP
Aether Attunement Bonus: +10%
Final Regen: 3 × 1.10 = 3.3 AP/turn

Short Rest (1 hour):
Base: 5 AP
With Attunement: 5 × 1.10 = 5.5 AP (rounds to 5 or 6 depending on rounding rules)

Long Rest (8 hours):
Base: Full (let's say 20 AP)
With Attunement: 20 × 1.10 = 22 AP (capped at max if applicable)
```

### 9.4 Implementation Notes

- **Automatic Application:** Applied when Seiðkona is selected as specialization
- **Persistent:** Survives damage, combat, scene transitions
- **Stacks:** With other AP regen bonuses (applies multiplicatively)
- **No Logging Required:** Passive effects are not logged per-round but noted at character summary

### 9.5 Code Implementation

```csharp
public async Task ApplyAetherAttunementAsync(Guid characterId)
{
    // Register persistent bonus with combat system
    await _combatService.RegisterAPRegenBonusAsync(
        characterId: characterId,
        bonusPercentage: 10,
        source: "Aether Attunement (Seiðkona Tier 1)",
        isPermanent: true);

    // Log the passive ability application
    _logger.LogInformation(
        "Aether Attunement passive applied to {CharacterId}: +10% AP regen",
        characterId);
}

public decimal CalculateAPRegenWithAttunement(decimal baseRegen)
{
    return baseRegen * 1.10m; // Apply +10% bonus
}
```

---

## 10. User Stories

### User Story 1: Seiðkona Casts First Seiðr Bolt

**As a** Seiðkona character in combat
**I want to** cast Seiðr Bolt to deal damage and start building Resonance
**So that** I can accumulate power for stronger abilities

**Acceptance Criteria:**
- Seiðr Bolt costs 1 AP to cast
- Deals 2d6 Aetheric damage to target
- Target can make DEF save for half damage
- Seiðkona's Resonance increases from 0 to 1
- Accumulated Aetheric Damage increases by damage dealt
- No corruption check occurs (Resonance 1 is safe)
- Ability succeeds and can be used again next turn

### User Story 2: Seiðkona Enters Corruption Risk Zone

**As a** Seiðkona who has cast Seiðr Bolt 5 times (Resonance now 5/10)
**I want to** cast Seiðr Bolt again but face a 5% corruption risk
**So that** I have tension between power and safety

**Acceptance Criteria:**
- Sixth Seiðr Bolt cast triggers corruption check
- Check is 5% chance (1 in 20)
- If check succeeds (roll < 5%), corruption is applied and Ability succeeds
- If check fails (roll >= 5%), no corruption and ability succeeds normally
- Resonance increases to 6 regardless of check outcome
- System clearly communicates the risk to player
- Result is logged for audit trail

### User Story 3: Seiðkona Uses Wyrd Sight for Detection

**As a** Seiðkona player
**I want to** use Wyrd Sight to detect invisible enemies and magical auras
**So that** I can gather tactical information

**Acceptance Criteria:**
- Wyrd Sight costs 2 AP
- Creates a 10-space perception radius
- Lasts 3 turns
- Reveals all invisible creatures in range
- Shows magical auras and effects
- Flags corrupted beings
- Does NOT build Resonance
- Does NOT trigger corruption check

### User Story 4: Aether Attunement Passive Improves Recovery

**As a** Seiðkona character
**I want to** have a permanent +10% AP regeneration boost
**So that** I can cast more abilities per encounter

**Acceptance Criteria:**
- Bonus applies to all AP regeneration sources
- Multiplier is 1.10 (10% increase)
- Applied at character creation and never removed
- Works with short rests, long rests, and in-combat regen
- UI shows the bonus in character sheet

---

## 11. Application Service Layer

### 11.1 IAetherResonanceService Interface

**File:** `src/Core/RuneAndRust.Application/Specializations/Seiðkona/IAetherResonanceService.cs`

```csharp
namespace RuneAndRust.Application.Specializations.Seiðkona;

using System;
using System.Threading.Tasks;
using RuneAndRust.Domain.Specializations.Seiðkona;

/// <summary>
/// Manages Aether Resonance resource for Seiðkona characters.
/// </summary>
public interface IAetherResonanceService
{
    /// <summary>
    /// Gets the current Aether Resonance level for a character.
    /// </summary>
    Task<int> GetCurrentResonanceAsync(Guid characterId);

    /// <summary>
    /// Builds Aether Resonance by the specified amount (capped at 10).
    /// </summary>
    Task<int> BuildResonanceAsync(Guid characterId, int amount = 1);

    /// <summary>
    /// Gets the maximum Resonance (always 10).
    /// </summary>
    Task<int> GetMaxResonanceAsync(Guid characterId);

    /// <summary>
    /// Determines if Resonance can be built further.
    /// </summary>
    Task<bool> CanBuildResonanceAsync(Guid characterId);

    /// <summary>
    /// Gets the corruption risk percentage for current Resonance.
    /// </summary>
    Task<int> GetCorruptionRiskPercentageAsync(Guid characterId);

    /// <summary>
    /// Gets accumulated Aetheric damage total.
    /// </summary>
    Task<int> GetAccumulatedDamageAsync(Guid characterId);

    /// <summary>
    /// Adds damage to the Accumulated Aetheric Damage pool.
    /// </summary>
    Task<int> AddAccumulatedDamageAsync(Guid characterId, int damageAmount);

    /// <summary>
    /// Resets both Resonance and Accumulated Damage to zero (Unraveling).
    /// </summary>
    Task ResetResonanceAndDamageAsync(Guid characterId);

    /// <summary>
    /// Gets a full AetherResonanceResource value object for inspection.
    /// </summary>
    Task<AetherResonanceResource> GetResourceAsync(Guid characterId);

    /// <summary>
    /// Logs a resonance event for audit trail.
    /// </summary>
    Task LogResonanceEventAsync(
        Guid characterId,
        string eventType,
        int previousValue,
        int newValue,
        string description);
}
```

### 11.2 ISeiðkonaAbilityService Interface (Extended)

```csharp
namespace RuneAndRust.Application.Specializations.Seiðkona;

using System;
using System.Threading.Tasks;
using RuneAndRust.Domain.Specializations.Seiðkona;

/// <summary>
/// Manages execution of all Seiðkona tier 1 abilities.
/// </summary>
public interface ISeiðkonaAbilityService
{
    /// <summary>
    /// Execute Seiðr Bolt against a target.
    /// </summary>
    /// <remarks>
    /// - Rolls 2d6 damage
    /// - Target makes DEF save
    /// - Builds +1 Resonance
    /// - Accumulates Aetheric damage
    /// - Triggers corruption check if Resonance 5+
    /// </remarks>
    Task<SeiðrBoltResult> ExecuteSeiðrBoltAsync(Guid characterId, Guid targetId);

    /// <summary>
    /// Execute Wyrd Sight detection ability.
    /// </summary>
    /// <remarks>
    /// - 2 AP cost
    /// - 10-space radius
    /// - 3-turn duration
    /// - Reveals invisible, magical, and corrupted entities
    /// - No Resonance build or corruption check
    /// </remarks>
    Task<WyrdSightResult> ExecuteWyrdSightAsync(Guid characterId);

    /// <summary>
    /// Apply Aether Attunement passive bonus.
    /// </summary>
    /// <remarks>
    /// Applied at specialization selection and persists permanently.
    /// </remarks>
    Task ApplyAetherAttunementAsync(Guid characterId);

    /// <summary>
    /// Validate that an ability can be cast in current state.
    /// </summary>
    Task<bool> CanCastAbilityAsync(Guid characterId, SeiðkonaAbilityId abilityId);

    /// <summary>
    /// Get detailed information about an ability for UI display.
    /// </summary>
    Task<AbilityInfo> GetAbilityInfoAsync(SeiðkonaAbilityId abilityId);

    /// <summary>
    /// Validate ability prerequisites and character state.
    /// </summary>
    Task<ValidationResult> ValidateAbilityPrerequisitesAsync(
        Guid characterId,
        SeiðkonaAbilityId abilityId);
}
```

---

## 12. Configuration Specifications

### 12.1 specializations.json Entry

**File:** `data/configuration/specializations.json`

```json
{
  "specializations": [
    {
      "id": "seiðkona",
      "displayName": "Seiðkona",
      "pronunciation": "SAY-th-koh-nah",
      "translation": "Seeress / Mystic",
      "archetype": "Mystic",
      "pathType": "Heretical",
      "role": "Aether Magic / Prophecy",
      "description": "Weaver of the Wyrd - A practitioner of dangerous Aether magic who accumulates Resonance and corruption risk with each casting.",
      "tagline": "Weaver of the Wyrd",
      "tier1Cost": 0,
      "tier2Cost": 2,
      "tier3Cost": 4,
      "specialResource": {
        "name": "Aether Resonance",
        "max": 10,
        "generation": "Builds through casting (Seiðr Bolt +1)",
        "consumption": "Consumed ONLY by Unraveling capstone"
      },
      "tier1Abilities": [
        "seiðrBolt",
        "wyrdSight",
        "aetherAttunement"
      ],
      "tier2Abilities": [
        "fatesThread",
        "weaveDisruption",
        "resonanceCascade"
      ],
      "tier3Abilities": [
        "völvasVision",
        "aetherStorm",
        "unraveling"
      ],
      "corruptionIntegration": {
        "enabled": true,
        "riskLevels": [
          {
            "resonanceRange": "0-4",
            "riskPercentage": 0,
            "description": "Safe Zone"
          },
          {
            "resonanceRange": "5-7",
            "riskPercentage": 5,
            "description": "Low Risk"
          },
          {
            "resonanceRange": "8-9",
            "riskPercentage": 15,
            "description": "High Risk"
          },
          {
            "resonanceRange": "10",
            "riskPercentage": 25,
            "description": "Critical"
          }
        ]
      },
      "notes": "Final Heretical specialization; only Mystic in v0.20.x"
    }
  ]
}
```

### 12.2 abilities.json Entry (Tier 1)

**File:** `data/configuration/abilities.json`

```json
{
  "abilities": [
    {
      "id": "seiðrBolt",
      "displayName": "Seiðr Bolt",
      "specialization": "seiðkona",
      "tier": 1,
      "type": "ActiveSpell",
      "range": "Ranged",
      "apCost": 1,
      "resourceCost": null,
      "damageDice": "2d6",
      "damageType": "Aetheric",
      "target": "Single hostile",
      "effects": [
        "Deal 2d6 Aetheric damage",
        "Target makes DEF save for half damage",
        "Build +1 Aether Resonance",
        "Accumulate Aetheric damage (equal to damage dealt)",
        "Trigger corruption check if Resonance 5+"
      ],
      "description": "Weave raw Aether into a bolt of magical force, striking with devastating effect.",
      "flavorText": "The air crackles with otherworldly energy as you shape pure Wyrd-force into a weapon.",
      "cooldown": "None",
      "maxUsesPerEncounter": null,
      "unlockConditions": [
        "Specialization: Seiðkona",
        "No prerequisites (Tier 1)"
      ]
    },
    {
      "id": "wyrdSight",
      "displayName": "Wyrd Sight",
      "specialization": "seiðkona",
      "tier": 1,
      "type": "ActiveDetection",
      "range": "10 spaces (area)",
      "apCost": 2,
      "resourceCost": null,
      "durationTurns": 3,
      "effects": [
        "See invisible creatures",
        "Detect magical auras",
        "Detect Corruption",
        "See Ethereal plane"
      ],
      "description": "Your perception expands across the Wyrd, revealing hidden threats and magical auras.",
      "flavorText": "Reality shimmers as your vision extends beyond the material plane.",
      "cooldown": "None",
      "maxUsesPerEncounter": null,
      "unlockConditions": [
        "Specialization: Seiðkona",
        "No prerequisites (Tier 1)"
      ]
    },
    {
      "id": "aetherAttunement",
      "displayName": "Aether Attunement",
      "specialization": "seiðkona",
      "tier": 1,
      "type": "PassiveEnhancement",
      "apCost": 0,
      "resourceCost": null,
      "effects": [
        "+10% AP regeneration (passive, always active)"
      ],
      "description": "You are permanently attuned to Aetheric forces, enhancing your magical recovery.",
      "flavorText": "Aether flows through you naturally, granting boundless reserves of power.",
      "cooldown": "None (passive)",
      "maxUsesPerEncounter": null,
      "unlockConditions": [
        "Specialization: Seiðkona",
        "No prerequisites (Tier 1)"
      ]
    }
  ]
}
```

---

## 13. Code Examples & Implementation

### 13.1 AetherResonanceService Implementation Fragment

```csharp
namespace RuneAndRust.Application.Specializations.Seiðkona.Services;

using System;
using System.Threading.Tasks;
using RuneAndRust.Domain.Specializations.Seiðkona;
using RuneAndRust.Domain.Entities;
using RuneAndRust.Infrastructure.Repositories;

public class AetherResonanceService : IAetherResonanceService
{
    private readonly ICharacterRepository _characterRepository;
    private readonly IEventLogger _eventLogger;

    public AetherResonanceService(
        ICharacterRepository characterRepository,
        IEventLogger eventLogger)
    {
        _characterRepository = characterRepository;
        _eventLogger = eventLogger;
    }

    public async Task<int> GetCurrentResonanceAsync(Guid characterId)
    {
        var character = await _characterRepository.GetByIdAsync(characterId);
        if (character == null)
            throw new InvalidOperationException($"Character {characterId} not found");

        var seiðkonaState = character.GetSpecializationState("seiðkona");
        return seiðkonaState?.GetProperty<int>("resonance") ?? 0;
    }

    public async Task<int> BuildResonanceAsync(Guid characterId, int amount = 1)
    {
        var character = await _characterRepository.GetByIdAsync(characterId);
        if (character == null)
            throw new InvalidOperationException($"Character {characterId} not found");

        var currentResonance = await GetCurrentResonanceAsync(characterId);
        var newResonance = Math.Min(currentResonance + amount, 10);

        // Update character state
        var seiðkonaState = character.GetOrCreateSpecializationState("seiðkona");
        seiðkonaState.SetProperty("resonance", newResonance);

        await _characterRepository.UpdateAsync(character);

        // Log event
        await LogResonanceEventAsync(
            characterId,
            "BuildResonance",
            currentResonance,
            newResonance,
            $"Built by {amount} via Seiðr Bolt cast");

        return newResonance;
    }

    public async Task<int> GetCorruptionRiskPercentageAsync(Guid characterId)
    {
        var resonance = await GetCurrentResonanceAsync(characterId);
        return resonance switch
        {
            0 or 1 or 2 or 3 or 4 => 0,
            5 or 6 or 7 => 5,
            8 or 9 => 15,
            10 => 25,
            _ => 0
        };
    }

    public async Task<int> GetAccumulatedDamageAsync(Guid characterId)
    {
        var character = await _characterRepository.GetByIdAsync(characterId);
        var seiðkonaState = character.GetSpecializationState("seiðkona");
        return seiðkonaState?.GetProperty<int>("accumulatedAethericDamage") ?? 0;
    }

    public async Task<int> AddAccumulatedDamageAsync(Guid characterId, int damageAmount)
    {
        var character = await _characterRepository.GetByIdAsync(characterId);
        var currentDamage = await GetAccumulatedDamageAsync(characterId);
        var newDamage = currentDamage + damageAmount;

        var seiðkonaState = character.GetOrCreateSpecializationState("seiðkona");
        seiðkonaState.SetProperty("accumulatedAethericDamage", newDamage);

        await _characterRepository.UpdateAsync(character);

        await LogResonanceEventAsync(
            characterId,
            "AddAccumulatedDamage",
            currentDamage,
            newDamage,
            $"Added {damageAmount} damage");

        return newDamage;
    }

    public async Task ResetResonanceAndDamageAsync(Guid characterId)
    {
        var character = await _characterRepository.GetByIdAsync(characterId);
        var seiðkonaState = character.GetOrCreateSpecializationState("seiðkona");

        seiðkonaState.SetProperty("resonance", 0);
        seiðkonaState.SetProperty("accumulatedAethericDamage", 0);

        await _characterRepository.UpdateAsync(character);

        await LogResonanceEventAsync(
            characterId,
            "UnravelingReset",
            10,
            0,
            "Resonance and Accumulated Damage reset by Unraveling capstone");
    }

    public async Task LogResonanceEventAsync(
        Guid characterId,
        string eventType,
        int previousValue,
        int newValue,
        string description)
    {
        await _eventLogger.LogAsync(new Event
        {
            CharacterId = characterId,
            EventType = eventType,
            PreviousValue = previousValue,
            NewValue = newValue,
            Description = description,
            TimestampUtc = DateTime.UtcNow
        });
    }
}
```

---

## 14. Accumulated Aetheric Damage Tracking

### 14.1 Storage Structure

```
CHARACTER STATE (specializations.seiðkona)
├── resonance: int (0-10)
├── accumulatedAethericDamage: int (0-unbounded)
├── damageHistory: List<DamageEntry>
│   └── Cast #1: 2d6 = 7 damage
│   └── Cast #2: 2d6 = 5 damage
│   └── Cast #3: 2d6 = 9 damage
│   └── ... (up to 10 casts maximum for v0.20.8)
└── lastUnravelingTime: DateTime?
```

### 14.2 Damage Tracking Rules

1. **Only Aether Magic Counts:** Only abilities that build Resonance contribute to accumulation
2. **Separate from HP Damage:** Not subtracted from character HP; purely a resource
3. **Persists Across Combats:** Survives encounter changes and scene transitions
4. **Can Only Be Used Once:** Unraveling is the only ability that accesses this damage (v0.20.8c)
5. **Manual Inspection:** Characters can view accumulated damage at any time

### 14.3 Sample Accumulation Scenario

```
Turn 1: Seiðr Bolt - Roll 2d6 = 4, Deal 4 damage
        Resonance: 0→1, Accumulated Damage: 0→4

Turn 2: Seiðr Bolt - Roll 2d6 = 8, Deal 8 damage
        Resonance: 1→2, Accumulated Damage: 4→12

Turn 3: Wyrd Sight (NO accumulation)
        Resonance: 2 (unchanged), Accumulated Damage: 12 (unchanged)

Turn 4: Seiðr Bolt - Roll 2d6 = 6, Deal 6 damage
        Resonance: 2→3, Accumulated Damage: 12→18

[... 7 more Seiðr Bolt casts to reach Resonance 10 ...]

Final State Before Unraveling:
- Resonance: 10/10 (CRITICAL)
- Accumulated Aetheric Damage: 4+8+6+5+7+3+9+8+4+7 = 61 damage

At Unraveling (v0.20.8c):
- Deal 61 damage as massive once-off attack
- Reset Resonance to 0/10
- Reset Accumulated Damage to 0
- Trigger guaranteed 20% corruption check
```

---

## 15. Corruption Integration Patterns

### 15.1 Corruption Service Integration

The Seiðkona's corruption system integrates with the v0.18.x **CorruptionService** as follows:

**File:** `src/Core/RuneAndRust.Application/Trauma/ICorruptionService.cs` (existing)

```csharp
public interface ICorruptionService
{
    // Apply corruption to character
    Task ApplyCorruptionAsync(
        Guid characterId,
        string source,
        int amount,
        string description);

    // Get current corruption level
    Task<int> GetCorruptionLevelAsync(Guid characterId);

    // Evaluate corruption risk at specific level
    Task<CorruptionCheckResult> EvaluateCorruptionAsync(
        Guid characterId,
        int riskPercentage,
        string reason);
}
```

### 15.2 Integration Flow in SeiðkonaAbilityService

```csharp
// When Seiðr Bolt is cast at Resonance 5+:

private async Task<CorruptionRiskResult> EvaluateCorruptionRiskAsync(...)
{
    var riskPercentage = GetRiskPercentage(resonanceLevel);

    if (riskPercentage == 0)
        return CorruptionRiskResult.NoRisk(...); // Safe zone

    // Roll d100
    var roll = _diceService.Roll(1, 100).Total;
    var triggered = roll < riskPercentage;

    // If triggered, call CorruptionService
    if (triggered)
    {
        await _corruptionService.ApplyCorruptionAsync(
            characterId: characterId,
            source: "Seiðkona_Resonance_" + abilityId,
            amount: 10,  // Base corruption amount
            description: $"Seiðr Bolt cast at Resonance {resonanceLevel}/10");
    }

    return CorruptionRiskResult.AtRisk(triggered, ...);
}
```

### 15.3 Risk Escalation Example

```
Resonance 5-7 (5% risk):
├─ Roll d100
├─ If 1-5: Corruption applied (10 points)
└─ If 6-100: Safe

Resonance 8-9 (15% risk):
├─ Roll d100
├─ If 1-15: Corruption applied (10 points)
└─ If 16-100: Safe

Resonance 10 (25% risk):
├─ Roll d100
├─ If 1-25: Corruption applied (15 points)
└─ If 26-100: Safe
```

---

## 16. Logging Specifications

### 16.1 Ability Execution Logging

All ability uses are logged with comprehensive context:

```
[SEIÐKONA_ABILITY] CharacterId={guid}
Event: Seiðr Bolt Executed
Timestamp: 2026-01-28 14:30:45Z
ApCost: 1 AP
DamageRoll: 2d6 = [3, 5] = 8
DamageDealt: 8 (after DEF save: Fail)
TargetId: {target-guid}
TargetHealth: 45 → 37 HP

ResonanceBefore: 4/10
ResonanceAfter: 5/10
CorruptionRiskEntry: Resonance now 5+ range (5% per cast)

AccumulatedDamageBefore: 18
AccumulatedDamageAfter: 26

CorruptionCheck: Performed (5%)
CorruptionCheckResult: No (rolled 43/100)
CorruptionApplied: FALSE

Status: SUCCESS
```

### 16.2 Corruption Event Logging

```
[CORRUPTION_EVENT] CharacterId={guid}
EventTime: 2026-01-28 14:31:22Z
Source: Seiðkona_SeiðrBolt_Resonance
Trigger: Seiðr Bolt cast at Resonance 8
RiskPercentage: 15%
CheckRoll: 12/100
Result: TRIGGERED (roll < 15%)
CorruptionApplied: 10 points
NewCorruptionLevel: 35
Description: Aether Resonance corruption from high-risk casting
```

### 16.3 Resonance Milestone Logging

```
[RESONANCE_MILESTONE] CharacterId={guid}
Timestamp: 2026-01-28 14:35:10Z
Event: CRITICAL_THRESHOLD_REACHED
PreviousResonance: 9/10
CurrentResonance: 10/10
Status: MAXIMUM RESONANCE

WARNING: Corruption risk now 25% per cast
WARNING: Unraveling capstone ready for use

Accumulated Aetheric Damage: 67
Ready for massive payoff or continued high-risk casting
```

---

## 17. Unit Testing Requirements

### 17.1 Test Suite Structure

```
src/Tests/RuneAndRust.Application.Tests/
├── Specializations/
│   └── Seiðkona/
│       ├── AetherResonanceServiceTests.cs
│       ├── SeiðkonaAbilityServiceTests.cs
│       ├── SeiðrBoltAbilityTests.cs
│       ├── WyrdSightAbilityTests.cs
│       ├── CorruptionIntegrationTests.cs
│       └── AccumulatedAethericDamageTests.cs
└── Domain/
    └── Specializations/
        └── Seiðkona/
            ├── AetherResonanceResourceTests.cs
            ├── AccumulatedAethericDamageTests.cs
            └── CorruptionRiskResultTests.cs
```

### 17.2 Test Method Signatures

**File:** `src/Tests/RuneAndRust.Application.Tests/Specializations/Seiðkona/AetherResonanceServiceTests.cs`

```csharp
namespace RuneAndRust.Application.Tests.Specializations.Seiðkona;

using System;
using System.Threading.Tasks;
using Xunit;
using RuneAndRust.Application.Specializations.Seiðkona;
using RuneAndRust.Domain.Specializations.Seiðkona;

public class AetherResonanceServiceTests
{
    private readonly IAetherResonanceService _service;

    public AetherResonanceServiceTests()
    {
        // Setup dependency injection, mocks, etc.
        _service = new AetherResonanceService(...);
    }

    [Fact]
    public async Task GetCurrentResonanceAsync_WhenCharacterNotSeiðkona_ReturnsZero()
    {
        // Arrange
        var characterId = Guid.NewGuid();

        // Act
        var result = await _service.GetCurrentResonanceAsync(characterId);

        // Assert
        Assert.Equal(0, result);
    }

    [Fact]
    public async Task BuildResonanceAsync_WhenBelowMax_IncrementsCorrectly()
    {
        // Arrange
        var characterId = Guid.NewGuid();
        // Setup character with Resonance 3

        // Act
        var result = await _service.BuildResonanceAsync(characterId, 1);

        // Assert
        Assert.Equal(4, result);
    }

    [Fact]
    public async Task BuildResonanceAsync_WhenAtNine_ReachesMax()
    {
        // Arrange
        var characterId = Guid.NewGuid();
        // Setup character with Resonance 9

        // Act
        var result = await _service.BuildResonanceAsync(characterId, 2);

        // Assert
        Assert.Equal(10, result); // Capped at max
    }

    [Fact]
    public async Task GetCorruptionRiskPercentageAsync_WhenResonance0_ReturnsZero()
    {
        // Arrange
        var characterId = Guid.NewGuid();

        // Act
        var result = await _service.GetCorruptionRiskPercentageAsync(characterId);

        // Assert
        Assert.Equal(0, result);
    }

    [Theory]
    [InlineData(5, 5)]
    [InlineData(6, 5)]
    [InlineData(7, 5)]
    public async Task GetCorruptionRiskPercentageAsync_WhenResonance5to7_ReturnsFivePercent(
        int resonance,
        int expected)
    {
        // Arrange
        var characterId = Guid.NewGuid();
        // Setup character with specified resonance

        // Act
        var result = await _service.GetCorruptionRiskPercentageAsync(characterId);

        // Assert
        Assert.Equal(expected, result);
    }

    [Theory]
    [InlineData(8, 15)]
    [InlineData(9, 15)]
    public async Task GetCorruptionRiskPercentageAsync_WhenResonance8to9_ReturnsFifteenPercent(
        int resonance,
        int expected)
    {
        // Arrange
        var characterId = Guid.NewGuid();
        // Setup character with specified resonance

        // Act
        var result = await _service.GetCorruptionRiskPercentageAsync(characterId);

        // Assert
        Assert.Equal(expected, result);
    }

    [Fact]
    public async Task GetCorruptionRiskPercentageAsync_WhenResonance10_ReturnsTwentyFivePercent()
    {
        // Arrange
        var characterId = Guid.NewGuid();
        // Setup character with Resonance 10

        // Act
        var result = await _service.GetCorruptionRiskPercentageAsync(characterId);

        // Assert
        Assert.Equal(25, result);
    }

    [Fact]
    public async Task AddAccumulatedDamageAsync_WhenMultipleCasts_AggregatesCorrectly()
    {
        // Arrange
        var characterId = Guid.NewGuid();

        // Act
        await _service.AddAccumulatedDamageAsync(characterId, 8);
        await _service.AddAccumulatedDamageAsync(characterId, 6);
        var result = await _service.GetAccumulatedDamageAsync(characterId);

        // Assert
        Assert.Equal(14, result);
    }

    [Fact]
    public async Task ResetResonanceAndDamageAsync_ResetsToZero()
    {
        // Arrange
        var characterId = Guid.NewGuid();
        // Setup with Resonance 10, Accumulated 67

        // Act
        await _service.ResetResonanceAndDamageAsync(characterId);
        var resonance = await _service.GetCurrentResonanceAsync(characterId);
        var damage = await _service.GetAccumulatedDamageAsync(characterId);

        // Assert
        Assert.Equal(0, resonance);
        Assert.Equal(0, damage);
    }
}
```

**File:** `src/Tests/RuneAndRust.Application.Tests/Specializations/Seiðkona/SeiðrBoltAbilityTests.cs`

```csharp
public class SeiðrBoltAbilityTests
{
    private readonly ISeiðkonaAbilityService _abilityService;
    private readonly IAetherResonanceService _resonanceService;
    private readonly ICorruptionService _corruptionService;

    public SeiðrBoltAbilityTests()
    {
        // Setup
    }

    [Fact]
    public async Task ExecuteSeiðrBoltAsync_DealsCorrectDamage()
    {
        // Arrange
        var characterId = Guid.NewGuid();
        var targetId = Guid.NewGuid();

        // Act
        var result = await _abilityService.ExecuteSeiðrBoltAsync(characterId, targetId);

        // Assert
        Assert.True(result.Success);
        Assert.InRange(result.DamageDealt, 2, 12);
    }

    [Fact]
    public async Task ExecuteSeiðrBoltAsync_BuildsResonanceByOne()
    {
        // Arrange
        var characterId = Guid.NewGuid();
        var targetId = Guid.NewGuid();
        var beforeResonance = await _resonanceService.GetCurrentResonanceAsync(characterId);

        // Act
        await _abilityService.ExecuteSeiðrBoltAsync(characterId, targetId);
        var afterResonance = await _resonanceService.GetCurrentResonanceAsync(characterId);

        // Assert
        Assert.Equal(beforeResonance + 1, afterResonance);
    }

    [Fact]
    public async Task ExecuteSeiðrBoltAsync_AccumulatesAethericDamage()
    {
        // Arrange
        var characterId = Guid.NewGuid();
        var targetId = Guid.NewGuid();
        var beforeDamage = await _resonanceService.GetAccumulatedDamageAsync(characterId);

        // Act
        var result = await _abilityService.ExecuteSeiðrBoltAsync(characterId, targetId);
        var afterDamage = await _resonanceService.GetAccumulatedDamageAsync(characterId);

        // Assert
        Assert.Equal(beforeDamage + result.DamageDealt, afterDamage);
    }

    [Fact]
    public async Task ExecuteSeiðrBoltAsync_WhenResonance4_NoCorruptionCheck()
    {
        // Arrange
        var characterId = Guid.NewGuid();
        var targetId = Guid.NewGuid();
        // Setup with Resonance 4

        // Act
        var result = await _abilityService.ExecuteSeiðrBoltAsync(characterId, targetId);

        // Assert
        Assert.False(result.CorruptionResult.RiskTriggered);
        Assert.Equal(0, result.CorruptionResult.RiskPercentage);
    }

    [Fact]
    public async Task ExecuteSeiðrBoltAsync_WhenResonance5_TriggersCorruptionCheck()
    {
        // Arrange
        var characterId = Guid.NewGuid();
        var targetId = Guid.NewGuid();
        // Setup with Resonance 4

        // Act
        var result = await _abilityService.ExecuteSeiðrBoltAsync(characterId, targetId);
        // Resonance is now 5

        // Assert
        Assert.Equal(5, result.ResonanceAfter);
        // Next cast would trigger check at 5%
    }

    [Fact]
    public async Task ExecuteSeiðrBoltAsync_WhenResonance10_TriggersCriticalCheck()
    {
        // Arrange
        var characterId = Guid.NewGuid();
        var targetId = Guid.NewGuid();
        // Setup with Resonance 9

        // Act
        var result = await _abilityService.ExecuteSeiðrBoltAsync(characterId, targetId);

        // Assert
        Assert.Equal(10, result.ResonanceAfter);
        // Next cast would trigger check at 25%
    }
}
```

---

## 18. Deliverable Checklist

- [ ] Domain Value Objects
  - [ ] AetherResonanceResource.cs (with full XML docs)
  - [ ] AccumulatedAethericDamage.cs (with full XML docs)
  - [ ] CorruptionRiskResult.cs (with full XML docs)
  - [ ] ResidualWeave.cs (for future Tier 2/3)

- [ ] Domain Enums
  - [ ] SeiðkonaAbilityId.cs (9 abilities defined)
  - [ ] WyrdSightEffect.cs (4 detection effects)

- [ ] Application Services
  - [ ] IAetherResonanceService.cs (interface)
  - [ ] ISeiðkonaAbilityService.cs (interface)
  - [ ] SeiðkonaAbilityService.cs (implementation)
  - [ ] AetherResonanceService.cs (implementation)

- [ ] Configuration Files
  - [ ] specializations.json (Seiðkona entry with all details)
  - [ ] abilities.json (Tier 1 entries: Seiðr Bolt, Wyrd Sight, Aether Attunement)

- [ ] Unit Tests (~12 tests minimum)
  - [ ] AetherResonanceServiceTests.cs (8 tests)
  - [ ] SeiðrBoltAbilityTests.cs (7 tests)
  - [ ] CorruptionIntegrationTests.cs (4 tests)

- [ ] Documentation
  - [ ] This design specification (v0.20.8a)
  - [ ] Architecture diagrams (included)
  - [ ] User stories and acceptance criteria
  - [ ] Logging specifications

---

## 19. Acceptance Criteria

### General Criteria

- [x] All domain models properly implement value object pattern with immutability
- [x] All enums are properly defined with XML documentation
- [x] All service interfaces are well-defined and testable
- [x] Configuration files are properly formatted JSON with all required fields
- [x] Logging is comprehensive and includes full context
- [x] Corruption integration follows v0.18.x patterns

### Seiðr Bolt Criteria

- [x] Deals 2d6 Aetheric damage (2-12 range)
- [x] Target can make DEF save for half damage
- [x] Builds +1 Resonance (capped at 10)
- [x] Accumulates Aetheric damage equal to damage dealt
- [x] Triggers corruption check if Resonance 5+
- [x] Displays results clearly in combat output

### Wyrd Sight Criteria

- [x] Costs 2 AP
- [x] Creates 10-space radius detection area
- [x] Lasts 3 turns
- [x] Reveals invisible creatures
- [x] Shows magical auras
- [x] Identifies corrupted beings
- [x] Does NOT build Resonance
- [x] Does NOT trigger corruption check

### Aether Attunement Criteria

- [x] Passive ability (always active)
- [x] Grants +10% AP regeneration
- [x] Applies at specialization selection
- [x] Persists permanently
- [x] Stacks with other AP regen bonuses

### Resonance System Criteria

- [x] Starts at 0
- [x] Builds to max of 10
- [x] Corruption risk: 0% (0-4), 5% (5-7), 15% (8-9), 25% (10)
- [x] Risk checks occur AFTER successful ability cast
- [x] Accumulated damage tracked separately
- [x] Both reset on Unraveling (v0.20.8c)

### Integration Criteria

- [x] Integrates with v0.18.x CorruptionService
- [x] Follows established specialization patterns
- [x] Uses DiceService for damage rolls and corruption checks
- [x] Logs all events to audit trail
- [x] Handles character state persistence

---

## 20. Dependencies & Prerequisites

### Required Versions

| Dependency | Version | Purpose |
|------------|---------|---------|
| v0.6.x Dice System | Complete | Damage rolling (2d6), corruption checks (1d100) |
| v0.15.x Perception Layer | Complete | Detection system infrastructure |
| v0.17.5 Character Creation | Complete | Base character entity, specialization selection |
| v0.18.x Corruption System | Complete | CorruptionService, corruption application |
| v0.20.0 Framework | Complete | Specialization base classes, v0.20.x patterns |

### New Dependencies (v0.20.8a)

- RuneAndRust.Domain.Specializations.Seiðkona
- RuneAndRust.Application.Specializations.Seiðkona
- RuneAndRust.Application.Trauma (existing, for ICorruptionService)

### Integration Points

1. **DiceService:** Roll damage and corruption checks
2. **CharacterRepository:** Persist specialization state
3. **CorruptionService:** Apply corruption on failed checks
4. **CombatService:** Apply damage, manage AP, track positions
5. **EventLogger:** Log all ability executions and events

---

## Conclusion

Version 0.20.8a establishes the Seiðkona specialization framework with three foundational Tier 1 abilities. The design emphasizes:

- **Risk-Reward Tension:** Higher Resonance = more power but more corruption risk
- **Resource Building:** Resonance builds through casting (unique mechanic)
- **Corruption Integration:** Seamless integration with v0.18.x Corruption system
- **Damage Accumulation:** Separate damage pool for capstone (v0.20.8c)
- **Detection Focus:** Wyrd Sight provides intelligence gathering without risk

This phase establishes patterns that Tier 2 (v0.20.8b) and Tier 3 (v0.20.8c) will expand upon, culminating in the Unraveling capstone that consumes all accumulated damage for a massive once-off attack.

---

**Version Control:**
- Created: 2026-01-28
- Status: Ready for Implementation
- Next Phase: v0.20.8b (Tier 2 Abilities: Fate's Thread, Weave Disruption, Resonance Cascade)
