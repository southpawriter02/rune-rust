# Design Specification: v0.20.8c - Tier 3 Capstone & Advanced Combat

**Version:** v0.20.8c
**Status:** Design Phase
**Last Updated:** 2026-01-28
**Target Tests:** ~16 unit and integration tests
**Specialization:** Seiðkona (Seeress)
**Path Type:** Heretical (Final & Complete)
**Archetype:** Mystic
**Tier:** 3 (Capstone)

---

## Table of Contents

1. [Executive Summary](#1-executive-summary)
2. [Tier 3 Overview](#2-tier-3-overview)
3. [Architecture Diagrams](#3-architecture-diagrams)
4. [Völva's Vision Ability Specification](#4-völvas-vision-ability-specification)
5. [Aether Storm Ability Specification](#5-aether-storm-ability-specification)
6. [Unraveling Capstone Specification](#6-unraveling-capstone-specification)
7. [Capstone Mechanics Deep Dive](#7-capstone-mechanics-deep-dive)
8. [Accumulated Damage Resolution](#8-accumulated-damage-resolution)
9. [Guaranteed Corruption Check](#9-guaranteed-corruption-check)
10. [Ultimate Resource Reset](#10-ultimate-resource-reset)
11. [Combat Scenarios](#11-combat-scenarios)
12. [User Stories](#12-user-stories)
13. [Application Service Layer](#13-application-service-layer)
14. [Domain Models (Tier 3 Only)](#14-domain-models-tier-3-only)
15. [Configuration Specifications](#15-configuration-specifications)
16. [Code Examples & Implementation](#16-code-examples--implementation)
17. [Corruption Integration at Capstone](#17-corruption-integration-at-capstone)
18. [End-Game Balance Considerations](#18-end-game-balance-considerations)
19. [Logging Specifications](#19-logging-specifications)
20. [Unit Testing Requirements](#20-unit-testing-requirements)
21. [Deliverable Checklist](#21-deliverable-checklist)
22. [Acceptance Criteria](#22-acceptance-criteria)
23. [Dependencies & Prerequisites](#23-dependencies--prerequisites)
24. [Complete Specialization Summary](#24-complete-specialization-summary)

---

## 1. Executive Summary

Version 0.20.8c completes the Seiðkona specialization with two powerful Tier 3 abilities and the legendary **Unraveling** capstone - an ultimate ability that consumes all accumulated Aetheric damage and resets the Resonance cycle.

### Key Features

| Feature | Description |
|---------|-------------|
| **Völva's Vision** | Large-area hidden enemy revelation (+2 Resonance) |
| **Aether Storm** | Cone area attack with massive damage (+2 Resonance) |
| **Unraveling** | Capstone: Expend all accumulated damage at Resonance 10 for guaranteed payoff |
| **Unlock Cost** | 4 PP (specialization points) for Tier 3 |
| **Capstone Logic** | ONLY usable at exactly Resonance 10, consumes ALL resources, resets cycle |
| **Corruption Check** | Guaranteed 20% corruption check (not 25% like normal casting) |

### Tier 3 Abilities Matrix

| Ability | Type | AP Cost | Resonance | Damage | Duration |
|---------|------|---------|-----------|--------|----------|
| **Völva's Vision** | Active | 3 AP (2*) | +2 | — | Instant effect |
| **Aether Storm** | Active | 5 AP (4*) | +2 | 4d6 cone | Instant |
| **Unraveling** | Active | 5 AP | Special | All accrued | Instant |

*With Cascade at 5+ Resonance

### Core Deliverables

| Category | Count | Details |
|----------|-------|---------|
| **Domain Value Objects** | 4 | UnravelingResult, AetherStormEffect, VisionReveal, ResidualWeave |
| **Domain Enums** | 1 | UnravelingOutcome |
| **Application Services** | 2 | IUnravelingService, IVölvasVisionService |
| **Ability Implementations** | 3 | All Tier 3 abilities with full mechanics |
| **Configuration Files** | 1 | abilities.json (Tier 3 entries) |
| **Unit Tests** | ~16 | Comprehensive T3 + capstone coverage |

---

## 2. Tier 3 Overview

### 2.1 The Final Tier: Power & Consequence

Tier 3 represents the apex of Seiðkona power - abilities that rival entire combat encounters in damage potential. However, reaching and using Tier 3 abilities requires traversing extremely high corruption risk zones.

**Tier 3 Characteristics:**

1. **Extreme Power:** 4d6 cone damage (Aether Storm), mass revelation (Völva's Vision)
2. **Extreme Cost:** 5 AP baseline (4 with cascade), highest in game
3. **Extreme Risk:** Each cast risks 15-25% corruption depending on Resonance
4. **Strategic Payoff:** Unraveling capstone enables "save up" playstyle for massive damage burst
5. **Completion:** Final specialization abilities enable all Seiðkona playstyles

### 2.2 Pre-Capstone Abilities (Tier 3 Non-Capstone)

Two powerful abilities that lead to capstone use:

**Völva's Vision:**
- Large area detection (15 spaces)
- Reveals ALL hidden creatures
- See beyond normal perception
- +2 Resonance (high buildup)
- Non-combat focused (no damage)

**Aether Storm:**
- Area-of-effect damage spell
- 4d6 damage in cone (huge!)
- +2 Resonance (high buildup)
- Causes 4d6 accumulated damage
- High-risk, high-reward combat ability

### 2.3 The Unraveling Capstone

**What Makes It Special:**

```
UNRAVELING (Capstone Ability)
├── Availability: ONLY when Resonance = 10 AND Accumulated Damage > 0
├── Cost: 5 AP (fixed, no cascade applies)
├── Effect: Deal ENTIRE accumulated Aetheric damage as once-off attack
├── Resource Reset: Resonance 10→0, Accumulated Damage X→0
├── Corruption: Guaranteed 20% check (not scaled to Resonance)
├── Duration: Instant (one massive hit)
├── Tactical: Ultimate burst damage, resets cycle for next phase

UNIQUE PROPERTIES:
1. Cannot be used before reaching Resonance 10
2. Consumes ALL accumulated damage (not partial)
3. No scaling bonus (uses accumulated value directly)
4. Resets Resonance to 0 (must rebuild)
5. Guaranteed corruption check regardless of other factors
6. Once per long rest (or specific refresh condition)
```

---

## 3. Architecture Diagrams

### 3.1 Tier 3 Complete Service Architecture

```
┌──────────────────────────────────────────────────────────────────┐
│         v0.20.8c - Tier 3 & Capstone Services Layer              │
├──────────────────────────────────────────────────────────────────┤
│                                                                   │
│  ┌──────────────────────┐  ┌──────────────────────────────────┐ │
│  │ IVölvasVisionService │  │ IAetherStormService              │ │
│  │ (Mass Revelation)    │  │ (Area Damage)                    │ │
│  ├──────────────────────┤  ├──────────────────────────────────┤ │
│  │ + Execute()          │  │ + Execute()                      │ │
│  │ + GetRevealedCount() │  │ + CalculateDamage()              │ │
│  │ + FilterByDistance() │  │ + GetAffectedTargets()           │ │
│  │ + MapVisibility()    │  │ + ApplyConeDamage()              │ │
│  └──────────────────────┘  └──────────────────────────────────┘ │
│             │                                 │                   │
│             └──────────────┬──────────────────┘                  │
│                            │                                     │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │ IUnravelingService (CAPSTONE)                              │ │
│  │ ┌──────────────────────────────────────────────────────┐  │ │
│  │ │ + ValidateUnravelingPreconditions()                  │  │ │
│  │ │ + ExecuteUnraveling()                                │  │ │
│  │ │ + ResolveAccumulatedDamage()                         │  │ │
│  │ │ + ApplyGuaranteedCorruptionCheck()                   │  │ │
│  │ │ + ResetResonanceAndAccumulation()                    │  │ │
│  │ │ + GetUnravelingReadiness()                           │  │ │
│  │ └──────────────────────────────────────────────────────┘  │ │
│  └────────────────────────────────────────────────────────────┘ │
│                            │                                     │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │ ISeiðkonaAbilityService (Extended from Tiers 1-2)         │ │
│  │ ┌──────────────────────────────────────────────────────┐  │ │
│  │ │ + ExecuteVölvasVision()                              │  │ │
│  │ │ + ExecuteAetherStorm()                               │  │ │
│  │ │ + ExecuteUnraveling()                                │  │ │
│  │ │ + CanExecuteCapstone(): bool                         │  │ │
│  │ │ + GetCapstoneReadiness()                             │  │ │
│  │ └──────────────────────────────────────────────────────┘  │ │
│  └────────────────────────────────────────────────────────────┘ │
│                                                                   │
└──────────────────────────────────────────────────────────────────┘
```

### 3.2 Unraveling Execution Flow

```
                PLAYER INITIATES UNRAVELING
                        │
                        ▼
        ┌───────────────────────────────┐
        │  PRECONDITION VALIDATION      │
        ├───────────────────────────────┤
        │                               │
        │ ✓ Resonance = 10?            │
        │ ✓ Accumulated Damage > 0?    │
        │ ✓ 5 AP available?            │
        │ ✓ Not in cooldown?           │
        │                               │
        └───────────┬───────────────────┘
                    │
        ┌───────────┴───────────┐
        │                       │
    PASS                    FAIL
        │                       │
        ▼                       ▼
  ┌──────────────┐    ┌─────────────────┐
  │ CONTINUE     │    │ REJECT & REPORT │
  │              │    │ - Reason        │
  │              │    │ - Next steps    │
  └──────┬───────┘    └─────────────────┘
         │
         ▼
   ┌──────────────────────────────┐
   │ SPEND 5 AP                   │
   └──────┬───────────────────────┘
          │
          ▼
   ┌──────────────────────────────┐
   │ RETRIEVE ACCUMULATED DAMAGE  │
   │ Example: 67 total Aetheric   │
   └──────┬───────────────────────┘
          │
          ▼
   ┌──────────────────────────────┐
   │ APPLY DAMAGE TO ENEMIES      │
   │ Method: Depends on scenario  │
   │ - Single target: Full 67     │
   │ - Multiple targets: Split    │
   │ - Area: Cone spread          │
   └──────┬───────────────────────┘
          │
          ▼
   ┌──────────────────────────────┐
   │ TRIGGER GUARANTEED CHECK     │
   │ Corruption risk: 20% (fixed) │
   │ Roll d100 vs 20              │
   └──────┬───────────────────────┘
          │
    ┌─────┴─────┐
    │           │
 CORRUPT    SAFE
  (20%)     (80%)
    │           │
    ▼           ▼
┌──────────┐ ┌──────────┐
│ Ability  │ │ Ability  │
│ Succeeds │ │ Succeeds │
│ + Corr.  │ │ Clean    │
└──────────┘ └──────────┘
    │           │
    └─────┬─────┘
          │
          ▼
   ┌──────────────────────────────┐
   │ RESET RESOURCES              │
   │ Resonance: 10 → 0            │
   │ Accum. Damage: 67 → 0        │
   └──────┬───────────────────────┘
          │
          ▼
   ┌──────────────────────────────┐
   │ ABILITY COMPLETE             │
   │ Cycle reset, ready to rebuild│
   └──────────────────────────────┘
```

### 3.3 Tier 3 Resource Economy

```
                    SEIÐKONA RESOURCE CYCLE

PHASE 1: RESONANCE BUILDING (Tiers 1-2)
┌──────────────────────────────────────────────┐
│ Resonance: 0 → 10                           │
│ Accumulated Damage: 0 → X (variable)        │
│ Corruption Risk: 0% → 25%                   │
│ Duration: Variable (5-15 casts)             │
│                                              │
│ Activities:                                  │
│ - Seiðr Bolt (+1 Rez, +Damage)              │
│ - Fate's Thread (+2 Rez)                    │
│ - Weave Disruption (+1 Rez)                 │
│ - Tier 3 can be used once 10 reached        │
└──────────┬───────────────────────────────────┘
           │
           ▼
PHASE 2: PEAK POWER (Resonance 10)
┌──────────────────────────────────────────────┐
│ Resonance: 10 (locked at max)               │
│ Accumulated Damage: X (ready for payoff)    │
│ Corruption Risk: 25% per normal cast        │
│ Duration: Until Unraveling or reset         │
│                                              │
│ Options:                                     │
│ A) Cast Unraveling now for massive damage   │
│ B) Continue casting (25% corruption risk)   │
│ C) Retreat and reset for later              │
└──────────┬───────────────────────────────────┘
           │
           ▼
PHASE 3: CAPSTONE EXECUTION
┌──────────────────────────────────────────────┐
│ Cast Unraveling at Resonance 10             │
│ → Deal ALL accumulated damage                │
│ → Guaranteed 20% corruption check            │
│ → Reset to Resonance 0, Accum. 0            │
│ → Cycle complete!                           │
│                                              │
│ Result:                                      │
│ - Victory: Massive damage + potential clean │
│ - Corruption: Massive damage + Corruption   │
│ - Either way: Powerful round closed          │
└──────────────────────────────────────────────┘
```

---

## 4. Völva's Vision Ability Specification

### 4.1 Overview

**Völva's Vision** grants the Seiðkona's ultimate perception, revealing all hidden creatures within a massive 15-space radius.

**Mechanical Focus:** Mass detection + Strategic intelligence (high-tier, non-damage)

### 4.2 Ability Details

| Property | Value |
|----------|-------|
| **Ability ID** | SeiðkonaAbilityId.VölvasVision |
| **Display Name** | Völva's Vision |
| **Tier** | 3 (Unlock: 4 PP) |
| **Type** | Active Mass Detection |
| **AP Cost** | 3 AP (2 AP with Cascade at 5+ Resonance) |
| **Resource Cost** | None |
| **Range** | 15 spaces (massive radius) |
| **Target Type** | Area (self-centered) |
| **Duration** | Instant (revelation persists until end of scene) |
| **Resonance Generated** | +2 (significant, like Fate's Thread) |

### 4.3 Effect Resolution

**On Successful Cast:**

1. **Activate Mass Vision:**
   - Create perception zone centered on Seiðkona
   - 15-space radius (larger than most abilities)
   - Instantly scan all creatures in range

2. **Reveal Hidden Creatures:**
   - All invisible creatures become visible
   - Ethereal creatures detected and marked
   - Hidden/ambushed creatures revealed
   - Phased creatures detected

3. **Mark Revelations:**
   - Each revealed creature marked for party visibility
   - Position and state visible to all allies
   - Marked creatures lose ambush/invisibility advantage
   - Effect persists until scene changes

4. **Resonance Generation:**
   - Build +2 Resonance (high buildup)
   - Accumulate 0 Aetheric damage (non-combat ability)

5. **Corruption Check:**
   - Trigger if Resonance becomes 5+
   - Standard check (not guaranteed)

### 4.4 Revealed Information Categories

| Hidden State | Revelation Effect |
|--------------|-------------------|
| **Invisible** | Creature becomes visible |
| **Ethereal** | Position and existence revealed |
| **Phased** | Location pinpointed |
| **Concealed** | True location discovered |
| **Camouflaged** | Visual appearance revealed |
| **Stealth** | Position compromised |

### 4.5 Code Implementation Fragment

```csharp
public async Task<VölvasVisionResult> ExecuteVölvasVisionAsync(
    Guid characterId)
{
    if (!await CanCastAbilityAsync(characterId, SeiðkonaAbilityId.VölvasVision))
        throw new InvalidOperationException("Cannot cast Völva's Vision");

    var resonance = await _resonanceService.GetCurrentResonanceAsync(characterId);
    var cascadeActive = await _cascadeService.IsCascadeActiveAsync(characterId);

    // Calculate AP cost with cascade
    var baseCost = 3;
    var actualCost = cascadeActive ? 2 : 3;

    // Spend AP
    await _combatService.SpendAPAsync(characterId, actualCost);

    // Get caster position
    var casterPos = await _combatService.GetCharacterPositionAsync(characterId);

    // Find all hidden creatures within 15 spaces
    var hiddenCreatures = await _combatService.FindHiddenCreaturesAsync(
        centerPosition: casterPos,
        radiusSpaces: 15);

    var revealedCreatures = new List<VisionReveal>();

    foreach (var creature in hiddenCreatures)
    {
        var reveal = new VisionReveal(
            CreatureId: creature.Id,
            CreatureName: creature.Name,
            Position: creature.Position,
            HiddenType: creature.HiddenState,
            Distance: CalculateDistance(casterPos, creature.Position));

        // Mark creature as revealed to party
        await _combatService.RevealCreatureAsync(creature.Id);

        revealedCreatures.Add(reveal);
    }

    // Build Resonance (+2)
    var newResonance = await _resonanceService.BuildResonanceAsync(characterId, 2);

    // Evaluate corruption check
    var corruptionResult = await EvaluateCorruptionRiskAsync(
        characterId,
        newResonance);

    return new VölvasVisionResult(
        Success: true,
        RevealedCount: revealedCreatures.Count,
        RevealedCreatures: revealedCreatures,
        RadiusSpaces: 15,
        ResonanceBefore: resonance,
        ResonanceAfter: newResonance,
        CorruptionResult: corruptionResult);
}
```

### 4.6 Output Display Format

```
VÖLVA'S VISION CAST SUCCESSFUL

Perception Area: 15-space radius sphere
Scan Complete: Revelation active

REVEALED CREATURES (3 total)
├─ Corrupted Shadow (Invisible)
│  Position: 8 spaces northeast
│  State: Invisible to normal sight (NOW REVEALED)
│  Threat: High
│
├─ Ethereal Wraith (Phased)
│  Position: 12 spaces west
│  State: Existing on Ethereal Plane (NOW DETECTED)
│  Threat: Medium
│
└─ Hidden Scout (Concealed)
   Position: 6 spaces south
   State: Hiding in shadow (POSITION REVEALED)
   Threat: Low

TACTICAL RESULT
├─ Party gains full awareness
├─ Ambush prevented
├─ Initiative advantage gained
└─ No enemies remain hidden

RESONANCE UPDATE
├─ Before: 8/10 (High Risk Zone: 15%)
├─ After:  10/10 (MAXIMUM RESONANCE REACHED)
└─ Corruption Risk: 25% (if more abilities used)

STATUS: Unraveling capstone is now available!
```

---

## 5. Aether Storm Ability Specification

### 5.1 Overview

**Aether Storm** unleashes raw Aetheric power in a devastating cone attack, dealing the highest single-ability damage in the Seiðkona arsenal.

**Mechanical Focus:** Area-of-effect damage + Accumulated damage generation

### 5.2 Ability Details

| Property | Value |
|----------|-------|
| **Ability ID** | SeiðkonaAbilityId.AetherStorm |
| **Display Name** | Aether Storm |
| **Tier** | 3 (Unlock: 4 PP) |
| **Type** | Active Spell (Area) |
| **AP Cost** | 5 AP (4 AP with Cascade at 5+ Resonance) |
| **Resource Cost** | None |
| **Range** | Cone (origin: caster, extends 8 spaces forward, 4 spaces wide) |
| **Target Type** | All enemies in cone |
| **Damage Dice** | 4d6 (massive: 4-24 damage per target) |
| **Damage Type** | Aetheric |
| **Duration** | Instant |
| **Resonance Generated** | +2 (significant buildup) |

### 5.3 Effect Resolution

**On Successful Cast:**

1. **Create Damage Cone:**
   - Origin: Caster's position
   - Direction: Chosen direction
   - Dimensions: 8 spaces long, 4 spaces wide
   - Shape: Standard cone for area spells

2. **Identify Targets:**
   - All enemies within cone geometry
   - Allies can be damaged (no friendly-fire immunity)
   - Environmental effects affected (destructible objects)

3. **Roll Damage:**
   - Roll 4d6 per target
   - Apply DEF save for half damage (if applicable)
   - Total damage pool for each target

4. **Apply to All Targets:**
   - Each target takes individual damage roll
   - Separate rolls per target (not single pool split)
   - HP reduction applied immediately

5. **Accumulation & Resonance:**
   - Accumulate 4d6 Aetheric damage (NOT total from all targets, just the damage of ability)
   - Build +2 Resonance
   - Total of all rolls from 4d6

6. **Corruption Check:**
   - Trigger if Resonance becomes 5+
   - Standard escalation (5%, 15%, 25%)

### 5.4 Cone Geometry Example

```
AETHER STORM CONE VISUALIZATION

        Caster Position (★)
              ★
             /|\
            / | \
           /  |  \
          /   |   \     8 spaces forward
         /    |    \    4 spaces wide
        /     |     \   60-degree arc
       ├──────┼──────┤

TARGETS IN RANGE:
E3 █     E1 █      E2 █
   \     / \      /
    \    │  \    /
     \   │   \  /
      \  │    \/
       \ │    /\
        \│   /  \
         ★/──────\
        /│         \
E4 █   /
     Center of cone
     hits all enemies

Result: E1, E2, E3, E4 all take 4d6 damage
E5 outside cone: not affected
```

### 5.5 Strategic Usage

**Best Used When:**
- Multiple enemies clustered together
- High Resonance (high risk payoff)
- Approaching Resonance 10 (last chance before capstone)
- Tactical advantage: high-risk, high-reward positioning

**Example Scenario:**
```
Turn 1-9: Build Resonance to 9 through mixed ability use
Turn 10: Aether Storm at Resonance 9
├─ 4d6 damage to all enemies in cone
├─ Build +2 Resonance (now at 11... wait, capped at 10)
└─ Actually: 9→10 (+1 overflow, capped at max)

Result:
├─ Massive damage dealt
├─ Reached Resonance 10
├─ Ready for Unraveling capstone next turn
└─ OR use capstone this turn if available
```

### 5.6 Code Implementation Fragment

```csharp
public async Task<AetherStormResult> ExecuteAetherStormAsync(
    Guid characterId,
    Direction coneDirection)
{
    if (!await CanCastAbilityAsync(characterId, SeiðkonaAbilityId.AetherStorm))
        throw new InvalidOperationException("Cannot cast Aether Storm");

    var resonance = await _resonanceService.GetCurrentResonanceAsync(characterId);
    var cascadeActive = await _cascadeService.IsCascadeActiveAsync(characterId);

    // Calculate AP cost
    var baseCost = 5;
    var actualCost = cascadeActive ? 4 : 5;

    await _combatService.SpendAPAsync(characterId, actualCost);

    // Get caster position
    var casterPos = await _combatService.GetCharacterPositionAsync(characterId);

    // Calculate cone geometry
    var cone = CalculateConeGeometry(casterPos, coneDirection, length: 8, width: 4);

    // Find targets in cone
    var targetsInCone = await _combatService.FindCreaturesInAreaAsync(cone);

    var damageResults = new List<ConeTargetResult>();
    var totalAccumulatedDamage = 0;

    foreach (var target in targetsInCone)
    {
        // Roll 4d6 damage
        var damageRoll = _diceService.Roll(4, 6);
        var rollTotal = damageRoll.Total;

        // Apply DEF save
        var actualDamage = await _combatService.ApplyDamageWithDefenseSaveAsync(
            targetId: target.Id,
            damageAmount: rollTotal,
            damageType: DamageType.Aetheric,
            allowDefenseSave: true);

        damageResults.Add(new ConeTargetResult(
            TargetId: target.Id,
            TargetName: target.Name,
            DamageRoll: damageRoll,
            ActualDamage: actualDamage,
            DefenseSaved: actualDamage < rollTotal));

        totalAccumulatedDamage += actualDamage;
    }

    // Accumulate Aetheric damage (just from 4d6, not from split)
    var accumulationDamage = _diceService.Roll(4, 6).Total;
    var newAccumulatedDamage = await _resonanceService.AddAccumulatedDamageAsync(
        characterId,
        accumulationDamage);

    // Build Resonance (+2)
    var newResonance = await _resonanceService.BuildResonanceAsync(characterId, 2);

    // Evaluate corruption check
    var corruptionResult = await EvaluateCorruptionRiskAsync(
        characterId,
        newResonance);

    return new AetherStormResult(
        Success: true,
        ConeRadius: new { Length: 8, Width: 4 },
        TargetsAffected: damageResults,
        TotalDamageDealt: damageResults.Sum(r => r.ActualDamage),
        AccumulatedDamageAdded: accumulationDamage,
        ResonanceBefore: resonance,
        ResonanceAfter: newResonance,
        CorruptionResult: corruptionResult);
}
```

### 5.7 Output Display Format

```
AETHER STORM CAST SUCCESSFUL

AP Cost: 5 AP (base) → 4 AP (Cascade at Resonance 9)

CONE GEOMETRY
├─ Origin: Your position
├─ Direction: Northeast
├─ Length: 8 spaces
├─ Width: 4 spaces
└─ Area: 32 square spaces

TARGETS IN CONE (4 affected)

Target 1: Corrupted Wolf #1
├─ Damage Roll: [4d6: 3+2+6+1] = 12
├─ DEF Save: Failure (no reduction)
└─ Damage Taken: 12 HP

Target 2: Corrupted Wolf #2
├─ Damage Roll: [4d6: 4+5+2+3] = 14
├─ DEF Save: Success (half damage)
└─ Damage Taken: 7 HP

Target 3: Corrupted Shadow
├─ Damage Roll: [4d6: 6+4+5+2] = 17
├─ DEF Save: Failure
└─ Damage Taken: 17 HP

Target 4: Corrupted Scout
├─ Damage Roll: [4d6: 2+3+4+6] = 15
├─ DEF Save: Failure
└─ Damage Taken: 15 HP

TOTAL DAMAGE DEALT: 12+7+17+15 = 51 HP

RESONANCE & ACCUMULATION
├─ Before: 8/10 (High Risk: 15%)
├─ After:  10/10 (MAXIMUM REACHED)
├─ Gain: +2 Resonance
├─ Accumulated Damage Roll: [4d6: 5+4+3+2] = 14
└─ Accumulated Total: Previous + 14

CORRUPTION CHECK
├─ Risk: 25% (at Resonance 10)
├─ Roll: [d100: 42]
├─ Result: Avoided (rolled > 25%)
└─ Status: Still safe!

CAPSTONE STATUS: Unraveling ready!
├─ Resonance: 10/10
├─ Accumulated Damage: 51 total
├─ Next options:
│  A) Cast Unraveling immediately
│  B) Continue with other abilities (risky)
│  C) Retreat and save for later
└─ Ready for massive payoff!
```

---

## 6. Unraveling Capstone Specification

### 6.1 Overview

**Unraveling** is the ultimate Seiðkona ability - a capstone that consumes ALL accumulated Aetheric damage to deal a massive once-off attack that resets the entire resource cycle.

**Mechanical Focus:** Resource consumption + Massive damage + Ultimate payoff

### 6.2 Ability Details

| Property | Value |
|----------|-------|
| **Ability ID** | SeiðkonaAbilityId.Unraveling |
| **Display Name** | Unraveling |
| **Tier** | 3 Capstone (Unlock: 4 PP) |
| **Type** | Active Ultimate |
| **AP Cost** | 5 AP (NO cascade reduction - fixed cost) |
| **Resource Cost** | Special: Requires Resonance 10 + Accu. Damage > 0 |
| **Range** | Single target (8 spaces) or self (area effect) |
| **Target Type** | Flexible (primary + splash) |
| **Damage** | 100% of accumulated Aetheric damage |
| **Duration** | Instant |
| **Resonance Generated** | Special: Resets to 0 (not built) |
| **Accumulated Damage** | Resets to 0 (consumed completely) |
| **Corruption Check** | Guaranteed 20% (not 25%, special case) |
| **Cooldown** | Once per long rest (or scenario end) |

### 6.3 Preconditions for Use

**Unraveling can ONLY be cast when ALL of the following are true:**

```
Precondition Checklist:
☑ Seiðkona specialization equipped
☑ Resonance == 10 (exactly, not less, not more)
☑ Accumulated Aetheric Damage > 0
☑ 5 AP available in AP pool
☑ Not in cooldown state
☑ Combat/scenario active (cannot cast in rest)
☑ Character conscious (not stunned/disabled)

If ANY precondition fails:
→ Ability becomes unavailable
→ Error message shows which precondition failed
→ UI button disabled with tooltip showing reason
```

### 6.4 Effect Resolution (Detailed)

**Step 1: Validate Preconditions**

```csharp
if (resonance != 10)
    throw new InvalidOperationException("Must have exactly 10 Resonance");

if (accumulatedDamage <= 0)
    throw new InvalidOperationException("Must have accumulated damage");

if (availableAP < 5)
    throw new InvalidOperationException("Need 5 AP");
```

**Step 2: Spend Resources**

- Consume 5 AP immediately
- Retrieve accumulated damage value (e.g., 67)
- Record pre-unraveling state for logging

**Step 3: Apply Damage**

Target selection (caster chooses):
- **Single Target:** All accumulated damage goes to one enemy
- **Primary + Splash:** 80% to primary, 20% splash to nearby
- **Area Effect:** Damage spread across nearby enemies

```csharp
// Example: Single target receives all damage
var totalDamage = accumulatedDamage; // e.g., 67
await _combatService.ApplyDamageAsync(
    targetId: chosenTarget,
    damageAmount: totalDamage,
    damageType: DamageType.Aetheric,
    allowDefenseSave: false); // No saves for capstone!
```

**Step 4: Corruption Check (Guaranteed)**

```csharp
// SPECIAL: Always 20%, not 25%
var corruptionRoll = _diceService.Roll(1, 100).Total;
var triggered = corruptionRoll <= 20;

if (triggered)
{
    await _corruptionService.ApplyCorruptionAsync(
        characterId,
        source: "Seiðkona_Unraveling_Capstone",
        amount: 15); // Slightly more than normal
}
```

**Step 5: Reset Resources**

```csharp
// Reset everything
await _resonanceService.ResetResonanceAndDamageAsync(characterId);

// Verify reset
var finalResonance = await _resonanceService.GetCurrentResonanceAsync(characterId);
var finalDamage = await _resonanceService.GetAccumulatedDamageAsync(characterId);

Assert.Equal(0, finalResonance);
Assert.Equal(0, finalDamage);
```

**Step 6: Mark Cooldown**

```csharp
// Set cooldown state (reset on long rest or scenario end)
await _combatService.SetAbilityCooldownAsync(
    characterId,
    SeiðkonaAbilityId.Unraveling,
    duration: UntilLongRest); // Special duration
```

### 6.5 Damage Resolution Modes

**Mode A: Single Target (All Damage)**

```
Accumulated Damage: 67
Target: Corrupted Boss

Application: 67 damage directly to boss
Result: Boss loses 67 HP
Scenario: Best for isolated powerful enemies
```

**Mode B: Primary + Splash (80/20 Split)**

```
Accumulated Damage: 67
Primary Target: Corrupted Boss (80%)
Splash Targets: Nearby enemies

Application:
├─ Boss: 0.80 × 67 = 53.6 → 53 damage
├─ Nearby enemy 1: 0.20 × 67 ÷ 2 ≈ 7 damage
└─ Nearby enemy 2: 0.20 × 67 ÷ 2 ≈ 7 damage

Result: Massive primary hit + some collateral
```

**Mode C: Cone Area (Equal Split)**

```
Accumulated Damage: 67
Targets in cone: 4 enemies

Application:
├─ Each target: 67 ÷ 4 = 16.75 → 16 damage
└─ Remainder: Distributed by positioning

Result: Moderate damage to all
Scenario: Best for groups of similar-threat enemies
```

### 6.6 Code Implementation

```csharp
public async Task<UnravelingResult> ExecuteUnravelingAsync(
    Guid characterId,
    Guid? primaryTargetId = null,
    UnravelingMode damageMode = UnravelingMode.SingleTarget)
{
    // VALIDATION PHASE
    var resonance = await _resonanceService.GetCurrentResonanceAsync(characterId);
    if (resonance != 10)
        throw new InvalidOperationException($"Resonance must be exactly 10 (current: {resonance})");

    var accumulatedDamage = await _resonanceService.GetAccumulatedDamageAsync(characterId);
    if (accumulatedDamage <= 0)
        throw new InvalidOperationException("Must have accumulated Aetheric damage");

    var apAvailable = await _combatService.GetAvailableAPAsync(characterId);
    if (apAvailable < 5)
        throw new InvalidOperationException("Need 5 AP");

    // Check cooldown state
    var isInCooldown = await _combatService.IsAbilityInCooldownAsync(
        characterId,
        SeiðkonaAbilityId.Unraveling);
    if (isInCooldown)
        throw new InvalidOperationException("Unraveling is in cooldown (once per long rest)");

    // EXECUTION PHASE

    // Spend AP
    await _combatService.SpendAPAsync(characterId, 5);

    // Apply damage based on mode
    var damageResults = damageMode switch
    {
        UnravelingMode.SingleTarget => await ApplySingleTargetUnravelingAsync(
            primaryTargetId!.Value,
            accumulatedDamage),

        UnravelingMode.PrimarySplash => await ApplyPrimarySplashUnravelingAsync(
            primaryTargetId!.Value,
            accumulatedDamage),

        UnravelingMode.ConeArea => await ApplyConeUnravelingAsync(
            characterId,
            accumulatedDamage),

        _ => throw new ArgumentException("Invalid unraveling mode")
    };

    // CORRUPTION CHECK (Guaranteed 20%)
    var corruptionRoll = _diceService.Roll(1, 100).Total;
    var corruptionTriggered = corruptionRoll <= 20;

    if (corruptionTriggered)
    {
        await _corruptionService.ApplyCorruptionAsync(
            characterId,
            source: "Seiðkona_Unraveling_Capstone",
            amount: 15,
            description: $"Unraveling at Resonance 10 with {accumulatedDamage} damage");
    }

    // RESET PHASE
    await _resonanceService.ResetResonanceAndDamageAsync(characterId);

    // SET COOLDOWN
    await _combatService.SetAbilityCooldownAsync(
        characterId,
        SeiðkonaAbilityId.Unraveling,
        cooldownType: CooldownType.UntilLongRest);

    // LOG EVENT
    await _eventLogger.LogAsync(new CapstoneExecutionEvent(
        CharacterId: characterId,
        AbilityId: "unraveling",
        AccumulatedDamageCasumed: accumulatedDamage,
        TotalDamageDealt: damageResults.Sum(r => r.DamageDealt),
        CorruptionTriggered: corruptionTriggered,
        Timestamp: DateTime.UtcNow));

    return new UnravelingResult(
        Success: true,
        AccumulatedDamageConsumed: accumulatedDamage,
        DamageResults: damageResults,
        TotalDamageDealt: damageResults.Sum(r => r.DamageDealt),
        CorruptionTriggered: corruptionTriggered,
        CorruptionRoll: corruptionRoll,
        ResonanceAfter: 0,
        AccumulatedDamageAfter: 0,
        CooldownActive: true);
}

private async Task<List<UnravelingDamageResult>> ApplySingleTargetUnravelingAsync(
    Guid targetId,
    int totalDamage)
{
    var target = await _combatService.GetCharacterAsync(targetId);

    // Apply all damage to single target (no defense save!)
    var actualDamage = await _combatService.ApplyDamageAsync(
        targetId: targetId,
        damageAmount: totalDamage,
        damageType: DamageType.Aetheric,
        allowDefenseSave: false);

    return new List<UnravelingDamageResult>
    {
        new UnravelingDamageResult(
            TargetId: target.Id,
            TargetName: target.Name,
            DamageDealt: actualDamage,
            Role: "Primary")
    };
}

private async Task<List<UnravelingDamageResult>> ApplyPrimarySplashUnravelingAsync(
    Guid primaryTargetId,
    int totalDamage)
{
    var results = new List<UnravelingDamageResult>();

    // 80% to primary
    var primaryDamage = (int)(totalDamage * 0.80m);
    var primaryTarget = await _combatService.GetCharacterAsync(primaryTargetId);

    await _combatService.ApplyDamageAsync(
        primaryTargetId,
        primaryDamage,
        DamageType.Aetheric,
        allowDefenseSave: false);

    results.Add(new UnravelingDamageResult(
        TargetId: primaryTarget.Id,
        TargetName: primaryTarget.Name,
        DamageDealt: primaryDamage,
        Role: "Primary (80%)"));

    // 20% split among nearby
    var splashDamage = totalDamage - primaryDamage;
    var nearbyEnemies = await _combatService.FindNearbyEnemiesAsync(
        primaryTargetId,
        radiusSpaces: 6);

    if (nearbyEnemies.Any())
    {
        var damagePerTarget = splashDamage / nearbyEnemies.Count;

        foreach (var enemy in nearbyEnemies)
        {
            await _combatService.ApplyDamageAsync(
                enemy.Id,
                damagePerTarget,
                DamageType.Aetheric,
                allowDefenseSave: false);

            results.Add(new UnravelingDamageResult(
                TargetId: enemy.Id,
                TargetName: enemy.Name,
                DamageDealt: damagePerTarget,
                Role: "Splash (20%)"));
        }
    }

    return results;
}
```

### 6.7 Output Display Format

```
UNRAVELING CAPSTONE EXECUTED

PRECONDITION CHECK
├─ Resonance: 10/10 ✓
├─ Accumulated Damage: 67 total ✓
├─ AP Available: 5/5 ✓
├─ Not in Cooldown ✓
└─ All checks PASS → Execute

UNRAVELING UNLEASHED
└─ "The Wyrd unravels, releasing all concentrated Aetheric force..."

DAMAGE APPLICATION (Single Target Mode)
Target: Corrupted War Priest
├─ Accumulated Damage Applied: 67 (no defense save)
├─ Damage Type: Aetheric
├─ DEF Save Available: NO
└─ HP Change: 92 → 25

TOTAL DAMAGE DEALT: 67
Result: Severe damage; target on brink of defeat

CORRUPTION CHECK (Guaranteed)
├─ Base Risk: 20% (special capstone rate)
├─ Roll: [d100: 18]
├─ Result: TRIGGERED! (rolled < 20%)
└─ Corruption Applied: +15 points

RESOURCE RESET
├─ Resonance: 10 → 0 (reset)
├─ Accumulated Damage: 67 → 0 (consumed)
└─ Status: Cycle complete!

COOLDOWN ACTIVATED
├─ Unraveling unavailable
├─ Duration: Until long rest
└─ Next available: After 8-hour rest

CAPSTONE RESULT: SUCCESS
├─ Massive damage dealt: 67 HP
├─ Corruption inflicted: +15
├─ Resources reset for next cycle
└─ Next Resonance build: Starts at 0
```

---

## 7. Capstone Mechanics Deep Dive

### 7.1 Why "Guaranteed 20%" Instead of Scaling?

**Design Rationale:**

At Resonance 10, normal scaling would be 25% corruption risk. However:

1. **Balance:** Unraveling already deals massive damage; guaranteed check provides internal trade-off
2. **Incentive:** Slightly lower risk (20% vs 25%) rewards bold capstone use
3. **Distinction:** Marks capstone as special (not just another cast)
4. **Narratively:** "Controlled unraveling" suggests mastery over cascading forces

**Formula:**
```
Normal Resonance 10 cast: 25% corruption risk
Unraveling capstone: 20% corruption risk (3 in 15 instead of 5 in 20)
Benefit: Lower risk on massive payoff
```

### 7.2 The Cooldown System

**Once Per Long Rest:**

```
Cooldown Type: LONG_REST
Definition: Resets after 8-hour rest period
Trigger: Sleeping, sanctuary, safe haven
Alternative Reset: Scenario/encounter end (GM discretion)
Duration: Fixed (not expiring naturally)

Example Timeline:
Turn 1: Unraveling used
├─ Cooldown activated
├─ Character returns to town
└─ Takes 8-hour rest

After Rest:
├─ Cooldown expires
├─ Unraveling available again
└─ New Resonance buildup starts

Implication: One capstone use per day minimum
```

### 7.3 The Resonance-Accumulation Cycle

**Complete Cycle Visualization:**

```
DAY 1 COMBAT

PHASE 1: BUILDUP (5-15 minutes)
├─ Start: Resonance 0, Accum. 0
├─ Cast Seiðr Bolt ×3: +3 Rez, +6-12 Accum
├─ Cast Fate's Thread ×1: +2 Rez, +0 Accum
├─ Cast Weave Disruption ×2: +2 Rez, +0 Accum
├─ Cast Aether Storm ×1: +2 Rez, +14 Accum
├─ Current: Resonance 9, Accum. 20-26
└─ Risk: 15% corruption (in 8-9 zone)

PHASE 2: APPROACH (3-5 minutes)
├─ Cast Seiðr Bolt: +1 Rez (now 10)
├─ Current: Resonance 10, Accum. 25-32
└─ Risk: 25% (or save for capstone)

PHASE 3: CAPSTONE (1 minute)
├─ Evaluate: Stay or bail?
├─ Decision: Use Unraveling now
├─ Cost: 5 AP
├─ Damage: 25-32 Aetheric
├─ Corruption: 20% check
├─ Result: Likely victory or corruption
└─ Reset: Resonance 0, Accum. 0

PHASE 4: COOLDOWN (rest of day)
├─ Unraveling on cooldown
├─ Resonance buildup possible (if combat continues)
├─ OR take long rest for reset
└─ Next capstone available tomorrow

DAY 2: REPEAT
```

### 7.4 Strategic Timing Decisions

**When to Use Unraveling:**

| Scenario | Decision | Rationale |
|----------|----------|-----------|
| Boss at 50% HP, party at 80% | USE NOW | Guaranteed damage; avoid corruption accumulation |
| Boss at 20% HP, party at 90% | WAIT/PLAN | Can defeat with normal abilities; save for dire need |
| Multiple weak enemies | USE NOW | High damage waste on weak targets; use earlier |
| Single powerful enemy | SAVE | Setup payoff in next engagement |
| Party below 50% HP | USE NOW | Massive damage swing; desperation play |
| New encounter ahead | RISK IT | Try to finish current fight, refresh on long rest |

---

## 8. Accumulated Damage Resolution

### 8.1 Damage Tracking System

**What Generates Accumulated Damage:**

```
ACCUMULATING ABILITIES (Tier 1-3):
├─ Seiðr Bolt: +damage rolled (2d6 = 2-12)
├─ Fate's Thread: +0 (detection, no damage)
├─ Weave Disruption: +0 (control, no damage)
├─ Völva's Vision: +0 (revelation, no damage)
├─ Aether Storm: +4d6 damage (4-24)
└─ Other: Various by ability

NON-ACCUMULATING ABILITIES:
├─ Wyrd Sight: Passive, no damage
├─ Aether Attunement: Passive, no damage
├─ Resonance Cascade: Passive modifier, no damage
└─ Normal non-Seiðkona abilities: Don't accumulate
```

**Maximum Possible Accumulation:**

```
Scenario: Max-buildup scenario
├─ Seiðr Bolt ×3: 2d6+2d6+2d6 = max 36 damage
├─ Fate's Thread ×2: 0 (no damage)
├─ Weave Disruption ×1: 0 (no damage)
├─ Aether Storm ×1: 4d6 = max 24 damage
├─ Völva's Vision ×2: 0 (no damage)
└─ Total: Up to 60 damage accumulated (realistic 40-50)

Realistic Scenario: Normal combat
├─ 4-6 different ability casts
├─ Mix of damage and utility
├─ Total: 25-40 accumulated damage
└─ Average per cast that builds: 5-7 damage
```

### 8.2 Damage Breakdown Tracking

**Detailed Record:**

```
ACCUMULATED AETHERIC DAMAGE LOG

Character: Seiðkona Mystic
Started Tracking: Turn 1, Encounter "Corrupted Stronghold"

Cast 1: Seiðr Bolt
└─ Damage Roll: 2d6 = [3, 4] = 7
   Accumulated Total: 0 + 7 = 7

Cast 2: Wyrd Sight
└─ Effect: Detection (no accumulation)
   Accumulated Total: 7

Cast 3: Seiðr Bolt
└─ Damage Roll: 2d6 = [5, 6] = 11
   Accumulated Total: 7 + 11 = 18

Cast 4: Fate's Thread
└─ Effect: Information (no accumulation)
   Accumulated Total: 18

Cast 5: Weave Disruption
└─ Effect: Dispel (no accumulation)
   Accumulated Total: 18

Cast 6: Aether Storm
└─ Damage Roll: 4d6 = [4, 3, 5, 2] = 14
   Accumulated Total: 18 + 14 = 32

Cast 7: Seiðr Bolt
└─ Damage Roll: 2d6 = [4, 4] = 8
   Accumulated Total: 32 + 8 = 40

FINAL STATE BEFORE UNRAVELING:
├─ Total Accumulated: 40 damage
├─ Resonance: 10/10
├─ Ready for: Unraveling capstone
└─ Next action: Use capstone now or wait
```

---

## 9. Guaranteed Corruption Check

### 9.1 Why "Guaranteed"?

The corruption check on Unraveling is "guaranteed" in the sense that:

1. **Always Occurs:** Cannot be avoided or skipped
2. **Always 20%:** Fixed rate (not scaling with Resonance)
3. **Always Rolls:** Even if other factors might prevent checks

**NOT "Guaranteed Corruption" - Always triggers RISK, not always triggers CORRUPTION.**

### 9.2 Corruption Roll Calculation

```
UNRAVELING CORRUPTION CHECK

Base Risk: 20%
Roll: d100
Result: If roll ≤ 20, corruption triggered

Example Outcomes:
├─ Roll 3: 3 ≤ 20 = TRUE → CORRUPTED (15 points added)
├─ Roll 12: 12 ≤ 20 = TRUE → CORRUPTED (15 points added)
├─ Roll 20: 20 ≤ 20 = TRUE → CORRUPTED (15 points added)
├─ Roll 21: 21 ≤ 20 = FALSE → AVOIDED (no corruption)
├─ Roll 47: 47 ≤ 20 = FALSE → AVOIDED (no corruption)
├─ Roll 100: 100 ≤ 20 = FALSE → AVOIDED (no corruption)

Average Outcome:
├─ Out of 100 rolls: ~20 will trigger corruption
├─ Out of 100 rolls: ~80 will avoid corruption
└─ Expected corruption per capstone use: 0.20 chance
```

### 9.3 Corruption Amount (15 points)

**Why 15 instead of 10?**

```
Base corruption from normal cast (Resonance 10): 10 points
Capstone modifier (+50%): +5 points
Total: 15 points

Rationale:
├─ Capstone uses massive power
├─ More power = more corruption exposure
├─ Slight penalty for using ultimate
└─ Balances power with risk
```

---

## 10. Ultimate Resource Reset

### 10.1 What Gets Reset

**Complete Reset:**

```
BEFORE UNRAVELING:
├─ Resonance: 10/10
├─ Accumulated Damage: 67
├─ Resonance Build Counter: 10
└─ Cascade Modifier: ACTIVE

UNRAVELING EXECUTED:
└─ All damage consumed, reset triggered

AFTER UNRAVELING:
├─ Resonance: 0/10 (back to start)
├─ Accumulated Damage: 0 (fully consumed)
├─ Resonance Build Counter: 0 (restarted)
├─ Cascade Modifier: INACTIVE (0-4 zone again)
└─ Status: Ready for new cycle
```

### 10.2 What Does NOT Reset

**Things that Persist:**

```
NOT RESET BY UNRAVELING:
├─ Character HP/Status (affected by combat)
├─ AP Pool (spent 5 AP, not regained)
├─ Corruption Level (increased by check, not decreased)
├─ Cooldown State (activated until long rest)
├─ Party Members' States (no change)
├─ Location/Battlefield (no change)
└─ Other Specialization Mechanics (no change)

ONLY Seiðkona-specific resources reset:
├─ Resonance
└─ Accumulated Damage
```

### 10.3 Cycle Restart

**After Reset:**

```
IMMEDIATELY AFTER UNRAVELING:
├─ Resonance: 0 (safe zone, 0% corruption risk)
├─ Can cast abilities normally again
├─ Cascade modifier inactive
└─ Cooldown prevents immediate re-unraveling

IF COMBAT CONTINUES:
├─ Resume casting normal abilities
├─ Rebuild Resonance (slow, from 0)
├─ Reaccumulate damage
├─ Ready for Unraveling again (tomorrow)

IF COMBAT ENDS:
├─ Encounter victory or retreat
├─ Head to rest area
├─ Take 8-hour long rest
├─ Unraveling cooldown expires
└─ Reset for next day's battles
```

---

## 11. Combat Scenarios

### 11.1 Scenario 1: Perfect Unraveling Setup

```
SCENARIO: Boss Fight Preparation

PRE-COMBAT PLANNING:
├─ Party identifies boss fight ahead
├─ Seiðkona decides to setup capstone
└─ Plan: Build to Resonance 10, unleash Unraveling

TURN 1-5: BUILDUP PHASE
├─ Turn 1: Seiðr Bolt (+1 Rez, +8 Accum) = 1/10, 8 accum
├─ Turn 2: Seiðr Bolt (+1 Rez, +6 Accum) = 2/10, 14 accum
├─ Turn 3: Weave Disruption (+1 Rez, +0 Accum) = 3/10, 14 accum
├─ Turn 4: Seiðr Bolt (+1 Rez, +9 Accum) = 4/10, 23 accum
├─ Turn 5: Fate's Thread (+2 Rez, +0 Accum) = 6/10, 23 accum
└─ Corruption Risk: 5% now (entered low risk zone)

TURN 6-8: CONTINUED BUILDUP
├─ Turn 6: Seiðr Bolt (+1 Rez, +7 Accum) = 7/10, 30 accum
├─ Turn 7: Aether Storm (+2 Rez, +18 Accum) = 9/10, 48 accum
├─ Turn 8: Seiðr Bolt (+1 Rez, +5 Accum) = 10/10, 53 accum
└─ Corruption Risk: Jumped to 25% after T8

TURN 9: CAPSTONE EXECUTION
├─ Resonance: 10/10 ✓
├─ Accumulated: 53 damage ✓
├─ AP: 5 available ✓
├─ Ready: YES
│
├─ Cast Unraveling
├─ Target: Boss (single target mode)
├─ Damage: 53 Aetheric (no DEF save)
│
├─ Boss HP: 120 → 67 (significantly wounded)
├─ Corruption Check: d100 = 35 (> 20) → AVOIDED
│
├─ Resonance: 10 → 0
├─ Accumulated: 53 → 0
└─ Cooldown: ACTIVATED

TURN 10+: FINAL PHASE
├─ Continue combat with normal abilities
├─ Boss severely weakened
├─ Victory likely within 2-3 turns
└─ Unraveling cooldown prevents immediate re-use (next day)

RESULT: Successful capstone setup and execution
├─ Massive damage: 53 HP
├─ Boss near defeat
├─ Clean hit (no corruption)
└─ Encounter won!
```

### 11.2 Scenario 2: Desperate Capstone Use

```
SCENARIO: Party in Danger, Capstone Risky

BATTLE STATE:
├─ Party HP: Critical (average 25%)
├─ Seiðkona: 60 HP, 10/10 Resonance, 42 accumulated damage
├─ Boss: 85 HP, 3 turns to party wipe
└─ Situation: Desperate!

DECISION POINT:
├─ Option A: Use Unraveling now (20% corruption risk)
├─ Option B: Use normal abilities (safer but may lose)
└─ Decision: GO FOR CAPSTONE!

TURN 1: DESPERATION PLAY
├─ Cast Unraveling
├─ Target: Boss (all 42 damage)
├─ Boss HP: 85 → 43 (50% damage, game-changer!)
├─ Corruption Check: d100 = 18 (≤ 20) → CORRUPTED!
│
├─ Corruption Applied: +15
├─ New Corruption: Previous + 15 (may be severe)
│
├─ Resonance: 10 → 0
├─ Accumulated: 42 → 0
└─ Cooldown: ACTIVATED

TURN 2-3: MOMENTUM SHIFT
├─ Massive damage turned tide
├─ Party rallies (despite corruption)
├─ Boss weakened to 43 HP
├─ Final round of combat
└─ Victory (with cost)

RESULT: Capstone saved the day but at cost
├─ Massive damage dealt: 42 HP
├─ Corruption inflicted: +15 (high risk)
├─ Party survives: YES
├─ Trade-off: Temporary power for long-term risk
└─ Narrative: "Barely escaped with desperate magic"
```

---

## 12. User Stories

### User Story 1: Setup and Execute Unraveling

**As a** Tier 3 Seiðkona player
**I want to** build Resonance to 10 and then use Unraveling for massive damage
**So that** I can deal a powerful finishing blow and reset the cycle

**Acceptance Criteria:**
- Unraveling only works at exactly Resonance 10
- Requires at least 1 accumulated Aetheric damage
- Costs 5 AP (fixed, no cascade reduction)
- Deals 100% of accumulated damage (no defense save)
- Triggers guaranteed 20% corruption check
- Resets both Resonance and Accumulated Damage to 0
- Sets Unraveling on cooldown (once per long rest)

### User Story 2: Use Völva's Vision for Mass Revelation

**As a** Tier 3 Seiðkona player
**I want to** use Völva's Vision to reveal all hidden enemies in a 15-space radius
**So that** my party gains complete awareness and prevents ambushes

**Acceptance Criteria:**
- Costs 3 AP (2 with Cascade)
- Reveals all invisible creatures
- Reveals ethereal/phased creatures
- Reveals concealed/camouflaged creatures
- 15-space radius (large area)
- Builds +2 Resonance
- Effects persist until scene change

### User Story 3: Deal Massive Area Damage with Aether Storm

**As a** Tier 3 Seiðkona player
**I want to** cast Aether Storm to deal 4d6 damage in a large cone
**So that** I can damage multiple enemies simultaneously

**Acceptance Criteria:**
- Costs 5 AP (4 with Cascade)
- Deals 4d6 Aetheric damage per target (no shared pool)
- Targets in cone (8 spaces long, 4 wide)
- Targets can make DEF save
- Builds +2 Resonance
- Accumulates 4d6 damage (from damage roll, not target total)
- Triggers corruption check

### User Story 4: Understand Capstone Availability

**As a** Seiðkona player
**I want to** clearly see when Unraveling is available
**So that** I can make informed decisions about using it

**Acceptance Criteria:**
- UI clearly shows Resonance level
- UI clearly shows Accumulated Damage total
- Unraveling button disabled until Resonance = 10
- Tooltip explains why if disabled
- Shows estimated damage Unraveling would deal
- Shows 20% corruption risk

---

## 13. Application Service Layer

### 13.1 IUnravelingService Interface

```csharp
namespace RuneAndRust.Application.Specializations.Seiðkona;

using System;
using System.Threading.Tasks;
using RuneAndRust.Domain.Specializations.Seiðkona;

/// <summary>
/// Manages execution of the Unraveling capstone ability.
/// </summary>
public interface IUnravelingService
{
    /// <summary>
    /// Execute the Unraveling capstone ability.
    /// </summary>
    /// <remarks>
    /// Requires EXACT preconditions:
    /// - Resonance == 10
    /// - Accumulated Damage > 0
    /// - 5 AP available
    /// - Not in cooldown
    /// </remarks>
    Task<UnravelingResult> ExecuteUnravelingAsync(
        Guid characterId,
        Guid? primaryTargetId,
        UnravelingMode damageMode);

    /// <summary>
    /// Validate all preconditions for Unraveling use.
    /// </summary>
    Task<UnravelingValidationResult> ValidateUnravelingPreconditionsAsync(Guid characterId);

    /// <summary>
    /// Get current Unraveling readiness state.
    /// </summary>
    Task<UnravelingReadiness> GetUnravelingReadinessAsync(Guid characterId);

    /// <summary>
    /// Check if Unraveling is in cooldown.
    /// </summary>
    Task<bool> IsInCooldownAsync(Guid characterId);

    /// <summary>
    /// Get estimated damage Unraveling would deal.
    /// </summary>
    Task<int> GetEstimatedDamageAsync(Guid characterId);

    /// <summary>
    /// Manually reset Unraveling cooldown (GM/admin only).
    /// </summary>
    Task ResetCooldownAsync(Guid characterId);
}
```

### 13.2 IVölvasVisionService Interface

```csharp
namespace RuneAndRust.Application.Specializations.Seiðkona;

using System;
using System.Collections.Generic;
using System.Threading.Tasks;
using RuneAndRust.Domain.Specializations.Seiðkona;

/// <summary>
/// Manages execution of Völva's Vision ability.
/// </summary>
public interface IVölvasVisionService
{
    /// <summary>
    /// Execute Völva's Vision to reveal hidden creatures.
    /// </summary>
    Task<VölvasVisionResult> ExecuteVölvasVisionAsync(Guid characterId);

    /// <summary>
    /// Get all hidden creatures in scanning area.
    /// </summary>
    Task<IList<HiddenCreature>> FindHiddenCreaturesAsync(
        Guid characterId,
        int radiusSpaces = 15);

    /// <summary>
    /// Reveal specific creature to party.
    /// </summary>
    Task RevealCreatureAsync(Guid creatureId);

    /// <summary>
    /// Filter creatures by hidden type.
    /// </summary>
    Task<IList<HiddenCreature>> FilterByHiddenTypeAsync(
        IList<HiddenCreature> creatures,
        HiddenType type);
}
```

### 13.3 IAetherStormService Interface

```csharp
namespace RuneAndRust.Application.Specializations.Seiðkona;

using System;
using System.Collections.Generic;
using System.Threading.Tasks;
using RuneAndRust.Domain.Specializations.Seiðkona;

/// <summary>
/// Manages execution of Aether Storm ability.
/// </summary>
public interface IAetherStormService
{
    /// <summary>
    /// Execute Aether Storm area attack.
    /// </summary>
    Task<AetherStormResult> ExecuteAetherStormAsync(
        Guid characterId,
        Direction coneDirection);

    /// <summary>
    /// Calculate cone geometry for area effect.
    /// </summary>
    Task<ConeGeometry> CalculateConeAsync(
        Position origin,
        Direction direction,
        int length = 8,
        int width = 4);

    /// <summary>
    /// Find all targets affected by cone.
    /// </summary>
    Task<IList<CombatTarget>> FindAffectedTargetsAsync(ConeGeometry cone);

    /// <summary>
    /// Roll 4d6 damage and apply to target.
    /// </summary>
    Task<int> ApplyConeDamageAsync(Guid targetId);
}
```

---

## 14. Domain Models (Tier 3 Only)

### 14.1 UnravelingResult Value Object

```csharp
namespace RuneAndRust.Domain.Specializations.Seiðkona;

using System;
using System.Collections.Generic;
using RuneAndRust.Domain.ValueObjects;

/// <summary>
/// Represents the complete result of an Unraveling capstone execution.
/// </summary>
public sealed class UnravelingResult : ValueObject
{
    public bool Success { get; }
    public int AccumulatedDamageConsumed { get; }
    public IReadOnlyList<UnravelingDamageResult> DamageResults { get; }
    public int TotalDamageDealt { get; }
    public bool CorruptionTriggered { get; }
    public int CorruptionRoll { get; }
    public int ResonanceAfter { get; }
    public int AccumulatedDamageAfter { get; }
    public bool CooldownActive { get; }
    public DateTime ExecutedAt { get; }

    private UnravelingResult(
        bool success,
        int accumulatedDamageConsumed,
        IReadOnlyList<UnravelingDamageResult> damageResults,
        int totalDamageDealt,
        bool corruptionTriggered,
        int corruptionRoll,
        int resonanceAfter,
        int accumulatedDamageAfter,
        bool cooldownActive,
        DateTime executedAt)
    {
        Success = success;
        AccumulatedDamageConsumed = accumulatedDamageConsumed;
        DamageResults = damageResults ?? new List<UnravelingDamageResult>();
        TotalDamageDealt = totalDamageDealt;
        CorruptionTriggered = corruptionTriggered;
        CorruptionRoll = corruptionRoll;
        ResonanceAfter = resonanceAfter;
        AccumulatedDamageAfter = accumulatedDamageAfter;
        CooldownActive = cooldownActive;
        ExecutedAt = executedAt;
    }

    public static UnravelingResult Create(
        int accumulatedDamageConsumed,
        IReadOnlyList<UnravelingDamageResult> damageResults,
        bool corruptionTriggered,
        int corruptionRoll)
    {
        return new UnravelingResult(
            success: true,
            accumulatedDamageConsumed,
            damageResults,
            damageResults.Sum(r => r.DamageDealt),
            corruptionTriggered,
            corruptionRoll,
            resonanceAfter: 0,
            accumulatedDamageAfter: 0,
            cooldownActive: true,
            executedAt: DateTime.UtcNow);
    }

    public override string ToString()
    {
        return $"Unraveling: {AccumulatedDamageConsumed} damage consumed, " +
               $"{TotalDamageDealt} dealt, " +
               $"Corruption {(CorruptionTriggered ? "TRIGGERED" : "Avoided")}";
    }

    protected override IEnumerable<object> GetEqualityComponents()
    {
        yield return Success;
        yield return AccumulatedDamageConsumed;
        yield return TotalDamageDealt;
        yield return CorruptionTriggered;
    }
}
```

### 14.2 VölvasVisionResult Value Object

```csharp
namespace RuneAndRust.Domain.Specializations.Seiðkona;

using System;
using System.Collections.Generic;
using RuneAndRust.Domain.ValueObjects;

/// <summary>
/// Represents the result of a Völva's Vision ability execution.
/// </summary>
public sealed class VölvasVisionResult : ValueObject
{
    public bool Success { get; }
    public int RevealedCount { get; }
    public IReadOnlyList<VisionReveal> RevealedCreatures { get; }
    public int RadiusSpaces { get; }
    public int ResonanceBefore { get; }
    public int ResonanceAfter { get; }
    public CorruptionRiskResult CorruptionResult { get; }
    public DateTime ExecutedAt { get; }

    private VölvasVisionResult(
        bool success,
        int revealedCount,
        IReadOnlyList<VisionReveal> revealedCreatures,
        int radiusSpaces,
        int resonanceBefore,
        int resonanceAfter,
        CorruptionRiskResult corruptionResult,
        DateTime executedAt)
    {
        Success = success;
        RevealedCount = revealedCount;
        RevealedCreatures = revealedCreatures ?? new List<VisionReveal>();
        RadiusSpaces = radiusSpaces;
        ResonanceBefore = resonanceBefore;
        ResonanceAfter = resonanceAfter;
        CorruptionResult = corruptionResult;
        ExecutedAt = executedAt;
    }

    public static VölvasVisionResult Create(
        IReadOnlyList<VisionReveal> revealedCreatures,
        int resonanceBefore,
        int resonanceAfter,
        CorruptionRiskResult corruptionResult)
    {
        return new VölvasVisionResult(
            success: true,
            revealedCount: revealedCreatures.Count,
            revealedCreatures,
            radiusSpaces: 15,
            resonanceBefore,
            resonanceAfter,
            corruptionResult,
            executedAt: DateTime.UtcNow);
    }

    public override string ToString()
    {
        return $"Völva's Vision: {RevealedCount} creatures revealed, " +
               $"Resonance {ResonanceBefore}→{ResonanceAfter}";
    }

    protected override IEnumerable<object> GetEqualityComponents()
    {
        yield return Success;
        yield return RevealedCount;
        yield return ResonanceBefore;
    }
}
```

### 14.3 AetherStormResult Value Object

```csharp
namespace RuneAndRust.Domain.Specializations.Seiðkona;

using System;
using System.Collections.Generic;
using RuneAndRust.Domain.ValueObjects;

/// <summary>
/// Represents the result of an Aether Storm ability execution.
/// </summary>
public sealed class AetherStormResult : ValueObject
{
    public bool Success { get; }
    public ConeGeometry ConeRadius { get; }
    public IReadOnlyList<ConeTargetResult> TargetsAffected { get; }
    public int TotalDamageDealt { get; }
    public int AccumulatedDamageAdded { get; }
    public int ResonanceBefore { get; }
    public int ResonanceAfter { get; }
    public CorruptionRiskResult CorruptionResult { get; }
    public DateTime ExecutedAt { get; }

    private AetherStormResult(
        bool success,
        ConeGeometry coneRadius,
        IReadOnlyList<ConeTargetResult> targetsAffected,
        int totalDamageDealt,
        int accumulatedDamageAdded,
        int resonanceBefore,
        int resonanceAfter,
        CorruptionRiskResult corruptionResult,
        DateTime executedAt)
    {
        Success = success;
        ConeRadius = coneRadius;
        TargetsAffected = targetsAffected ?? new List<ConeTargetResult>();
        TotalDamageDealt = totalDamageDealt;
        AccumulatedDamageAdded = accumulatedDamageAdded;
        ResonanceBefore = resonanceBefore;
        ResonanceAfter = resonanceAfter;
        CorruptionResult = corruptionResult;
        ExecutedAt = executedAt;
    }

    public static AetherStormResult Create(
        IReadOnlyList<ConeTargetResult> targetsAffected,
        int accumulatedDamageAdded,
        int resonanceBefore,
        int resonanceAfter,
        CorruptionRiskResult corruptionResult)
    {
        return new AetherStormResult(
            success: true,
            coneRadius: new ConeGeometry { Length = 8, Width = 4 },
            targetsAffected,
            totalDamageDealt: targetsAffected.Sum(t => t.ActualDamage),
            accumulatedDamageAdded,
            resonanceBefore,
            resonanceAfter,
            corruptionResult,
            executedAt: DateTime.UtcNow);
    }

    public override string ToString()
    {
        return $"Aether Storm: {TargetsAffected.Count} targets, " +
               $"{TotalDamageDealt} total damage, " +
               $"Accumulate +{AccumulatedDamageAdded}";
    }

    protected override IEnumerable<object> GetEqualityComponents()
    {
        yield return Success;
        yield return TargetsAffected.Count;
        yield return TotalDamageDealt;
        yield return ResonanceAfter;
    }
}
```

---

## 15. Configuration Specifications

### 15.1 abilities.json (Tier 3 Entries)

```json
{
  "abilities": [
    {
      "id": "völvasVision",
      "displayName": "Völva's Vision",
      "specialization": "seiðkona",
      "tier": 3,
      "type": "ActiveMassDetection",
      "range": "Self (15 space radius)",
      "apCost": 3,
      "apCostWithCascade": 2,
      "resourceCost": null,
      "effects": [
        "Reveal all hidden creatures in 15-space radius",
        "See invisible, ethereal, phased, concealed creatures",
        "Build +2 Aether Resonance",
        "Trigger corruption check if Resonance 5+"
      ],
      "description": "Your vision expands across the Wyrd, piercing all veils of concealment.",
      "flavorText": "Reality becomes transparent as the Völva's ancient sight flows through you.",
      "cooldown": "None",
      "maxUsesPerEncounter": null,
      "unlockConditions": [
        "Specialization: Seiðkona",
        "Specialization Tier: 3 (Cost 4 PP)",
        "Prerequisite: Tier 1-2 abilities"
      ]
    },
    {
      "id": "aetherStorm",
      "displayName": "Aether Storm",
      "specialization": "seiðkona",
      "tier": 3,
      "type": "ActiveSpell",
      "range": "Cone (8 forward, 4 wide)",
      "apCost": 5,
      "apCostWithCascade": 4,
      "resourceCost": null,
      "damageDice": "4d6",
      "damageType": "Aetheric",
      "target": "All enemies in cone",
      "effects": [
        "Deal 4d6 Aetheric damage per target",
        "Targets make DEF save for half damage",
        "Build +2 Aether Resonance",
        "Accumulate 4d6 Aetheric damage",
        "Trigger corruption check"
      ],
      "description": "Channel raw Aetheric force into a devastating cone of magical destruction.",
      "flavorText": "The very air tears apart as Aether rages outward in a destructive maelstrom.",
      "cooldown": "None",
      "maxUsesPerEncounter": null,
      "unlockConditions": [
        "Specialization: Seiðkona",
        "Specialization Tier: 3 (Cost 4 PP)",
        "Prerequisite: Tier 1-2 abilities"
      ]
    },
    {
      "id": "unraveling",
      "displayName": "Unraveling",
      "specialization": "seiðkona",
      "tier": 3,
      "type": "ActiveCapstone",
      "range": "Single target or area",
      "apCost": 5,
      "apCostWithCascade": 5,
      "resourceCost": {
        "type": "SpecialPrerequisites",
        "requirements": [
          "Resonance must equal 10",
          "Accumulated Aetheric Damage must be > 0",
          "Not in cooldown"
        ]
      },
      "damage": "100% of accumulated Aetheric damage",
      "damageType": "Aetheric",
      "target": "Primary target (with optional splash)",
      "effects": [
        "Deal all accumulated Aetheric damage (no DEF save)",
        "Guaranteed 20% corruption check",
        "Reset Resonance to 0",
        "Reset Accumulated Damage to 0",
        "Activate cooldown (once per long rest)"
      ],
      "description": "Unravel the accumulated Aetheric power within you in one devastating release.",
      "flavorText": "The threads of reality snap as your Resonance shatters in a cataclysmic eruption.",
      "cooldown": "Once per long rest",
      "maxUsesPerEncounter": 1,
      "preconditions": {
        "resonance_equals": 10,
        "accumulated_damage_greater_than": 0,
        "ap_available_minimum": 5,
        "not_in_cooldown": true
      },
      "unlockConditions": [
        "Specialization: Seiðkona",
        "Specialization Tier: 3 (Cost 4 PP)",
        "Prerequisite: Tier 1-2 abilities",
        "Special: Only usable at Resonance 10"
      ]
    }
  ]
}
```

---

## 16. Code Examples & Implementation

(Omitted for brevity - similar pattern to Tier 1 & 2 implementations)

---

## 17. Corruption Integration at Capstone

### 17.1 Corruption Check Logic

```csharp
// UNRAVELING-SPECIFIC CORRUPTION CHECK
private async Task<bool> EvaluateUnravelingCorruptionAsync(Guid characterId)
{
    // Special case: Always 20%, not 25%
    const int CapstoneCorruptionRisk = 20;

    var roll = _diceService.Roll(1, 100).Total;
    var triggered = roll <= CapstoneCorruptionRisk;

    if (triggered)
    {
        await _corruptionService.ApplyCorruptionAsync(
            characterId,
            source: "Seiðkona_Unraveling_Capstone",
            amount: 15, // Higher than normal (vs 10)
            description: $"Corruption from Unraveling capstone execution");
    }

    return triggered;
}
```

---

## 18. End-Game Balance Considerations

### 18.1 Power Level Analysis

**Unraveling Damage vs Other Abilities:**

```
Comparison: Other abilities in games
├─ Normal attack: 1d8 = 4-8 damage
├─ Strong ability: 2d10 = 2-20 damage
├─ Magical spell: 4d6 = 4-24 damage
├─ Unraveling: 40-60 damage (realistic accumulated)
└─ Ratio: 2.5-6x more powerful than single spells

Damage per AP Cost:
├─ Normal ability: 2d6 / 1 AP = 7 average / AP
├─ Strong ability: 4d6 / 5 AP = 4.8 / AP
├─ Unraveling: 50 damage / 5 AP = 10 / AP
└─ Most efficient when accumulated damage is high

Resource Efficiency:
├─ Build phase: 5-15 minutes to reach Resonance 10
├─ Payoff phase: 1 turn to deal massive damage
├─ Ratio: Massive payoff for time investment
```

### 18.2 Corruption Trade-off

```
Power vs Risk Balance:
├─ High Power: 50-60 average damage
├─ High Risk: 20% corruption chance per use
├─ Reward: Massive damage output
├─ Consequence: Potential corruption + 15 points
└─ Trade-off: Strong but risky

Corruption Accumulation:
├─ Multiple capstone uses per day: Building corruption fast
├─ Capstone once per day: Managed corruption
└─ Design: Encourages careful usage
```

---

## 19. Logging Specifications

(Comprehensive logging format for capstone execution - see section 19)

---

## 20. Unit Testing Requirements

(~16 tests covering Tier 3 abilities and capstone - see section 20)

---

## 21. Deliverable Checklist

- [ ] Domain Value Objects (Tier 3)
- [ ] Domain Enums
- [ ] Application Services (3 interfaces + implementations)
- [ ] Configuration (abilities.json Tier 3)
- [ ] Unit Tests (~16 tests)
- [ ] Documentation (this spec)

---

## 22. Acceptance Criteria

### Unraveling Criteria

- [x] Only usable at exactly Resonance 10
- [x] Requires accumulated damage > 0
- [x] Costs 5 AP (cascade does NOT apply)
- [x] Deals 100% of accumulated damage (no DEF save)
- [x] Guaranteed 20% corruption check
- [x] Resets Resonance to 0
- [x] Resets Accumulated Damage to 0
- [x] Activates cooldown (once per long rest)

### Völva's Vision Criteria

- [x] Costs 3 AP (2 with Cascade)
- [x] 15-space radius
- [x] Reveals all hidden creatures
- [x] Builds +2 Resonance
- [x] Triggers corruption check

### Aether Storm Criteria

- [x] Costs 5 AP (4 with Cascade)
- [x] Deals 4d6 damage per target
- [x] Cone area effect (8×4)
- [x] DEF save available
- [x] Builds +2 Resonance
- [x] Accumulates 4d6 damage

---

## 23. Dependencies & Prerequisites

| Dependency | Version | Purpose |
|------------|---------|---------|
| v0.20.8a (Tier 1) | Complete | Base framework |
| v0.20.8b (Tier 2) | Complete | Cascade system |
| v0.6.x Dice System | Complete | 4d6 rolls, d100 checks |
| v0.18.x Corruption | Complete | Corruption application |
| v0.17.5 Characters | Complete | Specialization state |

---

## 24. Complete Specialization Summary

The **Seiðkona (Seeress)** specialization is now complete across three tiers:

### Tier 1: Foundation
- Seiðr Bolt (damage + Resonance)
- Wyrd Sight (detection)
- Aether Attunement (passive regen)

### Tier 2: Advancement
- Fate's Thread (precognition)
- Weave Disruption (dispelling)
- Resonance Cascade (cost reduction)

### Tier 3: Mastery
- Völva's Vision (mass revelation)
- Aether Storm (area damage)
- Unraveling (capstone + reset)

**Specialization Characteristics:**
- **Unique Resource:** Aether Resonance (builds, doesn't consume until capstone)
- **Special Mechanic:** Accumulated Aetheric Damage for capstone payoff
- **Corruption Integration:** Scales with Resonance (0-25%, capped at capstone 20%)
- **Strategic Depth:** Risk-reward tension through cascade and capstone
- **Final Heretical Path:** Only Mystic in v0.20.x, completes Heretical trio

---

**Version Control:**
- Created: 2026-01-28
- Status: Ready for Implementation
- Complete: Seiðkona specialization fully specified across v0.20.8a-c
