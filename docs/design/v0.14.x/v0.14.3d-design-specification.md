# v0.14.3d Design Specification: Boss Schema

**Version:** 0.14.3d
**Parent:** v0.14.3 (Monster Configuration Schemas)
**Prerequisites:** v0.14.3a Complete (Monster Schema), v0.14.2 Complete (Equipment Configuration Schemas)
**Status:** Design Complete

---

## Table of Contents

1. [Executive Summary](#1-executive-summary)
2. [Feature Overview](#2-feature-overview)
3. [Architecture Diagrams](#3-architecture-diagrams)
4. [Boss Schema Root Definition](#4-boss-schema-root-definition)
   - 4.1 [Root Configuration Properties](#41-root-configuration-properties)
   - 4.2 [BossDefinition Schema](#42-bossdefinition-schema)
5. [BossPhase Definition](#5-bossphase-definition)
   - 5.1 [Phase Properties](#51-phase-properties)
   - 5.2 [Health Threshold Configuration](#52-health-threshold-configuration)
   - 5.3 [Behavior Configuration](#53-behavior-configuration)
   - 5.4 [Ability Configuration](#54-ability-configuration)
6. [EnrageConfig Definition](#6-enrageconfig-definition)
   - 6.1 [Enrage Trigger Types](#61-enrage-trigger-types)
   - 6.2 [Enrage Stat Multipliers](#62-enrage-stat-multipliers)
   - 6.3 [Enrage Additional Abilities](#63-enrage-additional-abilities)
7. [SummonConfig Definition](#7-summonconfig-definition)
   - 7.1 [Summon Trigger Types](#71-summon-trigger-types)
   - 7.2 [Summon Quantity Configuration](#72-summon-quantity-configuration)
   - 7.3 [Summon Cooldown and Limits](#73-summon-cooldown-and-limits)
8. [VulnerabilityWindow Definition](#8-vulnerabilitywindow-definition)
   - 8.1 [Vulnerability Trigger Types](#81-vulnerability-trigger-types)
   - 8.2 [Duration and Damage Multiplier](#82-duration-and-damage-multiplier)
9. [BossAnnouncement Definition](#9-bossannouncement-definition)
   - 9.1 [Announcement Trigger Types](#91-announcement-trigger-types)
   - 9.2 [Announcement Text Configuration](#92-announcement-text-configuration)
10. [Validation Rules](#10-validation-rules)
    - 10.1 [ID Pattern Validation](#101-id-pattern-validation)
    - 10.2 [Range Validation](#102-range-validation)
    - 10.3 [Required Fields](#103-required-fields)
    - 10.4 [Array Constraints](#104-array-constraints)
11. [Configuration Schema](#11-configuration-schema)
12. [Configuration File](#12-configuration-file)
13. [Data Model Changes](#13-data-model-changes)
14. [Logging Specifications](#14-logging-specifications)
15. [Unit Testing Requirements](#15-unit-testing-requirements)
16. [Use Cases](#16-use-cases)
17. [Deliverable Checklist](#17-deliverable-checklist)
18. [Acceptance Criteria](#18-acceptance-criteria)
19. [Dependencies](#19-dependencies)
20. [Future Considerations](#20-future-considerations)

---

## 1. Executive Summary

Version 0.14.3d introduces the **Boss Schema** (`bosses.schema.json`), which validates boss encounter definitions including multi-phase configurations, health thresholds, ability rotations, enrage mechanics, summon configurations, vulnerability windows, and boss-specific dialogue/announcements. This schema enables full customization of boss encounters without code changes, supporting modding scenarios where complex boss fights with multiple phases, dynamic difficulty, and strategic mechanics can be defined entirely through configuration.

The Boss Schema is the most complex schema in the v0.14.3 series, incorporating six distinct schema definitions that work together to define complete boss encounters. Bosses reference base monster definitions from `monsters.json` (v0.14.3a) and may reference loot tables from `loot-tables.json` (v0.14.2).

### Key Deliverables

| Category | Items |
|----------|-------|
| **Schema Files** | `bosses.schema.json` |
| **Schema Definitions** | `BossDefinition`, `BossPhase`, `EnrageConfig`, `SummonConfig`, `VulnerabilityWindow`, `BossAnnouncement` |
| **Configuration Files** | Create `bosses.json` with 2-3 example bosses |
| **Tests** | ~5 new unit tests |

### Architectural Significance

This version provides:
- **Phase-based boss encounters** - Multiple phases with health thresholds (0-100%)
- **Boss behavior patterns** - 5 AI behaviors (Aggressive, Defensive, Tactical, Berserk, Summoner)
- **Enrage mechanics** - 4 trigger types (Timer, HealthPercent, TurnCount, AllyDeath)
- **Summon/minion spawning** - 4 trigger types (PhaseStart, Timer, HealthPercent, Random)
- **Vulnerability windows** - 4 trigger types (AfterAbility, PhaseTransition, Timer, HealthPercent)
- **Boss announcements** - 6 trigger types (BattleStart, PhaseTransition, Enrage, LowHealth, Victory, Summon)
- **Base monster references** - Bosses extend existing monster definitions
- **Unique loot table references** - Boss-specific loot drops

### Relationship to Other Schemas

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    v0.14.3 MONSTER CONFIGURATION SCHEMAS                     │
└─────────────────────────────────────────────────────────────────────────────┘

  ┌─────────────────────────────────────────────────────────────────────────┐
  │  v0.14.3a: monsters.schema.json (provides baseMonsterId targets)        │
  │  v0.14.3b: traits.schema.json                                           │
  │  v0.14.3c: tiers.schema.json                                            │
  │  v0.14.3d: bosses.schema.json ◀── THIS VERSION                          │
  └─────────────────────────────────────────────────────────────────────────┘

  Cross-references:
  • bosses.json → baseMonsterId references monster IDs from monsters.json
  • bosses.json → uniqueLootTableId references loot tables from loot-tables.json
  • bosses.json → summons[].monsterId references monster IDs from monsters.json

  Shared definitions:
  • ID pattern: ^[a-z][a-z0-9_-]*$ (allows hyphens for boss IDs)
  • StatModifiers: Reused from traits schema for phase-specific buffs
  • QuantityRange: Reused for summon counts
  • Schema location: config/schemas/
```

---

## 2. Feature Overview

```
v0.14.3d Boss Schema Features
├── bosses.schema.json
│   ├── Root Configuration Properties
│   │   ├── $schema (string, optional)
│   │   ├── version (string, optional)
│   │   ├── description (string, optional, file-level)
│   │   └── bosses (array of BossDefinition, required)
│   └── Definitions
│       ├── BossDefinition
│       │   ├── id (string, hyphen pattern, required)
│       │   ├── name (string, minLength: 1, required)
│       │   ├── title (string, optional, e.g., "Lord of Bones")
│       │   ├── description (string, required)
│       │   ├── baseMonsterId (string, references monsters.json, required)
│       │   ├── baseHealth (integer, minimum: 1, overrides monster)
│       │   ├── phases (array of BossPhase, minItems: 1, required)
│       │   ├── enrage (EnrageConfig, optional)
│       │   ├── summons (array of SummonConfig, optional)
│       │   ├── vulnerabilityWindows (array of VulnerabilityWindow, optional)
│       │   ├── announcements (array of BossAnnouncement, optional)
│       │   ├── uniqueLootTableId (string, optional)
│       │   ├── musicTrackId (string, optional)
│       │   ├── arenaRequirements (object, optional)
│       │   └── sortOrder (integer, minimum: 0, optional)
│       ├── BossPhase
│       │   ├── id (string, underscore pattern, required)
│       │   ├── name (string, required)
│       │   ├── healthThresholdPercent (number, 0-100, required)
│       │   ├── behavior (enum, required)
│       │   ├── abilityIds (array of string, optional)
│       │   ├── abilityRotation (array of string, optional)
│       │   ├── statModifiers (StatModifiers, optional)
│       │   ├── transitionAnnouncement (string, optional)
│       │   └── transitionEffect (string, optional)
│       ├── EnrageConfig
│       │   ├── triggerType (enum, required)
│       │   ├── triggerValue (number, required)
│       │   ├── statMultipliers (object, required)
│       │   ├── additionalAbilityIds (array of string, optional)
│       │   └── announcement (string, optional)
│       ├── SummonConfig
│       │   ├── monsterId (string, required)
│       │   ├── count (QuantityRange, required)
│       │   ├── triggerType (enum, required)
│       │   ├── triggerValue (number, optional)
│       │   ├── cooldownTurns (integer, optional)
│       │   ├── maxActive (integer, optional)
│       │   └── announcement (string, optional)
│       ├── VulnerabilityWindow
│       │   ├── id (string, required)
│       │   ├── triggerType (enum, required)
│       │   ├── triggerValue (string or number, required)
│       │   ├── durationTurns (integer, minimum: 1, required)
│       │   ├── damageMultiplier (number, minimum: 1.0, default: 2.0)
│       │   └── announcement (string, optional)
│       └── BossAnnouncement
│           ├── trigger (enum, required)
│           ├── triggerValue (string or number, optional)
│           └── text (string, required)
├── Validation Rules
│   ├── Boss ID Pattern Validation (allows hyphens)
│   ├── Phase ID Pattern Validation (underscore)
│   ├── Health Threshold Range Validation (0-100)
│   ├── Behavior Enum Validation (5 values)
│   ├── Enrage Trigger Type Validation (4 values)
│   ├── Summon Trigger Type Validation (4 values)
│   ├── Vulnerability Trigger Type Validation (4 values)
│   ├── Announcement Trigger Validation (6 values)
│   ├── Phase Array Minimum (minItems: 1)
│   └── Required Fields Enforced
└── Configuration File
    └── bosses.json created with 2-3 example bosses
```

---

## 3. Architecture Diagrams

### 3.1 Boss Definition Structure Overview

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         BOSS DEFINITION STRUCTURE                            │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                      BOSS DEFINITION                                 │    │
│  │                                                                      │    │
│  │  id: "skeleton-king"                                                 │    │
│  │  name: "Skeleton King"                                               │    │
│  │  title: "Lord of Bones"                                              │    │
│  │  baseMonsterId: "skeleton_warrior"                                   │    │
│  │  baseHealth: 500                                                     │    │
│  │                                                                      │    │
│  │  ┌───────────────────────────────────────────────────────────────┐  │    │
│  │  │  PHASES (minimum 1 required)                                   │  │    │
│  │  │  ┌─────────────────────────────────────────────────────────┐  │  │    │
│  │  │  │ Phase 1: 100%-60% HP │ Tactical │ Bone Throw, Shield    │  │  │    │
│  │  │  ├─────────────────────────────────────────────────────────┤  │  │    │
│  │  │  │ Phase 2: 60%-30% HP  │ Summoner │ Summon, Dark Wave     │  │  │    │
│  │  │  ├─────────────────────────────────────────────────────────┤  │  │    │
│  │  │  │ Phase 3: 30%-0% HP   │ Berserk  │ Bone Storm, Death     │  │  │    │
│  │  │  └─────────────────────────────────────────────────────────┘  │  │    │
│  │  └───────────────────────────────────────────────────────────────┘  │    │
│  │                                                                      │    │
│  │  ┌───────────────────────────────────────────────────────────────┐  │    │
│  │  │  ENRAGE CONFIG (optional)                                      │  │    │
│  │  │  ┌─────────────────────────────────────────────────────────┐  │  │    │
│  │  │  │ Trigger: Timer (300 seconds)                            │  │  │    │
│  │  │  │ Effect: +50% attack, +25% speed                         │  │  │    │
│  │  │  │ Announcement: "The Skeleton King's rage knows no bounds!"│  │  │    │
│  │  │  └─────────────────────────────────────────────────────────┘  │  │    │
│  │  └───────────────────────────────────────────────────────────────┘  │    │
│  │                                                                      │    │
│  │  ┌───────────────────────────────────────────────────────────────┐  │    │
│  │  │  SUMMONS (optional)                                            │  │    │
│  │  │  ┌─────────────────────────────────────────────────────────┐  │  │    │
│  │  │  │ Monster: skeleton │ Count: 2-4 │ Trigger: PhaseStart    │  │  │    │
│  │  │  │ Cooldown: 3 turns │ Max Active: 6                       │  │  │    │
│  │  │  └─────────────────────────────────────────────────────────┘  │  │    │
│  │  └───────────────────────────────────────────────────────────────┘  │    │
│  │                                                                      │    │
│  │  ┌───────────────────────────────────────────────────────────────┐  │    │
│  │  │  VULNERABILITY WINDOWS (optional)                              │  │    │
│  │  │  ┌─────────────────────────────────────────────────────────┐  │  │    │
│  │  │  │ Trigger: AfterAbility (bone_storm)                      │  │  │    │
│  │  │  │ Duration: 2 turns │ Damage Multiplier: 2.0x             │  │  │    │
│  │  │  └─────────────────────────────────────────────────────────┘  │  │    │
│  │  └───────────────────────────────────────────────────────────────┘  │    │
│  │                                                                      │    │
│  │  ┌───────────────────────────────────────────────────────────────┐  │    │
│  │  │  ANNOUNCEMENTS (optional)                                      │  │    │
│  │  │  ┌─────────────────────────────────────────────────────────┐  │  │    │
│  │  │  │ BattleStart: "You dare challenge me?"                   │  │  │    │
│  │  │  │ PhaseTransition: "Rise, my minions!"                    │  │  │    │
│  │  │  │ Enrage: "ENOUGH! I will destroy you all!"               │  │  │    │
│  │  │  │ Victory: "This kingdom... will fall..."                 │  │  │    │
│  │  │  └─────────────────────────────────────────────────────────┘  │  │    │
│  │  └───────────────────────────────────────────────────────────────┘  │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 Phase Transition Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          PHASE TRANSITION FLOW                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  BOSS HEALTH BAR                                                             │
│                                                                              │
│  100%                                    60%           30%           0%      │
│  ├──────────────────────────────────────┼─────────────┼─────────────┤       │
│  │           PHASE 1                    │   PHASE 2   │   PHASE 3   │       │
│  │         (Tactical)                   │  (Summoner) │  (Berserk)  │       │
│  └──────────────────────────────────────┴─────────────┴─────────────┘       │
│                                                                              │
│  PHASE TRANSITION SEQUENCE                                                   │
│                                                                              │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │                                                                       │   │
│  │  1. Health drops below threshold (e.g., 60%)                          │   │
│  │           │                                                           │   │
│  │           ▼                                                           │   │
│  │  2. Transition announcement displayed                                 │   │
│  │     "Rise, my minions!"                                               │   │
│  │           │                                                           │   │
│  │           ▼                                                           │   │
│  │  3. Transition effect triggered (if defined)                          │   │
│  │     Visual effect: "phase_transition_dark"                            │   │
│  │           │                                                           │   │
│  │           ▼                                                           │   │
│  │  4. New phase activated                                               │   │
│  │     - New behavior pattern (Summoner)                                 │   │
│  │     - New ability set available                                       │   │
│  │     - Stat modifiers applied                                          │   │
│  │           │                                                           │   │
│  │           ▼                                                           │   │
│  │  5. Phase-specific triggers activated                                 │   │
│  │     - PhaseStart summons triggered                                    │   │
│  │     - PhaseTransition vulnerability windows opened                    │   │
│  │                                                                       │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.3 Boss Behavior Patterns

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         BOSS BEHAVIOR PATTERNS                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │ Behavior   │ Target Priority        │ Ability Usage    │ When Used     │ │
│  ├────────────┼────────────────────────┼──────────────────┼───────────────┤ │
│  │ Aggressive │ Highest damage dealer  │ Max damage       │ Default phase │ │
│  │ Defensive  │ Self / healer         │ Defensive/heals  │ Low HP phase  │ │
│  │ Tactical   │ Weakest or dangerous  │ Debuffs/control  │ Strategic     │ │
│  │ Berserk    │ Random / nearest      │ All-out attack   │ Enrage/final  │ │
│  │ Summoner   │ N/A (summon focus)    │ Minion spawning  │ Summon phase  │ │
│  └────────────┴────────────────────────┴──────────────────┴───────────────┘ │
│                                                                              │
│  BEHAVIOR STATE MACHINE                                                      │
│                                                                              │
│  ┌──────────────┐    Phase 2     ┌──────────────┐    Phase 3               │
│  │              │ ──────────────▶│              │ ──────────────▶          │
│  │   Tactical   │                │   Summoner   │                           │
│  │              │◀────────────── │              │◀──────────────            │
│  └──────────────┘                └──────────────┘                           │
│         │                               │                                   │
│         │ Enrage Timer                  │ Enrage Timer                      │
│         ▼                               ▼                                   │
│  ┌──────────────────────────────────────────────────┐                      │
│  │                    Berserk                        │                      │
│  │  (Overrides current behavior when enraged)        │                      │
│  └──────────────────────────────────────────────────┘                      │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.4 Enrage Trigger System

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          ENRAGE TRIGGER SYSTEM                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  TRIGGER TYPES                                                               │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │ Trigger Type  │ Value Meaning          │ Example                       │ │
│  ├───────────────┼────────────────────────┼───────────────────────────────┤ │
│  │ Timer         │ Seconds until enrage   │ 300 (5 minutes)               │ │
│  │ HealthPercent │ HP % that triggers     │ 20 (at 20% HP)                │ │
│  │ TurnCount     │ Turns until enrage     │ 30 (after 30 turns)           │ │
│  │ AllyDeath     │ Triggered when minion  │ N/A (immediate on death)      │ │
│  │               │ dies                   │                               │ │
│  └───────────────┴────────────────────────┴───────────────────────────────┘ │
│                                                                              │
│  ENRAGE EFFECT APPLICATION                                                   │
│                                                                              │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │                                                                       │   │
│  │  Enrage Triggered                                                     │   │
│  │        │                                                              │   │
│  │        ▼                                                              │   │
│  │  ┌─────────────────────────────────────────────────────────────┐     │   │
│  │  │ 1. Display announcement (if defined)                         │     │   │
│  │  │    "The Skeleton King's rage knows no bounds!"               │     │   │
│  │  └─────────────────────────────────────────────────────────────┘     │   │
│  │        │                                                              │   │
│  │        ▼                                                              │   │
│  │  ┌─────────────────────────────────────────────────────────────┐     │   │
│  │  │ 2. Apply stat multipliers                                    │     │   │
│  │  │    Attack: base × 1.5 (50% increase)                         │     │   │
│  │  │    Speed: base × 1.25 (25% increase)                         │     │   │
│  │  └─────────────────────────────────────────────────────────────┘     │   │
│  │        │                                                              │   │
│  │        ▼                                                              │   │
│  │  ┌─────────────────────────────────────────────────────────────┐     │   │
│  │  │ 3. Add additional abilities (if defined)                     │     │   │
│  │  │    + "enraged_strike"                                        │     │   │
│  │  │    + "berserker_rage"                                        │     │   │
│  │  └─────────────────────────────────────────────────────────────┘     │   │
│  │                                                                       │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.5 Summon Configuration System

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                       SUMMON CONFIGURATION SYSTEM                            │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  SUMMON TRIGGER TYPES                                                        │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │ Trigger Type  │ Value Meaning          │ When Summons Occur            │ │
│  ├───────────────┼────────────────────────┼───────────────────────────────┤ │
│  │ PhaseStart    │ N/A                    │ When entering a phase         │ │
│  │ Timer         │ Seconds between spawns │ Every N seconds               │ │
│  │ HealthPercent │ HP % that triggers     │ When HP drops below threshold │ │
│  │ Random        │ % chance per turn      │ Rolled each turn              │ │
│  └───────────────┴────────────────────────┴───────────────────────────────┘ │
│                                                                              │
│  SUMMON FLOW                                                                 │
│                                                                              │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │                                                                       │   │
│  │  Summon Trigger Activated                                             │   │
│  │        │                                                              │   │
│  │        ▼                                                              │   │
│  │  ┌─────────────────────────────────────────────────────────────┐     │   │
│  │  │ Check Cooldown                                               │     │   │
│  │  │ Is cooldownTurns elapsed since last summon?                  │     │   │
│  │  └─────────────────────────────────────────────────────────────┘     │   │
│  │        │                                                              │   │
│  │        ├── No ──▶ Skip summon                                         │   │
│  │        │                                                              │   │
│  │        ▼ Yes                                                          │   │
│  │  ┌─────────────────────────────────────────────────────────────┐     │   │
│  │  │ Check Active Count                                           │     │   │
│  │  │ Current summons < maxActive?                                 │     │   │
│  │  └─────────────────────────────────────────────────────────────┘     │   │
│  │        │                                                              │   │
│  │        ├── No ──▶ Skip summon                                         │   │
│  │        │                                                              │   │
│  │        ▼ Yes                                                          │   │
│  │  ┌─────────────────────────────────────────────────────────────┐     │   │
│  │  │ Roll Count                                                   │     │   │
│  │  │ Random between count.min and count.max                       │     │   │
│  │  │ Example: 2-4 → rolls 3                                       │     │   │
│  │  └─────────────────────────────────────────────────────────────┘     │   │
│  │        │                                                              │   │
│  │        ▼                                                              │   │
│  │  ┌─────────────────────────────────────────────────────────────┐     │   │
│  │  │ Spawn Monsters                                               │     │   │
│  │  │ Create 3 × monsterId at valid positions                      │     │   │
│  │  │ Display announcement (if defined)                            │     │   │
│  │  └─────────────────────────────────────────────────────────────┘     │   │
│  │                                                                       │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.6 Vulnerability Window System

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                      VULNERABILITY WINDOW SYSTEM                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  VULNERABILITY TRIGGER TYPES                                                 │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │ Trigger Type     │ Value Type  │ When Window Opens                     │ │
│  ├──────────────────┼─────────────┼───────────────────────────────────────┤ │
│  │ AfterAbility     │ Ability ID  │ After boss uses specified ability     │ │
│  │ PhaseTransition  │ Phase ID    │ When transitioning to specified phase │ │
│  │ Timer            │ Seconds     │ Every N seconds                       │ │
│  │ HealthPercent    │ HP %        │ When HP drops below threshold         │ │
│  └──────────────────┴─────────────┴───────────────────────────────────────┘ │
│                                                                              │
│  VULNERABILITY WINDOW TIMELINE                                               │
│                                                                              │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │                                                                       │   │
│  │  Turn 1      Turn 2      Turn 3      Turn 4      Turn 5               │   │
│  │  ┌───┐       ┌───┐       ┌───┐       ┌───┐       ┌───┐                │   │
│  │  │   │       │   │       │ B │       │ V │       │ V │                │   │
│  │  │   │       │   │       │ O │       │ U │       │ U │                │   │
│  │  │   │       │   │       │ N │       │ L │       │ L │                │   │
│  │  │   │       │   │       │ E │       │ N │       │ N │                │   │
│  │  │   │       │   │       │   │       │   │       │   │                │   │
│  │  │   │       │   │       │ S │       │ 2 │       │ 2 │                │   │
│  │  │   │       │   │       │ T │       │ x │       │ x │                │   │
│  │  │   │       │   │       │ O │       │   │       │   │                │   │
│  │  │   │       │   │       │ R │       │ D │       │ D │                │   │
│  │  │   │       │   │       │ M │       │ M │       │ M │                │   │
│  │  │   │       │   │       │   │       │ G │       │ G │                │   │
│  │  └───┘       └───┘       └───┘       └───┘       └───┘                │   │
│  │                            │           │           │                   │   │
│  │                      Ability      Window      Window                   │   │
│  │                        Used        Open        Closes                  │   │
│  │                                                                       │   │
│  │  After "bone_storm" ability, vulnerability window opens for 2 turns   │   │
│  │  During this time, damage multiplier = 2.0x                           │   │
│  │                                                                       │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.7 Announcement Trigger System

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                      ANNOUNCEMENT TRIGGER SYSTEM                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ANNOUNCEMENT TRIGGERS                                                       │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │ Trigger         │ Value Type  │ When Displayed                         │ │
│  ├─────────────────┼─────────────┼────────────────────────────────────────┤ │
│  │ BattleStart     │ N/A         │ Combat begins                          │ │
│  │ PhaseTransition │ Phase ID    │ When transitioning to specified phase  │ │
│  │ Enrage          │ N/A         │ When enrage triggers                   │ │
│  │ LowHealth       │ HP %        │ When HP drops below threshold          │ │
│  │ Victory         │ N/A         │ Boss defeats all players (boss wins)   │ │
│  │ Summon          │ N/A         │ When boss summons minions              │ │
│  └─────────────────┴─────────────┴────────────────────────────────────────┘ │
│                                                                              │
│  ANNOUNCEMENT DISPLAY FLOW                                                   │
│                                                                              │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │                                                                       │   │
│  │  ┌─────────────────────────────────────────────────────────────┐     │   │
│  │  │                                                              │     │   │
│  │  │  ╔═══════════════════════════════════════════════════════╗  │     │   │
│  │  │  ║                                                        ║  │     │   │
│  │  │  ║     "You dare challenge me, mortal?"                   ║  │     │   │
│  │  │  ║                                                        ║  │     │   │
│  │  │  ║                         — Skeleton King                ║  │     │   │
│  │  │  ║                                                        ║  │     │   │
│  │  │  ╚═══════════════════════════════════════════════════════╝  │     │   │
│  │  │                                                              │     │   │
│  │  └─────────────────────────────────────────────────────────────┘     │   │
│  │                                                                       │   │
│  │  Announcements are displayed:                                         │   │
│  │  • As dialogue boxes during boss encounters                           │   │
│  │  • With the boss's name/title as attribution                          │   │
│  │  • At key dramatic moments in the fight                               │   │
│  │                                                                       │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.8 File Layer Diagram

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                            CONFIG LAYER                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  config/                                                                     │
│  ├── bosses.json ◀────────────────────────────┐                             │
│  │   {                                         │ references                  │
│  │     "$schema": "./schemas/bosses.schema.json",                            │
│  │     "description": "Boss encounter definitions",                          │
│  │     "bosses": [                             │                             │
│  │       {                                     │                             │
│  │         "id": "skeleton-king",              │                             │
│  │         "name": "Skeleton King",            │                             │
│  │         "baseMonsterId": "skeleton_warrior",│ → monsters.json             │
│  │         "baseHealth": 500,                  │                             │
│  │         "phases": [...],                    │                             │
│  │         "enrage": {...},                    │                             │
│  │         "summons": [...],                   │ → monsters.json             │
│  │         "uniqueLootTableId": "boss_loot"    │ → loot-tables.json          │
│  │       },                                    │                             │
│  │       ...                                   │                             │
│  │     ]                                       │                             │
│  │   }                                         │                             │
│  │                                             │                             │
│  ├── monsters.json (provides baseMonsterId targets)                          │
│  ├── loot-tables.json (provides uniqueLootTableId targets)                   │
│  │                                             │                             │
│  └── schemas/                                  │                             │
│      └── bosses.schema.json ──────────────────┘                             │
│          {                                                                   │
│            "$schema": "http://json-schema.org/draft-07/schema#",            │
│            "definitions": {                                                  │
│              "BossDefinition": {...},                                        │
│              "BossPhase": {...},                                             │
│              "EnrageConfig": {...},                                          │
│              "SummonConfig": {...},                                          │
│              "VulnerabilityWindow": {...},                                   │
│              "BossAnnouncement": {...}                                       │
│            }                                                                 │
│          }                                                                   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 4. Boss Schema Root Definition

### 4.1 Root Configuration Properties

**File:** `config/schemas/bosses.schema.json`

The boss schema follows JSON Schema Draft-07 specification, providing comprehensive validation for boss configuration files.

```json
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Boss Configuration",
    "description": "Schema for boss encounter definitions including phases, abilities, enrage mechanics, summons, and announcements.",
    "type": "object",
    "properties": {
        "$schema": {
            "type": "string",
            "description": "Reference to the JSON schema file for validation"
        },
        "version": {
            "type": "string",
            "description": "Optional version identifier for the configuration file",
            "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "description": {
            "type": "string",
            "description": "Optional file-level description"
        },
        "bosses": {
            "type": "array",
            "description": "List of boss definitions",
            "items": {
                "$ref": "#/definitions/BossDefinition"
            },
            "minItems": 1
        }
    },
    "required": ["bosses"],
    "additionalProperties": false,
    "definitions": {
        "BossDefinition": { ... },
        "BossPhase": { ... },
        "EnrageConfig": { ... },
        "SummonConfig": { ... },
        "VulnerabilityWindow": { ... },
        "BossAnnouncement": { ... },
        "QuantityRange": { ... },
        "StatModifiers": { ... }
    }
}
```

### 4.2 BossDefinition Schema

The `BossDefinition` object defines a complete boss encounter with all its phases and mechanics.

```json
"BossDefinition": {
    "type": "object",
    "description": "A boss encounter definition with phases, abilities, and special mechanics",
    "properties": {
        "id": {
            "type": "string",
            "description": "Unique identifier for the boss (lowercase with hyphens allowed)",
            "pattern": "^[a-z][a-z0-9_-]*$",
            "minLength": 1,
            "maxLength": 50
        },
        "name": {
            "type": "string",
            "description": "Display name shown to players",
            "minLength": 1,
            "maxLength": 100
        },
        "title": {
            "type": "string",
            "description": "Optional title displayed below name (e.g., 'Lord of Bones')",
            "maxLength": 100
        },
        "description": {
            "type": "string",
            "description": "Lore or flavor text describing the boss"
        },
        "baseMonsterId": {
            "type": "string",
            "description": "Reference to base monster definition in monsters.json",
            "pattern": "^[a-z][a-z0-9_]*$"
        },
        "baseHealth": {
            "type": "integer",
            "description": "Override health value (replaces monster base health)",
            "minimum": 1
        },
        "phases": {
            "type": "array",
            "description": "Boss phases in order of activation (by health threshold)",
            "items": {
                "$ref": "#/definitions/BossPhase"
            },
            "minItems": 1
        },
        "enrage": {
            "$ref": "#/definitions/EnrageConfig",
            "description": "Optional enrage mechanic configuration"
        },
        "summons": {
            "type": "array",
            "description": "Minion summoning configurations",
            "items": {
                "$ref": "#/definitions/SummonConfig"
            }
        },
        "vulnerabilityWindows": {
            "type": "array",
            "description": "Vulnerability window configurations",
            "items": {
                "$ref": "#/definitions/VulnerabilityWindow"
            }
        },
        "announcements": {
            "type": "array",
            "description": "Boss dialogue/announcement configurations",
            "items": {
                "$ref": "#/definitions/BossAnnouncement"
            }
        },
        "uniqueLootTableId": {
            "type": "string",
            "description": "Reference to unique loot table in loot-tables.json",
            "pattern": "^[a-z][a-z0-9_-]*$"
        },
        "musicTrackId": {
            "type": "string",
            "description": "Music track to play during encounter",
            "pattern": "^[a-z][a-z0-9_-]*$"
        },
        "arenaRequirements": {
            "type": "object",
            "description": "Arena/room requirements for the boss encounter",
            "properties": {
                "minWidth": {
                    "type": "integer",
                    "description": "Minimum arena width in tiles",
                    "minimum": 1
                },
                "minHeight": {
                    "type": "integer",
                    "description": "Minimum arena height in tiles",
                    "minimum": 1
                },
                "requiredTerrain": {
                    "type": "array",
                    "description": "Required terrain types in arena",
                    "items": { "type": "string" }
                }
            },
            "additionalProperties": false
        },
        "sortOrder": {
            "type": "integer",
            "description": "Order for display sorting (lower values first)",
            "minimum": 0
        }
    },
    "required": ["id", "name", "description", "baseMonsterId", "phases"],
    "additionalProperties": false
}
```

---

## 5. BossPhase Definition

### 5.1 Phase Properties

```json
"BossPhase": {
    "type": "object",
    "description": "A boss combat phase with specific behavior and abilities",
    "properties": {
        "id": {
            "type": "string",
            "description": "Unique identifier for the phase within this boss",
            "pattern": "^[a-z][a-z0-9_]*$",
            "minLength": 1,
            "maxLength": 50
        },
        "name": {
            "type": "string",
            "description": "Display name for the phase (e.g., 'Phase 1', 'Enraged Form')",
            "minLength": 1,
            "maxLength": 100
        },
        "healthThresholdPercent": {
            "type": "number",
            "description": "Health percentage at which this phase activates (100 = full health, 0 = death)",
            "minimum": 0,
            "maximum": 100
        },
        "behavior": {
            "type": "string",
            "description": "AI behavior pattern for this phase",
            "enum": ["Aggressive", "Defensive", "Tactical", "Berserk", "Summoner"]
        },
        "abilityIds": {
            "type": "array",
            "description": "Abilities available during this phase",
            "items": {
                "type": "string",
                "pattern": "^[a-z][a-z0-9_]*$"
            }
        },
        "abilityRotation": {
            "type": "array",
            "description": "Fixed ability rotation order (optional, overrides random selection)",
            "items": {
                "type": "string",
                "pattern": "^[a-z][a-z0-9_]*$"
            }
        },
        "statModifiers": {
            "$ref": "#/definitions/StatModifiers",
            "description": "Stat modifications applied during this phase"
        },
        "transitionAnnouncement": {
            "type": "string",
            "description": "Text displayed when transitioning to this phase"
        },
        "transitionEffect": {
            "type": "string",
            "description": "Visual effect ID played on phase transition",
            "pattern": "^[a-z][a-z0-9_]*$"
        }
    },
    "required": ["id", "name", "healthThresholdPercent", "behavior"],
    "additionalProperties": false
}
```

### 5.2 Health Threshold Configuration

The `healthThresholdPercent` determines when a phase becomes active.

**Rules:**
- Phase 1 should have `healthThresholdPercent: 100` (active from start)
- Lower health thresholds activate as the boss takes damage
- Phases are checked from lowest threshold to highest
- Once a phase activates, it remains active until a lower threshold is reached

**Example Phase Thresholds:**
| Phase | Threshold | Active Range |
|-------|-----------|--------------|
| Phase 1 | 100% | 100% - 61% |
| Phase 2 | 60% | 60% - 31% |
| Phase 3 | 30% | 30% - 0% |

### 5.3 Behavior Configuration

The `behavior` field determines the boss's AI pattern during the phase.

| Behavior | Description | Target Priority | Ability Focus |
|----------|-------------|-----------------|---------------|
| `Aggressive` | Maximum damage output | Highest damage dealer | High damage abilities |
| `Defensive` | Self-preservation | Self / healer | Defensive/healing abilities |
| `Tactical` | Strategic control | Weakest / dangerous | CC/debuff abilities |
| `Berserk` | All-out attack | Random / nearest | Any offensive ability |
| `Summoner` | Minion spawning | N/A | Summon abilities |

### 5.4 Ability Configuration

**Available Abilities (`abilityIds`):**
```json
{
    "abilityIds": ["bone_throw", "shield_bash", "dark_wave"]
}
```

**Fixed Rotation (`abilityRotation`):**
```json
{
    "abilityRotation": ["bone_throw", "bone_throw", "shield_bash"]
}
```

When `abilityRotation` is specified, the boss follows the exact sequence, cycling back to the start after completing the rotation.

---

## 6. EnrageConfig Definition

### 6.1 Enrage Trigger Types

```json
"EnrageConfig": {
    "type": "object",
    "description": "Configuration for boss enrage mechanics",
    "properties": {
        "triggerType": {
            "type": "string",
            "description": "What triggers the enrage state",
            "enum": ["Timer", "HealthPercent", "TurnCount", "AllyDeath"]
        },
        "triggerValue": {
            "type": "number",
            "description": "Value for the trigger (seconds, percent, turns, or N/A for AllyDeath)"
        },
        "statMultipliers": {
            "type": "object",
            "description": "Stat multipliers applied when enraged",
            "properties": {
                "attack": {
                    "type": "number",
                    "description": "Attack multiplier (1.5 = +50%)",
                    "minimum": 0.1
                },
                "defense": {
                    "type": "number",
                    "description": "Defense multiplier",
                    "minimum": 0.1
                },
                "speed": {
                    "type": "number",
                    "description": "Speed multiplier",
                    "minimum": 0.1
                }
            },
            "additionalProperties": false
        },
        "additionalAbilityIds": {
            "type": "array",
            "description": "Abilities unlocked when enraged",
            "items": {
                "type": "string",
                "pattern": "^[a-z][a-z0-9_]*$"
            }
        },
        "announcement": {
            "type": "string",
            "description": "Text displayed when enrage triggers"
        }
    },
    "required": ["triggerType", "triggerValue", "statMultipliers"],
    "additionalProperties": false
}
```

### 6.2 Enrage Stat Multipliers

| Multiplier | Effect | Example |
|------------|--------|---------|
| `attack` | Damage dealt multiplier | 1.5 = +50% damage |
| `defense` | Damage reduction multiplier | 0.8 = -20% reduction |
| `speed` | Action speed multiplier | 1.25 = +25% speed |

### 6.3 Enrage Additional Abilities

When enraged, the boss gains access to additional abilities:

```json
{
    "enrage": {
        "triggerType": "Timer",
        "triggerValue": 300,
        "statMultipliers": {
            "attack": 1.5,
            "speed": 1.25
        },
        "additionalAbilityIds": ["enraged_strike", "berserker_rage"],
        "announcement": "The Skeleton King's rage knows no bounds!"
    }
}
```

---

## 7. SummonConfig Definition

### 7.1 Summon Trigger Types

```json
"SummonConfig": {
    "type": "object",
    "description": "Configuration for boss minion summoning",
    "properties": {
        "monsterId": {
            "type": "string",
            "description": "Monster ID to summon (references monsters.json)",
            "pattern": "^[a-z][a-z0-9_]*$"
        },
        "count": {
            "$ref": "#/definitions/QuantityRange",
            "description": "Number of monsters to summon"
        },
        "triggerType": {
            "type": "string",
            "description": "What triggers the summon",
            "enum": ["PhaseStart", "Timer", "HealthPercent", "Random"]
        },
        "triggerValue": {
            "type": "number",
            "description": "Value for the trigger (contextual based on triggerType)"
        },
        "cooldownTurns": {
            "type": "integer",
            "description": "Turns between summons",
            "minimum": 0
        },
        "maxActive": {
            "type": "integer",
            "description": "Maximum number of active summons at once",
            "minimum": 1
        },
        "announcement": {
            "type": "string",
            "description": "Text displayed when summoning"
        }
    },
    "required": ["monsterId", "count", "triggerType"],
    "additionalProperties": false
}
```

### 7.2 Summon Quantity Configuration

The `count` field uses the `QuantityRange` definition:

```json
"QuantityRange": {
    "type": "object",
    "description": "A range of values with minimum and maximum",
    "properties": {
        "min": {
            "type": "integer",
            "description": "Minimum value",
            "minimum": 1
        },
        "max": {
            "type": "integer",
            "description": "Maximum value",
            "minimum": 1
        }
    },
    "required": ["min", "max"],
    "additionalProperties": false
}
```

**Example:**
```json
{
    "count": { "min": 2, "max": 4 }
}
```

### 7.3 Summon Cooldown and Limits

| Property | Purpose | Example |
|----------|---------|---------|
| `cooldownTurns` | Minimum turns between summons | 3 turns |
| `maxActive` | Cap on simultaneous summons | 6 maximum |

---

## 8. VulnerabilityWindow Definition

### 8.1 Vulnerability Trigger Types

```json
"VulnerabilityWindow": {
    "type": "object",
    "description": "Configuration for boss vulnerability periods",
    "properties": {
        "id": {
            "type": "string",
            "description": "Unique identifier for this vulnerability window",
            "pattern": "^[a-z][a-z0-9_]*$"
        },
        "triggerType": {
            "type": "string",
            "description": "What triggers the vulnerability window",
            "enum": ["AfterAbility", "PhaseTransition", "Timer", "HealthPercent"]
        },
        "triggerValue": {
            "oneOf": [
                { "type": "string" },
                { "type": "number" }
            ],
            "description": "Ability ID, phase ID, seconds, or health percent depending on triggerType"
        },
        "durationTurns": {
            "type": "integer",
            "description": "How many turns the vulnerability lasts",
            "minimum": 1
        },
        "damageMultiplier": {
            "type": "number",
            "description": "Damage multiplier during vulnerability (2.0 = double damage)",
            "minimum": 1.0,
            "default": 2.0
        },
        "announcement": {
            "type": "string",
            "description": "Text displayed when vulnerability window opens"
        }
    },
    "required": ["id", "triggerType", "triggerValue", "durationTurns"],
    "additionalProperties": false
}
```

### 8.2 Duration and Damage Multiplier

| Property | Description | Range |
|----------|-------------|-------|
| `durationTurns` | Turns the window stays open | >= 1 |
| `damageMultiplier` | Damage multiplier during window | >= 1.0 |

**Example:**
```json
{
    "id": "post_bone_storm",
    "triggerType": "AfterAbility",
    "triggerValue": "bone_storm",
    "durationTurns": 2,
    "damageMultiplier": 2.0,
    "announcement": "The Skeleton King is exhausted!"
}
```

---

## 9. BossAnnouncement Definition

### 9.1 Announcement Trigger Types

```json
"BossAnnouncement": {
    "type": "object",
    "description": "Configuration for boss dialogue/announcements",
    "properties": {
        "trigger": {
            "type": "string",
            "description": "What triggers this announcement",
            "enum": ["BattleStart", "PhaseTransition", "Enrage", "LowHealth", "Victory", "Summon"]
        },
        "triggerValue": {
            "oneOf": [
                { "type": "string" },
                { "type": "number" }
            ],
            "description": "Phase ID, health percent, or N/A depending on trigger"
        },
        "text": {
            "type": "string",
            "description": "The announcement text to display",
            "minLength": 1
        }
    },
    "required": ["trigger", "text"],
    "additionalProperties": false
}
```

### 9.2 Announcement Text Configuration

| Trigger | triggerValue | Example Usage |
|---------|--------------|---------------|
| `BattleStart` | N/A | "You dare challenge me?" |
| `PhaseTransition` | Phase ID | "Rise, my minions!" (phase_2) |
| `Enrage` | N/A | "ENOUGH! I will destroy you all!" |
| `LowHealth` | HP % | "You... will pay..." (10%) |
| `Victory` | N/A | "This kingdom... will fall..." |
| `Summon` | N/A | "Minions, to me!" |

---

## 10. Validation Rules

### 10.1 ID Pattern Validation

| Property | Pattern | Allows Hyphen |
|----------|---------|---------------|
| `BossDefinition.id` | `^[a-z][a-z0-9_-]*$` | Yes |
| `BossPhase.id` | `^[a-z][a-z0-9_]*$` | No |
| `baseMonsterId` | `^[a-z][a-z0-9_]*$` | No |
| `monsterId` (summons) | `^[a-z][a-z0-9_]*$` | No |
| `uniqueLootTableId` | `^[a-z][a-z0-9_-]*$` | Yes |

### 10.2 Range Validation

| Property | Range | Validation Error |
|----------|-------|------------------|
| `baseHealth` | >= 1 | "baseHealth must be >= 1" |
| `healthThresholdPercent` | 0-100 | "healthThresholdPercent must be between 0 and 100" |
| `durationTurns` | >= 1 | "durationTurns must be >= 1" |
| `damageMultiplier` | >= 1.0 | "damageMultiplier must be >= 1.0" |
| `cooldownTurns` | >= 0 | "cooldownTurns must be >= 0" |
| `maxActive` | >= 1 | "maxActive must be >= 1" |
| `sortOrder` | >= 0 | "sortOrder must be >= 0" |
| `statMultipliers.*` | >= 0.1 | "stat multiplier must be >= 0.1" |
| `QuantityRange.min` | >= 1 | "min must be >= 1" |
| `QuantityRange.max` | >= 1 | "max must be >= 1" |

### 10.3 Required Fields

| Definition | Required Fields |
|------------|-----------------|
| `BossDefinition` | id, name, description, baseMonsterId, phases |
| `BossPhase` | id, name, healthThresholdPercent, behavior |
| `EnrageConfig` | triggerType, triggerValue, statMultipliers |
| `SummonConfig` | monsterId, count, triggerType |
| `VulnerabilityWindow` | id, triggerType, triggerValue, durationTurns |
| `BossAnnouncement` | trigger, text |
| `QuantityRange` | min, max |

### 10.4 Array Constraints

| Array | Constraint | Validation Error |
|-------|------------|------------------|
| `bosses` | minItems: 1 | "bosses array must have at least 1 item" |
| `phases` | minItems: 1 | "phases array must have at least 1 item" |

---

## 11. Configuration Schema

### Complete Boss Schema File

**File:** `config/schemas/bosses.schema.json`

```json
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Boss Configuration",
    "description": "Schema for boss encounter definitions including phases, abilities, enrage mechanics, summons, and announcements.",
    "type": "object",
    "properties": {
        "$schema": {
            "type": "string",
            "description": "Reference to the JSON schema file for validation"
        },
        "version": {
            "type": "string",
            "description": "Optional version identifier for the configuration file",
            "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "description": {
            "type": "string",
            "description": "Optional file-level description"
        },
        "bosses": {
            "type": "array",
            "description": "List of boss definitions",
            "items": {
                "$ref": "#/definitions/BossDefinition"
            },
            "minItems": 1
        }
    },
    "required": ["bosses"],
    "additionalProperties": false,
    "definitions": {
        "BossDefinition": {
            "type": "object",
            "description": "A boss encounter definition with phases, abilities, and special mechanics",
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier for the boss (lowercase with hyphens allowed)",
                    "pattern": "^[a-z][a-z0-9_-]*$",
                    "minLength": 1,
                    "maxLength": 50
                },
                "name": {
                    "type": "string",
                    "description": "Display name shown to players",
                    "minLength": 1,
                    "maxLength": 100
                },
                "title": {
                    "type": "string",
                    "description": "Optional title displayed below name (e.g., 'Lord of Bones')",
                    "maxLength": 100
                },
                "description": {
                    "type": "string",
                    "description": "Lore or flavor text describing the boss"
                },
                "baseMonsterId": {
                    "type": "string",
                    "description": "Reference to base monster definition in monsters.json",
                    "pattern": "^[a-z][a-z0-9_]*$"
                },
                "baseHealth": {
                    "type": "integer",
                    "description": "Override health value (replaces monster base health)",
                    "minimum": 1
                },
                "phases": {
                    "type": "array",
                    "description": "Boss phases in order of activation (by health threshold)",
                    "items": {
                        "$ref": "#/definitions/BossPhase"
                    },
                    "minItems": 1
                },
                "enrage": {
                    "$ref": "#/definitions/EnrageConfig",
                    "description": "Optional enrage mechanic configuration"
                },
                "summons": {
                    "type": "array",
                    "description": "Minion summoning configurations",
                    "items": {
                        "$ref": "#/definitions/SummonConfig"
                    }
                },
                "vulnerabilityWindows": {
                    "type": "array",
                    "description": "Vulnerability window configurations",
                    "items": {
                        "$ref": "#/definitions/VulnerabilityWindow"
                    }
                },
                "announcements": {
                    "type": "array",
                    "description": "Boss dialogue/announcement configurations",
                    "items": {
                        "$ref": "#/definitions/BossAnnouncement"
                    }
                },
                "uniqueLootTableId": {
                    "type": "string",
                    "description": "Reference to unique loot table in loot-tables.json",
                    "pattern": "^[a-z][a-z0-9_-]*$"
                },
                "musicTrackId": {
                    "type": "string",
                    "description": "Music track to play during encounter",
                    "pattern": "^[a-z][a-z0-9_-]*$"
                },
                "arenaRequirements": {
                    "type": "object",
                    "description": "Arena/room requirements for the boss encounter",
                    "properties": {
                        "minWidth": {
                            "type": "integer",
                            "description": "Minimum arena width in tiles",
                            "minimum": 1
                        },
                        "minHeight": {
                            "type": "integer",
                            "description": "Minimum arena height in tiles",
                            "minimum": 1
                        },
                        "requiredTerrain": {
                            "type": "array",
                            "description": "Required terrain types in arena",
                            "items": { "type": "string" }
                        }
                    },
                    "additionalProperties": false
                },
                "sortOrder": {
                    "type": "integer",
                    "description": "Order for display sorting (lower values first)",
                    "minimum": 0
                }
            },
            "required": ["id", "name", "description", "baseMonsterId", "phases"],
            "additionalProperties": false
        },
        "BossPhase": {
            "type": "object",
            "description": "A boss combat phase with specific behavior and abilities",
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier for the phase within this boss",
                    "pattern": "^[a-z][a-z0-9_]*$",
                    "minLength": 1,
                    "maxLength": 50
                },
                "name": {
                    "type": "string",
                    "description": "Display name for the phase (e.g., 'Phase 1', 'Enraged Form')",
                    "minLength": 1,
                    "maxLength": 100
                },
                "healthThresholdPercent": {
                    "type": "number",
                    "description": "Health percentage at which this phase activates (100 = full health, 0 = death)",
                    "minimum": 0,
                    "maximum": 100
                },
                "behavior": {
                    "type": "string",
                    "description": "AI behavior pattern for this phase",
                    "enum": ["Aggressive", "Defensive", "Tactical", "Berserk", "Summoner"]
                },
                "abilityIds": {
                    "type": "array",
                    "description": "Abilities available during this phase",
                    "items": {
                        "type": "string",
                        "pattern": "^[a-z][a-z0-9_]*$"
                    }
                },
                "abilityRotation": {
                    "type": "array",
                    "description": "Fixed ability rotation order (optional, overrides random selection)",
                    "items": {
                        "type": "string",
                        "pattern": "^[a-z][a-z0-9_]*$"
                    }
                },
                "statModifiers": {
                    "$ref": "#/definitions/StatModifiers",
                    "description": "Stat modifications applied during this phase"
                },
                "transitionAnnouncement": {
                    "type": "string",
                    "description": "Text displayed when transitioning to this phase"
                },
                "transitionEffect": {
                    "type": "string",
                    "description": "Visual effect ID played on phase transition",
                    "pattern": "^[a-z][a-z0-9_]*$"
                }
            },
            "required": ["id", "name", "healthThresholdPercent", "behavior"],
            "additionalProperties": false
        },
        "EnrageConfig": {
            "type": "object",
            "description": "Configuration for boss enrage mechanics",
            "properties": {
                "triggerType": {
                    "type": "string",
                    "description": "What triggers the enrage state",
                    "enum": ["Timer", "HealthPercent", "TurnCount", "AllyDeath"]
                },
                "triggerValue": {
                    "type": "number",
                    "description": "Value for the trigger (seconds, percent, turns, or N/A for AllyDeath)"
                },
                "statMultipliers": {
                    "type": "object",
                    "description": "Stat multipliers applied when enraged",
                    "properties": {
                        "attack": {
                            "type": "number",
                            "description": "Attack multiplier (1.5 = +50%)",
                            "minimum": 0.1
                        },
                        "defense": {
                            "type": "number",
                            "description": "Defense multiplier",
                            "minimum": 0.1
                        },
                        "speed": {
                            "type": "number",
                            "description": "Speed multiplier",
                            "minimum": 0.1
                        }
                    },
                    "additionalProperties": false
                },
                "additionalAbilityIds": {
                    "type": "array",
                    "description": "Abilities unlocked when enraged",
                    "items": {
                        "type": "string",
                        "pattern": "^[a-z][a-z0-9_]*$"
                    }
                },
                "announcement": {
                    "type": "string",
                    "description": "Text displayed when enrage triggers"
                }
            },
            "required": ["triggerType", "triggerValue", "statMultipliers"],
            "additionalProperties": false
        },
        "SummonConfig": {
            "type": "object",
            "description": "Configuration for boss minion summoning",
            "properties": {
                "monsterId": {
                    "type": "string",
                    "description": "Monster ID to summon (references monsters.json)",
                    "pattern": "^[a-z][a-z0-9_]*$"
                },
                "count": {
                    "$ref": "#/definitions/QuantityRange",
                    "description": "Number of monsters to summon"
                },
                "triggerType": {
                    "type": "string",
                    "description": "What triggers the summon",
                    "enum": ["PhaseStart", "Timer", "HealthPercent", "Random"]
                },
                "triggerValue": {
                    "type": "number",
                    "description": "Value for the trigger (contextual based on triggerType)"
                },
                "cooldownTurns": {
                    "type": "integer",
                    "description": "Turns between summons",
                    "minimum": 0
                },
                "maxActive": {
                    "type": "integer",
                    "description": "Maximum number of active summons at once",
                    "minimum": 1
                },
                "announcement": {
                    "type": "string",
                    "description": "Text displayed when summoning"
                }
            },
            "required": ["monsterId", "count", "triggerType"],
            "additionalProperties": false
        },
        "VulnerabilityWindow": {
            "type": "object",
            "description": "Configuration for boss vulnerability periods",
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier for this vulnerability window",
                    "pattern": "^[a-z][a-z0-9_]*$"
                },
                "triggerType": {
                    "type": "string",
                    "description": "What triggers the vulnerability window",
                    "enum": ["AfterAbility", "PhaseTransition", "Timer", "HealthPercent"]
                },
                "triggerValue": {
                    "oneOf": [
                        { "type": "string" },
                        { "type": "number" }
                    ],
                    "description": "Ability ID, phase ID, seconds, or health percent depending on triggerType"
                },
                "durationTurns": {
                    "type": "integer",
                    "description": "How many turns the vulnerability lasts",
                    "minimum": 1
                },
                "damageMultiplier": {
                    "type": "number",
                    "description": "Damage multiplier during vulnerability (2.0 = double damage)",
                    "minimum": 1.0,
                    "default": 2.0
                },
                "announcement": {
                    "type": "string",
                    "description": "Text displayed when vulnerability window opens"
                }
            },
            "required": ["id", "triggerType", "triggerValue", "durationTurns"],
            "additionalProperties": false
        },
        "BossAnnouncement": {
            "type": "object",
            "description": "Configuration for boss dialogue/announcements",
            "properties": {
                "trigger": {
                    "type": "string",
                    "description": "What triggers this announcement",
                    "enum": ["BattleStart", "PhaseTransition", "Enrage", "LowHealth", "Victory", "Summon"]
                },
                "triggerValue": {
                    "oneOf": [
                        { "type": "string" },
                        { "type": "number" }
                    ],
                    "description": "Phase ID, health percent, or N/A depending on trigger"
                },
                "text": {
                    "type": "string",
                    "description": "The announcement text to display",
                    "minLength": 1
                }
            },
            "required": ["trigger", "text"],
            "additionalProperties": false
        },
        "QuantityRange": {
            "type": "object",
            "description": "A range of values with minimum and maximum",
            "properties": {
                "min": {
                    "type": "integer",
                    "description": "Minimum value",
                    "minimum": 1
                },
                "max": {
                    "type": "integer",
                    "description": "Maximum value",
                    "minimum": 1
                }
            },
            "required": ["min", "max"],
            "additionalProperties": false
        },
        "StatModifiers": {
            "type": "object",
            "description": "Stat modifications applied to the boss during a phase",
            "properties": {
                "maxHealth": {
                    "type": "integer",
                    "description": "Flat modifier to max health"
                },
                "attack": {
                    "type": "integer",
                    "description": "Flat modifier to attack"
                },
                "defense": {
                    "type": "integer",
                    "description": "Flat modifier to defense"
                },
                "speed": {
                    "type": "integer",
                    "description": "Flat modifier to speed"
                },
                "criticalChance": {
                    "type": "number",
                    "description": "Modifier to critical hit chance (0.1 = +10%)"
                },
                "criticalDamage": {
                    "type": "number",
                    "description": "Modifier to critical damage multiplier"
                },
                "damageReduction": {
                    "type": "number",
                    "description": "Flat damage reduction amount"
                }
            },
            "additionalProperties": false
        }
    }
}
```

---

## 12. Configuration File

### bosses.json with Example Bosses

**File:** `config/bosses.json`

```json
{
    "$schema": "./schemas/bosses.schema.json",
    "description": "Boss encounter definitions for v0.14.3d",
    "bosses": [
        {
            "id": "skeleton-king",
            "name": "Skeleton King",
            "title": "Lord of Bones",
            "description": "An ancient monarch raised from the dead, commanding legions of skeletal warriors. His power grows as his army falls.",
            "baseMonsterId": "skeleton_warrior",
            "baseHealth": 500,
            "phases": [
                {
                    "id": "phase_1",
                    "name": "Phase 1",
                    "healthThresholdPercent": 100,
                    "behavior": "Tactical",
                    "abilityIds": ["bone_throw", "shield_bash"],
                    "transitionAnnouncement": "You dare challenge me?"
                },
                {
                    "id": "phase_2",
                    "name": "Summoner Phase",
                    "healthThresholdPercent": 60,
                    "behavior": "Summoner",
                    "abilityIds": ["summon_skeletons", "dark_wave"],
                    "transitionAnnouncement": "Rise, my minions!",
                    "transitionEffect": "dark_summon"
                },
                {
                    "id": "phase_3",
                    "name": "Final Stand",
                    "healthThresholdPercent": 30,
                    "behavior": "Berserk",
                    "abilityIds": ["bone_storm", "death_strike"],
                    "statModifiers": {
                        "attack": 10,
                        "speed": 5
                    },
                    "transitionAnnouncement": "ENOUGH! I will destroy you all!",
                    "transitionEffect": "bone_explosion"
                }
            ],
            "enrage": {
                "triggerType": "Timer",
                "triggerValue": 300,
                "statMultipliers": {
                    "attack": 1.5,
                    "speed": 1.25
                },
                "additionalAbilityIds": ["enraged_strike"],
                "announcement": "The Skeleton King's rage knows no bounds!"
            },
            "summons": [
                {
                    "monsterId": "skeleton",
                    "count": { "min": 2, "max": 4 },
                    "triggerType": "PhaseStart",
                    "cooldownTurns": 3,
                    "maxActive": 6,
                    "announcement": "Minions, to me!"
                }
            ],
            "vulnerabilityWindows": [
                {
                    "id": "post_bone_storm",
                    "triggerType": "AfterAbility",
                    "triggerValue": "bone_storm",
                    "durationTurns": 2,
                    "damageMultiplier": 2.0,
                    "announcement": "The Skeleton King is exhausted!"
                }
            ],
            "announcements": [
                {
                    "trigger": "BattleStart",
                    "text": "You dare enter my domain, mortal?"
                },
                {
                    "trigger": "LowHealth",
                    "triggerValue": 10,
                    "text": "This... cannot be..."
                },
                {
                    "trigger": "Victory",
                    "text": "Your bones will join my army..."
                }
            ],
            "uniqueLootTableId": "skeleton_king_loot",
            "musicTrackId": "boss_skeleton_king",
            "arenaRequirements": {
                "minWidth": 15,
                "minHeight": 15
            },
            "sortOrder": 0
        },
        {
            "id": "shadow-weaver",
            "name": "Shadow Weaver",
            "title": "Mistress of Darkness",
            "description": "A corrupted mage who traded her soul for mastery over shadow magic. She strikes from the darkness, vanishing before retaliation.",
            "baseMonsterId": "dark_mage",
            "baseHealth": 350,
            "phases": [
                {
                    "id": "phase_1",
                    "name": "Shadow Dance",
                    "healthThresholdPercent": 100,
                    "behavior": "Tactical",
                    "abilityIds": ["shadow_bolt", "fade_away", "dark_binding"],
                    "transitionAnnouncement": "The shadows welcome you..."
                },
                {
                    "id": "phase_2",
                    "name": "Desperation",
                    "healthThresholdPercent": 40,
                    "behavior": "Aggressive",
                    "abilityIds": ["shadow_storm", "life_drain", "dark_nova"],
                    "statModifiers": {
                        "criticalChance": 0.15
                    },
                    "transitionAnnouncement": "You will drown in darkness!",
                    "transitionEffect": "shadow_burst"
                }
            ],
            "enrage": {
                "triggerType": "TurnCount",
                "triggerValue": 25,
                "statMultipliers": {
                    "attack": 1.75,
                    "speed": 1.5
                },
                "announcement": "The shadows consume all!"
            },
            "vulnerabilityWindows": [
                {
                    "id": "post_fade",
                    "triggerType": "AfterAbility",
                    "triggerValue": "fade_away",
                    "durationTurns": 1,
                    "damageMultiplier": 1.5,
                    "announcement": "The Shadow Weaver rematerializes!"
                }
            ],
            "announcements": [
                {
                    "trigger": "BattleStart",
                    "text": "Step into my web of shadows..."
                },
                {
                    "trigger": "Enrage",
                    "text": "The darkness grows hungry!"
                }
            ],
            "uniqueLootTableId": "shadow_weaver_loot",
            "musicTrackId": "boss_shadow_weaver",
            "sortOrder": 1
        },
        {
            "id": "stone-guardian",
            "name": "Stone Guardian",
            "title": "Ancient Protector",
            "description": "A massive golem awakened from millennia of slumber to protect an ancient treasure. Its stone form makes it nearly impervious to damage.",
            "baseMonsterId": "golem",
            "baseHealth": 800,
            "phases": [
                {
                    "id": "phase_1",
                    "name": "Dormant Defense",
                    "healthThresholdPercent": 100,
                    "behavior": "Defensive",
                    "abilityIds": ["stone_slam", "fortify"],
                    "statModifiers": {
                        "defense": 20,
                        "damageReduction": 5
                    }
                },
                {
                    "id": "phase_2",
                    "name": "Awakened",
                    "healthThresholdPercent": 70,
                    "behavior": "Aggressive",
                    "abilityIds": ["boulder_toss", "earthquake", "stone_slam"],
                    "transitionAnnouncement": "INTRUDERS... DETECTED...",
                    "transitionEffect": "stone_crack"
                },
                {
                    "id": "phase_3",
                    "name": "Crumbling Fury",
                    "healthThresholdPercent": 30,
                    "behavior": "Berserk",
                    "abilityIds": ["earthquake", "collapse", "desperate_slam"],
                    "transitionAnnouncement": "MUST... PROTECT... TREASURE...",
                    "transitionEffect": "stone_crumble"
                }
            ],
            "enrage": {
                "triggerType": "HealthPercent",
                "triggerValue": 15,
                "statMultipliers": {
                    "attack": 2.0,
                    "defense": 0.5
                },
                "announcement": "SYSTEMS... FAILING... MAXIMUM... POWER..."
            },
            "vulnerabilityWindows": [
                {
                    "id": "phase_transition_vuln",
                    "triggerType": "PhaseTransition",
                    "triggerValue": "phase_2",
                    "durationTurns": 2,
                    "damageMultiplier": 1.5,
                    "announcement": "The Stone Guardian's defenses weaken!"
                },
                {
                    "id": "post_earthquake",
                    "triggerType": "AfterAbility",
                    "triggerValue": "earthquake",
                    "durationTurns": 1,
                    "damageMultiplier": 1.25,
                    "announcement": "The guardian stumbles!"
                }
            ],
            "announcements": [
                {
                    "trigger": "BattleStart",
                    "text": "HALT... NONE... SHALL... PASS..."
                },
                {
                    "trigger": "LowHealth",
                    "triggerValue": 20,
                    "text": "STRUCTURAL... INTEGRITY... COMPROMISED..."
                }
            ],
            "uniqueLootTableId": "stone_guardian_loot",
            "musicTrackId": "boss_stone_guardian",
            "arenaRequirements": {
                "minWidth": 20,
                "minHeight": 20,
                "requiredTerrain": ["stone_floor"]
            },
            "sortOrder": 2
        }
    ]
}
```

---

## 13. Data Model Changes

### No Domain Changes Required

This phase creates only a JSON Schema file and a configuration file. No changes to domain entities, services, or application layer are required.

| Layer | Changes |
|-------|---------|
| Domain | None |
| Application | None |
| Infrastructure | None |
| Configuration | One schema file added, one config file created |

### Schema as Documentation

The schema serves as:
- **Validation contract** for boss configuration
- **IDE documentation** via description fields
- **Modding reference** for custom boss encounters
- **Design specification** for boss mechanics

---

## 14. Logging Specifications

### No Runtime Logging Required

Schema validation occurs at design-time in IDE/editors, not at runtime. No logging infrastructure changes are needed for this phase.

| Component | Level | Events |
|-----------|-------|--------|
| N/A | N/A | Schema validation is IDE-based |

---

## 15. Unit Testing Requirements

### Test Count by Feature

| Feature | Test Count |
|---------|------------|
| Schema Valid Structure | ~1 |
| Boss Definition Validation | ~1 |
| Phase Array Minimum Validation | ~1 |
| Health Threshold Range Validation | ~1 |
| Configuration File Validation | ~1 |
| **Total** | **~5** |

### Test Descriptions

#### BossesSchemaTests.cs

```csharp
[TestFixture]
public class BossesSchemaTests
{
    /// <summary>
    /// Verifies the schema file is valid JSON Schema Draft-07.
    /// </summary>
    [Test]
    public void Schema_IsValidJsonSchemaDraft07();

    /// <summary>
    /// Verifies the bosses.json validates against the schema without errors.
    /// </summary>
    [Test]
    public void BossesJson_ValidatesAgainstSchema();

    /// <summary>
    /// Verifies phases array must have at least 1 item.
    /// </summary>
    [Test]
    public void Phases_EmptyArray_FailsValidation();

    /// <summary>
    /// Verifies health threshold must be between 0 and 100.
    /// </summary>
    [Test]
    public void HealthThreshold_OutOfRange_FailsValidation();

    /// <summary>
    /// Verifies behavior must be one of the valid enum values.
    /// </summary>
    [Test]
    public void Behavior_InvalidEnum_FailsValidation();
}
```

### Test Implementation Notes

Tests should use a JSON Schema validation library (e.g., `NJsonSchema` for C#) to:
1. Load the schema file
2. Validate test JSON documents
3. Assert expected validation results

---

## 16. Use Cases

### UC-001: Load Boss Configuration

**Actor:** Game System
**Flow:** System starts -> Loads `bosses.json` -> Schema validates content -> Bosses available for encounters

### UC-002: Edit Bosses in IDE

**Actor:** Developer/Modder
**Flow:** Opens `bosses.json` in VS Code -> IDE loads schema -> Autocomplete suggests properties -> Validation errors shown inline

### UC-003: Add New Boss

**Actor:** Modder
**Flow:** Adds new boss to `bosses` array -> Sets id, name, baseMonsterId -> Defines phases -> Optionally configures enrage, summons, vulnerability windows -> IDE validates structure

### UC-004: Configure Multi-Phase Boss

**Actor:** Modder
**Flow:** Defines phase 1 at 100% threshold -> Defines phase 2 at 60% threshold -> Defines phase 3 at 30% threshold -> Sets behaviors and abilities for each -> IDE validates thresholds in range

### UC-005: Configure Boss Enrage Timer

**Actor:** Modder
**Flow:** Adds enrage configuration -> Sets triggerType to "Timer" -> Sets triggerValue to 300 (5 minutes) -> Configures stat multipliers -> Optionally adds announcement

### UC-006: Invalid Health Threshold

**Actor:** Modder
**Flow:** Sets healthThresholdPercent to 150 (invalid) -> IDE shows error "healthThresholdPercent must be between 0 and 100" -> Modder corrects to valid value

---

## 17. Deliverable Checklist

### Schema Files
- [ ] `config/schemas/bosses.schema.json` created
- [ ] Schema follows JSON Schema Draft-07 format
- [ ] Schema includes all 6 definitions (BossDefinition, BossPhase, EnrageConfig, SummonConfig, VulnerabilityWindow, BossAnnouncement)
- [ ] Schema includes QuantityRange and StatModifiers definitions

### Validation Rules
- [ ] Boss ID pattern validation: `^[a-z][a-z0-9_-]*$` (allows hyphens)
- [ ] Phase ID pattern validation: `^[a-z][a-z0-9_]*$`
- [ ] Health threshold validation (0-100)
- [ ] Behavior enum validation (5 values)
- [ ] Enrage trigger type validation (4 values)
- [ ] Summon trigger type validation (4 values)
- [ ] Vulnerability trigger type validation (4 values)
- [ ] Announcement trigger validation (6 values)
- [ ] Phase array minimum validation (minItems: 1)
- [ ] Required fields enforced for all definitions
- [ ] Range validations for numeric properties

### Configuration Files
- [ ] `bosses.json` created with 2-3 example bosses
- [ ] All bosses validate against schema
- [ ] Example bosses demonstrate all features (phases, enrage, summons, vulnerability, announcements)

### Testing
- [ ] ~5 unit tests implemented
- [ ] All tests passing
- [ ] Tests cover happy path and error cases

### Documentation
- [ ] Schema properties have descriptions
- [ ] This design specification complete

---

## 18. Acceptance Criteria

### Functional
- [ ] `bosses.schema.json` created in `config/schemas/` directory
- [ ] Schema validates sample boss definitions without errors
- [ ] Phase array validated (minimum 1 phase)
- [ ] Health threshold validated (0-100%)
- [ ] Phase behavior enum validated (5 values)
- [ ] Enrage config validated with trigger types (4 values)
- [ ] Summon config validated with quantity ranges
- [ ] Vulnerability window validated with duration (>= 1)
- [ ] Announcements validated with trigger types (6 values)
- [ ] Base monster reference validated as string
- [ ] Unique loot table reference validated as string
- [ ] VS Code provides autocomplete when schema linked

### Quality
- [ ] Build succeeds with 0 errors
- [ ] Build succeeds with 0 warnings
- [ ] ~5 unit tests pass
- [ ] Schema file is valid JSON
- [ ] All schema properties have descriptions

---

## 19. Dependencies

### Required from Prior Versions

| Type | Location | Usage in this phase |
|------|----------|---------------------|
| Monster Schema | `config/schemas/monsters.schema.json` | baseMonsterId references |
| Monster Config | `config/monsters.json` | Provides monster IDs for baseMonsterId |
| Loot Tables Schema | `config/schemas/loot-tables.schema.json` | uniqueLootTableId references |
| Traits Schema | `config/schemas/traits.schema.json` | StatModifiers pattern reference |

### Provides to Future Versions

| Type | Usage |
|------|-------|
| `bosses.schema.json` | Validates boss configuration |
| `bosses.json` | Boss encounter definitions |
| BossDefinition pattern | Reference for boss encounter system |
| BossPhase pattern | Reference for phase transition system |

### Implementation Order Note

**v0.14.3d should be implemented after v0.14.3a (Monster Schema)** as boss definitions reference monster IDs via `baseMonsterId` and summon configurations.

---

## 20. Future Considerations

### Deferred to Future Versions

- **Cross-reference validation**: Validating baseMonsterId exists in monsters.json
- **Phase transition execution**: Runtime phase change logic
- **Enrage timer execution**: Runtime enrage mechanics
- **Summon spawning logic**: Runtime minion spawning
- **Vulnerability window execution**: Runtime damage multiplier application
- **Announcement display system**: UI for boss dialogue

### Out of Scope

- **Monster schema** (v0.14.3a) - Defines monsters that bosses reference
- **Trait schema** (v0.14.3b) - Traits that may apply to summoned minions
- **Tier schema** (v0.14.3c) - Tiers that may apply to bosses or summons
- **Runtime boss AI**: Application-level boss behavior (domain logic)
- **Boss balance tuning**: Specific stat values (design decisions)

### Potential Future Enhancements

If the boss system expands, consider adding to the schema:

**Difficulty Scaling:**
```json
"difficultyScaling": {
    "type": "object",
    "description": "Scaling modifiers based on party size or difficulty setting",
    "properties": {
        "healthPerPlayer": {
            "type": "number",
            "description": "Health multiplier per additional player"
        },
        "damagePerPlayer": {
            "type": "number",
            "description": "Damage multiplier per additional player"
        }
    }
}
```

**Immunity Phases:**
```json
"immunityPhases": {
    "type": "array",
    "description": "Periods where boss is immune to damage",
    "items": {
        "type": "object",
        "properties": {
            "triggerType": { "type": "string" },
            "durationTurns": { "type": "integer" },
            "interruptCondition": { "type": "string" }
        }
    }
}
```

**Loot Modifier by Phase:**
```json
"phaseLootModifiers": {
    "type": "object",
    "description": "Bonus loot for defeating boss in specific phases",
    "properties": {
        "phase_1_defeat": { "type": "number" },
        "no_enrage_bonus": { "type": "number" }
    }
}
```

**Environmental Hazards:**
```json
"environmentalHazards": {
    "type": "array",
    "description": "Hazards active during the fight",
    "items": {
        "type": "object",
        "properties": {
            "hazardId": { "type": "string" },
            "activePhases": { "type": "array", "items": { "type": "string" } },
            "damage": { "type": "integer" }
        }
    }
}
```

**Achievement Triggers:**
```json
"achievements": {
    "type": "array",
    "description": "Achievements that can be earned during this fight",
    "items": {
        "type": "object",
        "properties": {
            "achievementId": { "type": "string" },
            "condition": { "type": "string" }
        }
    }
}
```

**Reward Tiers:**
```json
"rewardTiers": {
    "type": "array",
    "description": "Tiered rewards based on performance",
    "items": {
        "type": "object",
        "properties": {
            "tierId": { "type": "string" },
            "condition": { "type": "string" },
            "lootTableId": { "type": "string" }
        }
    }
}
```

---

*Document Version: 1.0*
*Last Updated: 2026-01-17*
*Author: Claude*
