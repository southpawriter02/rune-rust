# v0.16.1c Changelog - Archetype Proficiency Matrix

## Summary

Implements the **Archetype Proficiency Matrix** that establishes which weapon categories each character archetype is naturally proficient with. This creates archetype identity through distinct combat capabilities without requiring individual weapon-by-weapon proficiency tracking.

## Archetype Proficiency Matrix

| Category         | Warrior | Skirmisher | Mystic | Adept |
| ---------------- | :-----: | :--------: | :----: | :---: |
| Axes             |    ✓    |     ✓      |   ✗    |   ✗   |
| Swords           |    ✓    |     ✓      |   ✗    |   ✗   |
| Hammers          |    ✓    |     ✗      |   ✗    |   ✓   |
| Daggers          |    ✓    |     ✓      |   ✓    |   ✓   |
| Polearms         |    ✓    |     ✗      |   ✗    |   ✗   |
| Staves           |    ✓    |     ✗      |   ✓    |   ✓   |
| Bows             |    ✓    |     ✓      |   ✗    |   ✗   |
| Crossbows        |    ✓    |     ✓      |   ✗    |   ✓   |
| Shields          |    ✓    |     ✗      |   ✗    |   ✗   |
| Firearms         |    ✓    |     ✗      |   ✗    |   ✗   |
| ArcaneImplements |    ✓    |     ✗      |   ✓    |   ✗   |
| **Total**        | **11**  |   **5**    | **3**  | **4** |

✓ = Proficient (starts with `Proficient` level)  
✗ = NonProficient (starts with `NonProficient` level: -3 attack, -2 damage)

## Added

### Domain Layer - Entities (1 file)

| File                         | Description                                                                                    |
| ---------------------------- | ---------------------------------------------------------------------------------------------- |
| `ArchetypeProficiencySet.cs` | Entity defining weapon category proficiencies for a character archetype with helper properties |

#### ArchetypeProficiencySet Features

- **Properties**: `Id`, `ArchetypeId`, `DisplayName`, `Description`, `ProficientCategories`
- **Methods**: `IsProficientWith(category)`, `GetStartingLevel(category)`, `GetProficientCategoryCount()`, `GetNonProficientCategories()`
- **Derived Properties**: `IsVersatile` (7+ categories), `IsSpecialist` (3 or fewer), `IsProficientWithAllWeapons`
- **Factory Method**: `Create()` with validation and lowercase normalization

### Application Layer - Interfaces (1 file)

| File                               | Description                                                           |
| ---------------------------------- | --------------------------------------------------------------------- |
| `IArchetypeProficiencyProvider.cs` | Interface for archetype proficiency matrix data access and validation |

#### IArchetypeProficiencyProvider Methods

| Method                          | Description                                      |
| ------------------------------- | ------------------------------------------------ |
| `GetProficiencySet()`           | Get proficiency set for specific archetype       |
| `GetAllProficiencySets()`       | Get all 4 archetype proficiency sets             |
| `IsProficient()`                | Check if archetype is proficient with category   |
| `GetStartingProficiencyLevel()` | Get starting level (Proficient or NonProficient) |
| `GetProficientCategories()`     | Get list of proficient categories                |
| `GetNonProficientCategories()`  | Get list of non-proficient categories            |
| `GetProficientCategoryCount()`  | Get count of proficient categories               |
| `ValidateConfiguration()`       | Validate all archetypes are configured           |

### Configuration (2 files)

| File                                                 | Description                                       |
| ---------------------------------------------------- | ------------------------------------------------- |
| `config/archetype-proficiencies.json`                | Proficiency definitions for all 4 archetypes      |
| `config/schemas/archetype-proficiencies.schema.json` | JSON Schema draft-07 for configuration validation |

### Unit Tests (1 file)

| File                              | Tests                                                                             |
| --------------------------------- | --------------------------------------------------------------------------------- |
| `ArchetypeProficiencySetTests.cs` | Factory validation, proficiency checking, derived properties, ToString formatting |

## Archetype Classification

| Archetype  | Classification | Description                                |
| ---------- | -------------- | ------------------------------------------ |
| Warrior    | Versatile      | Master of arms (11 proficiencies)          |
| Skirmisher | Balanced       | Light weapons specialist (5 proficiencies) |
| Adept      | Balanced       | Hybrid combatant (4 proficiencies)         |
| Mystic     | Specialist     | Arcane focus only (3 proficiencies)        |

## Files Changed

### Added (5 files)

- `src/Core/RuneAndRust.Domain/Entities/ArchetypeProficiencySet.cs`
- `src/Core/RuneAndRust.Application/Interfaces/IArchetypeProficiencyProvider.cs`
- `config/archetype-proficiencies.json`
- `config/schemas/archetype-proficiencies.schema.json`
- `tests/RuneAndRust.Domain.UnitTests/Entities/ArchetypeProficiencySetTests.cs`

## Dependencies

### Requires from v0.16.1a

- `WeaponProficiencyLevel` enum for `GetStartingLevel()` return type

### Requires from v0.16.1b

- `WeaponCategory` enum for `ProficientCategories` list

### Provides to v0.16.1d

- `ArchetypeProficiencySet` for character proficiency initialization
- `IArchetypeProficiencyProvider` for character creation queries

### Provides to v0.16.1f

- `IArchetypeProficiencyProvider` for combat proficiency checks

## Logging Specifications

| Component                      | Level       | Events                                    |
| ------------------------------ | ----------- | ----------------------------------------- |
| `ArchetypeProficiencyProvider` | Information | Configuration loaded, validation complete |
| `ArchetypeProficiencyProvider` | Debug       | Proficiency lookup, category query        |
| `ArchetypeProficiencyProvider` | Warning     | Missing archetype, invalid archetype ID   |
| `ArchetypeProficiencyProvider` | Error       | Configuration not found, invalid JSON     |

## Notes

- `ArchetypeProficiencyProvider` implementation deferred to later sub-version
- Archetype ID is normalized to lowercase during `Create()` for consistent lookups
- Duplicate categories are automatically removed during creation
- `IsVersatile` threshold: 7+ categories
- `IsSpecialist` threshold: 3 or fewer categories
- Only Warrior archetype has `IsProficientWithAllWeapons = true`
