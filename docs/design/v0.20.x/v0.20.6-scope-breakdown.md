# v0.20.6 Scope Breakdown: Bone-Setter

**Version:** 0.20.6
**Theme:** Bone-Setter Specialization Implementation
**Prerequisites:** v0.20.5 Complete (Berserkr Specialization)
**Total Estimated Tests:** ~25 new tests

---

## Executive Summary

v0.20.6 implements the **Bone-Setter** specialization — the healer and trauma care specialist for the Adept archetype. The Bone-Setter is the **first dedicated healing specialization** in the v0.20.x series and follows the **Coherent path**, meaning no Corruption risk. These practitioners combine traditional medicine with salvaged medical knowledge, treating wounds with steady hands and practical expertise. Their abilities emphasize party support, condition removal, and keeping allies alive through Aethelgard's dangers.

> _"The body knows how to heal. I merely remind it."_

The work is divided into **3 sub-phases**:

| Phase    | Name                         | Focus                                                             | Est. Tests |
| -------- | ---------------------------- | ----------------------------------------------------------------- | ---------- |
| v0.20.6a | Framework & Tier 1 Abilities | Medical Supplies resource, Field Dressing, Diagnose, Steady Hands | ~10        |
| v0.20.6b | Tier 2 Abilities             | Emergency Surgery, Antidote Craft, Triage                         | ~8         |
| v0.20.6c | Tier 3 Abilities & Capstone  | Resuscitate, Preventive Care, Miracle Worker                      | ~7         |

---

## Specialization Profile

### Bone-Setter Identity

| Attribute            | Value                                   |
| -------------------- | --------------------------------------- |
| **Display Name**     | Bone-Setter                             |
| **Pronunciation**    | BONE-set-ur                             |
| **Translation**      | Traditional Healer / Physician          |
| **Archetype**        | Adept                                   |
| **Path Type**        | Coherent                                |
| **Role**             | Healer / Medicine / Trauma Care         |
| **Special Resource** | Medical Supplies (consumable inventory) |
| **Tagline**          | "Keeper of Life"                        |

### Thematic Elements

The Bone-Setter represents the practical, grounded approach to survival in Aethelgard. While others channel dark powers or ancient magic, the Bone-Setter relies on knowledge, skill, and medical supplies salvaged from the World-Machine's ruins. They are the ones who patch wounds after battle, cure poisons, and drag allies back from the brink of death. In a world where Corruption threatens those who seek power through Heretical means, the Bone-Setter offers a safe, reliable path to keeping others alive.

**Design Principles:**

1. **Coherent Safety**: No Corruption risk — healing through skill, not dark power
2. **Resource Management**: Medical Supplies are consumable and must be replenished
3. **Party Support Focus**: Most abilities benefit allies, not self
4. **Condition Removal**: Specializes in curing negative status effects
5. **First Dedicated Healer**: Establishes healing patterns for future support specializations

### Coherent Path — No Corruption

As a Coherent path specialization, the Bone-Setter has no Corruption risk:

| Trigger                  | Corruption Risk |
| ------------------------ | --------------- |
| Any ability use          | None            |
| Healing Heretical allies | None            |
| Using Medical Supplies   | None            |
| Capstone use             | None            |

---

## Feature Analysis & Categorization

### From v0.20.x-overview.md — Ability Tier Structure

| Ability           | Tier | Type     | Complexity | Assigned Phase |
| ----------------- | ---- | -------- | ---------- | -------------- |
| Field Dressing    | T1   | Active   | Medium     | **v0.20.6a**   |
| Diagnose          | T1   | Active   | Low        | **v0.20.6a**   |
| Steady Hands      | T1   | Passive  | Low        | **v0.20.6a**   |
| Emergency Surgery | T2   | Active   | High       | **v0.20.6b**   |
| Antidote Craft    | T2   | Active   | Medium     | **v0.20.6b**   |
| Triage            | T2   | Passive  | Medium     | **v0.20.6b**   |
| Resuscitate       | T3   | Active   | High       | **v0.20.6c**   |
| Preventive Care   | T3   | Passive  | Low        | **v0.20.6c**   |
| Miracle Worker    | Cap  | Ultimate | High       | **v0.20.6c**   |

### From v0.20.x-overview.md — Special Resource

| Feature                                | Complexity | Dependencies          | Assigned Phase |
| -------------------------------------- | ---------- | --------------------- | -------------- |
| Medical Supplies (consumable)          | Medium     | Inventory System      | **v0.20.6a**   |
| Supply acquisition (salvage, purchase) | Medium     | Loot/Commerce Systems | **v0.20.6a**   |
| Supply spending                        | Low        | Ability execution     | **v0.20.6a**   |
| Antidote crafting from salvage         | Medium     | Crafting System       | **v0.20.6b**   |

---

## Phase Definitions

---

## v0.20.6a: Framework & Tier 1 Abilities

[v0.20.6a Design Specification](v0.20.6a-design-specification.md)

### Overview

This phase establishes the Bone-Setter specialization framework including the Medical Supplies consumable resource system and implements the three Tier 1 abilities that define the core healer identity: basic wound treatment, enemy assessment, and enhanced medical skill.

### Scope

**In Scope:**

- `BoneSetterSpecialization` registration with v0.17.4 framework
- `MedicalSuppliesResource` special resource implementation (consumable inventory)
- Medical Supplies acquisition and tracking
- Field Dressing active ability (heal 2d6 HP, costs 1 Supply)
- Diagnose active ability (reveal enemy HP and status effects)
- Steady Hands passive ability (+2 to all medical checks)
- Ability slot initialization for Bone-Setter
- Configuration entries in `specializations.json` and `abilities.json`

**Out of Scope:**

- Tier 2 abilities (v0.20.6b)
- Tier 3 abilities and Capstone (v0.20.6c)
- Other specialization implementations (v0.20.7+)

### Key Deliverables

| Type                    | Count | Details                                                                                 |
| ----------------------- | ----- | --------------------------------------------------------------------------------------- |
| Domain Value Objects    | 4     | `MedicalSuppliesResource`, `MedicalSupplyItem`, `FieldDressingResult`, `DiagnoseResult` |
| Domain Enums            | 3     | `BoneSetterAbilityId`, `MedicalSupplyType`, `WoundSeverity`                             |
| Application Services    | 2     | `MedicalSuppliesService`, `BoneSetterAbilityService`                                    |
| Ability Implementations | 3     | Field Dressing, Diagnose, Steady Hands                                                  |
| Configuration           | 2     | `specializations.json` updates, `abilities.json` updates                                |
| Unit Tests              | ~10   |                                                                                         |

### Data Model Changes

```
NEW: MedicalSuppliesResource (Value Object)
├── Supplies: IReadOnlyList<MedicalSupplyItem>
├── TotalSupplyCount: int (computed)
├── MaxCarryCapacity: int (default 10)
├── LastRestockedAt: DateTime?
└── Methods:
    ├── Spend(int amount): bool
    ├── SpendSpecific(MedicalSupplyType type): bool
    ├── Add(MedicalSupplyItem item): bool
    ├── AddMultiple(IEnumerable<MedicalSupplyItem> items): int
    ├── GetCount(): int
    ├── GetCountByType(MedicalSupplyType type): int
    ├── HasSupply(MedicalSupplyType type): bool
    └── CanCarryMore(): bool

NEW: MedicalSupplyItem (Value Object)
├── ItemId: Guid
├── SupplyType: MedicalSupplyType
├── Name: string
├── Description: string
├── Quality: int (1-5, affects healing)
├── AcquiredAt: DateTime
├── Source: string (salvage, purchase, craft)
└── Methods:
    ├── GetHealingBonus(): int
    ├── GetDescription(): string
    └── IsExpired(): bool

NEW: FieldDressingResult (Value Object)
├── TargetId: Guid
├── TargetName: string
├── HpBefore: int
├── HealingRoll: int (2d6)
├── QualityBonus: int
├── SteadyHandsBonus: int
├── TotalHealing: int
├── HpAfter: int
├── SuppliesUsed: int (1)
├── SuppliesRemaining: int
└── Methods:
    ├── GetHealingBreakdown(): string
    ├── WasFullHeal(): bool
    └── GetEfficiency(): float

NEW: DiagnoseResult (Value Object)
├── TargetId: Guid
├── TargetName: string
├── CurrentHp: int
├── MaxHp: int
├── HpPercentage: float
├── IsBloodied: bool
├── StatusEffects: IReadOnlyList<StatusEffectInfo>
├── Vulnerabilities: IReadOnlyList<string>
├── Resistances: IReadOnlyList<string>
├── DiagnosedAt: DateTime
└── Methods:
    ├── GetHealthDescription(): string
    ├── GetStatusSummary(): string
    ├── HasNegativeEffects(): bool
    └── GetFormattedOutput(): string

NEW: MedicalSupplyType (Enum)
├── Bandage - Basic wound treatment
├── Salve - Burns and abrasions
├── Splint - Bone injuries
├── Suture - Deep wounds
├── Herbs - General healing boost
├── Antidote - Poison treatment (crafted)
└── Stimulant - Emergency revival

NEW: BoneSetterAbilityId (Enum)
├── FieldDressing
├── Diagnose
├── SteadyHands
├── EmergencySurgery
├── AntidoteCraft
├── Triage
├── Resuscitate
├── PreventiveCare
└── MiracleWorker

NEW: WoundSeverity (Enum)
├── Minor - 75-100% HP
├── Moderate - 50-74% HP
├── Serious - 25-49% HP (Bloodied)
├── Critical - 1-24% HP
└── Dying - 0 HP or below

MODIFY: Character (Entity)
├── ADD: MedicalSupplies: MedicalSuppliesResource?
├── ADD: LastDiagnosedTargets: IReadOnlyDictionary<Guid, DiagnoseResult>
└── ADD: MedicalCheckBonus: int (from Steady Hands)
```

### Tier 1 Ability Specifications

#### Field Dressing (Active)

| Property            | Value                    |
| ------------------- | ------------------------ |
| **ID**              | `field-dressing`         |
| **Type**            | Active                   |
| **AP Cost**         | 2 AP                     |
| **Supply Cost**     | 1 Medical Supply         |
| **Range**           | Touch (adjacent or self) |
| **Effect**          | Heal 2d6 HP              |
| **Corruption Risk** | None (Coherent path)     |

**Mechanics:**

- Heal target for 2d6 HP
- Consumes 1 Medical Supply of any type
- Can target self or adjacent ally
- Supply quality adds bonus healing (+1 per quality level above 1)
- Steady Hands passive adds +2 to healing if active
- Cannot exceed target's maximum HP
- Cannot target enemies or unwilling creatures

**Healing Calculation:**
| Component | Healing |
|-----------|---------|
| Base Roll | 2d6 |
| Supply Quality Bonus | +(Quality - 1) |
| Steady Hands | +2 |
| Total | 2d6 + bonuses |

**Healing by Supply Quality:**
| Quality | Base | Quality Bonus | Total Range |
|---------|------|---------------|-------------|
| 1 (Poor) | 2d6 | +0 | 2-12 |
| 2 (Standard) | 2d6 | +1 | 3-13 |
| 3 (Good) | 2d6 | +2 | 4-14 |
| 4 (Excellent) | 2d6 | +3 | 5-15 |
| 5 (Superior) | 2d6 | +4 | 6-16 |

#### Diagnose (Active)

| Property            | Value                              |
| ------------------- | ---------------------------------- |
| **ID**              | `diagnose`                         |
| **Type**            | Active                             |
| **AP Cost**         | 1 AP                               |
| **Supply Cost**     | 0 (no supplies needed)             |
| **Range**           | 6 spaces                           |
| **Effect**          | Reveal enemy HP and status effects |
| **Corruption Risk** | None (Coherent path)               |

**Mechanics:**

- Reveal target's current and maximum HP
- Reveal all active status effects on target
- Reveal vulnerabilities and resistances
- Information persists until target is defeated or encounter ends
- Works on enemies, allies, and neutral creatures
- No save allowed — pure observation skill
- Steady Hands adds +2 to any follow-up medical checks on diagnosed target

**Information Revealed:**
| Information | Always Shown |
|-------------|--------------|
| Current HP | Yes |
| Maximum HP | Yes |
| HP Percentage | Yes |
| Bloodied Status | Yes |
| Active Buffs | Yes |
| Active Debuffs | Yes |
| Poison/Disease | Yes |
| Vulnerabilities | Yes |
| Resistances | Yes |

#### Steady Hands (Passive)

| Property            | Value                    |
| ------------------- | ------------------------ |
| **ID**              | `steady-hands`           |
| **Type**            | Passive                  |
| **Effect**          | +2 to all medical checks |
| **Corruption Risk** | None (Coherent path)     |

**Mechanics:**

- Gain +2 bonus to all medical-related skill checks
- Applies to: healing, poison treatment, surgery, first aid
- Adds +2 healing to Field Dressing and Emergency Surgery
- Grants advantage on stabilization checks for dying allies
- Also applies to crafting antidotes and medical items

**Medical Check Types Affected:**
| Check Type | Bonus |
|------------|-------|
| Healing Abilities | +2 healing |
| Poison Treatment | +2 to check |
| Surgery Checks | +2 to check |
| Stabilization | Advantage |
| Antidote Crafting | +2 to check |
| Medical Diagnosis | +2 to check |

### User-Facing Changes

**Commands:**

```
> ability field-dressing <target>   # Heal ally
> ability diagnose <target>         # Reveal HP and status
> status                            # Shows Medical Supplies: 5/10
> inventory supplies                # Show detailed supply inventory
```

**Output Example:**

```
╔══════════════════════════════════════════════════════════════╗
║  BONE-SETTER - Eira Hearthkeeper                             ║
╠══════════════════════════════════════════════════════════════╣
║  HP: 28/28    Defense: 11    AP: 6/6                         ║
║  Medical Supplies: █████░░░░░ 5/10                           ║
║                                                              ║
║  Supplies Inventory:                                         ║
║    [2] Bandage (Standard)                                    ║
║    [1] Salve (Good)                                          ║
║    [1] Suture (Standard)                                     ║
║    [1] Herbs (Poor)                                          ║
║                                                              ║
║  [Steady Hands] +2 to all medical checks                     ║
║  [COHERENT] No Corruption risk                               ║
╚══════════════════════════════════════════════════════════════╝

> diagnose Draugr Warrior

Diagnosing Draugr Warrior...
╔══════════════════════════════════════════════════════════════╗
║  DRAUGR WARRIOR - Diagnosis                                  ║
╠══════════════════════════════════════════════════════════════╣
║  HP: 18/35 (51%) [BLOODIED]                                  ║
║                                                              ║
║  Status Effects:                                             ║
║    • Slowed (2 turns remaining)                              ║
║                                                              ║
║  Vulnerabilities: Fire, Radiant                              ║
║  Resistances: Cold, Necrotic                                 ║
╚══════════════════════════════════════════════════════════════╝

> field-dressing Bjorn

You tend to Bjorn's wounds with practiced care.
Healing Roll: 8 (2d6) + 1 (Quality) + 2 (Steady Hands) = 11 HP
Bjorn: 24/45 → 35/45
Medical Supplies: 5 → 4/10
```

### Acceptance Criteria

- [ ] Bone-Setter specialization registered in SpecializationDefinition
- [ ] Medical Supplies initializes based on starting inventory
- [ ] Medical Supplies tracks individual items with types and quality
- [ ] Field Dressing heals 2d6 HP and costs 1 Supply
- [ ] Field Dressing healing modified by supply quality and Steady Hands
- [ ] Diagnose reveals HP, status effects, vulnerabilities, and resistances
- [ ] Diagnose costs no supplies
- [ ] Steady Hands grants +2 to all medical checks
- [ ] No Corruption risk for any Bone-Setter abilities
- [ ] Ability slots correctly show Tier 1 abilities as unlocked
- [ ] ~10 unit tests pass

---

## v0.20.6b: Tier 2 Abilities

[v0.20.6b Design Specification](v0.20.6b-design-specification.md)

### Overview

This phase implements the three Tier 2 abilities that expand the Bone-Setter's medical toolkit with powerful emergency healing, poison cure crafting, and smart healing prioritization.

### Scope

**In Scope:**

- Emergency Surgery active ability (heal 4d6, target can't act next turn)
- Antidote Craft active ability (create antidote from salvage)
- Triage passive ability (healing prioritizes most wounded ally)
- Tier 2 unlock validation (requires 8 PP invested in tree)
- PP cost enforcement (4 PP per Tier 2 ability)
- Crafting integration for antidote creation

**Out of Scope:**

- Tier 3 abilities and Capstone (v0.20.6c)
- Medical Supplies modifications (established in v0.20.6a)

### Key Deliverables

| Type                    | Count | Details                                                             |
| ----------------------- | ----- | ------------------------------------------------------------------- |
| Domain Value Objects    | 3     | `EmergencySurgeryResult`, `AntidoteCraftResult`, `TriageAssessment` |
| Domain Enums            | 1     | `PoisonType`                                                        |
| Ability Implementations | 3     | Emergency Surgery, Antidote Craft, Triage                           |
| Crafting Integration    | 1     | Antidote crafting recipe system                                     |
| Unit Tests              | ~8    |                                                                     |

### Tier 2 Ability Specifications

#### Emergency Surgery (Active)

| Property            | Value                                     |
| ------------------- | ----------------------------------------- |
| **ID**              | `emergency-surgery`                       |
| **Type**            | Active                                    |
| **AP Cost**         | 4 AP                                      |
| **Supply Cost**     | 2 Medical Supplies                        |
| **Range**           | Touch (adjacent)                          |
| **Effect**          | Heal 4d6, but target cannot act next turn |
| **PP Cost**         | 4 PP to unlock                            |
| **Prerequisite**    | 8 PP invested in Bone-Setter tree         |
| **Corruption Risk** | None (Coherent path)                      |

**Mechanics:**

- Perform emergency medical intervention
- Heal target for 4d6 HP
- Consumes 2 Medical Supplies (any type)
- Target gains "Recovering" condition — cannot take actions next turn
- Target can still move and use reactions while Recovering
- Supply quality averages between both supplies used
- Steady Hands adds +2 to healing
- Cannot be used on self (requires both hands)

**Healing Calculation:**
| Component | Healing |
|-----------|---------|
| Base Roll | 4d6 |
| Avg Supply Quality Bonus | +(AvgQuality - 1) |
| Steady Hands | +2 |
| Total | 4d6 + bonuses |

**Recovering Condition:**
| Effect | Description |
|--------|-------------|
| Actions | Cannot take actions |
| Movement | Normal movement allowed |
| Reactions | Reactions allowed |
| Duration | 1 turn |
| Removal | Automatic at end of turn |

#### Antidote Craft (Active)

| Property            | Value                             |
| ------------------- | --------------------------------- |
| **ID**              | `antidote-craft`                  |
| **Type**            | Active                            |
| **AP Cost**         | 3 AP                              |
| **Supply Cost**     | 1 Herb + salvage components       |
| **Effect**          | Create antidote from salvage      |
| **PP Cost**         | 4 PP to unlock                    |
| **Prerequisite**    | 8 PP invested in Bone-Setter tree |
| **Corruption Risk** | None (Coherent path)              |

**Mechanics:**

- Craft an antidote to cure poison effects
- Requires 1 Herb supply and salvage materials
- Crafting check: DC 12, modified by Steady Hands (+2)
- On success, creates one Antidote supply
- Antidote can be used immediately or stored
- Antidote cures one poison effect when applied
- Can craft antidotes for specific poison types if diagnosed

**Crafting Requirements:**
| Component | Required |
|-----------|----------|
| Herb Supply | 1 |
| Salvage (any) | 2 units |
| Crafting DC | 12 |
| Time | 1 action (3 AP) |

**Antidote Application:**
| Use | Effect |
|-----|--------|
| Cure Poison | Remove one poison effect |
| Prevent Poison | +4 to next poison save (if used preemptively) |
| Quality | Matches crafting roll quality |

#### Triage (Passive)

| Property            | Value                                 |
| ------------------- | ------------------------------------- |
| **ID**              | `triage`                              |
| **Type**            | Passive                               |
| **Effect**          | Healing prioritizes most wounded ally |
| **PP Cost**         | 4 PP to unlock                        |
| **Prerequisite**    | 8 PP invested in Bone-Setter tree     |
| **Corruption Risk** | None (Coherent path)                  |

**Mechanics:**

- When using area healing effects, most wounded ally receives +50% healing
- When multiple allies need healing, automatically suggests optimal target
- Provides HP percentages for all visible allies
- Grants +1 healing to all healing abilities when any ally is below 25% HP
- Does not change targeting — player still chooses target

**Triage Bonuses:**
| Condition | Bonus |
|-----------|-------|
| Most wounded ally (area heal) | +50% healing |
| Any ally below 25% HP | +1 healing to all heals |
| Optimal target suggestion | UI indicator |

**Triage Priority Order:**
| Priority | HP Range | Label |
|----------|----------|-------|
| 1 (Highest) | 1-24% | Critical |
| 2 | 25-49% | Serious |
| 3 | 50-74% | Moderate |
| 4 (Lowest) | 75-100% | Minor |

### Data Model Changes

```
NEW: EmergencySurgeryResult (Value Object)
├── TargetId: Guid
├── TargetName: string
├── HpBefore: int
├── HealingRoll: int (4d6)
├── AvgQualityBonus: int
├── SteadyHandsBonus: int
├── TotalHealing: int
├── HpAfter: int
├── SuppliesUsed: int (2)
├── SuppliesRemaining: int
├── RecoveringApplied: bool
└── Methods:
    ├── GetHealingBreakdown(): string
    ├── WasFullHeal(): bool
    └── GetRecoveringDescription(): string

NEW: AntidoteCraftResult (Value Object)
├── CrafterId: Guid
├── CraftingRoll: int
├── CraftingDc: int (12)
├── SteadyHandsBonus: int
├── Success: bool
├── AntidoteCreated: MedicalSupplyItem?
├── HerbsConsumed: int
├── SalvageConsumed: int
├── FailureReason: string?
└── Methods:
    ├── GetResultDescription(): string
    ├── GetAntidoteQuality(): int
    └── WasCriticalSuccess(): bool

NEW: TriageAssessment (Value Object)
├── AssessorId: Guid
├── AlliesAssessed: IReadOnlyList<AllyHealthStatus>
├── MostWoundedAllyId: Guid?
├── CriticalAllies: IReadOnlyList<Guid>
├── SuggestedTargetId: Guid?
├── AssessedAt: DateTime
└── Methods:
    ├── GetPriorityOrder(): IReadOnlyList<Guid>
    ├── GetHealingBonusForTarget(Guid targetId): int
    ├── HasCriticalAlly(): bool
    └── GetFormattedAssessment(): string

NEW: AllyHealthStatus (Value Object)
├── AllyId: Guid
├── AllyName: string
├── CurrentHp: int
├── MaxHp: int
├── HpPercentage: float
├── Severity: WoundSeverity
├── TriagePriority: int
└── Methods:
    ├── GetDescription(): string
    └── IsCritical(): bool

NEW: PoisonType (Enum)
├── Contact - Absorbed through skin
├── Ingested - Must be consumed
├── Inhaled - Breathed in
├── Injected - Delivered via wound
├── Magical - Aetheric poison
└── Blight - Corruption-based (requires special treatment)
```

### Acceptance Criteria

- [ ] Tier 2 abilities locked until 8 PP invested in tree
- [ ] Each Tier 2 ability costs 4 PP to unlock
- [ ] Emergency Surgery heals 4d6 HP and costs 2 Supplies
- [ ] Emergency Surgery applies Recovering condition to target
- [ ] Recovering prevents actions but allows movement/reactions
- [ ] Antidote Craft requires Herb supply and salvage
- [ ] Antidote Craft uses DC 12 crafting check
- [ ] Antidote cures one poison effect when applied
- [ ] Triage grants +50% healing to most wounded ally in area heals
- [ ] Triage grants +1 healing when any ally below 25% HP
- [ ] No Corruption risk for any abilities
- [ ] ~8 unit tests pass

---

## v0.20.6c: Tier 3 Abilities & Capstone

[v0.20.6c Design Specification](v0.20.6c-design-specification.md)

### Overview

This phase implements the two Tier 3 abilities and the Capstone ultimate that represent the pinnacle of medical expertise, including reviving unconscious allies, passive protection against poisons, and the powerful Miracle Worker ability that fully heals and cleanses an ally.

### Scope

**In Scope:**

- Resuscitate active ability (bring unconscious ally to 1 HP)
- Preventive Care passive ability (allies +1 to saves vs poison/disease)
- Miracle Worker ultimate ability (full heal, clear all conditions)
- Tier 3 unlock validation (requires 16 PP invested in tree)
- Capstone unlock validation (requires 24 PP invested in tree)
- PP cost enforcement (5 PP per Tier 3, 6 PP for Capstone)

**Out of Scope:**

- Other specialization implementations (v0.20.7+)
- Veiðimaðr (v0.20.7)

### Key Deliverables

| Type                    | Count | Details                                                          |
| ----------------------- | ----- | ---------------------------------------------------------------- |
| Domain Value Objects    | 3     | `ResuscitateResult`, `PreventiveCareAura`, `MiracleWorkerResult` |
| Domain Enums            | 1     | `UnconsciousReason`                                              |
| Ability Implementations | 3     | Resuscitate, Preventive Care, Miracle Worker                     |
| Combat Integration      | 2     | Unconscious revival, condition cleanse                           |
| Unit Tests              | ~7    |                                                                  |

### Tier 3 & Capstone Ability Specifications

#### Resuscitate (Active)

| Property            | Value                              |
| ------------------- | ---------------------------------- |
| **ID**              | `resuscitate`                      |
| **Type**            | Active                             |
| **AP Cost**         | 4 AP                               |
| **Supply Cost**     | 1 Stimulant supply                 |
| **Range**           | Touch (adjacent)                   |
| **Effect**          | Bring unconscious ally to 1 HP     |
| **PP Cost**         | 5 PP to unlock                     |
| **Prerequisite**    | 16 PP invested in Bone-Setter tree |
| **Corruption Risk** | None (Coherent path)               |

**Mechanics:**

- Target must be unconscious (0 HP) but not dead
- Restore target to 1 HP
- Requires 1 Stimulant supply
- Target gains "Disoriented" condition for 1 turn (-2 to all checks)
- If no Stimulant available, can attempt with DC 16 medical check using any supply
- Steady Hands grants advantage on the medical check
- Cannot revive targets killed by instant death effects

**Revival Conditions:**
| Condition | Can Revive? |
|-----------|-------------|
| Unconscious (0 HP) | Yes |
| Dying (negative HP) | Yes (if within death threshold) |
| Dead | No |
| Instant Death | No |
| Petrified | No |

**Disoriented Condition:**
| Effect | Description |
|--------|-------------|
| All Checks | -2 penalty |
| Duration | 1 turn |
| Removal | Automatic at end of turn |

#### Preventive Care (Passive)

| Property            | Value                                     |
| ------------------- | ----------------------------------------- |
| **ID**              | `preventive-care`                         |
| **Type**            | Passive                                   |
| **Range**           | 6 spaces (aura)                           |
| **Effect**          | Allies gain +1 to saves vs poison/disease |
| **PP Cost**         | 5 PP to unlock                            |
| **Prerequisite**    | 16 PP invested in Bone-Setter tree        |
| **Corruption Risk** | None (Coherent path)                      |

**Mechanics:**

- All allies within 6 spaces gain +1 to saves against poison and disease
- Aura is always active while Bone-Setter is conscious
- Stacks with other save bonuses
- Does not affect self
- Also grants +1 to saves against Blight effects
- Allies are notified when entering/leaving the aura

**Save Bonuses:**
| Effect Type | Bonus |
|-------------|-------|
| Poison | +1 |
| Disease | +1 |
| Blight | +1 |
| Other | No bonus |

#### Miracle Worker (Ultimate/Capstone)

| Property            | Value                                    |
| ------------------- | ---------------------------------------- |
| **ID**              | `miracle-worker`                         |
| **Type**            | Ultimate                                 |
| **AP Cost**         | 6 AP (full turn)                         |
| **Supply Cost**     | 3 Medical Supplies (any type)            |
| **Range**           | Touch (adjacent)                         |
| **Effect**          | Full heal one ally, clear all conditions |
| **Cooldown**        | Once per long rest                       |
| **PP Cost**         | 6 PP to unlock                           |
| **Prerequisite**    | 24 PP invested in Bone-Setter tree       |
| **Corruption Risk** | None (Coherent path)                     |

**Mechanics:**

- Restore target to full HP
- Remove all negative conditions (poison, disease, blinded, etc.)
- Remove all debuffs
- Consumes 3 Medical Supplies of any type
- Cannot remove Corruption (metaphysical, not medical)
- Cannot restore missing limbs or reverse death
- Usable once per long rest
- Requires full action (6 AP) — can do nothing else this turn

**Conditions Removed:**
| Condition Category | Removed? |
|--------------------|----------|
| Poison | Yes |
| Disease | Yes |
| Blinded | Yes |
| Deafened | Yes |
| Paralyzed | Yes |
| Stunned | Yes |
| Exhausted | Yes |
| Frightened | Yes |
| Charmed | Yes |
| Slowed | Yes |
| All Debuffs | Yes |
| Corruption | No (metaphysical) |
| Curses | GM discretion |
| Missing Limbs | No |

**Conditions NOT Removed:**
| Condition | Reason |
|-----------|--------|
| Corruption | Not a medical condition |
| Death | Cannot resurrect |
| Missing Limbs | Requires magical healing |
| Magical Curses | May require magical cure |
| Petrification | Requires magical cure |

### Data Model Changes

```
NEW: ResuscitateResult (Value Object)
├── TargetId: Guid
├── TargetName: string
├── WasUnconscious: bool
├── PreviousHp: int
├── RestoredHp: int (1)
├── UsedStimulant: bool
├── MedicalCheckRoll: int? (if no stimulant)
├── MedicalCheckDc: int (16)
├── Success: bool
├── DisorientedApplied: bool
├── SupplyUsed: MedicalSupplyType
├── SuppliesRemaining: int
└── Methods:
    ├── GetResultDescription(): string
    ├── WasStimulantRevival(): bool
    └── WasSkillRevival(): bool

NEW: PreventiveCareAura (Value Object)
├── AuraId: Guid
├── CasterId: Guid
├── Radius: int (6)
├── SaveBonus: int (+1)
├── AffectedAllyIds: IReadOnlyList<Guid>
├── EffectTypes: IReadOnlyList<string> (Poison, Disease, Blight)
├── IsActive: bool
└── Methods:
    ├── IsInRange(Position allyPosition): bool
    ├── GetAffectedAllies(): IReadOnlyList<Guid>
    ├── UpdateAffectedAllies(IReadOnlyList<Character> allies): void
    └── GetDescription(): string

NEW: MiracleWorkerResult (Value Object)
├── TargetId: Guid
├── TargetName: string
├── HpBefore: int
├── HpAfter: int (MaxHp)
├── HealingDone: int
├── ConditionsRemoved: IReadOnlyList<string>
├── ConditionsNotRemoved: IReadOnlyList<string>
├── DebuffsRemoved: IReadOnlyList<string>
├── SuppliesUsed: int (3)
├── SuppliesRemaining: int
├── PerformedAt: DateTime
└── Methods:
    ├── GetFullDescription(): string
    ├── GetConditionSummary(): string
    ├── WasFullRestore(): bool
    └── HadUnremovableConditions(): bool

NEW: UnconsciousReason (Enum)
├── Damage - Reduced to 0 HP by damage
├── Poison - Knocked out by poison
├── Sleep - Magical or natural sleep
├── Exhaustion - Extreme fatigue
├── Stun - Stunned into unconsciousness
└── Other - Other causes
```

### Acceptance Criteria

- [ ] Tier 3 abilities locked until 16 PP invested in tree
- [ ] Capstone locked until 24 PP invested in tree
- [ ] Tier 3 abilities cost 5 PP each to unlock
- [ ] Capstone costs 6 PP to unlock
- [ ] Resuscitate restores unconscious ally to 1 HP
- [ ] Resuscitate requires Stimulant or DC 16 medical check
- [ ] Resuscitate applies Disoriented condition
- [ ] Preventive Care grants +1 to poison/disease saves within 6 spaces
- [ ] Preventive Care aura is always active
- [ ] Miracle Worker fully heals target and removes all negative conditions
- [ ] Miracle Worker costs 3 supplies and 6 AP
- [ ] Miracle Worker usable once per long rest
- [ ] Miracle Worker cannot remove Corruption
- [ ] No Corruption risk for any abilities
- [ ] ~7 unit tests pass

---

## Dependencies & Prerequisites

```
v0.17.3 (Archetype System) - REQUIRED
    │
    └── Adept archetype foundation
                                    │
                                    ▼
v0.17.4 (Specialization Framework) - REQUIRED
    │
    ├── SpecializationDefinition entity
    ├── SpecializationPathType enum (includes Coherent)
    ├── SpecializationId enum (includes BoneSetter)
    ├── SpecialResourceDefinition
    └── Tier unlock mechanics (8/16/24 PP)
                                    │
                                    ▼
v0.10.x (Status Effect System) - REQUIRED
    │
    ├── StatusEffectService
    ├── Condition tracking
    ├── Buff/debuff application
    └── Condition removal
                                    │
                                    ▼
v0.20.0 (Legacy Class Removal) - REQUIRED
    │
    ├── IAbilitySlotService
    ├── ISpecializationPrerequisiteService
    └── Migration infrastructure
                                    │
                                    ▼
v0.20.1-v0.20.5 (Prior Specializations) - REQUIRED
    │
    └── Establish specialization ability patterns
                                    │
                                    ▼
v0.20.6 (Bone-Setter)
    │
    ├── v0.20.6a: Framework & Tier 1 ──────────────────┐
    │       ├── MedicalSuppliesResource                │
    │       ├── First Coherent healer                  │
    │       ├── Field Dressing                         │
    │       ├── Diagnose                               │
    │       └── Steady Hands                           │
    │                                                  │
    ├── v0.20.6b: Tier 2 Abilities ───────────────────┤
    │       Dependencies: v0.20.6a                     │
    │       ├── Emergency Surgery                      │
    │       ├── Antidote Craft                         │
    │       └── Triage                                 │
    │                                                  │
    └── v0.20.6c: Tier 3 & Capstone ──────────────────┘
            Dependencies: v0.20.6a, v0.20.6b
            ├── Resuscitate
            ├── Preventive Care
            └── Miracle Worker
```

---

## Medical Supplies Resource

### Resource Specification

```csharp
/// <summary>
/// Special resource for Bone-Setter specialization.
/// Medical Supplies are consumable items that power healing abilities.
/// </summary>
public sealed record MedicalSuppliesResource
{
    /// <summary>Individual supply items in inventory.</summary>
    public IReadOnlyList<MedicalSupplyItem> Supplies { get; private set; }

    /// <summary>Maximum supplies that can be carried.</summary>
    public int MaxCarryCapacity { get; init; } = 10;

    /// <summary>When supplies were last restocked.</summary>
    public DateTime? LastRestockedAt { get; private set; }

    /// <summary>Total supply count.</summary>
    public int TotalSupplyCount => Supplies.Count;

    /// <summary>
    /// Spends the specified number of supplies (any type).
    /// </summary>
    /// <returns>True if supplies were available and spent.</returns>
    public bool Spend(int amount)
    {
        if (amount <= 0 || TotalSupplyCount < amount)
            return false;

        // Remove lowest quality supplies first
        var toRemove = Supplies
            .OrderBy(s => s.Quality)
            .Take(amount)
            .ToList();

        Supplies = Supplies.Except(toRemove).ToList();
        return true;
    }

    /// <summary>
    /// Spends a specific type of supply.
    /// </summary>
    public bool SpendSpecific(MedicalSupplyType type)
    {
        var supply = Supplies.FirstOrDefault(s => s.SupplyType == type);
        if (supply == null)
            return false;

        Supplies = Supplies.Where(s => s.ItemId != supply.ItemId).ToList();
        return true;
    }

    /// <summary>
    /// Adds a supply item to inventory.
    /// </summary>
    public bool Add(MedicalSupplyItem item)
    {
        if (!CanCarryMore())
            return false;

        Supplies = Supplies.Append(item).ToList();
        LastRestockedAt = DateTime.UtcNow;
        return true;
    }

    /// <summary>
    /// Gets count of specific supply type.
    /// </summary>
    public int GetCountByType(MedicalSupplyType type)
    {
        return Supplies.Count(s => s.SupplyType == type);
    }

    /// <summary>
    /// Checks if more supplies can be carried.
    /// </summary>
    public bool CanCarryMore() => TotalSupplyCount < MaxCarryCapacity;
}
```

### Resource Acquisition & Consumption

| Action                     | Effect                                    |
| -------------------------- | ----------------------------------------- |
| Salvage loot (medical)     | Gain 1-3 random supplies                  |
| Purchase from merchant     | Buy specific supply types                 |
| Craft antidote             | Consume 1 Herb + salvage, gain 1 Antidote |
| Field Dressing (Tier 1)    | Spend 1 supply (any)                      |
| Emergency Surgery (Tier 2) | Spend 2 supplies (any)                    |
| Resuscitate (Tier 3)       | Spend 1 Stimulant                         |
| Miracle Worker (Capstone)  | Spend 3 supplies (any)                    |
| Rest (short)               | No change                                 |
| Rest (long)                | Can restock if supplies available         |

### Supply Quality System

| Quality | Name      | Healing Bonus | Acquisition              |
| ------- | --------- | ------------- | ------------------------ |
| 1       | Poor      | +0            | Common salvage           |
| 2       | Standard  | +1            | Standard loot            |
| 3       | Good      | +2            | Quality loot, crafted    |
| 4       | Excellent | +3            | Rare find, skilled craft |
| 5       | Superior  | +4            | Very rare, master craft  |

---

## Configuration Updates

### specializations.json

```json
{
    "specializations": [
        {
            "specializationId": "BoneSetter",
            "displayName": "Bone-Setter",
            "tagline": "Keeper of Life",
            "description": "The Bone-Setter represents the practical, grounded approach to survival in Aethelgard. While others channel dark powers or ancient magic, the Bone-Setter relies on knowledge, skill, and medical supplies salvaged from the World-Machine's ruins. They are the ones who patch wounds after battle, cure poisons, and drag allies back from the brink of death.",
            "selectionText": "The body knows how to heal. I merely remind it. Let me tend to the wounded.",
            "parentArchetype": "Adept",
            "pathType": "Coherent",
            "corruptionRisk": null,
            "specialResource": {
                "resourceId": "medical-supplies",
                "resourceName": "Medical Supplies",
                "description": "Consumable medical items including bandages, salves, splints, and herbs. Acquired through salvage, purchase, or crafting.",
                "maxValue": 10,
                "startingValue": 5,
                "generationMethod": "Salvage, purchase, or craft medical items",
                "consumptionMethod": "Spent by healing and medical abilities"
            },
            "unlockCost": 0,
            "abilityTiers": [
                {
                    "tier": 1,
                    "ppRequirement": 0,
                    "abilityCost": 0,
                    "abilities": ["field-dressing", "diagnose", "steady-hands"]
                },
                {
                    "tier": 2,
                    "ppRequirement": 8,
                    "abilityCost": 4,
                    "abilities": [
                        "emergency-surgery",
                        "antidote-craft",
                        "triage"
                    ]
                },
                {
                    "tier": 3,
                    "ppRequirement": 16,
                    "abilityCost": 5,
                    "abilities": ["resuscitate", "preventive-care"]
                },
                {
                    "tier": "capstone",
                    "ppRequirement": 24,
                    "abilityCost": 6,
                    "abilities": ["miracle-worker"]
                }
            ]
        }
    ]
}
```

### abilities.json (Bone-Setter Section)

```json
{
    "abilities": [
        {
            "abilityId": "field-dressing",
            "displayName": "Field Dressing",
            "specializationId": "BoneSetter",
            "tier": 1,
            "type": "Active",
            "apCost": 2,
            "resourceCost": {
                "resourceId": "medical-supplies",
                "amount": 1
            },
            "range": 1,
            "rangeUnit": "Spaces",
            "rangeType": "Touch",
            "description": "Tend to wounds with practiced care. Heal target for 2d6 HP. Supply quality and Steady Hands add bonus healing.",
            "effects": [
                {
                    "type": "Healing",
                    "dice": "2d6",
                    "bonusFromQuality": true,
                    "bonusFromSteadyHands": 2
                }
            ],
            "targeting": {
                "validTargets": ["Self", "Ally"],
                "requiresAdjacent": true
            }
        },
        {
            "abilityId": "diagnose",
            "displayName": "Diagnose",
            "specializationId": "BoneSetter",
            "tier": 1,
            "type": "Active",
            "apCost": 1,
            "range": 6,
            "rangeUnit": "Spaces",
            "description": "Assess a target's physical condition. Reveal current HP, maximum HP, active status effects, vulnerabilities, and resistances.",
            "effects": [
                {
                    "type": "RevealHealth",
                    "showCurrentHp": true,
                    "showMaxHp": true,
                    "showPercentage": true
                },
                {
                    "type": "RevealStatusEffects",
                    "showBuffs": true,
                    "showDebuffs": true,
                    "showPoison": true,
                    "showDisease": true
                },
                {
                    "type": "RevealDefenses",
                    "showVulnerabilities": true,
                    "showResistances": true
                }
            ],
            "targeting": {
                "validTargets": ["Any"],
                "requiresLineOfSight": true
            }
        },
        {
            "abilityId": "steady-hands",
            "displayName": "Steady Hands",
            "specializationId": "BoneSetter",
            "tier": 1,
            "type": "Passive",
            "description": "Your practiced touch grants +2 to all medical checks, +2 healing to medical abilities, and advantage on stabilization checks.",
            "effects": [
                {
                    "type": "SkillBonus",
                    "skillCategory": "Medical",
                    "bonus": 2
                },
                {
                    "type": "HealingBonus",
                    "abilityCategory": "Medical",
                    "bonus": 2
                },
                {
                    "type": "Advantage",
                    "checkType": "Stabilization"
                }
            ]
        },
        {
            "abilityId": "emergency-surgery",
            "displayName": "Emergency Surgery",
            "specializationId": "BoneSetter",
            "tier": 2,
            "type": "Active",
            "apCost": 4,
            "resourceCost": {
                "resourceId": "medical-supplies",
                "amount": 2
            },
            "range": 1,
            "rangeUnit": "Spaces",
            "rangeType": "Touch",
            "description": "Perform emergency medical intervention. Heal target for 4d6 HP, but target cannot act on their next turn (can still move and use reactions).",
            "effects": [
                {
                    "type": "Healing",
                    "dice": "4d6",
                    "bonusFromQuality": true,
                    "bonusFromSteadyHands": 2
                },
                {
                    "type": "ApplyCondition",
                    "condition": "Recovering",
                    "duration": 1,
                    "description": "Cannot take actions, can move and use reactions"
                }
            ],
            "targeting": {
                "validTargets": ["Ally"],
                "requiresAdjacent": true,
                "excludeSelf": true
            }
        },
        {
            "abilityId": "antidote-craft",
            "displayName": "Antidote Craft",
            "specializationId": "BoneSetter",
            "tier": 2,
            "type": "Active",
            "apCost": 3,
            "resourceCost": {
                "resourceId": "medical-supplies",
                "specificType": "Herbs",
                "amount": 1
            },
            "additionalCost": {
                "salvage": 2
            },
            "description": "Craft an antidote from herbs and salvage. Crafting check DC 12 (+2 from Steady Hands). On success, create one Antidote that cures poison.",
            "effects": [
                {
                    "type": "CraftingCheck",
                    "dc": 12,
                    "bonusFromSteadyHands": 2
                },
                {
                    "type": "CreateItem",
                    "itemType": "MedicalSupply",
                    "supplyType": "Antidote",
                    "onSuccess": true
                }
            ]
        },
        {
            "abilityId": "triage",
            "displayName": "Triage",
            "specializationId": "BoneSetter",
            "tier": 2,
            "type": "Passive",
            "description": "Your medical expertise helps prioritize care. Area heals give +50% to most wounded ally. When any ally is below 25% HP, all healing gains +1.",
            "effects": [
                {
                    "type": "HealingModifier",
                    "condition": "MostWoundedInArea",
                    "multiplier": 1.5
                },
                {
                    "type": "HealingBonus",
                    "condition": "AnyAllyCritical",
                    "threshold": 0.25,
                    "bonus": 1
                },
                {
                    "type": "UIIndicator",
                    "showOptimalTarget": true
                }
            ]
        },
        {
            "abilityId": "resuscitate",
            "displayName": "Resuscitate",
            "specializationId": "BoneSetter",
            "tier": 3,
            "type": "Active",
            "apCost": 4,
            "resourceCost": {
                "resourceId": "medical-supplies",
                "specificType": "Stimulant",
                "amount": 1,
                "alternativeCheck": {
                    "dc": 16,
                    "anySupply": true,
                    "steadyHandsAdvantage": true
                }
            },
            "range": 1,
            "rangeUnit": "Spaces",
            "rangeType": "Touch",
            "description": "Revive an unconscious ally. Restore them to 1 HP. Requires Stimulant supply, or DC 16 medical check with any supply. Target is Disoriented for 1 turn.",
            "requirements": {
                "targetCondition": "Unconscious"
            },
            "effects": [
                {
                    "type": "Revive",
                    "restoreHp": 1
                },
                {
                    "type": "ApplyCondition",
                    "condition": "Disoriented",
                    "duration": 1,
                    "description": "-2 to all checks"
                }
            ],
            "targeting": {
                "validTargets": ["UnconsciousAlly"],
                "requiresAdjacent": true
            }
        },
        {
            "abilityId": "preventive-care",
            "displayName": "Preventive Care",
            "specializationId": "BoneSetter",
            "tier": 3,
            "type": "Passive",
            "range": 6,
            "rangeType": "Aura",
            "description": "Your presence bolsters allies' resistance to ailments. Allies within 6 spaces gain +1 to saves against poison, disease, and Blight.",
            "effects": [
                {
                    "type": "Aura",
                    "radius": 6,
                    "targetsSelf": false
                },
                {
                    "type": "SaveBonus",
                    "saveTypes": ["Poison", "Disease", "Blight"],
                    "bonus": 1
                }
            ]
        },
        {
            "abilityId": "miracle-worker",
            "displayName": "Miracle Worker",
            "specializationId": "BoneSetter",
            "tier": "capstone",
            "type": "Ultimate",
            "apCost": 6,
            "resourceCost": {
                "resourceId": "medical-supplies",
                "amount": 3
            },
            "range": 1,
            "rangeUnit": "Spaces",
            "rangeType": "Touch",
            "cooldown": "LongRest",
            "description": "Perform a miracle of medical skill. Fully heal one ally and remove all negative conditions and debuffs. Cannot remove Corruption. Costs full action (6 AP).",
            "effects": [
                {
                    "type": "FullHeal"
                },
                {
                    "type": "RemoveConditions",
                    "conditionTypes": ["Negative", "Debuff"],
                    "excludes": ["Corruption", "Curse", "MissingLimb"]
                }
            ],
            "targeting": {
                "validTargets": ["Ally"],
                "requiresAdjacent": true
            }
        }
    ]
}
```

---

## Estimated Effort Summary

| Phase     | New Files | Modified Files | Est. Tests | Complexity |
| --------- | --------- | -------------- | ---------- | ---------- |
| v0.20.6a  | ~8        | ~4             | ~10        | Medium     |
| v0.20.6b  | ~4        | ~2             | ~8         | Medium     |
| v0.20.6c  | ~4        | ~2             | ~7         | Medium     |
| **Total** | **~16**   | **~8**         | **~25**    |            |

---

## Risk Assessment

| Risk                                         | Impact | Probability | Mitigation                                 |
| -------------------------------------------- | ------ | ----------- | ------------------------------------------ |
| Medical Supply balance (too scarce/abundant) | Medium | Medium      | Tune acquisition rates, make configurable  |
| Healing numbers balance                      | High   | Medium      | Playtest healing vs damage output          |
| Miracle Worker too powerful                  | Medium | Low         | Once per long rest limit, high supply cost |
| Antidote crafting complexity                 | Low    | Low         | Simple DC check, clear requirements        |
| Triage targeting confusion                   | Medium | Medium      | Clear UI indicators for optimal target     |
| Condition removal edge cases                 | Medium | Medium      | Clear list of removable vs non-removable   |

---

## Design Decisions (Confirmed)

### Medical Supplies Resource

| Decision               | Value                    | Notes                          |
| ---------------------- | ------------------------ | ------------------------------ |
| **Max Carry Capacity** | 10                       | Encourages resource management |
| **Starting Supplies**  | 5                        | Half capacity to start         |
| **Acquisition Method** | Salvage, purchase, craft | Multiple sources               |
| **Quality System**     | 1-5 scale                | Affects healing bonus          |

### Healing Balance

| Decision               | Value          | Notes                           |
| ---------------------- | -------------- | ------------------------------- |
| **Field Dressing**     | 2d6 base       | Basic heal, scales with quality |
| **Emergency Surgery**  | 4d6 base       | Double healing, with drawback   |
| **Steady Hands Bonus** | +2             | Consistent boost to all medical |
| **Quality Bonus**      | +(Quality - 1) | 0 to +4 range                   |

### Ability Balance

| Decision                 | Value             | Notes                        |
| ------------------------ | ----------------- | ---------------------------- |
| **Diagnose Cost**        | 0 supplies        | Information ability is free  |
| **Surgery Drawback**     | Recovering 1 turn | Meaningful cost for big heal |
| **Resuscitate HP**       | 1 HP              | Just enough to be conscious  |
| **Miracle Worker Limit** | Once/long rest    | Prevents spam of full heals  |

---

## Unit Test Specifications

### v0.20.6a Tests (~10 tests)

#### MedicalSuppliesResourceTests.cs

```csharp
[TestFixture]
public class MedicalSuppliesResourceTests
{
    [Test]
    public void Create_InitializesWithStartingSupplies();

    [Test]
    public void Spend_SufficientSupplies_ReturnsTrue();

    [Test]
    public void Spend_InsufficientSupplies_ReturnsFalse();

    [Test]
    public void SpendSpecific_HasType_ReturnsTrue();

    [Test]
    public void SpendSpecific_MissingType_ReturnsFalse();

    [Test]
    public void Add_UnderCapacity_ReturnsTrue();

    [Test]
    public void Add_AtCapacity_ReturnsFalse();
}
```

#### BoneSetterAbilityServiceTests.cs

```csharp
[TestFixture]
public class BoneSetterAbilityServiceTests
{
    [Test]
    public void FieldDressing_ValidTarget_HealsCorrectly();

    [Test]
    public void FieldDressing_QualityBonus_AppliesCorrectly();

    [Test]
    public void Diagnose_Enemy_RevealsHealth();
}
```

### v0.20.6b Tests (~8 tests)

#### Tier2AbilityTests.cs

```csharp
[TestFixture]
public class Tier2AbilityTests
{
    [Test]
    public void EmergencySurgery_Heals4d6();

    [Test]
    public void EmergencySurgery_AppliesRecovering();

    [Test]
    public void EmergencySurgery_CostsTwoSupplies();

    [Test]
    public void AntidoteCraft_SuccessCreatesAntidote();

    [Test]
    public void AntidoteCraft_FailureNoAntidote();

    [Test]
    public void Triage_MostWoundedGetsBonus();

    [Test]
    public void Triage_CriticalAllyBonusApplies();

    [Test]
    public void Tier2_LockedUntil8PPInvested();
}
```

### v0.20.6c Tests (~7 tests)

#### Tier3AndCapstoneTests.cs

```csharp
[TestFixture]
public class Tier3AndCapstoneTests
{
    [Test]
    public void Resuscitate_UnconsciousAlly_RestoresTo1Hp();

    [Test]
    public void Resuscitate_AppliesDisoriented();

    [Test]
    public void Resuscitate_NoStimulant_RequiresDc16Check();

    [Test]
    public void PreventiveCare_GrantsSaveBonus();

    [Test]
    public void PreventiveCare_AffectsAlliesInRange();

    [Test]
    public void MiracleWorker_FullyHeals();

    [Test]
    public void MiracleWorker_RemovesNegativeConditions();

    [Test]
    public void MiracleWorker_DoesNotRemoveCorruption();

    [Test]
    public void MiracleWorker_OncePerLongRest();
}
```

---

## Architecture Diagram

```
┌─────────────────────────────────────────────────────────────────┐
│                v0.20.6 Bone-Setter Specialization                │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                    Domain Layer                          │   │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │   │
│  │  │   Medical    │  │    Field     │  │   Diagnose   │  │   │
│  │  │  Supplies    │  │   Dressing   │  │   Result     │  │   │
│  │  │   Resource   │  │   Result     │  │ Value Object │  │   │
│  │  └──────────────┘  └──────────────┘  └──────────────┘  │   │
│  │                                                          │   │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │   │
│  │  │  Emergency   │  │   Antidote   │  │ Resuscitate  │  │   │
│  │  │   Surgery    │  │    Craft     │  │   Result     │  │   │
│  │  │   Result     │  │   Result     │  │ Value Object │  │   │
│  │  └──────────────┘  └──────────────┘  └──────────────┘  │   │
│  │                                                          │   │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │   │
│  │  │ Preventive   │  │   Miracle    │  │  BoneSetter  │  │   │
│  │  │    Care      │  │   Worker     │  │  AbilityId   │  │   │
│  │  │    Aura      │  │   Result     │  │    Enum      │  │   │
│  │  └──────────────┘  └──────────────┘  └──────────────┘  │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              │                                   │
│                              ▼                                   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                  Application Layer                       │   │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │   │
│  │  │  IMedical    │  │ IBoneSetter  │  │  ICondition  │  │   │
│  │  │  Supplies    │  │   Ability    │  │   Removal    │  │   │
│  │  │   Service    │  │   Service    │  │   Service    │  │   │
│  │  └──────────────┘  └──────────────┘  └──────────────┘  │   │
│  │         │                  │                  │         │   │
│  │         ▼                  ▼                  ▼         │   │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │   │
│  │  │   Medical    │  │  BoneSetter  │  │  Condition   │  │   │
│  │  │  Supplies    │  │   Ability    │  │   Removal    │  │   │
│  │  │Service Impl  │  │ Service Impl │  │ Service Impl │  │   │
│  │  └──────────────┘  └──────────────┘  └──────────────┘  │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              │                                   │
│                              ▼                                   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                 Infrastructure Layer                     │   │
│  │  ┌──────────────────────┐  ┌──────────────────────┐    │   │
│  │  │ specializations.json │  │ abilities.json       │    │   │
│  │  │ (Bone-Setter entry)  │  │ (9 Bone-Setter       │    │   │
│  │  │                      │  │  abilities)          │    │   │
│  │  └──────────────────────┘  └──────────────────────┘    │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘

Medical Supplies Resource Flow:
┌─────────────┐                    ┌─────────────┐                ┌─────────────┐
│    Rest     │ ─────────────────► │  Medical    │ ──────────────►│   Healing   │
│  / Restock  │  Set to MaxSupplies│  Supplies   │  Spend Supply  │  Abilities  │
└─────────────┘                    └─────────────┘                └─────────────┘
                                          │
                                          ▼ Crafting
                                   ┌─────────────┐
                                   │  Antidote   │
                                   │   Items     │
                                   └─────────────┘
```

---

## Integration Points

### With Prior Specializations

| System                    | Integration Point                                 |
| ------------------------- | ------------------------------------------------- |
| Specialization framework  | Follows established v0.20.1-v0.20.5 patterns      |
| Special resource patterns | Consumable resource (different from regenerating) |
| Coherent path             | No Corruption integration needed                  |

### With Core Systems

| System                         | Integration Point                        |
| ------------------------------ | ---------------------------------------- |
| Status Effect System (v0.10.x) | Condition removal, Diagnose reveal       |
| Inventory System               | Medical Supplies tracking                |
| Crafting System                | Antidote crafting integration            |
| Combat System                  | Healing application, unconscious revival |

### Provides to Future Versions

| Provides                     | Consumer                       |
| ---------------------------- | ------------------------------ |
| Consumable resource patterns | Future support specializations |
| Healing ability templates    | Other healer-type abilities    |
| Condition removal patterns   | Future cleanse abilities       |
| Aura passive patterns        | Other aura-based passives      |
| Revival mechanics            | Other revival abilities        |

---

## Deliverable Checklist

### Domain Layer

- [ ] `MedicalSuppliesResource` value object
- [ ] `MedicalSupplyItem` value object
- [ ] `FieldDressingResult` value object
- [ ] `DiagnoseResult` value object
- [ ] `EmergencySurgeryResult` value object
- [ ] `AntidoteCraftResult` value object
- [ ] `TriageAssessment` value object
- [ ] `AllyHealthStatus` value object
- [ ] `ResuscitateResult` value object
- [ ] `PreventiveCareAura` value object
- [ ] `MiracleWorkerResult` value object
- [ ] `BoneSetterAbilityId` enum
- [ ] `MedicalSupplyType` enum
- [ ] `WoundSeverity` enum
- [ ] `PoisonType` enum
- [ ] `UnconsciousReason` enum

### Application Layer

- [ ] `MedicalSuppliesService` implementation
- [ ] `BoneSetterAbilityService` implementation
- [ ] Field Dressing ability handler
- [ ] Diagnose ability handler
- [ ] Steady Hands passive integration
- [ ] Emergency Surgery ability handler
- [ ] Antidote Craft ability handler
- [ ] Triage passive integration
- [ ] Resuscitate ability handler
- [ ] Preventive Care aura handler
- [ ] Miracle Worker ability handler

### Infrastructure Layer

- [ ] `specializations.json` Bone-Setter entry
- [ ] `abilities.json` Bone-Setter abilities (9 total)

### Tests

- [ ] MedicalSuppliesResourceTests.cs (~7 tests)
- [ ] BoneSetterAbilityServiceTests.cs (~3 tests)
- [ ] Tier2AbilityTests.cs (~8 tests)
- [ ] Tier3AndCapstoneTests.cs (~7 tests)

---

## Next Steps

1. **Review & Approve** - Confirm scope breakdown with stakeholders
2. **v0.20.6a Design Spec** - Create detailed design specification for Tier 1
3. **Implement v0.20.6a** - Build Medical Supplies, and Tier 1 abilities
4. **v0.20.6b Design Spec** - Create detailed design specification for Tier 2
5. **Implement v0.20.6b** - Build Tier 2 abilities including crafting
6. **v0.20.6c Design Spec** - Create detailed design specification for Tier 3 & Capstone
7. **Implement v0.20.6c** - Build Tier 3 abilities and Miracle Worker
8. **Proceed to v0.20.7** - Veiðimaðr specialization (Coherent hunter path)

---

_This scope breakdown provides a structured approach to implementing the Bone-Setter specialization — the first dedicated healing specialization in v0.20.x. As a Coherent path with no Corruption risk, the Bone-Setter offers reliable party support through medical expertise rather than dark power. The consumable Medical Supplies resource creates meaningful resource management decisions, while abilities like Miracle Worker provide powerful capstone healing. Each sub-phase builds on the previous, allowing for incremental development and testing of the healer archetype._
