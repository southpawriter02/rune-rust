# v0.0.9c Design Specification: Monster Tiers & Traits

**Version:** 0.0.9c
**Phase Name:** Monster Tiers & Traits
**Parent Version:** v0.0.9 (Monster Variety & Loot)
**Prerequisites:** v0.0.9a Complete (Monster Definitions), v0.0.9b Complete (Damage Types & Resistances)
**Estimated Tests:** ~16 unit tests

---

## 1. Overview

### 1.1 Purpose

Add a tier system for monster difficulty scaling and a trait system for special abilities. Tiers multiply base stats and rewards, creating varied challenge levels from common enemies to formidable bosses. Traits grant unique behaviors that add tactical depth to combat encounters.

### 1.2 Scope

**In Scope:**
- `TierDefinition` entity loaded from JSON configuration
- `MonsterTrait` entity for special abilities
- `TraitEffect` enum for trait behaviors
- Tier-based stat multipliers (HP, ATK, DEF)
- Tier-based reward multipliers (XP, Loot)
- Default tiers: Common, Named, Elite, Boss
- Default traits: Regenerating, Flying, Venomous, Armored, Berserker
- Named monster generation with procedural names
- `config/tiers.json` and `config/traits.json` configuration
- Monster display updates showing tier and traits
- Updates to `MonsterDefinition` for possible tiers and traits
- Updates to `Monster` entity with runtime tier and traits

**Out of Scope:**
- Loot tables and currency (v0.0.9d)
- Boss-specific mechanics (unique phases, dialogue)
- Trait-based AI modifications (future enhancement)
- Player traits or buffs (future version)

### 1.3 Design Goals

1. **Scalable Challenge**: Tiers provide meaningful difficulty progression
2. **Data-Driven**: All tiers and traits defined in JSON configuration
3. **Tactical Depth**: Traits create varied combat encounters
4. **Visual Distinction**: Tiered monsters clearly identifiable in UI
5. **Balanced Rewards**: Higher tiers provide proportionally better rewards
6. **Extensible**: Foundation for boss encounters and advanced traits

---

## 2. Data Model

### 2.1 New Definitions

#### TierDefinition

A configuration-driven definition for monster difficulty tiers.

**File:** `src/Core/RuneAndRust.Domain/Definitions/TierDefinition.cs`

```csharp
namespace RuneAndRust.Domain.Definitions;

/// <summary>
/// Defines a monster difficulty tier with stat and reward multipliers.
/// </summary>
/// <remarks>
/// Tiers modify base monster stats when spawning, creating varied
/// difficulty levels from common enemies to powerful bosses.
/// </remarks>
public class TierDefinition
{
    /// <summary>
    /// Gets the unique identifier for this tier.
    /// </summary>
    /// <example>"common", "named", "elite", "boss"</example>
    public string Id { get; init; } = string.Empty;

    /// <summary>
    /// Gets the display name of this tier.
    /// </summary>
    public string Name { get; init; } = string.Empty;

    /// <summary>
    /// Gets the optional prefix added to monster names.
    /// </summary>
    /// <remarks>
    /// Null for Common and Named tiers (Named uses generated names instead).
    /// "Elite" prefix for Elite tier, "Boss" prefix for Boss tier.
    /// </remarks>
    /// <example>null, "Elite", "Boss"</example>
    public string? NamePrefix { get; init; }

    /// <summary>
    /// Gets the health multiplier applied to base health.
    /// </summary>
    public float HealthMultiplier { get; init; } = 1.0f;

    /// <summary>
    /// Gets the attack multiplier applied to base attack.
    /// </summary>
    public float AttackMultiplier { get; init; } = 1.0f;

    /// <summary>
    /// Gets the defense multiplier applied to base defense.
    /// </summary>
    public float DefenseMultiplier { get; init; } = 1.0f;

    /// <summary>
    /// Gets the experience multiplier applied to base XP reward.
    /// </summary>
    public float ExperienceMultiplier { get; init; } = 1.0f;

    /// <summary>
    /// Gets the loot multiplier applied to drop rates and currency.
    /// </summary>
    /// <remarks>
    /// Used in v0.0.9d for loot table calculations.
    /// </remarks>
    public float LootMultiplier { get; init; } = 1.0f;

    /// <summary>
    /// Gets the color used for displaying this tier.
    /// </summary>
    /// <remarks>
    /// Used by the renderer for colored monster names.
    /// Should be a valid Spectre.Console color name.
    /// </remarks>
    public string Color { get; init; } = "white";

    /// <summary>
    /// Gets the relative spawn weight for random tier selection.
    /// </summary>
    /// <remarks>
    /// Higher weights mean more frequent spawns.
    /// Boss tier typically has very low or zero weight (spawned manually).
    /// </remarks>
    public int SpawnWeight { get; init; } = 100;

    /// <summary>
    /// Gets whether this tier generates unique names.
    /// </summary>
    /// <remarks>
    /// When true, monsters get procedurally generated names like "Grok the Orc".
    /// Typically only true for the "named" tier.
    /// </remarks>
    public bool GeneratesUniqueName { get; init; } = false;

    /// <summary>
    /// Gets the display sort order.
    /// </summary>
    public int SortOrder { get; init; } = 0;

    /// <summary>
    /// Creates a validated TierDefinition.
    /// </summary>
    public static TierDefinition Create(
        string id,
        string name,
        string? namePrefix = null,
        float healthMultiplier = 1.0f,
        float attackMultiplier = 1.0f,
        float defenseMultiplier = 1.0f,
        float experienceMultiplier = 1.0f,
        float lootMultiplier = 1.0f,
        string color = "white",
        int spawnWeight = 100,
        bool generatesUniqueName = false,
        int sortOrder = 0)
    {
        ArgumentException.ThrowIfNullOrWhiteSpace(id);
        ArgumentException.ThrowIfNullOrWhiteSpace(name);
        ArgumentOutOfRangeException.ThrowIfLessThanOrEqual(healthMultiplier, 0);
        ArgumentOutOfRangeException.ThrowIfLessThanOrEqual(attackMultiplier, 0);
        ArgumentOutOfRangeException.ThrowIfNegative(defenseMultiplier);
        ArgumentOutOfRangeException.ThrowIfNegative(experienceMultiplier);
        ArgumentOutOfRangeException.ThrowIfNegative(lootMultiplier);

        return new TierDefinition
        {
            Id = id.ToLowerInvariant(),
            Name = name,
            NamePrefix = namePrefix,
            HealthMultiplier = healthMultiplier,
            AttackMultiplier = attackMultiplier,
            DefenseMultiplier = defenseMultiplier,
            ExperienceMultiplier = experienceMultiplier,
            LootMultiplier = lootMultiplier,
            Color = color,
            SpawnWeight = spawnWeight,
            GeneratesUniqueName = generatesUniqueName,
            SortOrder = sortOrder
        };
    }

    /// <summary>
    /// Gets the default Common tier.
    /// </summary>
    public static TierDefinition Common => Create(
        "common", "Common", null, 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, "white", 70);
}
```

#### MonsterTrait

A configuration-driven definition for monster special abilities.

**File:** `src/Core/RuneAndRust.Domain/Definitions/MonsterTrait.cs`

```csharp
using RuneAndRust.Domain.Enums;

namespace RuneAndRust.Domain.Definitions;

/// <summary>
/// Defines a special trait that grants monsters unique abilities or behaviors.
/// </summary>
/// <remarks>
/// Traits add tactical variety to combat encounters. A monster may have
/// multiple traits that combine to create unique challenges.
/// </remarks>
public class MonsterTrait
{
    /// <summary>
    /// Gets the unique identifier for this trait.
    /// </summary>
    /// <example>"regenerating", "flying", "venomous"</example>
    public string Id { get; init; } = string.Empty;

    /// <summary>
    /// Gets the display name of this trait.
    /// </summary>
    public string Name { get; init; } = string.Empty;

    /// <summary>
    /// Gets the description of this trait shown to players.
    /// </summary>
    public string Description { get; init; } = string.Empty;

    /// <summary>
    /// Gets the mechanical effect type of this trait.
    /// </summary>
    public TraitEffect Effect { get; init; } = TraitEffect.None;

    /// <summary>
    /// Gets the numeric value associated with the effect.
    /// </summary>
    /// <remarks>
    /// Meaning depends on Effect type:
    /// - Regeneration: HP healed per turn
    /// - Flying: Defense/dodge bonus
    /// - Venomous: Poison damage per turn
    /// - Armored: Flat damage reduction
    /// - Berserker: Damage bonus percentage at low HP
    /// </remarks>
    public int EffectValue { get; init; } = 0;

    /// <summary>
    /// Gets the HP threshold for conditional traits (like Berserker).
    /// </summary>
    /// <remarks>
    /// Expressed as percentage of max HP (e.g., 30 = activates below 30% HP).
    /// </remarks>
    public int? TriggerThreshold { get; init; }

    /// <summary>
    /// Gets the categorical tags for this trait.
    /// </summary>
    /// <remarks>
    /// Used for filtering and categorization (e.g., "passive", "combat", "defensive").
    /// </remarks>
    public IReadOnlyList<string> Tags { get; init; } = [];

    /// <summary>
    /// Gets the color used for displaying this trait.
    /// </summary>
    public string Color { get; init; } = "white";

    /// <summary>
    /// Gets the display sort order.
    /// </summary>
    public int SortOrder { get; init; } = 0;

    /// <summary>
    /// Creates a validated MonsterTrait.
    /// </summary>
    public static MonsterTrait Create(
        string id,
        string name,
        string description,
        TraitEffect effect,
        int effectValue = 0,
        int? triggerThreshold = null,
        IEnumerable<string>? tags = null,
        string color = "white",
        int sortOrder = 0)
    {
        ArgumentException.ThrowIfNullOrWhiteSpace(id);
        ArgumentException.ThrowIfNullOrWhiteSpace(name);

        return new MonsterTrait
        {
            Id = id.ToLowerInvariant(),
            Name = name,
            Description = description,
            Effect = effect,
            EffectValue = effectValue,
            TriggerThreshold = triggerThreshold,
            Tags = tags?.Select(t => t.ToLowerInvariant()).ToList() ?? [],
            Color = color,
            SortOrder = sortOrder
        };
    }
}
```

### 2.2 New Enums

#### TraitEffect

**File:** `src/Core/RuneAndRust.Domain/Enums/TraitEffect.cs`

```csharp
namespace RuneAndRust.Domain.Enums;

/// <summary>
/// Defines the mechanical effect types for monster traits.
/// </summary>
public enum TraitEffect
{
    /// <summary>
    /// No mechanical effect (flavor only).
    /// </summary>
    None = 0,

    /// <summary>
    /// Heals a fixed amount of HP each turn.
    /// EffectValue = HP healed per turn.
    /// </summary>
    Regeneration = 1,

    /// <summary>
    /// Grants a defense/evasion bonus against melee attacks.
    /// EffectValue = Defense bonus.
    /// </summary>
    Flying = 2,

    /// <summary>
    /// Attacks may apply poison status effect.
    /// EffectValue = Poison damage per turn.
    /// </summary>
    Venomous = 3,

    /// <summary>
    /// Reduces all incoming damage by a flat amount.
    /// EffectValue = Damage reduction.
    /// </summary>
    Armored = 4,

    /// <summary>
    /// Increases damage dealt when below HP threshold.
    /// EffectValue = Damage bonus percentage.
    /// TriggerThreshold = HP percentage to activate.
    /// </summary>
    Berserker = 5,

    /// <summary>
    /// Can summon additional monsters (future implementation).
    /// EffectValue = Number of summons.
    /// </summary>
    Summoner = 6,

    /// <summary>
    /// Immune to a specific damage type.
    /// EffectValue = Unused (damage type specified elsewhere).
    /// </summary>
    ElementalImmunity = 7,

    /// <summary>
    /// Attacks deal additional elemental damage.
    /// EffectValue = Bonus damage.
    /// </summary>
    ElementalAttack = 8
}
```

### 2.3 New Value Objects

#### NameGeneratorConfig

Configuration for procedural name generation.

**File:** `src/Core/RuneAndRust.Domain/ValueObjects/NameGeneratorConfig.cs`

```csharp
namespace RuneAndRust.Domain.ValueObjects;

/// <summary>
/// Configuration for procedural monster name generation.
/// </summary>
/// <remarks>
/// Used by Named tier monsters to generate unique names like "Grok the Orc".
/// </remarks>
public readonly record struct NameGeneratorConfig
{
    /// <summary>
    /// Gets the list of possible first name prefixes.
    /// </summary>
    /// <example>["Gr", "Kr", "Th", "Br", "Sk"]</example>
    public IReadOnlyList<string> Prefixes { get; init; }

    /// <summary>
    /// Gets the list of possible name suffixes.
    /// </summary>
    /// <example>["ok", "ag", "ul", "ax", "or"]</example>
    public IReadOnlyList<string> Suffixes { get; init; }

    /// <summary>
    /// Gets the title format string.
    /// </summary>
    /// <remarks>
    /// {0} = generated name, {1} = monster type.
    /// </remarks>
    /// <example>"{0} the {1}"</example>
    public string TitleFormat { get; init; }

    /// <summary>
    /// Creates a default name generator config.
    /// </summary>
    public static NameGeneratorConfig Default => new()
    {
        Prefixes = ["Gr", "Kr", "Th", "Br", "Sk", "Dr", "Bl", "Tr", "Zr", "Vr"],
        Suffixes = ["ok", "ag", "ul", "ax", "or", "ek", "im", "an", "ur", "ash"],
        TitleFormat = "{0} the {1}"
    };

    /// <summary>
    /// Generates a random name using this configuration.
    /// </summary>
    /// <param name="monsterTypeName">The base monster type name.</param>
    /// <param name="random">Random number generator.</param>
    /// <returns>A generated name like "Grok the Orc".</returns>
    public string GenerateName(string monsterTypeName, Random? random = null)
    {
        random ??= Random.Shared;

        if (Prefixes.Count == 0 || Suffixes.Count == 0)
            return monsterTypeName;

        var prefix = Prefixes[random.Next(Prefixes.Count)];
        var suffix = Suffixes[random.Next(Suffixes.Count)];
        var name = prefix + suffix;

        return string.Format(TitleFormat, name, monsterTypeName);
    }
}
```

### 2.4 Modified Definitions

#### MonsterDefinition (from v0.0.9a)

Add tier, trait, and name generation support.

**File:** `src/Core/RuneAndRust.Domain/Definitions/MonsterDefinition.cs`

**Add properties:**

```csharp
/// <summary>
/// Gets the list of tier IDs this monster can spawn as.
/// </summary>
/// <remarks>
/// If empty, defaults to ["common"].
/// Tier is selected using weighted random from available tiers.
/// </remarks>
public IReadOnlyList<string> PossibleTiers { get; init; } = ["common"];

/// <summary>
/// Gets the list of trait IDs this monster can spawn with.
/// </summary>
/// <remarks>
/// Traits are randomly selected based on tier.
/// Higher tiers may have more traits.
/// </remarks>
public IReadOnlyList<string> PossibleTraits { get; init; } = [];

/// <summary>
/// Gets the name generator configuration for Named tier monsters.
/// </summary>
/// <remarks>
/// If null, uses default name generation.
/// </remarks>
public NameGeneratorConfig? NameGenerator { get; init; }
```

**Update Create method signature:**

```csharp
public static MonsterDefinition Create(
    string id,
    string name,
    string description,
    string examineText,
    int baseHealth,
    int baseAttack,
    int baseDefense,
    int baseExperienceValue,
    AIBehavior aiBehavior = AIBehavior.Aggressive,
    IEnumerable<string>? tags = null,
    int spawnWeight = 100,
    int sortOrder = 0,
    DamageResistances? baseResistances = null,
    IEnumerable<string>? possibleTiers = null,      // NEW
    IEnumerable<string>? possibleTraits = null,     // NEW
    NameGeneratorConfig? nameGenerator = null)       // NEW
{
    // ... existing validation ...

    return new MonsterDefinition
    {
        // ... existing properties ...
        PossibleTiers = possibleTiers?.ToList() ?? ["common"],
        PossibleTraits = possibleTraits?.ToList() ?? [],
        NameGenerator = nameGenerator
    };
}
```

### 2.5 Modified Entities

#### Monster

Add runtime tier and traits to the monster entity.

**File:** `src/Core/RuneAndRust.Domain/Entities/Monster.cs`

**Add properties:**

```csharp
/// <summary>
/// Gets the tier ID this monster was spawned with.
/// </summary>
public string TierId { get; private set; } = "common";

/// <summary>
/// Gets the list of trait IDs this monster has.
/// </summary>
public IReadOnlyList<string> TraitIds { get; private set; } = [];

/// <summary>
/// Gets the display name including tier prefix or generated name.
/// </summary>
/// <remarks>
/// For common monsters: "Goblin"
/// For elite monsters: "Elite Goblin"
/// For named monsters: "Grok the Goblin"
/// </remarks>
public string DisplayName { get; private set; } = string.Empty;

/// <summary>
/// Gets whether this monster is a Named tier with a unique name.
/// </summary>
public bool IsNamed { get; private set; } = false;

/// <summary>
/// Gets the color for displaying this monster (from tier).
/// </summary>
public string DisplayColor { get; private set; } = "white";

/// <summary>
/// Gets the loot multiplier from the monster's tier.
/// </summary>
/// <remarks>
/// Used by LootService in v0.0.9d.
/// </remarks>
public float LootMultiplier { get; private set; } = 1.0f;
```

**Update/add constructor:**

```csharp
/// <summary>
/// Creates a monster from a MonsterDefinition with tier and traits.
/// </summary>
internal Monster(
    string definitionId,
    string name,
    string description,
    int maxHealth,
    Stats stats,
    int experienceValue,
    DamageResistances resistances,
    string tierId,
    IEnumerable<string> traitIds,
    string displayName,
    bool isNamed,
    string displayColor,
    float lootMultiplier)
{
    Id = Guid.NewGuid();
    DefinitionId = definitionId;
    Name = name ?? throw new ArgumentNullException(nameof(name));
    Description = description ?? throw new ArgumentNullException(nameof(description));
    MaxHealth = maxHealth > 0 ? maxHealth : throw new ArgumentOutOfRangeException(nameof(maxHealth));
    Health = maxHealth;
    Stats = stats;
    ExperienceValue = experienceValue;
    Resistances = resistances;
    TierId = tierId;
    TraitIds = traitIds?.ToList() ?? [];
    DisplayName = displayName;
    IsNamed = isNamed;
    DisplayColor = displayColor;
    LootMultiplier = lootMultiplier;
}
```

---

## 3. Service Interfaces

### 3.1 ITierService

**File:** `src/Core/RuneAndRust.Application/Interfaces/ITierService.cs`

```csharp
using RuneAndRust.Domain.Definitions;

namespace RuneAndRust.Application.Interfaces;

/// <summary>
/// Service for managing monster tier definitions.
/// </summary>
public interface ITierService
{
    /// <summary>
    /// Gets a tier definition by ID.
    /// </summary>
    /// <param name="tierId">The tier identifier.</param>
    /// <returns>The tier definition, or null if not found.</returns>
    TierDefinition? GetTier(string tierId);

    /// <summary>
    /// Gets all tier definitions.
    /// </summary>
    /// <returns>Read-only list of all tier definitions.</returns>
    IReadOnlyList<TierDefinition> GetAllTiers();

    /// <summary>
    /// Selects a random tier from the given options using weighted selection.
    /// </summary>
    /// <param name="possibleTierIds">List of valid tier IDs for this monster.</param>
    /// <returns>The selected tier definition.</returns>
    TierDefinition SelectRandomTier(IReadOnlyList<string> possibleTierIds);

    /// <summary>
    /// Gets the default tier (Common).
    /// </summary>
    /// <returns>The Common tier definition.</returns>
    TierDefinition GetDefaultTier();
}
```

### 3.2 ITraitService

**File:** `src/Core/RuneAndRust.Application/Interfaces/ITraitService.cs`

```csharp
using RuneAndRust.Domain.Definitions;

namespace RuneAndRust.Application.Interfaces;

/// <summary>
/// Service for managing monster trait definitions.
/// </summary>
public interface ITraitService
{
    /// <summary>
    /// Gets a trait definition by ID.
    /// </summary>
    /// <param name="traitId">The trait identifier.</param>
    /// <returns>The trait definition, or null if not found.</returns>
    MonsterTrait? GetTrait(string traitId);

    /// <summary>
    /// Gets all trait definitions.
    /// </summary>
    /// <returns>Read-only list of all trait definitions.</returns>
    IReadOnlyList<MonsterTrait> GetAllTraits();

    /// <summary>
    /// Gets multiple traits by their IDs.
    /// </summary>
    /// <param name="traitIds">The trait identifiers.</param>
    /// <returns>Read-only list of matching trait definitions.</returns>
    IReadOnlyList<MonsterTrait> GetTraits(IEnumerable<string> traitIds);

    /// <summary>
    /// Selects random traits for a monster based on tier.
    /// </summary>
    /// <param name="possibleTraitIds">List of valid trait IDs for this monster.</param>
    /// <param name="tier">The monster's tier (affects trait count).</param>
    /// <returns>List of selected trait IDs.</returns>
    IReadOnlyList<string> SelectRandomTraits(
        IReadOnlyList<string> possibleTraitIds,
        TierDefinition tier);
}
```

### 3.3 IGameConfigurationProvider Updates

**File:** `src/Core/RuneAndRust.Application/Interfaces/IConfigurationProvider.cs`

**Add to interface:**

```csharp
/// <summary>
/// Gets all tier definitions.
/// </summary>
/// <returns>Read-only list of tier definitions.</returns>
IReadOnlyList<TierDefinition> GetTiers();

/// <summary>
/// Gets a tier definition by ID.
/// </summary>
/// <param name="tierId">The tier identifier.</param>
/// <returns>The tier definition or null if not found.</returns>
TierDefinition? GetTierById(string tierId);

/// <summary>
/// Gets all trait definitions.
/// </summary>
/// <returns>Read-only list of trait definitions.</returns>
IReadOnlyList<MonsterTrait> GetTraits();

/// <summary>
/// Gets a trait definition by ID.
/// </summary>
/// <param name="traitId">The trait identifier.</param>
/// <returns>The trait definition or null if not found.</returns>
MonsterTrait? GetTraitById(string traitId);
```

---

## 4. Service Implementations

### 4.1 TierService

**File:** `src/Core/RuneAndRust.Application/Services/TierService.cs`

```csharp
using Microsoft.Extensions.Logging;
using RuneAndRust.Application.Interfaces;
using RuneAndRust.Domain.Definitions;

namespace RuneAndRust.Application.Services;

/// <summary>
/// Service for managing monster tier definitions.
/// </summary>
public class TierService : ITierService
{
    private readonly ILogger<TierService> _logger;
    private readonly IGameConfigurationProvider _configProvider;
    private readonly Random _random;

    public TierService(
        ILogger<TierService> logger,
        IGameConfigurationProvider configProvider)
    {
        _logger = logger ?? throw new ArgumentNullException(nameof(logger));
        _configProvider = configProvider ?? throw new ArgumentNullException(nameof(configProvider));
        _random = new Random();
    }

    /// <summary>
    /// Constructor for testing with specific random instance.
    /// </summary>
    internal TierService(
        ILogger<TierService> logger,
        IGameConfigurationProvider configProvider,
        Random random)
    {
        _logger = logger;
        _configProvider = configProvider;
        _random = random;
    }

    /// <inheritdoc />
    public TierDefinition? GetTier(string tierId)
    {
        if (string.IsNullOrWhiteSpace(tierId))
            return null;

        return _configProvider.GetTierById(tierId.ToLowerInvariant());
    }

    /// <inheritdoc />
    public IReadOnlyList<TierDefinition> GetAllTiers()
    {
        return _configProvider.GetTiers();
    }

    /// <inheritdoc />
    public TierDefinition SelectRandomTier(IReadOnlyList<string> possibleTierIds)
    {
        if (possibleTierIds == null || possibleTierIds.Count == 0)
        {
            _logger.LogDebug("No possible tiers specified, returning default Common tier");
            return GetDefaultTier();
        }

        // Get valid tiers
        var validTiers = possibleTierIds
            .Select(id => GetTier(id))
            .Where(t => t != null)
            .Cast<TierDefinition>()
            .ToList();

        if (validTiers.Count == 0)
        {
            _logger.LogWarning("No valid tiers found from possible tiers, returning default");
            return GetDefaultTier();
        }

        // Weighted random selection
        var totalWeight = validTiers.Sum(t => t.SpawnWeight);
        if (totalWeight <= 0)
        {
            return validTiers[0];
        }

        var roll = _random.Next(totalWeight);
        var currentWeight = 0;

        foreach (var tier in validTiers)
        {
            currentWeight += tier.SpawnWeight;
            if (roll < currentWeight)
            {
                _logger.LogDebug("Selected tier: {TierId} (roll: {Roll}/{Total})",
                    tier.Id, roll, totalWeight);
                return tier;
            }
        }

        return validTiers[^1];
    }

    /// <inheritdoc />
    public TierDefinition GetDefaultTier()
    {
        return GetTier("common") ?? TierDefinition.Common;
    }
}
```

### 4.2 TraitService

**File:** `src/Core/RuneAndRust.Application/Services/TraitService.cs`

```csharp
using Microsoft.Extensions.Logging;
using RuneAndRust.Application.Interfaces;
using RuneAndRust.Domain.Definitions;

namespace RuneAndRust.Application.Services;

/// <summary>
/// Service for managing monster trait definitions.
/// </summary>
public class TraitService : ITraitService
{
    private readonly ILogger<TraitService> _logger;
    private readonly IGameConfigurationProvider _configProvider;
    private readonly Random _random;

    public TraitService(
        ILogger<TraitService> logger,
        IGameConfigurationProvider configProvider)
    {
        _logger = logger ?? throw new ArgumentNullException(nameof(logger));
        _configProvider = configProvider ?? throw new ArgumentNullException(nameof(configProvider));
        _random = new Random();
    }

    /// <summary>
    /// Constructor for testing with specific random instance.
    /// </summary>
    internal TraitService(
        ILogger<TraitService> logger,
        IGameConfigurationProvider configProvider,
        Random random)
    {
        _logger = logger;
        _configProvider = configProvider;
        _random = random;
    }

    /// <inheritdoc />
    public MonsterTrait? GetTrait(string traitId)
    {
        if (string.IsNullOrWhiteSpace(traitId))
            return null;

        return _configProvider.GetTraitById(traitId.ToLowerInvariant());
    }

    /// <inheritdoc />
    public IReadOnlyList<MonsterTrait> GetAllTraits()
    {
        return _configProvider.GetTraits();
    }

    /// <inheritdoc />
    public IReadOnlyList<MonsterTrait> GetTraits(IEnumerable<string> traitIds)
    {
        return traitIds
            .Select(id => GetTrait(id))
            .Where(t => t != null)
            .Cast<MonsterTrait>()
            .ToList();
    }

    /// <inheritdoc />
    public IReadOnlyList<string> SelectRandomTraits(
        IReadOnlyList<string> possibleTraitIds,
        TierDefinition tier)
    {
        if (possibleTraitIds == null || possibleTraitIds.Count == 0)
        {
            return [];
        }

        // Determine trait count based on tier
        var maxTraits = tier.Id switch
        {
            "common" => 0,      // Common monsters have no traits
            "named" => 1,       // Named monsters get 1 trait
            "elite" => 2,       // Elite monsters get up to 2 traits
            "boss" => 3,        // Boss monsters get up to 3 traits
            _ => 0
        };

        if (maxTraits == 0)
        {
            return [];
        }

        // Randomly select traits
        var availableTraits = possibleTraitIds.ToList();
        var selectedTraits = new List<string>();

        var traitCount = _random.Next(1, maxTraits + 1); // At least 1 if tier allows

        for (var i = 0; i < traitCount && availableTraits.Count > 0; i++)
        {
            var index = _random.Next(availableTraits.Count);
            var traitId = availableTraits[index];

            if (GetTrait(traitId) != null)
            {
                selectedTraits.Add(traitId);
            }

            availableTraits.RemoveAt(index);
        }

        _logger.LogDebug("Selected {Count} traits for {Tier} monster: {Traits}",
            selectedTraits.Count, tier.Id, string.Join(", ", selectedTraits));

        return selectedTraits;
    }
}
```

### 4.3 MonsterService Updates

**File:** `src/Core/RuneAndRust.Application/Services/MonsterService.cs`

Update the `CreateMonsterFromDefinition` method:

```csharp
/// <summary>
/// Service for spawning monsters from configuration-driven definitions.
/// </summary>
public class MonsterService : IMonsterService
{
    private readonly IGameConfigurationProvider _configProvider;
    private readonly ITierService _tierService;
    private readonly ITraitService _traitService;
    private readonly Random _random;

    public MonsterService(
        IGameConfigurationProvider configProvider,
        ITierService tierService,
        ITraitService traitService)
    {
        _configProvider = configProvider ?? throw new ArgumentNullException(nameof(configProvider));
        _tierService = tierService ?? throw new ArgumentNullException(nameof(tierService));
        _traitService = traitService ?? throw new ArgumentNullException(nameof(traitService));
        _random = new Random();
    }

    /// <inheritdoc />
    public Monster SpawnMonster(string definitionId)
    {
        var definition = GetDefinition(definitionId)
            ?? throw new ArgumentException($"Monster definition '{definitionId}' not found.", nameof(definitionId));

        return CreateMonsterFromDefinition(definition);
    }

    /// <inheritdoc />
    public Monster SpawnMonster(string definitionId, string tierId)
    {
        var definition = GetDefinition(definitionId)
            ?? throw new ArgumentException($"Monster definition '{definitionId}' not found.", nameof(definitionId));

        var tier = _tierService.GetTier(tierId) ?? _tierService.GetDefaultTier();

        return CreateMonsterFromDefinition(definition, tier);
    }

    private Monster CreateMonsterFromDefinition(MonsterDefinition definition, TierDefinition? forcedTier = null)
    {
        // Select tier
        var tier = forcedTier ?? _tierService.SelectRandomTier(definition.PossibleTiers);

        // Select traits based on tier
        var traitIds = _traitService.SelectRandomTraits(definition.PossibleTraits, tier);

        // Calculate tiered stats
        var health = (int)Math.Round(definition.BaseHealth * tier.HealthMultiplier);
        var attack = (int)Math.Round(definition.BaseAttack * tier.AttackMultiplier);
        var defense = (int)Math.Round(definition.BaseDefense * tier.DefenseMultiplier);
        var experienceValue = (int)Math.Round(definition.BaseExperienceValue * tier.ExperienceMultiplier);

        // Apply trait modifiers to stats
        var traits = _traitService.GetTraits(traitIds);
        foreach (var trait in traits)
        {
            if (trait.Effect == TraitEffect.Armored)
            {
                defense += trait.EffectValue;
            }
            // Other trait stat modifiers could be added here
        }

        var stats = new Stats(health, attack, defense);

        // Generate display name
        var (displayName, isNamed) = GenerateDisplayName(definition, tier);

        return new Monster(
            definitionId: definition.Id,
            name: definition.Name,
            description: definition.Description,
            maxHealth: health,
            stats: stats,
            experienceValue: experienceValue,
            resistances: definition.BaseResistances,
            tierId: tier.Id,
            traitIds: traitIds,
            displayName: displayName,
            isNamed: isNamed,
            displayColor: tier.Color,
            lootMultiplier: tier.LootMultiplier
        );
    }

    private (string DisplayName, bool IsNamed) GenerateDisplayName(
        MonsterDefinition definition,
        TierDefinition tier)
    {
        // Named tier gets a generated unique name
        if (tier.GeneratesUniqueName)
        {
            var nameConfig = definition.NameGenerator ?? NameGeneratorConfig.Default;
            var generatedName = nameConfig.GenerateName(definition.Name, _random);
            return (generatedName, true);
        }

        // Other tiers may have a prefix
        if (!string.IsNullOrEmpty(tier.NamePrefix))
        {
            return ($"{tier.NamePrefix} {definition.Name}", false);
        }

        // Common tier uses base name
        return (definition.Name, false);
    }

    // ... rest of existing methods ...
}
```

---

## 5. Configuration

### 5.1 Tiers Configuration

**File:** `config/tiers.json`

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "tiers": [
    {
      "id": "common",
      "name": "Common",
      "namePrefix": null,
      "healthMultiplier": 1.0,
      "attackMultiplier": 1.0,
      "defenseMultiplier": 1.0,
      "experienceMultiplier": 1.0,
      "lootMultiplier": 1.0,
      "color": "white",
      "spawnWeight": 70,
      "generatesUniqueName": false,
      "sortOrder": 0
    },
    {
      "id": "named",
      "name": "Named",
      "namePrefix": null,
      "healthMultiplier": 1.5,
      "attackMultiplier": 1.3,
      "defenseMultiplier": 1.2,
      "experienceMultiplier": 2.0,
      "lootMultiplier": 2.0,
      "color": "yellow",
      "spawnWeight": 20,
      "generatesUniqueName": true,
      "sortOrder": 1
    },
    {
      "id": "elite",
      "name": "Elite",
      "namePrefix": "Elite",
      "healthMultiplier": 2.0,
      "attackMultiplier": 1.5,
      "defenseMultiplier": 1.5,
      "experienceMultiplier": 3.0,
      "lootMultiplier": 3.0,
      "color": "orange3",
      "spawnWeight": 8,
      "generatesUniqueName": false,
      "sortOrder": 2
    },
    {
      "id": "boss",
      "name": "Boss",
      "namePrefix": "Boss",
      "healthMultiplier": 5.0,
      "attackMultiplier": 2.0,
      "defenseMultiplier": 2.0,
      "experienceMultiplier": 10.0,
      "lootMultiplier": 5.0,
      "color": "red",
      "spawnWeight": 2,
      "generatesUniqueName": false,
      "sortOrder": 3
    }
  ]
}
```

### 5.2 Traits Configuration

**File:** `config/traits.json`

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "traits": [
    {
      "id": "regenerating",
      "name": "Regenerating",
      "description": "Recovers health each turn.",
      "effect": "Regeneration",
      "effectValue": 5,
      "triggerThreshold": null,
      "tags": ["passive", "healing"],
      "color": "green",
      "sortOrder": 0
    },
    {
      "id": "flying",
      "name": "Flying",
      "description": "Harder to hit with melee attacks.",
      "effect": "Flying",
      "effectValue": 3,
      "triggerThreshold": null,
      "tags": ["passive", "defensive"],
      "color": "cyan",
      "sortOrder": 1
    },
    {
      "id": "venomous",
      "name": "Venomous",
      "description": "Attacks may poison the target.",
      "effect": "Venomous",
      "effectValue": 3,
      "triggerThreshold": null,
      "tags": ["combat", "status"],
      "color": "green",
      "sortOrder": 2
    },
    {
      "id": "armored",
      "name": "Armored",
      "description": "Reduces all incoming damage.",
      "effect": "Armored",
      "effectValue": 3,
      "triggerThreshold": null,
      "tags": ["passive", "defensive"],
      "color": "grey",
      "sortOrder": 3
    },
    {
      "id": "berserker",
      "name": "Berserker",
      "description": "Deals more damage when wounded.",
      "effect": "Berserker",
      "effectValue": 50,
      "triggerThreshold": 30,
      "tags": ["combat", "offensive"],
      "color": "red",
      "sortOrder": 4
    }
  ]
}
```

### 5.3 Updated Monsters Configuration

**File:** `config/monsters.json` (partial update)

```json
{
  "monsters": [
    {
      "id": "goblin",
      "name": "Goblin",
      "description": "A small, green creature with sharp teeth and beady eyes.",
      "examineText": "This goblin clutches a rusty dagger...",
      "baseHealth": 30,
      "baseAttack": 8,
      "baseDefense": 2,
      "baseExperienceValue": 25,
      "aiBehavior": "Aggressive",
      "tags": ["humanoid"],
      "spawnWeight": 100,
      "baseResistances": {},
      "possibleTiers": ["common", "named"],
      "possibleTraits": ["berserker"]
    },
    {
      "id": "skeleton",
      "name": "Skeleton",
      "description": "An animated pile of bones held together by dark magic.",
      "examineText": "Dark magic holds these bones together...",
      "baseHealth": 25,
      "baseAttack": 10,
      "baseDefense": 1,
      "baseExperienceValue": 30,
      "aiBehavior": "Aggressive",
      "tags": ["undead"],
      "spawnWeight": 80,
      "baseResistances": {
        "physical": 25,
        "fire": -50,
        "poison": 100,
        "holy": -50,
        "dark": 50
      },
      "possibleTiers": ["common", "named", "elite"],
      "possibleTraits": []
    },
    {
      "id": "orc",
      "name": "Orc",
      "description": "A hulking, brutish warrior with green skin and tusks.",
      "examineText": "This orc towers over you, muscles rippling...",
      "baseHealth": 50,
      "baseAttack": 12,
      "baseDefense": 4,
      "baseExperienceValue": 50,
      "aiBehavior": "Aggressive",
      "tags": ["humanoid"],
      "spawnWeight": 50,
      "baseResistances": {},
      "possibleTiers": ["common", "named", "elite", "boss"],
      "possibleTraits": ["berserker", "armored"],
      "nameGenerator": {
        "prefixes": ["Gr", "Kr", "Th", "Br", "Sk", "Ug", "Mog", "Zug"],
        "suffixes": ["ok", "ag", "ul", "ax", "or", "ash", "nak", "gul"],
        "titleFormat": "{0} the {1}"
      }
    },
    {
      "id": "giant_spider",
      "name": "Giant Spider",
      "description": "A horse-sized spider with glistening fangs.",
      "examineText": "Eight multi-faceted eyes gleam...",
      "baseHealth": 20,
      "baseAttack": 6,
      "baseDefense": 1,
      "baseExperienceValue": 20,
      "aiBehavior": "Defensive",
      "tags": ["beast"],
      "spawnWeight": 60,
      "baseResistances": {},
      "possibleTiers": ["common", "named", "elite"],
      "possibleTraits": ["venomous"]
    },
    {
      "id": "slime",
      "name": "Slime",
      "description": "A quivering mass of translucent, acidic gel.",
      "examineText": "This gelatinous creature pulses and wobbles...",
      "baseHealth": 40,
      "baseAttack": 4,
      "baseDefense": 0,
      "baseExperienceValue": 15,
      "aiBehavior": "Chaotic",
      "tags": ["ooze"],
      "spawnWeight": 40,
      "baseResistances": {
        "physical": 50,
        "fire": -25,
        "ice": -25,
        "lightning": -50,
        "poison": 100
      },
      "possibleTiers": ["common", "named"],
      "possibleTraits": ["regenerating"]
    }
  ]
}
```

### 5.4 Configuration DTOs

**File:** `src/Core/RuneAndRust.Application/Configuration/TierConfigurationDto.cs`

```csharp
using System.Text.Json.Serialization;

namespace RuneAndRust.Application.Configuration;

/// <summary>
/// Root configuration object for tiers.json.
/// </summary>
public class TierConfiguration
{
    [JsonPropertyName("tiers")]
    public List<TierDefinitionDto> Tiers { get; set; } = [];
}

/// <summary>
/// DTO for deserializing tier definitions from JSON.
/// </summary>
public class TierDefinitionDto
{
    [JsonPropertyName("id")]
    public string Id { get; set; } = string.Empty;

    [JsonPropertyName("name")]
    public string Name { get; set; } = string.Empty;

    [JsonPropertyName("namePrefix")]
    public string? NamePrefix { get; set; }

    [JsonPropertyName("healthMultiplier")]
    public float HealthMultiplier { get; set; } = 1.0f;

    [JsonPropertyName("attackMultiplier")]
    public float AttackMultiplier { get; set; } = 1.0f;

    [JsonPropertyName("defenseMultiplier")]
    public float DefenseMultiplier { get; set; } = 1.0f;

    [JsonPropertyName("experienceMultiplier")]
    public float ExperienceMultiplier { get; set; } = 1.0f;

    [JsonPropertyName("lootMultiplier")]
    public float LootMultiplier { get; set; } = 1.0f;

    [JsonPropertyName("color")]
    public string Color { get; set; } = "white";

    [JsonPropertyName("spawnWeight")]
    public int SpawnWeight { get; set; } = 100;

    [JsonPropertyName("generatesUniqueName")]
    public bool GeneratesUniqueName { get; set; } = false;

    [JsonPropertyName("sortOrder")]
    public int SortOrder { get; set; } = 0;
}
```

**File:** `src/Core/RuneAndRust.Application/Configuration/TraitConfigurationDto.cs`

```csharp
using System.Text.Json.Serialization;

namespace RuneAndRust.Application.Configuration;

/// <summary>
/// Root configuration object for traits.json.
/// </summary>
public class TraitConfiguration
{
    [JsonPropertyName("traits")]
    public List<MonsterTraitDto> Traits { get; set; } = [];
}

/// <summary>
/// DTO for deserializing trait definitions from JSON.
/// </summary>
public class MonsterTraitDto
{
    [JsonPropertyName("id")]
    public string Id { get; set; } = string.Empty;

    [JsonPropertyName("name")]
    public string Name { get; set; } = string.Empty;

    [JsonPropertyName("description")]
    public string Description { get; set; } = string.Empty;

    [JsonPropertyName("effect")]
    public string Effect { get; set; } = "None";

    [JsonPropertyName("effectValue")]
    public int EffectValue { get; set; } = 0;

    [JsonPropertyName("triggerThreshold")]
    public int? TriggerThreshold { get; set; }

    [JsonPropertyName("tags")]
    public List<string> Tags { get; set; } = [];

    [JsonPropertyName("color")]
    public string Color { get; set; } = "white";

    [JsonPropertyName("sortOrder")]
    public int SortOrder { get; set; } = 0;
}
```

---

## 6. Rendering Changes

### 6.1 Room Monster Display

**Update SpectreGameRenderer:**

```csharp
private void RenderMonsters(Room room, IMonsterService monsterService, ITraitService traitService)
{
    var monsters = room.GetAliveMonsters();
    if (!monsters.Any()) return;

    AnsiConsole.MarkupLine("[red]Enemies:[/]");
    foreach (var monster in monsters)
    {
        var tagDisplay = string.Empty;
        if (!string.IsNullOrEmpty(monster.DefinitionId))
        {
            var definition = monsterService.GetDefinition(monster.DefinitionId);
            if (definition?.Tags.Count > 0)
            {
                tagDisplay = $" ({string.Join(", ", definition.Tags)})";
            }
        }

        // Use display color from tier
        var coloredName = $"[{monster.DisplayColor}]{monster.DisplayName}[/]";

        AnsiConsole.MarkupLine($"  • {coloredName}{tagDisplay} - HP: {monster.Health}/{monster.MaxHealth}");

        // Display traits for Named/Elite/Boss monsters
        if (monster.TraitIds.Count > 0)
        {
            var traits = traitService.GetTraits(monster.TraitIds);
            var traitNames = traits.Select(t => $"[{t.Color}]{t.Name}[/]");
            AnsiConsole.MarkupLine($"    Traits: {string.Join(", ", traitNames)}");
        }
    }
}
```

### 6.2 Examine Monster with Tier and Traits

**Update examine output:**

```csharp
private string FormatMonsterExamination(
    Monster monster,
    MonsterDefinition? definition,
    TierDefinition? tier,
    IReadOnlyList<MonsterTrait> traits)
{
    var sb = new StringBuilder();

    // Header with colored name
    sb.AppendLine($"[{monster.DisplayColor}]=== {monster.DisplayName} ===[/]");

    // Tier indicator (if not common)
    if (tier != null && tier.Id != "common")
    {
        sb.AppendLine($"[{tier.Color}]{tier.Name} Monster[/]");
    }

    sb.AppendLine();

    // Description
    if (definition != null && !string.IsNullOrEmpty(definition.ExamineText))
    {
        sb.AppendLine(definition.ExamineText);
    }
    else
    {
        sb.AppendLine(monster.Description);
    }

    sb.AppendLine();

    // Tags
    if (definition?.Tags.Count > 0)
    {
        sb.AppendLine($"Type: {string.Join(", ", definition.Tags)}");
    }

    // Health
    sb.AppendLine($"Health: {monster.Health}/{monster.MaxHealth}");

    // Traits
    if (traits.Count > 0)
    {
        sb.AppendLine();
        sb.AppendLine("Traits:");
        foreach (var trait in traits)
        {
            sb.AppendLine($"  [{trait.Color}]{trait.Name}[/]: {trait.Description}");
        }
    }

    // Resistances (from v0.0.9b)
    var significantResistances = monster.Resistances.GetSignificantResistances().ToList();
    if (significantResistances.Any())
    {
        sb.AppendLine();
        sb.AppendLine("Resistances:");
        // ... existing resistance display code ...
    }

    return sb.ToString();
}
```

### 6.3 Display Examples

**Common Monster:**
```
You enter the Cavern.
A damp cave with dripping stalactites.

Enemies:
  • Goblin (humanoid) - HP: 30/30
  • Goblin (humanoid) - HP: 30/30

Exits: north, east
```

**Named Monster:**
```
You enter the Ambush Point.
A narrow passage perfect for an ambush.

Enemies:
  • Grok the Orc (humanoid) - HP: 75/75
    Traits: Berserker, Armored

Exits: south
```

**Elite Monster:**
```
You enter the Dungeon Depths.
A dark chamber filled with ancient bones.

Enemies:
  • Elite Skeleton (undead) - HP: 50/50
    Traits: Armored
  • Skeleton (undead) - HP: 25/25
  • Skeleton (undead) - HP: 25/25

Exits: north, south
```

**Examine Named Monster:**
```
=== Grok the Orc ===
Named Monster

This orc towers over you, muscles rippling beneath scarred green skin.
Its yellowed tusks protrude from a jaw set in a permanent snarl.

Type: humanoid
Health: 75/75

Traits:
  Berserker: Deals more damage when wounded.
  Armored: Reduces all incoming damage.
```

---

## 7. Default Tiers

| Tier | HP | ATK | DEF | XP | Loot | Color | Weight | Unique Name |
|------|-----|-----|-----|-----|------|-------|--------|-------------|
| Common | 1.0x | 1.0x | 1.0x | 1.0x | 1.0x | White | 70 | No |
| Named | 1.5x | 1.3x | 1.2x | 2.0x | 2.0x | Yellow | 20 | Yes |
| Elite | 2.0x | 1.5x | 1.5x | 3.0x | 3.0x | Orange | 8 | No |
| Boss | 5.0x | 2.0x | 2.0x | 10.0x | 5.0x | Red | 2 | No |

---

## 8. Default Traits

| Trait | Effect | Value | Threshold | Description |
|-------|--------|-------|-----------|-------------|
| Regenerating | Regeneration | 5 HP/turn | - | Recovers health each turn |
| Flying | Flying | +3 DEF | - | Harder to hit with melee |
| Venomous | Venomous | 3 dmg/turn | - | Attacks may poison |
| Armored | Armored | +3 DEF | - | Reduces all damage taken |
| Berserker | Berserker | +50% dmg | 30% HP | More damage when wounded |

---

## 9. Acceptance Criteria

### 9.1 Functional Requirements

- [ ] Tier definitions load from `config/tiers.json`
- [ ] Trait definitions load from `config/traits.json`
- [ ] Four default tiers defined (Common, Named, Elite, Boss)
- [ ] Five default traits defined (Regenerating, Flying, Venomous, Armored, Berserker)
- [ ] Tier multipliers apply to monster HP, ATK, DEF
- [ ] Tier multipliers apply to XP rewards
- [ ] Loot multiplier stored for v0.0.9d integration
- [ ] Traits are assigned based on tier (Common=0, Named=1, Elite=2, Boss=3 max)
- [ ] Named tier monsters get procedurally generated names
- [ ] Elite/Boss monsters display with tier prefix
- [ ] Monster display shows tier color
- [ ] Monster display shows trait list for non-common tiers
- [ ] Examine command shows tier and traits
- [ ] Armored trait adds to defense stat
- [ ] `MonsterService.SpawnMonster(id, tierId)` allows forced tier selection

### 9.2 Non-Functional Requirements

- [ ] Configuration loading is performant (cached after first load)
- [ ] Invalid configuration produces clear error messages
- [ ] Services are testable with mock dependencies

---

## 10. Test Specifications

### 10.1 TierDefinition Tests (~3 tests)

| Test Name | Description |
|-----------|-------------|
| `Create_ValidInput_ReturnsTierDefinition` | Valid parameters create tier |
| `Create_InvalidMultiplier_ThrowsException` | Zero/negative multiplier throws |
| `Common_ReturnsDefaultValues` | Default tier has correct values |

### 10.2 TierService Tests (~4 tests)

| Test Name | Description |
|-----------|-------------|
| `GetTier_ValidId_ReturnsTier` | Known ID returns tier |
| `GetTier_InvalidId_ReturnsNull` | Unknown ID returns null |
| `SelectRandomTier_UsesWeightedSelection` | Higher weights selected more |
| `SelectRandomTier_EmptyList_ReturnsDefault` | Empty list returns Common |

### 10.3 TraitService Tests (~3 tests)

| Test Name | Description |
|-----------|-------------|
| `GetTrait_ValidId_ReturnsTrait` | Known ID returns trait |
| `SelectRandomTraits_CommonTier_ReturnsEmpty` | Common tier gets no traits |
| `SelectRandomTraits_EliteTier_ReturnsUpToTwo` | Elite tier gets 1-2 traits |

### 10.4 MonsterService Tier Tests (~4 tests)

| Test Name | Description |
|-----------|-------------|
| `SpawnMonster_AppliesTierMultipliers` | Stats multiplied by tier |
| `SpawnMonster_NamedTier_GeneratesUniqueName` | Named tier creates "X the Y" |
| `SpawnMonster_EliteTier_HasPrefix` | Elite tier adds "Elite" prefix |
| `SpawnMonster_WithForcedTier_UsesForcedTier` | Forced tier overrides random |

### 10.5 Integration Tests (~2 tests)

| Test Name | Description |
|-----------|-------------|
| `SpawnedMonster_HasCorrectXPWithTier` | XP includes tier multiplier |
| `ExamineMonster_ShowsTierAndTraits` | Examine displays tier/traits |

---

## 11. Dependencies

### 11.1 Required Prior Work

| Dependency | Version | Status | Notes |
|------------|---------|--------|-------|
| MonsterDefinition | v0.0.9a | Required | Extended with PossibleTiers, PossibleTraits |
| MonsterService | v0.0.9a | Required | Updated for tier/trait spawning |
| Monster entity | v0.0.9a | Required | Extended with tier/trait properties |
| DamageResistances | v0.0.9b | Required | Monster resistances preserved |
| Configuration system | v0.0.3 | Complete | JSON loading infrastructure |

### 11.2 External Dependencies

None new - uses existing System.Text.Json for configuration loading.

---

## 12. Files Summary

### 12.1 New Files

| File | Purpose |
|------|---------|
| `src/Core/RuneAndRust.Domain/Definitions/TierDefinition.cs` | Tier entity |
| `src/Core/RuneAndRust.Domain/Definitions/MonsterTrait.cs` | Trait entity |
| `src/Core/RuneAndRust.Domain/Enums/TraitEffect.cs` | Trait effect enum |
| `src/Core/RuneAndRust.Domain/ValueObjects/NameGeneratorConfig.cs` | Name generation config |
| `src/Core/RuneAndRust.Application/Interfaces/ITierService.cs` | Tier service interface |
| `src/Core/RuneAndRust.Application/Interfaces/ITraitService.cs` | Trait service interface |
| `src/Core/RuneAndRust.Application/Services/TierService.cs` | Tier service implementation |
| `src/Core/RuneAndRust.Application/Services/TraitService.cs` | Trait service implementation |
| `src/Core/RuneAndRust.Application/Configuration/TierConfigurationDto.cs` | Tier config DTOs |
| `src/Core/RuneAndRust.Application/Configuration/TraitConfigurationDto.cs` | Trait config DTOs |
| `config/tiers.json` | Tier definitions |
| `config/traits.json` | Trait definitions |
| `tests/RuneAndRust.Domain.Tests/Definitions/TierDefinitionTests.cs` | Tier tests |
| `tests/RuneAndRust.Application.Tests/Services/TierServiceTests.cs` | TierService tests |
| `tests/RuneAndRust.Application.Tests/Services/TraitServiceTests.cs` | TraitService tests |

### 12.2 Modified Files

| File | Changes |
|------|---------|
| `MonsterDefinition.cs` | Add PossibleTiers, PossibleTraits, NameGenerator |
| `Monster.cs` | Add TierId, TraitIds, DisplayName, IsNamed, DisplayColor, LootMultiplier |
| `MonsterService.cs` | Add tier/trait spawning logic |
| `MonsterDefinitionDto.cs` | Add tier/trait JSON properties |
| `IGameConfigurationProvider.cs` | Add GetTiers, GetTierById, GetTraits, GetTraitById |
| `JsonConfigurationProvider.cs` | Implement tier/trait loading |
| `SpectreGameRenderer.cs` | Update monster display with tier/traits |
| `config/monsters.json` | Add possibleTiers, possibleTraits to monsters |

---

## 13. Future Considerations

### 13.1 v0.0.9d Integration

The `LootMultiplier` property on Monster will be used by the LootService to scale currency and drop rates based on tier.

### 13.2 Combat Trait Processing

Future versions may add:
- Regeneration processing at turn end
- Flying defense bonus during combat
- Venomous poison application on hit
- Berserker damage bonus calculation

### 13.3 Boss Mechanics

Future boss-specific features:
- Multiple combat phases
- Special abilities at HP thresholds
- Dialogue/story integration
- Unique loot tables

---

## 14. Risk Assessment

| Risk | Likelihood | Impact | Mitigation |
|------|------------|--------|------------|
| Balance issues with multipliers | High | Medium | Start conservative, iterate |
| Trait combinations too powerful | Medium | Medium | Limit trait count by tier |
| Name generation creates inappropriate names | Low | Low | Curated prefix/suffix lists |
| Configuration complexity | Medium | Low | Clear documentation, defaults |
| Breaking existing spawning | Low | High | Maintain backward compatibility |

---

*This design specification provides the foundation for monster difficulty scaling and special abilities, creating varied and challenging combat encounters.*
