# v0.20.4a Changelog — Myrk-gengr Tier 1 Foundation

**Version:** 0.20.4a
**Date:** 2026-02-10

## Added

### Domain Layer — Enums

- `MyrkgengrAbilityId` — 9 ability identifiers across 4 tiers
- `LightLevelType` — 5 light levels (Darkness → Sunlight) for shadow mechanics
- `ShadowAbilityType` — 6 activation types for Myrk-gengr abilities

### Domain Layer — Value Objects

- `ShadowEssenceResource` — Resource pool (max 50) with darkness-based generation
- `ShadowLightLevel` — Environmental light conditions with factory methods and query helpers
- `CorruptionRiskResult` — Corruption risk evaluation outcomes with player-facing descriptions
- `ShadowPosition` — Grid positions with light level data for Shadow Step targeting

### Application Layer — Service Interfaces

- `IShadowEssenceService` — Shadow Essence spending, generation, and query operations
- `ILightLevelService` — Environmental light condition queries
- `IShadowCorruptionService` — Corruption risk evaluation for shadow abilities
- `IMyrkgengrAbilityService` — Tier 1 ability execution and PP cost management

### Application Layer — Services

- `ShadowEssenceService` — Shadow Essence operations with structured logging
- `ShadowCorruptionService` — Corruption risk evaluation using ability × light level lookup tables
- `MyrkgengrAbilityService` — Tier 1 abilities: Shadow Step, Cloak of Night, Dark-Adapted

### Configuration

- Updated `specializations.json` with Shadow Essence resource (max 50, starts 50, regen 5/turn) and Tier 1 abilities

### Tests

- `ShadowEssenceResourceTests` — 12 tests for resource creation, spending, generation, and display
- `ShadowLightLevelTests` — 8 tests for factory methods, queries, and multiplier calculations
- `CorruptionRiskResultTests` — 5 tests for triggered/safe results and descriptions
- `MyrkgengrAbilityServiceTests` — 22 tests for Shadow Step, Cloak of Night, Dark-Adapted, PP costs
- `ShadowCorruptionServiceTests` — 11 tests for risk evaluation, coherent targets, and triggers

## Changed

- Renamed `LightLevel` value object to `ShadowLightLevel` to avoid collision with existing `LightLevel` enum
- Updated `SpecializationProviderTests` special resource count from 7 to 8 (MyrkGengr added)
