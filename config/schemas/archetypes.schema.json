{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "archetypes.schema.json",
    "title": "Archetypes Configuration",
    "description": "Configuration for character archetypes defining combat roles, primary resources, display metadata, resource pool bonuses, starting abilities, available specializations, and recommended attribute builds. Archetypes are permanent choices made during character creation that determine a character's fundamental combat identity.",
    "type": "object",
    "required": ["archetypes"],
    "properties": {
        "$schema": {
            "type": "string",
            "description": "Reference to the JSON schema file for validation"
        },
        "archetypes": {
            "type": "array",
            "description": "List of archetype definitions. Exactly 4 archetypes are required.",
            "items": { "$ref": "#/definitions/archetypeDefinition" },
            "minItems": 4,
            "maxItems": 4
        }
    },
    "additionalProperties": false,
    "definitions": {
        "archetypeDefinition": {
            "type": "object",
            "description": "Core definition for a single archetype including display metadata, combat role, resource type, resource pool bonuses, starting abilities, and available specializations.",
            "required": [
                "archetypeId",
                "displayName",
                "tagline",
                "description",
                "selectionText",
                "combatRole",
                "primaryResource",
                "playstyleDescription",
                "isPermanent",
                "resourceBonuses",
                "startingAbilities",
                "availableSpecializations"
            ],
            "properties": {
                "archetypeId": {
                    "type": "string",
                    "description": "The archetype enum value. Must be one of the four defined archetypes.",
                    "enum": ["Warrior", "Skirmisher", "Mystic", "Adept"]
                },
                "displayName": {
                    "type": "string",
                    "description": "Display name shown in UI (e.g., 'Warrior')",
                    "minLength": 1,
                    "maxLength": 50
                },
                "tagline": {
                    "type": "string",
                    "description": "Thematic tagline for the archetype (e.g., 'The Unyielding Bulwark')",
                    "minLength": 1,
                    "maxLength": 100
                },
                "description": {
                    "type": "string",
                    "description": "Full description of the archetype's role and characteristics",
                    "minLength": 1,
                    "maxLength": 500
                },
                "selectionText": {
                    "type": "string",
                    "description": "Flavor text for character creation selection in second-person perspective",
                    "minLength": 1,
                    "maxLength": 500
                },
                "combatRole": {
                    "type": "string",
                    "description": "Combat role descriptor (e.g., 'Tank / Melee DPS')",
                    "minLength": 1,
                    "maxLength": 50
                },
                "primaryResource": {
                    "type": "string",
                    "description": "Primary resource type used by this archetype",
                    "enum": ["Stamina", "AetherPool"]
                },
                "playstyleDescription": {
                    "type": "string",
                    "description": "Brief playstyle guidance for the player",
                    "minLength": 1,
                    "maxLength": 200
                },
                "isPermanent": {
                    "type": "boolean",
                    "description": "Whether the archetype choice is permanent. Must always be true.",
                    "const": true
                },
                "resourceBonuses": {
                    "$ref": "#/definitions/resourceBonuses"
                },
                "startingAbilities": {
                    "type": "array",
                    "description": "Starting abilities granted by the archetype during character creation. Each archetype grants exactly 3 abilities.",
                    "items": { "$ref": "#/definitions/abilityGrant" },
                    "minItems": 3,
                    "maxItems": 3
                },
                "availableSpecializations": {
                    "$ref": "#/definitions/availableSpecializations"
                },
                "recommendedBuilds": {
                    "type": "array",
                    "description": "Optional recommended attribute allocations for Simple mode character creation. Each build defines optimal attribute distributions for the archetype.",
                    "items": { "$ref": "#/definitions/recommendedBuild" },
                    "minItems": 1
                }
            },
            "additionalProperties": false
        },
        "resourceBonuses": {
            "type": "object",
            "description": "Resource pool bonuses provided by the archetype. These bonuses are applied during character creation and affect derived statistics.",
            "required": [
                "maxHpBonus",
                "maxStaminaBonus",
                "maxAetherPoolBonus",
                "movementBonus"
            ],
            "properties": {
                "maxHpBonus": {
                    "type": "integer",
                    "description": "Bonus to maximum HP. Warrior: +49, Skirmisher: +30, Mystic: +20, Adept: +30.",
                    "minimum": 0,
                    "maximum": 100
                },
                "maxStaminaBonus": {
                    "type": "integer",
                    "description": "Bonus to maximum Stamina. Warrior: +5, Skirmisher: +5, Mystic: 0, Adept: 0.",
                    "minimum": 0,
                    "maximum": 50
                },
                "maxAetherPoolBonus": {
                    "type": "integer",
                    "description": "Bonus to maximum Aether Pool. Only Mystic receives +20.",
                    "minimum": 0,
                    "maximum": 50
                },
                "movementBonus": {
                    "type": "integer",
                    "description": "Bonus to movement speed in tiles per turn. Only Skirmisher receives +1.",
                    "minimum": 0,
                    "maximum": 5
                },
                "specialBonus": {
                    "oneOf": [
                        { "type": "null" },
                        { "$ref": "#/definitions/specialBonus" }
                    ],
                    "description": "Optional unique bonus for special effects. Only Adept uses this (+20% ConsumableEffectiveness)."
                }
            },
            "additionalProperties": false
        },
        "abilityGrant": {
            "type": "object",
            "description": "A starting ability granted to the character during archetype selection.",
            "required": [
                "abilityId",
                "abilityName",
                "abilityType",
                "description"
            ],
            "properties": {
                "abilityId": {
                    "type": "string",
                    "description": "Unique ability identifier in kebab-case format (e.g., 'power-strike'). Used to reference the ability in the Ability System.",
                    "pattern": "^[a-z][a-z0-9-]*$",
                    "minLength": 3,
                    "maxLength": 50
                },
                "abilityName": {
                    "type": "string",
                    "description": "Display name for the ability shown in UI (e.g., 'Power Strike')",
                    "minLength": 1,
                    "maxLength": 50
                },
                "abilityType": {
                    "type": "string",
                    "description": "Classification of the ability by activation type",
                    "enum": ["Active", "Passive", "Stance"]
                },
                "description": {
                    "type": "string",
                    "description": "Brief description of the ability's effect for tooltips and panels",
                    "minLength": 1,
                    "maxLength": 200
                }
            },
            "additionalProperties": false
        },
        "availableSpecializations": {
            "type": "object",
            "description": "Specializations available to this archetype during character creation. Each archetype has a curated list of specializations and a recommended first choice for new players.",
            "required": ["specializations", "recommendedFirst"],
            "properties": {
                "specializations": {
                    "type": "array",
                    "description": "List of available specialization IDs in kebab-case format. References specialization definitions in the Specialization System (v0.17.4).",
                    "items": {
                        "type": "string",
                        "pattern": "^[a-z][a-z0-9-]*$",
                        "minLength": 3,
                        "maxLength": 50
                    },
                    "minItems": 1,
                    "uniqueItems": true
                },
                "recommendedFirst": {
                    "type": "string",
                    "description": "The recommended first specialization ID for new players. Must be present in the specializations array.",
                    "pattern": "^[a-z][a-z0-9-]*$",
                    "minLength": 3,
                    "maxLength": 50
                }
            },
            "additionalProperties": false
        },
        "recommendedBuild": {
            "type": "object",
            "description": "A recommended attribute allocation build for Simple mode character creation. Defines optimal attribute distributions based on archetype combat role and optional lineage synergies.",
            "required": ["name", "might", "finesse", "wits", "will", "sturdiness"],
            "properties": {
                "name": {
                    "type": "string",
                    "description": "Display name for this build (e.g., 'Standard Warrior')",
                    "minLength": 1,
                    "maxLength": 100
                },
                "might": {
                    "type": "integer",
                    "description": "Recommended Might attribute value. Affects melee damage and physical feats.",
                    "minimum": 1,
                    "maximum": 10
                },
                "finesse": {
                    "type": "integer",
                    "description": "Recommended Finesse attribute value. Affects agility and ranged accuracy.",
                    "minimum": 1,
                    "maximum": 10
                },
                "wits": {
                    "type": "integer",
                    "description": "Recommended Wits attribute value. Affects perception and Aether Pool.",
                    "minimum": 1,
                    "maximum": 10
                },
                "will": {
                    "type": "integer",
                    "description": "Recommended Will attribute value. Affects mental fortitude and Aether channeling.",
                    "minimum": 1,
                    "maximum": 10
                },
                "sturdiness": {
                    "type": "integer",
                    "description": "Recommended Sturdiness attribute value. Affects HP and resilience.",
                    "minimum": 1,
                    "maximum": 10
                },
                "optimalLineage": {
                    "oneOf": [
                        { "type": "null" },
                        {
                            "type": "string",
                            "description": "Lineage that synergizes best with this build",
                            "enum": ["ClanBorn", "RuneMarked", "IronBlooded", "VargrKin"]
                        }
                    ],
                    "description": "Optional lineage for build optimization. Null for the default lineage-agnostic build."
                }
            },
            "additionalProperties": false
        },
        "specialBonus": {
            "type": "object",
            "description": "A unique special bonus effect that cannot be expressed as a simple numeric resource bonus.",
            "required": ["bonusType", "bonusValue", "description"],
            "properties": {
                "bonusType": {
                    "type": "string",
                    "description": "Type identifier for the bonus. Currently only 'ConsumableEffectiveness' is supported.",
                    "enum": ["ConsumableEffectiveness"]
                },
                "bonusValue": {
                    "type": "number",
                    "description": "Numeric value as a decimal fraction (e.g., 0.20 for +20%). Combined with base 1.0 to produce multiplier.",
                    "minimum": 0,
                    "maximum": 1
                },
                "description": {
                    "type": "string",
                    "description": "Human-readable description for UI display",
                    "minLength": 1,
                    "maxLength": 200
                }
            },
            "additionalProperties": false
        }
    }
}
