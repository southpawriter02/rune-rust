# v0.19.4 JÃ¶tunheim & Vanaheim Implementation - Scope Breakdown

**Version:** 0.19.4
**Theme:** JÃ¶tunheim & Vanaheim (Giants & Bio-Engineering)
**Prerequisites:** v0.19.3 (Muspelheim & Niflheim)
**Total Estimated Tests:** ~22 new tests

---

## Executive Summary

v0.19.4 implements two realms with unique scale mechanics: JÃ¶tunheim (giant-scale industrial graveyard) and Vanaheim (bio-engineered overgrowth). JÃ¶tunheim introduces GiantScale environmental mechanics; Vanaheim introduces MutagenicSpores. Both feature vertical stratification.

| Phase    | Name                 | Focus                                           | Est. Tests |
| -------- | -------------------- | ----------------------------------------------- | ---------- |
| v0.19.4a | JÃ¶tunheim & Vanaheim | Both realm definitions, scale mechanics, spores | ~22        |

---

## Feature Analysis & Categorization

| Feature                   | Complexity | Dependencies           | Assigned Phase |
| ------------------------- | ---------- | ---------------------- | -------------- |
| JÃ¶tunheim BiomeDefinition | Medium     | BiomeDefinition entity | **v0.19.4a**   |
| Vanaheim BiomeDefinition  | Medium     | BiomeDefinition entity | **v0.19.4a**   |
| GiantScale Mechanics      | High       | EnvironmentalCondition | **v0.19.4a**   |
| MutagenicSpores Mechanics | High       | EnvironmentalCondition | **v0.19.4a**   |
| Vertical Stratification   | Medium     | VerticalZone enum      | **v0.19.4a**   |

---

## Phase Definitions

## v0.19.4a: JÃ¶tunheim & Vanaheim Implementation

### Scope

**In Scope:**

- JÃ¶tunheim `BiomeDefinition` (Deck 07 â€” Heavy Industry)
- Vanaheim `BiomeDefinition` (Deck 03 â€” Bio-Engineering)
- JÃ¶tunheim zones: The Bone Yards, Utgard's Shadow, The Grinding Hall
- Vanaheim zones: The Undergrowth, The Canopy Sea, Ymir's Roots
- GiantScale environmental condition (fall damage, navigation)
- MutagenicSpores environmental condition (Corruption accumulation)
- Vertical stratification (DeepRoots to Canopy)
- Scale factor mechanics (3.0x for giants)

**Out of Scope:**

- Other realm implementations (v0.19.5+)
- Corruption system integration (requires Status Effects)
- Climbing/traversal mechanics

### Key Deliverables

| Type                     | Count | Details                       |
| ------------------------ | ----- | ----------------------------- |
| Configuration            | 2     | jotunheim.json, vanaheim.json |
| BiomeDefinitions         | 2     | JÃ¶tunheim, Vanaheim           |
| Zone Definitions         | 6     | 3 per realm                   |
| Environmental Conditions | 2     | GiantScale, MutagenicSpores   |
| Unit Tests               | ~22   |                               |

### Acceptance Criteria

- [ ] JÃ¶tunheim BiomeDefinition loads with ScaleFactor = 3.0
- [ ] Vanaheim BiomeDefinition loads with MutagenicSpores condition
- [ ] The Grinding Hall zone returns GiantScale DC 16
- [ ] The Canopy Sea zone returns MutagenicSpores DC 16
- [ ] Vertical zone ranges correctly assigned
- [ ] Scale factor affects fall damage calculation
- [ ] ~22 unit tests pass

---

## Realm Specifications

### JÃ¶tunheim â€” Deck 07: The Industrial Graveyard

| Property           | Value       |
| ------------------ | ----------- |
| Temperature        | 10Â°C        |
| Aetheric Intensity | 0.2         |
| Humidity           | 40%         |
| Light Level        | 0.5         |
| Scale Factor       | 3.0         |
| Corrosion Rate     | 0.5         |
| Primary Condition  | GiantScale  |
| Vertical Range     | Z: -1 to +3 |

**Zones:**

- **The Bone Yards** â€” Giant skeletal remains, GiantScale DC 10
- **Utgard's Shadow** â€” Ruined giant city, GiantScale DC 12
- **The Grinding Hall** â€” Active machinery, GiantScale DC 16

### Vanaheim â€” Deck 03: The Overgrown Laboratory

| Property           | Value           |
| ------------------ | --------------- |
| Temperature        | 28Â°C            |
| Aetheric Intensity | 0.5             |
| Humidity           | 85%             |
| Light Level        | 0.6             |
| Scale Factor       | 1.0             |
| Corrosion Rate     | 0.4             |
| Primary Condition  | MutagenicSpores |
| Vertical Range     | Z: -2 to +3     |

**Zones:**

- **The Undergrowth** â€” Forest floor, MutagenicSpores DC 10
- **The Canopy Sea** â€” Upper forest, MutagenicSpores DC 16, Corruption x2
- **Ymir's Roots** â€” Deep underground, MutagenicSpores DC 12

---

## Scale Mechanics

### GiantScale Effects

- **Base DC:** 12
- **Frequency:** Per Movement
- **Effects:**
    - Fall damage multiplied by ScaleFactor (3x)
    - Navigation checks required
    - Giants can attack from above
    - Cover mechanics altered
- **Mitigations:** Climbing gear, flight, giant-kin ancestry

### Fall Damage by Scale

| Scale Factor | Base Fall    | Modified Fall |
| ------------ | ------------ | ------------- |
| 1.0 (human)  | 1d6 per 10ft | 1d6 per 10ft  |
| 2.0 (large)  | 1d6 per 10ft | 2d6 per 10ft  |
| 3.0 (giant)  | 1d6 per 10ft | 3d6 per 10ft  |

### MutagenicSpores Effects

- **Base DC:** 12
- **Damage:** Corruption accumulation (not HP)
- **Frequency:** Per Hour
- **Effects:**
    - Corruption points accumulate
    - Mutation risk at thresholds
    - Enhanced natural healing in Vanaheim
- **Mitigations:** Filtration mask, Corruption resistance, Vanir ancestry

---

## Vertical Stratification

### JÃ¶tunheim Vertical Zones

```
Z +3 (Canopy)     - Grinding Hall upper platforms
Z +2 (UpperTrunk) - Giant machinery
Z +1 (LowerTrunk) - Utgard's Shadow ruins
Z  0 (Ground)     - Bone Yards entrance
Z -1 (UpperRoots) - Collapsed sections
```

### Vanaheim Vertical Zones

```
Z +3 (Canopy)     - Canopy Sea treetops
Z +2 (UpperTrunk) - High branches
Z +1 (LowerTrunk) - Mid-forest
Z  0 (Ground)     - Undergrowth floor
Z -1 (UpperRoots) - Exposed roots
Z -2 (LowerRoots) - Ymir's Roots caverns
```

---

## Dependencies & Prerequisites

```
v0.19.3 (Muspelheim & Niflheim) - REQUIRED
    â”‚
    â””â”€â”€ Environmental condition pattern
            â”‚
            â–¼
v0.19.0 (Core Infrastructure) - REQUIRED
    â”‚
    â”œâ”€â”€ RealmId.Jotunheim, RealmId.Vanaheim
    â”œâ”€â”€ EnvironmentalConditionType.GiantScale
    â”œâ”€â”€ EnvironmentalConditionType.MutagenicSpores
    â”œâ”€â”€ VerticalZone enum
    â””â”€â”€ BiomeDefinition, BiomeZone entities
            â”‚
            â–¼
v0.19.4 (JÃ¶tunheim & Vanaheim)
```

---

## Risk Assessment

| Risk                          | Impact | Probability | Mitigation                        |
| ----------------------------- | ------ | ----------- | --------------------------------- |
| Scale factor complexity       | Medium | Medium      | Simple multiplier for fall damage |
| Corruption system integration | Medium | Low         | Defer to Status Effect system     |
| Vertical navigation           | Medium | Medium      | Basic Z-level tracking only       |

---

## Design Decisions (Confirmed)

| Decision                | Value                    | Notes                 |
| ----------------------- | ------------------------ | --------------------- |
| JÃ¶tunheim scale factor  | 3.0                      | Triple human scale    |
| Vanaheim vertical range | Z: -2 to +3              | Full stratification   |
| Spore Corruption rate   | 1 point per failed check | Simple accumulation   |
| Fall damage scaling     | ScaleFactor multiplier   | 3x in JÃ¶tunheim       |
| Muspelheim â†” Vanaheim   | Incompatible             | Fire kills plant life |

---

## Unit Testing Requirements (~22 tests)

### JÃ¶tunheim Tests (~8)

- GetBiome returns valid definition
- Base properties correct (Temp=10, Scale=3.0)
- Three zones returned
- Bone Yards has GiantScale DC 10
- Grinding Hall has GiantScale DC 16
- Vertical range Z: -1 to +3

### Vanaheim Tests (~8)

- GetBiome returns valid definition
- Base properties correct (Temp=28, Humidity=85)
- Three zones returned
- Undergrowth has MutagenicSpores DC 10
- Canopy Sea has MutagenicSpores DC 16
- Vertical range Z: -2 to +3

### Scale Mechanics Tests (~3)

- GiantScale base DC = 12
- Fall damage scaled by ScaleFactor
- Navigation check required in giant-scale zones

### Spore Mechanics Tests (~3)

- MutagenicSpores base DC = 12
- Corruption accumulates on failed check
- Filtration mask provides mitigation

---

## Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              v0.19.4 JÃ¶tunheim & Vanaheim                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚     JÃ–TUNHEIM        â”‚    â”‚      VANAHEIM        â”‚          â”‚
â”‚  â”‚     (Deck 07)        â”‚    â”‚      (Deck 03)       â”‚          â”‚
â”‚  â”‚     SCALE: 3.0x      â”‚    â”‚      ğŸŒ¿ BIO ğŸŒ¿       â”‚          â”‚
â”‚  â”‚                      â”‚    â”‚                      â”‚          â”‚
â”‚  â”‚  Z+3 Grinding Hall   â”‚    â”‚  Z+3 Canopy Sea      â”‚          â”‚
â”‚  â”‚  Z+2 Machinery       â”‚    â”‚  Z+2 High branches   â”‚          â”‚
â”‚  â”‚  Z+1 Utgard's Shadow â”‚    â”‚  Z+1 Mid-forest      â”‚          â”‚
â”‚  â”‚  Z 0 Bone Yards      â”‚    â”‚  Z 0 Undergrowth     â”‚          â”‚
â”‚  â”‚  Z-1 Collapsed       â”‚    â”‚  Z-1 Roots           â”‚          â”‚
â”‚  â”‚                      â”‚    â”‚  Z-2 Ymir's Roots    â”‚          â”‚
â”‚  â”‚                      â”‚    â”‚                      â”‚          â”‚
â”‚  â”‚  Effect: Fall x3     â”‚    â”‚  Effect: Corruption  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                  â”‚
â”‚  Note: Muspelheim â†” Vanaheim = INCOMPATIBLE (Fire/Bio)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Deliverable Checklist

### Configuration

- [ ] `jotunheim.json` complete with all zones
- [ ] `vanaheim.json` complete with all zones
- [ ] GiantScale condition configured
- [ ] MutagenicSpores condition configured
- [ ] Vertical zone assignments correct
- [ ] JSON validates against biomes.schema.json

### Tests

- [ ] JÃ¶tunheim tests (~8)
- [ ] Vanaheim tests (~8)
- [ ] Scale mechanics tests (~3)
- [ ] Spore mechanics tests (~3)

---

_This scope breakdown provides a structured approach to implementing v0.19.4 JÃ¶tunheim & Vanaheim with scale mechanics and vertical stratification._
