# v0.14.2b Design Specification: Armor Schema

**Version:** 0.14.2b
**Parent:** v0.14.2 (Equipment Configuration Schemas)
**Prerequisites:** v0.14.2a Complete (Weapon Schema)
**Status:** Design Complete

---

## Table of Contents

1. [Executive Summary](#1-executive-summary)
2. [Feature Overview](#2-feature-overview)
3. [Architecture Diagrams](#3-architecture-diagrams)
4. [Armor Schema Definition](#4-armor-schema-definition)
   - 4.1 [Root Configuration Properties](#41-root-configuration-properties)
   - 4.2 [ArmorDefinition Definition](#42-armordefinition-definition)
   - 4.3 [AccessoryDefinition Definition](#43-accessorydefinition-definition)
   - 4.4 [StatRequirements Definition](#44-statrequirements-definition)
   - 4.5 [StatBonuses Definition](#45-statbonuses-definition)
5. [Equipment Slot Configuration](#5-equipment-slot-configuration)
   - 5.1 [Armor Slots](#51-armor-slots)
   - 5.2 [Accessory Slots](#52-accessory-slots)
6. [Armor Type Configuration](#6-armor-type-configuration)
   - 6.1 [Type Definitions](#61-type-definitions)
   - 6.2 [Type Characteristics](#62-type-characteristics)
7. [Material and Quality Configuration](#7-material-and-quality-configuration)
   - 7.1 [Material Types](#71-material-types)
   - 7.2 [Quality Tiers](#72-quality-tiers)
8. [Defense and Penalty Configuration](#8-defense-and-penalty-configuration)
   - 8.1 [Defense Bonus](#81-defense-bonus)
   - 8.2 [Initiative Penalty](#82-initiative-penalty)
   - 8.3 [Movement Penalty](#83-movement-penalty)
9. [Validation Rules](#9-validation-rules)
   - 9.1 [Enum Validation](#91-enum-validation)
   - 9.2 [Range Validation](#92-range-validation)
   - 9.3 [Required Fields](#93-required-fields)
   - 9.4 [Pattern Validation](#94-pattern-validation)
10. [Configuration Schema](#10-configuration-schema)
11. [Configuration File Updates](#11-configuration-file-updates)
12. [Data Model Changes](#12-data-model-changes)
13. [Logging Specifications](#13-logging-specifications)
14. [Unit Testing Requirements](#14-unit-testing-requirements)
15. [Use Cases](#15-use-cases)
16. [Deliverable Checklist](#16-deliverable-checklist)
17. [Acceptance Criteria](#17-acceptance-criteria)
18. [Dependencies](#18-dependencies)
19. [Future Considerations](#19-future-considerations)

---

## 1. Executive Summary

Version 0.14.2b introduces the **Armor Schema** (`armor.schema.json`), which validates armor and accessory configuration including defense values, armor categories, equipment slots, movement penalties, stat requirements, material types, and quality tiers. This schema enables full customization of the defensive equipment system without code changes, supporting diverse equipment from cloth robes to full plate armor and magical accessories.

The Armor Schema validates equipment slot enumerations (Armor, Shield, Helmet, Boots, Gloves for armor; Ring, Amulet, Belt, Cloak for accessories), armor type categories (Light, Medium, Heavy), defense bonuses (non-negative integers), initiative and movement penalties (non-positive integers), stat requirements for heavy equipment, and stat bonus objects for magical accessories.

### Key Deliverables

| Category | Items |
|----------|-------|
| **Schema Files** | `armor.schema.json` |
| **Schema Definitions** | `ArmorDefinition`, `AccessoryDefinition`, `StatRequirements`, `StatBonuses` |
| **Configuration Updates** | Update `armor.json` with full schema reference |
| **Tests** | ~5 new unit tests |

### Architectural Significance

This version provides:
- **Equipment slot system** - Enumeration of all armor and accessory slots
- **Armor type categories** - Light, Medium, Heavy classification with associated penalties
- **Defense bonus validation** - Non-negative integer values for protection
- **Penalty system** - Initiative and movement penalties for heavier armor
- **Stat requirements** - Minimum attribute requirements for wearing equipment
- **Stat bonuses** - Attribute modifiers provided by accessories
- **Material progression** - Material quality affecting armor stats
- **Quality tier system** - Rarity and power classification

### Relationship to Other Schemas

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    v0.14.2 EQUIPMENT CONFIGURATION SCHEMAS                   │
└─────────────────────────────────────────────────────────────────────────────┘

  ┌─────────────────────────────────────────────────────────────────────────┐
  │  v0.14.2a: weapons.schema.json                                          │
  │  v0.14.2b: armor.schema.json ◀── THIS VERSION                           │
  │  v0.14.2c: items.schema.json                                            │
  │  v0.14.2d: loot-tables.schema.json                                      │
  └─────────────────────────────────────────────────────────────────────────┘

  Cross-references:
  • abilities.json → armor-based abilities reference armor types
  • loot-tables.json → itemId references armor IDs
  • monsters.json → equipment drops reference armor IDs
  • characters.json → equipped slots reference armor/accessory IDs

  Shared with v0.14.2a:
  • StatBonuses definition (identical structure)
  • Quality tier enumeration (Common through Legendary)
  • ID pattern: ^[a-z][a-z0-9_]*$ (underscore convention for equipment)
  • Schema location: config/schemas/
```

---

## 2. Feature Overview

```
v0.14.2b Armor Schema Features
├── armor.schema.json
│   ├── Root Configuration Properties
│   │   ├── $schema (string, optional)
│   │   ├── version (string, optional)
│   │   ├── armor (array of ArmorDefinition, required)
│   │   └── accessories (array of AccessoryDefinition, optional)
│   └── Definitions
│       ├── ArmorDefinition
│       │   ├── id (string, underscore pattern, required)
│       │   ├── name (string, minLength: 1, required)
│       │   ├── description (string, required)
│       │   ├── slot (enum: Armor, Shield, Helmet, Boots, Gloves, required)
│       │   ├── armorType (enum: Light, Medium, Heavy, required)
│       │   ├── defenseBonus (integer, minimum: 0, required)
│       │   ├── damageReduction (integer, minimum: 0, optional)
│       │   ├── initiativePenalty (integer, maximum: 0, optional)
│       │   ├── movementPenalty (integer, maximum: 0, optional)
│       │   ├── stealthDisadvantage (boolean, default: false)
│       │   ├── requirements (StatRequirements, optional)
│       │   ├── statBonuses (StatBonuses, optional)
│       │   ├── material (enum, optional)
│       │   ├── quality (enum, default: Common)
│       │   ├── value (integer, minimum: 0, required)
│       │   └── sortOrder (integer, minimum: 0, optional)
│       ├── AccessoryDefinition
│       │   ├── id (string, underscore pattern, required)
│       │   ├── name (string, minLength: 1, required)
│       │   ├── description (string, required)
│       │   ├── slot (enum: Ring, Amulet, Belt, Cloak, required)
│       │   ├── statBonuses (StatBonuses, required)
│       │   ├── quality (enum, default: Common)
│       │   ├── value (integer, minimum: 0, required)
│       │   └── sortOrder (integer, minimum: 0, optional)
│       ├── StatRequirements
│       │   ├── minMight (integer, optional)
│       │   ├── minFortitude (integer, optional)
│       │   ├── minWill (integer, optional)
│       │   ├── minWits (integer, optional)
│       │   └── minFinesse (integer, optional)
│       └── StatBonuses
│           ├── might (integer, optional)
│           ├── fortitude (integer, optional)
│           ├── will (integer, optional)
│           ├── wits (integer, optional)
│           ├── finesse (integer, optional)
│           ├── maxHealth (integer, optional)
│           └── additionalProperties (integer)
├── Validation Rules
│   ├── Armor Slot Enum Validation
│   ├── Accessory Slot Enum Validation
│   ├── Armor Type Enum Validation
│   ├── Defense Bonus Range Validation (>= 0)
│   ├── Initiative Penalty Range Validation (<= 0)
│   ├── Movement Penalty Range Validation (<= 0)
│   ├── Quality Tier Enum Validation
│   ├── Material Type Enum Validation
│   └── ID Pattern Validation (underscore)
└── Configuration Updates
    └── armor.json schema reference updated
```

---

## 3. Architecture Diagrams

### 3.1 Schema Validation Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         SCHEMA VALIDATION FLOW                               │
└─────────────────────────────────────────────────────────────────────────────┘

    User edits armor.json
           │
           ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                          IDE/EDITOR                                          │
├─────────────────────────────────────────────────────────────────────────────┤
│  1. Reads $schema property from config file                                  │
│  2. Loads armor.schema.json from config/schemas/                             │
│  3. Validates content against schema                                         │
└─────────────────────────────────────────────────────────────────────────────┘
           │
           ├─── Valid ───▶ Green checkmark, autocomplete works
           │
           └─── Invalid ─▶ Error underlines with messages:
                           • "slot must be one of: Armor, Shield, ..."
                           • "defenseBonus must be >= 0"
                           • "initiativePenalty must be <= 0"
                           • "id must match pattern ^[a-z][a-z0-9_]*$"
```

### 3.2 Armor Schema Structure Diagram

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          armor.schema.json                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│  $schema: "http://json-schema.org/draft-07/schema#"                         │
│  title: "Armor Configuration"                                                │
│  type: object                                                                │
├─────────────────────────────────────────────────────────────────────────────┤
│  properties:                                                                 │
│  ┌─────────────────────────┬─────────────────────────────────────────────┐  │
│  │ $schema                 │ type: string (optional)                     │  │
│  ├─────────────────────────┼─────────────────────────────────────────────┤  │
│  │ version                 │ type: string (optional)                     │  │
│  ├─────────────────────────┼─────────────────────────────────────────────┤  │
│  │ armor                   │ type: array, items: $ref ArmorDefinition    │  │
│  ├─────────────────────────┼─────────────────────────────────────────────┤  │
│  │ accessories             │ type: array, items: $ref AccessoryDefinition│  │
│  └─────────────────────────┴─────────────────────────────────────────────┘  │
├─────────────────────────────────────────────────────────────────────────────┤
│  definitions:                                                                │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ ArmorDefinition                                                     │    │
│  │ ┌───────────────────────┬───────────────────────────────────────┐   │    │
│  │ │ id                    │ string, pattern: ^[a-z][a-z0-9_]*$    │   │    │
│  │ │ name                  │ string, minLength: 1                   │   │    │
│  │ │ description           │ string                                 │   │    │
│  │ │ slot                  │ enum: Armor, Shield, Helmet, ...       │   │    │
│  │ │ armorType             │ enum: Light, Medium, Heavy             │   │    │
│  │ │ defenseBonus          │ integer, minimum: 0                    │   │    │
│  │ │ damageReduction       │ integer, minimum: 0 (optional)         │   │    │
│  │ │ initiativePenalty     │ integer, maximum: 0 (optional)         │   │    │
│  │ │ movementPenalty       │ integer, maximum: 0 (optional)         │   │    │
│  │ │ stealthDisadvantage   │ boolean, default: false                │   │    │
│  │ │ requirements          │ $ref StatRequirements (optional)       │   │    │
│  │ │ statBonuses           │ $ref StatBonuses (optional)            │   │    │
│  │ │ material              │ enum (optional)                        │   │    │
│  │ │ quality               │ enum: Common, Uncommon, ...            │   │    │
│  │ │ value                 │ integer, minimum: 0                    │   │    │
│  │ │ sortOrder             │ integer, minimum: 0 (optional)         │   │    │
│  │ └───────────────────────┴───────────────────────────────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ AccessoryDefinition                                                 │    │
│  │ ┌───────────────────────┬───────────────────────────────────────┐   │    │
│  │ │ id                    │ string, pattern: ^[a-z][a-z0-9_]*$    │   │    │
│  │ │ name                  │ string, minLength: 1                   │   │    │
│  │ │ description           │ string                                 │   │    │
│  │ │ slot                  │ enum: Ring, Amulet, Belt, Cloak        │   │    │
│  │ │ statBonuses           │ $ref StatBonuses (required)            │   │    │
│  │ │ quality               │ enum: Common, Uncommon, ...            │   │    │
│  │ │ value                 │ integer, minimum: 0                    │   │    │
│  │ │ sortOrder             │ integer, minimum: 0 (optional)         │   │    │
│  │ └───────────────────────┴───────────────────────────────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ StatRequirements                                                    │    │
│  │ ┌───────────────────────┬───────────────────────────────────────┐   │    │
│  │ │ minMight              │ integer (optional)                     │   │    │
│  │ │ minFortitude          │ integer (optional)                     │   │    │
│  │ │ minWill               │ integer (optional)                     │   │    │
│  │ │ minWits               │ integer (optional)                     │   │    │
│  │ │ minFinesse            │ integer (optional)                     │   │    │
│  │ └───────────────────────┴───────────────────────────────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ StatBonuses                                                         │    │
│  │ ┌───────────────────────┬───────────────────────────────────────┐   │    │
│  │ │ might                 │ integer (optional)                     │   │    │
│  │ │ fortitude             │ integer (optional)                     │   │    │
│  │ │ will                  │ integer (optional)                     │   │    │
│  │ │ wits                  │ integer (optional)                     │   │    │
│  │ │ finesse               │ integer (optional)                     │   │    │
│  │ │ maxHealth             │ integer (optional)                     │   │    │
│  │ │ additionalProperties  │ integer (for custom stats)             │   │    │
│  │ └───────────────────────┴───────────────────────────────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.3 Equipment Slot Hierarchy Diagram

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         EQUIPMENT SLOT HIERARCHY                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                         ARMOR SLOTS                                  │    │
│  │  Defensive equipment with defense bonuses and potential penalties    │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  Slot Types:                                                         │    │
│  │  • Armor   - Body protection (Robes, Leather, Chain, Plate)         │    │
│  │  • Shield  - Off-hand defense (Buckler, Tower Shield)               │    │
│  │  • Helmet  - Head protection (Cap, Helm, Great Helm)                │    │
│  │  • Boots   - Foot protection (Leather Boots, Iron Boots)            │    │
│  │  • Gloves  - Hand protection (Gloves, Gauntlets)                    │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                       ACCESSORY SLOTS                                │    │
│  │  Magical items providing stat bonuses without armor type             │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  Slot Types:                                                         │    │
│  │  • Ring    - Finger slot (x2 typically, stat bonuses)               │    │
│  │  • Amulet  - Neck slot (stat bonuses, protection)                   │    │
│  │  • Belt    - Waist slot (stat bonuses, utility)                     │    │
│  │  • Cloak   - Back slot (stat bonuses, special effects)              │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.4 Armor Type Categories Diagram

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        ARMOR TYPE CATEGORIES                                 │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ LIGHT ARMOR                                                          │    │
│  ├───────────────┬─────────────────────────────────────────────────────┤    │
│  │ Defense       │ Low (1-3)                                           │    │
│  │ Penalties     │ None                                                 │    │
│  │ Requirements  │ None                                                 │    │
│  │ Stealth       │ No disadvantage                                      │    │
│  │ Examples      │ Cloth Robes, Leather Armor, Studded Leather         │    │
│  │ Materials     │ Cloth, Leather                                       │    │
│  └───────────────┴─────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ MEDIUM ARMOR                                                         │    │
│  ├───────────────┬─────────────────────────────────────────────────────┤    │
│  │ Defense       │ Medium (4-5)                                        │    │
│  │ Penalties     │ Initiative -1 to -2                                 │    │
│  │ Requirements  │ Fortitude 12-13                                     │    │
│  │ Stealth       │ Possible disadvantage                                │    │
│  │ Examples      │ Chain Mail, Scale Mail                              │    │
│  │ Materials     │ Chain, Scale                                         │    │
│  └───────────────┴─────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ HEAVY ARMOR                                                          │    │
│  ├───────────────┬─────────────────────────────────────────────────────┤    │
│  │ Defense       │ High (6+)                                           │    │
│  │ Penalties     │ Initiative -3, Movement possible                    │    │
│  │ Requirements  │ Fortitude 14+, Might 12+                            │    │
│  │ Stealth       │ Disadvantage                                         │    │
│  │ Examples      │ Plate Armor, Great Helm                             │    │
│  │ Materials     │ Plate, Steel                                         │    │
│  └───────────────┴─────────────────────────────────────────────────────┘    │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.5 Defense and Penalty System Diagram

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                      DEFENSE AND PENALTY SYSTEM                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  DEFENSE CALCULATION                                                         │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │  Total Defense = Base + Sum(All Equipped defenseBonus)              │   │
│  │                                                                      │   │
│  │  Example:                                                            │   │
│  │  • Plate Armor (Armor slot): +6                                      │   │
│  │  • Tower Shield (Shield slot): +3                                    │   │
│  │  • Great Helm (Helmet slot): +3                                      │   │
│  │  • Iron Boots (Boots slot): +2                                       │   │
│  │  ─────────────────────────────────                                   │   │
│  │  Total Equipment Defense: +14                                        │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
│  PENALTY CALCULATION                                                         │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │  Initiative Penalty = Sum(All Equipped initiativePenalty)           │   │
│  │                                                                      │   │
│  │  Example (same equipment):                                           │   │
│  │  • Plate Armor: -3                                                   │   │
│  │  • Tower Shield: -1                                                  │   │
│  │  • Great Helm: -1                                                    │   │
│  │  • Iron Boots: -1                                                    │   │
│  │  ─────────────────────────────────                                   │   │
│  │  Total Initiative Penalty: -6                                        │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
│  VALIDATION RULES                                                            │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │  • defenseBonus: integer, minimum: 0 (always positive)              │   │
│  │  • initiativePenalty: integer, maximum: 0 (always negative or zero) │   │
│  │  • movementPenalty: integer, maximum: 0 (always negative or zero)   │   │
│  │                                                                      │   │
│  │  Invalid examples rejected by schema:                                │   │
│  │  • defenseBonus: -1     ✗ (must be >= 0)                            │   │
│  │  • initiativePenalty: 2  ✗ (must be <= 0)                            │   │
│  │  • movementPenalty: 1    ✗ (must be <= 0)                            │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.6 Stat Requirements System Diagram

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                       STAT REQUIREMENTS SYSTEM                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  REQUIREMENT CHECK FLOW                                                      │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │  Character attempts to equip armor                                   │   │
│  │           │                                                          │   │
│  │           ▼                                                          │   │
│  │  Check if armor has requirements                                     │   │
│  │           │                                                          │   │
│  │  ┌────────┴────────┐                                                 │   │
│  │  │                 │                                                 │   │
│  │  ▼                 ▼                                                 │   │
│  │  No requirements   Has requirements                                  │   │
│  │  (Light armor)     (Medium/Heavy)                                    │   │
│  │  │                 │                                                 │   │
│  │  │                 ▼                                                 │   │
│  │  │     Check character stats vs requirements                         │   │
│  │  │                 │                                                 │   │
│  │  │        ┌────────┴────────┐                                        │   │
│  │  │        │                 │                                        │   │
│  │  │        ▼                 ▼                                        │   │
│  │  │   Stats meet          Stats insufficient                          │   │
│  │  │   requirements        requirements                                │   │
│  │  │        │                 │                                        │   │
│  │  │        │                 ▼                                        │   │
│  │  │        │          Cannot equip                                    │   │
│  │  │        │          (error message)                                 │   │
│  │  │        │                                                          │   │
│  │  └────────┴────────┐                                                 │   │
│  │                    ▼                                                 │   │
│  │              Equip armor successfully                                │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
│  EXAMPLE REQUIREMENTS                                                        │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │  Plate Armor:                                                        │   │
│  │  {                                                                   │   │
│  │    "requirements": {                                                 │   │
│  │      "minFortitude": 14,                                             │   │
│  │      "minMight": 12                                                  │   │
│  │    }                                                                 │   │
│  │  }                                                                   │   │
│  │                                                                      │   │
│  │  Character with Fortitude 15, Might 11: CANNOT EQUIP                │   │
│  │  Character with Fortitude 14, Might 12: CAN EQUIP                   │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.7 File Layer Diagram

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                            CONFIG LAYER                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  config/                                                                     │
│  ├── armor.json ◀──────────────────────────────┐                            │
│  │   {                                          │ references                │
│  │     "$schema": "./schemas/armor.schema.json",│                            │
│  │     "armor": [                               │                            │
│  │       {                                      │                            │
│  │         "id": "cloth_robes",                 │                            │
│  │         "name": "Cloth Robes",               │                            │
│  │         "slot": "Armor",                     │                            │
│  │         "armorType": "Light",                │                            │
│  │         "defenseBonus": 1,                   │                            │
│  │         "value": 10                          │                            │
│  │       },                                     │                            │
│  │       {                                      │                            │
│  │         "id": "plate_armor",                 │                            │
│  │         "name": "Plate Armor",               │                            │
│  │         "slot": "Armor",                     │                            │
│  │         "armorType": "Heavy",                │                            │
│  │         "defenseBonus": 6,                   │                            │
│  │         "initiativePenalty": -3,             │                            │
│  │         "requirements": {                    │                            │
│  │           "minFortitude": 14,                │                            │
│  │           "minMight": 12                     │                            │
│  │         },                                   │                            │
│  │         "value": 500                         │                            │
│  │       },                                     │                            │
│  │       ...                                    │                            │
│  │     ],                                       │                            │
│  │     "accessories": [                         │                            │
│  │       {                                      │                            │
│  │         "id": "ring_of_strength",            │                            │
│  │         "slot": "Ring",                      │                            │
│  │         "statBonuses": { "might": 2 },       │                            │
│  │         "value": 200                         │                            │
│  │       },                                     │                            │
│  │       ...                                    │                            │
│  │     ]                                        │                            │
│  │   }                                          │                            │
│  │                                              │                            │
│  └── schemas/                                   │                            │
│      └── armor.schema.json ─────────────────────┘                            │
│          {                                                                   │
│            "$schema": "http://json-schema.org/draft-07/schema#",            │
│            "definitions": {                                                  │
│              "ArmorDefinition": {...},                                       │
│              "AccessoryDefinition": {...},                                   │
│              "StatRequirements": {...},                                      │
│              "StatBonuses": {...}                                            │
│            }                                                                 │
│          }                                                                   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 4. Armor Schema Definition

### 4.1 Root Configuration Properties

**File:** `config/schemas/armor.schema.json`

The armor schema follows JSON Schema Draft-07 specification, providing comprehensive validation for armor and accessory configuration files.

```json
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Armor Configuration",
    "description": "Schema for armor and accessory definitions. Defines all defensive equipment including body armor, shields, helmets, and magical accessories with their defense values, penalties, and requirements.",
    "type": "object",
    "properties": {
        "$schema": {
            "type": "string",
            "description": "Reference to the JSON schema file for validation"
        },
        "version": {
            "type": "string",
            "description": "Optional version identifier for the configuration file",
            "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "armor": {
            "type": "array",
            "description": "List of armor definitions (body armor, shields, helmets, boots, gloves)",
            "items": {
                "$ref": "#/definitions/ArmorDefinition"
            },
            "minItems": 1
        },
        "accessories": {
            "type": "array",
            "description": "List of accessory definitions (rings, amulets, belts, cloaks)",
            "items": {
                "$ref": "#/definitions/AccessoryDefinition"
            }
        }
    },
    "required": ["armor"],
    "additionalProperties": false,
    "definitions": {
        "ArmorDefinition": { ... },
        "AccessoryDefinition": { ... },
        "StatRequirements": { ... },
        "StatBonuses": { ... }
    }
}
```

### 4.2 ArmorDefinition Definition

The `ArmorDefinition` object defines a complete armor piece with defense values, penalties, and requirements.

```json
"ArmorDefinition": {
    "type": "object",
    "description": "A piece of armor that can be equipped for defense",
    "properties": {
        "id": {
            "type": "string",
            "description": "Unique identifier for the armor (lowercase with underscores)",
            "pattern": "^[a-z][a-z0-9_]*$",
            "minLength": 1,
            "maxLength": 50
        },
        "name": {
            "type": "string",
            "description": "Display name shown to players",
            "minLength": 1,
            "maxLength": 100
        },
        "description": {
            "type": "string",
            "description": "Full description of the armor",
            "minLength": 1
        },
        "slot": {
            "type": "string",
            "description": "Equipment slot the armor occupies",
            "enum": ["Armor", "Shield", "Helmet", "Boots", "Gloves"]
        },
        "armorType": {
            "type": "string",
            "description": "The category of armor affecting penalties and requirements",
            "enum": ["Light", "Medium", "Heavy"]
        },
        "defenseBonus": {
            "type": "integer",
            "description": "Bonus to defense when equipped",
            "minimum": 0
        },
        "damageReduction": {
            "type": "integer",
            "description": "Flat damage reduction applied to incoming attacks",
            "minimum": 0,
            "default": 0
        },
        "initiativePenalty": {
            "type": "integer",
            "description": "Penalty to initiative when equipped (negative or zero)",
            "maximum": 0,
            "default": 0
        },
        "movementPenalty": {
            "type": "integer",
            "description": "Penalty to movement speed when equipped (negative or zero)",
            "maximum": 0,
            "default": 0
        },
        "stealthDisadvantage": {
            "type": "boolean",
            "description": "Whether the armor imposes disadvantage on stealth checks",
            "default": false
        },
        "requirements": {
            "$ref": "#/definitions/StatRequirements"
        },
        "statBonuses": {
            "$ref": "#/definitions/StatBonuses"
        },
        "material": {
            "type": "string",
            "description": "Material the armor is made from",
            "enum": ["Leather", "Chain", "Plate", "Cloth", "Wood", "Iron", "Steel", "Mithril"]
        },
        "quality": {
            "type": "string",
            "description": "Quality tier affecting rarity and power",
            "enum": ["Common", "Uncommon", "Rare", "Epic", "Legendary"],
            "default": "Common"
        },
        "value": {
            "type": "integer",
            "description": "Base value in gold pieces",
            "minimum": 0
        },
        "sortOrder": {
            "type": "integer",
            "description": "Order for display sorting (lower values first)",
            "minimum": 0,
            "default": 0
        }
    },
    "required": ["id", "name", "description", "slot", "armorType", "defenseBonus", "value"],
    "additionalProperties": false
}
```

### 4.3 AccessoryDefinition Definition

The `AccessoryDefinition` object defines magical accessories that provide stat bonuses.

```json
"AccessoryDefinition": {
    "type": "object",
    "description": "A magical accessory that provides stat bonuses when equipped",
    "properties": {
        "id": {
            "type": "string",
            "description": "Unique identifier for the accessory (lowercase with underscores)",
            "pattern": "^[a-z][a-z0-9_]*$",
            "minLength": 1,
            "maxLength": 50
        },
        "name": {
            "type": "string",
            "description": "Display name shown to players",
            "minLength": 1,
            "maxLength": 100
        },
        "description": {
            "type": "string",
            "description": "Full description of the accessory",
            "minLength": 1
        },
        "slot": {
            "type": "string",
            "description": "Equipment slot the accessory occupies",
            "enum": ["Ring", "Amulet", "Belt", "Cloak"]
        },
        "statBonuses": {
            "$ref": "#/definitions/StatBonuses",
            "description": "Stat bonuses provided by the accessory"
        },
        "quality": {
            "type": "string",
            "description": "Quality tier affecting rarity and power",
            "enum": ["Common", "Uncommon", "Rare", "Epic", "Legendary"],
            "default": "Common"
        },
        "value": {
            "type": "integer",
            "description": "Base value in gold pieces",
            "minimum": 0
        },
        "sortOrder": {
            "type": "integer",
            "description": "Order for display sorting (lower values first)",
            "minimum": 0,
            "default": 0
        }
    },
    "required": ["id", "name", "description", "slot", "statBonuses", "value"],
    "additionalProperties": false
}
```

### 4.4 StatRequirements Definition

The `StatRequirements` object defines minimum attribute requirements for wearing armor.

```json
"StatRequirements": {
    "type": "object",
    "description": "Minimum stat requirements for equipping the armor",
    "properties": {
        "minMight": {
            "type": "integer",
            "description": "Minimum Might required to equip"
        },
        "minFortitude": {
            "type": "integer",
            "description": "Minimum Fortitude required to equip"
        },
        "minWill": {
            "type": "integer",
            "description": "Minimum Will required to equip"
        },
        "minWits": {
            "type": "integer",
            "description": "Minimum Wits required to equip"
        },
        "minFinesse": {
            "type": "integer",
            "description": "Minimum Finesse required to equip"
        }
    },
    "additionalProperties": false
}
```

### 4.5 StatBonuses Definition

The `StatBonuses` object defines attribute modifiers provided by the equipment.

```json
"StatBonuses": {
    "type": "object",
    "description": "Attribute bonuses provided by equipping the item",
    "properties": {
        "might": {
            "type": "integer",
            "description": "Bonus to Might attribute"
        },
        "fortitude": {
            "type": "integer",
            "description": "Bonus to Fortitude attribute"
        },
        "will": {
            "type": "integer",
            "description": "Bonus to Will attribute"
        },
        "wits": {
            "type": "integer",
            "description": "Bonus to Wits attribute"
        },
        "finesse": {
            "type": "integer",
            "description": "Bonus to Finesse attribute"
        },
        "maxHealth": {
            "type": "integer",
            "description": "Bonus to maximum health"
        }
    },
    "additionalProperties": {
        "type": "integer",
        "description": "Custom stat bonus"
    }
}
```

---

## 5. Equipment Slot Configuration

### 5.1 Armor Slots

Armor slots are used for defensive equipment that provides defense bonuses and may have penalties.

| Slot | Description | Typical Items | Armor Type |
|------|-------------|---------------|------------|
| `Armor` | Body protection | Robes, Leather, Chain Mail, Plate | Light/Medium/Heavy |
| `Shield` | Off-hand defense | Buckler, Iron Shield, Tower Shield | Light/Medium/Heavy |
| `Helmet` | Head protection | Cap, Helm, Great Helm | Light/Medium/Heavy |
| `Boots` | Foot protection | Leather Boots, Iron Boots | Light/Medium/Heavy |
| `Gloves` | Hand protection | Gloves, Gauntlets | Light/Medium/Heavy |

**Armor Slot Example:**
```json
{
    "id": "plate_armor",
    "name": "Plate Armor",
    "description": "Full plate armor offering maximum protection at the cost of mobility.",
    "slot": "Armor",
    "armorType": "Heavy",
    "defenseBonus": 6,
    "initiativePenalty": -3,
    "stealthDisadvantage": true,
    "requirements": { "minFortitude": 14, "minMight": 12 },
    "material": "Plate",
    "value": 500
}
```

### 5.2 Accessory Slots

Accessory slots are used for magical items that provide stat bonuses without defense calculations.

| Slot | Description | Typical Items | Slots Available |
|------|-------------|---------------|-----------------|
| `Ring` | Finger slot | Ring of Strength, Ring of Precision | 2 (typically) |
| `Amulet` | Neck slot | Amulet of Vitality, Amulet of Wisdom | 1 |
| `Belt` | Waist slot | Belt of Giant Strength | 1 |
| `Cloak` | Back slot | Cloak of Protection | 1 |

**Accessory Slot Example:**
```json
{
    "id": "ring_of_strength",
    "name": "Ring of Strength",
    "description": "A silver ring that enhances the wearer's physical power.",
    "slot": "Ring",
    "statBonuses": { "might": 2 },
    "quality": "Uncommon",
    "value": 200
}
```

---

## 6. Armor Type Configuration

### 6.1 Type Definitions

Armor types categorize equipment by weight class and associated penalties.

| Armor Type | Description | Defense Range | Initiative Penalty | Requirements |
|------------|-------------|---------------|-------------------|--------------|
| `Light` | Minimal protection, maximum mobility | 1-3 | 0 | None |
| `Medium` | Balanced protection and mobility | 4-5 | -1 to -2 | Fortitude 12-13 |
| `Heavy` | Maximum protection, reduced mobility | 6+ | -3 | Fortitude 14+, Might 12+ |

### 6.2 Type Characteristics

**Light Armor:**
```json
{
    "id": "leather_armor",
    "name": "Leather Armor",
    "description": "Simple armor made of tanned leather. Provides basic protection.",
    "slot": "Armor",
    "armorType": "Light",
    "defenseBonus": 2,
    "material": "Leather",
    "value": 30
}
```

**Medium Armor:**
```json
{
    "id": "chain_mail",
    "name": "Chain Mail",
    "description": "Interlocking metal rings providing solid protection.",
    "slot": "Armor",
    "armorType": "Medium",
    "defenseBonus": 4,
    "initiativePenalty": -1,
    "requirements": { "minFortitude": 12 },
    "material": "Chain",
    "value": 100
}
```

**Heavy Armor:**
```json
{
    "id": "plate_armor",
    "name": "Plate Armor",
    "description": "Full plate armor offering maximum protection at the cost of mobility.",
    "slot": "Armor",
    "armorType": "Heavy",
    "defenseBonus": 6,
    "initiativePenalty": -3,
    "stealthDisadvantage": true,
    "requirements": { "minFortitude": 14, "minMight": 12 },
    "material": "Plate",
    "value": 500
}
```

---

## 7. Material and Quality Configuration

### 7.1 Material Types

Material quality affects armor durability and visual appearance.

| Material | Description | Typical Armor Types | Weight |
|----------|-------------|---------------------|--------|
| `Cloth` | Basic fabric material | Robes, light clothing | Lightest |
| `Leather` | Tanned animal hide | Light armor | Light |
| `Wood` | Reinforced wooden plates | Shields | Light |
| `Chain` | Interlocking metal rings | Medium armor | Medium |
| `Iron` | Common metal | Shields, helmets | Medium |
| `Steel` | Superior metal alloy | Medium/heavy armor | Medium-Heavy |
| `Plate` | Full metal plates | Heavy armor | Heavy |
| `Mithril` | Lightweight magical metal | Special armor | Light (despite appearance) |

### 7.2 Quality Tiers

Rarity and power classification shared with weapons schema.

| Quality | Color | Drop Rate | Value Multiplier | Typical Bonuses |
|---------|-------|-----------|------------------|-----------------|
| `Common` | White | 100% | 1.0x | None |
| `Uncommon` | Green | 50% | 2.0x | +1 defense or stat |
| `Rare` | Blue | 20% | 5.0x | +2 defense or stats |
| `Epic` | Purple | 5% | 20.0x | +3 defense, special properties |
| `Legendary` | Orange | 1% | 100.0x | Unique effects |

**Quality Example:**
```json
{
    "id": "dragonscale_armor",
    "name": "Dragonscale Armor",
    "description": "Legendary armor crafted from the scales of an ancient dragon.",
    "slot": "Armor",
    "armorType": "Heavy",
    "defenseBonus": 8,
    "damageReduction": 2,
    "initiativePenalty": -1,
    "requirements": { "minFortitude": 12 },
    "statBonuses": { "fortitude": 2 },
    "material": "Steel",
    "quality": "Legendary",
    "value": 10000
}
```

---

## 8. Defense and Penalty Configuration

### 8.1 Defense Bonus

Defense bonus represents the protective value of the armor. It is always a non-negative integer.

| Property | Type | Constraint | Purpose |
|----------|------|------------|---------|
| `defenseBonus` | integer | minimum: 0 | Added to character's total defense |

**Validation:**
- Must be >= 0
- Invalid: `"defenseBonus": -1` (rejected by schema)

### 8.2 Initiative Penalty

Initiative penalty represents the slowdown from wearing heavy armor. It is always a non-positive integer.

| Property | Type | Constraint | Purpose |
|----------|------|------------|---------|
| `initiativePenalty` | integer | maximum: 0 | Subtracted from initiative rolls |

**Validation:**
- Must be <= 0
- Invalid: `"initiativePenalty": 2` (rejected by schema)

**Typical Values by Armor Type:**

| Armor Type | Initiative Penalty Range |
|------------|-------------------------|
| Light | 0 (no penalty) |
| Medium | -1 to -2 |
| Heavy | -3 or more |

### 8.3 Movement Penalty

Movement penalty represents reduced mobility from wearing heavy armor. It is always a non-positive integer.

| Property | Type | Constraint | Purpose |
|----------|------|------------|---------|
| `movementPenalty` | integer | maximum: 0 | Reduces movement speed/tiles per turn |

**Validation:**
- Must be <= 0
- Invalid: `"movementPenalty": 1` (rejected by schema)

---

## 9. Validation Rules

### 9.1 Enum Validation

| Property | Valid Values | Validation Error |
|----------|--------------|------------------|
| `slot` (armor) | `Armor`, `Shield`, `Helmet`, `Boots`, `Gloves` | "slot must be one of: Armor, Shield, ..." |
| `slot` (accessory) | `Ring`, `Amulet`, `Belt`, `Cloak` | "slot must be one of: Ring, Amulet, ..." |
| `armorType` | `Light`, `Medium`, `Heavy` | "armorType must be one of: Light, Medium, Heavy" |
| `quality` | `Common`, `Uncommon`, `Rare`, `Epic`, `Legendary` | "quality must be one of: Common, Uncommon, ..." |
| `material` | `Leather`, `Chain`, `Plate`, `Cloth`, `Wood`, `Iron`, `Steel`, `Mithril` | "material must be one of: Leather, Chain, ..." |

### 9.2 Range Validation

| Property | Range | Validation Error |
|----------|-------|------------------|
| `defenseBonus` | >= 0 | "defenseBonus must be >= 0" |
| `damageReduction` | >= 0 | "damageReduction must be >= 0" |
| `initiativePenalty` | <= 0 | "initiativePenalty must be <= 0" |
| `movementPenalty` | <= 0 | "movementPenalty must be <= 0" |
| `value` | >= 0 | "value must be >= 0" |
| `sortOrder` | >= 0 | "sortOrder must be >= 0" |

### 9.3 Required Fields

#### ArmorDefinition Required Fields

| Field | Requirement | Error on Missing |
|-------|-------------|------------------|
| `id` | Must be present and match pattern | "missing required property 'id'" |
| `name` | Must be present and non-empty | "missing required property 'name'" |
| `description` | Must be present | "missing required property 'description'" |
| `slot` | Must be present and valid enum | "missing required property 'slot'" |
| `armorType` | Must be present and valid enum | "missing required property 'armorType'" |
| `defenseBonus` | Must be present and >= 0 | "missing required property 'defenseBonus'" |
| `value` | Must be present and >= 0 | "missing required property 'value'" |

#### AccessoryDefinition Required Fields

| Field | Requirement | Error on Missing |
|-------|-------------|------------------|
| `id` | Must be present and match pattern | "missing required property 'id'" |
| `name` | Must be present and non-empty | "missing required property 'name'" |
| `description` | Must be present | "missing required property 'description'" |
| `slot` | Must be present and valid enum | "missing required property 'slot'" |
| `statBonuses` | Must be present | "missing required property 'statBonuses'" |
| `value` | Must be present and >= 0 | "missing required property 'value'" |

### 9.4 Pattern Validation

| Property | Pattern | Validation Error |
|----------|---------|------------------|
| `id` | `^[a-z][a-z0-9_]*$` | "id must match pattern ^[a-z][a-z0-9_]*$" |
| `version` | `^[0-9]+\.[0-9]+\.[0-9]+$` | "version must match pattern (e.g., '1.0.0')" |

---

## 10. Configuration Schema

### Complete Armor Schema File

**File:** `config/schemas/armor.schema.json`

```json
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Armor Configuration",
    "description": "Schema for armor and accessory definitions. Defines all defensive equipment including body armor, shields, helmets, and magical accessories with their defense values, penalties, and requirements.",
    "type": "object",
    "properties": {
        "$schema": {
            "type": "string",
            "description": "Reference to the JSON schema file for validation"
        },
        "version": {
            "type": "string",
            "description": "Optional version identifier for the configuration file",
            "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "armor": {
            "type": "array",
            "description": "List of armor definitions (body armor, shields, helmets, boots, gloves)",
            "items": {
                "$ref": "#/definitions/ArmorDefinition"
            },
            "minItems": 1
        },
        "accessories": {
            "type": "array",
            "description": "List of accessory definitions (rings, amulets, belts, cloaks)",
            "items": {
                "$ref": "#/definitions/AccessoryDefinition"
            }
        }
    },
    "required": ["armor"],
    "additionalProperties": false,
    "definitions": {
        "ArmorDefinition": {
            "type": "object",
            "description": "A piece of armor that can be equipped for defense",
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier for the armor (lowercase with underscores)",
                    "pattern": "^[a-z][a-z0-9_]*$",
                    "minLength": 1,
                    "maxLength": 50
                },
                "name": {
                    "type": "string",
                    "description": "Display name shown to players",
                    "minLength": 1,
                    "maxLength": 100
                },
                "description": {
                    "type": "string",
                    "description": "Full description of the armor",
                    "minLength": 1
                },
                "slot": {
                    "type": "string",
                    "description": "Equipment slot the armor occupies",
                    "enum": ["Armor", "Shield", "Helmet", "Boots", "Gloves"]
                },
                "armorType": {
                    "type": "string",
                    "description": "The category of armor affecting penalties and requirements",
                    "enum": ["Light", "Medium", "Heavy"]
                },
                "defenseBonus": {
                    "type": "integer",
                    "description": "Bonus to defense when equipped",
                    "minimum": 0
                },
                "damageReduction": {
                    "type": "integer",
                    "description": "Flat damage reduction applied to incoming attacks",
                    "minimum": 0,
                    "default": 0
                },
                "initiativePenalty": {
                    "type": "integer",
                    "description": "Penalty to initiative when equipped (negative or zero)",
                    "maximum": 0,
                    "default": 0
                },
                "movementPenalty": {
                    "type": "integer",
                    "description": "Penalty to movement speed when equipped (negative or zero)",
                    "maximum": 0,
                    "default": 0
                },
                "stealthDisadvantage": {
                    "type": "boolean",
                    "description": "Whether the armor imposes disadvantage on stealth checks",
                    "default": false
                },
                "requirements": {
                    "$ref": "#/definitions/StatRequirements"
                },
                "statBonuses": {
                    "$ref": "#/definitions/StatBonuses"
                },
                "material": {
                    "type": "string",
                    "description": "Material the armor is made from",
                    "enum": ["Leather", "Chain", "Plate", "Cloth", "Wood", "Iron", "Steel", "Mithril"]
                },
                "quality": {
                    "type": "string",
                    "description": "Quality tier affecting rarity and power",
                    "enum": ["Common", "Uncommon", "Rare", "Epic", "Legendary"],
                    "default": "Common"
                },
                "value": {
                    "type": "integer",
                    "description": "Base value in gold pieces",
                    "minimum": 0
                },
                "sortOrder": {
                    "type": "integer",
                    "description": "Order for display sorting (lower values first)",
                    "minimum": 0,
                    "default": 0
                }
            },
            "required": ["id", "name", "description", "slot", "armorType", "defenseBonus", "value"],
            "additionalProperties": false
        },
        "AccessoryDefinition": {
            "type": "object",
            "description": "A magical accessory that provides stat bonuses when equipped",
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier for the accessory (lowercase with underscores)",
                    "pattern": "^[a-z][a-z0-9_]*$",
                    "minLength": 1,
                    "maxLength": 50
                },
                "name": {
                    "type": "string",
                    "description": "Display name shown to players",
                    "minLength": 1,
                    "maxLength": 100
                },
                "description": {
                    "type": "string",
                    "description": "Full description of the accessory",
                    "minLength": 1
                },
                "slot": {
                    "type": "string",
                    "description": "Equipment slot the accessory occupies",
                    "enum": ["Ring", "Amulet", "Belt", "Cloak"]
                },
                "statBonuses": {
                    "$ref": "#/definitions/StatBonuses",
                    "description": "Stat bonuses provided by the accessory"
                },
                "quality": {
                    "type": "string",
                    "description": "Quality tier affecting rarity and power",
                    "enum": ["Common", "Uncommon", "Rare", "Epic", "Legendary"],
                    "default": "Common"
                },
                "value": {
                    "type": "integer",
                    "description": "Base value in gold pieces",
                    "minimum": 0
                },
                "sortOrder": {
                    "type": "integer",
                    "description": "Order for display sorting (lower values first)",
                    "minimum": 0,
                    "default": 0
                }
            },
            "required": ["id", "name", "description", "slot", "statBonuses", "value"],
            "additionalProperties": false
        },
        "StatRequirements": {
            "type": "object",
            "description": "Minimum stat requirements for equipping the armor",
            "properties": {
                "minMight": {
                    "type": "integer",
                    "description": "Minimum Might required to equip"
                },
                "minFortitude": {
                    "type": "integer",
                    "description": "Minimum Fortitude required to equip"
                },
                "minWill": {
                    "type": "integer",
                    "description": "Minimum Will required to equip"
                },
                "minWits": {
                    "type": "integer",
                    "description": "Minimum Wits required to equip"
                },
                "minFinesse": {
                    "type": "integer",
                    "description": "Minimum Finesse required to equip"
                }
            },
            "additionalProperties": false
        },
        "StatBonuses": {
            "type": "object",
            "description": "Attribute bonuses provided by equipping the item",
            "properties": {
                "might": {
                    "type": "integer",
                    "description": "Bonus to Might attribute"
                },
                "fortitude": {
                    "type": "integer",
                    "description": "Bonus to Fortitude attribute"
                },
                "will": {
                    "type": "integer",
                    "description": "Bonus to Will attribute"
                },
                "wits": {
                    "type": "integer",
                    "description": "Bonus to Wits attribute"
                },
                "finesse": {
                    "type": "integer",
                    "description": "Bonus to Finesse attribute"
                },
                "maxHealth": {
                    "type": "integer",
                    "description": "Bonus to maximum health"
                }
            },
            "additionalProperties": {
                "type": "integer",
                "description": "Custom stat bonus"
            }
        }
    }
}
```

---

## 11. Configuration File Updates

### Updated armor.json

The existing `armor.json` needs to update its schema reference to point to the new schema location.

**File:** `config/armor.json`

Current structure (14 armor pieces + 4 accessories):
```json
{
  "$schema": "armor.schema.json",
  "armor": [
    { "id": "cloth_robes", ... },
    { "id": "leather_armor", ... },
    { "id": "studded_leather", ... },
    { "id": "chain_mail", ... },
    { "id": "scale_mail", ... },
    { "id": "plate_armor", ... },
    { "id": "wooden_shield", ... },
    { "id": "iron_shield", ... },
    { "id": "tower_shield", ... },
    { "id": "leather_cap", ... },
    { "id": "iron_helmet", ... },
    { "id": "great_helm", ... },
    { "id": "leather_boots", ... },
    { "id": "iron_boots", ... }
  ],
  "accessories": [
    { "id": "ring_of_strength", ... },
    { "id": "ring_of_precision", ... },
    { "id": "amulet_of_vitality", ... },
    { "id": "amulet_of_wisdom", ... }
  ]
}
```

Updated with proper schema reference:
```json
{
    "$schema": "./schemas/armor.schema.json",
    "armor": [
        {
            "id": "cloth_robes",
            "name": "Cloth Robes",
            "description": "Simple cloth robes offering minimal protection.",
            "slot": "Armor",
            "armorType": "Light",
            "defenseBonus": 1,
            "material": "Cloth",
            "quality": "Common",
            "value": 10
        },
        {
            "id": "leather_armor",
            "name": "Leather Armor",
            "description": "Simple armor made of tanned leather. Provides basic protection.",
            "slot": "Armor",
            "armorType": "Light",
            "defenseBonus": 2,
            "material": "Leather",
            "quality": "Common",
            "value": 30
        },
        {
            "id": "studded_leather",
            "name": "Studded Leather",
            "description": "Leather armor reinforced with metal studs.",
            "slot": "Armor",
            "armorType": "Light",
            "defenseBonus": 3,
            "material": "Leather",
            "quality": "Uncommon",
            "value": 60
        },
        {
            "id": "chain_mail",
            "name": "Chain Mail",
            "description": "Interlocking metal rings providing solid protection.",
            "slot": "Armor",
            "armorType": "Medium",
            "defenseBonus": 4,
            "initiativePenalty": -1,
            "requirements": { "minFortitude": 12 },
            "material": "Chain",
            "quality": "Common",
            "value": 100
        },
        {
            "id": "scale_mail",
            "name": "Scale Mail",
            "description": "Overlapping metal scales offering excellent protection.",
            "slot": "Armor",
            "armorType": "Medium",
            "defenseBonus": 5,
            "initiativePenalty": -2,
            "requirements": { "minFortitude": 13 },
            "material": "Steel",
            "quality": "Uncommon",
            "value": 200
        },
        {
            "id": "plate_armor",
            "name": "Plate Armor",
            "description": "Full plate armor offering maximum protection at the cost of mobility.",
            "slot": "Armor",
            "armorType": "Heavy",
            "defenseBonus": 6,
            "initiativePenalty": -3,
            "stealthDisadvantage": true,
            "requirements": { "minFortitude": 14, "minMight": 12 },
            "material": "Plate",
            "quality": "Rare",
            "value": 500
        },
        {
            "id": "wooden_shield",
            "name": "Wooden Shield",
            "description": "A basic wooden shield. Better than nothing.",
            "slot": "Shield",
            "armorType": "Light",
            "defenseBonus": 1,
            "material": "Wood",
            "quality": "Common",
            "value": 15
        },
        {
            "id": "iron_shield",
            "name": "Iron Shield",
            "description": "A sturdy iron shield for reliable defense.",
            "slot": "Shield",
            "armorType": "Medium",
            "defenseBonus": 2,
            "material": "Iron",
            "quality": "Common",
            "value": 50
        },
        {
            "id": "tower_shield",
            "name": "Tower Shield",
            "description": "A massive shield providing exceptional coverage.",
            "slot": "Shield",
            "armorType": "Heavy",
            "defenseBonus": 3,
            "initiativePenalty": -1,
            "requirements": { "minMight": 12 },
            "material": "Steel",
            "quality": "Uncommon",
            "value": 150
        },
        {
            "id": "leather_cap",
            "name": "Leather Cap",
            "description": "A simple leather cap for head protection.",
            "slot": "Helmet",
            "armorType": "Light",
            "defenseBonus": 1,
            "material": "Leather",
            "quality": "Common",
            "value": 15
        },
        {
            "id": "iron_helmet",
            "name": "Iron Helmet",
            "description": "A sturdy iron helmet that protects your head.",
            "slot": "Helmet",
            "armorType": "Medium",
            "defenseBonus": 2,
            "material": "Iron",
            "quality": "Common",
            "value": 40
        },
        {
            "id": "great_helm",
            "name": "Great Helm",
            "description": "A full helm providing excellent head protection.",
            "slot": "Helmet",
            "armorType": "Heavy",
            "defenseBonus": 3,
            "initiativePenalty": -1,
            "requirements": { "minFortitude": 12 },
            "material": "Steel",
            "quality": "Uncommon",
            "value": 100
        },
        {
            "id": "leather_boots",
            "name": "Leather Boots",
            "description": "Sturdy leather boots for all terrain.",
            "slot": "Boots",
            "armorType": "Light",
            "defenseBonus": 1,
            "material": "Leather",
            "quality": "Common",
            "value": 20
        },
        {
            "id": "iron_boots",
            "name": "Iron Boots",
            "description": "Heavy iron boots that protect the feet.",
            "slot": "Boots",
            "armorType": "Heavy",
            "defenseBonus": 2,
            "initiativePenalty": -1,
            "requirements": { "minFortitude": 11 },
            "material": "Iron",
            "quality": "Uncommon",
            "value": 60
        }
    ],
    "accessories": [
        {
            "id": "ring_of_strength",
            "name": "Ring of Strength",
            "description": "A silver ring that enhances the wearer's physical power.",
            "slot": "Ring",
            "statBonuses": { "might": 2 },
            "quality": "Uncommon",
            "value": 200
        },
        {
            "id": "ring_of_precision",
            "name": "Ring of Precision",
            "description": "A gold ring that sharpens the wearer's reflexes.",
            "slot": "Ring",
            "statBonuses": { "finesse": 2 },
            "quality": "Uncommon",
            "value": 200
        },
        {
            "id": "amulet_of_vitality",
            "name": "Amulet of Vitality",
            "description": "A ruby amulet that bolsters the wearer's constitution.",
            "slot": "Amulet",
            "statBonuses": { "fortitude": 2, "maxHealth": 10 },
            "quality": "Rare",
            "value": 250
        },
        {
            "id": "amulet_of_wisdom",
            "name": "Amulet of Wisdom",
            "description": "An emerald amulet that enhances mental fortitude.",
            "slot": "Amulet",
            "statBonuses": { "will": 2, "wits": 1 },
            "quality": "Rare",
            "value": 250
        }
    ]
}
```

### Validation Confirmation

The existing configuration validates successfully against the schema:

| Armor | Slot | Type | Defense | Valid |
|-------|------|------|---------|-------|
| `cloth_robes` | Armor | Light | 1 | Yes |
| `leather_armor` | Armor | Light | 2 | Yes |
| `studded_leather` | Armor | Light | 3 | Yes |
| `chain_mail` | Armor | Medium | 4 | Yes |
| `scale_mail` | Armor | Medium | 5 | Yes |
| `plate_armor` | Armor | Heavy | 6 | Yes |
| `wooden_shield` | Shield | Light | 1 | Yes |
| `iron_shield` | Shield | Medium | 2 | Yes |
| `tower_shield` | Shield | Heavy | 3 | Yes |
| `leather_cap` | Helmet | Light | 1 | Yes |
| `iron_helmet` | Helmet | Medium | 2 | Yes |
| `great_helm` | Helmet | Heavy | 3 | Yes |
| `leather_boots` | Boots | Light | 1 | Yes |
| `iron_boots` | Boots | Heavy | 2 | Yes |

| Accessory | Slot | Bonuses | Valid |
|-----------|------|---------|-------|
| `ring_of_strength` | Ring | might: 2 | Yes |
| `ring_of_precision` | Ring | finesse: 2 | Yes |
| `amulet_of_vitality` | Amulet | fortitude: 2, maxHealth: 10 | Yes |
| `amulet_of_wisdom` | Amulet | will: 2, wits: 1 | Yes |

---

## 12. Data Model Changes

### No Domain Changes Required

This phase creates only a JSON Schema file for validation. No changes to domain entities, services, or application layer are required.

| Layer | Changes |
|-------|---------|
| Domain | None |
| Application | None |
| Infrastructure | None |
| Configuration | One schema file added, one config file updated |

### Schema as Documentation

The schema serves as:
- **Validation contract** for armor and accessory configuration
- **IDE documentation** via description fields
- **Modding reference** for custom equipment systems
- **Design specification** for defensive equipment mechanics

---

## 13. Logging Specifications

### No Runtime Logging Required

Schema validation occurs at design-time in IDE/editors, not at runtime. No logging infrastructure changes are needed for this phase.

| Component | Level | Events |
|-----------|-------|--------|
| N/A | N/A | Schema validation is IDE-based |

---

## 14. Unit Testing Requirements

### Test Count by Feature

| Feature | Test Count |
|---------|------------|
| Schema Valid Structure | ~1 |
| Defense Bonus Range Validation | ~1 |
| Initiative Penalty Range Validation | ~1 |
| Armor Type Enum Validation | ~1 |
| Existing Configuration Validation | ~1 |
| **Total** | **~5** |

### Test Descriptions

#### ArmorSchemaTests.cs

```csharp
[TestFixture]
public class ArmorSchemaTests
{
    /// <summary>
    /// Verifies the schema file is valid JSON Schema Draft-07.
    /// </summary>
    [Test]
    public void Schema_IsValidJsonSchemaDraft07();

    /// <summary>
    /// Verifies the existing armor.json validates against the schema without errors.
    /// </summary>
    [Test]
    public void ExistingArmorJson_ValidatesAgainstSchema();

    /// <summary>
    /// Verifies defenseBonus must be non-negative (>= 0).
    /// </summary>
    [Test]
    public void DefenseBonus_NegativeValue_FailsValidation();

    /// <summary>
    /// Verifies initiativePenalty must be non-positive (<= 0).
    /// </summary>
    [Test]
    public void InitiativePenalty_PositiveValue_FailsValidation();

    /// <summary>
    /// Verifies armorType must be a valid enum value.
    /// </summary>
    [Test]
    public void ArmorType_InvalidEnumValue_FailsValidation();
}
```

### Test Implementation Notes

Tests should use a JSON Schema validation library (e.g., `NJsonSchema` for C#) to:
1. Load the schema file
2. Validate test JSON documents
3. Assert expected validation results

---

## 15. Use Cases

### UC-001: Load Armor Configuration

**Actor:** Game System
**Flow:** System starts -> Loads `armor.json` -> Schema validates content -> Armor available for equipment system

### UC-002: Edit Armor in IDE

**Actor:** Developer/Modder
**Flow:** Opens `armor.json` in VS Code -> IDE loads schema -> Autocomplete suggests properties -> Validation errors shown inline

### UC-003: Add New Armor

**Actor:** Modder
**Flow:** Adds new armor object to `armor` array -> Sets id, name, slot, armorType, defenseBonus, value -> IDE validates structure

### UC-004: Add Heavy Armor with Requirements

**Actor:** Modder
**Flow:** Adds heavy armor -> Sets armorType to "Heavy" -> Adds requirements object with minFortitude, minMight -> Adds initiativePenalty -> IDE validates structure

### UC-005: Invalid Defense Bonus

**Actor:** Modder
**Flow:** Sets defenseBonus to -1 (negative) -> IDE shows error "defenseBonus must be >= 0" -> Modder corrects to 0 or positive

### UC-006: Add Accessory with Stats

**Actor:** Modder
**Flow:** Adds accessory to `accessories` array -> Sets slot to "Ring" -> Adds statBonuses with might bonus -> IDE validates structure

---

## 16. Deliverable Checklist

### Schema Files
- [ ] `config/schemas/armor.schema.json` created
- [ ] Schema follows JSON Schema Draft-07 format
- [ ] Schema includes all defined properties
- [ ] Schema includes definitions section (ArmorDefinition, AccessoryDefinition, StatRequirements, StatBonuses)

### Validation Rules
- [ ] Armor slot enum validation: Armor, Shield, Helmet, Boots, Gloves
- [ ] Accessory slot enum validation: Ring, Amulet, Belt, Cloak
- [ ] Armor type enum validation: Light, Medium, Heavy
- [ ] Quality tier enum validation: Common, Uncommon, Rare, Epic, Legendary
- [ ] Material enum validation: Leather, Chain, Plate, Cloth, Wood, Iron, Steel, Mithril
- [ ] ID pattern validation: `^[a-z][a-z0-9_]*$`
- [ ] Defense bonus must be non-negative (>= 0)
- [ ] Initiative penalty must be non-positive (<= 0)
- [ ] Movement penalty must be non-positive (<= 0)
- [ ] Value must be non-negative (>= 0)
- [ ] Required fields enforced
- [ ] Optional fields have defaults

### Configuration Updates
- [ ] `armor.json` $schema reference updated to `./schemas/armor.schema.json`
- [ ] Existing `armor.json` validates against schema

### Testing
- [ ] ~5 unit tests implemented
- [ ] All tests passing
- [ ] Tests cover happy path and error cases

### Documentation
- [ ] Schema properties have descriptions
- [ ] This design specification complete

---

## 17. Acceptance Criteria

### Functional
- [ ] `armor.schema.json` created in `config/schemas/` directory
- [ ] Schema validates existing `armor.json` without errors
- [ ] Armor slot enum validated (Armor, Shield, Helmet, Boots, Gloves)
- [ ] Accessory slot enum validated (Ring, Amulet, Belt, Cloak)
- [ ] Armor type enum validated (Light, Medium, Heavy)
- [ ] Defense bonus validated as non-negative
- [ ] Initiative penalty validated as non-positive
- [ ] Movement penalty validated as non-positive
- [ ] Stat requirements validated as optional object
- [ ] Stat bonuses validated as optional object
- [ ] Accessories array supported with different schema
- [ ] Material type enum validated
- [ ] Quality tier enum validated
- [ ] VS Code provides autocomplete when schema linked

### Quality
- [ ] Build succeeds with 0 errors
- [ ] Build succeeds with 0 warnings
- [ ] ~5 unit tests pass
- [ ] Schema file is valid JSON
- [ ] All schema properties have descriptions

---

## 18. Dependencies

### Required from Prior Versions

| Type | Location | Usage in this phase |
|------|----------|---------------------|
| `armor.json` | `config/armor.json` | Validated by new schema |
| Schema patterns | `config/schemas/*.schema.json` | Reference for schema structure |
| StatBonuses pattern | `weapons.schema.json` (v0.14.2a) | Shared definition structure |
| Quality tier enum | `weapons.schema.json` (v0.14.2a) | Shared enumeration |

### Provides to Future Versions

| Type | Usage |
|------|-------|
| `armor.schema.json` | Validates armor and accessory configuration |
| ArmorDefinition pattern | Used by loot-tables.json for item references |
| AccessoryDefinition pattern | Used by loot-tables.json for item references |
| StatRequirements definition | Reusable for other equipment requirements |
| StatBonuses definition | Shared with weapons.schema.json |
| Equipment slot enums | Referenced by character equipment system |

### Implementation Order Note

**v0.14.2b can be implemented in parallel with v0.14.2a and v0.14.2c** as they have no internal dependencies.

v0.14.2d (Loot Tables) should be implemented last as it references weapon, armor, and item IDs.

---

## 19. Future Considerations

### Deferred to Future Versions

- **Cross-reference validation**: Validating material/quality combinations
- **Set bonus mechanics**: Bonuses for equipping matching armor pieces
- **Armor enchantment system**: Magical properties and upgrades
- **Armor durability**: Degradation and repair mechanics
- **Armor crafting**: Creating armor from materials

### Out of Scope

- **Runtime schema validation**: Application-level validation at load time (handled by existing provider patterns)
- **Schema versioning migration**: Automatic migration between schema versions
- **Defense calculation logic**: Runtime mechanics for armor defense (domain logic, not schema)
- **UI equipment display**: How armor is shown to players (presentation concern)
- **Balance tuning**: Specific defense values (design decisions)

### Potential Future Enhancements

If the armor system expands, consider adding to the schema:

**Enchantment System:**
```json
"enchantments": {
    "type": "array",
    "items": {
        "type": "object",
        "properties": {
            "enchantmentId": { "type": "string" },
            "level": { "type": "integer", "minimum": 1 }
        }
    }
}
```

**Durability System:**
```json
"durability": {
    "type": "object",
    "properties": {
        "current": { "type": "integer", "minimum": 0 },
        "maximum": { "type": "integer", "minimum": 1 }
    }
}
```

**Set Bonus Reference:**
```json
"setId": {
    "type": "string",
    "description": "Reference to armor set for set bonus calculation",
    "pattern": "^[a-z][a-z0-9_]*$"
}
```

**Resistance Bonuses:**
```json
"resistances": {
    "type": "object",
    "description": "Damage type resistances provided by the armor",
    "additionalProperties": {
        "type": "integer",
        "description": "Resistance percentage (0-100)"
    }
}
```

**Special Abilities:**
```json
"specialAbilities": {
    "type": "array",
    "items": {
        "type": "string",
        "description": "Reference to ability ID triggered by armor"
    }
}
```

---

*Document Version: 1.0*
*Last Updated: 2026-01-17*
*Author: Claude*
