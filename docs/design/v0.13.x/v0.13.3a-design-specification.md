# v0.13.3a Design Specification: Resource Inventory Panel

**Version:** 0.13.3a
**Parent:** v0.13.3 (Crafting UI)
**Prerequisites:** v0.13.2 Complete (Ability Tree UI), v0.11.x Complete (Crafting & Resources Services)
**Status:** Design Complete
**Estimated Unit Tests:** ~6

---

## Table of Contents

1. [Executive Summary](#1-executive-summary)
2. [Feature Overview](#2-feature-overview)
3. [Architecture Diagrams](#3-architecture-diagrams)
4. [Resource Inventory Panel Component](#4-resource-inventory-panel-component)
   - 4.1 [ResourceInventoryPanel Class](#41-resourceinventorypanel-class)
   - 4.2 [Resource Categorization](#42-resource-categorization)
   - 4.3 [Filter Tab Handling](#43-filter-tab-handling)
5. [Resource Stack Renderer](#5-resource-stack-renderer)
   - 5.1 [ResourceStackRenderer Class](#51-resourcestackrenderer-class)
   - 5.2 [Type Icons](#52-type-icons)
   - 5.3 [Quantity Formatting](#53-quantity-formatting)
6. [Data Model Changes](#7-data-model-changes)
7. [Configuration File Schemas](#8-configuration-file-schemas)
8. [InventoryView Integration](#9-inventoryview-integration)
9. [Logging Specifications](#10-logging-specifications)
10. [Unit Testing Requirements](#11-unit-testing-requirements)
11. [Use Cases](#12-use-cases)
12. [Deliverable Checklist](#13-deliverable-checklist)
13. [Acceptance Criteria](#14-acceptance-criteria)
14. [Dependencies](#15-dependencies)
15. [Future Considerations](#16-future-considerations)

---

## 1. Executive Summary

This version implements the resource inventory panel showing the player's collected crafting resources organized by type. The panel displays resource stacks with quantities, type icons, and filtering capabilities. Resources are grouped by type (Ore, Herb, Leather, Gem, Misc) in a categorized column layout with clear type headers and visual differentiation.

### Key Deliverables

| Category | Items |
|----------|-------|
| **UI Components** | `ResourceInventoryPanel` |
| **Renderers** | `ResourceStackRenderer` |
| **DTOs** | `ResourceStackDisplayDto`, `ResourceCategoryDisplayDto` |
| **View Updates** | `InventoryView` integration |
| **Configuration** | `resource-panel.json` |
| **Tests** | ~6 unit tests |

### Architectural Significance

This version establishes the **Resource Display Pattern** for crafting-related UI:
- Resources are displayed in categorized columns by type
- Single-letter type icons provide visual identification (`[O]`, `[H]`, `[L]`, `[G]`, `[M]`)
- Filter tabs allow filtering by resource type
- Quantities display in consistent right-aligned format (`x##`)
- The pattern supports integration with crafting station and recipe interfaces (v0.13.3b-c)

---

## 2. Feature Overview

```
v0.13.3a Features
├── ResourceInventoryPanel (UI Component)
│   ├── RenderResources(IEnumerable<PlayerResource>)
│   ├── RenderResourcesByType(ResourceType)
│   ├── SetFilter(ResourceType?)
│   └── ShowResourceDetails(PlayerResource)
│
├── ResourceStackRenderer (Renderer)
│   ├── FormatStack(PlayerResource)
│   ├── GetTypeIcon(ResourceType)
│   ├── GetTypeColor(ResourceType)
│   └── FormatQuantity(int)
│
├── Resource Categories
│   ├── Ore: Mining resources (gray/brown)
│   ├── Herb: Gathered plants (green)
│   ├── Leather: Animal hides (brown)
│   ├── Gem: Precious stones (cyan)
│   └── Misc: Other materials (white)
│
├── Filter Tabs
│   ├── [All] - Show all resources
│   ├── [Ore] - Filter to ore only
│   ├── [Herb] - Filter to herbs only
│   ├── [Leather] - Filter to leather only
│   ├── [Gem] - Filter to gems only
│   └── [Misc] - Filter to misc only
│
└── InventoryView Integration
    ├── Resource Tab Detection
    ├── Panel Placement
    └── Tab Navigation
```

### Scope Verification

| Feature | Source | Included |
|---------|--------|----------|
| Resource inventory panel with categorized display | v0.13.3-scope-breakdown.md | Yes |
| Resource stack display with quantities | v0.13.3-scope-breakdown.md | Yes |
| Resource type icons (ore, herb, leather, gem, misc) | v0.13.3-scope-breakdown.md | Yes |
| Filter tabs for resource types | v0.13.3-scope-breakdown.md | Yes |
| Crafting station menu | v0.13.3-scope-breakdown.md | No (v0.13.3b) |
| Recipe browser | v0.13.3-scope-breakdown.md | No (v0.13.3c) |
| Gathering display | v0.13.3-scope-breakdown.md | No (v0.13.3d) |

---

## 3. Architecture Diagrams

### 3.1 Layer Diagram

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          PRESENTATION LAYER                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────┐      ┌─────────────────────────┐               │
│  │    InventoryView        │      │  ResourceInventoryPanel │               │
│  │    (existing)           │◄────▶│  (NEW)                  │               │
│  ├─────────────────────────┤      ├─────────────────────────┤               │
│  │ - RenderInventory()     │      │ - RenderResources()     │               │
│  │ - HandleResourcesTab()  │      │ - RenderResourcesByType()│               │
│  │ - IntegrateComponents() │      │ - SetFilter()           │               │
│  └─────────────────────────┘      │ - ShowResourceDetails() │               │
│                                    └───────────┬─────────────┘               │
│                                                │                             │
│  ┌─────────────────────────────────────────────┴───────────────────────────┐ │
│  │                     ResourceStackRenderer (NEW)                          │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ - FormatStack()         - GetTypeIcon()                                 │ │
│  │ - GetTypeColor()        - FormatQuantity()                              │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                          APPLICATION LAYER                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                    ResourceService (existing v0.11.x)               │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │ + GetPlayerResources(player) : IReadOnlyList<ResourcePoolDto>       │    │
│  │ + GetResourceType(resourceTypeId) : ResourceTypeDefinition?         │    │
│  │ + GetAllResourceTypes() : IReadOnlyList<ResourceTypeDto>            │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                    IGameConfigurationProvider (existing)            │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │ + GetResourceTypes() : IReadOnlyList<ResourceTypeDefinition>        │    │
│  │ + GetResourceTypeById(resourceTypeId) : ResourceTypeDefinition?     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                            DOMAIN LAYER                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────┐      ┌─────────────────────────┐               │
│  │  ResourceTypeDefinition │      │      ResourcePool       │               │
│  │   (existing v0.11.x)    │      │   (existing v0.11.x)    │               │
│  ├─────────────────────────┤      ├─────────────────────────┤               │
│  │ + Id: string            │      │ + ResourceTypeId: string│               │
│  │ + DisplayName: string   │      │ + Current: int          │               │
│  │ + Abbreviation: string  │      │ + Maximum: int          │               │
│  │ + Description: string   │      │ + Percentage: double    │               │
│  │ + Color: string         │      │ + IsFull: bool          │               │
│  │ + SortOrder: int        │      │ + IsEmpty: bool         │               │
│  └─────────────────────────┘      └─────────────────────────┘               │
│                                                                              │
│  ┌─────────────────────────┐      ┌─────────────────────────┐               │
│  │     ResourceCategory    │      │     Player.Resources    │               │
│  │     (NEW enum)          │      │   (existing v0.11.x)    │               │
│  ├─────────────────────────┤      ├─────────────────────────┤               │
│  │ + Ore                   │      │ Dictionary<string,      │               │
│  │ + Herb                  │      │   ResourcePool>         │               │
│  │ + Leather               │      └─────────────────────────┘               │
│  │ + Gem                   │                                                 │
│  │ + Misc                  │                                                 │
│  └─────────────────────────┘                                                 │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 Resource Panel Display Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    RESOURCE PANEL DISPLAY FLOW                               │
└─────────────────────────────────────────────────────────────────────────────┘

    InventoryView Opens Resources Tab
           │
           ▼
┌─────────────────────────┐
│     InventoryView       │
│  HandleResourcesTab()   │
└───────────┬─────────────┘
            │
            │ 1. Get player's resources
            ▼
┌─────────────────────────┐
│    ResourceService      │
│  GetPlayerResources()   │
└───────────┬─────────────┘
            │
            │ 2. Returns List<ResourcePoolDto>
            ▼
┌─────────────────────────────────────────────────────────────┐
│    ResourceInventoryPanel                                    │
│                                                              │
│  ┌───────────────────┐  ┌───────────────────┐               │
│  │ GroupByCategory() │  │ ApplyFilter()     │               │
│  └─────────┬─────────┘  └─────────┬─────────┘               │
│            │                      │                          │
│            │ 3. Categorize resources by type                │
│            ▼                      ▼                          │
│  ┌───────────────────┐  ┌───────────────────┐               │
│  │ RenderResources() │  │ RenderFilterTabs()│               │
│  └─────────┬─────────┘  └─────────┬─────────┘               │
│            │                      │                          │
│            │ 4. Format and render resources                 │
└────────────┼──────────────────────┼─────────────────────────┘
             │                      │
             │ 5. Call renderer for each stack
             ▼                      ▼
┌─────────────────────────────────────────────────────────────┐
│ ResourceStackRenderer                                        │
│                                                              │
│ - GetTypeIcon(category)  │ 6. Get type icon [O]/[H]/etc.   │
│ - GetTypeColor(category) │ 7. Get type color               │
│ - FormatStack(resource)  │ 8. Format: "[O] Iron Ore    x24"│
│ - FormatQuantity(qty)    │ 9. Format quantity: "x24"       │
└───────────┬─────────────────────────────────────────────────┘
            │
            │ 10. Return formatted strings
            ▼
┌─────────────────────────┐
│   ITerminalService      │
│   WriteAt(x, y, text)   │
│   WriteColoredAt(...)   │
└─────────────────────────┘
```

### 3.3 Filter Tab Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    FILTER TAB FLOW                                           │
└─────────────────────────────────────────────────────────────────────────────┘

    User Presses Filter Key (1-6)
           │
           ▼
┌─────────────────────────┐
│  ResourceInventoryPanel │
│  HandleFilterInput()    │
└───────────┬─────────────┘
            │
            │ Determine selected filter
            ▼
┌─────────────────────────────────────────────────────────────┐
│  Key Mapping                                                 │
│                                                              │
│  Key 1 = All (null filter)                                  │
│  Key 2 = Ore (ResourceCategory.Ore)                         │
│  Key 3 = Herb (ResourceCategory.Herb)                       │
│  Key 4 = Leather (ResourceCategory.Leather)                 │
│  Key 5 = Gem (ResourceCategory.Gem)                         │
│  Key 6 = Misc (ResourceCategory.Misc)                       │
└───────────┬─────────────────────────────────────────────────┘
            │
            │ Set active filter
            ▼
┌─────────────────────────┐
│  SetFilter(category?)   │
└───────────┬─────────────┘
            │
            ├─── Filter = null ──────► Show all resources
            │
            │ Filter != null
            ▼
┌─────────────────────────────────────────────────────────────┐
│  Filter resources by category                                │
│                                                              │
│  filteredResources = resources                              │
│      .Where(r => r.Category == filter)                      │
└───────────┬─────────────────────────────────────────────────┘
            │
            │ Re-render with filtered resources
            ▼
┌─────────────────────────┐
│  RenderResources()      │
│  (filtered set)         │
└─────────────────────────┘
```

---

## 4. Resource Inventory Panel Component

### 4.1 ResourceInventoryPanel Class

**Purpose:** Displays the player's crafting resources organized by type in a categorized panel layout.

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/UI/ResourceInventoryPanel.cs`

```csharp
using RuneAndRust.Application.DTOs;
using RuneAndRust.Presentation.Tui.Renderers;
using RuneAndRust.Presentation.Tui.Services;
using RuneAndRust.Presentation.Tui.DTOs;
using RuneAndRust.Presentation.Tui.Configuration;

namespace RuneAndRust.Presentation.Tui.UI;

/// <summary>
/// Displays the player's crafting resources organized by type.
/// </summary>
/// <remarks>
/// Resources are grouped into categories (Ore, Herb, Leather, Gem, Misc)
/// and displayed in a column layout with type icons and quantities.
/// Filter tabs allow viewing specific resource types.
/// </remarks>
public class ResourceInventoryPanel
{
    private readonly ResourceStackRenderer _stackRenderer;
    private readonly ITerminalService _terminalService;
    private readonly ResourcePanelConfig _config;
    private readonly ILogger<ResourceInventoryPanel> _logger;

    private ResourceCategory? _activeFilter;
    private IReadOnlyList<ResourceStackDisplayDto> _resources = Array.Empty<ResourceStackDisplayDto>();
    private (int X, int Y) _panelPosition;

    /// <summary>
    /// Gets the currently active filter category.
    /// </summary>
    public ResourceCategory? ActiveFilter => _activeFilter;

    /// <summary>
    /// Creates a new instance of the ResourceInventoryPanel component.
    /// </summary>
    /// <param name="stackRenderer">The renderer for resource stacks.</param>
    /// <param name="terminalService">The terminal output service.</param>
    /// <param name="config">Configuration for panel display settings.</param>
    /// <param name="logger">Logger for diagnostic output.</param>
    public ResourceInventoryPanel(
        ResourceStackRenderer stackRenderer,
        ITerminalService terminalService,
        ResourcePanelConfig config,
        ILogger<ResourceInventoryPanel> logger)
    {
        _stackRenderer = stackRenderer ?? throw new ArgumentNullException(nameof(stackRenderer));
        _terminalService = terminalService ?? throw new ArgumentNullException(nameof(terminalService));
        _config = config ?? throw new ArgumentNullException(nameof(config));
        _logger = logger ?? throw new ArgumentNullException(nameof(logger));
    }

    /// <summary>
    /// Sets the panel position.
    /// </summary>
    /// <param name="x">The X coordinate.</param>
    /// <param name="y">The Y coordinate.</param>
    public void SetPosition(int x, int y)
    {
        _panelPosition = (x, y);
    }

    /// <summary>
    /// Renders all resources in the panel.
    /// </summary>
    /// <param name="resources">The player's resources.</param>
    public void RenderResources(IEnumerable<ResourceStackDisplayDto> resources)
    {
        _resources = resources.ToList();

        // Clear panel area
        ClearPanel();

        // Render panel header
        RenderHeader();

        // Render filter tabs
        RenderFilterTabs();

        // Group resources by category
        var grouped = GroupByCategory(_resources);

        // Apply active filter if set
        if (_activeFilter.HasValue)
        {
            grouped = grouped
                .Where(g => g.Key == _activeFilter.Value)
                .ToDictionary(g => g.Key, g => g.Value);
        }

        // Render resource categories in columns
        RenderCategories(grouped);

        _logger.LogDebug(
            "Rendered {Count} resources with filter {Filter}",
            _resources.Count,
            _activeFilter?.ToString() ?? "All");
    }

    /// <summary>
    /// Renders resources filtered to a specific type.
    /// </summary>
    /// <param name="category">The resource category to display.</param>
    public void RenderResourcesByType(ResourceCategory category)
    {
        SetFilter(category);
        RenderResources(_resources);
    }

    /// <summary>
    /// Sets the active filter category.
    /// </summary>
    /// <param name="category">The category to filter by, or null for all.</param>
    public void SetFilter(ResourceCategory? category)
    {
        _activeFilter = category;
        _logger.LogDebug("Set filter to {Category}", category?.ToString() ?? "All");
    }

    /// <summary>
    /// Shows details for a selected resource.
    /// </summary>
    /// <param name="resource">The resource to display details for.</param>
    public void ShowResourceDetails(ResourceStackDisplayDto resource)
    {
        // Render resource detail popup
        var detailY = _panelPosition.Y + _config.PanelHeight - 4;
        var detailLine = $"{resource.DisplayName}: {resource.Description}";

        _terminalService.WriteAt(_panelPosition.X + 2, detailY, detailLine);

        _logger.LogDebug("Showed details for resource {ResourceId}", resource.ResourceId);
    }

    /// <summary>
    /// Handles filter input from keyboard.
    /// </summary>
    /// <param name="key">The pressed key.</param>
    /// <returns>True if the input was handled.</returns>
    public bool HandleFilterInput(ConsoleKey key)
    {
        var filter = key switch
        {
            ConsoleKey.D1 or ConsoleKey.NumPad1 => (ResourceCategory?)null,
            ConsoleKey.D2 or ConsoleKey.NumPad2 => ResourceCategory.Ore,
            ConsoleKey.D3 or ConsoleKey.NumPad3 => ResourceCategory.Herb,
            ConsoleKey.D4 or ConsoleKey.NumPad4 => ResourceCategory.Leather,
            ConsoleKey.D5 or ConsoleKey.NumPad5 => ResourceCategory.Gem,
            ConsoleKey.D6 or ConsoleKey.NumPad6 => ResourceCategory.Misc,
            _ => _activeFilter // No change
        };

        if (filter != _activeFilter || (key >= ConsoleKey.D1 && key <= ConsoleKey.D6))
        {
            SetFilter(filter);
            RenderResources(_resources);
            return true;
        }

        return false;
    }

    #region Private Methods

    private void ClearPanel()
    {
        var blankLine = new string(' ', _config.PanelWidth);
        for (var y = 0; y < _config.PanelHeight; y++)
        {
            _terminalService.WriteAt(_panelPosition.X, _panelPosition.Y + y, blankLine);
        }
    }

    private void RenderHeader()
    {
        var headerY = _panelPosition.Y;
        var width = _config.PanelWidth;

        // Top border
        var topBorder = $"┌{new string('─', width - 2)}┐";
        _terminalService.WriteAt(_panelPosition.X, headerY, topBorder);

        // Title
        var title = "RESOURCES";
        var titlePadding = (width - 2 - title.Length) / 2;
        var titleLine = $"│{new string(' ', titlePadding)}{title}{new string(' ', width - 2 - titlePadding - title.Length)}│";
        _terminalService.WriteAt(_panelPosition.X, headerY + 1, titleLine);

        // Separator
        var separator = $"├{new string('─', width - 2)}┤";
        _terminalService.WriteAt(_panelPosition.X, headerY + 2, separator);
    }

    private void RenderFilterTabs()
    {
        var tabY = _panelPosition.Y + 3;
        var tabLine = new System.Text.StringBuilder();
        tabLine.Append("│  Filter: ");

        var filters = new[]
        {
            ("All", (ResourceCategory?)null),
            ("Ore", (ResourceCategory?)ResourceCategory.Ore),
            ("Herb", (ResourceCategory?)ResourceCategory.Herb),
            ("Leather", (ResourceCategory?)ResourceCategory.Leather),
            ("Gem", (ResourceCategory?)ResourceCategory.Gem),
            ("Misc", (ResourceCategory?)ResourceCategory.Misc)
        };

        for (var i = 0; i < filters.Length; i++)
        {
            var (name, category) = filters[i];
            var isActive = _activeFilter == category;
            var bracket = isActive ? $"[{name}]" : $" {name} ";
            tabLine.Append(bracket);
            if (i < filters.Length - 1)
            {
                tabLine.Append(' ');
            }
        }

        // Pad to panel width
        var currentLength = tabLine.Length;
        tabLine.Append(new string(' ', _config.PanelWidth - currentLength - 1));
        tabLine.Append('│');

        _terminalService.WriteAt(_panelPosition.X, tabY, tabLine.ToString());

        // Highlight active tab
        var tabX = _panelPosition.X + 11; // After "│  Filter: "
        for (var i = 0; i < filters.Length; i++)
        {
            var (name, category) = filters[i];
            var isActive = _activeFilter == category;

            if (isActive)
            {
                _terminalService.WriteColoredAt(
                    tabX,
                    tabY,
                    $"[{name}]",
                    _config.ActiveFilterColor);
            }

            tabX += name.Length + 3; // Length + brackets + space
        }

        // Separator after filter
        var separator = $"├{new string('─', _config.PanelWidth - 2)}┤";
        _terminalService.WriteAt(_panelPosition.X, tabY + 1, separator);
    }

    private void RenderCategories(Dictionary<ResourceCategory, List<ResourceStackDisplayDto>> grouped)
    {
        var contentY = _panelPosition.Y + 5;
        var columnWidth = (_config.PanelWidth - 4) / _config.ColumnCount;

        // Determine which categories to show
        var categories = _activeFilter.HasValue
            ? new[] { _activeFilter.Value }
            : Enum.GetValues<ResourceCategory>();

        var columnIndex = 0;
        foreach (var category in categories)
        {
            if (!grouped.TryGetValue(category, out var resources) || resources.Count == 0)
            {
                continue;
            }

            var columnX = _panelPosition.X + 2 + (columnIndex * columnWidth);
            RenderCategoryColumn(columnX, contentY, category, resources, columnWidth);

            columnIndex++;
            if (columnIndex >= _config.ColumnCount)
            {
                columnIndex = 0;
                contentY += _config.MaxResourcesPerColumn + 2;
            }
        }

        // Render bottom border
        var bottomY = _panelPosition.Y + _config.PanelHeight - 1;
        var bottomBorder = $"└{new string('─', _config.PanelWidth - 2)}┘";
        _terminalService.WriteAt(_panelPosition.X, bottomY, bottomBorder);
    }

    private void RenderCategoryColumn(
        int x, int y,
        ResourceCategory category,
        List<ResourceStackDisplayDto> resources,
        int columnWidth)
    {
        // Category header
        var header = category.ToString().ToUpperInvariant();
        var underline = new string('─', header.Length);

        _terminalService.WriteColoredAt(x, y, header, _stackRenderer.GetTypeColor(category));
        _terminalService.WriteAt(x, y + 1, underline);

        // Resource stacks
        var resourceY = y + 2;
        var displayCount = Math.Min(resources.Count, _config.MaxResourcesPerColumn);

        for (var i = 0; i < displayCount; i++)
        {
            var resource = resources[i];
            var formattedStack = _stackRenderer.FormatStack(resource, columnWidth - 2);

            _terminalService.WriteColoredAt(
                x,
                resourceY + i,
                _stackRenderer.GetTypeIcon(category),
                _stackRenderer.GetTypeColor(category));

            _terminalService.WriteAt(
                x + 4,
                resourceY + i,
                formattedStack);
        }

        // Show overflow indicator if needed
        if (resources.Count > _config.MaxResourcesPerColumn)
        {
            var overflowText = $"... +{resources.Count - displayCount} more";
            _terminalService.WriteColoredAt(
                x,
                resourceY + displayCount,
                overflowText,
                ConsoleColor.DarkGray);
        }
    }

    private static Dictionary<ResourceCategory, List<ResourceStackDisplayDto>> GroupByCategory(
        IReadOnlyList<ResourceStackDisplayDto> resources)
    {
        return resources
            .GroupBy(r => r.Category)
            .ToDictionary(g => g.Key, g => g.ToList());
    }

    #endregion
}
```

### 4.2 Resource Categorization

**Purpose:** Organize resources into logical categories for display.

**Categories:**

| Category | Description | Icon | Color | Examples |
|----------|-------------|------|-------|----------|
| Ore | Mining resources | `[O]` | Gray/Brown | Iron Ore, Silver Ore, Gold Ore |
| Herb | Gathered plants | `[H]` | Green | Healing Herb, Mana Bloom, Fire Blossom |
| Leather | Animal hides | `[L]` | Brown | Leather, Thick Hide, Dragon Scale |
| Gem | Precious stones | `[G]` | Cyan | Ruby, Sapphire, Emerald |
| Misc | Other materials | `[M]` | White | Enchanting Dust, Magic Essence |

**Category Assignment Logic:**

Categories are assigned based on the resource definition's `Category` property from configuration. If not specified, resources default to `Misc`.

### 4.3 Filter Tab Handling

**Purpose:** Allow filtering the resource display by category.

**Filter Tab Visual:**
```
┌─────────────────────────────────────────────────────────────────────┐
│                       RESOURCES                                      │
├─────────────────────────────────────────────────────────────────────┤
│  Filter: [All] [Ore] [Herb] [Leather] [Gem] [Misc]                  │
├─────────────────────────────────────────────────────────────────────┤
```

**Filter Behavior:**
- `[All]` (key 1): Show all resource categories
- `[Ore]` (key 2): Show only ore resources
- `[Herb]` (key 3): Show only herb resources
- `[Leather]` (key 4): Show only leather resources
- `[Gem]` (key 5): Show only gem resources
- `[Misc]` (key 6): Show only miscellaneous resources

**Active Filter Highlighting:**
- Active filter tab is highlighted with brackets `[All]`
- Inactive tabs show without brackets ` Ore `
- Active tab uses highlight color (configurable)

---

## 5. Resource Stack Renderer

### 5.1 ResourceStackRenderer Class

**Purpose:** Formats individual resource stacks for display with type icons, names, and quantities.

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/Renderers/ResourceStackRenderer.cs`

```csharp
using RuneAndRust.Presentation.Tui.DTOs;
using RuneAndRust.Presentation.Tui.Configuration;

namespace RuneAndRust.Presentation.Tui.Renderers;

/// <summary>
/// Renders resource stacks with type icons, names, and quantities.
/// </summary>
/// <remarks>
/// Provides consistent formatting for resource display including
/// type-specific icons and colors.
/// </remarks>
public class ResourceStackRenderer
{
    private readonly ResourcePanelConfig _config;

    /// <summary>
    /// Creates a new instance of the ResourceStackRenderer.
    /// </summary>
    /// <param name="config">Configuration for display settings.</param>
    public ResourceStackRenderer(ResourcePanelConfig config)
    {
        _config = config ?? throw new ArgumentNullException(nameof(config));
    }

    /// <summary>
    /// Formats a resource stack for display.
    /// </summary>
    /// <param name="resource">The resource to format.</param>
    /// <param name="maxWidth">Maximum width for the formatted string.</param>
    /// <returns>The formatted resource string.</returns>
    public string FormatStack(ResourceStackDisplayDto resource, int maxWidth)
    {
        var quantity = FormatQuantity(resource.Quantity);
        var availableWidth = maxWidth - quantity.Length - 1; // -1 for space

        var name = resource.DisplayName;
        if (name.Length > availableWidth)
        {
            name = name.Substring(0, availableWidth - 2) + "..";
        }

        return $"{name.PadRight(availableWidth)} {quantity}";
    }

    /// <summary>
    /// Gets the type icon for a resource category.
    /// </summary>
    /// <param name="category">The resource category.</param>
    /// <returns>The type icon string.</returns>
    public string GetTypeIcon(ResourceCategory category)
    {
        return category switch
        {
            ResourceCategory.Ore => "[O]",
            ResourceCategory.Herb => "[H]",
            ResourceCategory.Leather => "[L]",
            ResourceCategory.Gem => "[G]",
            ResourceCategory.Misc => "[M]",
            _ => "[?]"
        };
    }

    /// <summary>
    /// Gets the display color for a resource category.
    /// </summary>
    /// <param name="category">The resource category.</param>
    /// <returns>The console color for the category.</returns>
    public ConsoleColor GetTypeColor(ResourceCategory category)
    {
        return category switch
        {
            ResourceCategory.Ore => _config.OreColor,
            ResourceCategory.Herb => _config.HerbColor,
            ResourceCategory.Leather => _config.LeatherColor,
            ResourceCategory.Gem => _config.GemColor,
            ResourceCategory.Misc => _config.MiscColor,
            _ => ConsoleColor.White
        };
    }

    /// <summary>
    /// Formats a quantity for display.
    /// </summary>
    /// <param name="quantity">The quantity value.</param>
    /// <returns>The formatted quantity string.</returns>
    public string FormatQuantity(int quantity)
    {
        if (quantity >= 1000)
        {
            return $"x{quantity / 1000}k";
        }

        return $"x{quantity}";
    }

    /// <summary>
    /// Formats a resource stack with full icon prefix.
    /// </summary>
    /// <param name="resource">The resource to format.</param>
    /// <returns>The formatted string with icon.</returns>
    public string FormatStackWithIcon(ResourceStackDisplayDto resource)
    {
        var icon = GetTypeIcon(resource.Category);
        var name = resource.DisplayName;
        var quantity = FormatQuantity(resource.Quantity);

        return $"{icon} {name} {quantity}";
    }
}
```

### 5.2 Type Icons

**Purpose:** Provide visual identification for each resource category.

**Icon Definitions:**

| Category | Icon | Meaning |
|----------|------|---------|
| Ore | `[O]` | Mining/metal resources |
| Herb | `[H]` | Plant-based resources |
| Leather | `[L]` | Animal hide resources |
| Gem | `[G]` | Precious stone resources |
| Misc | `[M]` | Miscellaneous crafting materials |

**Icon Display:**
```
[O] Iron Ore      x24
[H] Healing Herb  x15
[L] Leather       x8
[G] Ruby          x5
[M] Magic Essence x8
```

### 5.3 Quantity Formatting

**Purpose:** Display quantities in a consistent, readable format.

**Format Rules:**
- Quantities less than 1000: `x##` (e.g., `x24`, `x156`)
- Quantities 1000 or more: `x#k` (e.g., `x1k`, `x25k`)
- Right-aligned within the column

**Examples:**
```
Iron Ore       x24
Silver Ore     x156
Gold Ore       x1k
```

---

## 6. Data Model Changes

### 6.1 New Enums

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/DTOs/ResourceCategory.cs`

```csharp
namespace RuneAndRust.Presentation.Tui.DTOs;

/// <summary>
/// Represents the category of a crafting resource.
/// </summary>
public enum ResourceCategory
{
    /// <summary>Mining and metal resources.</summary>
    Ore,

    /// <summary>Plant-based resources.</summary>
    Herb,

    /// <summary>Animal hide resources.</summary>
    Leather,

    /// <summary>Precious stone resources.</summary>
    Gem,

    /// <summary>Miscellaneous crafting materials.</summary>
    Misc
}
```

### 6.2 New DTOs

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/DTOs/ResourceDisplayDtos.cs`

```csharp
namespace RuneAndRust.Presentation.Tui.DTOs;

/// <summary>
/// Data transfer object for a resource stack display.
/// </summary>
/// <param name="ResourceId">The unique resource identifier.</param>
/// <param name="DisplayName">The display name of the resource.</param>
/// <param name="Description">The resource description.</param>
/// <param name="Category">The resource category.</param>
/// <param name="Quantity">The current quantity owned.</param>
public record ResourceStackDisplayDto(
    string ResourceId,
    string DisplayName,
    string Description,
    ResourceCategory Category,
    int Quantity);

/// <summary>
/// Data transfer object for a resource category display.
/// </summary>
/// <param name="Category">The category type.</param>
/// <param name="DisplayName">The display name for the category.</param>
/// <param name="Resources">The resources in this category.</param>
/// <param name="TotalQuantity">The total quantity across all resources.</param>
public record ResourceCategoryDisplayDto(
    ResourceCategory Category,
    string DisplayName,
    IReadOnlyList<ResourceStackDisplayDto> Resources,
    int TotalQuantity);
```

### 6.3 Configuration Classes

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/Configuration/ResourcePanelConfig.cs`

```csharp
namespace RuneAndRust.Presentation.Tui.Configuration;

/// <summary>
/// Configuration for resource panel display settings.
/// </summary>
public class ResourcePanelConfig
{
    /// <summary>
    /// Width of the resource panel.
    /// </summary>
    public int PanelWidth { get; set; } = 70;

    /// <summary>
    /// Height of the resource panel.
    /// </summary>
    public int PanelHeight { get; set; } = 20;

    /// <summary>
    /// Number of columns for category display.
    /// </summary>
    public int ColumnCount { get; set; } = 3;

    /// <summary>
    /// Maximum resources to show per column before overflow.
    /// </summary>
    public int MaxResourcesPerColumn { get; set; } = 6;

    /// <summary>
    /// Color for the active filter tab.
    /// </summary>
    public ConsoleColor ActiveFilterColor { get; set; } = ConsoleColor.Cyan;

    /// <summary>
    /// Color for ore resources.
    /// </summary>
    public ConsoleColor OreColor { get; set; } = ConsoleColor.DarkYellow;

    /// <summary>
    /// Color for herb resources.
    /// </summary>
    public ConsoleColor HerbColor { get; set; } = ConsoleColor.Green;

    /// <summary>
    /// Color for leather resources.
    /// </summary>
    public ConsoleColor LeatherColor { get; set; } = ConsoleColor.DarkYellow;

    /// <summary>
    /// Color for gem resources.
    /// </summary>
    public ConsoleColor GemColor { get; set; } = ConsoleColor.Cyan;

    /// <summary>
    /// Color for misc resources.
    /// </summary>
    public ConsoleColor MiscColor { get; set; } = ConsoleColor.White;
}
```

---

## 7. Configuration File Schemas

### 7.1 resource-panel.json

**File:** `config/resource-panel.json`

```json
{
  "$schema": "./schemas/resource-panel.schema.json",
  "panelWidth": 70,
  "panelHeight": 20,
  "columnCount": 3,
  "maxResourcesPerColumn": 6,
  "activeFilterColor": "Cyan",
  "oreColor": "DarkYellow",
  "herbColor": "Green",
  "leatherColor": "DarkYellow",
  "gemColor": "Cyan",
  "miscColor": "White"
}
```

### 7.2 resource-panel.schema.json

**File:** `config/schemas/resource-panel.schema.json`

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "resource-panel.schema.json",
  "title": "Resource Panel Configuration",
  "description": "Configuration for resource inventory panel display",
  "type": "object",
  "properties": {
    "panelWidth": {
      "type": "integer",
      "description": "Width of the resource panel",
      "minimum": 50,
      "maximum": 120,
      "default": 70
    },
    "panelHeight": {
      "type": "integer",
      "description": "Height of the resource panel",
      "minimum": 10,
      "maximum": 40,
      "default": 20
    },
    "columnCount": {
      "type": "integer",
      "description": "Number of columns for category display",
      "minimum": 1,
      "maximum": 5,
      "default": 3
    },
    "maxResourcesPerColumn": {
      "type": "integer",
      "description": "Maximum resources per column before overflow",
      "minimum": 3,
      "maximum": 20,
      "default": 6
    },
    "activeFilterColor": {
      "$ref": "#/$defs/consoleColor",
      "default": "Cyan"
    },
    "oreColor": {
      "$ref": "#/$defs/consoleColor",
      "default": "DarkYellow"
    },
    "herbColor": {
      "$ref": "#/$defs/consoleColor",
      "default": "Green"
    },
    "leatherColor": {
      "$ref": "#/$defs/consoleColor",
      "default": "DarkYellow"
    },
    "gemColor": {
      "$ref": "#/$defs/consoleColor",
      "default": "Cyan"
    },
    "miscColor": {
      "$ref": "#/$defs/consoleColor",
      "default": "White"
    }
  },
  "$defs": {
    "consoleColor": {
      "type": "string",
      "enum": [
        "Black", "DarkBlue", "DarkGreen", "DarkCyan",
        "DarkRed", "DarkMagenta", "DarkYellow", "Gray",
        "DarkGray", "Blue", "Green", "Cyan",
        "Red", "Magenta", "Yellow", "White"
      ]
    }
  },
  "additionalProperties": false
}
```

---

## 8. InventoryView Integration

### 8.1 Integration Points

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/Views/InventoryView.cs` (modifications)

```csharp
// Add to InventoryView class

private readonly ResourceInventoryPanel _resourcePanel;
private readonly ResourceService _resourceService;

/// <summary>
/// Handles the resources tab display.
/// </summary>
private void HandleResourcesTab()
{
    var player = _gameState.CurrentPlayer;
    if (player == null)
    {
        _logger.LogWarning("Cannot show resources - no current player");
        return;
    }

    // Get player's crafting resources
    var resourceDtos = GetResourceDisplayDtos(player);

    // Render resource panel
    _resourcePanel.SetPosition(_config.ResourcePanelX, _config.ResourcePanelY);
    _resourcePanel.RenderResources(resourceDtos);

    _logger.LogDebug("Rendered resources tab with {Count} resources", resourceDtos.Count);
}

/// <summary>
/// Converts player resources to display DTOs.
/// </summary>
/// <param name="player">The player entity.</param>
/// <returns>List of resource display DTOs.</returns>
private IReadOnlyList<ResourceStackDisplayDto> GetResourceDisplayDtos(Player player)
{
    var resourcePools = _resourceService.GetPlayerResources(player);

    return resourcePools
        .Select(pool =>
        {
            var resourceType = _resourceService.GetResourceType(pool.ResourceTypeId);
            var category = MapToCategory(resourceType?.Category ?? "misc");

            return new ResourceStackDisplayDto(
                ResourceId: pool.ResourceTypeId,
                DisplayName: pool.DisplayName,
                Description: resourceType?.Description ?? "",
                Category: category,
                Quantity: pool.Current);
        })
        .Where(dto => dto.Quantity > 0) // Only show resources with quantity
        .OrderBy(dto => dto.Category)
        .ThenBy(dto => dto.DisplayName)
        .ToList();
}

/// <summary>
/// Maps a category string to the ResourceCategory enum.
/// </summary>
/// <param name="category">The category string from configuration.</param>
/// <returns>The corresponding ResourceCategory.</returns>
private static ResourceCategory MapToCategory(string category)
{
    return category.ToLowerInvariant() switch
    {
        "ore" => ResourceCategory.Ore,
        "herb" => ResourceCategory.Herb,
        "leather" => ResourceCategory.Leather,
        "gem" => ResourceCategory.Gem,
        _ => ResourceCategory.Misc
    };
}

/// <summary>
/// Handles key input for the resources tab.
/// </summary>
/// <param name="key">The pressed key.</param>
/// <returns>True if the input was handled.</returns>
private bool HandleResourcesTabInput(ConsoleKey key)
{
    return _resourcePanel.HandleFilterInput(key);
}
```

### 8.2 Tab Navigation

The resource panel is accessed via the inventory view's tab system:

**Tab Keys:**
- `I` or `Tab` - Cycle through inventory tabs
- `R` - Direct access to Resources tab

**Within Resources Tab:**
- `1-6` - Select filter (All, Ore, Herb, Leather, Gem, Misc)
- `Esc` - Return to previous view

---

## 9. Logging Specifications

### 9.1 Log Levels by Component

| Component | Level | Events |
|-----------|-------|--------|
| `ResourceInventoryPanel` | Information | Resources rendered |
| `ResourceInventoryPanel` | Debug | Filter changes, panel renders, details shown |
| `ResourceInventoryPanel` | Warning | Empty resource list |
| `ResourceStackRenderer` | Debug | Stack formatting, icon/color lookups |
| `InventoryView` | Debug | Resources tab opened, resource DTOs created |
| `InventoryView` | Warning | No current player |

### 9.2 Log Message Examples

```
[INF] ResourceInventoryPanel: Rendered 24 resources across 5 categories
[DBG] ResourceInventoryPanel: Rendered 24 resources with filter All
[DBG] ResourceInventoryPanel: Set filter to Ore
[DBG] ResourceInventoryPanel: Showed details for resource iron-ore
[WRN] ResourceInventoryPanel: No resources to display
[DBG] ResourceStackRenderer: Formatted stack: Iron Ore x24
[DBG] InventoryView: Rendered resources tab with 24 resources
[WRN] InventoryView: Cannot show resources - no current player
```

---

## 10. Unit Testing Requirements

### 10.1 Test Count by Feature

| Feature | Test Count |
|---------|------------|
| ResourceStackRenderer | ~3 |
| ResourceInventoryPanel | ~3 |
| **Total** | **~6** |

### 10.2 Test Specifications

**File:** `tests/RuneAndRust.Presentation.Tui.Tests/Renderers/ResourceStackRendererTests.cs`

```csharp
[TestFixture]
public class ResourceStackRendererTests
{
    private ResourceStackRenderer _renderer;
    private ResourcePanelConfig _config;

    [SetUp]
    public void Setup()
    {
        _config = new ResourcePanelConfig();
        _renderer = new ResourceStackRenderer(_config);
    }

    [Test]
    [TestCase(ResourceCategory.Ore, "[O]")]
    [TestCase(ResourceCategory.Herb, "[H]")]
    [TestCase(ResourceCategory.Leather, "[L]")]
    [TestCase(ResourceCategory.Gem, "[G]")]
    [TestCase(ResourceCategory.Misc, "[M]")]
    public void GetTypeIcon_WithCategory_ReturnsCorrectIcon(
        ResourceCategory category, string expectedIcon)
    {
        // Act
        var result = _renderer.GetTypeIcon(category);

        // Assert
        Assert.That(result, Is.EqualTo(expectedIcon));
    }

    [Test]
    [TestCase(ResourceCategory.Ore, ConsoleColor.DarkYellow)]
    [TestCase(ResourceCategory.Herb, ConsoleColor.Green)]
    [TestCase(ResourceCategory.Gem, ConsoleColor.Cyan)]
    public void GetTypeColor_WithCategory_ReturnsCorrectColor(
        ResourceCategory category, ConsoleColor expectedColor)
    {
        // Act
        var result = _renderer.GetTypeColor(category);

        // Assert
        Assert.That(result, Is.EqualTo(expectedColor));
    }

    [Test]
    [TestCase(24, "x24")]
    [TestCase(156, "x156")]
    [TestCase(999, "x999")]
    [TestCase(1000, "x1k")]
    [TestCase(2500, "x2k")]
    public void FormatQuantity_WithQuantity_ReturnsCorrectFormat(
        int quantity, string expected)
    {
        // Act
        var result = _renderer.FormatQuantity(quantity);

        // Assert
        Assert.That(result, Is.EqualTo(expected));
    }

    [Test]
    public void FormatStack_WithResource_ReturnsFormattedString()
    {
        // Arrange
        var resource = new ResourceStackDisplayDto(
            ResourceId: "iron-ore",
            DisplayName: "Iron Ore",
            Description: "A common ore",
            Category: ResourceCategory.Ore,
            Quantity: 24);

        // Act
        var result = _renderer.FormatStack(resource, 20);

        // Assert
        Assert.That(result, Does.Contain("Iron Ore"));
        Assert.That(result, Does.EndWith("x24"));
    }
}
```

**File:** `tests/RuneAndRust.Presentation.Tui.Tests/UI/ResourceInventoryPanelTests.cs`

```csharp
[TestFixture]
public class ResourceInventoryPanelTests
{
    private Mock<ResourceStackRenderer> _mockRenderer;
    private Mock<ITerminalService> _mockTerminal;
    private Mock<ILogger<ResourceInventoryPanel>> _mockLogger;
    private ResourcePanelConfig _config;
    private ResourceInventoryPanel _panel;

    [SetUp]
    public void Setup()
    {
        _config = new ResourcePanelConfig();
        _mockRenderer = new Mock<ResourceStackRenderer>(_config);
        _mockTerminal = new Mock<ITerminalService>();
        _mockLogger = new Mock<ILogger<ResourceInventoryPanel>>();

        _panel = new ResourceInventoryPanel(
            _mockRenderer.Object,
            _mockTerminal.Object,
            _config,
            _mockLogger.Object);
    }

    [Test]
    public void SetFilter_WithCategory_UpdatesActiveFilter()
    {
        // Act
        _panel.SetFilter(ResourceCategory.Ore);

        // Assert
        Assert.That(_panel.ActiveFilter, Is.EqualTo(ResourceCategory.Ore));
    }

    [Test]
    public void SetFilter_WithNull_ClearsFilter()
    {
        // Arrange
        _panel.SetFilter(ResourceCategory.Ore);

        // Act
        _panel.SetFilter(null);

        // Assert
        Assert.That(_panel.ActiveFilter, Is.Null);
    }

    [Test]
    [TestCase(ConsoleKey.D1, null)]
    [TestCase(ConsoleKey.D2, ResourceCategory.Ore)]
    [TestCase(ConsoleKey.D3, ResourceCategory.Herb)]
    [TestCase(ConsoleKey.D4, ResourceCategory.Leather)]
    [TestCase(ConsoleKey.D5, ResourceCategory.Gem)]
    [TestCase(ConsoleKey.D6, ResourceCategory.Misc)]
    public void HandleFilterInput_WithKey_SetsCorrectFilter(
        ConsoleKey key, ResourceCategory? expectedFilter)
    {
        // Act
        _panel.HandleFilterInput(key);

        // Assert
        Assert.That(_panel.ActiveFilter, Is.EqualTo(expectedFilter));
    }

    [Test]
    public void RenderResources_WithResources_CallsTerminalService()
    {
        // Arrange
        var resources = new List<ResourceStackDisplayDto>
        {
            CreateResourceDto("iron-ore", "Iron Ore", ResourceCategory.Ore, 24),
            CreateResourceDto("healing-herb", "Healing Herb", ResourceCategory.Herb, 15)
        };

        _mockRenderer.Setup(r => r.GetTypeIcon(It.IsAny<ResourceCategory>()))
            .Returns("[X]");
        _mockRenderer.Setup(r => r.GetTypeColor(It.IsAny<ResourceCategory>()))
            .Returns(ConsoleColor.White);
        _mockRenderer.Setup(r => r.FormatStack(It.IsAny<ResourceStackDisplayDto>(), It.IsAny<int>()))
            .Returns("Formatted");

        _panel.SetPosition(0, 0);

        // Act
        _panel.RenderResources(resources);

        // Assert
        _mockTerminal.Verify(t => t.WriteAt(
            It.IsAny<int>(), It.IsAny<int>(), It.IsAny<string>()), Times.AtLeastOnce);
    }

    #region Test Helpers

    private static ResourceStackDisplayDto CreateResourceDto(
        string id, string name, ResourceCategory category, int quantity)
    {
        return new ResourceStackDisplayDto(
            ResourceId: id,
            DisplayName: name,
            Description: "Test resource",
            Category: category,
            Quantity: quantity);
    }

    #endregion
}
```

---

## 11. Use Cases

### UC-001: View All Resources

**Actor:** Player
**Flow:** Open inventory → Navigate to Resources tab → View all resources grouped by category → See type icons and quantities → Understand resource inventory

### UC-002: Filter by Resource Type

**Actor:** Player
**Flow:** Open Resources tab → Press filter key (2-6) → View filtered to specific category → Press `1` to return to All → Resources update to show all categories

### UC-003: View Resource Details

**Actor:** Player
**Flow:** Open Resources tab → Navigate to specific resource → View resource description → Understand resource purpose for crafting

### UC-004: Check Ore Inventory Before Crafting

**Actor:** Player
**Flow:** Open Resources tab → Press `2` to filter to Ore → View available ores and quantities → Determine if enough materials for recipe → Navigate to crafting station

### UC-005: View Large Resource Collection

**Actor:** Player
**Flow:** Open Resources tab → See categories with many resources → Overflow indicator shows "+ more" → Navigate to category filter for full list

---

## 12. Deliverable Checklist

### UI Components
- [ ] `ResourceInventoryPanel` class implemented
- [ ] `RenderResources()` method renders all resources
- [ ] `RenderResourcesByType()` method filters display
- [ ] `SetFilter()` method sets active filter
- [ ] `ShowResourceDetails()` method shows resource info
- [ ] `HandleFilterInput()` method processes filter keys

### Renderers
- [ ] `ResourceStackRenderer` class implemented
- [ ] `FormatStack()` formats resource display
- [ ] `GetTypeIcon()` returns correct icons
- [ ] `GetTypeColor()` returns correct colors
- [ ] `FormatQuantity()` formats quantities correctly

### DTOs
- [ ] `ResourceCategory` enum created
- [ ] `ResourceStackDisplayDto` record created
- [ ] `ResourceCategoryDisplayDto` record created

### Configuration
- [ ] `ResourcePanelConfig` class created
- [ ] `config/resource-panel.json` created
- [ ] `config/schemas/resource-panel.schema.json` created

### View Integration
- [ ] `InventoryView` updated with `HandleResourcesTab()`
- [ ] Resource DTOs created from player resources
- [ ] Category mapping implemented
- [ ] Tab navigation supports Resources tab

### Testing
- [ ] ~6 unit tests implemented
- [ ] All tests passing

---

## 13. Acceptance Criteria

### Functional
- [ ] Resource inventory panel displays all resources
- [ ] Resources grouped by type (Ore, Herb, Leather, Gem, Misc)
- [ ] Resource stacks show correct quantities
- [ ] Resource type icons display correctly (`[O]`, `[H]`, `[L]`, `[G]`, `[M]`)
- [ ] Filter tabs filter by resource type
- [ ] Active filter highlighted in tab bar
- [ ] Quantities format correctly (x##, x#k for 1000+)
- [ ] Category headers display with correct colors
- [ ] Overflow indicator shows when resources exceed column limit

### Quality
- [ ] Build succeeds with 0 errors/warnings
- [ ] All ~6 unit tests pass
- [ ] Configuration file validates against schema
- [ ] XML documentation complete on all public members
- [ ] No hardcoded values (all configurable)

---

## 14. Dependencies

### Required from v0.11.x

| Type | Location | Usage in v0.13.3a |
|------|----------|-------------------|
| `ResourceService` | `Application/Services/` | Get player resources |
| `ResourceTypeDefinition` | `Domain/Definitions/` | Resource type information |
| `ResourcePool` | `Domain/ValueObjects/` | Player resource quantities |
| `ResourcePoolDto` | `Application/DTOs/` | Resource data transfer |
| `IGameConfigurationProvider` | `Application/Interfaces/` | Resource type configuration |

### Required from Existing Infrastructure

| Type | Location | Usage in v0.13.3a |
|------|----------|-------------------|
| `ITerminalService` | `Presentation.Tui/Services/` | Terminal output |
| `Player` | `Domain/Entities/` | Player's resource collection |

### Provides to v0.13.3b

| Type | Usage |
|------|-------|
| `ResourceCategory` enum | Material availability display |
| `ResourceStackDisplayDto` | Material requirement comparison |
| `ResourceStackRenderer` | Shared formatting utilities |

---

## 15. Future Considerations

### Deferred to v0.13.3b

- **Crafting Station Menu**: Station-specific recipe display
- **Material Availability Highlighting**: Owned vs needed comparison
- **Crafting Progress Display**: Progress bar during creation

### Deferred to v0.13.3c

- **Recipe Browser**: Search and filter recipes
- **Recipe Details View**: Full recipe information
- **Recipe Book**: Discovered recipes collection

### Out of Scope

- **Resource Sorting Options**: Sort by name, quantity, rarity
- **Resource Search**: Text search within resources
- **Stack Management**: Split/combine resource stacks
- **Resource Trading**: Exchange resources with NPCs
- **Resource Tooltips**: Hover/select for detailed info popup
- **Animated Resource Updates**: Visual effects when quantities change

### Potential Enhancements (Future Versions)

- **Pagination**: Handle very large resource collections
- **Compact View**: Condensed display mode
- **Resource History**: Track resource gains/losses
- **Favorite Resources**: Pin frequently used resources
- **Category Expansion**: Custom resource categories

---

*Document Version: 1.0*
*Last Updated: 2026-01-16*
*Author: Claude (AI Assistant)*
