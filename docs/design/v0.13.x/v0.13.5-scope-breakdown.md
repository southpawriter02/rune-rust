# v0.13.5 UI Standardization - Scope Breakdown

**Version:** 0.13.5
**Theme:** UI Standardization
**Prerequisites:** v0.13.4 Complete (Achievements & Statistics UI)
**Total Estimated Tests:** ~30 new tests

---

## Executive Summary

The UI Standardization version addresses UI disparities that accumulated during incremental development from v0.1.x through v0.9.x. This includes standardizing naming conventions, consolidating theming systems, unifying service integration patterns, establishing consistent error handling, improving shared layer utilization, and implementing cross-cutting accessibility and performance concerns. This work ensures long-term maintainability and consistency across TUI and GUI presentation layers.

The work is divided into **six sub-parts**:

| Part | Name | Focus | Est. Tests |
|------|------|-------|------------|
| v0.13.5a | Naming Convention Alignment | Standardize component suffixes across TUI/GUI | ~4 |
| v0.13.5b | Theme Consolidation | Create shared IThemeService, unify color definitions | ~8 |
| v0.13.5c | Service Integration Patterns | Standardize DI patterns across presentation layers | ~6 |
| v0.13.5d | Error Handling & Logging | Consistent logging strategy for UI components | ~4 |
| v0.13.5e | Shared Layer Utilization | Refactor to leverage Presentation.Shared | ~4 |
| v0.13.5f | Accessibility & Performance | Color blind modes, keyboard nav, lazy loading | ~4 |

---

## Feature Analysis & Categorization

### From v0.13.0-overview.md - Cross-Cutting UI Concerns

| Feature | Complexity | Dependencies | Assigned Part |
|---------|------------|--------------|---------------|
| Color Palette Review | Medium | Existing color definitions | **v0.13.5b** |
| Icon Style Unification | Low | Existing icon usage | **v0.13.5b** |
| Font/Typography | Low | Existing text styles | **v0.13.5b** |
| Animation Timing | Low | Existing animations | **v0.13.5b** |
| Color Blind Modes | Medium | Theme service | **v0.13.5f** |
| Screen Reader Support | Medium | Accessibility service | **v0.13.5f** |
| Keyboard Navigation | Medium | Existing navigation | **v0.13.5f** |
| Lazy Loading | Medium | Performance patterns | **v0.13.5f** |
| Animation Optimization | Low | Existing animations | **v0.13.5f** |

### From v0.13.x-scope-breakdown.md - UI Standardization

| Feature | Complexity | Dependencies | Assigned Part |
|---------|------------|--------------|---------------|
| Audit TUI/GUI component names | Low | Existing components | **v0.13.5a** |
| Establish naming conventions | Low | None | **v0.13.5a** |
| Rename inconsistent components | Medium | Naming standards | **v0.13.5a** |
| Create IThemeService | Medium | None | **v0.13.5b** |
| Implement TuiThemeAdapter | Medium | IThemeService | **v0.13.5b** |
| Implement GuiThemeAdapter | Medium | IThemeService | **v0.13.5b** |
| Migrate hardcoded colors | Medium | Theme adapters | **v0.13.5b** |
| Define DI registration pattern | Low | None | **v0.13.5c** |
| Create base classes | Medium | DI patterns | **v0.13.5c** |
| Define logging strategy | Low | None | **v0.13.5d** |
| Implement fallback rendering | Medium | Logging | **v0.13.5d** |
| Identify duplicated logic | Low | Existing code | **v0.13.5e** |
| Extract to Presentation.Shared | Medium | Duplication analysis | **v0.13.5e** |

---

## Existing Infrastructure

### From v0.1.x-v0.9.x (Existing UI Components)

| Component | Location | Current Issue |
|-----------|----------|---------------|
| `HealthBar` | `Presentation.Tui/Components/HealthBar.cs` | Uses HealthBarConfig for colors |
| `ResourceBar` | `Presentation.Tui/Components/ResourceBar.cs` | Static color dictionary |
| `CombatGridView` | `Presentation.Tui/Views/CombatGridView.cs` | Method-based colors |
| `SpectreGameRenderer` | `Presentation.Tui/Renderers/SpectreGameRenderer.cs` | Inline string colors |
| `ColoredText` | `Presentation.Tui/Components/ColoredText.cs` | Factory-based colors |
| `HealthBarControl` | `Presentation.Gui/Controls/HealthBarControl.cs` | Hardcoded Brushes.* |
| `GridCellControl` | `Presentation.Gui/Controls/GridCellControl.cs` | Hardcoded terrain colors |
| `EntityTokenControl` | `Presentation.Gui/Controls/EntityTokenControl.cs` | Different green values |
| `DamagePopupControl` | `Presentation.Gui/Controls/DamagePopupControl.cs` | Hardcoded popup colors |
| `MessageTypeToColorConverter` | `Presentation.Gui/Converters/MessageTypeToColorConverter.cs` | Hardcoded brush mapping |

### From v0.13.0-v0.13.4 (New UI Components)

| Component | Location | Notes |
|-----------|----------|-------|
| `StatusEffectPanel` | `Presentation.Tui/Panels/StatusEffectPanel.cs` | New in v0.13.0 |
| `BossHealthBar` | `Presentation.Tui/Controls/BossHealthBar.cs` | New in v0.13.1 |
| `AbilityTreeView` | `Presentation.Tui/Views/AbilityTreeView.cs` | New in v0.13.2 |
| `CraftingPanel` | `Presentation.Tui/Panels/CraftingPanel.cs` | New in v0.13.3 |
| `AchievementPanel` | `Presentation.Tui/Panels/AchievementPanel.cs` | New in v0.13.4 |

---

## Phase Definitions

---

## v0.13.5a: Naming Convention Alignment

[v0.13.5a Design Specification](v0.13.5a-design-specification.md)

### Overview

Establish and enforce consistent naming conventions across all TUI and GUI components to improve code discoverability and maintainability.

### Scope

**In Scope:**
- Audit all TUI component names
- Audit all GUI component names
- Define naming convention standards
- Rename inconsistent components
- Update all references to renamed components

**Out of Scope:**
- Theme consolidation (v0.13.5b)
- Service integration changes (v0.13.5c)
- Functional changes to components

### Naming Convention Standards

```
Suffix          Usage                       Examples
──────────────────────────────────────────────────────────────────
-Panel          Container/layout            InventoryPanel, CombatPanel
-View           Full-screen view            CombatView, CharacterView
-Control        Interactive element         HealthBarControl, SlotControl
-Renderer       Output generation           GridRenderer, TextRenderer
-Display        Read-only output            StatusDisplay, ScoreDisplay
-Indicator      Status visualization        ComboIndicator, StanceIndicator
```

### Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Documentation | 1 | Naming convention guidelines |
| Renamed Components | ~10 | TUI/GUI components with inconsistent names |
| Reference Updates | ~20 | Files referencing renamed components |
| Unit Tests | ~4 | Naming convention validation tests |

### Components Requiring Renaming

| Current Name | New Name | Layer | Reason |
|--------------|----------|-------|--------|
| `HealthBar` | `HealthBarDisplay` | TUI | Passive display, not interactive control |
| `ResourceBar` | `ResourceBarDisplay` | TUI | Passive display, not interactive control |
| `CombatGridView` | `CombatGridPanel` | TUI | Container, not full-screen view |
| `ColoredText` | `ColoredTextRenderer` | TUI | Generates output text |

### Acceptance Criteria

- [ ] All TUI components follow naming convention
- [ ] All GUI components follow naming convention
- [ ] Naming convention documentation created
- [ ] All references to renamed components updated
- [ ] No compilation errors after renaming
- [ ] ~4 unit tests pass

---

## v0.13.5b: Theme Consolidation

[v0.13.5b Design Specification](v0.13.5b-design-specification.md)

### Overview

Create a shared theme service that provides consistent color, icon, and animation definitions across TUI and GUI layers, eliminating hardcoded values and duplicated color definitions.

### Scope

**In Scope:**
- Create `IThemeService` interface in Presentation.Shared
- Implement `TuiThemeAdapter` for ConsoleColor mapping
- Implement `GuiThemeAdapter` for Avalonia Brush mapping
- Create `ThemeDefinition` with centralized color palette
- Migrate all hardcoded colors to theme service
- Remove duplicate color definitions

**Out of Scope:**
- Service integration patterns (v0.13.5c)
- Error handling changes (v0.13.5d)

### Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Interfaces | 1 | `IThemeService` |
| Services | 2 | `TuiThemeAdapter`, `GuiThemeAdapter` |
| Value Objects | 3 | `ThemeDefinition`, `ThemeColor`, `ColorPalette` |
| Enums | 2 | `ColorKey`, `IconKey` |
| Configuration | 1 | `ThemeConfiguration` |
| Unit Tests | ~8 | Theme service, adapter, color mapping tests |

### Data Model Changes

```
NEW: IThemeService (Interface - Presentation.Shared)
|-- GetColor(ColorKey): ThemeColor
|-- GetHealthColor(double): ThemeColor
|-- GetResourceColor(ResourceType): ThemeColor
|-- GetIcon(IconKey): string
|-- GetStatusIcon(StatusEffectCategory): string
|-- GetAnimationDuration(AnimationKey): TimeSpan
|-- IsColorBlindModeEnabled: bool { get; }
+-- ColorBlindMode: ColorBlindMode { get; set; }

NEW: TuiThemeAdapter (Service - Presentation.Tui)
|-- ToConsoleColor(ThemeColor): ConsoleColor
|-- GetTuiIcon(IconKey): string
+-- Implements: IThemeService

NEW: GuiThemeAdapter (Service - Presentation.Gui)
|-- ToBrush(ThemeColor): IBrush
|-- GetGuiIcon(IconKey): string
+-- Implements: IThemeService

NEW: ThemeDefinition (Value Object - Presentation.Shared)
|-- Palette: ColorPalette
|-- Icons: IconSet
+-- Animations: AnimationTimings

NEW: ThemeColor (Value Object - Presentation.Shared)
|-- R: byte
|-- G: byte
|-- B: byte
|-- Hex: string { get; }
+-- Name: string

NEW: ColorKey (Enum - Presentation.Shared)
|-- Primary, Secondary, Accent, Warning
|-- Background, Surface, Text, Muted
|-- HealthFull, HealthGood, HealthLow, HealthCritical
|-- Mana, Rage, Energy, Focus, Stamina
+-- Buff, Debuff, Fire, Ice, Poison, Lightning
```

### Color Palette Definition

```
┌─────────────────────────────────────────────────────────────────────┐
│  ColorPalette (Centralized)                                         │
│  ─────────────────────────                                          │
│  Primary:    #4A90D9 (Blue)      Secondary: #2ECC71 (Green)         │
│  Accent:     #E74C3C (Red)       Warning:   #F39C12 (Orange)        │
│  Background: #1A1A2E             Surface:   #16213E                  │
│  Text:       #EAEAEA             Muted:     #7F8C8D                  │
│                                                                      │
│  Health Thresholds:                                                  │
│  |-- 100-76%: HealthFull (#228B22)                                   │
│  |-- 75-51%:  HealthGood (#32CD32)                                   │
│  |-- 50-26%:  HealthLow (#FFD700)                                    │
│  +-- 25-0%:   HealthCritical (#DC143C)                               │
│                                                                      │
│  Resource Colors:                                                    │
│  |-- Mana:    #4169E1            |-- Rage:   #DC143C                 │
│  |-- Energy:  #FFD700            |-- Focus:  #00CED1                 │
│  +-- Stamina: #32CD32                                                │
│                                                                      │
│  Status Effect Colors:                                               │
│  |-- Buff:    #32CD32            |-- Debuff: #DC143C                 │
│  |-- Fire:    #FF4500            |-- Ice:    #00BFFF                 │
│  |-- Poison:  #9400D3            |-- Lightning: #FFD700              │
└─────────────────────────────────────────────────────────────────────┘
```

### Components Requiring Migration

| Component | Layer | Current Issue | Migration Required |
|-----------|-------|---------------|-------------------|
| HealthBar | TUI | Uses HealthBarConfig | Use IThemeService.GetHealthColor() |
| ResourceBar | TUI | Static color dictionary | Use IThemeService.GetResourceColor() |
| CombatGridView | TUI | Method-based colors | Inject IThemeService |
| SpectreGameRenderer | TUI | Inline string colors | Inject IThemeService |
| ColoredText | TUI | Factory-based colors | Use IThemeService |
| HealthBarControl | GUI | Hardcoded Brushes.* | Use theme bindings |
| GridCellControl | GUI | Hardcoded terrain colors | Use theme bindings |
| EntityTokenControl | GUI | Different green values | Use theme bindings |
| DamagePopupControl | GUI | Hardcoded popup colors | Use theme bindings |
| MessageTypeToColorConverter | GUI | Hardcoded brush mapping | Use IThemeService |

### Acceptance Criteria

- [ ] IThemeService interface defined in Presentation.Shared
- [ ] TuiThemeAdapter implements IThemeService for console
- [ ] GuiThemeAdapter implements IThemeService for Avalonia
- [ ] All hardcoded colors migrated to theme service
- [ ] HealthBarConfig consolidated into theme service
- [ ] ResourceBar uses theme service
- [ ] CombatGridView uses theme service
- [ ] SpectreGameRenderer uses theme service
- [ ] HealthBarControl uses theme bindings
- [ ] GridCellControl uses theme bindings
- [ ] EntityTokenControl uses consistent colors
- [ ] ~8 unit tests pass

---

## v0.13.5c: Service Integration Patterns

[v0.13.5c Design Specification](v0.13.5c-design-specification.md)

### Overview

Establish standardized dependency injection patterns and base classes for presentation components to ensure consistent service access and initialization across TUI and GUI layers.

### Scope

**In Scope:**
- Define standard DI registration pattern
- Standardize required vs optional dependencies
- Create `TuiComponentBase` base class
- Create `GuiControlBase` base class
- Update existing components to use patterns
- Document service integration guidelines

**Out of Scope:**
- Error handling changes (v0.13.5d)
- Shared layer refactoring (v0.13.5e)

### Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Base Classes | 2 | `TuiComponentBase`, `GuiControlBase` |
| Documentation | 1 | Service integration guidelines |
| Updated Components | ~10 | Existing components using new patterns |
| Unit Tests | ~6 | Base class, DI registration tests |

### Data Model Changes

```
NEW: TuiComponentBase (Abstract Class - Presentation.Tui)
|-- Theme: IThemeService { get; } (required, constructor)
|-- Logger: ILogger { get; } (required, constructor)
|-- Accessibility: IAccessibilityService? { get; set; } (optional, property)
|-- SafeRender(Action, string): void
+-- RenderFallback(string): void

NEW: GuiControlBase (Abstract Class - Presentation.Gui)
|-- Theme: IThemeService { get; } (required, constructor)
|-- Logger: ILogger { get; } (required, constructor)
|-- Accessibility: IAccessibilityService? { get; set; } (optional, property)
|-- SafeRender(Action, string): void
+-- RenderFallback(string): void
```

### Service Integration Standard

```csharp
// Standard pattern for all presentation components
public abstract class ComponentBase
{
    // Required dependencies - constructor injection
    protected readonly IThemeService Theme;
    protected readonly ILogger Logger;

    // Optional dependencies - property injection
    public IAccessibilityService? Accessibility { get; set; }

    protected ComponentBase(IThemeService theme, ILogger logger)
    {
        Theme = theme ?? throw new ArgumentNullException(nameof(theme));
        Logger = logger ?? throw new ArgumentNullException(nameof(logger));
    }
}
```

### DI Registration Pattern

```csharp
// Standard DI registration for presentation layer
services.AddSingleton<IThemeService, TuiThemeAdapter>();
services.AddTransient<HealthBarDisplay>();
services.AddTransient<ResourceBarDisplay>();
// ... other component registrations
```

### Acceptance Criteria

- [ ] TuiComponentBase created with required dependencies
- [ ] GuiControlBase created with required dependencies
- [ ] Required vs optional dependency pattern documented
- [ ] At least 5 TUI components updated to use base class
- [ ] At least 5 GUI components updated to use base class
- [ ] DI registration pattern documented
- [ ] Service integration guidelines created
- [ ] ~6 unit tests pass

---

## v0.13.5d: Error Handling & Logging

[v0.13.5d Design Specification](v0.13.5d-design-specification.md)

### Overview

Implement consistent error handling and logging patterns for all UI components to ensure graceful degradation and diagnostic visibility.

### Scope

**In Scope:**
- Define logging strategy for UI components
- Add consistent null checking patterns
- Implement fallback rendering for errors
- Add diagnostic logging for UI state

**Out of Scope:**
- Domain/Application layer error handling
- Shared layer refactoring (v0.13.5e)

### Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Logging Utilities | 1 | `UiLoggingExtensions` |
| Error Handlers | 1 | `RenderErrorHandler` |
| Documentation | 1 | Error handling guidelines |
| Unit Tests | ~4 | Error handling, fallback tests |

### Data Model Changes

```
NEW: UiLoggingExtensions (Static Class - Presentation.Shared)
|-- LogRenderStart(ILogger, string): IDisposable
|-- LogRenderComplete(ILogger, string): void
|-- LogRenderError(ILogger, string, Exception): void
+-- LogStateChange(ILogger, string, object, object): void

NEW: RenderErrorHandler (Utility - Presentation.Shared)
|-- HandleRenderError(Exception, string): void
|-- GetFallbackContent(string): string
+-- ShouldRetry(Exception): bool
```

### Error Handling Standard

```csharp
// Consistent pattern for all UI operations
protected void SafeRender(Action renderAction, string componentName)
{
    try
    {
        renderAction();
    }
    catch (Exception ex)
    {
        Logger.LogWarning(ex, "Render failed for {Component}", componentName);
        RenderFallback(componentName);
    }
}
```

### Logging Levels

| Level | Usage |
|-------|-------|
| Debug | UI state changes, render cycles |
| Information | Component initialization, major state transitions |
| Warning | Recoverable errors, fallback rendering triggered |
| Error | Unrecoverable errors, component failure |

### Acceptance Criteria

- [ ] SafeRender pattern implemented in base classes
- [ ] Fallback rendering works for all components
- [ ] Logging extensions created
- [ ] Error handling guidelines documented
- [ ] No unhandled exceptions in UI layer
- [ ] ~4 unit tests pass

---

## v0.13.5e: Shared Layer Utilization

[v0.13.5e Design Specification](v0.13.5e-design-specification.md)

### Overview

Identify and extract duplicated logic between TUI and GUI layers into Presentation.Shared to reduce code duplication and improve consistency.

### Scope

**In Scope:**
- Audit TUI/GUI for duplicated logic
- Extract common utilities to Presentation.Shared
- Refactor existing components to use shared code
- Document shared component guidelines

**Out of Scope:**
- Accessibility features (v0.13.5f)
- Performance optimization (v0.13.5f)

### Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Shared Utilities | ~5 | Extracted from TUI/GUI |
| Documentation | 1 | Shared layer guidelines |
| Refactored Components | ~8 | Using shared utilities |
| Unit Tests | ~4 | Shared utility tests |

### Candidates for Extraction

| Logic | TUI Location | GUI Location | Shared Location |
|-------|--------------|--------------|-----------------|
| Percentage formatting | HealthBar | HealthBarControl | `FormatUtilities` |
| Health color threshold | HealthBarConfig | HealthBarControl | `IThemeService` |
| Resource type icons | ResourceBar | ResourceControl | `IconUtilities` |
| Duration formatting | StatusEffectPanel | StatusEffectControl | `FormatUtilities` |
| Grid coordinate math | CombatGridView | GridPanel | `GridUtilities` |

### Data Model Changes

```
NEW: FormatUtilities (Static Class - Presentation.Shared)
|-- FormatPercentage(int, int): string
|-- FormatDuration(TimeSpan): string
|-- FormatNumber(int): string
+-- FormatDelta(int, int): string

NEW: GridUtilities (Static Class - Presentation.Shared)
|-- CalculateGridPosition(int, int, int): Point
|-- IsValidGridPosition(int, int, int, int): bool
+-- GetAdjacentPositions(int, int): IEnumerable<Point>

NEW: IconUtilities (Static Class - Presentation.Shared)
|-- GetResourceIcon(ResourceType): string
|-- GetStatusEffectIcon(StatusEffectCategory): string
+-- GetDirectionIcon(Direction): string
```

### Acceptance Criteria

- [ ] Audit completed for duplicated logic
- [ ] At least 3 shared utilities extracted
- [ ] TUI components refactored to use shared utilities
- [ ] GUI components refactored to use shared utilities
- [ ] Shared layer guidelines documented
- [ ] ~4 unit tests pass

---

## v0.13.5f: Accessibility & Performance

[v0.13.5f Design Specification](v0.13.5f-design-specification.md)

### Overview

Implement accessibility features for inclusive design and performance optimizations for smooth user experience across all UI components.

### Scope

**In Scope:**
- Color blind mode alternatives
- Screen reader support labels
- Keyboard navigation enhancements
- Lazy loading for large lists
- Animation optimization

**Out of Scope:**
- New feature development
- Domain/Application layer changes

### Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Enums | 1 | `ColorBlindMode` |
| Services | 1 | `IAccessibilityService` |
| Configuration | 1 | `AccessibilitySettings` |
| Performance Utilities | 2 | `LazyLoader`, `AnimationOptimizer` |
| Unit Tests | ~4 | Accessibility, performance tests |

### Data Model Changes

```
NEW: ColorBlindMode (Enum - Presentation.Shared)
|-- None
|-- Protanopia (Red-weak)
|-- Deuteranopia (Green-weak)
+-- Tritanopia (Blue-weak)

NEW: IAccessibilityService (Interface - Presentation.Shared)
|-- ColorBlindMode: ColorBlindMode { get; set; }
|-- GetAccessibleColor(ThemeColor): ThemeColor
|-- GetAltText(IconKey): string
|-- IsHighContrastEnabled: bool { get; set; }
+-- IsScreenReaderActive: bool { get; }

NEW: AccessibilitySettings (Configuration - Presentation.Shared)
|-- ColorBlindMode: ColorBlindMode
|-- HighContrast: bool
|-- ReducedMotion: bool
+-- ScreenReaderLabels: bool

NEW: LazyLoader<T> (Utility - Presentation.Shared)
|-- LoadPage(int, int): IEnumerable<T>
|-- TotalCount: int { get; }
|-- CurrentPage: int { get; }
+-- HasMorePages: bool { get; }

NEW: AnimationOptimizer (Utility - Presentation.Shared)
|-- ShouldAnimate(): bool
|-- GetOptimizedDuration(TimeSpan): TimeSpan
|-- SkipFrames(int): int
+-- IsLowPowerMode: bool { get; }
```

### Accessibility Features

```
┌─────────────────────────────────────────────────────────────────────┐
│  Color Blind Modes                                                  │
│  ─────────────────                                                  │
│  Protanopia:   Red -> Blue shift                                    │
│  Deuteranopia: Green -> Yellow shift                                │
│  Tritanopia:   Blue -> Cyan shift                                   │
│                                                                      │
│  Alternative Indicators:                                             │
│  |-- Shapes in addition to colors (square, circle, triangle, diamond)│
│  |-- Patterns for status effects                                     │
│  +-- Text labels alongside icons                                     │
│                                                                      │
│  Screen Reader Support                                               │
│  ─────────────────────                                               │
│  |-- Alt text for all icons                                          │
│  |-- Descriptive labels for interactive elements                     │
│  +-- Logical focus order                                             │
│                                                                      │
│  Keyboard Navigation                                                 │
│  ───────────────────                                                 │
│  |-- Tab: Move between panels                                        │
│  |-- Arrow keys: Navigate within panels                              │
│  |-- Enter: Select/activate                                          │
│  +-- Escape: Back/close                                              │
└─────────────────────────────────────────────────────────────────────┘
```

### Performance Optimizations

```
┌─────────────────────────────────────────────────────────────────────┐
│  Lazy Loading                                                       │
│  ────────────                                                       │
│  |-- Achievement list: Load visible + buffer                        │
│  |-- Leaderboard: Load top 20, fetch more on scroll                 │
│  +-- Statistics charts: Render on tab activation                    │
│                                                                      │
│  Animation Optimization                                              │
│  ──────────────────────                                              │
│  |-- Disable animations on low-power mode                           │
│  |-- Reduce animation complexity for large lists                    │
│  +-- Skip frames during heavy load                                  │
└─────────────────────────────────────────────────────────────────────┘
```

### Acceptance Criteria

- [ ] Color blind modes implemented (Protanopia, Deuteranopia, Tritanopia)
- [ ] Color shift applies correctly to theme colors
- [ ] Screen reader labels added to interactive elements
- [ ] Keyboard navigation functional for all panels
- [ ] Lazy loading implemented for achievement/leaderboard lists
- [ ] Animation optimization respects low-power mode
- [ ] Accessibility settings persist between sessions
- [ ] ~4 unit tests pass

---

## Dependencies & Prerequisites

```
v0.13.4 (Achievements & Statistics UI) - REQUIRED
    |
    |-- v0.13.4a: Achievement Panel ────────────────────┐
    |-- v0.13.4b: Statistics Dashboard ─────────────────┤
    |-- v0.13.4c: Leaderboard View ─────────────────────┤
    +-- v0.13.4d: Dice History Panel ───────────────────┘
                                                        |
                                    v
v0.13.5 (UI Standardization)
    |
    |-- v0.13.5a: Naming Convention Alignment ──────────┐
    |       Dependencies: None                           |
    |       Provides: Naming standards, renamed components|
    |                                                    |
    |-- v0.13.5b: Theme Consolidation ──────────────────┤
    |       Dependencies: v0.13.5a (naming standards)    |
    |       Provides: IThemeService, adapters, palette   |
    |                                                    |
    |-- v0.13.5c: Service Integration Patterns ─────────┤
    |       Dependencies: v0.13.5b (IThemeService)       |
    |       Provides: Base classes, DI patterns          |
    |                                                    |
    |-- v0.13.5d: Error Handling & Logging ─────────────┤
    |       Dependencies: v0.13.5c (base classes)        |
    |       Provides: SafeRender, logging utilities      |
    |                                                    |
    |-- v0.13.5e: Shared Layer Utilization ─────────────┤
    |       Dependencies: v0.13.5d (error handling)      |
    |       Provides: Shared utilities, guidelines       |
    |                                                    |
    +-- v0.13.5f: Accessibility & Performance ──────────┘
            Dependencies: v0.13.5b (theme), v0.13.5e (shared)
            Provides: ColorBlindMode, LazyLoader, AnimationOptimizer
```

---

## Estimated Effort Summary

| Part | New Files | Modified Files | Est. Tests | Complexity |
|------|-----------|----------------|------------|------------|
| v0.13.5a | ~2 | ~12 | ~4 | Low |
| v0.13.5b | ~8 | ~10 | ~8 | Medium-High |
| v0.13.5c | ~3 | ~10 | ~6 | Medium |
| v0.13.5d | ~3 | ~4 | ~4 | Low-Medium |
| v0.13.5e | ~5 | ~8 | ~4 | Medium |
| v0.13.5f | ~5 | ~6 | ~4 | Medium |
| **Total** | **~26** | **~50** | **~30** | |

---

## Risk Assessment

| Risk | Impact | Probability | Mitigation |
|------|--------|-------------|------------|
| Breaking changes from renaming | High | Medium | Comprehensive search/replace, full test coverage |
| Theme migration missing edge cases | Medium | Medium | Audit all color usages before migration |
| Base class adoption friction | Low | Low | Gradual migration, maintain backwards compatibility |
| Color blind mode color math | Low | Medium | Use established color shift algorithms |
| Performance regression from abstractions | Low | Low | Profile before/after, optimize hot paths |

---

## Design Decisions (Confirmed)

### Naming Conventions

| Decision | Value | Notes |
|----------|-------|-------|
| **Panel suffix** | Container/layout components | InventoryPanel, CombatPanel |
| **View suffix** | Full-screen views | CombatView, CharacterView |
| **Control suffix** | Interactive elements | HealthBarControl, SlotControl |
| **Renderer suffix** | Output generation | GridRenderer, TextRenderer |
| **Display suffix** | Read-only output | StatusDisplay, ScoreDisplay |
| **Indicator suffix** | Status visualization | ComboIndicator, StanceIndicator |

### Theme System

| Decision | Value | Notes |
|----------|-------|-------|
| **Interface location** | Presentation.Shared | Accessible to both TUI/GUI |
| **Color format** | RGB bytes + hex | Platform-agnostic |
| **Adapter pattern** | TUI/GUI adapters | Convert to ConsoleColor/Brush |
| **Health thresholds** | 76%, 51%, 26% | Four color zones |

### Service Integration

| Decision | Value | Notes |
|----------|-------|-------|
| **Required dependencies** | Constructor injection | Theme, Logger |
| **Optional dependencies** | Property injection | Accessibility |
| **Base class requirement** | Recommended, not required | Gradual adoption |

### Accessibility

| Decision | Value | Notes |
|----------|-------|-------|
| **Color blind modes** | 3 types | Protanopia, Deuteranopia, Tritanopia |
| **Keyboard navigation** | Tab + Arrows | Standard pattern |
| **Settings persistence** | Configuration file | User preferences |

---

## Next Steps

1. **Review & Approve** - Confirm scope breakdown
2. **v0.13.5a Design Spec** - Create detailed design for Naming Convention Alignment
3. **v0.13.5a Implementation** - Audit and rename components
4. **v0.13.5b Design Spec** - Create detailed design for Theme Consolidation
5. **v0.13.5b Implementation** - Build IThemeService, adapters, migrate colors
6. **v0.13.5c Design Spec** - Create detailed design for Service Integration Patterns
7. **v0.13.5c Implementation** - Build base classes, update components
8. **v0.13.5d Design Spec** - Create detailed design for Error Handling & Logging
9. **v0.13.5d Implementation** - Implement SafeRender, logging utilities
10. **v0.13.5e Design Spec** - Create detailed design for Shared Layer Utilization
11. **v0.13.5e Implementation** - Extract shared utilities, refactor components
12. **v0.13.5f Design Spec** - Create detailed design for Accessibility & Performance
13. **v0.13.5f Implementation** - Build accessibility service, lazy loader, optimizer

---

*This scope breakdown provides a structured approach to implementing v0.13.5 UI Standardization. Each sub-part builds on the previous, starting with naming conventions (v0.13.5a), then theme consolidation (v0.13.5b), service patterns (v0.13.5c), error handling (v0.13.5d), shared layer improvements (v0.13.5e), and finally accessibility and performance (v0.13.5f). This order ensures that foundational patterns are established before being applied across the codebase.*
