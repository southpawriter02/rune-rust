# v0.16.2a Design Specification: Armor Proficiency Level Enum

**Version:** 0.16.2a  
**Phase Name:** Armor Proficiency Level Enum  
**Parent Version:** v0.16.2 (Armor Proficiency System)  
**Prerequisites:** v0.16.1 Complete (Weapon Proficiency System)  
**Estimated Tests:** ~3 unit tests

---

## Table of Contents

1. [Executive Summary](#1-executive-summary)
2. [Feature Overview](#2-feature-overview)
3. [Architecture Diagrams](#3-architecture-diagrams)
4. [ArmorProficiencyLevel Enum](#4-armorproficiencylevel-enum)
5. [ArmorProficiencyEffect Value Object](#5-armorproficiencyeffect-value-object)
6. [IArmorProficiencyEffectProvider Interface](#6-iarmorproficiencyeffectprovider-interface)
7. [Data Model Changes](#7-data-model-changes)
8. [Configuration File Schemas](#8-configuration-file-schemas)
9. [Logging Specifications](#9-logging-specifications)
10. [Unit Testing Requirements](#10-unit-testing-requirements)
11. [Use Cases](#11-use-cases)
12. [Deliverable Checklist](#12-deliverable-checklist)
13. [Acceptance Criteria](#13-acceptance-criteria)
14. [Dependencies](#14-dependencies)
15. [Future Considerations](#15-future-considerations)

---

## 1. Executive Summary

### 1.1 Purpose

This specification defines the armor proficiency level enumeration and its associated effects on armor penalties and bonuses. Armor proficiency levels determine how effectively a character can wear armor, with non-proficient wearers suffering doubled penalties and attack reductions.

The four proficiency levels are:

- **NonProficient**: Penalties doubled, -2 attack, no special armor properties
- **Proficient**: Normal penalties and full armor function
- **Expert**: Penalties reduced by one tier (Heavy → Medium penalties)
- **Master**: Penalties reduced, +1 Defense bonus, maintenance halved

This phase establishes the enum and effect definitions that all subsequent v0.16.2 phases depend upon.

### 1.2 Key Deliverables

| Category          | Items                                                                     |
| ----------------- | ------------------------------------------------------------------------- |
| **Enums**         | `ArmorProficiencyLevel`                                                   |
| **Value Objects** | `ArmorProficiencyEffect`                                                  |
| **Interfaces**    | `IArmorProficiencyEffectProvider`                                         |
| **Configuration** | `armor-proficiency-effects.json`, `armor-proficiency-effects.schema.json` |
| **Tests**         | ~3 unit tests                                                             |

### 1.3 Architectural Significance

This version establishes the **Armor Proficiency Effect Pattern** that mirrors the weapon proficiency system:

- **Enum-Based Level Identification**: All armor proficiency checks reference an `ArmorProficiencyLevel` value
- **Effect-Driven Modifiers**: Penalty multipliers and bonuses come from configuration, not hardcoded values
- **Tier Reduction System**: Expert and Master levels reduce effective armor weight
- **Provider Pattern**: `IArmorProficiencyEffectProvider` centralizes effect data access

---

## 2. Feature Overview

```
v0.16.2a Armor Proficiency Level Enum
├── ArmorProficiencyLevel Enum
│   ├── NonProficient (0) — Penalties doubled, -2 attack
│   ├── Proficient (1) — Baseline competency
│   ├── Expert (2) — Tier reduction by 1
│   └── Master (3) — Tier reduction, +1 Defense
├── ArmorProficiencyEffect Value Object
│   ├── Level: ArmorProficiencyLevel
│   ├── PenaltyMultiplier: decimal (1.0x or 2.0x)
│   ├── AttackModifier: int (-2 to 0)
│   ├── DefenseModifier: int (0 to +1)
│   ├── TierReduction: int (0 to 1)
│   ├── CanUseSpecialProperties: bool
│   └── DisplayName: string
└── IArmorProficiencyEffectProvider Interface
    ├── GetEffect(level): ArmorProficiencyEffect
    ├── GetAllEffects(): IReadOnlyList<ArmorProficiencyEffect>
    └── ValidateConfiguration(): bool
```

### 2.1 Scope Alignment

**In Scope:**

- `ArmorProficiencyLevel` enum with four levels (0-3)
- `ArmorProficiencyEffect` value object with penalty/bonus modifiers
- `IArmorProficiencyEffectProvider` interface for effect data access
- `armor-proficiency-effects.json` configuration file
- `armor-proficiency-effects.schema.json` validation schema

**Out of Scope:**

- Armor categories (v0.16.2b)
- Archetype armor matrix (v0.16.2c)
- Non-proficiency penalty calculation (v0.16.2d)
- Proficiency acquisition methods (v0.16.2e)
- Combat integration (v0.16.2f)

---

## 3. Architecture Diagrams

### 3.1 Armor Proficiency Effect System Overview

```
┌─────────────────────────────────────────────────────────────────────┐
│              ARMOR PROFICIENCY EFFECT SYSTEM OVERVIEW                │
└─────────────────────────────────────────────────────────────────────┘

    Character + Armor
           │
           │  Lookup proficiency level
           ▼
┌─────────────────────────────────────────────────────────────────────┐
│                   ArmorProficiencyLevel Enum                         │
├─────────────────────────────────────────────────────────────────────┤
│ NonProficient (0) │ Proficient (1) │ Expert (2)  │  Master (3)      │
└─────────────────────────────────────────────────────────────────────┘
           │
           │  Get armor effects
           ▼
┌─────────────────────────────────────────────────────────────────────┐
│                 IArmorProficiencyEffectProvider                      │
├─────────────────────────────────────────────────────────────────────┤
│  + GetEffect(level): ArmorProficiencyEffect                         │
│  + GetAllEffects(): IReadOnlyList<ArmorProficiencyEffect>           │
│  + ValidateConfiguration(): bool                                     │
└─────────────────────────────────────────────────────────────────────┘
           │
           │  Returns effect data
           ▼
┌─────────────────────────────────────────────────────────────────────┐
│                     ArmorProficiencyEffect                           │
├─────────────────────────────────────────────────────────────────────┤
│  Level: ArmorProficiencyLevel                                        │
│  PenaltyMultiplier: decimal      (e.g., 1.0, 2.0)                   │
│  AttackModifier: int             (e.g., -2, 0)                      │
│  DefenseModifier: int            (e.g., 0, +1)                      │
│  TierReduction: int              (e.g., 0, 1)                       │
│  CanUseSpecialProperties: bool                                       │
│  DisplayName: string             (e.g., "Non-Proficient")           │
└─────────────────────────────────────────────────────────────────────┘
```

### 3.2 Proficiency Level Decision Tree

```
┌─────────────────────────────────────────────────────────────────────┐
│              ARMOR PROFICIENCY LEVEL DECISION TREE                   │
└─────────────────────────────────────────────────────────────────────┘

    Character Equips Armor
           │
           ▼
    ┌──────────────────────────────────────────────────────────────────┐
    │             APPLY PROFICIENCY EFFECTS                            │
    ├──────────────────────────────────────────────────────────────────┤
    │                                                                  │
    │  Level == NonProficient?                                         │
    │     ├─ Penalty Multiplier: 2.0x (DOUBLED)                        │
    │     ├─ Attack: -2 modifier                                       │
    │     ├─ Defense: +0 modifier                                      │
    │     ├─ Tier Reduction: 0 (no reduction)                          │
    │     └─ Special Properties: BLOCKED                               │
    │                                                                  │
    │  Level == Proficient?                                            │
    │     ├─ Penalty Multiplier: 1.0x (normal)                         │
    │     ├─ Attack: +0 modifier                                       │
    │     ├─ Defense: +0 modifier                                      │
    │     ├─ Tier Reduction: 0                                         │
    │     └─ Special Properties: AVAILABLE                             │
    │                                                                  │
    │  Level == Expert?                                                │
    │     ├─ Penalty Multiplier: 1.0x                                  │
    │     ├─ Attack: +0 modifier                                       │
    │     ├─ Defense: +0 modifier                                      │
    │     ├─ Tier Reduction: 1 (Heavy → Medium penalties)              │
    │     └─ Special Properties: AVAILABLE                             │
    │                                                                  │
    │  Level == Master?                                                │
    │     ├─ Penalty Multiplier: 1.0x                                  │
    │     ├─ Attack: +0 modifier                                       │
    │     ├─ Defense: +1 modifier                                      │
    │     ├─ Tier Reduction: 1 (Heavy → Medium penalties)              │
    │     └─ Special Properties: AVAILABLE                             │
    │                                                                  │
    └──────────────────────────────────────────────────────────────────┘
```

### 3.3 Layer Diagram

```
┌─────────────────────────────────────────────────────────────────────┐
│                        PRESENTATION LAYER                            │
├─────────────────────────────────────────────────────────────────────┤
│  EquipmentView                                                       │
│  └── Displays proficiency warnings when equipping non-proficient    │
│                                                                      │
│  CharacterSheet                                                      │
│  └── Shows proficiency levels per armor category                    │
│                                                                      │
│  ArmorTooltip                                                        │
│  └── Shows effective penalties with proficiency applied             │
└───────┬─────────────────────────────────────────────────────────────┘
        │
        ▼
┌─────────────────────────────────────────────────────────────────────┐
│                       APPLICATION LAYER                              │
├─────────────────────────────────────────────────────────────────────┤
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │           ArmorProficiencyEffectProvider                       │  │
│  │       (implements IArmorProficiencyEffectProvider)             │  │
│  ├───────────────────────────────────────────────────────────────┤  │
│  │  + GetEffect(level): ArmorProficiencyEffect                   │  │
│  │  + GetAllEffects(): IReadOnlyList<ArmorProficiencyEffect>     │  │
│  │  + ValidateConfiguration(): bool                              │  │
│  │                                                               │  │
│  │  - LoadConfiguration(): void (from JSON)                      │  │
│  │  - _effects: Dictionary<ArmorProficiencyLevel, Effect>        │  │
│  └───────────────────────────────────────────────────────────────┘  │
└───────┬─────────────────────────────────────────────────────────────┘
        │
        ▼
┌─────────────────────────────────────────────────────────────────────┐
│                         DOMAIN LAYER                                 │
├─────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────┐  ┌────────────────────────────────┐   │
│  │ ArmorProficiencyLevel   │  │    ArmorProficiencyEffect      │   │
│  │        (Enum)           │  │       (Value Object)           │   │
│  ├─────────────────────────┤  ├────────────────────────────────┤   │
│  │ NonProficient = 0       │  │ Level: ArmorProficiencyLevel   │   │
│  │ Proficient = 1          │  │ PenaltyMultiplier: decimal     │   │
│  │ Expert = 2              │  │ AttackModifier: int            │   │
│  │ Master = 3              │  │ DefenseModifier: int           │   │
│  └─────────────────────────┘  │ TierReduction: int             │   │
│                               │ CanUseSpecialProperties: bool  │   │
│                               │ DisplayName: string            │   │
│                               └────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────┘
```

### 3.4 Penalty Application Flow

```
┌─────────────────────────────────────────────────────────────────────┐
│                   PENALTY APPLICATION FLOW                           │
└─────────────────────────────────────────────────────────────────────┘

    Armor Equipped (e.g., Heavy Armor)
         │
         ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  1. GET BASE ARMOR PENALTIES (v0.16.2b)                         │
    ├─────────────────────────────────────────────────────────────────┤
    │  Heavy Armor Base: -2d10 Agility, +5 Stamina cost               │
    └─────────────────────────────────────────────────────────────────┘
         │
         ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  2. CHECK TIER REDUCTION                                        │
    ├─────────────────────────────────────────────────────────────────┤
    │  TierReduction > 0?                                             │
    │    ├─ Expert: 1 → Use Medium penalties instead                  │
    │    └─ Master: 1 → Use Medium penalties instead                  │
    │  Else: Use original tier penalties                              │
    └─────────────────────────────────────────────────────────────────┘
         │
         ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  3. APPLY PENALTY MULTIPLIER                                    │
    ├─────────────────────────────────────────────────────────────────┤
    │  Final Penalties = Base Penalties × PenaltyMultiplier           │
    │                                                                  │
    │  NonProficient in Heavy (no tier reduction):                    │
    │    (-2d10 Agility, +5 Stamina) × 2.0 = -4d10 Agility, +10 Stam  │
    │                                                                  │
    │  Expert in Heavy (tier reduced to Medium):                      │
    │    (-1d10 Agility, +2 Stamina) × 1.0 = -1d10 Agility, +2 Stam   │
    └─────────────────────────────────────────────────────────────────┘
         │
         ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  4. APPLY ADDITIONAL MODIFIERS                                  │
    ├─────────────────────────────────────────────────────────────────┤
    │  Attack Modifier: NonProficient = -2 attack                     │
    │  Defense Modifier: Master = +1 defense                          │
    └─────────────────────────────────────────────────────────────────┘
```

---

## 4. ArmorProficiencyLevel Enum

### 4.1 Purpose

The `ArmorProficiencyLevel` enum defines the four levels of armor proficiency a character can have. This enum is the foundation for determining armor effectiveness and penalty application.

### 4.2 Implementation

**File:** `src/Core/RuneAndRust.Domain/Enums/ArmorProficiencyLevel.cs`

```csharp
namespace RuneAndRust.Domain.Enums;

/// <summary>
/// Defines the proficiency levels for armor usage.
/// </summary>
/// <remarks>
/// <para>
/// Armor proficiency levels determine how effectively a character can
/// wear armor of a specific category. Higher proficiency provides
/// penalty reductions and defensive bonuses.
/// </para>
/// <para>
/// The four levels represent a clear progression:
/// - NonProficient: Penalties doubled, -2 attack, no special properties
/// - Proficient: Baseline competency, normal penalties
/// - Expert: Tier reduction (Heavy → Medium penalties)
/// - Master: Tier reduction, +1 Defense, halved maintenance
/// </para>
/// <para>
/// Level values are explicitly assigned (0-3) to ensure stable
/// serialization and database storage.
/// </para>
/// </remarks>
public enum ArmorProficiencyLevel
{
    /// <summary>
    /// No training with this armor category.
    /// </summary>
    /// <remarks>
    /// Non-proficient characters suffer doubled penalties, -2 attack,
    /// and cannot activate armor special properties.
    /// </remarks>
    NonProficient = 0,

    /// <summary>
    /// Basic training with this armor category.
    /// </summary>
    /// <remarks>
    /// Proficient characters have standard penalties and can use all
    /// armor functions including special properties.
    /// </remarks>
    Proficient = 1,

    /// <summary>
    /// Advanced training with this armor category.
    /// </summary>
    /// <remarks>
    /// Expert characters treat armor as one tier lighter for penalty
    /// calculations. Heavy armor applies Medium-tier penalties.
    /// </remarks>
    Expert = 2,

    /// <summary>
    /// Mastery of this armor category.
    /// </summary>
    /// <remarks>
    /// Master characters gain tier reduction like Expert, plus
    /// +1 Defense bonus and halved maintenance costs.
    /// </remarks>
    Master = 3
}
```

### 4.3 Proficiency Level Reference Table

| Enum Value      | Integer | Penalty Mult | Attack Mod | Defense Mod | Tier Reduction | Special Props |
| --------------- | ------- | ------------ | ---------- | ----------- | -------------- | ------------- |
| `NonProficient` | 0       | 2.0x         | -2         | 0           | 0              | No            |
| `Proficient`    | 1       | 1.0x         | 0          | 0           | 0              | Yes           |
| `Expert`        | 2       | 1.0x         | 0          | 0           | 1              | Yes           |
| `Master`        | 3       | 1.0x         | 0          | +1          | 1              | Yes           |

---

## 5. ArmorProficiencyEffect Value Object

### 5.1 Purpose

The `ArmorProficiencyEffect` value object encapsulates all effects for an armor proficiency level. This separates the enum definition from its gameplay impact, allowing balance adjustments without code changes.

### 5.2 Implementation

**File:** `src/Core/RuneAndRust.Domain/ValueObjects/ArmorProficiencyEffect.cs`

```csharp
namespace RuneAndRust.Domain.ValueObjects;

using RuneAndRust.Domain.Enums;

/// <summary>
/// Contains effects for an armor proficiency level.
/// </summary>
/// <remarks>
/// <para>
/// ArmorProficiencyEffect is loaded from configuration rather than
/// hardcoded, allowing balance adjustments without code changes.
/// </para>
/// <para>
/// This value object is immutable after creation. Use the factory method
/// <see cref="Create"/> to construct new instances with validation.
/// </para>
/// </remarks>
/// <param name="Level">The proficiency level this effect describes.</param>
/// <param name="PenaltyMultiplier">Multiplier for armor penalties (1.0 or 2.0).</param>
/// <param name="AttackModifier">Modifier applied to attack rolls (-2 to 0).</param>
/// <param name="DefenseModifier">Modifier applied to defense (0 to +1).</param>
/// <param name="TierReduction">Number of tiers to reduce for penalty calculation.</param>
/// <param name="CanUseSpecialProperties">Whether special armor properties are accessible.</param>
/// <param name="DisplayName">Human-readable name for UI.</param>
/// <param name="Description">Flavor text describing this proficiency level.</param>
public readonly record struct ArmorProficiencyEffect(
    ArmorProficiencyLevel Level,
    decimal PenaltyMultiplier,
    int AttackModifier,
    int DefenseModifier,
    int TierReduction,
    bool CanUseSpecialProperties,
    string DisplayName,
    string Description)
{
    /// <summary>
    /// Gets the level as an integer value.
    /// </summary>
    public int LevelValue => (int)Level;

    /// <summary>
    /// Gets whether penalties are doubled at this level.
    /// </summary>
    public bool HasDoubledPenalties => PenaltyMultiplier >= 2.0m;

    /// <summary>
    /// Gets whether this level has attack penalties.
    /// </summary>
    public bool HasAttackPenalty => AttackModifier < 0;

    /// <summary>
    /// Gets whether this level has defense bonuses.
    /// </summary>
    public bool HasDefenseBonus => DefenseModifier > 0;

    /// <summary>
    /// Gets whether this level provides tier reduction.
    /// </summary>
    public bool HasTierReduction => TierReduction > 0;

    /// <summary>
    /// Gets whether this is the lowest proficiency level.
    /// </summary>
    public bool IsNonProficient => Level == ArmorProficiencyLevel.NonProficient;

    /// <summary>
    /// Gets whether this is the highest proficiency level.
    /// </summary>
    public bool IsMaster => Level == ArmorProficiencyLevel.Master;

    /// <summary>
    /// Creates a new ArmorProficiencyEffect with validation.
    /// </summary>
    public static ArmorProficiencyEffect Create(
        ArmorProficiencyLevel level,
        decimal penaltyMultiplier,
        int attackModifier,
        int defenseModifier,
        int tierReduction,
        bool canUseSpecialProperties,
        string displayName,
        string description)
    {
        ArgumentException.ThrowIfNullOrWhiteSpace(displayName);
        ArgumentException.ThrowIfNullOrWhiteSpace(description);
        ArgumentOutOfRangeException.ThrowIfLessThan(penaltyMultiplier, 1.0m);
        ArgumentOutOfRangeException.ThrowIfGreaterThan(penaltyMultiplier, 3.0m);
        ArgumentOutOfRangeException.ThrowIfLessThan(attackModifier, -5);
        ArgumentOutOfRangeException.ThrowIfGreaterThan(attackModifier, 0);
        ArgumentOutOfRangeException.ThrowIfNegative(defenseModifier);
        ArgumentOutOfRangeException.ThrowIfGreaterThan(defenseModifier, 3);
        ArgumentOutOfRangeException.ThrowIfNegative(tierReduction);
        ArgumentOutOfRangeException.ThrowIfGreaterThan(tierReduction, 2);

        return new ArmorProficiencyEffect(
            level,
            penaltyMultiplier,
            attackModifier,
            defenseModifier,
            tierReduction,
            canUseSpecialProperties,
            displayName,
            description);
    }

    /// <summary>
    /// Formats the penalty multiplier for display.
    /// </summary>
    public string FormatPenaltyMultiplier() => $"{PenaltyMultiplier:F1}x";

    /// <summary>
    /// Formats the attack modifier for display.
    /// </summary>
    public string FormatAttackModifier() =>
        AttackModifier >= 0 ? $"+{AttackModifier}" : $"{AttackModifier}";

    /// <summary>
    /// Formats the defense modifier for display.
    /// </summary>
    public string FormatDefenseModifier() =>
        DefenseModifier >= 0 ? $"+{DefenseModifier}" : $"{DefenseModifier}";

    /// <summary>
    /// Creates a display string for debug/logging purposes.
    /// </summary>
    public override string ToString() =>
        $"{DisplayName}: Penalty {FormatPenaltyMultiplier()}, Atk {FormatAttackModifier()}, " +
        $"Def {FormatDefenseModifier()}, TierReduce {TierReduction}";
}
```

---

## 6. IArmorProficiencyEffectProvider Interface

### 6.1 Purpose

The `IArmorProficiencyEffectProvider` interface defines the contract for accessing armor proficiency effect data, mirroring the weapon proficiency provider pattern.

### 6.2 Implementation

**File:** `src/Core/RuneAndRust.Application/Interfaces/IArmorProficiencyEffectProvider.cs`

```csharp
namespace RuneAndRust.Application.Interfaces;

using RuneAndRust.Domain.Enums;
using RuneAndRust.Domain.ValueObjects;

/// <summary>
/// Provides access to armor proficiency effect data.
/// </summary>
/// <remarks>
/// <para>
/// This interface abstracts the source of armor proficiency effect data,
/// allowing it to be loaded from configuration files, databases, or defaults.
/// </para>
/// <para>
/// Implementations should cache loaded effects for performance and validate
/// that all proficiency levels have corresponding effect entries.
/// </para>
/// </remarks>
public interface IArmorProficiencyEffectProvider
{
    /// <summary>
    /// Gets the effects for a specific proficiency level.
    /// </summary>
    /// <param name="level">The proficiency level to get effects for.</param>
    /// <returns>The ArmorProficiencyEffect for the specified level.</returns>
    /// <exception cref="ArgumentException">Thrown when effect for level is not found.</exception>
    ArmorProficiencyEffect GetEffect(ArmorProficiencyLevel level);

    /// <summary>
    /// Gets effects for all proficiency levels.
    /// </summary>
    /// <returns>A read-only list of all armor proficiency effects, ordered by level.</returns>
    IReadOnlyList<ArmorProficiencyEffect> GetAllEffects();

    /// <summary>
    /// Gets the penalty multiplier for a specific proficiency level.
    /// </summary>
    /// <param name="level">The proficiency level.</param>
    /// <returns>The penalty multiplier (1.0 or 2.0).</returns>
    decimal GetPenaltyMultiplier(ArmorProficiencyLevel level);

    /// <summary>
    /// Gets the attack modifier for a specific proficiency level.
    /// </summary>
    /// <param name="level">The proficiency level.</param>
    /// <returns>The attack modifier (-2 to 0).</returns>
    int GetAttackModifier(ArmorProficiencyLevel level);

    /// <summary>
    /// Gets the defense modifier for a specific proficiency level.
    /// </summary>
    /// <param name="level">The proficiency level.</param>
    /// <returns>The defense modifier (0 to +1).</returns>
    int GetDefenseModifier(ArmorProficiencyLevel level);

    /// <summary>
    /// Gets the tier reduction for a specific proficiency level.
    /// </summary>
    /// <param name="level">The proficiency level.</param>
    /// <returns>Number of tiers reduced for penalty calculation.</returns>
    int GetTierReduction(ArmorProficiencyLevel level);

    /// <summary>
    /// Checks if a proficiency level allows special property usage.
    /// </summary>
    /// <param name="level">The proficiency level.</param>
    /// <returns>True if special properties can be used.</returns>
    bool CanUseSpecialProperties(ArmorProficiencyLevel level);

    /// <summary>
    /// Gets the display name for a proficiency level.
    /// </summary>
    /// <param name="level">The proficiency level.</param>
    /// <returns>The localized display name.</returns>
    string GetDisplayName(ArmorProficiencyLevel level);

    /// <summary>
    /// Validates that all required levels have effect entries.
    /// </summary>
    /// <returns>True if all levels are configured, false otherwise.</returns>
    bool ValidateConfiguration();
}
```

### 6.3 Usage Examples

```csharp
// Get effect for a proficiency level
var masterEffect = _armorProvider.GetEffect(ArmorProficiencyLevel.Master);
Console.WriteLine($"Defense: {masterEffect.FormatDefenseModifier()}");  // "+1"
Console.WriteLine($"Tier Reduction: {masterEffect.TierReduction}");     // "1"

// Check penalty multiplier for non-proficient
var multiplier = _armorProvider.GetPenaltyMultiplier(ArmorProficiencyLevel.NonProficient);
Console.WriteLine($"Penalty multiplier: {multiplier}x");  // "2.0x"

// Check if character can use special properties
var level = ArmorProficiencyLevel.NonProficient;
if (!_armorProvider.CanUseSpecialProperties(level))
{
    Console.WriteLine("Cannot activate armor's fire resistance!");
}

// Calculate effective penalties for Expert in Heavy armor
var expertEffect = _armorProvider.GetEffect(ArmorProficiencyLevel.Expert);
if (expertEffect.TierReduction > 0)
{
    Console.WriteLine("Heavy armor uses Medium-tier penalties!");
}
```

---

## 7. Data Model Changes

### 7.1 New Types Summary

| Type                              | Layer       | Category     | Description                           |
| --------------------------------- | ----------- | ------------ | ------------------------------------- |
| `ArmorProficiencyLevel`           | Domain      | Enum         | Four-level proficiency classification |
| `ArmorProficiencyEffect`          | Domain      | Value Object | Penalty/bonus modifiers for a level   |
| `IArmorProficiencyEffectProvider` | Application | Interface    | Abstraction for effect data access    |

### 7.2 File Locations

```
src/Core/RuneAndRust.Domain/
├── Enums/
│   └── ArmorProficiencyLevel.cs          ← NEW
└── ValueObjects/
    └── ArmorProficiencyEffect.cs         ← NEW

src/Core/RuneAndRust.Application/
└── Interfaces/
    └── IArmorProficiencyEffectProvider.cs ← NEW

config/
├── armor-proficiency-effects.json         ← NEW
└── schemas/
    └── armor-proficiency-effects.schema.json ← NEW
```

### 7.3 Entity Relationships

```
┌───────────────────────────┐         ┌─────────────────────────┐
│  ArmorProficiencyLevel    │◄────────│  ArmorProficiencyEffect │
│         (Enum)            │   1:1   │     (Value Object)      │
└───────────────────────────┘         └─────────────────────────┘

┌───────────────────────────────────┐
│  IArmorProficiencyEffectProvider  │
│          (Interface)              │
└────────────┬──────────────────────┘
             │
             │ returns
             ▼
┌───────────────────────────────────┐
│      ArmorProficiencyEffect       │
│        (Value Object)             │
└───────────────────────────────────┘
```

---

## 8. Configuration File Schemas

### 8.1 armor-proficiency-effects.json

**File:** `config/armor-proficiency-effects.json`

```json
{
    "$schema": "./schemas/armor-proficiency-effects.schema.json",
    "effects": [
        {
            "level": "NonProficient",
            "levelValue": 0,
            "penaltyMultiplier": 2.0,
            "attackModifier": -2,
            "defenseModifier": 0,
            "tierReduction": 0,
            "canUseSpecialProperties": false,
            "displayName": "Non-Proficient",
            "description": "All armor penalties are doubled. -2 attack penalty. Cannot use special armor properties."
        },
        {
            "level": "Proficient",
            "levelValue": 1,
            "penaltyMultiplier": 1.0,
            "attackModifier": 0,
            "defenseModifier": 0,
            "tierReduction": 0,
            "canUseSpecialProperties": true,
            "displayName": "Proficient",
            "description": "Standard armor penalties apply. Full access to armor functions and special properties."
        },
        {
            "level": "Expert",
            "levelValue": 2,
            "penaltyMultiplier": 1.0,
            "attackModifier": 0,
            "defenseModifier": 0,
            "tierReduction": 1,
            "canUseSpecialProperties": true,
            "displayName": "Expert",
            "description": "Armor is treated as one tier lighter for penalty calculations. Heavy armor uses Medium penalties."
        },
        {
            "level": "Master",
            "levelValue": 3,
            "penaltyMultiplier": 1.0,
            "attackModifier": 0,
            "defenseModifier": 1,
            "tierReduction": 1,
            "canUseSpecialProperties": true,
            "displayName": "Master",
            "description": "Tier reduction like Expert, plus +1 Defense bonus and halved armor maintenance costs."
        }
    ]
}
```

### 8.2 armor-proficiency-effects.schema.json

**File:** `config/schemas/armor-proficiency-effects.schema.json`

```json
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "armor-proficiency-effects.schema.json",
    "title": "Armor Proficiency Effects Configuration",
    "description": "Defines effects for each armor proficiency level",
    "type": "object",
    "required": ["effects"],
    "properties": {
        "$schema": { "type": "string" },
        "effects": {
            "type": "array",
            "minItems": 4,
            "maxItems": 4,
            "items": { "$ref": "#/$defs/proficiencyEffect" }
        }
    },
    "$defs": {
        "proficiencyEffect": {
            "type": "object",
            "required": [
                "level",
                "levelValue",
                "penaltyMultiplier",
                "attackModifier",
                "defenseModifier",
                "tierReduction",
                "canUseSpecialProperties",
                "displayName",
                "description"
            ],
            "properties": {
                "level": {
                    "type": "string",
                    "enum": ["NonProficient", "Proficient", "Expert", "Master"]
                },
                "levelValue": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 3
                },
                "penaltyMultiplier": {
                    "type": "number",
                    "minimum": 1.0,
                    "maximum": 3.0
                },
                "attackModifier": {
                    "type": "integer",
                    "minimum": -5,
                    "maximum": 0
                },
                "defenseModifier": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 3
                },
                "tierReduction": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 2
                },
                "canUseSpecialProperties": { "type": "boolean" },
                "displayName": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 50
                },
                "description": {
                    "type": "string",
                    "minLength": 10,
                    "maxLength": 500
                }
            },
            "additionalProperties": false
        }
    }
}
```

---

## 9. Logging Specifications

### 9.1 Log Levels by Component

| Component                        | Level       | Events                                  |
| -------------------------------- | ----------- | --------------------------------------- |
| `ArmorProficiencyEffectProvider` | Information | Configuration loaded, validation passed |
| `ArmorProficiencyEffectProvider` | Debug       | Individual effect retrieved             |
| `ArmorProficiencyEffectProvider` | Warning     | Missing effect for level                |
| `ArmorProficiencyEffectProvider` | Error       | Configuration validation failed         |

### 9.2 Log Message Templates

```csharp
// Information - Configuration loaded
_logger.LogInformation(
    "Loaded {EffectCount} armor proficiency effects from configuration",
    effects.Count);

// Debug - Effect retrieved
_logger.LogDebug(
    "Retrieved armor proficiency effect for level {Level}: PenaltyMult={Multiplier}, TierReduction={Reduction}",
    level, effect.PenaltyMultiplier, effect.TierReduction);

// Warning - Missing effect
_logger.LogWarning(
    "No armor proficiency effect configured for level {Level}, using defaults",
    level);

// Error - Validation failed
_logger.LogError(
    "Armor proficiency configuration validation failed: missing levels {MissingLevels}",
    string.Join(", ", missingLevels));
```

---

## 10. Unit Testing Requirements

### 10.1 Test Count by Feature

| Feature                | Test Count |
| ---------------------- | ---------- |
| ArmorProficiencyLevel  | ~1         |
| ArmorProficiencyEffect | ~2         |
| **Total**              | **~3**     |

### 10.2 Test Specifications

**File:** `tests/RuneAndRust.Domain.UnitTests/Enums/ArmorProficiencyLevelTests.cs`

```csharp
[TestFixture]
public class ArmorProficiencyLevelTests
{
    [Test]
    public void ArmorProficiencyLevel_HasFourValues_WithCorrectIntegerAssignments()
    {
        // Arrange & Act
        var levels = Enum.GetValues<ArmorProficiencyLevel>();

        // Assert
        levels.Should().HaveCount(4);
        ((int)ArmorProficiencyLevel.NonProficient).Should().Be(0);
        ((int)ArmorProficiencyLevel.Proficient).Should().Be(1);
        ((int)ArmorProficiencyLevel.Expert).Should().Be(2);
        ((int)ArmorProficiencyLevel.Master).Should().Be(3);
    }
}
```

**File:** `tests/RuneAndRust.Domain.UnitTests/ValueObjects/ArmorProficiencyEffectTests.cs`

```csharp
[TestFixture]
public class ArmorProficiencyEffectTests
{
    [Test]
    public void Create_WithValidParameters_ReturnsCorrectEffect()
    {
        // Arrange & Act
        var effect = ArmorProficiencyEffect.Create(
            ArmorProficiencyLevel.NonProficient,
            2.0m, -2, 0, 0, false,
            "Non-Proficient",
            "All penalties doubled.");

        // Assert
        effect.Level.Should().Be(ArmorProficiencyLevel.NonProficient);
        effect.PenaltyMultiplier.Should().Be(2.0m);
        effect.AttackModifier.Should().Be(-2);
        effect.DefenseModifier.Should().Be(0);
        effect.TierReduction.Should().Be(0);
        effect.CanUseSpecialProperties.Should().BeFalse();
        effect.HasDoubledPenalties.Should().BeTrue();
    }

    [Test]
    public void Create_MasterLevel_HasCorrectBonuses()
    {
        // Arrange & Act
        var effect = ArmorProficiencyEffect.Create(
            ArmorProficiencyLevel.Master,
            1.0m, 0, 1, 1, true,
            "Master",
            "Peak armor proficiency.");

        // Assert
        effect.IsMaster.Should().BeTrue();
        effect.DefenseModifier.Should().Be(1);
        effect.TierReduction.Should().Be(1);
        effect.HasDefenseBonus.Should().BeTrue();
        effect.HasTierReduction.Should().BeTrue();
    }
}
```

---

## 11. Use Cases

### UC-001: Check Armor Proficiency Effect

**Actor:** System  
**Flow:** Character equips armor → System retrieves proficiency level → System gets effect data → System applies penalties/bonuses

### UC-002: Display Proficiency Level in UI

**Actor:** Player  
**Flow:** Player opens character sheet → UI requests proficiency effect → UI displays level name and effects

### UC-003: Validate Configuration on Startup

**Actor:** System  
**Flow:** Game starts → Provider loads config → Provider validates all levels exist → Game proceeds or logs error

---

## 12. Deliverable Checklist

### Domain Layer

- [ ] `ArmorProficiencyLevel` enum created
- [ ] `ArmorProficiencyEffect` value object created

### Application Layer

- [ ] `IArmorProficiencyEffectProvider` interface created

### Configuration Files

- [ ] `config/armor-proficiency-effects.json` created
- [ ] `config/schemas/armor-proficiency-effects.schema.json` created

### Testing

- [ ] ~3 unit tests implemented
- [ ] All tests passing

### Documentation

- [ ] XML documentation on all public types
- [ ] Inline comments for complex logic

---

## 13. Acceptance Criteria

### Functional

- [ ] `ArmorProficiencyLevel` enum has exactly 4 values (0-3)
- [ ] `NonProficient` level has PenaltyMultiplier = 2.0
- [ ] `NonProficient` level has AttackModifier = -2
- [ ] `Expert` level has TierReduction = 1
- [ ] `Master` level has DefenseModifier = +1
- [ ] `Master` level has TierReduction = 1
- [ ] Configuration file validates against schema

### Quality

- [ ] Build succeeds with 0 errors/warnings
- [ ] All ~3 tests pass
- [ ] XML documentation complete on all public members
- [ ] Code follows established patterns from v0.16.1a

---

## 14. Dependencies

### 14.1 Required from Previous Versions

| Type                         | Location               | Usage in this phase         |
| ---------------------------- | ---------------------- | --------------------------- |
| `WeaponProficiencyLevel`     | Domain/Enums           | Pattern reference           |
| `ProficiencyEffect`          | Domain/ValueObjects    | Design pattern reference    |
| `IProficiencyEffectProvider` | Application/Interfaces | Interface pattern reference |

### 14.2 Provides to Future Phases

| Type                              | Usage                                    |
| --------------------------------- | ---------------------------------------- |
| `ArmorProficiencyLevel`           | v0.16.2b-f: Category and penalty systems |
| `ArmorProficiencyEffect`          | v0.16.2d: Penalty calculation service    |
| `IArmorProficiencyEffectProvider` | v0.16.2d-f: Effect data access           |

---

## 15. Future Considerations

### 15.1 Deferred to v0.16.2b

- **Armor Categories**: Light, Medium, Heavy, Shields, Specialized definitions

### 15.2 Deferred to v0.16.2c

- **Archetype Matrix**: Which archetypes are proficient with which armor categories
- **Galdr Interference**: Special rules for Mystics in Medium/Heavy armor

### 15.3 Deferred to v0.16.2d

- **Penalty Calculation Service**: Applying tier reduction and multipliers

### 15.4 Out of Scope

- **Maintenance Costs**: Master halved maintenance is flavor, not implemented here
- **Specific Armor Items**: Individual armor definitions belong to equipment system

---

_Document Version: 1.0_  
_Last Updated: 2026-01-27_  
_Author: Assistant_
