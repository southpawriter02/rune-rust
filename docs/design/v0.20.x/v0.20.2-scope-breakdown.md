# v0.20.2 Scope Breakdown: Rúnasmiðr (Runesmith)

**Version:** 0.20.2
**Theme:** Rúnasmiðr Specialization Implementation
**Prerequisites:** v0.20.1 Complete (Skjaldmær Specialization)
**Total Estimated Tests:** ~25 new tests

---

## Executive Summary

v0.20.2 implements the **Rúnasmiðr (Runesmith)** specialization — the crafting-focused ability tree for the Adept archetype. The Rúnasmiðr combines ancient Dvergr inscription techniques with practical combat applications, creating runes that enhance equipment, provide protection, and can even animate to attack enemies.

> *"Every mark tells a truth. Every truth holds power."*

The work is divided into **3 sub-phases**:

| Phase | Name | Focus | Est. Tests |
|-------|------|-------|------------|
| v0.20.2a | Framework & Tier 1 Abilities | Rune Charges resource, Inscribe Rune, Read the Marks, Runestone Ward | ~10 |
| v0.20.2b | Tier 2 Abilities | Empowered Inscription, Runic Trap, Dvergr Techniques | ~8 |
| v0.20.2c | Tier 3 Abilities & Capstone | Master Scrivener, Living Runes, Word of Unmaking | ~7 |

---

## Specialization Profile

### Rúnasmiðr Identity

| Attribute | Value |
|-----------|-------|
| **Display Name** | Rúnasmiðr |
| **Pronunciation** | ROO-nah-smithr |
| **Translation** | Runesmith |
| **Archetype** | Adept |
| **Path Type** | Coherent |
| **Role** | Crafting / Inscription / Enhancement |
| **Special Resource** | Rune Charges (Max 5) |
| **Tagline** | "Inscriber of Power" |

### Thematic Elements

The Rúnasmiðr carries forward the sacred craft of the Dvergr — the master artisans who built much of the World-Machine's infrastructure. Where others see scrap and ruin, the Rúnasmiðr sees potential for inscription. Their runes bridge the gap between ancient knowledge and practical survival, enhancing weapons with elemental fury, creating protective wards, and even commanding inscriptions to take on a life of their own.

**Design Principles:**
1. **Preparation Matters**: Many abilities require setup but provide lasting benefits
2. **Versatile Application**: Runes can enhance, protect, or attack
3. **Resource Generation**: Crafting activities restore Rune Charges
4. **Synergy with Crafting System**: Abilities integrate with v0.17.x crafting mechanics
5. **Coherent Path**: No Corruption risk — working within established runic traditions

---

## Feature Analysis & Categorization

### From v0.20.x-overview.md — Ability Tier Structure

| Ability | Tier | Type | Complexity | Assigned Phase |
|---------|------|------|------------|----------------|
| Inscribe Rune | T1 | Active | Medium | **v0.20.2a** |
| Read the Marks | T1 | Passive | Low | **v0.20.2a** |
| Runestone Ward | T1 | Active | Medium | **v0.20.2a** |
| Empowered Inscription | T2 | Active | Medium | **v0.20.2b** |
| Runic Trap | T2 | Active | High | **v0.20.2b** |
| Dvergr Techniques | T2 | Passive | Low | **v0.20.2b** |
| Master Scrivener | T3 | Passive | Low | **v0.20.2c** |
| Living Runes | T3 | Active | High | **v0.20.2c** |
| Word of Unmaking | Cap | Ultimate | High | **v0.20.2c** |

### From v0.20.x-overview.md — Special Resource

| Feature | Complexity | Dependencies | Assigned Phase |
|---------|------------|--------------|----------------|
| Rune Charges (Max 5) | Medium | Resource System (Core) | **v0.20.2a** |
| Rune Charge generation (crafting) | Medium | Crafting System (v0.17.x) | **v0.20.2a** |
| Rune Charge spending | Low | Ability execution | **v0.20.2a** |

---

## Phase Definitions

---

## v0.20.2a: Framework & Tier 1 Abilities

[v0.20.2a Design Specification](v0.20.2a-design-specification.md)

### Overview

This phase establishes the Rúnasmiðr specialization framework including the Rune Charges special resource and implements the three Tier 1 abilities that define the core inscription identity.

### Scope

**In Scope:**
- `RunasmidrSpecialization` registration with v0.17.4 framework
- `RuneChargeResource` special resource implementation
- Rune Charge restoration via crafting activities
- Inscribe Rune active ability (temporary weapon/armor enhancement)
- Read the Marks passive ability (automatic Jötun tech identification)
- Runestone Ward active ability (create defensive ward)
- Ability slot initialization for Rúnasmiðr
- Configuration entries in `specializations.json` and `abilities.json`

**Out of Scope:**
- Tier 2 abilities (v0.20.2b)
- Tier 3 abilities and Capstone (v0.20.2c)
- Other specialization implementations (v0.20.3+)

### Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Domain Value Objects | 3 | `RuneChargeResource`, `InscribedRune`, `RunestoneWard` |
| Domain Enums | 2 | `RunasmidrAbilityId`, `RuneType` |
| Application Services | 2 | `RuneChargeService`, `RunasmidrAbilityService` |
| Ability Implementations | 3 | Inscribe Rune, Read the Marks, Runestone Ward |
| Configuration | 2 | `specializations.json` updates, `abilities.json` updates |
| Unit Tests | ~10 | |

### Data Model Changes

```
NEW: RuneChargeResource (Value Object)
├── CurrentCharges: int (0-5)
├── MaxCharges: int (default 5)
├── LastGeneratedAt: DateTime?
└── Methods:
    ├── Spend(int amount): bool
    ├── Generate(int amount): void
    └── GenerateFromCrafting(): void

NEW: InscribedRune (Value Object)
├── RuneId: Guid
├── RuneType: RuneType
├── TargetItemId: Guid
├── EnhancementBonus: int
├── ElementalType: DamageType?
├── Duration: int (turns)
├── CreatedAt: DateTime
└── Methods:
    ├── Tick(): void
    ├── IsExpired(): bool
    └── GetEffectDescription(): string

NEW: RunestoneWard (Value Object)
├── WardId: Guid
├── OwnerId: Guid
├── DamageAbsorption: int (default 10)
├── RemainingAbsorption: int
├── CreatedAt: DateTime
└── Methods:
    ├── AbsorbDamage(int damage): int
    ├── IsDestroyed(): bool
    └── GetRemainingCapacity(): int

NEW: RuneType (Enum)
├── Enhancement - Weapon damage bonus
├── Protection - Armor defense bonus
├── Elemental - Adds elemental damage
├── Ward - Damage absorption
└── Trap - Triggered effect

NEW: RunasmidrAbilityId (Enum)
├── InscribeRune
├── ReadTheMarks
├── RunestoneWard
├── EmpoweredInscription
├── RunicTrap
├── DvergrTechniques
├── MasterScrivener
├── LivingRunes
└── WordOfUnmaking

MODIFY: Character (Entity)
├── ADD: RuneCharges: RuneChargeResource?
├── ADD: ActiveRunes: IReadOnlyList<InscribedRune>
└── ADD: ActiveWards: IReadOnlyList<RunestoneWard>
```

### Tier 1 Ability Specifications

#### Inscribe Rune (Active)

| Property | Value |
|----------|-------|
| **ID** | `inscribe-rune` |
| **Type** | Active |
| **AP Cost** | 3 AP |
| **Rune Charge Cost** | 1 |
| **Duration** | 10 turns |
| **Effect** | Apply temporary enhancement to weapon or armor |
| **Restrictions** | Target must be weapon or armor |

**Mechanics:**
- Spend 1 Rune Charge to inscribe a rune on equipment
- Weapon runes: +2 damage for 10 turns
- Armor runes: +1 Defense for 10 turns
- Only one rune per item at a time
- Rune expires after duration or can be overwritten
- Visual indicator shows inscribed items

#### Read the Marks (Passive)

| Property | Value |
|----------|-------|
| **ID** | `read-the-marks` |
| **Type** | Passive |
| **Effect** | Automatically identify Jötun technology |
| **Restrictions** | None |

**Mechanics:**
- When examining Jötun technology, identification is automatic
- Bypasses normal Perception/Lore checks for Jötun items
- Reveals function, origin, and potential uses
- Synergizes with v0.15.6 Perception system (auto-succeed identification layers)
- Provides lore text snippets for identified items

#### Runestone Ward (Active)

| Property | Value |
|----------|-------|
| **ID** | `runestone-ward` |
| **Type** | Active |
| **AP Cost** | 2 AP |
| **Rune Charge Cost** | 1 |
| **Duration** | Until destroyed |
| **Effect** | Create defensive ward that absorbs 10 damage |
| **Restrictions** | Maximum 1 active ward per character |

**Mechanics:**
- Ward absorbs incoming damage before HP
- Absorbs up to 10 points of damage total
- Destroyed when absorption depleted
- Can be refreshed by casting again (replaces old ward)
- Visual indicator shows remaining absorption
- Does not stack with multiple wards

### User-Facing Changes

**Commands:**
```
> ability inscribe-rune <weapon|armor>  # Inscribe enhancement rune
> ability runestone-ward                 # Create protective ward
> examine <jotun-item>                   # Auto-identifies if Rúnasmiðr
> status                                 # Shows Rune Charges: 5/5
```

**Output Example:**
```
╔══════════════════════════════════════════════════════════════╗
║  RÚNASMIÐR - Bjorn Runehand                                  ║
╠══════════════════════════════════════════════════════════════╣
║  HP: 28/28    Ward: ██████████ 10/10    Defense: 14          ║
║  Rune Charges: █████ 5/5                                     ║
║                                                              ║
║  Active Runes:                                               ║
║  ├── Iron Axe: +2 damage (8 turns remaining)                 ║
║  └── Leather Armor: +1 Defense (10 turns remaining)          ║
║                                                              ║
║  [Read the Marks] Jötun technology auto-identified           ║
╚══════════════════════════════════════════════════════════════╝
```

### Acceptance Criteria

- [ ] Rúnasmiðr specialization registered in SpecializationDefinition
- [ ] Rune Charges initialize to 5/5 on character creation/selection
- [ ] Rune Charges generate when crafting activities complete
- [ ] Inscribe Rune applies +2 damage to weapons for 10 turns
- [ ] Inscribe Rune applies +1 Defense to armor for 10 turns
- [ ] Read the Marks auto-identifies Jötun technology
- [ ] Runestone Ward absorbs 10 damage before HP
- [ ] Ability slots correctly show Tier 1 abilities as unlocked
- [ ] ~10 unit tests pass

---

## v0.20.2b: Tier 2 Abilities

[v0.20.2b Design Specification](v0.20.2b-design-specification.md)

### Overview

This phase implements the three Tier 2 abilities that expand the Rúnasmiðr's offensive capabilities with elemental damage, trap placement, and crafting cost reduction.

### Scope

**In Scope:**
- Empowered Inscription active ability (+1d6 elemental damage)
- Runic Trap active ability (triggered ground effect)
- Dvergr Techniques passive ability (20% crafting cost reduction)
- Tier 2 unlock validation (requires 8 PP invested in tree)
- PP cost enforcement (4 PP per Tier 2 ability)

**Out of Scope:**
- Tier 3 abilities and Capstone (v0.20.2c)
- Rune Charge modifications (established in v0.20.2a)

### Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Domain Value Objects | 2 | `EmpoweredRune`, `RunicTrap` |
| Domain Enums | 1 | `TrapTriggerType` |
| Ability Implementations | 3 | Empowered Inscription, Runic Trap, Dvergr Techniques |
| Crafting Integration | 1 | Cost reduction modifier |
| Unit Tests | ~8 | |

### Tier 2 Ability Specifications

#### Empowered Inscription (Active)

| Property | Value |
|----------|-------|
| **ID** | `empowered-inscription` |
| **Type** | Active |
| **AP Cost** | 4 AP |
| **Rune Charge Cost** | 2 |
| **Duration** | 10 turns |
| **Effect** | Inscribed weapon deals +1d6 elemental damage |
| **PP Cost** | 4 PP to unlock |
| **Prerequisite** | 8 PP invested in Rúnasmiðr tree |

**Mechanics:**
- Enhanced version of Inscribe Rune for weapons only
- Choose elemental type: Fire, Cold, Lightning, or Aetheric
- Adds 1d6 damage of chosen element to all attacks
- Stacks with base Inscribe Rune bonus (+2 damage + 1d6 elemental)
- Elemental damage can trigger vulnerabilities/resistances

**Elemental Options:**
| Element | Damage Type | Visual Effect |
|---------|-------------|---------------|
| Fire | Fire | Flames flicker along blade |
| Cold | Cold | Frost rimes the edge |
| Lightning | Lightning | Sparks crackle |
| Aetheric | Aetheric | Purple glow pulses |

#### Runic Trap (Active)

| Property | Value |
|----------|-------|
| **ID** | `runic-trap` |
| **Type** | Active |
| **AP Cost** | 3 AP |
| **Rune Charge Cost** | 2 |
| **Duration** | Until triggered or 1 hour |
| **Effect** | Place triggered rune on ground |
| **PP Cost** | 4 PP to unlock |
| **Prerequisite** | 8 PP invested in Rúnasmiðr tree |

**Mechanics:**
- Place rune in adjacent space
- Trap is invisible to enemies (Perception DC 14 to detect)
- Triggers when enemy enters space
- Deals 3d6 damage to triggering creature
- Maximum 3 traps active at once
- Traps expire after 1 hour if not triggered

**Trap Placement:**
- Cannot place on occupied spaces
- Cannot place in water or unstable terrain
- Allies can see and avoid traps
- Trap icon visible on tactical display for owner

#### Dvergr Techniques (Passive)

| Property | Value |
|----------|-------|
| **ID** | `dvergr-techniques` |
| **Type** | Passive |
| **Effect** | Crafting costs reduced by 20% |
| **PP Cost** | 4 PP to unlock |
| **Prerequisite** | 8 PP invested in Rúnasmiðr tree |

**Mechanics:**
- Applies to all crafting material costs
- Applies to crafting time (20% faster)
- Stacks with other crafting bonuses additively
- Does not affect Rune Charge costs
- Affects both consumable and equipment crafting

### Data Model Changes

```
NEW: EmpoweredRune (Value Object)
├── RuneId: Guid
├── TargetItemId: Guid
├── ElementalType: DamageType
├── BonusDice: string ("1d6")
├── Duration: int (turns)
├── CreatedAt: DateTime
└── Methods:
    ├── GetDamageRoll(): DiceRoll
    └── IsExpired(): bool

NEW: RunicTrap (Value Object)
├── TrapId: Guid
├── OwnerId: Guid
├── Position: Position
├── Damage: string ("3d6")
├── DetectionDc: int (14)
├── CreatedAt: DateTime
├── ExpiresAt: DateTime
├── IsTriggered: bool
└── Methods:
    ├── Trigger(Guid targetId): TrapTriggerResult
    ├── IsExpired(): bool
    └── IsVisibleTo(Guid characterId): bool

NEW: TrapTriggerType (Enum)
├── Movement - Triggers on entry
├── Proximity - Triggers when adjacent
└── Timed - Triggers after delay
```

### Acceptance Criteria

- [ ] Tier 2 abilities locked until 8 PP invested in tree
- [ ] Each Tier 2 ability costs 4 PP to unlock
- [ ] Empowered Inscription adds 1d6 elemental damage
- [ ] Empowered Inscription allows element choice
- [ ] Runic Trap deals 3d6 damage on trigger
- [ ] Runic Trap is invisible (DC 14 to detect)
- [ ] Dvergr Techniques reduces crafting costs by 20%
- [ ] ~8 unit tests pass

---

## v0.20.2c: Tier 3 Abilities & Capstone

[v0.20.2c Design Specification](v0.20.2c-design-specification.md)

### Overview

This phase implements the two Tier 3 abilities and the Capstone ultimate that represent the pinnacle of runic mastery, including runes that last longer, animate to fight, and the devastating Word of Unmaking dispel.

### Scope

**In Scope:**
- Master Scrivener passive ability (runes last twice as long)
- Living Runes active ability (runes animate to attack)
- Word of Unmaking ultimate ability (dispel all magical effects in area)
- Tier 3 unlock validation (requires 16 PP invested in tree)
- Capstone unlock validation (requires 24 PP invested in tree)
- PP cost enforcement (5 PP per Tier 3, 6 PP for Capstone)

**Out of Scope:**
- Other specialization implementations (v0.20.3+)
- Additional Adept specializations (Jötun-Reader in v0.20.3)

### Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Domain Value Objects | 1 | `LivingRuneEntity` |
| Ability Implementations | 3 | Master Scrivener, Living Runes, Word of Unmaking |
| Summoned Entity System | 1 | Living Rune creature behavior |
| Dispel System | 1 | Area magical effect removal |
| Unit Tests | ~7 | |

### Tier 3 & Capstone Ability Specifications

#### Master Scrivener (Passive)

| Property | Value |
|----------|-------|
| **ID** | `master-scrivener` |
| **Type** | Passive |
| **Effect** | All runes last twice as long |
| **PP Cost** | 5 PP to unlock |
| **Prerequisite** | 16 PP invested in Rúnasmiðr tree |

**Mechanics:**
- Inscribe Rune duration: 10 → 20 turns
- Empowered Inscription duration: 10 → 20 turns
- Runestone Ward: No change (until destroyed)
- Runic Trap duration: 1 hour → 2 hours
- Applies retroactively to existing runes when unlocked

#### Living Runes (Active)

| Property | Value |
|----------|-------|
| **ID** | `living-runes` |
| **Type** | Active |
| **AP Cost** | 4 AP |
| **Rune Charge Cost** | 3 |
| **Duration** | 5 turns |
| **Effect** | Animate runes to attack enemies |
| **PP Cost** | 5 PP to unlock |
| **Prerequisite** | 16 PP invested in Rúnasmiðr tree |

**Mechanics:**
- Summons 2 Living Rune entities
- Living Runes act on owner's initiative
- Each Living Rune: 10 HP, +4 Attack, 1d8 damage
- Living Runes target nearest enemy automatically
- Disappear when duration ends or destroyed
- Cannot be healed but can be resummoned

**Living Rune Stats:**
| Stat | Value |
|------|-------|
| HP | 10 |
| Defense | 12 |
| Attack | +4 |
| Damage | 1d8 |
| Movement | 4 spaces |
| Behavior | Aggressive (attacks nearest) |

#### Word of Unmaking (Ultimate/Capstone)

| Property | Value |
|----------|-------|
| **ID** | `word-of-unmaking` |
| **Type** | Ultimate |
| **AP Cost** | 5 AP |
| **Rune Charge Cost** | 4 |
| **Range** | 4 spaces (area) |
| **Effect** | Dispel all magical effects in area |
| **Cooldown** | Once per combat |
| **PP Cost** | 6 PP to unlock |
| **Prerequisite** | 24 PP invested in Rúnasmiðr tree |

**Mechanics:**
- Creates 4-space radius dispel zone centered on caster
- Removes ALL magical effects (buffs and debuffs) from all creatures
- Destroys summoned creatures (including own Living Runes)
- Destroys magical items' temporary enchantments
- Does not affect permanent magical properties
- Affects allies and enemies equally
- Cannot be resisted

**Effects Removed:**
- All buff status effects
- All debuff status effects
- Summoned creatures
- Temporary enchantments
- Active stances (magical only)
- Runic traps in area

### Data Model Changes

```
NEW: LivingRuneEntity (Value Object)
├── EntityId: Guid
├── OwnerId: Guid
├── CurrentHp: int (max 10)
├── MaxHp: int (10)
├── Defense: int (12)
├── AttackBonus: int (+4)
├── DamageDice: string ("1d8")
├── Movement: int (4)
├── Position: Position
├── TurnsRemaining: int
├── CreatedAt: DateTime
└── Methods:
    ├── TakeDamage(int damage): bool (returns true if destroyed)
    ├── Attack(Guid targetId): AttackResult
    ├── Move(Position newPosition): void
    ├── Tick(): void
    └── IsExpired(): bool
```

### Acceptance Criteria

- [ ] Tier 3 abilities locked until 16 PP invested in tree
- [ ] Capstone locked until 24 PP invested in tree
- [ ] Tier 3 abilities cost 5 PP each to unlock
- [ ] Capstone costs 6 PP to unlock
- [ ] Master Scrivener doubles rune durations
- [ ] Living Runes summons 2 entities with correct stats
- [ ] Living Runes act on owner's initiative
- [ ] Word of Unmaking dispels all magical effects in 4-space radius
- [ ] Word of Unmaking usable once per combat
- [ ] ~7 unit tests pass

---

## Dependencies & Prerequisites

```
v0.17.3 (Archetype System) - REQUIRED
    │
    └── Adept archetype foundation
                                    │
                                    ▼
v0.17.4 (Specialization Framework) - REQUIRED
    │
    ├── SpecializationDefinition entity
    ├── SpecializationPathType enum
    ├── SpecializationId enum (includes Runasmidr)
    ├── SpecialResourceDefinition
    └── Tier unlock mechanics (8/16/24 PP)
                                    │
                                    ▼
v0.20.0 (Legacy Class Removal) - REQUIRED
    │
    ├── IAbilitySlotService
    ├── ISpecializationPrerequisiteService
    └── Migration infrastructure
                                    │
                                    ▼
v0.20.1 (Skjaldmær) - REQUIRED
    │
    └── Establishes specialization ability patterns
                                    │
                                    ▼
v0.20.2 (Rúnasmiðr)
    │
    ├── v0.20.2a: Framework & Tier 1 ──────────────────┐
    │       ├── RuneChargeResource                      │
    │       ├── Inscribe Rune                           │
    │       ├── Read the Marks                          │
    │       └── Runestone Ward                          │
    │                                                   │
    ├── v0.20.2b: Tier 2 Abilities ────────────────────┤
    │       Dependencies: v0.20.2a                      │
    │       ├── Empowered Inscription                   │
    │       ├── Runic Trap                              │
    │       └── Dvergr Techniques                       │
    │                                                   │
    └── v0.20.2c: Tier 3 & Capstone ───────────────────┘
            Dependencies: v0.20.2a, v0.20.2b
            ├── Master Scrivener
            ├── Living Runes
            └── Word of Unmaking
```

---

## Rune Charges Resource

### Resource Specification

```csharp
/// <summary>
/// Special resource for Rúnasmiðr specialization.
/// Rune Charges power inscription abilities and are generated through crafting.
/// </summary>
public sealed record RuneChargeResource
{
    /// <summary>Current number of Rune Charges (0-5).</summary>
    public int CurrentCharges { get; private set; }

    /// <summary>Maximum Rune Charges (default 5).</summary>
    public int MaxCharges { get; init; } = 5;

    /// <summary>When charges were last generated.</summary>
    public DateTime? LastGeneratedAt { get; private set; }

    /// <summary>
    /// Spends the specified number of Rune Charges.
    /// </summary>
    /// <returns>True if charges were available and spent.</returns>
    public bool Spend(int amount)
    {
        if (amount <= 0 || CurrentCharges < amount)
            return false;

        CurrentCharges -= amount;
        return true;
    }

    /// <summary>
    /// Generates the specified number of Rune Charges.
    /// </summary>
    public void Generate(int amount)
    {
        CurrentCharges = Math.Min(CurrentCharges + amount, MaxCharges);
        LastGeneratedAt = DateTime.UtcNow;
    }

    /// <summary>
    /// Generates Rune Charges from a crafting activity.
    /// Standard crafting generates 1 charge, complex crafting generates 2.
    /// </summary>
    public void GenerateFromCrafting(bool isComplexCraft = false)
    {
        var amount = isComplexCraft ? 2 : 1;
        Generate(amount);
    }
}
```

### Resource Generation & Consumption

| Action | Effect |
|--------|--------|
| Complete standard craft | Generate 1 Rune Charge |
| Complete complex craft | Generate 2 Rune Charges |
| Rest (short) | Generate 1 Rune Charge |
| Rest (long) | Restore all Rune Charges to 5 |
| Inscribe Rune (Tier 1) | Spend 1 Rune Charge |
| Runestone Ward (Tier 1) | Spend 1 Rune Charge |
| Empowered Inscription (Tier 2) | Spend 2 Rune Charges |
| Runic Trap (Tier 2) | Spend 2 Rune Charges |
| Living Runes (Tier 3) | Spend 3 Rune Charges |
| Word of Unmaking (Capstone) | Spend 4 Rune Charges |

---

## Ability Type Classification

### Ability Types Used

| Type | Description | Examples in Rúnasmiðr |
|------|-------------|----------------------|
| **Active** | Standard ability with AP cost | Inscribe Rune, Runestone Ward, Empowered Inscription, Runic Trap, Living Runes |
| **Passive** | Always-on effect | Read the Marks, Dvergr Techniques, Master Scrivener |
| **Ultimate** | Powerful ability with cooldown | Word of Unmaking |

### Rune Duration Table

| Ability | Base Duration | With Master Scrivener |
|---------|---------------|----------------------|
| Inscribe Rune | 10 turns | 20 turns |
| Empowered Inscription | 10 turns | 20 turns |
| Runestone Ward | Until destroyed | Until destroyed |
| Runic Trap | 1 hour | 2 hours |
| Living Runes | 5 turns | 5 turns* |

*Living Runes are summoned entities, not runes — Master Scrivener does not affect them.

---

## Configuration Updates

### specializations.json

```json
{
  "specializations": [
    {
      "specializationId": "Runasmidr",
      "displayName": "Rúnasmiðr",
      "tagline": "Inscriber of Power",
      "description": "The Rúnasmiðr carries forward the sacred craft of the Dvergr, inscribing power into mundane objects and calling upon ancient runic traditions to enhance, protect, and destroy.",
      "selectionText": "Every mark tells a truth. Every truth holds power. Let me teach you to write reality itself.",
      "parentArchetype": "Adept",
      "pathType": "Coherent",
      "specialResource": {
        "resourceId": "rune-charges",
        "resourceName": "Rune Charges",
        "description": "Power for inscription abilities. Generated through crafting activities.",
        "maxValue": 5,
        "startingValue": 5,
        "generationMethod": "Generate 1 on standard craft, 2 on complex craft, restore all on long rest",
        "consumptionMethod": "Spent by inscription and runic abilities"
      },
      "unlockCost": 0,
      "abilityTiers": [
        {
          "tier": 1,
          "ppRequirement": 0,
          "abilityCost": 0,
          "abilities": ["inscribe-rune", "read-the-marks", "runestone-ward"]
        },
        {
          "tier": 2,
          "ppRequirement": 8,
          "abilityCost": 4,
          "abilities": ["empowered-inscription", "runic-trap", "dvergr-techniques"]
        },
        {
          "tier": 3,
          "ppRequirement": 16,
          "abilityCost": 5,
          "abilities": ["master-scrivener", "living-runes"]
        },
        {
          "tier": "capstone",
          "ppRequirement": 24,
          "abilityCost": 6,
          "abilities": ["word-of-unmaking"]
        }
      ]
    }
  ]
}
```

### abilities.json (Rúnasmiðr Section)

```json
{
  "abilities": [
    {
      "abilityId": "inscribe-rune",
      "displayName": "Inscribe Rune",
      "specializationId": "Runasmidr",
      "tier": 1,
      "type": "Active",
      "apCost": 3,
      "resourceCost": {
        "resourceId": "rune-charges",
        "amount": 1
      },
      "duration": 10,
      "durationUnit": "Turns",
      "description": "Apply a temporary enhancement rune to a weapon (+2 damage) or armor (+1 Defense) for 10 turns.",
      "requirements": {
        "targetType": ["Weapon", "Armor"]
      },
      "effects": [
        {
          "type": "ConditionalModifier",
          "condition": "TargetIsWeapon",
          "modifierType": "DamageBonus",
          "value": 2
        },
        {
          "type": "ConditionalModifier",
          "condition": "TargetIsArmor",
          "modifierType": "DefenseBonus",
          "value": 1
        }
      ]
    },
    {
      "abilityId": "read-the-marks",
      "displayName": "Read the Marks",
      "specializationId": "Runasmidr",
      "tier": 1,
      "type": "Passive",
      "description": "Automatically identify Jötun technology without requiring Perception or Lore checks.",
      "effects": [
        {
          "type": "AutoIdentify",
          "targetCategory": "JotunTechnology"
        }
      ]
    },
    {
      "abilityId": "runestone-ward",
      "displayName": "Runestone Ward",
      "specializationId": "Runasmidr",
      "tier": 1,
      "type": "Active",
      "apCost": 2,
      "resourceCost": {
        "resourceId": "rune-charges",
        "amount": 1
      },
      "description": "Create a defensive ward that absorbs up to 10 damage. Only one ward active at a time.",
      "effects": [
        {
          "type": "CreateWard",
          "absorption": 10,
          "maxActive": 1
        }
      ]
    },
    {
      "abilityId": "empowered-inscription",
      "displayName": "Empowered Inscription",
      "specializationId": "Runasmidr",
      "tier": 2,
      "type": "Active",
      "apCost": 4,
      "resourceCost": {
        "resourceId": "rune-charges",
        "amount": 2
      },
      "duration": 10,
      "durationUnit": "Turns",
      "description": "Inscribe a weapon with elemental power, adding +1d6 damage of chosen element (Fire, Cold, Lightning, or Aetheric).",
      "requirements": {
        "targetType": ["Weapon"]
      },
      "choices": [
        {
          "choiceId": "element",
          "options": ["Fire", "Cold", "Lightning", "Aetheric"]
        }
      ],
      "effects": [
        {
          "type": "ElementalDamageBonus",
          "dice": "1d6",
          "damageType": "$choice:element"
        }
      ]
    },
    {
      "abilityId": "runic-trap",
      "displayName": "Runic Trap",
      "specializationId": "Runasmidr",
      "tier": 2,
      "type": "Active",
      "apCost": 3,
      "resourceCost": {
        "resourceId": "rune-charges",
        "amount": 2
      },
      "duration": 60,
      "durationUnit": "Minutes",
      "description": "Place a hidden runic trap in an adjacent space. When an enemy enters, deals 3d6 damage. Maximum 3 traps active.",
      "requirements": {
        "targetSpace": "Adjacent",
        "maxActive": 3
      },
      "effects": [
        {
          "type": "CreateTrap",
          "trigger": "EnemyEnters",
          "damage": "3d6",
          "detectionDc": 14,
          "visibleToAllies": true
        }
      ]
    },
    {
      "abilityId": "dvergr-techniques",
      "displayName": "Dvergr Techniques",
      "specializationId": "Runasmidr",
      "tier": 2,
      "type": "Passive",
      "description": "Your mastery of Dvergr methods reduces all crafting costs by 20%.",
      "effects": [
        {
          "type": "CraftingCostModifier",
          "percentage": -20
        },
        {
          "type": "CraftingTimeModifier",
          "percentage": -20
        }
      ]
    },
    {
      "abilityId": "master-scrivener",
      "displayName": "Master Scrivener",
      "specializationId": "Runasmidr",
      "tier": 3,
      "type": "Passive",
      "description": "Your runes are inscribed with such precision that they last twice as long.",
      "effects": [
        {
          "type": "RuneDurationMultiplier",
          "multiplier": 2.0
        }
      ]
    },
    {
      "abilityId": "living-runes",
      "displayName": "Living Runes",
      "specializationId": "Runasmidr",
      "tier": 3,
      "type": "Active",
      "apCost": 4,
      "resourceCost": {
        "resourceId": "rune-charges",
        "amount": 3
      },
      "duration": 5,
      "durationUnit": "Turns",
      "description": "Summon 2 Living Rune entities that attack the nearest enemy each turn. Each has 10 HP, +4 Attack, deals 1d8 damage.",
      "effects": [
        {
          "type": "SummonEntity",
          "entityType": "LivingRune",
          "count": 2,
          "stats": {
            "hp": 10,
            "defense": 12,
            "attackBonus": 4,
            "damage": "1d8",
            "movement": 4,
            "behavior": "Aggressive"
          }
        }
      ]
    },
    {
      "abilityId": "word-of-unmaking",
      "displayName": "Word of Unmaking",
      "specializationId": "Runasmidr",
      "tier": "capstone",
      "type": "Ultimate",
      "apCost": 5,
      "resourceCost": {
        "resourceId": "rune-charges",
        "amount": 4
      },
      "range": 4,
      "rangeType": "Radius",
      "cooldown": "Combat",
      "description": "Speak the Word of Unmaking, dispelling ALL magical effects within 4 spaces. Affects allies and enemies equally. Usable once per combat.",
      "effects": [
        {
          "type": "DispelArea",
          "radius": 4,
          "targetsAllies": true,
          "targetsEnemies": true,
          "destroysSummons": true
        }
      ]
    }
  ]
}
```

---

## Estimated Effort Summary

| Phase | New Files | Modified Files | Est. Tests | Complexity |
|-------|-----------|----------------|------------|------------|
| v0.20.2a | ~6 | ~3 | ~10 | Medium |
| v0.20.2b | ~4 | ~2 | ~8 | High |
| v0.20.2c | ~3 | ~2 | ~7 | High |
| **Total** | **~13** | **~7** | **~25** | |

---

## Risk Assessment

| Risk | Impact | Probability | Mitigation |
|------|--------|-------------|------------|
| Rune stacking exploits | Medium | Medium | One rune per item limit, clear override rules |
| Trap detection balance | Medium | Low | DC 14 is standard, test with various Perception values |
| Living Runes AI complexity | High | Medium | Simple "attack nearest" behavior, no pathfinding |
| Word of Unmaking too powerful | Medium | Low | Once per combat, affects allies too |
| Crafting integration complexity | Medium | Medium | Use existing crafting hooks from v0.17.x |

---

## Design Decisions (Confirmed)

### Rune Charges

| Decision | Value | Notes |
|----------|-------|-------|
| **Max Charges** | 5 | More than Skjaldmær to reflect crafting focus |
| **Generation Method** | Crafting + Rest | Encourages using crafting system |
| **Standard Craft Generation** | 1 charge | Baseline regeneration |
| **Complex Craft Generation** | 2 charges | Rewards difficult crafting |

### Ability Balance

| Decision | Value | Notes |
|----------|-------|-------|
| **Inscribe Rune Bonus** | +2 damage / +1 Defense | Meaningful but not overwhelming |
| **Runestone Ward Absorption** | 10 damage | One or two hits of protection |
| **Empowered Inscription** | +1d6 elemental | Significant damage increase |
| **Runic Trap Damage** | 3d6 | Rewards setup |
| **Living Runes Count** | 2 entities | Action economy balanced |
| **Word of Unmaking Radius** | 4 spaces | Large enough to matter, requires positioning |

### Rune Duration

| Decision | Value | Notes |
|----------|-------|-------|
| **Base Duration** | 10 turns | Full combat encounter |
| **Master Scrivener Multiplier** | 2x | 20 turns = multiple encounters |
| **Trap Duration** | 1 hour (2 with MS) | Long enough for dungeon exploration |

---

## Unit Test Specifications

### v0.20.2a Tests (~10 tests)

#### RuneChargeResourceTests.cs

```csharp
[TestFixture]
public class RuneChargeResourceTests
{
    [Test]
    public void Create_InitializesWithMaxCharges();

    [Test]
    public void Spend_SufficientCharges_ReturnsTrue();

    [Test]
    public void Spend_InsufficientCharges_ReturnsFalse();

    [Test]
    public void GenerateFromCrafting_StandardCraft_AddsOneCharge();

    [Test]
    public void GenerateFromCrafting_ComplexCraft_AddsTwoCharges();
}
```

#### RunasmidrAbilityServiceTests.cs

```csharp
[TestFixture]
public class RunasmidrAbilityServiceTests
{
    [Test]
    public void InscribeRune_Weapon_AddsDamageBonus();

    [Test]
    public void InscribeRune_Armor_AddsDefenseBonus();

    [Test]
    public void ReadTheMarks_JotunTech_AutoIdentifies();

    [Test]
    public void RunestoneWard_AbsorbsDamage();

    [Test]
    public void RunestoneWard_DestroyedWhenDepleted();
}
```

### v0.20.2b Tests (~8 tests)

#### Tier2AbilityTests.cs

```csharp
[TestFixture]
public class Tier2AbilityTests
{
    [Test]
    public void EmpoweredInscription_AddsElementalDamage();

    [Test]
    public void EmpoweredInscription_AllowsElementChoice();

    [Test]
    public void RunicTrap_DealsCorrectDamage();

    [Test]
    public void RunicTrap_IsInvisibleToEnemies();

    [Test]
    public void RunicTrap_MaxThreeActive();

    [Test]
    public void DvergrTechniques_ReducesCraftingCost();

    [Test]
    public void DvergrTechniques_ReducesCraftingTime();

    [Test]
    public void Tier2_LockedUntil8PPInvested();
}
```

### v0.20.2c Tests (~7 tests)

#### Tier3AndCapstoneTests.cs

```csharp
[TestFixture]
public class Tier3AndCapstoneTests
{
    [Test]
    public void MasterScrivener_DoublesRuneDuration();

    [Test]
    public void LivingRunes_SummonsTwoEntities();

    [Test]
    public void LivingRunes_EntitiesHaveCorrectStats();

    [Test]
    public void LivingRunes_AttackNearestEnemy();

    [Test]
    public void WordOfUnmaking_DispelsAllEffects();

    [Test]
    public void WordOfUnmaking_AffectsAlliesAndEnemies();

    [Test]
    public void WordOfUnmaking_OncePerCombat();
}
```

---

## Integration Points

### With v0.20.1 Systems

| System | Integration Point |
|--------|-------------------|
| Specialization ability patterns | Follows established structure |
| Special resource patterns | RuneCharges follows BlockCharges pattern |

### With Core Systems

| System | Integration Point |
|--------|-------------------|
| Crafting System (v0.17.x) | Rune Charge generation, cost reduction |
| Combat System | Damage bonuses, trap triggers, Living Runes |
| Status Effect System | Buff/debuff dispelling |
| Perception System (v0.15.6) | Auto-identification integration |

### Provides to Future Versions

| Provides | Consumer |
|----------|----------|
| Rune inscription pattern | Future enchantment systems |
| Trap placement system | Other trap-using specializations |
| Summoned entity pattern | Living Runes pattern for other summons |
| Area dispel pattern | Future anti-magic abilities |

---

## Deliverable Checklist

### Domain Layer

- [ ] `RuneChargeResource` value object
- [ ] `InscribedRune` value object
- [ ] `RunestoneWard` value object
- [ ] `EmpoweredRune` value object
- [ ] `RunicTrap` value object
- [ ] `LivingRuneEntity` value object
- [ ] `RuneType` enum
- [ ] `RunasmidrAbilityId` enum
- [ ] `TrapTriggerType` enum

### Application Layer

- [ ] `RuneChargeService` implementation
- [ ] `RunasmidrAbilityService` implementation
- [ ] Inscribe Rune ability handler
- [ ] Read the Marks passive integration
- [ ] Runestone Ward ability handler
- [ ] Empowered Inscription ability handler
- [ ] Runic Trap ability handler
- [ ] Dvergr Techniques passive integration
- [ ] Master Scrivener passive integration
- [ ] Living Runes ability handler
- [ ] Word of Unmaking ability handler

### Infrastructure Layer

- [ ] `specializations.json` Rúnasmiðr entry
- [ ] `abilities.json` Rúnasmiðr abilities (9 total)

### Tests

- [ ] RuneChargeResourceTests.cs (~5 tests)
- [ ] RunasmidrAbilityServiceTests.cs (~5 tests)
- [ ] Tier2AbilityTests.cs (~8 tests)
- [ ] Tier3AndCapstoneTests.cs (~7 tests)

---

## Next Steps

1. **Review & Approve** - Confirm scope breakdown with stakeholders
2. **v0.20.2a Design Spec** - Create detailed design specification for Tier 1
3. **Implement v0.20.2a** - Build Rune Charges and Tier 1 abilities
4. **v0.20.2b Design Spec** - Create detailed design specification for Tier 2
5. **Implement v0.20.2b** - Build Tier 2 abilities
6. **v0.20.2c Design Spec** - Create detailed design specification for Tier 3 & Capstone
7. **Implement v0.20.2c** - Build Tier 3 abilities and Word of Unmaking
8. **Proceed to v0.20.3** - Jötun-Reader specialization

---

*This scope breakdown provides a structured approach to implementing the Rúnasmiðr specialization. Each sub-phase builds on the previous, allowing for incremental development and testing of the crafting-focused runesmith archetype.*
