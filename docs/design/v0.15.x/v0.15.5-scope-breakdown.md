## v0.15.5 - Wasteland Survival Skill Expansion

**Focus:** Extended tracking, foraging systems, navigation, hazard detection, and scavenger sign reading

**Source Specification:** [wasteland-survival.md](../../aethelgard/design/01-core/skills/wasteland-survival.md)

### Overview

This version transforms Wasteland Survival from simple checks into a comprehensive exploration system. Characters can track targets across multiple phases, forage for resources with time-based yields, navigate treacherous terrain, detect environmental hazards, and interpret scavenger territorial markers.

---

### Deliverables Summary

| Category | Items | Estimated Tests |
|----------|-------|-----------------|
| Enums | 5 | 5 |
| Value Objects | 8 | 10 |
| Entities | 3 | 6 |
| Services | 4 | 4 |
| **Total** | **20** | **~25** |

---

### v0.15.5a - Extended Tracking System

#### TrailAge Enum
```
TrailAge
├── Obvious (DC 8) - Caravan through ash
├── Fresh (DC 12) - < 1 hour
├── Standard (DC 16) - 2-8 hours
├── Old (DC 20) - 12-24 hours
├── Obscured (DC 24) - Deliberately hidden
├── Cold (DC 28) - 24-48 hours (Master only)
```

#### TrackingPhase Enum
```
TrackingPhase
├── Acquisition - Find initial trail
├── Pursuit - Maintain trail over distance
├── ClosingIn - Pinpoint target location
├── Lost - Trail lost, need recovery
├── Cold - Trail gone cold
```

#### TrackingState Entity
```
TrackingState
├── TrackingId: string
├── TrackerId: string
├── TargetDescription: string
├── CurrentPhase: TrackingPhase
├── TrailAge: TrailAge
├── DistanceCovered: float (miles)
├── CumulativeDcModifier: int
├── CheckHistory: List<TrackingCheck>
├── TerrainHistory: List<TerrainType>
└── Status: TrackingStatus enum
```

#### TrackingModifiers Value Object
| Condition | Modifier |
|-----------|----------|
| Blood trail | -4 DC |
| Rain (recent) | +4 DC |
| Multiple targets | -2 DC |
| Single careful target | +2 DC |
| Fresh blood/injury | -2 DC per check |
| Each hour passed | +1 DC |
| Target deliberately hiding | +2 DC |

**Phase 1: Acquisition (First Check)**
- [ ] Search area for signs (base DC by age)
- [ ] Identify trail type (automatic if step 1 succeeds)
- [ ] Determine direction (automatic)
- [ ] Estimate target count (DC 10 contested)
- [ ] Estimate trail age (DC 12)
- [ ] Failure: May retry after 10 min at DC +2
- [ ] 3 failures: Trail unfindable

**Phase 2: Pursuit (Subsequent Checks)**

Check frequency by terrain:
| Terrain | Check Every |
|---------|-------------|
| Open wasteland | 2 miles |
| Moderate ruins | 1 mile |
| Dense ruins | 0.5 miles |
| Labyrinthine | Every room/intersection |

**Phase 3: Closing In (Final Check)**
| Distance to Target | DC Modifier | Notes |
|-------------------|-------------|-------|
| Within 500 ft | -4 DC | Target may detect pursuit |
| Within 100 ft | -6 DC | Contested vs. target Perception |
| Within 50 ft | Auto-success | Immediate encounter |

**Trail Recovery:**
| Loss Type | Recovery Action | Time Cost | New DC |
|-----------|-----------------|-----------|--------|
| Partial | Backtrack, careful search | 10 min | Same |
| Full | Spiral search pattern | 30 min | +4 |
| Critical | Return to last known | 1 hour | +8 or new lead |

**Unit Tests (~4):**
- [ ] Trail age sets correct DC
- [ ] Modifiers accumulate correctly
- [ ] Phase transitions work properly
- [ ] Recovery procedures apply correct DC

---

### v0.15.5b - Counter-Tracking System

#### ConcealmentTechnique Enum
```
ConcealmentTechnique
├── HardSurfaces (+2 bonus, no time cost)
├── BrushTracks (+4 bonus, +50% travel time)
├── FalseTrail (+6 bonus, +100% travel time)
├── WaterCrossing (+8 bonus, requires water)
├── Backtracking (+4 bonus, +25% travel time)
```

#### CounterTrackingContext Value Object
- [ ] `ConcealerId` - Who is hiding trail
- [ ] `TechniquesUsed` - List of techniques
- [ ] `TotalBonus` - Combined concealment bonus
- [ ] `TimeMultiplier` - Travel time penalty

**Counter-Tracking Logic:**
- [ ] Concealer rolls Wasteland Survival
- [ ] Result becomes DC for tracker
- [ ] Techniques add bonus to concealment roll
- [ ] Multiple techniques stack

**Unit Tests (~2):**
- [ ] Technique bonuses apply correctly
- [ ] Contested concealment resolves

---

### v0.15.5c - Foraging System

#### SearchDuration Enum
```
SearchDuration
├── Quick (10 min, +0)
├── Thorough (1 hour, +2d10)
├── Complete (4 hours, +4d10)
```

#### ForageTarget Enum
```
ForageTarget
├── CommonSalvage (DC 10, 2d10 scrap)
├── UsefulSupplies (DC 14, 1d6 rations)
├── ValuableComponents (DC 18, 1d4 components)
├── HiddenCache (DC 22, 1d100 Marks + items)
```

#### ForagingContext Value Object
- [ ] `BiomeId` - Current biome
- [ ] `SearchDuration` - Time invested
- [ ] `EquipmentBonus` - Survival kit, etc.
- [ ] `PreviousSearches` - Already searched this area?

#### ForagingResult Value Object
- [ ] `SuccessLevel` - Number of successes
- [ ] `ScrapYield` - Amount of scrap
- [ ] `RationsYield` - Amount of rations
- [ ] `ComponentsYield` - Rare components found
- [ ] `CacheFound` - Hidden cache discovered
- [ ] `BiomeSpecificItems` - Special finds

**Yield Table:**
| Successes | Common Salvage | Useful Supplies | Rare Components |
|-----------|----------------|-----------------|-----------------|
| 2-3 | 2d10 scrap | — | — |
| 4-5 | 3d10 scrap | 1d6 rations | — |
| 6-7 | 4d10 scrap | 1d6 rations | 1 component |
| 8+ | 5d10 scrap | 2d6 rations | 1d4 components |

**Hidden Cache Discovery:**
- [ ] Any rolled 10 triggers cache check
- [ ] Cache contains: 1d100 Marks + random item

**Economy Balance:**
| Search Type | Avg Yield | Time Cost | Value/Hour |
|-------------|-----------|-----------|------------|
| Quick | ~8 scrap | 0.16 hr | ~48 scrap/hr |
| Thorough | ~15 scrap + chance | 1.0 hr | ~20 value/hr |
| Complete | ~25 scrap + high chance | 4.0 hr | ~15 value/hr |

**Unit Tests (~3):**
- [ ] Search duration applies correct bonus
- [ ] Yield matches success level
- [ ] Cache discovery triggers on 10s

---

### v0.15.5d - Navigation System

#### TerrainType Enum
```
TerrainType
├── OpenWasteland (DC 8)
├── ModerateRuins (DC 12)
├── DenseRuins (DC 16)
├── Labyrinthine (DC 20)
├── GlitchedLabyrinth (DC 24)
```

#### NavigationContext Value Object
- [ ] `TerrainType` - Current terrain
- [ ] `Destination` - Where trying to go
- [ ] `HasCompass` - Working compass (+1d10)
- [ ] `FamiliarTerritory` - Known area (+2d10)
- [ ] `WeatherConditions` - Visibility modifiers

**Navigation Modifiers:**
| Condition | Modifier |
|-----------|----------|
| Good visibility | +1d10 |
| Night (no light) | -2d10 |
| Static Storm | -4d10 |
| Working compass | +1d10 |
| Familiar territory | +2d10 |

**Navigation Failure:**
- [ ] Failure: Get lost, time penalty
- [ ] Fumble: Enter dangerous area

**Unit Tests (~2):**
- [ ] Terrain sets correct DC
- [ ] Equipment modifiers apply

---

### v0.15.5e - Hazard Detection System

#### HazardType Enum
```
HazardType
├── ObviousDanger (DC 8, minor damage)
├── HiddenPit (DC 12, 2d10 fall)
├── ToxicZone (DC 16, poison 3 rounds)
├── GlitchPocket (DC 20, random effect)
├── AmbushSite (DC 16, surprise attack)
```

#### HazardDetectionResult Value Object
- [ ] `HazardDetected` - Was it found
- [ ] `HazardType` - What kind
- [ ] `AvoidanceOptions` - Ways around
- [ ] `ConsequenceIfMissed` - What happens

**Detection Methods:**
- [ ] Passive Perception: High-WITS automatic hints
- [ ] Active `investigate`: Formally identifies hazard
- [ ] Area sweep: Multiple hazards in area

**Consequence Table:**
| Hazard | Consequence if Missed |
|--------|----------------------|
| Obvious danger | Minor damage |
| Hidden pit | 2d10 fall damage |
| Toxic zone | Poison (3 rounds) |
| Glitch pocket | Random effect |
| Ambush site | Surprise attack |

**Unit Tests (~2):**
- [ ] Hazard type sets correct DC
- [ ] Missed hazard applies consequence

---

### v0.15.5f - Scavenger Sign Reading

#### ScavengerSign Value Object
- [ ] `SignType` - Marker classification
- [ ] `FactionId` - Who left it
- [ ] `Meaning` - What it indicates
- [ ] `Age` - How old is the sign
- [ ] `InterpretationDc` - Difficulty to read

**Sign Types:**
| Sign | Meaning | DC |
|------|---------|-----|
| Territory marker | Faction boundary | 10 |
| Warning sign | Danger ahead | 12 |
| Cache indicator | Hidden supplies | 14 |
| Trail blaze | Safe path | 10 |
| Hunt marker | Prey location | 14 |
| Taboo sign | Forbidden area | 12 |

**Interpretation Logic:**
- [ ] Success: Understand meaning
- [ ] Critical: Additional context
- [ ] Failure: Misinterpret or miss
- [ ] Unknown faction: +4 DC

**Unit Tests (~2):**
- [ ] Sign type sets correct DC
- [ ] Unknown faction increases DC

---

### v0.15.5g - Scout Action

#### ScoutResult Value Object
- [ ] `RoomsRevealed` - Adjacent rooms shown
- [ ] `EnemiesDetected` - Hostile presence
- [ ] `HazardsDetected` - Environmental dangers
- [ ] `PointsOfInterest` - Notable features

**Scout Logic:**
- [ ] Base reveals 1 adjacent room
- [ ] +1 room per 2 successes above DC
- [ ] Also reveals enemies and hazards in scouted rooms

**Unit Tests (~2):**
- [ ] Scout reveals correct number of rooms
- [ ] Enemies and hazards detected

---

### v0.15.5h - Specialization Integration

#### Veiðimaðr (Hunter) Abilities
- [ ] `[Beast Tracker]` - +2d10 tracking living creatures
- [ ] `[Predator's Eye]` - Identify creature weaknesses from tracks
- [ ] `[Hunting Grounds]` - Mark area, +2d10 all checks in marked zone

#### Myr-Stalker Abilities
- [ ] `[Swamp Navigator]` - +1d10 in swamp/marsh terrain
- [ ] `[Toxin Resistance]` - Advantage on poison hazard saves
- [ ] `[Mire Knowledge]` - Identify safe paths through bog

#### Gantry-Runner Abilities
- [ ] `[Urban Navigator]` - +1d10 in industrial ruins
- [ ] `[Rooftop Routes]` - Find elevated paths
- [ ] `[Scrap Familiar]` - +1d10 foraging in ruins

**Unit Tests (~2):**
- [ ] Veiðimaðr bonus applies to creature tracking
- [ ] Terrain specialization bonuses apply

---

### v0.15.5i - Exploration Synergies

#### Combined Skill Checks
| Situation | Primary | Secondary |
|-----------|---------|-----------|
| Find hidden path | Navigation | Acrobatics (traverse) |
| Track to lair | Tracking | System Bypass (enter) |
| Avoid patrol | Hazard Detection | Acrobatics (Stealth) |
| Find and loot | Foraging | System Bypass (locked) |

**Unit Tests (~2):**
- [ ] Combined checks use correct skills
- [ ] Secondary check follows primary success

---

### Configuration Files

| File | Purpose |
|------|---------|
| `trail-ages.json` | Trail age classifications |
| `tracking-modifiers.json` | Condition modifiers |
| `foraging-yields.json` | Yield tables by biome |
| `terrain-types.json` | Navigation DCs |
| `hazard-types.json` | Hazard definitions |
| `scavenger-signs.json` | Sign type definitions |
| `wasteland-survival-descriptors.json` | Voice guidance text |

---

### Dependencies

**Requires:**
- v0.15.0: Dice pool refactor (success-counting, fumble/critical detection)
- v0.15.1: Skill infrastructure (SkillContext, SkillOutcome, FumbleConsequence)
- v0.10.x: Status effects (poison)
- Biome system: Location-specific yields

**Provides to:**
- Exploration mechanics
- Resource gathering
- Combat encounter setup (ambush detection)

---

### Acceptance Criteria

- [ ] Multi-phase tracking works correctly
- [ ] Trail age modifiers accumulate
- [ ] Trail recovery procedures function
- [ ] Counter-tracking creates contested DC
- [ ] Foraging yields scale with success
- [ ] Search duration provides correct bonus
- [ ] Hidden cache triggers on 10s
- [ ] Navigation uses terrain-based DCs
- [ ] Hazard detection prevents consequences
- [ ] Scavenger signs interpretable
- [ ] Scout reveals correct information
- [ ] Specialization abilities function
- [ ] ~25 unit tests pass
