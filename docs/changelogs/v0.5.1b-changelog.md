# v0.5.1b Changelog: Ranged Weapons

**Version:** 0.5.1b  
**Phase:** Ranged Weapons  
**Date:** 2026-01-14  
**Status:** ✅ Complete

---

## Summary

Implements ranged weapon mechanics: minimum range prevents shooting adjacent enemies, optimal range has no penalty, long range applies graduated accuracy penalties.

---

## Added

### Domain Layer - Item

| Property | Description |
|----------|-------------|
| `MinRange` | Minimum attack range (0 = no minimum) |
| `OptimalRange` | Range with no penalty (null = Range/2) |
| `RangePenalty` | Penalty per cell beyond optimal |
| `Thrown` | Weapon can be thrown |
| `TwoHanded` | Requires both hands |
| `MeleeCapable` | Thrown weapon usable in melee |
| `RequiresAmmunition` | Needs ammo (display only) |
| `GetOptimalRange()` | Returns effective optimal range |
| `GetPenaltyAtDistance()` | Returns accuracy penalty |

### Domain Layer - AbilityDefinition

| Property | Description |
|----------|-------------|
| `MinRange` | Minimum ability range |
| `OptimalRange` | Range with no penalty |
| `RangePenalty` | Penalty per cell beyond optimal |
| `GetOptimalRange()` | Returns effective optimal range |
| `GetPenaltyAtDistance()` | Returns penalty at distance |

### Application Layer - IRangeService

| Method | Description |
|--------|-------------|
| `CheckFullRange()` | Full validation with penalty |
| `GetRangePenalty()` | Penalty calculation |
| `GetAbilityRangePenalty()` | Ability penalty |
| `IsTooClose()` | Min range check |

### Application Layer - RangeCheckResult

| Property | Description |
|----------|-------------|
| `Penalty` | Accuracy penalty at distance |
| `IsOptimal` | True if in optimal range |
| `TooClose` | True if within min range |

---

## Range Zone Model

```
|--TOO CLOSE--|--OPTIMAL--|--LONG RANGE--|--OUT--|
   <minRange    <=optimal   <=maxRange    >max
   (MaxValue)   (0 penalty)  (penalty)   (MaxValue)
```

---

## Test Results

| Category | Tests |
|----------|-------|
| Domain | 1,379 (15 new) |
| Application | 545 (11 new) |
| **Total new** | **26** |

---

## Next Steps

- **v0.5.1c** — Line of Sight
