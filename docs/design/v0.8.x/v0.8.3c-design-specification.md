# v0.8.3c Design Specification: Combat Summary

**Version:** 0.8.3c
**Parent:** v0.8.3 (Combat Enhancement)
**Prerequisites:** v0.8.3b Complete (Overlay Refinement)
**Status:** Design Complete
**Estimated Unit Tests:** ~10

---

## 1. Overview

### Purpose

Implement an end-of-combat summary window displaying victory/defeat status, rewards earned (XP, gold, items), combat statistics, and level-up notifications. Provides satisfying closure to combat encounters with "Collect All" and action buttons.

### Key Deliverables

| Category | Items |
|----------|-------|
| **Windows** | `CombatSummaryWindow` |
| **ViewModels** | `CombatSummaryViewModel`, `LootItemViewModel`, `CombatStatisticsViewModel`, `LevelUpBonusViewModel` |
| **Value Objects** | `CombatStatistics` |
| **Animations** | Victory celebration, defeat fade |
| **Styles** | `CombatSummaryStyles.axaml` |
| **Tests** | ~10 unit tests |

---

## 2. Feature Overview

```
v0.8.3c Features
â”œâ”€â”€ CombatSummaryWindow (Modal)
â”‚   â”œâ”€â”€ Victory / Defeat header
â”‚   â”œâ”€â”€ Enemies defeated list
â”‚   â”œâ”€â”€ Rewards section
â”‚   â”‚   â”œâ”€â”€ XP earned
â”‚   â”‚   â”œâ”€â”€ Gold earned
â”‚   â”‚   â””â”€â”€ Loot items
â”‚   â”œâ”€â”€ Level-up notification (inline)
â”‚   â”œâ”€â”€ Combat statistics
â”‚   â””â”€â”€ Action buttons
â”‚
â”œâ”€â”€ Victory Screen
â”‚   â”œâ”€â”€ "âš” VICTORY! âš”" header
â”‚   â”œâ”€â”€ All reward sections
â”‚   â”œâ”€â”€ Collect All (C) button
â”‚   â””â”€â”€ Continue button
â”‚
â”œâ”€â”€ Defeat Screen
â”‚   â”œâ”€â”€ "ğŸ’€ DEFEAT ğŸ’€" header
â”‚   â”œâ”€â”€ Statistics only
â”‚   â”œâ”€â”€ Load Last Save button
â”‚   â”œâ”€â”€ Return to Menu button
â”‚   â””â”€â”€ Retry button
â”‚
â”œâ”€â”€ Combat Statistics
â”‚   â”œâ”€â”€ Rounds taken
â”‚   â”œâ”€â”€ Damage dealt / taken
â”‚   â”œâ”€â”€ Critical hits landed
â”‚   â”œâ”€â”€ Abilities used
â”‚   â””â”€â”€ Items used
â”‚
â””â”€â”€ Level-Up Notification
    â”œâ”€â”€ New level display
    â”œâ”€â”€ Stat increases
    â””â”€â”€ Abilities unlocked
```

---

## 3. Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       PRESENTATION LAYER                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Windows                                                                â”‚
â”‚  â””â”€â”€ CombatSummaryWindow : Window                                      â”‚
â”‚       â”œâ”€â”€ Victory/Defeat Header                                        â”‚
â”‚       â”œâ”€â”€ Enemies Defeated List                                        â”‚
â”‚       â”œâ”€â”€ Rewards Panel (XP, Gold, Loot)                               â”‚
â”‚       â”œâ”€â”€ Level-Up Panel (conditional)                                 â”‚
â”‚       â”œâ”€â”€ Statistics Panel                                             â”‚
â”‚       â””â”€â”€ Action Buttons                                               â”‚
â”‚                                                                         â”‚
â”‚  ViewModels                                                             â”‚
â”‚  â”œâ”€â”€ CombatSummaryViewModel                                            â”‚
â”‚  â”‚    â”œâ”€â”€ bool IsVictory                                               â”‚
â”‚  â”‚    â”œâ”€â”€ ObservableCollection<string> DefeatedEnemies                 â”‚
â”‚  â”‚    â”œâ”€â”€ int XpEarned, int GoldEarned                                 â”‚
â”‚  â”‚    â”œâ”€â”€ ObservableCollection<LootItemViewModel> Loot                 â”‚
â”‚  â”‚    â”œâ”€â”€ CombatStatisticsViewModel Statistics                         â”‚
â”‚  â”‚    â”œâ”€â”€ bool DidLevelUp, int NewLevel                                â”‚
â”‚  â”‚    â”œâ”€â”€ ObservableCollection<LevelUpBonusViewModel> LevelUpBonuses   â”‚
â”‚  â”‚    â””â”€â”€ Commands: CollectAll, Continue, LoadSave, ReturnToMenu       â”‚
â”‚  â”œâ”€â”€ LootItemViewModel                                                 â”‚
â”‚  â”œâ”€â”€ CombatStatisticsViewModel                                         â”‚
â”‚  â””â”€â”€ LevelUpBonusViewModel                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. CombatSummaryWindow

**File:** `src/Presentation/RuneAndRust.Avalonia/Views/CombatSummaryWindow.axaml`

```xml
<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:RuneAndRust.Avalonia.ViewModels"
        x:Class="RuneAndRust.Avalonia.Views.CombatSummaryWindow"
        x:DataType="vm:CombatSummaryViewModel"
        Title="Combat Summary" Width="550" Height="600"
        WindowStartupLocation="CenterOwner" CanResize="False">
    
    <Grid RowDefinitions="Auto,*,Auto">
        <!-- Header: Victory/Defeat -->
        <Border Grid.Row="0" Classes="summary-header" Padding="20">
            <TextBlock Text="{Binding HeaderText}" Classes="header-title" HorizontalAlignment="Center" />
        </Border>
        
        <!-- Main Content -->
        <ScrollViewer Grid.Row="1" Padding="20">
            <StackPanel Spacing="16">
                <!-- Enemies Defeated (Victory only) -->
                <Border Classes="section" IsVisible="{Binding IsVictory}" Padding="12">
                    <StackPanel>
                        <TextBlock Text="ENEMIES DEFEATED" Classes="section-title" />
                        <ItemsControl ItemsSource="{Binding DefeatedEnemies}" Margin="0,8,0,0">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate><TextBlock Text="{Binding}" Classes="enemy-item" /></DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </Border>
                
                <!-- Rewards (Victory only) -->
                <Border Classes="section" IsVisible="{Binding IsVictory}" Padding="12">
                    <StackPanel>
                        <TextBlock Text="REWARDS" Classes="section-title" />
                        <StackPanel Margin="0,8,0,0" Spacing="4">
                            <TextBlock Text="{Binding XpText}" Classes="reward-line" />
                            
                            <!-- Level Up Panel -->
                            <Border Classes="level-up-panel" IsVisible="{Binding DidLevelUp}" Margin="0,8" Padding="12">
                                <StackPanel>
                                    <TextBlock Text="{Binding LevelUpText}" Classes="level-up-title" />
                                    <ItemsControl ItemsSource="{Binding LevelUpBonuses}" Margin="0,8,0,0">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate DataType="vm:LevelUpBonusViewModel">
                                                <TextBlock Text="{Binding DisplayText}" Classes="bonus-line" />
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </StackPanel>
                            </Border>
                            
                            <TextBlock Text="{Binding GoldText}" Classes="reward-line" />
                            
                            <!-- Loot -->
                            <TextBlock Text="ğŸ“¦ LOOT:" Classes="loot-header" IsVisible="{Binding HasLoot}" Margin="0,8,0,4" />
                            <ItemsControl ItemsSource="{Binding Loot}" IsVisible="{Binding HasLoot}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate DataType="vm:LootItemViewModel">
                                        <TextBlock Text="{Binding DisplayText}" Classes="loot-item" />
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </StackPanel>
                </Border>
                
                <!-- Defeat Message -->
                <TextBlock Text="You have fallen in battle..." Classes="defeat-message"
                           IsVisible="{Binding !IsVictory}" HorizontalAlignment="Center" />
                
                <!-- Combat Statistics -->
                <Border Classes="section" Padding="12">
                    <StackPanel>
                        <TextBlock Text="COMBAT STATISTICS" Classes="section-title" />
                        <Grid ColumnDefinitions="*,*" Margin="0,8,0,0" RowDefinitions="Auto,Auto,Auto">
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="{Binding Statistics.RoundsText}" />
                            <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding Statistics.DamageDealtText}" />
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="{Binding Statistics.CriticalsText}" />
                            <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding Statistics.DamageTakenText}" />
                            <TextBlock Grid.Row="2" Grid.Column="0" Text="{Binding Statistics.AbilitiesText}" />
                            <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding Statistics.ItemsUsedText}" />
                        </Grid>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
        
        <!-- Action Buttons -->
        <Border Grid.Row="2" Classes="summary-footer" Padding="20">
            <!-- Victory Buttons -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="12" IsVisible="{Binding IsVictory}">
                <Button Content="Collect All (C)" Command="{Binding CollectAllCommand}" IsVisible="{Binding HasLoot}" />
                <Button Content="Continue" Command="{Binding ContinueCommand}" Classes="primary" />
            </StackPanel>
            <!-- Defeat Buttons -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="12" IsVisible="{Binding !IsVictory}">
                <Button Content="Load Last Save" Command="{Binding LoadSaveCommand}" />
                <Button Content="Return to Menu" Command="{Binding ReturnToMenuCommand}" />
                <Button Content="Retry" Command="{Binding RetryCommand}" Classes="primary" />
            </StackPanel>
        </Border>
    </Grid>
</Window>
```

---

## 5. ViewModels

### CombatSummaryViewModel

```csharp
namespace RuneAndRust.Avalonia.ViewModels;

public partial class CombatSummaryViewModel : ViewModelBase
{
    private readonly IGameSessionService _gameSession;
    private readonly IInventoryService _inventoryService;
    private readonly INavigationService _navigationService;
    private readonly ILogger<CombatSummaryViewModel> _logger;

    [ObservableProperty] private bool _isVictory;
    [ObservableProperty] private ObservableCollection<string> _defeatedEnemies = new();
    [ObservableProperty] private int _xpEarned;
    [ObservableProperty] private int _goldEarned;
    [ObservableProperty] private ObservableCollection<LootItemViewModel> _loot = new();
    [ObservableProperty] private CombatStatisticsViewModel _statistics = new();
    [ObservableProperty] private bool _didLevelUp;
    [ObservableProperty] private int _newLevel;
    [ObservableProperty] private ObservableCollection<LevelUpBonusViewModel> _levelUpBonuses = new();

    public string HeaderText => IsVictory ? "âš” VICTORY! âš”" : "ğŸ’€ DEFEAT ğŸ’€";
    public string XpText => $"âœ¨ Experience: +{XpEarned} XP";
    public string GoldText => $"ğŸ’° Gold: +{GoldEarned} gold";
    public string LevelUpText => $"ğŸ‰ LEVEL UP! You are now Level {NewLevel}!";
    public bool HasLoot => Loot.Count > 0;

    public CombatSummaryViewModel(CombatResult result, IGameSessionService gameSession,
        IInventoryService inventoryService, INavigationService navigationService, ILogger<CombatSummaryViewModel> logger)
    {
        _gameSession = gameSession;
        _inventoryService = inventoryService;
        _navigationService = navigationService;
        _logger = logger;
        LoadResult(result);
    }

    private void LoadResult(CombatResult result)
    {
        IsVictory = result.IsVictory;
        XpEarned = result.XpEarned;
        GoldEarned = result.GoldEarned;
        foreach (var enemy in result.DefeatedEnemies) DefeatedEnemies.Add($"â˜  {enemy}");
        foreach (var item in result.Loot) Loot.Add(new LootItemViewModel(item));
        Statistics = new CombatStatisticsViewModel(result.Statistics);
        if (result.LevelUp is not null)
        {
            DidLevelUp = true;
            NewLevel = result.LevelUp.NewLevel;
            foreach (var bonus in result.LevelUp.Bonuses) LevelUpBonuses.Add(new LevelUpBonusViewModel(bonus));
        }
        _logger.LogInformation("Combat summary: {Result}, XP={Xp}, Gold={Gold}", IsVictory ? "Victory" : "Defeat", XpEarned, GoldEarned);
    }

    [RelayCommand]
    private void CollectAll()
    {
        foreach (var item in Loot) _inventoryService.AddItem(item.Item);
        Loot.Clear();
        _logger.LogDebug("Collected all loot");
    }

    [RelayCommand]
    private void Continue() => _gameSession.EndCombatSummary();

    [RelayCommand]
    private void LoadSave() => _navigationService.LoadLastSave();

    [RelayCommand]
    private void ReturnToMenu() => _navigationService.GoToMainMenu();

    [RelayCommand]
    private void Retry() => _gameSession.RetryCombat();
}
```

### Supporting ViewModels

```csharp
public class LootItemViewModel
{
    public Item Item { get; }
    public string DisplayText => Item.Quantity > 1 ? $"â€¢ {Item.Name} (x{Item.Quantity})" : $"â€¢ {Item.Name}";
    public LootItemViewModel(Item item) => Item = item;
}

public class CombatStatisticsViewModel
{
    public int Rounds { get; }
    public int DamageDealt { get; }
    public int DamageTaken { get; }
    public int Criticals { get; }
    public int AbilitiesUsed { get; }
    public int ItemsUsed { get; }

    public string RoundsText => $"Rounds: {Rounds}";
    public string DamageDealtText => $"Damage Dealt: {DamageDealt}";
    public string DamageTakenText => $"Damage Taken: {DamageTaken}";
    public string CriticalsText => $"Criticals: {Criticals}";
    public string AbilitiesText => $"Abilities: {AbilitiesUsed}";
    public string ItemsUsedText => $"Items Used: {ItemsUsed}";

    public CombatStatisticsViewModel() { }
    public CombatStatisticsViewModel(CombatStatistics stats)
    {
        Rounds = stats.Rounds; DamageDealt = stats.DamageDealt; DamageTaken = stats.DamageTaken;
        Criticals = stats.Criticals; AbilitiesUsed = stats.AbilitiesUsed; ItemsUsed = stats.ItemsUsed;
    }
}

public class LevelUpBonusViewModel
{
    public string DisplayText { get; }
    public LevelUpBonusViewModel(LevelUpBonus bonus) => DisplayText = bonus.Type switch
    {
        LevelUpBonusType.StatIncrease => $"{bonus.StatName}: {bonus.OldValue} â†’ {bonus.NewValue} (+{bonus.NewValue - bonus.OldValue})",
        LevelUpBonusType.AbilityUnlocked => $"New Ability Unlocked: {bonus.AbilityName}",
        _ => bonus.Description
    };
}
```

---

## 6. Visual Designs

```
VICTORY SCREEN:
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   âš”  VICTORY!  âš”                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ENEMIES DEFEATED                                            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚   â˜  Skeleton Warrior                                        â”‚
â”‚   â˜  Goblin                                                  â”‚
â”‚   â˜  Goblin Archer                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ REWARDS                                                      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚   âœ¨ Experience: +125 XP                                     â”‚
â”‚   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚   â•‘  ğŸ‰ LEVEL UP! You are now Level 5!                    â•‘ â”‚
â”‚   â•‘  Max Health: 45 â†’ 50 (+5)                             â•‘ â”‚
â”‚   â•‘  New Ability Unlocked: Shield Bash                    â•‘ â”‚
â”‚   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚   ğŸ’° Gold: +45 gold                                          â”‚
â”‚   ğŸ“¦ LOOT:                                                   â”‚
â”‚      â€¢ Iron Sword                                            â”‚
â”‚      â€¢ Healing Potion                                        â”‚
â”‚      â€¢ Bone Fragment (x3)                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMBAT STATISTICS                                            â”‚
â”‚   Rounds: 5          Damage Dealt: 67                       â”‚
â”‚   Criticals: 2       Damage Taken: 23                       â”‚
â”‚   Abilities: 3       Items Used: 1                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

       [ Collect All (C) ]              [ Continue ]

DEFEAT SCREEN:
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   ğŸ’€ DEFEAT ğŸ’€                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

              You have fallen in battle...

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMBAT STATISTICS                                            â”‚
â”‚   Rounds: 8          Damage Dealt: 42                       â”‚
â”‚   Criticals: 1       Damage Taken: 65                       â”‚
â”‚   Abilities: 5       Items Used: 3                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  [ Load Last Save ]    [ Return to Menu ]    [ Retry ]
```

---

## 7. Styles

**File:** `src/Presentation/RuneAndRust.Avalonia/Styles/CombatSummaryStyles.axaml`

```xml
<Styles xmlns="https://github.com/avaloniaui" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Style Selector="TextBlock.header-title">
        <Setter Property="FontSize" Value="28" /><Setter Property="FontWeight" Value="Bold" />
        <Setter Property="Foreground" Value="Gold" />
    </Style>
    <Style Selector="Border.section">
        <Setter Property="Background" Value="{StaticResource SurfaceDarkBrush}" />
        <Setter Property="CornerRadius" Value="6" />
    </Style>
    <Style Selector="TextBlock.section-title">
        <Setter Property="FontWeight" Value="SemiBold" /><Setter Property="Foreground" Value="{StaticResource AccentBrush}" />
    </Style>
    <Style Selector="TextBlock.enemy-item">
        <Setter Property="Margin" Value="8,2,0,0" />
    </Style>
    <Style Selector="Border.level-up-panel">
        <Setter Property="Background" Value="{StaticResource SuccessDarkBrush}" />
        <Setter Property="BorderBrush" Value="Gold" /><Setter Property="BorderThickness" Value="2" />
        <Setter Property="CornerRadius" Value="4" />
    </Style>
    <Style Selector="TextBlock.level-up-title">
        <Setter Property="FontSize" Value="16" /><Setter Property="FontWeight" Value="Bold" />
        <Setter Property="Foreground" Value="Gold" />
    </Style>
    <Style Selector="TextBlock.defeat-message">
        <Setter Property="FontStyle" Value="Italic" /><Setter Property="Foreground" Value="{StaticResource MutedBrush}" />
    </Style>
    <Style Selector="Button.primary">
        <Setter Property="Background" Value="{StaticResource SuccessBrush}" />
    </Style>
</Styles>
```

---

## 8. Unit Testing Requirements (~10 tests)

| Feature | Tests |
|---------|-------|
| Victory header display | 1 |
| Defeat header display | 1 |
| XP/Gold text formatting | 1 |
| Loot display with quantity | 1 |
| Level-up panel visibility | 1 |
| Combat statistics display | 1 |
| CollectAll adds items | 1 |
| Continue closes window | 1 |
| Defeat buttons visibility | 1 |
| LoadSave/Retry navigation | 1 |

---

## 9. Acceptance Criteria

- [ ] Victory shows "âš” VICTORY! âš”" header
- [ ] Defeat shows "ğŸ’€ DEFEAT ğŸ’€" header
- [ ] Enemies defeated list displays
- [ ] XP earned shows with icon
- [ ] Gold earned shows with icon
- [ ] Loot items list with quantities
- [ ] Level-up panel shows when applicable
- [ ] Stat increases display correctly
- [ ] New abilities shown in level-up
- [ ] Combat statistics display all 6 metrics
- [ ] Collect All button adds loot to inventory
- [ ] Continue button closes summary
- [ ] Defeat shows Load/Menu/Retry buttons
- [ ] ~10 unit tests pass

---

## 10. Dependencies

| From | Required |
|------|----------|
| Domain | `CombatResult`, `CombatStatistics`, `LevelUpBonus` |
| Application | `IGameSessionService`, `IInventoryService`, `INavigationService` |
| v0.8.3a/b | Combat event patterns |

---

*Document Version: 1.0 | Last Updated: 2026-01-10*
