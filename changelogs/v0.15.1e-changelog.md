# Changelog v0.15.1e - Integration Points

## Overview

v0.15.1e connects the skill system infrastructure to three key game systems:
- **Trauma Economy** - Skill checks in corrupted areas inflict psychic stress
- **Specialization Bonuses** - Archetype-specific modifiers to skill checks
- **Voice Guidance** - Narrative descriptors for skill outcomes

---

## Added

### Domain Layer - Enums

- **`StressSource`** - Identifies stress origins: `None`, `Corruption`, `Fumble`, `CorruptedObject`, `ExtendedExposure`

### Domain Layer - Value Objects

- **`SkillStressResult`** - Tracks psychic stress with:
  - Corruption stress (0-10 based on tier)
  - Fumble bonus stress (1-8 based on tier)
  - Breaking point threshold detection (≥8)
  - Factory methods: `None()`, `FromCorruption()`, `FromFumble()`

- **`SpecializationSkillBonus`** - Tracks archetype skill bonuses with:
  - Dice pool and DC modifiers
  - Conditional bonus support
  - Special ability flags (e.g., `no-reputation-loss-on-failure`)

- **`SkillDescriptor`** - Voice guidance narrative text with:
  - Context awareness (corruption, surface, disposition)
  - Generic fallback generation
  - 6 descriptor categories

### Application Layer - Interfaces

- **`ITraumaIntegrationService`** - Stress calculation for:
  - Standard skill checks
  - Object interactions
  - Extended/chained checks

- **`ISpecializationBonusProvider`** - Bonus lookup with:
  - Conditional evaluation (biome, surface, equipment)
  - Special ability detection
  - Full specialization enumeration

- **`IVoiceGuidanceService`** - Descriptor selection with:
  - Context-priority selection
  - Pool size queries
  - Category availability checks

### Application Layer - Services

- **`TraumaIntegrationService`** - Implements stress calculations:
  - Normal: 0, Glitched: 2, Blighted: 5, Resonance: 10
  - Fumble bonus: Normal: 1, Glitched: 2, Blighted: 4, Resonance: 8

- **`SpecializationBonusProvider`** - 10 archetypes configured:
  - Gantry-Runner, Myrk-gengr, Thul, Skald, Kaupmaðr
  - Scrap-Tinker, Ruin-Stalker, Jötun-Reader, Veiðimaðr, Myr-Stalker

- **`VoiceGuidanceService`** - 4 skills with descriptors:
  - lockpicking, persuasion, climbing, stealth
  - Contextual variants for glitched, hostile, stable, etc.

### Configuration Files

- **`config/skill-descriptors.json`** - Voice guidance pools for 4 skills
- **`config/schemas/skill-descriptors.schema.json`** - JSON Schema validation
- **`config/specialization-bonuses.json`** - 10 specializations with bonuses
- **`config/schemas/specialization-bonuses.schema.json`** - JSON Schema validation

---

## Testing

### New Unit Tests (55 total)

**Value Objects:**
- `SkillStressResultTests` - 8 tests covering factory methods and stress calculations
- `SpecializationSkillBonusTests` - 8 tests covering conditions and display
- `SkillDescriptorTests` - 7 tests covering categories and fallbacks

**Services:**
- `TraumaIntegrationServiceTests` - 7 tests covering all corruption tiers
- `SpecializationBonusProviderTests` - 7 tests covering lookups and abilities
- `VoiceGuidanceServiceTests` - 8 tests covering selection and context

---

## Verification

```
Build succeeded.
    0 Warning(s)
    0 Error(s)

Test summary: total: 55, failed: 0, succeeded: 55, skipped: 0
```

---

## Dependencies

- Requires: v0.15.1d (Extended Check Mechanics)
- Used by: v0.15.2+ (Skill System Integration)

---

## Document Metadata

| Property | Value |
|----------|-------|
| Version | 0.15.1e |
| Theme | Integration Points |
| Date | 2026-01-22 |
| Status | Complete |
