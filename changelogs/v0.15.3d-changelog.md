# v0.15.3d Changelog - Intimidation System

## Summary

Implements the **Intimidation System** subsystem of the Rhetoric skill. Enables fear-based coercion using either MIGHT (Physical) or WILL (Mental) approaches, with 5-tier target classification (DC 8-24), relative strength modifiers, and mandatory reputation costs (Cost of Fear). Features [Challenge Accepted] fumble consequence with immediate combat initiation and [Furious] NPC buff (+2d10 damage).

## Added

### Domain Layer - Enums (3 files)

| File | Description |
|------|-------------|
| `IntimidationTarget.cs` | 5-tier enum: Coward (DC 8), Common (DC 12), Veteran (DC 16), Elite (DC 20), FactionLeader (DC 24) |
| `IntimidationApproach.cs` | 2-tier enum: Physical (MIGHT), Mental (WILL) |
| `RelativeStrength.cs` | 3-tier enum: PlayerWeaker (NPC +1d10), Equal (no modifier), PlayerStronger (Player +1d10) |
| `TargetCompliance.cs` | 5-tier enum: None, Minimal, Reluctant, Full, Complete |

### Domain Layer - Extensions (3 files)

| File | Description |
|------|-------------|
| `IntimidationTargetExtensions.cs` | `GetBaseDc()`, `GetDisplayName()`, `GetDescription()`, `GetTypicalResponse()`, `IsLikelyToResist()`, `GetExamples()`, `GetShortDescription()` |
| `IntimidationApproachExtensions.cs` | `GetAttributeName()`, `GetDisplayName()`, `GetDescription()`, `GetExampleActions()`, `GetShortName()`, `GetBriefDescription()`, `BenefitsFromVisibleWeaponry()`, `BenefitsFromReputation()` |
| `RelativeStrengthExtensions.cs` | `GetPlayerBonusDice()`, `GetNpcBonusDice()`, `GetDisplayName()`, `GetDescription()`, `FromLevels()`, `FavorsPlayer()`, `FavorsNpc()`, `GetNpcPerception()` |

### Domain Layer - Value Objects (3 files)

| File | Description |
|------|-------------|
| `CostOfFear.cs` | Mandatory reputation cost: Critical Success -3, Success -5, Failure -10, Fumble -10. Factory methods for each outcome |
| `IntimidationContext.cs` | Captures all factors: target type, approach, relative strength, modifiers. Calculates `BaseDc`, `EffectiveDc`, `PlayerBonusDice`, `NpcBonusDice`, `IsHighRisk` |
| `IntimidationResult.cs` | Outcome with compliance, reputation cost, combat initiation, stress cost, [Furious] buff. Factory methods for Success/Failure/Fumble |

### Application Layer (2 files)

| File | Description |
|------|-------------|
| `IIntimidationService.cs` | Interface: `AttemptIntimidationAsync`, `IntimidateAsync`, `BuildContextAsync`, `ClassifyTargetAsync`, `CalculateRelativeStrengthAsync`, `HasReputationBonusAsync`, `IsWieldingArtifactAsync`, `HasIntimidatingAllyAsync`, `TargetHasBackupAsync`, `GetTargetFactionAsync`, `CalculateCostOfFear`, `ApplyFuriousEffectAsync`, `InitiateChallengeAcceptedCombatAsync` |
| `IntimidationService.cs` | Full implementation with approach selection (MIGHT/WILL), relative strength calculation, Cost of Fear application, [Challenge Accepted] fumble handling |

### Configuration (1 file)

| File | Description |
|------|-------------|
| `config/social/intimidation-targets.json` | Target tiers, approach definitions, player/NPC dice modifiers, Cost of Fear costs, [Challenge Accepted] effects, [Furious] status |

### Unit Tests (1 test file, 35+ tests)

| File | Tests |
|------|-------|
| `IntimidationSystemTests.cs` | Target DC mapping, MIGHT vs WILL attribute, Cost of Fear always negative, relative strength modifiers, compliance scaling, fumble combat initiation |

## Key Features

### Target Resistance Tiers

| Tier | DC | Likely to Resist | Examples |
|------|:--:|:----------------:|----------|
| Coward | 8 | No | Nervous merchants, sheltered nobles |
| Common | 12 | No | Town guards, craftsmen, innkeepers |
| Veteran | 16 | Yes | Experienced soldiers, mercenaries |
| Elite | 20 | Yes | Champions, crime lords, zealots |
| FactionLeader | 24 | Yes | Jarls, guild masters, chieftains |

### Approach Selection

| Approach | Attribute | Description | Example Actions |
|----------|-----------|-------------|-----------------|
| Physical | MIGHT | Uses physical presence and implied violence | Looming, weapon display, flexing |
| Mental | WILL | Uses psychological pressure and reputation | Cold stare, calm threats, past deeds |

### Dice Modifiers

| Source | Modifier | Recipient | Condition |
|--------|:--------:|-----------|-----------|
| Relative Strength (PlayerStronger) | +1d10 | Player | Level > NPC + 1 |
| Relative Strength (PlayerWeaker) | +1d10 | NPC | Level < NPC - 1 |
| [Honored] or [Feared] reputation | +1d10 | Player | Reputation with faction |
| Wielding visible [Artifact] | +1d10 | Player | Has artifact equipped |
| Intimidating ally present | +1d10 | Player | Kriger, monster, etc. |
| NPC has backup nearby | +1d10 | NPC | Visible allies |

### Cost of Fear (MANDATORY)

| Outcome | Reputation Cost | Narrative |
|---------|:---------------:|-----------|
| Critical Success | -3 | Efficient display of dominance minimizes damage |
| Success | -5 | Word of threatening behavior spreads |
| Failure | -10 | Failed threat makes you look weak and desperate |
| Fumble | -10 | Catastrophic attempt becomes local gossip |

### Compliance Levels

| Outcome | Compliance | Behavior |
|---------|------------|----------|
| Critical Success | Complete | Thoroughly cowed, may offer additional assistance |
| Exceptional Success | Full | Visibly trembles, complies fully |
| Full Success | Reluctant | Yields but maintains dignity |
| Marginal Success | Minimal | Does only what's absolutely necessary |
| Failure/Fumble | None | Refuses to be intimidated |

### [Challenge Accepted] Fumble Consequences

- **Trigger:** 0 successes + ≥1 botch (Critical Failure)
- **Combat initiated immediately** - NPC attacks
- **NPC gains [Furious]** buff: +2d10 damage, cannot be removed, lasts entire combat
- **NPC will NOT accept surrender** - fight to the finish
- **Player receives +5 Psychic Stress**
- **NPC gains +2 initiative bonus** (fueled by rage)
- **-30 disposition** with target

## Files Changed

| File | Change |
|------|--------|
| `src/Core/RuneAndRust.Domain/Enums/IntimidationTarget.cs` | Added |
| `src/Core/RuneAndRust.Domain/Enums/IntimidationApproach.cs` | Added |
| `src/Core/RuneAndRust.Domain/Enums/RelativeStrength.cs` | Added |
| `src/Core/RuneAndRust.Domain/Enums/TargetCompliance.cs` | Added |
| `src/Core/RuneAndRust.Domain/Extensions/IntimidationTargetExtensions.cs` | Added |
| `src/Core/RuneAndRust.Domain/Extensions/IntimidationApproachExtensions.cs` | Added |
| `src/Core/RuneAndRust.Domain/Extensions/RelativeStrengthExtensions.cs` | Added |
| `src/Core/RuneAndRust.Domain/ValueObjects/CostOfFear.cs` | Added |
| `src/Core/RuneAndRust.Domain/ValueObjects/IntimidationContext.cs` | Added |
| `src/Core/RuneAndRust.Domain/ValueObjects/IntimidationResult.cs` | Added |
| `src/Core/RuneAndRust.Application/Interfaces/IIntimidationService.cs` | Added |
| `src/Core/RuneAndRust.Application/Services/IntimidationService.cs` | Added |
| `config/social/intimidation-targets.json` | Added |
| `tests/RuneAndRust.Domain.UnitTests/Services/IntimidationSystemTests.cs` | Added |
| `changelogs/v0.15.3d-changelog.md` | Added |

## Test Results

```
Total tests: 35+
     Passed: TBD (run `dotnet test` to verify)
Build succeeded with 0 errors
```

## Dependencies

- **v0.15.3c:** `DeceptionContext`, `DeceptionResult`, `LiarsBurden` (pattern reference)
- **v0.15.3b:** `PersuasionContext`, `ArgumentAlignment` (pattern reference)
- **v0.15.3a:** `NpcDisposition`, `DispositionLevel`, `SocialContext`, `SocialContextBuilder`
- **v0.15.1b:** `FumbleType.ChallengeAccepted` (already exists), `FumbleConsequence`, `SkillOutcome`
- **v0.15.0:** `DiceRollResult`, `IDiceRollerService`

## Integration Points

### v0.15.3e (Negotiation System)
- Intimidation can be used as a negotiation tactic
- Higher reputation cost when used in formal negotiations

### v0.15.3f (Interrogation System)
- Intimidation is one of four interrogation methods
- Can combine with other approaches

### v0.15.3i (Specialization Abilities)
- Kriger specialization bonuses for intimidation
- Warrior-type NPCs may have resistance

## Notes

- `FumbleType.ChallengeAccepted` already existed (value = 2), no modification needed
- Dual attribute system: Player chooses MIGHT (Physical) or WILL (Mental) approach
- Unlike other Rhetoric subsystems, intimidation ALWAYS costs reputation regardless of outcome
- Service uses in-memory tracking for intimidated NPCs; production requires persistence
- [Furious] status effect is combat-duration only, cannot be cleansed or dispelled
- Relative strength uses ±2 level threshold for determination
