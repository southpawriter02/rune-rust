# v0.15.1c Changelog - Master Abilities

## Overview
Introduced master abilities—powerful capstone bonuses for characters with Rank 5 (Master) proficiency in skills. Master abilities provide unique effects such as auto-succeed on low-DC checks, dice bonuses, damage reduction, distance bonuses, re-roll capabilities, and special actions.

## Added

### Domain Layer

#### Enums
- **`MasterAbilityType.cs`**: Classifies master ability effects (AutoSucceed, DiceBonus, DamageReduction, DistanceBonus, RerollFailure, SpecialAction)
- **`RerollPeriod.cs`**: Defines re-roll refresh periods (Conversation, Scene, Day, Rest)

#### Entities
- **`MasterAbility.cs`**: Represents a master-rank ability with:
  - Factory method `Create()` for construction
  - `AppliesToSubType()` for subtype matching
  - `WouldAutoSucceed()` for DC threshold checks
  - `GetDiceBonus()` for dice bonus retrieval

#### Value Objects
- **`MasterAbilityEffect.cs`**: Contains type-specific parameters with factory methods for each ability type
- **`MasterAbilityEvaluationResult.cs`**: Encapsulates evaluation results (auto-succeed, dice bonus, special effects, re-roll availability)

### Application Layer

#### Interfaces
- **`IMasterAbilityProvider.cs`**: Contract for accessing master ability definitions from configuration
- **`IMasterAbilityService.cs`**: Contract for evaluating and applying master abilities during skill checks

#### Services
- **`MasterAbilityService.cs`**: Implements master ability evaluation with:
  - Rank 5 proficiency checking
  - Auto-succeed threshold evaluation
  - Dice bonus aggregation
  - Special effect collection
  - Re-roll usage tracking and period-based reset

### Infrastructure Layer

#### Providers
- **`MasterAbilityProvider.cs`**: Loads master abilities from JSON configuration with caching

#### Configuration
- **`master-abilities.json`**: 18 master abilities across 4 skills:
  - **Acrobatics** (5): Spider Climb, Cat's Grace, Ghost Walk, Death-Defying Leap, Perfect Balance
  - **Rhetoric** (5): Polyglot, Cultural Diplomat, Master Negotiator, Silver Tongue, Fearsome Reputation
  - **System Bypass** (4): Auto-Bypass, Salvage Expertise, Silent Bypass, Glitch Reader
  - **Wasteland Survival** (4): Wasteland Cartographer, Apex Scavenger, Master Tracker, Hazard Sense

### Unit Tests
- **`MasterAbilityTests.cs`** (11 tests): Entity factory, subtype matching, auto-succeed, dice bonus
- **`MasterAbilityServiceTests.cs`** (9 tests): Evaluation, proficiency checks, re-roll tracking

## Technical Details

### Master Ability Types
| Type | Effect | Example |
|------|--------|---------|
| AutoSucceed | Skip roll if DC ≤ threshold | Spider Climb (DC ≤ 12) |
| DiceBonus | +Xd10 to check | Fearsome Reputation (+2d10) |
| DamageReduction | Reduce/negate damage | Cat's Grace (no fall ≤ 30ft) |
| DistanceBonus | Extended range/time | Death-Defying Leap (+10ft) |
| RerollFailure | Re-roll per period | Master Negotiator (1/conversation) |
| SpecialAction | Unique capability | Salvage Expertise |

### Re-roll Period System
- Conversation: Resets when dialogue ends
- Scene: Resets when leaving area/encounter
- Day: Resets at in-game day change
- Rest: Resets after long rest

## Test Results
```
Total tests: 20
Passed: 20
Failed: 0
```

## Dependencies
- Builds on v0.15.1a Skill Context & Modifiers
- Builds on v0.15.1b Outcome Classification
- Uses `SkillProficiency.Master` for rank checking
