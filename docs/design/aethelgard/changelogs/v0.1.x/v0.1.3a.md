# Changelog: v0.1.3a - Data Foundation

**Release Date:** 2025-12-19

---

## Summary

This milestone established the database schema and domain models for the **Scavenger's Journal (Codex)** system, a core progression mechanic enabling players to compile lore fragments into complete entries. The implementation spans the **Core Layer** (entities, enums, repository interfaces), **Persistence Layer** (repositories, EF Core configuration, seed data), and **Test Layer** (comprehensive unit and integration tests). Key architectural patterns introduced include the **Repository Pattern** with specialized query methods, **JSONB storage** for flexible dictionary-based data (unlock thresholds), and **EF Core relationship mapping** with optional foreign keys. All lore content adheres to **Domain 4 constraints** (no precision measurements in post-Glitch content). This foundation enables v0.1.3b's discovery mechanics, where players encounter Data Captures in containers and corpses, progressively unlocking Codex entries.

---

## New Files Created

### Core Layer

| File | Purpose |
|------|---------|
| `/RuneAndRust.Core/Enums/CaptureType.cs` | Defines 6 capture types for lore fragment classification (TextFragment, EchoRecording, VisualRecord, Specimen, OralHistory, RunicTrace) |
| `/RuneAndRust.Core/Enums/EntryCategory.cs` | Defines 6 Codex categories for Journal organization (FieldGuide, BlightOrigin, Bestiary, Factions, Technical, Geography) |
| `/RuneAndRust.Core/Entities/CodexEntry.cs` | Represents static lore entries with progressive unlock thresholds and fragment requirements |
| `/RuneAndRust.Core/Entities/DataCapture.cs` | Represents player-discovered lore fragments that compile into Codex entries |
| `/RuneAndRust.Core/Interfaces/ICodexEntryRepository.cs` | Repository contract for Codex entries with category and title queries |
| `/RuneAndRust.Core/Interfaces/IDataCaptureRepository.cs` | Repository contract for Data Captures with character and entry filtering |

### Persistence Layer

| File | Purpose |
|------|---------|
| `/RuneAndRust.Persistence/Repositories/CodexEntryRepository.cs` | Implements ICodexEntryRepository with EF Core queries and eager loading |
| `/RuneAndRust.Persistence/Repositories/DataCaptureRepository.cs` | Implements IDataCaptureRepository with character-scoped fragment queries |
| `/RuneAndRust.Persistence/Data/CodexSeeder.cs` | Seeds 3 Field Guide entries (Psychic Stress, Combat Basics, Burden) and 1 Bestiary entry (Rusted Servitor) |

### Test Layer

| File | Purpose |
|------|---------|
| `/RuneAndRust.Tests/Core/CodexEntryTests.cs` | 26 unit tests for CodexEntry entity properties, defaults, and unlock thresholds |
| `/RuneAndRust.Tests/Core/DataCaptureTests.cs` | 23 unit tests for DataCapture entity properties, assignment, and quality values |
| `/RuneAndRust.Tests/Integration/CodexPersistenceTests.cs` | 23 integration tests for repository operations, JSONB serialization, and relationships |

---

## Files Modified

| File | Change |
|------|--------|
| `/RuneAndRust.Persistence/Data/RuneAndRustDbContext.cs` | Added `DbSet<CodexEntry>` and `DbSet<DataCapture>` properties; configured entity mappings with JSONB for `UnlockThresholds`, unique index on `Title`, indexes on `Category` and `CharacterId`, and one-to-many relationship with `DeleteBehavior.SetNull` |

---

## Code Implementation Details

### Enums

#### CaptureType (6 Values)

```csharp
public enum CaptureType
{
    TextFragment = 0,    // Readable notes, slates, torn pages (most common)
    EchoRecording = 1,   // Audio logs or recordings (transcribed for display)
    VisualRecord = 2,    // Schematics, diagrams, images
    Specimen = 3,        // Biological samples, tissue analysis
    OralHistory = 4,     // Dialogue fragments, rumors, oral traditions
    RunicTrace = 5       // Magical/technological trace analysis
}
```

#### EntryCategory (6 Values)

```csharp
public enum EntryCategory
{
    FieldGuide = 0,      // Game mechanics and tutorial explanations
    BlightOrigin = 1,    // Lore about The Glitch and world corruption
    Bestiary = 2,        // Creature data, behavioral patterns, weaknesses
    Factions = 3,        // Political groups and social structures
    Technical = 4,       // Pre-Glitch technology and Aesir artifacts
    Geography = 5        // Location descriptions and regional history
}
```

### Entities

#### CodexEntry

**Properties:**
- `Guid Id` - Unique identifier (auto-generated)
- `string Title` - Display name (max 100 chars, required, unique index)
- `EntryCategory Category` - Organizational category (indexed)
- `string FullText` - Complete entry text (max 5000 chars, UI redacts based on completion)
- `int TotalFragments` - Required fragments for 100% completion (default: 1)
- `Dictionary<int, string> UnlockThresholds` - Progressive reveals (stored as JSONB)
- `ICollection<DataCapture> Fragments` - Navigation property to related captures
- `DateTime CreatedAt` - Timestamp (auto-set to UtcNow)
- `DateTime LastModified` - Timestamp (auto-set to UtcNow)

**Behaviors:**
- Defaults to `EntryCategory.FieldGuide`
- Initializes empty `UnlockThresholds` dictionary
- Initializes empty `Fragments` collection

#### DataCapture

**Properties:**
- `Guid Id` - Unique identifier (auto-generated)
- `Guid CharacterId` - Foreign key to Character (required, indexed)
- `Guid? CodexEntryId` - Foreign key to CodexEntry (nullable for unassigned fragments, indexed)
- `CaptureType Type` - Classification method (default: TextFragment)
- `string FragmentContent` - Lore snippet text (max 2000 chars, required)
- `string Source` - Discovery context (max 200 chars, e.g., "Found on Rusted Servitor corpse")
- `int Quality` - Legend reward value (default: 15; specialist captures: 30)
- `bool IsAnalyzed` - Reserved for future mechanic (default: false)
- `DateTime DiscoveredAt` - Discovery timestamp (auto-set to UtcNow)
- `CodexEntry? CodexEntry` - Navigation property to parent entry

**Behaviors:**
- Supports unassigned fragments (`CodexEntryId = null`) for mystery content
- No weight burden (separate from inventory system)
- Quality affects Legend rewards on entry completion

### Repository Interfaces

#### ICodexEntryRepository

**Methods:**
- `Task<IEnumerable<CodexEntry>> GetByCategoryAsync(EntryCategory category)` - Returns entries filtered by category, ordered by title
- `Task<CodexEntry?> GetByTitleAsync(string title)` - Case-insensitive title lookup
- `Task<CodexEntry?> GetWithFragmentsAsync(Guid id)` - Eager loads `Fragments` navigation property
- `Task AddRangeAsync(IEnumerable<CodexEntry> entries)` - Batch insert for seeding

#### IDataCaptureRepository

**Methods:**
- `Task<IEnumerable<DataCapture>> GetByCharacterIdAsync(Guid characterId)` - Returns all captures for a character, ordered by `DiscoveredAt` descending, includes `CodexEntry` navigation
- `Task<IEnumerable<DataCapture>> GetByEntryIdAsync(Guid entryId, Guid characterId)` - Returns fragments for specific entry and character, ordered by `DiscoveredAt` ascending
- `Task<int> GetFragmentCountAsync(Guid entryId, Guid characterId)` - Counts fragments for completion percentage calculation
- `Task<IEnumerable<DataCapture>> GetUnassignedAsync(Guid characterId)` - Returns captures with `CodexEntryId = null`
- `Task AddRangeAsync(IEnumerable<DataCapture> captures)` - Batch insert for testing/import

### Repository Implementations

Both repositories extend `GenericRepository<T>` and accept dedicated logger instances for specialized logging.

**Key Implementation Details:**
- All queries use `async`/`await` pattern
- EF Core `Include()` for eager loading navigation properties
- Case-insensitive string matching (`ToLower()`) for title searches
- Ordering by `Title`, `DiscoveredAt`, or other domain-relevant properties

### CodexSeeder

**Seeding Logic:**
- Checks if `CodexEntries` table has data; exits early if populated
- Seeds 4 entries on first run:
  - **Psychic Stress** (Field Guide, 1 fragment)
  - **Combat Basics** (Field Guide, 1 fragment)
  - **Burden and Carrying Capacity** (Field Guide, 1 fragment)
  - **Rusted Servitor** (Bestiary, 4 fragments with progressive unlocks)

**Content Highlights:**
- All text is Domain 4 compliant (no precision measurements)
- Field Guide entries use single threshold: `{ 100: "MECHANIC_UNLOCKED" }`
- Rusted Servitor uses 4-tier unlock: `{ 25: "WEAKNESS_REVEALED", 50: "HABITAT_REVEALED", 75: "BEHAVIOR_REVEALED", 100: "FULL_ENTRY" }`

### EF Core Configuration

**CodexEntry Entity Configuration:**
- Table: `CodexEntries`
- Primary key: `Id`
- Unique index on `Title` (enforces no duplicate entry names)
- Index on `Category` (optimizes category-based queries)
- `UnlockThresholds` stored as JSONB using `JsonSerializer` conversion
- One-to-many relationship with `DataCapture` via `Fragments` navigation
- Delete behavior: `DeleteBehavior.SetNull` (orphans captures instead of cascading delete)

**DataCapture Entity Configuration:**
- Table: `DataCaptures`
- Primary key: `Id`
- Index on `CharacterId` (fast journal lookup)
- Index on `CodexEntryId` (fragment aggregation)
- `CodexEntryId` is nullable (allows unassigned fragments)
- Many-to-one relationship with `CodexEntry`
- Delete behavior: `DeleteBehavior.SetNull` (preserves captures if entry deleted)

---

## Logging Matrix

### CodexEntryRepository

| Event | Level | Template |
|-------|-------|----------|
| Fetch by category | Debug | `"Fetching CodexEntries with category {Category}"` |
| Category query result | Debug | `"Retrieved {Count} CodexEntries with category {Category}"` |
| Fetch by title | Debug | `"Fetching CodexEntry with title {Title}"` |
| Title not found | Debug | `"CodexEntry with title {Title} not found"` |
| Title found | Debug | `"Retrieved CodexEntry: {Title}"` |
| Fetch with fragments | Debug | `"Fetching CodexEntry {Id} with Fragments"` |
| Entry not found | Debug | `"CodexEntry with ID {Id} not found"` |
| Entry with fragments retrieved | Debug | `"Retrieved CodexEntry {Title} with {FragmentCount} fragments"` |
| Add range | Debug | `"Adding {Count} CodexEntries"` |
| Add range success | Debug | `"Successfully added {Count} CodexEntries to context"` |

### DataCaptureRepository

| Event | Level | Template |
|-------|-------|----------|
| Fetch by character | Debug | `"Fetching DataCaptures for Character {CharacterId}"` |
| Character query result | Debug | `"Retrieved {Count} DataCaptures for Character {CharacterId}"` |
| Fetch by entry and character | Debug | `"Fetching DataCaptures for Entry {EntryId} and Character {CharacterId}"` |
| Entry query result | Debug | `"Retrieved {Count} DataCaptures for Entry {EntryId} and Character {CharacterId}"` |
| Count fragments | Debug | `"Counting fragments for Entry {EntryId} and Character {CharacterId}"` |
| Fragment count result | Debug | `"Character {CharacterId} has {Count} fragments for entry {EntryId}"` |
| Fetch unassigned | Debug | `"Fetching unassigned DataCaptures for Character {CharacterId}"` |
| Unassigned query result | Debug | `"Retrieved {Count} unassigned DataCaptures for Character {CharacterId}"` |
| Add range | Debug | `"Adding {Count} DataCaptures"` |
| Add range success | Debug | `"Successfully added {Count} DataCaptures to context"` |

### CodexSeeder

| Event | Level | Template |
|-------|-------|----------|
| Skip seeding | Debug | `"Codex entries already exist, skipping seed"` |
| Start seeding | Information | `"Seeding Codex entries..."` |
| Seeding complete | Information | `"Seeded {Count} Codex entries"` |

---

## Test Coverage

**Total:** 72 tests | **Passed:** 72 | **Failed:** 0 | **Duration:** 384ms

### Complete Test Inventory

#### CodexEntryTests (26 tests)

| Test Name | Description |
|-----------|-------------|
| `CodexEntry_NewEntry_HasUniqueId` | Each entry receives unique GUID on instantiation |
| `CodexEntry_Title_DefaultsToEmptyString` | Title property defaults to empty string |
| `CodexEntry_Title_CanBeSet` | Title property accepts string values |
| `CodexEntry_Category_DefaultsToFieldGuide` | Category defaults to `EntryCategory.FieldGuide` |
| `CodexEntry_Category_CanBeSetToAllCategories` (6 theories) | Category accepts all 6 enum values (FieldGuide, BlightOrigin, Bestiary, Factions, Technical, Geography) |
| `CodexEntry_FullText_DefaultsToEmptyString` | FullText property defaults to empty string |
| `CodexEntry_FullText_CanBeSet` | FullText property accepts lore content |
| `CodexEntry_TotalFragments_DefaultsToOne` | TotalFragments defaults to 1 |
| `CodexEntry_TotalFragments_CanBeSet` | TotalFragments accepts integer values |
| `CodexEntry_UnlockThresholds_DefaultsToEmptyDictionary` | UnlockThresholds initializes as empty dictionary |
| `CodexEntry_UnlockThresholds_CanAddEntries` | Dictionary accepts threshold entries |
| `CodexEntry_UnlockThresholds_CanBeInitializedInline` | Supports inline dictionary initialization |
| `CodexEntry_UnlockThresholds_CanCheckForThreshold` | `ContainsKey()` works correctly |
| `CodexEntry_Fragments_DefaultsToEmptyCollection` | Fragments navigation property initializes as empty collection |
| `CodexEntry_Fragments_CanAddDataCaptures` | Fragments collection accepts DataCapture entities |
| `CodexEntry_CreatedAt_IsSetAutomatically` | CreatedAt timestamp set on instantiation |
| `CodexEntry_LastModified_IsSetAutomatically` | LastModified timestamp set on instantiation |
| `CodexEntry_FullCreation_AllPropertiesSet` | Complete entry creation with all properties validates correctly |

#### DataCaptureTests (23 tests)

| Test Name | Description |
|-----------|-------------|
| `DataCapture_NewCapture_HasUniqueId` | Each capture receives unique GUID on instantiation |
| `DataCapture_CharacterId_DefaultsToEmptyGuid` | CharacterId defaults to `Guid.Empty` |
| `DataCapture_CharacterId_CanBeSet` | CharacterId property accepts GUID values |
| `DataCapture_CodexEntryId_DefaultsToNull` | CodexEntryId defaults to null (unassigned state) |
| `DataCapture_CodexEntryId_CanBeSet` | CodexEntryId property accepts GUID values |
| `DataCapture_CodexEntryId_CanBeSetToNull` | CodexEntryId can be reset to null |
| `DataCapture_Type_DefaultsToTextFragment` | Type defaults to `CaptureType.TextFragment` |
| `DataCapture_Type_CanBeSetToAllTypes` (6 theories) | Type accepts all 6 enum values (TextFragment, EchoRecording, VisualRecord, Specimen, OralHistory, RunicTrace) |
| `DataCapture_FragmentContent_DefaultsToEmptyString` | FragmentContent defaults to empty string |
| `DataCapture_FragmentContent_CanBeSet` | FragmentContent accepts lore text |
| `DataCapture_Source_DefaultsToEmptyString` | Source defaults to empty string |
| `DataCapture_Source_CanBeSet` | Source accepts context strings |
| `DataCapture_Quality_DefaultsToFifteen` | Quality defaults to 15 (standard capture) |
| `DataCapture_Quality_CanBeSetToStandard` | Quality accepts 15 (standard) |
| `DataCapture_Quality_CanBeSetToSpecialist` | Quality accepts 30 (specialist) |
| `DataCapture_IsAnalyzed_DefaultsToFalse` | IsAnalyzed defaults to false |
| `DataCapture_IsAnalyzed_CanBeSetToTrue` | IsAnalyzed accepts true value |
| `DataCapture_DiscoveredAt_IsSetAutomatically` | DiscoveredAt timestamp set on instantiation |
| `DataCapture_CodexEntry_DefaultsToNull` | CodexEntry navigation property defaults to null |
| `DataCapture_CodexEntry_CanBeSet` | CodexEntry navigation accepts entity reference |
| `DataCapture_FullCreation_AllPropertiesSet` | Complete capture creation with all properties validates correctly |
| `DataCapture_UnassignedCapture_HasNullCodexEntryId` | Unassigned captures maintain null CodexEntryId |

#### CodexPersistenceTests (23 tests)

| Test Name | Description |
|-----------|-------------|
| `AddAsync_ShouldPersistCodexEntry` | Repository successfully persists entry to InMemory database |
| `AddAsync_ShouldPersistAllCodexProperties` | All CodexEntry properties persist correctly |
| `UpdateAsync_ShouldModifyCodexEntry` | Repository updates modify existing entries |
| `DeleteAsync_ShouldRemoveCodexEntry` | Repository deletes remove entries from database |
| `GetByCategoryAsync_ReturnsEntriesOfCategory` | Category filter returns correct entries |
| `GetByCategoryAsync_NoMatches_ReturnsEmptyList` | Category filter handles no results gracefully |
| `GetByTitleAsync_FindsExactMatch` | Title query finds exact matches |
| `GetByTitleAsync_CaseInsensitive` | Title query performs case-insensitive matching |
| `GetByTitleAsync_NotFound_ReturnsNull` | Title query returns null for missing entries |
| `UnlockThresholds_SerializesAsJsonb` | Dictionary serializes/deserializes correctly from JSONB |
| `UnlockThresholds_EmptyDictionary_PersistsCorrectly` | Empty dictionary persists without errors |
| `AddAsync_ShouldPersistDataCapture` | Repository successfully persists capture to database |
| `AddAsync_ShouldPersistAllCaptureProperties` | All DataCapture properties persist correctly |
| `GetByCharacterIdAsync_ReturnsCharacterCaptures` | Character filter returns correct captures |
| `GetByCharacterIdAsync_NoCaptures_ReturnsEmptyList` | Character filter handles no results gracefully |
| `GetFragmentCountAsync_ReturnsCorrectCount` | Fragment counting produces accurate results |
| `GetFragmentCountAsync_NoFragments_ReturnsZero` | Fragment counting handles zero fragments |
| `GetWithFragmentsAsync_IncludesRelatedCaptures` | Eager loading includes related DataCaptures |
| `GetUnassignedAsync_ReturnsUnassignedCaptures` | Unassigned filter excludes assigned captures |
| `AddRangeAsync_AddsMultipleCodexEntries` | Batch insert persists multiple entries |
| `AddRangeAsync_AddsMultipleDataCaptures` | Batch insert persists multiple captures |
| `DataCapture_LinkedToEntry_NavigationPropertyWorks` | Navigation property resolves foreign key relationship |

---

## DI Registration

**Note:** No DI registration changes in this release. The repositories will be registered in v0.1.3b when the Codex service layer is implemented.

---

## Verification Results

### Build Output

```
Build succeeded.
    1 Warning(s)
    0 Error(s)

Time Elapsed 00:00:00.84
```

**Warning:** EF Core version conflict (non-breaking, does not affect functionality)

### Test Output

```
Passed!  - Failed:     0, Passed:    72, Skipped:     0, Total:    72, Duration: 384 ms
```

**Full Suite Results:**
```
Passed!  - Failed:     0, Passed:  1118, Skipped:     0, Total:  1118, Duration: 412 ms
```

---

## Directory Structure After Release

```
RuneAndRust/
├── RuneAndRust.Core/
│   ├── Entities/
│   │   ├── Character.cs
│   │   ├── CodexEntry.cs                [NEW]
│   │   ├── DataCapture.cs               [NEW]
│   │   ├── Equipment.cs
│   │   ├── InventoryItem.cs
│   │   ├── InteractableObject.cs
│   │   ├── Item.cs
│   │   ├── Room.cs
│   │   └── SaveGame.cs
│   ├── Enums/
│   │   ├── Archetype.cs
│   │   ├── Attribute.cs
│   │   ├── CaptureType.cs               [NEW]
│   │   ├── Direction.cs
│   │   ├── EquipmentSlot.cs
│   │   ├── EntryCategory.cs             [NEW]
│   │   ├── ExaminationTier.cs
│   │   ├── ItemType.cs
│   │   ├── Lineage.cs
│   │   ├── LootTier.cs
│   │   └── ObjectType.cs
│   ├── Interfaces/
│   │   ├── ICharacterRepository.cs
│   │   ├── ICodexEntryRepository.cs     [NEW]
│   │   ├── IDataCaptureRepository.cs    [NEW]
│   │   ├── IInteractableObjectRepository.cs
│   │   ├── IInventoryRepository.cs
│   │   ├── IItemRepository.cs
│   │   ├── IRepository.cs
│   │   ├── IRoomRepository.cs
│   │   └── ISaveGameRepository.cs
│   └── ValueObjects/
│       └── Coordinate.cs
├── RuneAndRust.Persistence/
│   ├── Data/
│   │   ├── CodexSeeder.cs               [NEW]
│   │   └── RuneAndRustDbContext.cs      [MODIFIED]
│   └── Repositories/
│       ├── CharacterRepository.cs
│       ├── CodexEntryRepository.cs      [NEW]
│       ├── DataCaptureRepository.cs     [NEW]
│       ├── GenericRepository.cs
│       ├── InteractableObjectRepository.cs
│       ├── InventoryRepository.cs
│       ├── ItemRepository.cs
│       ├── RoomRepository.cs
│       └── SaveGameRepository.cs
└── RuneAndRust.Tests/
    ├── Core/
    │   ├── CharacterTests.cs
    │   ├── CodexEntryTests.cs           [NEW]
    │   ├── DataCaptureTests.cs          [NEW]
    │   ├── EquipmentTests.cs
    │   ├── InteractableObjectTests.cs
    │   ├── InventoryItemTests.cs
    │   ├── ItemTests.cs
    │   ├── RoomTests.cs
    │   └── SaveGameTests.cs
    └── Integration/
        ├── CharacterPersistenceTests.cs
        ├── CodexPersistenceTests.cs     [NEW]
        ├── InteractableObjectPersistenceTests.cs
        ├── InventoryPersistenceTests.cs
        ├── ItemPersistenceTests.cs
        ├── RoomPersistenceTests.cs
        └── SaveGameTests.cs
```

---

## Running Tests

### Run All Codex Tests

```bash
dotnet test --filter "FullyQualifiedName~CodexEntryTests|FullyQualifiedName~DataCaptureTests|FullyQualifiedName~CodexPersistenceTests"
```

### Run Entity Unit Tests Only

```bash
dotnet test --filter "FullyQualifiedName~Core.CodexEntryTests|FullyQualifiedName~Core.DataCaptureTests"
```

### Run Integration Tests Only

```bash
dotnet test --filter "FullyQualifiedName~Integration.CodexPersistenceTests"
```

### Run Full Test Suite

```bash
dotnet test
```

---

## Technical Highlights

### JSONB Storage for Unlock Thresholds

The `UnlockThresholds` dictionary is stored as JSONB in PostgreSQL, enabling flexible schema-less data for progressive reveals. EF Core uses `JsonSerializer` for conversion:

```csharp
entity.Property(e => e.UnlockThresholds)
    .HasColumnType("jsonb")
    .HasConversion(
        v => JsonSerializer.Serialize(v, (JsonSerializerOptions?)null),
        v => JsonSerializer.Deserialize<Dictionary<int, string>>(v, (JsonSerializerOptions?)null)
            ?? new Dictionary<int, string>()
    )
    .IsRequired();
```

This approach allows arbitrary threshold percentages without schema migrations (e.g., 25%, 50%, 75%, 100% for Bestiary entries vs. 100% for Field Guide entries).

### Nullable Foreign Keys with SetNull Behavior

The `DataCapture.CodexEntryId` foreign key is nullable, enabling "mystery fragments" that auto-assign when the player discovers enough related information. When a `CodexEntry` is deleted, related `DataCapture` records are orphaned (`DeleteBehavior.SetNull`) rather than cascade-deleted, preserving the player's discovery history.

### Domain 4 Compliance in Seed Data

All seeded content avoids precision measurements:
- **Forbidden:** "95% corruption rate," "4.2 meters tall," "18 seconds"
- **Allowed:** "Almost certain," "Roughly as tall as a grown man," "Several moments"

The `CodexSeeder` produces Jötun-Reader voice lore appropriate for in-universe discovery logs.

### Repository Pattern Specialization

Both repositories extend `GenericRepository<T>` (inheriting CRUD operations) while adding domain-specific queries:
- **CodexEntryRepository:** Category filtering, case-insensitive title search, eager loading with fragments
- **DataCaptureRepository:** Character-scoped queries, fragment counting, unassigned fragment retrieval

This pattern balances code reuse with specialized query needs.

---

## Next Steps

- **v0.1.3b:** Implement Codex service layer (`ICodexService`, `CodexService`)
- **v0.1.3c:** Add discovery triggers (container searches, corpse examinations)
- **v0.1.3d:** Build Scavenger's Journal UI (Avalonia views, view models)
- **v0.1.3e:** Implement progressive text redaction based on completion percentage
- **v0.1.4:** Legend reward system integration (grant Legend points on entry completion)

---

**End of Changelog v0.1.3a**
