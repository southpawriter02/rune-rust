# v0.15.4h Changelog - Alternative Bypass Methods System

**Release Date:** 2026-01-24
**Version:** v0.15.4h
**Phase:** System Bypass Skill Expansion (v0.15.x)
**Sub-Phase:** Alternative Bypass Methods System (v0.15.4h)

---

## Summary

Implemented the **Alternative Bypass Methods System**, providing non-skill-based approaches to obstacles when lockpicking, hacking, or disarmament are unavailable. This ensures that no character is permanently stuck due to missing a specific skill—every obstacle has multiple solutions with meaningful trade-offs.

The system includes two primary components:
1. **Brute Force System:** MIGHT-based DC checks for physical obstacles with consequences (noise, content damage, exhaustion)
2. **Alternative Methods:** Non-primary approaches for locked doors, secured terminals, and active traps

This version builds upon v0.15.4g (Improvised Tool Crafting System) and establishes the foundation for obstacle-agnostic gameplay.

---

## Added

### Domain Enums (embedded in value object files)

| Enum | Location | Description |
|------|----------|-------------|
| `BruteForceTargetType` | BruteForceOption.cs | SimpleDoor, ReinforcedDoor, Vault, Container |
| `ObstacleType` | AlternativeMethod.cs | LockedDoor, SecuredTerminal, ActiveTrap, PhysicalBarrier, EnergyBarrier |
| `AlternativeCheckType` | AlternativeMethod.cs | None, Might, Finesse, Wits, Investigation, Perception, Runecraft, Attack, Social |
| `ConsequenceType` | BruteForceConsequence.cs | Noise, ContentDamage, Exhaustion, SelfDamage, MaxNoise, SecurityAlert, StructuralDamage |
| `NoiseLevel` | BruteForceResult.cs | Silent, Quiet, Moderate, Loud, VeryLoud, Extreme |

### Domain Value Objects (4 files)

| File | Description |
|------|-------------|
| `BruteForceConsequence.cs` | Consequence definition with probability, noise level, and critical avoidance |
| `BruteForceResult.cs` | Result of brute force attempt with success/failure/fumble states |
| `BruteForceOption.cs` | Target configuration with DC, consequences, tool modifiers, retry limits |
| `AlternativeMethod.cs` | Alternative approach definition with check type, DC, prerequisites, consequences |

### Domain Interfaces (1 file)

| File | Description |
|------|-------------|
| `IAlternativeBypassService.cs` | Service contract plus context value objects (BruteForceContext, AlternativeEvaluationResult) |

### Application Services (1 file)

| File | Description |
|------|-------------|
| `AlternativeBypassService.cs` | Full implementation with exhaustive logging, dice integration, and narrative generation |

### Configuration Files (4 files)

| File | Description |
|------|-------------|
| `config/system-bypass/brute-force-options.json` | Target definitions, tool modifiers, environment modifiers, fumble effects |
| `config/system-bypass/alternative-methods.json` | Alternative methods by obstacle type with prerequisites and consequences |
| `config/schemas/brute-force-options.schema.json` | JSON Schema for validating brute force configuration |
| `config/schemas/alternative-methods.schema.json` | JSON Schema for validating alternative methods configuration |

### Unit Tests (1 file)

| File | Description |
|------|-------------|
| `AlternativeBypassServiceTests.cs` | ~50 tests covering brute force, alternatives, prerequisites, and value objects |

---

## Brute Force Targets

| Target Type | Base DC | Max Attempts | Retry Penalty | Consequences |
|-------------|---------|--------------|---------------|--------------|
| Simple Door | 12 | 5 | +1 DC/retry | Loud noise, content damage (50%), exhaustion |
| Reinforced Door | 16 | 3 | +2 DC/retry | Very loud noise, content damage (50%), exhaustion |
| Vault | 22 | 2 | +3 DC/retry | Extreme noise, content damage (75%), exhaustion, security alert |
| Container | 8 + (strength × 2) | 3 | +2 DC/retry | Moderate noise, content damage (50%) |

### Container DC by Strength

| Strength Rating | Base DC | Description |
|-----------------|---------|-------------|
| 1 (Flimsy) | 10 | Cardboard box, simple latch |
| 3 (Standard) | 14 | Wooden crate, padlock |
| 5 (Reinforced) | 18 | Metal strongbox, heavy lock |

---

## Tool Modifiers

### DC Modifiers

| Tool | DC Modifier | Description |
|------|-------------|-------------|
| Crowbar | -2 DC | Standard prying tool |
| Sledgehammer | -4 DC | Heavy impact weapon |
| Breaching Charge | -4 DC | Explosive bypass (extreme noise) |
| Industrial Cutter | -4 DC | Powered cutting tool |
| Knife | 0 DC | Limited leverage |

### Bonus Dice

| Tool | Bonus Dice | Description |
|------|------------|-------------|
| Crowbar | +1d10 | Additional leverage |
| Sledgehammer | +2d10 | Devastating force |
| Breaching Charge | +2d10 | Explosive power |
| Industrial Cutter | +2d10 | Cutting efficiency |
| Knife | +0d10 | No bonus (DC modifier only) |

---

## Brute Force Outcomes

### Success Tiers

| Net Successes | Result | Outcome |
|---------------|--------|---------|
| < 0 (fumble) | Fumble | 1d6 damage, tool breaks, +2 permanent DC |
| 0 | Failure | Can retry if attempts remain |
| 1-4 | Success | Obstacle destroyed, consequences apply |
| ≥5 | Critical | Obstacle destroyed, some consequences avoided |

### Critical Success Benefits

When achieving net successes ≥5:
- Noise level reduced by one step (e.g., Loud → Moderate)
- Content damage consequence avoided
- Exhaustion consequence avoided
- Clean narrative describing efficient destruction

### Fumble Consequences

When achieving 0 successes with at least 1 botch:
1. **1d6 damage** to character (physical strain, recoil, etc.)
2. **Tool breaks** if one was being used
3. **+2 permanent DC penalty** for future attempts on this target
4. **Extreme noise** level
5. Can still retry if attempts remain

---

## Alternative Methods by Obstacle Type

### Locked Door Alternatives

| Method | Check | DC | Time | Prerequisites | Consequences |
|--------|-------|-----|------|---------------|--------------|
| Find Key | Investigation | 14 | 10-30 min | None | May trigger encounters, social cost |
| Brute Force | Might | 12 | 1-3 rounds | None | Noise, content damage, exhaustion |
| Runic Bypass | Runecraft | 16 | 1 round | [Rune Sight], Runecraft trained | Essence cost (1-3), corruption exposure |
| Alternate Route | Perception | 14 | 5-20 min | None | Alternate hazards, accessibility issues |

### Secured Terminal Alternatives

| Method | Check | DC | Time | Prerequisites | Consequences |
|--------|-------|-----|------|---------------|--------------|
| Find Codes | Investigation | 16 | 5-15 min | None | Codes may be expired/partial |
| Hotwire Terminal | Wits | 14 | 2-5 rounds | Secondary terminal, wire | User-level only, may trigger ICE |
| Accept Partial Access | None | 0 | Immediate | User-level achieved | Limited functionality |

### Active Trap Alternatives

| Method | Check | DC | Time | Prerequisites | Consequences |
|--------|-------|-----|------|---------------|--------------|
| Trigger from Distance | Finesse | 12 | 1 round | Throwable object, line of sight | Noise, area damage, loses object |
| Destroy Mechanism | Attack | AC-based | 1 round | Weapon | Noise, may trigger on miss |
| Sacrifice (Shield/Item) | None | 0 | 1 round | Shield or expendable item | Shield damage (2d10), item destroyed |

### Trap AC Ranges

| Trap Complexity | AC Range |
|-----------------|----------|
| Simple | 10-12 |
| Standard | 13-15 |
| Complex | 16-18 |

---

## Prerequisite Evaluation

The service evaluates prerequisites against character abilities and items:

### Ability Prerequisites

| Format | Example | Evaluation |
|--------|---------|------------|
| `[Ability Name]` | `[Rune Sight]` | Character must have ability matching name |
| `Skill trained` | `Runecraft skill trained` | Character must have skill proficiency |

### Item Prerequisites

| Format | Example | Evaluation |
|--------|---------|------------|
| Item reference | `Shield available` | Character inventory must contain matching item |
| Tool reference | `Wire or cable available` | Character inventory must contain matching tool |

### Context Prerequisites

| Format | Example | Evaluation |
|--------|---------|------------|
| Access level | `Must have achieved User Level access` | Game state verification required |
| Environmental | `Secondary terminal must exist in area` | Scene state verification required |

---

## BruteForceContext Value Object

### Factory Methods

| Method | Description |
|--------|-------------|
| `FirstAttempt()` | Initial attempt with no modifiers |
| `FirstAttempt(toolName)` | Initial attempt with specified tool |
| `Retry(attempt, hasFumbled)` | Subsequent attempt with history |
| `WithAssistance(count)` | Attempt with helping characters |
| `Exhausted(level)` | Attempt while fatigued |

### Properties

| Property | Type | Description |
|----------|------|-------------|
| AttemptNumber | int | Current attempt (1-based) |
| HasFumbled | bool | Whether a previous fumble occurred |
| ToolUsed | string? | Name of tool being used |
| AssistingCharacters | int | Number of characters helping (max +2d10) |
| ExhaustionLevel | int | Character's exhaustion level (penalty: -level/2 dice) |

---

## AlternativeEvaluationResult Value Object

### Factory Methods

| Method | Description |
|--------|-------------|
| `Ready(difficulty)` | Character meets all prerequisites |
| `NotReady(missing, difficulty)` | Character missing prerequisites |

### Properties

| Property | Type | Description |
|----------|------|-------------|
| CanAttempt | bool | Whether all prerequisites are met |
| MissingPrerequisites | IReadOnlyList&lt;string&gt; | List of unmet prerequisites |
| EstimatedDifficulty | string | Difficulty description (Easy, Moderate, etc.) |

---

## Difficulty Descriptions

| DC Range | Description |
|----------|-------------|
| 0 | Automatic |
| 1-8 | Very Easy |
| 9-12 | Easy |
| 13-16 | Moderate |
| 17-20 | Hard |
| 21-24 | Very Hard |
| 25+ | Nearly Impossible |

---

## Noise Level System

| Level | Value | Radius | Description |
|-------|-------|--------|-------------|
| Silent | 0 | — | No sound produced |
| Quiet | 1 | 5 ft | Whisper-level, immediate area only |
| Moderate | 2 | 30 ft | Conversational, nearby rooms |
| Loud | 3 | 60 ft | Shouting, floor/section of building |
| VeryLoud | 4 | 120 ft | Alarm-level, multiple floors |
| Extreme | 5 | Entire area | Cannot be ignored, facility-wide alert |

---

## IAlternativeBypassService Interface

### Methods

| Method | Description |
|--------|-------------|
| `GetBruteForceOption(targetType, strength)` | Returns brute force configuration for target |
| `AttemptBruteForce(might, target, context)` | Rolls MIGHT check and returns result |
| `CanRetry(target, attemptsMade)` | Checks if more attempts are possible |
| `GetRetryDc(target, attempts, fumbled)` | Calculates DC for next attempt |
| `GetAlternatives(obstacleType)` | Returns all alternatives for obstacle type |
| `GetAlternativeById(methodId)` | Looks up specific alternative method |
| `EvaluateAlternative(method, abilities, items)` | Checks prerequisites and estimates difficulty |
| `GetDifficultyDescription(dc)` | Returns human-readable difficulty string |
| `GetToolBonusDice(toolName)` | Returns bonus dice for specified tool |

---

## Files Created

| Category | Files |
|----------|-------|
| Domain Enums | 5 (embedded) |
| Domain Value Objects | 4 |
| Domain Interfaces | 1 |
| Application Services | 1 |
| Configuration | 4 |
| Unit Tests | 1 |
| Documentation | 1 |
| **Total** | **12** |

---

## Key Design Decisions

### 1. Service Placement in Application Layer

Following the pattern established in v0.15.4e/f/g, `AlternativeBypassService` is placed in `RuneAndRust.Application/Services/` rather than `Domain/Services/`. This aligns with Clean Architecture principles where application services orchestrate domain logic.

### 2. Enums Embedded in Value Object Files

Related enums are embedded in their primary value object files for cohesion:
- `BruteForceTargetType` in `BruteForceOption.cs`
- `ConsequenceType` in `BruteForceConsequence.cs`
- `NoiseLevel` in `BruteForceResult.cs`
- `ObstacleType` and `AlternativeCheckType` in `AlternativeMethod.cs`

### 3. Context Types in Interface File

`BruteForceContext` and `AlternativeEvaluationResult` are defined in `IAlternativeBypassService.cs` alongside the interface, keeping related types together.

### 4. Simplified API

The interface uses primitive types (int, string, IReadOnlyList) rather than complex domain objects like `Character` or `GameContext`. This reduces coupling and makes the service easier to test.

### 5. Critical Success Threshold

Net successes ≥5 qualifies as critical success, which:
- Reduces noise by one level
- Avoids content damage and exhaustion consequences
- Provides cleaner narrative descriptions

### 6. Fumble Permanent Penalty

Fumbles add a permanent +2 DC penalty tracked via `HasFumbled` context. This makes failed brute force attempts progressively harder, encouraging players to consider alternatives.

### 7. Future Obstacle Types Placeholder

`PhysicalBarrier` and `EnergyBarrier` obstacle types are defined but return empty alternative lists. The JSON configuration includes `futureImplementation` section documenting planned alternatives for these types.

---

## Integration Points

### With Bypass Systems

| System | Integration |
|--------|-------------|
| Lockpicking (v0.15.4a) | Alternative to primary skill |
| Terminal Hacking (v0.15.4b) | Alternative to primary skill |
| Trap Disarmament (v0.15.4d) | Alternative to primary skill |
| Jury-Rigging (v0.15.4e) | Can use brute force as method choice |
| Glitch Exploitation (v0.15.4f) | Runic Bypass is magical alternative |
| Improvised Tools (v0.15.4g) | Tools provide DC and dice bonuses |

### With Future Systems

| System | Integration |
|--------|-------------|
| v0.15.4i | Integration of alternatives into bypass service flows |
| v0.15.5 | Salvage from brute force destruction |
| v0.15.6 | Skill tree unlocks for alternative methods |

---

## Dependencies

| Dependency | Usage |
|------------|-------|
| IDiceService | Dice rolling for brute force (d10 pools), fumble damage (d6), content damage (d10) |
| ILogger&lt;T&gt; | Exhaustive logging at Information/Debug/Warning levels |
| DicePool | D10 and D6 pool creation for various rolls |
| Random.Shared | Consequence probability checks |

---

## Breaking Changes

None. This version adds new functionality without modifying existing interfaces or contracts.

---

## Acceptance Criteria Status

| Criterion | Status |
|-----------|--------|
| SimpleDoor brute force DC 12, max 5 attempts, +1 DC per retry | ✅ |
| ReinforcedDoor brute force DC 16, max 3 attempts, +2 DC per retry | ✅ |
| Vault brute force DC 22, max 2 attempts, +3 DC per retry | ✅ |
| Container brute force DC 8 + (strength × 2) | ✅ |
| Tool modifiers reduce DC (Crowbar -2, Sledgehammer -4) | ✅ |
| Tool bonus dice (Crowbar +1d10, Sledgehammer +2d10) | ✅ |
| Critical success (net ≥5) reduces noise and avoids consequences | ✅ |
| Fumble causes 1d6 damage, breaks tool, +2 permanent DC | ✅ |
| Content damage consequence applies with probability | ✅ |
| Alternative methods listed correctly for each obstacle type | ✅ |
| Prerequisites correctly evaluated for alternatives | ✅ |
| Difficulty descriptions map DC ranges correctly | ✅ |
| Noise levels defined with hearing radii | ✅ |
| Build succeeds with 0 errors/warnings | ✅ |
| All unit tests pass | ✅ |
| Configuration files created and valid | ✅ |
| JSON schemas created for validation | ✅ |
| XML documentation complete for all public types | ✅ |
| Exhaustive logging at appropriate levels | ✅ |

---

## Next Steps

- **v0.15.4i:** Integration of alternative methods with existing bypass service flows
- **v0.15.5:** Salvage & Component Identification System
- **v0.15.6:** System Bypass Skill Tree Integration
