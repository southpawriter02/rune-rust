# v0.16.0b Changelog - Stat Scaling System

## Summary

Implements the **Stat Scaling System** for equipment quality tiers. Defines weapon and armor stat modifiers (damage dice, accuracy, HP, defense, penalty reduction, attribute bonuses) that scale with quality tier. This system will be used by the Loot Service (v0.16.0d) to generate tier-appropriate equipment.

## Added

### Domain Layer - Value Objects (3 files)

| File                     | Description                                                                                                                                                                                                  |
| ------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `AttributeBonusRange.cs` | `readonly record struct` for randomized attribute bonuses. Factory methods: `Create()`, `Fixed()`. Static defaults: `Tier2Default`, `Tier3Default`, `Tier4Default`. Helper: `RollBonus(Random)`.             |
| `WeaponTierScaling.cs`   | `readonly record struct` for weapon stat scaling. Properties: `Tier`, `DamageDice`, `AccuracyModifier`, `AttributeBonusRange?`. Factory: `Create()` with validation.                                         |
| `ArmorTierScaling.cs`    | `readonly record struct` for armor stat scaling. Properties: `Tier`, `HpBonus`, `DefenseBonus`, `PenaltyReduction`, `AttributeBonusRange?`. Factory: `Create()` with validation (max penalty reduction = 2). |

### Application Layer - Interfaces (1 file)

| File                     | Description                                                                                                                                                                                                                         |
| ------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `ITierScalingService.cs` | Interface for tier-based scaling access. Methods: `GetWeaponScaling()`, `GetArmorScaling()`, `GetAllWeaponScaling()`, `GetAllArmorScaling()`, `RollWeaponAttributeBonus()`, `RollArmorAttributeBonus()`, `ValidateConfiguration()`. |

### Configuration (2 files)

| File                                      | Description                                                                                                                        |
| ----------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------- |
| `config/tier-scaling.json`                | Weapon and armor scaling for all 5 tiers with damage dice, accuracy, HP, defense, penalty reduction, and attribute bonus ranges.   |
| `config/schemas/tier-scaling.schema.json` | JSON Schema draft-07 for validation. Enforces exactly 5 entries per category, validates dice notation pattern, and numeric ranges. |

### Unit Tests (3 files, 50 test cases)

| File                          | Tests                                                                                                  |
| ----------------------------- | ------------------------------------------------------------------------------------------------------ |
| `AttributeBonusRangeTests.cs` | Create validation, Fixed factory, RollBonus bounds, IsFixed, default tier ranges, ToString formatting. |
| `WeaponTierScalingTests.cs`   | Create validation, HasAttributeBonus, RollAttributeBonus, TierValue, accuracy properties, ToString.    |
| `ArmorTierScalingTests.cs`    | Create validation, HasPenaltyReduction, HasAttributeBonus, RollAttributeBonus, spec values, ToString.  |

## Scaling Values Reference

### Weapon Scaling

| Tier       | Damage | Accuracy | Attribute |
| ---------- | ------ | -------- | --------- |
| JuryRigged | 1d6    | -1       | None      |
| Scavenged  | 1d6+1  | 0        | None      |
| ClanForged | 1d6+3  | 0        | +1        |
| Optimized  | 2d6    | +1       | +1-2      |
| MythForged | 2d6+4  | +2       | +2-4      |

### Armor Scaling

| Tier       | HP  | Def | Penalty | Attribute |
| ---------- | --- | --- | ------- | --------- |
| JuryRigged | +5  | +1  | 0       | None      |
| Scavenged  | +10 | +1  | 0       | None      |
| ClanForged | +15 | +2  | 0       | +1        |
| Optimized  | +20 | +2  | 0       | +1-2      |
| MythForged | +30 | +3  | 1       | +2-4      |

## Files Changed

### Added (9 files)

- `src/Core/RuneAndRust.Domain/ValueObjects/AttributeBonusRange.cs`
- `src/Core/RuneAndRust.Domain/ValueObjects/WeaponTierScaling.cs`
- `src/Core/RuneAndRust.Domain/ValueObjects/ArmorTierScaling.cs`
- `src/Core/RuneAndRust.Application/Interfaces/ITierScalingService.cs`
- `config/tier-scaling.json`
- `config/schemas/tier-scaling.schema.json`
- `tests/RuneAndRust.Domain.UnitTests/ValueObjects/AttributeBonusRangeTests.cs`
- `tests/RuneAndRust.Domain.UnitTests/ValueObjects/WeaponTierScalingTests.cs`
- `tests/RuneAndRust.Domain.UnitTests/ValueObjects/ArmorTierScalingTests.cs`

## Dependencies

### Requires from v0.16.0a

- `QualityTier` enum for tier indexing

### Provides to v0.16.0d

- `WeaponTierScaling`, `ArmorTierScaling`, `ITierScalingService` for loot generation

## Notes

- `TierScalingService` implementation deferred to v0.16.0d (Loot Service Integration)
- Penalty reduction max capped at 2 to prevent armor becoming too light
- Dice notation follows `NdX+Y` pattern (parsed by existing dice system)
