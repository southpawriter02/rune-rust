# v0.12.1b Design Specification: Achievement Service

**Version:** 0.12.1b
**Parent:** v0.12.1 (Achievements & Leaderboards)
**Prerequisites:** v0.12.1a Complete (Achievement Definitions)
**Status:** Design Complete

---

## Table of Contents

1. [Executive Summary](#1-executive-summary)
2. [Feature Overview](#2-feature-overview)
3. [Architecture Diagrams](#3-architecture-diagrams)
4. [PlayerAchievement Entity](#4-playerachievement-entity)
5. [AchievementProgress Record](#5-achievementprogress-record)
6. [IAchievementService Interface](#6-iachievementservice-interface)
7. [AchievementService Implementation](#7-achievementservice-implementation)
8. [Player Entity Updates](#8-player-entity-updates)
9. [Achievement Events](#9-achievement-events)
10. [AchievementNotification Component](#10-achievementnotification-component)
11. [AchievementsCommand](#11-achievementscommand)
12. [Logging Specifications](#12-logging-specifications)
13. [Unit Testing Requirements](#13-unit-testing-requirements)
14. [Use Cases](#14-use-cases)
15. [Deliverable Checklist](#15-deliverable-checklist)
16. [Acceptance Criteria](#16-acceptance-criteria)
17. [Dependencies](#17-dependencies)
18. [Future Considerations](#18-future-considerations)

---

## 1. Executive Summary

### Overview

Version 0.12.1b implements the achievement service for the Achievements & Leaderboards system. This includes the `IAchievementService` interface and implementation for checking achievement conditions against player statistics, the `PlayerAchievement` entity for tracking unlocked achievements, notification display when achievements unlock, progress tracking for locked achievements, and the `AchievementsCommand` for viewing achievements in the TUI. This service builds upon the achievement definitions from v0.12.1a to provide runtime achievement functionality.

### Key Deliverables

| Category | Items |
|----------|-------|
| **Domain Entities** | PlayerAchievement |
| **Application Records** | AchievementProgress |
| **Interfaces** | IAchievementService |
| **Services** | AchievementService |
| **Events** | AchievementUnlockedEvent |
| **UI Components** | AchievementNotification |
| **Commands** | AchievementsCommand |
| **Tests** | ~12 new unit tests |

### Architectural Significance

This version establishes the **Achievement Tracking Pattern** that connects player statistics to achievement unlocks:
- Automatic achievement checking on statistic changes
- Progress tracking for partially completed achievements
- Notification system for achievement unlocks
- Player entity integration for persistent achievement storage

---

## 2. Feature Overview

```
v0.12.1b Achievement Service Features
â”œâ”€â”€ PlayerAchievement Entity
â”‚   â”œâ”€â”€ AchievementId (reference)
â”‚   â”œâ”€â”€ UnlockedAt (timestamp)
â”‚   â””â”€â”€ PointsAwarded
â”‚
â”œâ”€â”€ AchievementProgress Record
â”‚   â”œâ”€â”€ Definition (AchievementDefinition)
â”‚   â”œâ”€â”€ IsUnlocked (bool)
â”‚   â”œâ”€â”€ ConditionProgress (list)
â”‚   â””â”€â”€ OverallProgress (0.0-1.0)
â”‚
â”œâ”€â”€ IAchievementService Interface
â”‚   â”œâ”€â”€ CheckAchievements(player)
â”‚   â”œâ”€â”€ GetUnlockedAchievements(player)
â”‚   â”œâ”€â”€ GetProgress(player)
â”‚   â”œâ”€â”€ GetTotalPoints(player)
â”‚   â””â”€â”€ IsUnlocked(player, achievementId)
â”‚
â”œâ”€â”€ AchievementService Implementation
â”‚   â”œâ”€â”€ Condition evaluation
â”‚   â”œâ”€â”€ Statistic lookup
â”‚   â”œâ”€â”€ Unlock processing
â”‚   â”œâ”€â”€ Progress calculation
â”‚   â””â”€â”€ Event publishing
â”‚
â”œâ”€â”€ Player Entity Updates
â”‚   â”œâ”€â”€ List<PlayerAchievement> _achievements
â”‚   â”œâ”€â”€ AddAchievement(achievementId, points)
â”‚   â”œâ”€â”€ HasAchievement(achievementId)
â”‚   â””â”€â”€ IReadOnlyList<PlayerAchievement> Achievements
â”‚
â”œâ”€â”€ AchievementUnlockedEvent
â”‚   â”œâ”€â”€ PlayerId
â”‚   â”œâ”€â”€ AchievementId
â”‚   â”œâ”€â”€ AchievementName
â”‚   â””â”€â”€ PointsAwarded
â”‚
â”œâ”€â”€ AchievementNotification
â”‚   â”œâ”€â”€ Achievement name
â”‚   â”œâ”€â”€ Description
â”‚   â”œâ”€â”€ Tier icon
â”‚   â””â”€â”€ Points awarded
â”‚
â””â”€â”€ AchievementsCommand
    â”œâ”€â”€ Category tabs
    â”œâ”€â”€ Locked/unlocked status
    â”œâ”€â”€ Progress display
    â””â”€â”€ Total points
```

---

## 3. Architecture Diagrams

### 3.1 Achievement Service Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ACHIEVEMENT SERVICE ARCHITECTURE                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚       Statistics System       â”‚
                    â”‚   (StatisticsService)         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚ stat changes
                                    â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      IAchievementService       â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ + CheckAchievements(player)   â”‚
                    â”‚ + GetProgress(player)         â”‚
                    â”‚ + GetTotalPoints(player)      â”‚
                    â”‚ + IsUnlocked(player, id)      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚       AchievementService       â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ - _achievementProvider        â”‚
                    â”‚ - _statisticsService          â”‚
                    â”‚ - _eventBus                   â”‚
                    â”‚ - _notificationService        â”‚
                    â”‚                               â”‚
                    â”‚ + EvaluateConditions()        â”‚
                    â”‚ + UnlockAchievement()         â”‚
                    â”‚ + CalculateProgress()         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚           â”‚
                             â–¼           â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ IAchievementProviderâ”‚  â”‚  IStatisticsService â”‚
            â”‚ (get definitions)   â”‚  â”‚  (get player stats) â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Achievement Check Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ACHIEVEMENT CHECK FLOW                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Trigger: Statistic Updated (e.g., monster killed)
                    â”‚
                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 1. GET ALL ACHIEVEMENTS                        â”‚
    â”‚                                                                â”‚
    â”‚   achievementProvider.GetAllAchievements()                    â”‚
    â”‚   â†’ Returns all AchievementDefinition entities                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              2. FILTER UNLOCKED ACHIEVEMENTS                   â”‚
    â”‚                                                                â”‚
    â”‚   foreach achievement in allAchievements:                      â”‚
    â”‚       if player.HasAchievement(achievement.AchievementId):    â”‚
    â”‚           skip  (already unlocked)                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              3. EVALUATE CONDITIONS                            â”‚
    â”‚                                                                â”‚
    â”‚   foreach condition in achievement.Conditions:                 â”‚
    â”‚       playerValue = GetStatisticValue(condition.StatisticName)â”‚
    â”‚       if !condition.Evaluate(playerValue):                    â”‚
    â”‚           achievement NOT unlocked â†’ continue to next         â”‚
    â”‚                                                                â”‚
    â”‚   ALL conditions passed â†’ proceed to unlock                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              4. UNLOCK ACHIEVEMENT                             â”‚
    â”‚                                                                â”‚
    â”‚   player.AddAchievement(achievementId, points)                â”‚
    â”‚   eventBus.Publish(AchievementUnlockedEvent)                  â”‚
    â”‚   notificationService.ShowAchievementUnlock(achievement)      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              5. LOG ACHIEVEMENT                                â”‚
    â”‚                                                                â”‚
    â”‚   _logger.LogInformation(                                     â”‚
    â”‚       "Achievement unlocked: {Name} (+{Points})",             â”‚
    â”‚       achievement.Name, achievement.Points)                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 Progress Calculation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PROGRESS CALCULATION FLOW                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Input: AchievementDefinition with multiple conditions

    Example: "Boss Hunter" achievement
    â”œâ”€â”€ Condition 1: bossesKilled >= 5
    â””â”€â”€ Condition 2: damageDealt >= 10000

    STEP 1: Calculate per-condition progress
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Player Stats: bossesKilled = 3, damageDealt = 7500

    Condition 1: 3 / 5 = 0.60 (60%)
    Condition 2: 7500 / 10000 = 0.75 (75%)

    STEP 2: Calculate overall progress
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Method: Average of all condition progress values

    Overall = (0.60 + 0.75) / 2 = 0.675 (67.5%)

    STEP 3: Build progress result
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    AchievementProgress {
        Definition: "Boss Hunter"
        IsUnlocked: false
        ConditionProgress: [
            { Condition: "bossesKilled >= 5", Progress: 0.60, Current: 3, Target: 5 }
            { Condition: "damageDealt >= 10000", Progress: 0.75, Current: 7500, Target: 10000 }
        ]
        OverallProgress: 0.675
    }
```

### 3.4 Notification Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       NOTIFICATION FLOW                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Achievement Unlocked
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 AchievementUnlockedEvent                       â”‚
    â”‚                                                                â”‚
    â”‚   PlayerId: <guid>                                            â”‚
    â”‚   AchievementId: "monster-slayer"                             â”‚
    â”‚   AchievementName: "Monster Slayer"                           â”‚
    â”‚   PointsAwarded: 25                                           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚             INotificationService.ShowAchievement              â”‚
    â”‚                                                                â”‚
    â”‚   notificationService.ShowAchievementUnlock(definition)       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘  ğŸ†  ACHIEVEMENT UNLOCKED!                        â•‘
    â•‘                                                   â•‘
    â•‘  MONSTER SLAYER                                   â•‘
    â•‘  Defeat 100 monsters                              â•‘
    â•‘                                                   â•‘
    â•‘  ğŸ¥ˆ Silver   |   +25 Points                       â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           â”‚
           â”‚  (Auto-dismiss after 5 seconds)
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                  Notification Dismissed                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.5 Clean Architecture Layer Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CLEAN ARCHITECTURE LAYERS                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                      PRESENTATION LAYER                          â”‚
    â”‚                                                                  â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚   AchievementsCommand   â”‚  â”‚  AchievementNotification    â”‚   â”‚
    â”‚  â”‚                         â”‚  â”‚                             â”‚   â”‚
    â”‚  â”‚ - Display achievements  â”‚  â”‚ - Pop-up on unlock          â”‚   â”‚
    â”‚  â”‚ - Show progress         â”‚  â”‚ - Tier icon                 â”‚   â”‚
    â”‚  â”‚ - Category tabs         â”‚  â”‚ - Points display            â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                      APPLICATION LAYER                           â”‚
    â”‚                                                                  â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚  IAchievementService    â”‚  â”‚   AchievementProgress       â”‚   â”‚
    â”‚  â”‚  (interface)            â”‚  â”‚   (record)                  â”‚   â”‚
    â”‚  â”‚                         â”‚  â”‚                             â”‚   â”‚
    â”‚  â”‚ + CheckAchievements()   â”‚  â”‚ + Definition                â”‚   â”‚
    â”‚  â”‚ + GetProgress()         â”‚  â”‚ + IsUnlocked                â”‚   â”‚
    â”‚  â”‚ + GetTotalPoints()      â”‚  â”‚ + ConditionProgress         â”‚   â”‚
    â”‚  â”‚ + IsUnlocked()          â”‚  â”‚ + OverallProgress           â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                                                  â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚  â”‚                  AchievementService                      â”‚    â”‚
    â”‚  â”‚                                                          â”‚    â”‚
    â”‚  â”‚ + CheckAchievements(player)                             â”‚    â”‚
    â”‚  â”‚ + GetUnlockedAchievements(player)                       â”‚    â”‚
    â”‚  â”‚ + GetProgress(player)                                   â”‚    â”‚
    â”‚  â”‚ - EvaluateConditions(conditions, stats)                 â”‚    â”‚
    â”‚  â”‚ - UnlockAchievement(player, definition)                 â”‚    â”‚
    â”‚  â”‚ - GetStatisticValue(player, statName)                   â”‚    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                        DOMAIN LAYER                              â”‚
    â”‚                                                                  â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚   PlayerAchievement     â”‚  â”‚ AchievementUnlockedEvent    â”‚   â”‚
    â”‚  â”‚   (entity)              â”‚  â”‚ (domain event)              â”‚   â”‚
    â”‚  â”‚                         â”‚  â”‚                             â”‚   â”‚
    â”‚  â”‚ + Id: Guid              â”‚  â”‚ + PlayerId                  â”‚   â”‚
    â”‚  â”‚ + AchievementId: string â”‚  â”‚ + AchievementId             â”‚   â”‚
    â”‚  â”‚ + UnlockedAt: DateTime  â”‚  â”‚ + AchievementName           â”‚   â”‚
    â”‚  â”‚ + PointsAwarded: int    â”‚  â”‚ + PointsAwarded             â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                                                  â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚  â”‚              Player Entity (Updated)                     â”‚    â”‚
    â”‚  â”‚                                                          â”‚    â”‚
    â”‚  â”‚ + Achievements: IReadOnlyList<PlayerAchievement>        â”‚    â”‚
    â”‚  â”‚ + AddAchievement(achievementId, points)                 â”‚    â”‚
    â”‚  â”‚ + HasAchievement(achievementId)                         â”‚    â”‚
    â”‚  â”‚ + GetTotalAchievementPoints()                           â”‚    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. PlayerAchievement Entity

### 4.1 Entity Definition

**File:** `src/Core/RuneAndRust.Domain/Entities/PlayerAchievement.cs`

```csharp
namespace RuneAndRust.Domain.Entities;

using RuneAndRust.Domain.Interfaces;

/// <summary>
/// Represents an achievement that has been unlocked by a player.
/// </summary>
/// <remarks>
/// <para>Player achievements track:</para>
/// <list type="bullet">
///   <item><description>The achievement definition ID</description></item>
///   <item><description>When the achievement was unlocked</description></item>
///   <item><description>Points awarded (captured at unlock time)</description></item>
/// </list>
/// <para>This entity is stored as part of the Player aggregate.</para>
/// </remarks>
public class PlayerAchievement : IEntity
{
    /// <summary>
    /// Gets the unique identifier for this player achievement record.
    /// </summary>
    public Guid Id { get; private set; }

    /// <summary>
    /// Gets the achievement definition ID that was unlocked.
    /// </summary>
    /// <example>"first-blood", "monster-slayer"</example>
    public string AchievementId { get; private set; } = null!;

    /// <summary>
    /// Gets the timestamp when this achievement was unlocked.
    /// </summary>
    public DateTime UnlockedAt { get; private set; }

    /// <summary>
    /// Gets the points awarded for this achievement.
    /// </summary>
    /// <remarks>
    /// Points are captured at unlock time to preserve historical accuracy
    /// even if the achievement definition changes later.
    /// </remarks>
    public int PointsAwarded { get; private set; }

    /// <summary>
    /// Private constructor for EF Core and factory method.
    /// </summary>
    private PlayerAchievement() { }

    /// <summary>
    /// Creates a new PlayerAchievement record.
    /// </summary>
    /// <param name="achievementId">The achievement definition ID.</param>
    /// <param name="points">The points to award.</param>
    /// <returns>A new PlayerAchievement instance.</returns>
    /// <exception cref="ArgumentException">If achievementId is null or empty.</exception>
    /// <exception cref="ArgumentOutOfRangeException">If points is negative.</exception>
    public static PlayerAchievement Create(string achievementId, int points)
    {
        ArgumentException.ThrowIfNullOrWhiteSpace(achievementId);
        ArgumentOutOfRangeException.ThrowIfNegative(points);

        return new PlayerAchievement
        {
            Id = Guid.NewGuid(),
            AchievementId = achievementId,
            UnlockedAt = DateTime.UtcNow,
            PointsAwarded = points
        };
    }
}
```

---

## 5. AchievementProgress Record

### 5.1 Record Definition

**File:** `src/Core/RuneAndRust.Application/Models/AchievementProgress.cs`

```csharp
namespace RuneAndRust.Application.Models;

using RuneAndRust.Domain.Entities;

/// <summary>
/// Represents the progress towards an achievement for display purposes.
/// </summary>
/// <remarks>
/// <para>Progress tracking includes:</para>
/// <list type="bullet">
///   <item><description>The achievement definition</description></item>
///   <item><description>Whether it's already unlocked</description></item>
///   <item><description>Per-condition progress details</description></item>
///   <item><description>Overall progress as a percentage</description></item>
/// </list>
/// </remarks>
/// <param name="Definition">The achievement definition.</param>
/// <param name="IsUnlocked">Whether the player has unlocked this achievement.</param>
/// <param name="ConditionProgress">Progress for each condition.</param>
/// <param name="OverallProgress">Overall progress from 0.0 to 1.0.</param>
public record AchievementProgress(
    AchievementDefinition Definition,
    bool IsUnlocked,
    IReadOnlyList<ConditionProgress> ConditionProgress,
    double OverallProgress)
{
    /// <summary>
    /// Gets whether this achievement is partially complete (has some but not full progress).
    /// </summary>
    public bool IsPartiallyComplete => !IsUnlocked && OverallProgress > 0.0;

    /// <summary>
    /// Gets the progress as a display percentage (0-100).
    /// </summary>
    public int ProgressPercent => (int)(OverallProgress * 100);
}

/// <summary>
/// Represents progress for a single achievement condition.
/// </summary>
/// <param name="Condition">The condition being tracked.</param>
/// <param name="CurrentValue">The player's current value for the statistic.</param>
/// <param name="TargetValue">The target value required.</param>
/// <param name="Progress">Progress from 0.0 to 1.0.</param>
/// <param name="IsMet">Whether this condition is satisfied.</param>
public record ConditionProgress(
    AchievementCondition Condition,
    long CurrentValue,
    long TargetValue,
    double Progress,
    bool IsMet);
```

---

## 6. IAchievementService Interface

### 6.1 Interface Definition

**File:** `src/Core/RuneAndRust.Application/Interfaces/IAchievementService.cs`

```csharp
namespace RuneAndRust.Application.Interfaces;

using RuneAndRust.Application.Models;
using RuneAndRust.Domain.Entities;

/// <summary>
/// Service for checking, tracking, and managing player achievements.
/// </summary>
/// <remarks>
/// <para>The achievement service provides:</para>
/// <list type="bullet">
///   <item><description>Achievement condition checking against player statistics</description></item>
///   <item><description>Progress tracking for locked achievements</description></item>
///   <item><description>Total points calculation</description></item>
///   <item><description>Unlock status queries</description></item>
/// </list>
/// </remarks>
public interface IAchievementService
{
    /// <summary>
    /// Checks all achievements and unlocks any whose conditions are now met.
    /// </summary>
    /// <param name="player">The player to check achievements for.</param>
    /// <remarks>
    /// This method should be called after statistics are updated to detect
    /// newly unlocked achievements. It publishes AchievementUnlockedEvent
    /// for each achievement that unlocks.
    /// </remarks>
    void CheckAchievements(Player player);

    /// <summary>
    /// Gets all achievements the player has unlocked.
    /// </summary>
    /// <param name="player">The player to query.</param>
    /// <returns>List of unlocked player achievements.</returns>
    IReadOnlyList<PlayerAchievement> GetUnlockedAchievements(Player player);

    /// <summary>
    /// Gets progress information for all achievements.
    /// </summary>
    /// <param name="player">The player to get progress for.</param>
    /// <returns>Progress records for all achievements.</returns>
    IReadOnlyList<AchievementProgress> GetProgress(Player player);

    /// <summary>
    /// Gets progress for achievements in a specific category.
    /// </summary>
    /// <param name="player">The player to get progress for.</param>
    /// <param name="category">The category to filter by.</param>
    /// <returns>Progress records for achievements in the category.</returns>
    IReadOnlyList<AchievementProgress> GetProgressByCategory(
        Player player,
        AchievementCategory category);

    /// <summary>
    /// Gets the total achievement points earned by the player.
    /// </summary>
    /// <param name="player">The player to query.</param>
    /// <returns>Total points from all unlocked achievements.</returns>
    int GetTotalPoints(Player player);

    /// <summary>
    /// Checks if a specific achievement is unlocked.
    /// </summary>
    /// <param name="player">The player to query.</param>
    /// <param name="achievementId">The achievement ID to check.</param>
    /// <returns>True if the achievement is unlocked.</returns>
    bool IsUnlocked(Player player, string achievementId);

    /// <summary>
    /// Gets the count of unlocked achievements.
    /// </summary>
    /// <param name="player">The player to query.</param>
    /// <returns>Number of unlocked achievements.</returns>
    int GetUnlockedCount(Player player);
}
```

---

## 7. AchievementService Implementation

### 7.1 Service Implementation

**File:** `src/Core/RuneAndRust.Application/Services/AchievementService.cs`

```csharp
namespace RuneAndRust.Application.Services;

using Microsoft.Extensions.Logging;
using RuneAndRust.Application.Interfaces;
using RuneAndRust.Application.Models;
using RuneAndRust.Domain.Entities;
using RuneAndRust.Domain.Enums;
using RuneAndRust.Domain.Events;

/// <summary>
/// Service for checking and managing player achievements.
/// </summary>
/// <remarks>
/// <para>This service:</para>
/// <list type="bullet">
///   <item><description>Evaluates achievement conditions against player statistics</description></item>
///   <item><description>Unlocks achievements when all conditions are met</description></item>
///   <item><description>Publishes events when achievements unlock</description></item>
///   <item><description>Calculates progress for locked achievements</description></item>
/// </list>
/// </remarks>
public class AchievementService : IAchievementService
{
    private readonly IAchievementProvider _achievementProvider;
    private readonly IStatisticsService _statisticsService;
    private readonly IEventBus _eventBus;
    private readonly INotificationService _notificationService;
    private readonly ILogger<AchievementService> _logger;

    /// <summary>
    /// Initializes a new instance of the <see cref="AchievementService"/> class.
    /// </summary>
    /// <param name="achievementProvider">Provider for achievement definitions.</param>
    /// <param name="statisticsService">Service for player statistics.</param>
    /// <param name="eventBus">Event bus for publishing events.</param>
    /// <param name="notificationService">Service for displaying notifications.</param>
    /// <param name="logger">Logger for diagnostics.</param>
    public AchievementService(
        IAchievementProvider achievementProvider,
        IStatisticsService statisticsService,
        IEventBus eventBus,
        INotificationService notificationService,
        ILogger<AchievementService> logger)
    {
        _achievementProvider = achievementProvider
            ?? throw new ArgumentNullException(nameof(achievementProvider));
        _statisticsService = statisticsService
            ?? throw new ArgumentNullException(nameof(statisticsService));
        _eventBus = eventBus
            ?? throw new ArgumentNullException(nameof(eventBus));
        _notificationService = notificationService
            ?? throw new ArgumentNullException(nameof(notificationService));
        _logger = logger
            ?? throw new ArgumentNullException(nameof(logger));
    }

    /// <inheritdoc />
    public void CheckAchievements(Player player)
    {
        ArgumentNullException.ThrowIfNull(player);

        _logger.LogDebug("Checking achievements for player {PlayerId}", player.Id);

        var statistics = _statisticsService.GetPlayerStatistics(player);
        var allAchievements = _achievementProvider.GetAllAchievements();

        foreach (var achievement in allAchievements)
        {
            // Skip if already unlocked
            if (player.HasAchievement(achievement.AchievementId))
            {
                continue;
            }

            // Evaluate all conditions
            if (EvaluateConditions(achievement.Conditions, statistics, player))
            {
                UnlockAchievement(player, achievement);
            }
        }
    }

    /// <inheritdoc />
    public IReadOnlyList<PlayerAchievement> GetUnlockedAchievements(Player player)
    {
        ArgumentNullException.ThrowIfNull(player);
        return player.Achievements;
    }

    /// <inheritdoc />
    public IReadOnlyList<AchievementProgress> GetProgress(Player player)
    {
        ArgumentNullException.ThrowIfNull(player);

        var statistics = _statisticsService.GetPlayerStatistics(player);
        var allAchievements = _achievementProvider.GetAllAchievements();
        var progressList = new List<AchievementProgress>();

        foreach (var achievement in allAchievements)
        {
            var progress = CalculateProgress(achievement, statistics, player);
            progressList.Add(progress);
        }

        return progressList.AsReadOnly();
    }

    /// <inheritdoc />
    public IReadOnlyList<AchievementProgress> GetProgressByCategory(
        Player player,
        AchievementCategory category)
    {
        ArgumentNullException.ThrowIfNull(player);

        var statistics = _statisticsService.GetPlayerStatistics(player);
        var achievements = _achievementProvider.GetAchievementsByCategory(category);
        var progressList = new List<AchievementProgress>();

        foreach (var achievement in achievements)
        {
            var progress = CalculateProgress(achievement, statistics, player);
            progressList.Add(progress);
        }

        return progressList.AsReadOnly();
    }

    /// <inheritdoc />
    public int GetTotalPoints(Player player)
    {
        ArgumentNullException.ThrowIfNull(player);
        return player.GetTotalAchievementPoints();
    }

    /// <inheritdoc />
    public bool IsUnlocked(Player player, string achievementId)
    {
        ArgumentNullException.ThrowIfNull(player);
        ArgumentException.ThrowIfNullOrWhiteSpace(achievementId);
        return player.HasAchievement(achievementId);
    }

    /// <inheritdoc />
    public int GetUnlockedCount(Player player)
    {
        ArgumentNullException.ThrowIfNull(player);
        return player.Achievements.Count;
    }

    /// <summary>
    /// Evaluates all conditions for an achievement.
    /// </summary>
    /// <param name="conditions">The conditions to evaluate.</param>
    /// <param name="statistics">The player's statistics.</param>
    /// <param name="player">The player being evaluated.</param>
    /// <returns>True if all conditions are met.</returns>
    private bool EvaluateConditions(
        IReadOnlyList<AchievementCondition> conditions,
        PlayerStatistics statistics,
        Player player)
    {
        if (conditions.Count == 0)
        {
            _logger.LogWarning("Achievement has no conditions, cannot unlock");
            return false;
        }

        foreach (var condition in conditions)
        {
            var value = GetStatisticValue(condition.StatisticName, statistics, player);
            if (!condition.Evaluate(value))
            {
                return false;
            }
        }

        return true;
    }

    /// <summary>
    /// Unlocks an achievement for a player.
    /// </summary>
    /// <param name="player">The player unlocking the achievement.</param>
    /// <param name="achievement">The achievement to unlock.</param>
    private void UnlockAchievement(Player player, AchievementDefinition achievement)
    {
        player.AddAchievement(achievement.AchievementId, achievement.Points);

        _logger.LogInformation(
            "Achievement unlocked: {Name} (+{Points} points) for player {PlayerId}",
            achievement.Name,
            achievement.Points,
            player.Id);

        var unlockEvent = new AchievementUnlockedEvent(
            player.Id,
            achievement.AchievementId,
            achievement.Name,
            achievement.Points);

        _eventBus.Publish(unlockEvent);
        _notificationService.ShowAchievementUnlock(achievement);
    }

    /// <summary>
    /// Calculates progress for an achievement.
    /// </summary>
    /// <param name="achievement">The achievement to calculate progress for.</param>
    /// <param name="statistics">The player's statistics.</param>
    /// <param name="player">The player being evaluated.</param>
    /// <returns>The achievement progress record.</returns>
    private AchievementProgress CalculateProgress(
        AchievementDefinition achievement,
        PlayerStatistics statistics,
        Player player)
    {
        var isUnlocked = player.HasAchievement(achievement.AchievementId);
        var conditionProgressList = new List<ConditionProgress>();
        var totalProgress = 0.0;

        foreach (var condition in achievement.Conditions)
        {
            var currentValue = GetStatisticValue(condition.StatisticName, statistics, player);
            var progress = condition.GetProgress(currentValue);
            var isMet = condition.Evaluate(currentValue);

            conditionProgressList.Add(new ConditionProgress(
                condition,
                currentValue,
                condition.Value,
                progress,
                isMet));

            totalProgress += progress;
        }

        var overallProgress = achievement.Conditions.Count > 0
            ? totalProgress / achievement.Conditions.Count
            : 0.0;

        if (isUnlocked)
        {
            overallProgress = 1.0;
        }

        return new AchievementProgress(
            achievement,
            isUnlocked,
            conditionProgressList.AsReadOnly(),
            overallProgress);
    }

    /// <summary>
    /// Gets a statistic value by name from player statistics or dice history.
    /// </summary>
    /// <param name="statisticName">The name of the statistic.</param>
    /// <param name="statistics">The player's statistics.</param>
    /// <param name="player">The player.</param>
    /// <returns>The statistic value, or 0 if not found.</returns>
    private long GetStatisticValue(
        string statisticName,
        PlayerStatistics statistics,
        Player player)
    {
        // Map statistic names to actual values
        return statisticName.ToLowerInvariant() switch
        {
            // Combat statistics
            "monsterskilled" => statistics.MonstersKilled,
            "bosseskilled" => statistics.BossesKilled,
            "damagedone" or "damagedealt" => statistics.TotalDamageDealt,
            "damagetaken" => statistics.TotalDamageTaken,
            "criticalhits" => statistics.CriticalHits,
            "flawlessbosskills" => statistics.FlawlessBossKills,

            // Exploration statistics
            "roomsdiscovered" => statistics.RoomsDiscovered,
            "secretsfound" => statistics.SecretsFound,
            "chestsopened" => statistics.ChestsOpened,

            // Progression statistics
            "levelsgained" => statistics.LevelsGained,
            "totalxpearned" => statistics.TotalXpEarned,
            "questscompleted" => statistics.QuestsCompleted,

            // Collection statistics
            "goldearned" => statistics.TotalGoldEarned,
            "itemsfound" => statistics.ItemsFound,
            "itemscrafted" => statistics.ItemsCrafted,

            // Dice statistics (from DiceRollHistory)
            "totalnaturaltwenties" or "nat20count" => GetDiceStatistic(player, "totalNaturalTwenties"),
            "longestnat20streak" => GetDiceStatistic(player, "longestNat20Streak"),
            "totalrollcount" => GetDiceStatistic(player, "totalRollCount"),

            // Time statistics
            "totalplaytimeminutes" => statistics.TotalPlaytimeMinutes,
            "fastestcompletionminutes" => statistics.FastestCompletionMinutes ?? long.MaxValue,

            _ => 0
        };
    }

    /// <summary>
    /// Gets a dice-related statistic value.
    /// </summary>
    /// <param name="player">The player.</param>
    /// <param name="statName">The dice statistic name.</param>
    /// <returns>The statistic value.</returns>
    private long GetDiceStatistic(Player player, string statName)
    {
        var diceHistory = _statisticsService.GetDiceRollHistory(player);
        if (diceHistory is null)
        {
            return 0;
        }

        return statName.ToLowerInvariant() switch
        {
            "totalnaturaltwenties" => diceHistory.TotalNaturalTwenties,
            "longestnat20streak" => diceHistory.LongestNat20Streak,
            "totalrollcount" => diceHistory.TotalRollCount,
            _ => 0
        };
    }
}
```

---

## 8. Player Entity Updates

### 8.1 Player Entity Additions

**File:** `src/Core/RuneAndRust.Domain/Entities/Player.cs` (additions)

```csharp
// Add to existing Player class:

/// <summary>
/// Backing field for player achievements.
/// </summary>
private readonly List<PlayerAchievement> _achievements = new();

/// <summary>
/// Gets the achievements this player has unlocked.
/// </summary>
public IReadOnlyList<PlayerAchievement> Achievements => _achievements.AsReadOnly();

/// <summary>
/// Adds a new achievement to the player's collection.
/// </summary>
/// <param name="achievementId">The achievement definition ID.</param>
/// <param name="points">The points to award.</param>
/// <exception cref="InvalidOperationException">If the achievement is already unlocked.</exception>
public void AddAchievement(string achievementId, int points)
{
    ArgumentException.ThrowIfNullOrWhiteSpace(achievementId);

    if (HasAchievement(achievementId))
    {
        throw new InvalidOperationException(
            $"Achievement '{achievementId}' is already unlocked");
    }

    var achievement = PlayerAchievement.Create(achievementId, points);
    _achievements.Add(achievement);
}

/// <summary>
/// Checks if the player has unlocked a specific achievement.
/// </summary>
/// <param name="achievementId">The achievement ID to check.</param>
/// <returns>True if the achievement is unlocked.</returns>
public bool HasAchievement(string achievementId)
{
    ArgumentException.ThrowIfNullOrWhiteSpace(achievementId);
    return _achievements.Any(a => a.AchievementId == achievementId);
}

/// <summary>
/// Gets the total achievement points earned by this player.
/// </summary>
/// <returns>Sum of all unlocked achievement points.</returns>
public int GetTotalAchievementPoints()
{
    return _achievements.Sum(a => a.PointsAwarded);
}
```

---

## 9. Achievement Events

### 9.1 AchievementUnlockedEvent

**File:** `src/Core/RuneAndRust.Domain/Events/AchievementUnlockedEvent.cs`

```csharp
namespace RuneAndRust.Domain.Events;

/// <summary>
/// Event raised when a player unlocks an achievement.
/// </summary>
/// <remarks>
/// <para>This event is published by the AchievementService when an achievement's
/// conditions are all satisfied. Subscribers can use this to:</para>
/// <list type="bullet">
///   <item><description>Display unlock notifications</description></item>
///   <item><description>Play achievement sounds</description></item>
///   <item><description>Update UI achievement displays</description></item>
///   <item><description>Log achievement unlocks</description></item>
/// </list>
/// </remarks>
/// <param name="PlayerId">The ID of the player who unlocked the achievement.</param>
/// <param name="AchievementId">The achievement definition ID.</param>
/// <param name="AchievementName">The display name of the achievement.</param>
/// <param name="PointsAwarded">The points awarded for this achievement.</param>
public record AchievementUnlockedEvent(
    Guid PlayerId,
    string AchievementId,
    string AchievementName,
    int PointsAwarded) : IDomainEvent
{
    /// <summary>
    /// Gets the timestamp when this event occurred.
    /// </summary>
    public DateTime OccurredAt { get; init; } = DateTime.UtcNow;
}
```

---

## 10. AchievementNotification Component

### 10.1 Notification Display

**File:** `src/Presentation/RuneAndRust.ConsoleUI/Components/AchievementNotification.cs`

```csharp
namespace RuneAndRust.ConsoleUI.Components;

using RuneAndRust.Domain.Entities;
using RuneAndRust.Domain.Enums;
using Spectre.Console;

/// <summary>
/// Renders achievement unlock notifications in the TUI.
/// </summary>
/// <remarks>
/// <para>The notification displays:</para>
/// <list type="bullet">
///   <item><description>Achievement unlocked header</description></item>
///   <item><description>Achievement name and description</description></item>
///   <item><description>Tier with appropriate icon</description></item>
///   <item><description>Points awarded</description></item>
/// </list>
/// </remarks>
public static class AchievementNotification
{
    /// <summary>
    /// Renders an achievement unlock notification.
    /// </summary>
    /// <param name="achievement">The achievement that was unlocked.</param>
    public static void Render(AchievementDefinition achievement)
    {
        var tierIcon = GetTierIcon(achievement.Tier);
        var tierColor = GetTierColor(achievement.Tier);

        var panel = new Panel(
            new Rows(
                new Markup("[bold yellow]ğŸ†  ACHIEVEMENT UNLOCKED![/]"),
                new Markup(""),
                new Markup($"[bold white]{achievement.Name.EscapeMarkup()}[/]"),
                new Markup($"[grey]{achievement.Description.EscapeMarkup()}[/]"),
                new Markup(""),
                new Markup($"[{tierColor}]{tierIcon} {achievement.Tier}[/]   |   [green]+{achievement.Points} Points[/]")))
        {
            Border = BoxBorder.Double,
            BorderStyle = new Style(Color.Gold1),
            Padding = new Padding(2, 1),
            Header = new PanelHeader("")
        };

        AnsiConsole.Write(panel);
    }

    /// <summary>
    /// Gets the icon for a tier.
    /// </summary>
    private static string GetTierIcon(AchievementTier tier)
    {
        return tier switch
        {
            AchievementTier.Bronze => "ğŸ¥‰",
            AchievementTier.Silver => "ğŸ¥ˆ",
            AchievementTier.Gold => "ğŸ¥‡",
            AchievementTier.Platinum => "ğŸ’",
            _ => "ğŸ†"
        };
    }

    /// <summary>
    /// Gets the color for a tier.
    /// </summary>
    private static string GetTierColor(AchievementTier tier)
    {
        return tier switch
        {
            AchievementTier.Bronze => "orange3",
            AchievementTier.Silver => "silver",
            AchievementTier.Gold => "gold1",
            AchievementTier.Platinum => "mediumpurple1",
            _ => "white"
        };
    }
}
```

### 10.2 Notification Display Example

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ†  ACHIEVEMENT UNLOCKED!                        â•‘
â•‘                                                   â•‘
â•‘  MONSTER SLAYER                                   â•‘
â•‘  Defeat 100 monsters                              â•‘
â•‘                                                   â•‘
â•‘  ğŸ¥ˆ Silver   |   +25 Points                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## 11. AchievementsCommand

### 11.1 Command Definition

**File:** `src/Presentation/RuneAndRust.ConsoleUI/Commands/AchievementsCommand.cs`

```csharp
namespace RuneAndRust.ConsoleUI.Commands;

using RuneAndRust.Application.Interfaces;
using RuneAndRust.Application.Models;
using RuneAndRust.Domain.Entities;
using RuneAndRust.Domain.Enums;
using Spectre.Console;

/// <summary>
/// Command for viewing achievements in the TUI.
/// </summary>
/// <remarks>
/// Usage: achievements [category]
/// Categories: combat, exploration, progression, collection, challenge, secret, all
/// </remarks>
public class AchievementsCommand : IGameCommand
{
    private readonly IAchievementService _achievementService;
    private readonly IAchievementProvider _achievementProvider;

    /// <summary>
    /// Initializes a new instance of the <see cref="AchievementsCommand"/> class.
    /// </summary>
    public AchievementsCommand(
        IAchievementService achievementService,
        IAchievementProvider achievementProvider)
    {
        _achievementService = achievementService;
        _achievementProvider = achievementProvider;
    }

    /// <summary>
    /// Executes the achievements command.
    /// </summary>
    /// <param name="player">The current player.</param>
    /// <param name="argument">Optional category filter.</param>
    public void Execute(Player player, string? argument)
    {
        var totalPoints = _achievementService.GetTotalPoints(player);
        var maxPoints = _achievementProvider.GetMaxPossiblePoints();
        var unlockedCount = _achievementService.GetUnlockedCount(player);
        var totalCount = _achievementProvider.GetAchievementCount();

        // Header
        var headerTable = new Table()
            .Border(TableBorder.None)
            .HideHeaders()
            .AddColumn("Info")
            .AddRow($"[bold]ACHIEVEMENTS[/]  |  {unlockedCount}/{totalCount} Unlocked  |  {totalPoints}/{maxPoints} Points");

        AnsiConsole.Write(headerTable);
        AnsiConsole.WriteLine();

        // Determine which category to show
        var category = ParseCategory(argument);

        if (category.HasValue)
        {
            RenderCategory(player, category.Value);
        }
        else
        {
            RenderAllCategories(player);
        }
    }

    /// <summary>
    /// Parses a category from the argument string.
    /// </summary>
    private AchievementCategory? ParseCategory(string? argument)
    {
        if (string.IsNullOrWhiteSpace(argument) || argument.Equals("all", StringComparison.OrdinalIgnoreCase))
        {
            return null;
        }

        return Enum.TryParse<AchievementCategory>(argument, true, out var category)
            ? category
            : null;
    }

    /// <summary>
    /// Renders all categories.
    /// </summary>
    private void RenderAllCategories(Player player)
    {
        foreach (var category in Enum.GetValues<AchievementCategory>())
        {
            RenderCategory(player, category);
            AnsiConsole.WriteLine();
        }
    }

    /// <summary>
    /// Renders a single category.
    /// </summary>
    private void RenderCategory(Player player, AchievementCategory category)
    {
        var progress = _achievementService.GetProgressByCategory(player, category);

        if (progress.Count == 0)
        {
            return;
        }

        var categoryHeader = $"[bold cyan]â•â•â• {category} â•â•â•[/]";
        AnsiConsole.MarkupLine(categoryHeader);

        var table = new Table()
            .Border(TableBorder.Rounded)
            .AddColumn("Status")
            .AddColumn("Achievement")
            .AddColumn("Progress")
            .AddColumn("Tier")
            .AddColumn("Points");

        foreach (var item in progress)
        {
            var status = item.IsUnlocked ? "[green]âœ“[/]" : "[grey]â—‹[/]";
            var name = item.Definition.GetDisplayName(item.IsUnlocked);
            var description = item.Definition.GetDisplayDescription(item.IsUnlocked);
            var nameCol = $"[bold]{name.EscapeMarkup()}[/]\n[grey]{description.EscapeMarkup()}[/]";

            var progressBar = RenderProgressBar(item);
            var tier = GetTierDisplay(item.Definition.Tier);
            var points = item.IsUnlocked
                ? $"[green]+{item.Definition.Points}[/]"
                : $"[grey]{item.Definition.Points}[/]";

            table.AddRow(status, nameCol, progressBar, tier, points);
        }

        AnsiConsole.Write(table);
    }

    /// <summary>
    /// Renders a progress bar for an achievement.
    /// </summary>
    private string RenderProgressBar(AchievementProgress progress)
    {
        if (progress.IsUnlocked)
        {
            return "[green]Complete![/]";
        }

        var percent = progress.ProgressPercent;
        var filled = (int)(percent / 10);
        var empty = 10 - filled;

        var bar = new string('â–ˆ', filled) + new string('â–‘', empty);
        return $"[yellow]{bar}[/] {percent}%";
    }

    /// <summary>
    /// Gets the display string for a tier.
    /// </summary>
    private string GetTierDisplay(AchievementTier tier)
    {
        return tier switch
        {
            AchievementTier.Bronze => "[orange3]ğŸ¥‰ Bronze[/]",
            AchievementTier.Silver => "[silver]ğŸ¥ˆ Silver[/]",
            AchievementTier.Gold => "[gold1]ğŸ¥‡ Gold[/]",
            AchievementTier.Platinum => "[mediumpurple1]ğŸ’ Platinum[/]",
            _ => tier.ToString()
        };
    }
}
```

### 11.2 Achievements View Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ACHIEVEMENTS                                 â”‚
â”‚                   15/50 Unlocked  |  185/1250 Points                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â•â•â• Combat â•â•â•                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Status â”‚ Achievement             â”‚ Progress   â”‚ Tier    â”‚ Pointsâ”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚   âœ“    â”‚ First Blood             â”‚ Complete!  â”‚ ğŸ¥‰Bronzeâ”‚ +10   â”‚â”‚
â”‚  â”‚        â”‚ Defeat your first       â”‚            â”‚         â”‚       â”‚â”‚
â”‚  â”‚        â”‚ monster                 â”‚            â”‚         â”‚       â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚   âœ“    â”‚ Monster Hunter          â”‚ Complete!  â”‚ ğŸ¥ˆSilverâ”‚ +25   â”‚â”‚
â”‚  â”‚        â”‚ Defeat 50 monsters      â”‚            â”‚         â”‚       â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚   â—‹    â”‚ Monster Slayer          â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ â”‚ ğŸ¥ˆSilverâ”‚  25   â”‚â”‚
â”‚  â”‚        â”‚ Defeat 100 monsters     â”‚ 82%        â”‚         â”‚       â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚   â—‹    â”‚ ???                     â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ ğŸ’Plat  â”‚ 100   â”‚â”‚
â”‚  â”‚        â”‚ Hidden achievement -    â”‚ 0%         â”‚         â”‚       â”‚â”‚
â”‚  â”‚        â”‚ unlock to reveal!       â”‚            â”‚         â”‚       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 12. Logging Specifications

### 12.1 Log Levels by Component

| Component | Level | Events |
|-----------|-------|--------|
| `AchievementService` | Information | Achievement unlocked |
| `AchievementService` | Debug | Checking achievements, condition evaluation |
| `AchievementService` | Warning | Achievement with no conditions |
| `AchievementsCommand` | Debug | Command execution, category filtering |

### 12.2 Log Message Examples

```csharp
// AchievementService - Information
_logger.LogInformation(
    "Achievement unlocked: {Name} (+{Points} points) for player {PlayerId}",
    achievement.Name,
    achievement.Points,
    player.Id);

// AchievementService - Debug
_logger.LogDebug("Checking achievements for player {PlayerId}", player.Id);

_logger.LogDebug(
    "Evaluating achievement {AchievementId}: {ConditionCount} conditions",
    achievement.AchievementId,
    achievement.Conditions.Count);

_logger.LogDebug(
    "Condition {StatName} {Operator} {Value}: player has {Actual}, result: {Result}",
    condition.StatisticName,
    condition.Operator,
    condition.Value,
    actualValue,
    isMet);

// AchievementService - Warning
_logger.LogWarning("Achievement has no conditions, cannot unlock");

_logger.LogWarning(
    "Unknown statistic name: {StatName}",
    statisticName);

// AchievementsCommand - Debug
_logger.LogDebug(
    "Displaying achievements for category: {Category}",
    category?.ToString() ?? "All");
```

---

## 13. Unit Testing Requirements

### 13.1 Test Count by Feature

| Feature | Test Count |
|---------|------------|
| PlayerAchievement Entity | 2 |
| AchievementProgress Record | 2 |
| AchievementService | 6 |
| Player Entity Updates | 2 |
| **Total** | **~12** |

### 13.2 Test Specifications

**File:** `tests/RuneAndRust.Tests/Domain/PlayerAchievementTests.cs`

```csharp
[TestFixture]
public class PlayerAchievementTests
{
    [Test]
    public void Create_WithValidData_SetsProperties();

    [Test]
    public void Create_WithNegativePoints_ThrowsArgumentOutOfRangeException();
}
```

**File:** `tests/RuneAndRust.Tests/Application/AchievementProgressTests.cs`

```csharp
[TestFixture]
public class AchievementProgressTests
{
    [Test]
    public void ProgressPercent_CalculatesCorrectly();

    [Test]
    public void IsPartiallyComplete_ReturnsTrueWhenHasProgress();
}
```

**File:** `tests/RuneAndRust.Tests/Application/AchievementServiceTests.cs`

```csharp
[TestFixture]
public class AchievementServiceTests
{
    [Test]
    public void CheckAchievements_ConditionsMet_UnlocksAchievement();

    [Test]
    public void CheckAchievements_AlreadyUnlocked_DoesNotUnlockAgain();

    [Test]
    public void CheckAchievements_ConditionsNotMet_DoesNotUnlock();

    [Test]
    public void GetProgress_ReturnsCorrectProgressForEachCondition();

    [Test]
    public void GetTotalPoints_SumsUnlockedAchievementPoints();

    [Test]
    public void IsUnlocked_ReturnsCorrectStatus();
}
```

**File:** `tests/RuneAndRust.Tests/Domain/PlayerAchievementCollectionTests.cs`

```csharp
[TestFixture]
public class PlayerAchievementCollectionTests
{
    [Test]
    public void AddAchievement_AddsToCollection();

    [Test]
    public void AddAchievement_AlreadyUnlocked_ThrowsInvalidOperationException();
}
```

---

## 14. Use Cases

### UC-001: Check Achievements After Stat Update

**Actor:** System (StatisticsService)
**Flow:** Statistic updated â†’ StatisticsService triggers achievement check â†’ AchievementService.CheckAchievements(player) â†’ Loop through all achievements â†’ Evaluate conditions â†’ Unlock matching achievements â†’ Publish events â†’ Show notifications

### UC-002: View All Achievements

**Actor:** Player
**Flow:** Player enters "achievements" command â†’ AchievementsCommand executes â†’ Get all achievement progress â†’ Render category tabs â†’ Display locked/unlocked status â†’ Show progress bars for locked achievements â†’ Display total points

### UC-003: View Category Achievements

**Actor:** Player
**Flow:** Player enters "achievements combat" â†’ AchievementsCommand parses category â†’ Get progress for Combat category â†’ Render Combat achievements only â†’ Display progress and status

### UC-004: Unlock Achievement

**Actor:** System (AchievementService)
**Flow:** Conditions evaluated as met â†’ player.AddAchievement(id, points) â†’ Create PlayerAchievement record â†’ Publish AchievementUnlockedEvent â†’ NotificationService.ShowAchievementUnlock() â†’ Display notification popup

### UC-005: Calculate Achievement Progress

**Actor:** System (AchievementsCommand)
**Flow:** Get achievement definitions â†’ For each condition, get player stat value â†’ Calculate condition.GetProgress(value) â†’ Average all condition progress â†’ Create AchievementProgress record â†’ Display progress bar

---

## 15. Deliverable Checklist

### Domain Layer
- [ ] `PlayerAchievement` entity created
- [ ] `AchievementUnlockedEvent` event created
- [ ] `Player` entity updated with achievements collection
- [ ] `Player.AddAchievement()` method added
- [ ] `Player.HasAchievement()` method added
- [ ] `Player.GetTotalAchievementPoints()` method added

### Application Layer
- [ ] `AchievementProgress` record created
- [ ] `ConditionProgress` record created
- [ ] `IAchievementService` interface created
- [ ] `AchievementService` implementation created

### Presentation Layer
- [ ] `AchievementNotification` component created
- [ ] `AchievementsCommand` command created

### Testing
- [ ] ~12 unit tests implemented
- [ ] All tests passing

---

## 16. Acceptance Criteria

### Functional
- [ ] Achievements unlock when all conditions are met
- [ ] Already unlocked achievements are not re-unlocked
- [ ] Achievements with no conditions do not unlock
- [ ] Secret achievements show "???" when locked
- [ ] Secret achievements reveal name/description when unlocked
- [ ] Notification displays on achievement unlock
- [ ] Notification shows correct tier icon and points
- [ ] Progress bars display correctly (0-100%)
- [ ] Total points calculated correctly
- [ ] Category filtering works in achievements command
- [ ] All statistics map to correct values

### Quality
- [ ] Build succeeds with 0 errors
- [ ] Build succeeds with 0 warnings
- [ ] All ~12 unit tests pass
- [ ] XML documentation complete on all public members

---

## 17. Dependencies

### Required from v0.12.1a

| Type | Location | Usage in this phase |
|------|----------|---------------------|
| `AchievementDefinition` | Domain/Entities | Templates for checking |
| `AchievementCondition` | Application/Models | Condition evaluation |
| `AchievementCategory` | Domain/Enums | Category filtering |
| `AchievementTier` | Domain/Enums | Point values, display |
| `IAchievementProvider` | Application/Interfaces | Get achievement data |

### Required from v0.12.0 (Statistics)

| Type | Location | Usage in this phase |
|------|----------|---------------------|
| `PlayerStatistics` | Domain/Entities | Get stat values |
| `IStatisticsService` | Application/Interfaces | Statistics access |
| `DiceRollHistory` | Domain/Entities | Dice stat values |

### Required from Prior Versions

| Type | Location | Usage in this phase |
|------|----------|---------------------|
| `Player` | Domain/Entities | Achievement storage |
| `IEventBus` | Application/Interfaces | Event publishing |
| `INotificationService` | Application/Interfaces | Notification display |

### Provides to v0.12.1c

| Type | Usage |
|------|-------|
| `IAchievementService` | Query achievement points for leaderboards |
| `PlayerAchievement` | Achievement data for display |
| Achievement points | Used in AchievementPoints leaderboard category |

---

## 18. Future Considerations

### Deferred to v0.12.1c
- **Leaderboards**: Score tracking and ranking including achievement points

### Out of Scope
- **Achievement Rewards**: Items or bonuses for unlocking achievements
- **Progressive Achievements**: Multi-tier achievements (Bronze â†’ Silver â†’ Gold of same achievement)
- **Time-Limited Achievements**: Achievements available only during events
- **Online Achievements**: Cloud-synced achievement progress
- **Achievement Sharing**: Social features for sharing unlocks
- **Achievement Sound Effects**: Custom sounds per tier (using existing notification sound)

---

*Document Version: 1.0*
*Last Updated: 2026-01-16*
*Author: Claude*
