# Changelog: v0.17.0b – Passive Bonuses

**Release Date**: 2026-01-29

## Added

### Value Objects

- **`SkillBonus`** (`Domain/ValueObjects/SkillBonus.cs`)
    - Immutable `readonly record struct` pairing skill ID with bonus amount
    - `Create()` factory with validation and lowercase normalization
    - `AppliesTo()` method for case-insensitive skill matching
    - Computed properties: `NormalizedSkillId`, `IsPositive`, `IsPenalty`, `IsNeutral`

- **`LineagePassiveBonuses`** (`Domain/ValueObjects/LineagePassiveBonuses.cs`)
    - Immutable `readonly record struct` containing stat and skill bonuses
    - Properties: `MaxHpBonus`, `MaxApBonus`, `SoakBonus`, `MovementBonus`, `SkillBonuses`
    - Static factory properties: `ClanBorn`, `RuneMarked`, `IronBlooded`, `VargrKin`, `None`
    - `Create()` factory with non-negative validation
    - `GetSkillBonus()` and `HasBonusForSkill()` lookup methods

### Unit Tests

- `SkillBonusTests.cs` – 12 tests covering factory methods, validation, and matching
- `LineagePassiveBonusesTests.cs` – 20 tests covering static properties, validation, and lookups

## Changed

### Entity Updates

- **`LineageDefinition`** (`Domain/Entities/LineageDefinition.cs`)
    - Added `PassiveBonuses` property of type `LineagePassiveBonuses`
    - Updated `Create()` factory to accept `passiveBonuses` parameter
    - Added convenience methods: `GetHpBonus()`, `GetApBonus()`, `GetSoakBonus()`, `GetMovementBonus()`, `GetSkillBonus()`, `GetAllSkillBonuses()`
    - Updated logging to include passive bonus details

### Configuration Updates

- **`lineages.json`**: Added `passiveBonuses` section to each lineage:
    - Clan-Born: +5 Max HP, +1 Social
    - Rune-Marked: +5 Max AP, +1 Lore
    - Iron-Blooded: +2 Soak, +1 Craft
    - Vargr-Kin: +1 Movement, +1 Survival

- **`lineages.schema.json`**: Added `passiveBonuses` and `skillBonus` schema definitions

### Test Updates

- Updated `LineageDefinitionTests.cs` to include `PassiveBonuses` parameter in all `Create()` calls

## Dependencies

- Builds on v0.17.0a (Lineage enum, LineageAttributeModifiers, LineageDefinition)
- Required by v0.17.0c (Unique Traits), v0.17.0f (LineageApplicationService)
