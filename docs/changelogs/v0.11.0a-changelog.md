# v0.11.0a Changelog: Resource Definitions

**Version:** 0.11.0a
**Phase:** Resource Definitions (Crafting Foundation)
**Date:** 2026-01-19
**Status:** ✅ Complete

---

## Summary

Implements the foundational resource data model for the crafting and gathering system. Resources are data-driven templates loaded from JSON configuration with support for quality tiers, value calculations, and category-based filtering.

---

## Added

### Domain Layer - Enums

| Enum | Values | Description |
|------|--------|-------------|
| `ResourceCategory` | Ore, Herb, Leather, Gem, Wood, Cloth | Material categories for filtering and recipes |
| `ResourceQuality` | Common, Fine, Rare, Legendary | Quality tiers with value multipliers and crafting bonuses |

### Domain Layer - Extension Methods

| Method | Description |
|--------|-------------|
| `GetValueMultiplier()` | Returns quality-based value multiplier (1.0, 1.5, 3.0, 10.0) |
| `GetCraftingBonus()` | Returns quality-based crafting bonus (0, 1, 2, 3) |
| `GetDisplayColor()` | Returns hex color for UI rendering (white, green, blue, orange) |
| `GetDisplayName()` | Returns human-readable quality name |

### Domain Layer - Entities

| Entity | Description |
|--------|-------------|
| `ResourceDefinition` | Data-driven template for gatherable resources |

#### ResourceDefinition Properties

| Property | Type | Description |
|----------|------|-------------|
| `Id` | `Guid` | Unique identifier (IEntity requirement) |
| `ResourceId` | `string` | Lowercase string identifier for lookups |
| `Name` | `string` | Display name |
| `Description` | `string` | Tooltip description |
| `Category` | `ResourceCategory` | Material category |
| `Quality` | `ResourceQuality` | Quality tier |
| `BaseValue` | `int` | Base gold value before multiplier |
| `StackSize` | `int` | Maximum inventory stack size |
| `IconPath` | `string?` | Optional icon path |

#### ResourceDefinition Methods

| Method | Description |
|--------|-------------|
| `Create(...)` | Factory method with validation |
| `WithIcon(path)` | Fluent builder for icon |
| `GetActualValue()` | Base value × quality multiplier |
| `GetCraftingBonus()` | Quality-based crafting bonus |
| `CanStackWith(other)` | Check if resources can stack |
| `IsCategory(category)` | Category matching |
| `MeetsQualityRequirement(min)` | Quality threshold check |

### Application Layer - Interfaces

| Interface | Description |
|-----------|-------------|
| `IResourceProvider` | Service interface for resource definitions |

#### IResourceProvider Methods

| Method | Description |
|--------|-------------|
| `GetResource(id)` | Get by ID (case-insensitive) |
| `GetAllResources()` | Get all definitions |
| `GetResourcesByCategory(category)` | Filter by category |
| `GetResourcesByQuality(quality)` | Filter by quality |
| `GetResources(category, minQuality)` | Combined filter |
| `Exists(id)` | Check existence |
| `GetResourceIds()` | Get all IDs |
| `Count` | Total resource count |

### Infrastructure Layer - Providers

| Provider | Description |
|----------|-------------|
| `JsonResourceProvider` | Loads resources from JSON configuration |

### Configuration Files

| File | Description |
|------|-------------|
| `config/schemas/resources.schema.json` | JSON Schema for validation |
| `config/gatherable-resources.json` | 16 resource definitions |

---

## Resource Definitions

### Ore Resources

| ID | Name | Quality | Base Value | Stack |
|----|------|---------|------------|-------|
| iron-ore | Iron Ore | Common | 5 | 20 |
| copper-ore | Copper Ore | Common | 3 | 20 |
| gold-ore | Gold Ore | Fine | 25 | 20 |
| mithril-ore | Mithril Ore | Rare | 100 | 10 |

### Herb Resources

| ID | Name | Quality | Base Value | Stack |
|----|------|---------|------------|-------|
| healing-herb | Healing Herb | Common | 3 | 50 |
| mana-leaf | Mana Leaf | Fine | 10 | 50 |
| firebloom | Firebloom | Rare | 40 | 30 |

### Leather Resources

| ID | Name | Quality | Base Value | Stack |
|----|------|---------|------------|-------|
| leather | Leather | Common | 8 | 20 |
| thick-hide | Thick Hide | Fine | 20 | 15 |
| dragon-scale | Dragon Scale | Rare | 150 | 5 |

### Gem Resources

| ID | Name | Quality | Base Value | Stack |
|----|------|---------|------------|-------|
| ruby | Ruby | Rare | 100 | 10 |
| sapphire | Sapphire | Rare | 100 | 10 |

### Wood Resources

| ID | Name | Quality | Base Value | Stack |
|----|------|---------|------------|-------|
| oak-wood | Oak Wood | Common | 4 | 20 |
| ironwood | Ironwood | Fine | 30 | 15 |

### Cloth Resources

| ID | Name | Quality | Base Value | Stack |
|----|------|---------|------------|-------|
| linen | Linen | Common | 5 | 30 |
| silk | Silk | Fine | 25 | 20 |

---

## Quality Value Multipliers

| Quality | Multiplier | Crafting Bonus | Color |
|---------|------------|----------------|-------|
| Common | 1.0x | +0 | White (#FFFFFF) |
| Fine | 1.5x | +1 | Green (#1EFF00) |
| Rare | 3.0x | +2 | Blue (#0070DD) |
| Legendary | 10.0x | +3 | Orange (#FF8000) |

---

## Unit Tests

### ResourceDefinitionTests (~25 tests)

- Factory method validation
- Parameter validation (null, empty, negative values)
- Value calculation with quality multipliers
- Stacking behavior
- Category and quality queries
- Display string formatting
- Fluent builder methods

### ResourceQualityExtensionsTests (~10 tests)

- Value multiplier for all quality tiers
- Crafting bonus for all quality tiers
- Display color for all quality tiers
- Display name for all quality tiers
- Progression validation (higher tiers = higher values)

### JsonResourceProviderTests (~20 tests)

- Constructor loading from configuration
- GetResource by ID (existing, non-existing, case-insensitive)
- GetAllResources returns all loaded
- GetResourcesByCategory filtering
- GetResourcesByQuality filtering
- Combined category/quality filtering
- Exists checks
- GetResourceIds enumeration
- Value calculation integration
- Icon path loading
- Stacking integration

---

## Files Created

| Path | Description |
|------|-------------|
| `src/Core/RuneAndRust.Domain/Enums/ResourceCategory.cs` | Resource category enum |
| `src/Core/RuneAndRust.Domain/Enums/ResourceQuality.cs` | Quality enum with extensions |
| `src/Core/RuneAndRust.Domain/Definitions/ResourceDefinition.cs` | Resource entity |
| `src/Core/RuneAndRust.Application/Interfaces/IResourceProvider.cs` | Provider interface |
| `src/Infrastructure/RuneAndRust.Infrastructure/Providers/JsonResourceProvider.cs` | JSON provider |
| `config/schemas/resources.schema.json` | JSON Schema |
| `config/gatherable-resources.json` | Resource definitions |
| `tests/.../Definitions/ResourceDefinitionTests.cs` | Entity tests |
| `tests/.../Enums/ResourceQualityExtensionsTests.cs` | Extension tests |
| `tests/.../Providers/JsonResourceProviderTests.cs` | Provider tests |

---

## API Examples

### Loading Resources

```csharp
// Provider is initialized with config path
var provider = new JsonResourceProvider(
    "config/gatherable-resources.json",
    logger);

// Get specific resource
var ironOre = provider.GetResource("iron-ore");
Console.WriteLine($"{ironOre.Name}: {ironOre.GetActualValue()} gold");
// Output: Iron Ore: 5 gold

// Get all ores
var ores = provider.GetResourcesByCategory(ResourceCategory.Ore);
foreach (var ore in ores)
{
    Console.WriteLine($"- {ore}");
}
```

### Quality Calculations

```csharp
// Fine quality gold ore (base value 25)
var goldOre = provider.GetResource("gold-ore");
var value = goldOre.GetActualValue(); // 25 * 1.5 = 37 gold
var bonus = goldOre.GetCraftingBonus(); // +1

// Rare quality mithril (base value 100)
var mithril = provider.GetResource("mithril-ore");
var mithrilValue = mithril.GetActualValue(); // 100 * 3.0 = 300 gold
var mithrilBonus = mithril.GetCraftingBonus(); // +2
```

### Category Filtering

```csharp
// Get Fine or better herbs
var qualityHerbs = provider.GetResources(
    ResourceCategory.Herb,
    ResourceQuality.Fine);
// Returns: Mana Leaf (Fine), Firebloom (Rare)
```

---

## v0.11.0 Progress

| Version | Feature | Status |
|---------|---------|--------|
| v0.11.0a | Resource Definitions | ✅ Complete |
| v0.11.0b | Recipe Definitions | Pending |
| v0.11.0c | Crafting Service | Pending |
| v0.11.0d | Crafting UI Integration | Pending |

---

## Dependencies

- Builds on v0.10.4c (Monster Groups)
- Follows `JsonBossProvider` pattern for JSON loading
- `ResourceDefinition` implements `IEntity` interface
- Uses existing logging patterns (Debug/Info/Warning/Error)

---

## Notes

- Resource IDs use kebab-case (lowercase with hyphens)
- Provider uses case-insensitive dictionary lookups
- Stack sizes vary by resource rarity (common: 20-50, rare: 5-10)
- Quality multipliers follow standard RPG progression
- Display colors match common RPG rarity conventions (WoW-style)
