# v0.0.7a Changelog - Core Equipment Infrastructure

**Date:** 2026-01-08

## Added

### Domain Layer - Enums
- `EquipmentSlot` enum: Weapon, Armor, Shield, Helmet, Boots, Ring, Amulet
  - Full XML documentation with slot descriptions

### Domain Layer - Value Objects
- `EquipResult` record struct for equip/unequip operation results
  - Properties: Success, Message, UnequippedItem, EquippedItem
  - WasSwapped computed property for detecting slot swaps
  - Factory methods: Equipped, Unequipped, Failure, ItemNotFound, NotEquippable, SlotEmpty, InventoryFull

### Domain Layer - Entities (Modified)
- `Item` entity enhancements:
  - `EquipmentSlot?` property (nullable for non-equippable items)
  - `IsEquippable` computed property
  - Constructor accepts optional `equipmentSlot` parameter
  - Updated `CreateSword()` factory with Weapon slot
  - New factories: `CreateLeatherArmor()`, `CreateWoodenShield()`, `CreateIronHelmet()`

- `Player` entity enhancements:
  - `Equipment` dictionary property (Dictionary<EquipmentSlot, Item>)
  - `EquippedItemCount` computed property
  - `GetEquippedItem(EquipmentSlot slot)` method
  - `IsSlotOccupied(EquipmentSlot slot)` method
  - `TryEquip(Item item)` method with validation
  - `Unequip(EquipmentSlot slot)` method
  - `GetAllEquippedItems()` method

### Domain Layer - Services
- `EquipmentService` for managing equipment operations:
  - `TryEquipByName(Player player, string itemName)` - equip by name
  - `TryEquip(Player player, Item item)` - equip with swap logic
  - `TryUnequip(Player player, EquipmentSlot slot)` - unequip to inventory
  - Static `TryParseSlot(string slotName, out EquipmentSlot slot)` - case-insensitive parsing
  - Static `GetValidSlotNames()` - formatted slot list

### Application Layer - Commands
- `EquipCommand(string ItemName)` - equip item from inventory
- `UnequipCommand(EquipmentSlot Slot)` - unequip from slot
- `EquipmentCommand` - display current equipment
- `InvalidCommand(string Message)` - invalid command with error message

### Application Layer - DTOs
- `EquippedItemDto` - single slot with item data
- `EquipmentSlotsDto` - all slots with factory `FromPlayer()`
- `EquipResultDto` - operation result with factory `FromResult()`

### Application Layer - Interfaces (Modified)
- `IGameRenderer` interface additions:
  - `RenderEquipmentAsync(EquipmentSlotsDto equipment)` - display equipment
  - `RenderEquipResultAsync(EquipResultDto result)` - show operation result

### Application Layer - Services (Modified)
- `GameSessionService` additions:
  - Injected `EquipmentService` dependency
  - `TryEquipItem(string itemName)` method
  - `TryUnequipItem(EquipmentSlot slot)` method
  - `GetEquipment()` method

### Presentation Layer
- `ConsoleInputHandler` command parsing:
  - `equip <item>` command
  - `unequip <slot>` command
  - `equipment` / `eq` / `gear` command

- `SpectreGameRenderer` implementations:
  - `RenderEquipmentAsync()` - table showing all slots
  - `RenderEquipResultAsync()` - success/failure messages with swap info

### Infrastructure Layer
- `DependencyInjection.AddApplicationServices()`:
  - Registered `EquipmentService` with Scoped lifetime

## Tests Added

| Test File | Count |
|-----------|-------|
| `EquipmentServiceTests.cs` | 10 |
| `PlayerTests.cs` (new equipment tests) | 7 |
| **Total New** | 17 |

## Test Results

```
Domain Tests:      278 passed (+16)
Application Tests: 117 passed
Architecture Tests:  8 passed
Total:             403 passed
```

## v0.0.7a Complete

This establishes the core equipment infrastructure:
- Equipment slots with 7 body positions
- Items can now be designated as equippable
- Player can equip/unequip items
- Automatic slot swapping when replacing equipment
- Full command parsing and rendering support
- Ready for v0.0.7b: Equipment Stat Bonuses
