# v0.3.25d: The Guide (Content Author Documentation) - Expanded Implementation Plan

## Overview

Create comprehensive documentation for content authors to add new capture templates without programming knowledge. This sub-plan enables the lore team to contribute directly to game content using JSON files.

**Parent Plan:** [v0.3.25](./v0.3.25.md)
**Status:** Planned
**Dependencies:** `v0.3.25a` (Schema must be defined for accurate documentation)

---

## Related Specifications

| Specification | What It Provides | Path |
|---------------|------------------|------|
| **SPEC-CODEX-001** | System architecture, CaptureTypes, EntryCategories | [docs/specs/knowledge/SPEC-CODEX-001.md](../../specs/knowledge/SPEC-CODEX-001.md) |
| **Sample Codex Entries** | **Writer's Guide**, voice by type, placement guidelines, complete examples | [docs/design/09-data/sample-codex-entries.md](../../design/09-data/sample-codex-entries.md) |
| **DOCUMENTATION_STANDARDS.md** | Domain 4 compliance rules | [docs/00-project/DOCUMENTATION_STANDARDS.md](../../00-project/DOCUMENTATION_STANDARDS.md) |

> **IMPORTANT:** This guide should REFERENCE, not duplicate, the existing Writer's Guide in `sample-codex-entries.md`. That document contains:
> - Voice by Capture Type (scholarly, urgent, analytical, etc.)
> - Placement guidelines (Fragment 1 = easy, Fragment 4 = hard)
> - Complete multi-fragment entry examples (Ginnungagap Glitch, The Forlorn, etc.)

---

## Deliverables

1. **Authoring Guide** - Step-by-step template creation documentation
2. **Domain 4 Compliance Checklist** - What to avoid in lore text
3. **AAM-VOICE Layer 2 Reference** - Voice and tone guidelines (summarized from sample-codex-entries.md)
4. **Example Template Walkthrough** - Annotated example with explanations
5. **NotebookLM → JSON Workflow** - Bulk import pipeline
6. **Troubleshooting Section** - Common errors and fixes
7. **Cross-References** - Links to Writer's Guide and sample entries

---

## Files to Create (2 new files)

| File | Purpose |
|------|---------|
| `docs/guides/capture-template-authoring.md` | Main authoring guide |
| `data/capture-templates/README.md` | Quick reference in templates directory |

---

## Document 1: Capture Template Authoring Guide

**File:** `docs/guides/capture-template-authoring.md`

```markdown
# Capture Template Authoring Guide

> **Audience:** Lore writers, content designers, world-builders
> **No programming required** - just JSON editing

---

## Essential Reading First

Before creating templates, review these documents:

1. **[Sample Codex Entries](../design/09-data/sample-codex-entries.md)** - Contains:
   - Complete multi-fragment entry examples (The Ginnungagap Glitch, The Forlorn, etc.)
   - Writer's Guide with voice-by-type guidelines
   - Placement difficulty progression
   - Content principles (progressive revelation, mystery preservation)

2. **[SPEC-CODEX-001](../specs/knowledge/SPEC-CODEX-001.md)** - Contains:
   - How fragments link to Codex Entries
   - Unlock thresholds (25%, 50%, 75%, 100%)
   - Entry categories (Bestiary, Factions, Technical, etc.)

---

## Quick Start

1. Open `data/capture-templates/categories/` in your editor
2. Find the category that matches your content (e.g., `ancient-ruin.json`)
3. Add a new template object to the `templates` array
4. Run validation: `pwsh scripts/validate-templates.ps1`
5. Submit a pull request

---

## Template Structure

Every template has these fields:

| Field | Required | Description | Example |
|-------|----------|-------------|---------|
| `id` | ✅ Yes | Unique kebab-case identifier | `"ruin-sealed-chamber"` |
| `type` | ✅ Yes | Type of capture (see list below) | `"TextFragment"` |
| `fragmentContent` | ✅ Yes | The lore text (20-1000 characters) | `"Wall inscriptions reveal..."` |
| `source` | ✅ Yes | How/where it was discovered | `"Wall inscription"` |
| `matchKeywords` | Optional | Keywords for Codex linking | `["ruin", "ancient"]` |
| `quality` | Optional | Legend reward value (default: 15) | `15` or `30` |
| `tags` | Optional | Metadata for filtering | `["aesir", "pre-glitch"]` |

---

## Capture Types

Choose the type that best fits how the information would be discovered:

| Type | When to Use | Example Context |
|------|-------------|-----------------|
| `TextFragment` | Written records, notes, torn pages | "A crumpled note with faded writing..." |
| `EchoRecording` | Audio logs, transcribed recordings | "A damaged echo-stone preserves a fragment..." |
| `VisualRecord` | Schematics, diagrams, murals, images | "Murals cover what remains of the walls..." |
| `Specimen` | Biological samples, tissue analysis | "Tissue samples reveal extensive mutation..." |
| `OralHistory` | Dialogue, rumors, oral traditions | "The veterans speak of it in hushed tones..." |
| `RunicTrace` | Magical/technological residue | "Faint Aetheric resonance detected..." |

---

## Categories

Templates are organized by discovery context:

| Category File | Use For |
|---------------|---------|
| `rusted-servitor.json` | Automata, machines, servitors |
| `blighted-creature.json` | Corrupted creatures, Blight-infected |
| `industrial-site.json` | Forges, factories, mechanisms |
| `ancient-ruin.json` | Ruins, inscriptions, temples |
| `generic-container.json` | Chests, crates, storage |
| `field-guide-triggers.json` | Tutorial/mechanic discovery |

---

## Voice by Capture Type (Summary)

> **Full guide:** [sample-codex-entries.md Writer's Guide](../design/09-data/sample-codex-entries.md#writers-guide-creating-data-captures)

| Type | Voice Style | Example Opening |
|------|-------------|-----------------|
| **TextFragment** | Scholarly, formal, historical | *"The records indicate..."* |
| **EchoRecording** | Personal, urgent, often corrupted | *"[STATIC] This is..."* |
| **VisualRecord** | Descriptive, technical, observational | *"The schematic depicts..."* |
| **Specimen** | Analytical, clinical, scientific | *"Analysis reveals..."* |
| **OralHistory** | Conversational, dialectal, personal | *"My grandmother told me..."* |
| **RunicTrace** | Mystical, precise, layered | *"The residual pattern suggests..."* |

---

## How Fragments Become Codex Entries

> **Detailed in:** [SPEC-CODEX-001](../specs/knowledge/SPEC-CODEX-001.md)

Data Capture templates (this system) link to CodexEntries via `matchKeywords`:

```
┌─────────────────────┐       ┌─────────────────────┐
│  CaptureTemplate    │       │    CodexEntry       │
├─────────────────────┤       ├─────────────────────┤
│ matchKeywords: [    │──────▶│ Title: "The Forlorn"│
│   "forlorn",        │       │ TotalFragments: 4   │
│   "einherjar"       │       │ UnlockThresholds:   │
│ ]                   │       │   25%: NAME_REVEALED│
└─────────────────────┘       │   50%: BEHAVIOR     │
                              │   75%: WEAKNESS     │
                              │   100%: FULL_ENTRY  │
                              └─────────────────────┘
```

**Your job:** Create individual fragments. The system links them to entries.

---

## Step-by-Step: Adding a Template

### 1. Open the Category File

```bash
# In VS Code, Cursor, or any text editor
code data/capture-templates/categories/ancient-ruin.json
```

### 2. Locate the Templates Array

```json
{
  "category": "ancient-ruin",
  "version": "1.0.0",
  "templates": [
    // Existing templates here...
    
    // ADD YOUR NEW TEMPLATE HERE ↓
  ]
}
```

### 3. Add Your Template

```json
{
  "id": "ruin-sealed-door",
  "type": "TextFragment",
  "fragmentContent": "A warning carved deep into the stone: 'Beyond this threshold, the Sleepers remain. Do not disturb what was sealed by necessity, not choice.'",
  "source": "Door inscription",
  "matchKeywords": ["ruin", "ancient", "sleeper"],
  "quality": 15,
  "tags": ["mystery", "warning"]
}
```

### 4. Validate Your Work

```bash
pwsh scripts/validate-templates.ps1
```

Expected output:
```
=== Capture Template Validator ===
Validating: ancient-ruin.json
  ✓ 4 templates found

=== Summary ===
Total templates: 20
✓ All templates valid!
```

### 5. Submit for Review

```bash
git add data/capture-templates/
git commit -m "feat(lore): add sealed-door ruin template"
git push origin feature/new-lore
# Open pull request
```

---

## Domain 4 Compliance Checklist

> **CRITICAL:** Post-Glitch inhabitants cannot perform precision measurements.
> Your lore text must NOT contain:

### ❌ Forbidden

| Category | Bad Example | Why |
|----------|-------------|-----|
| **Percentages** | "95% casualties" | Requires census/statistics |
| **Decimals** | "18.5°C" | Requires thermometers |
| **Exact Distances** | "800 meters away" | Requires surveying tools |
| **Population Counts** | "10,000 residents" | Requires census records |
| **Gas Concentrations** | "H₂S 6-12 ppm" | Requires analyzers |
| **Technical Specs** | "2.4 GHz frequency" | Modern terminology |

### ✅ Allowed Alternatives

| Instead Of | Write |
|------------|-------|
| "95% casualties" | "nearly all perished" |
| "18.5°C" | "uncomfortably warm" / "hot enough to blister" |
| "800 meters" | "beyond bowshot" / "a hard day's walk" |
| "10,000 residents" | "a thriving settlement" / "thousands" |
| "6-12 ppm" | "air thick with sulfurous stench" |
| "2.4 GHz" | "a persistent hum that sets teeth on edge" |

### Medieval Measurement Reference

| Modern | Medieval Equivalent |
|--------|---------------------|
| 1-5 meters | "arm's reach," "a few paces" |
| 10-20 meters | "javelin-throw distance" |
| 50-100 meters | "bowshot range" |
| 1+ kilometers | "a hard morning's walk" |
| Seconds | "a few heartbeats" |
| Minutes | "while a candle burns a finger's width" |
| Hours | "from dawn to midday" |

---

## AAM-VOICE Layer 2 Reference

Data Captures use **Layer 2: Diagnostic/Observational** voice:

### Characteristics

- **Sensory-first:** Describe what characters SEE, SMELL, HEAR, FEEL
- **No explanations:** Characters don't know WHY things work
- **Medieval vocabulary:** No modern/technical terms
- **Pragmatic mysticism:** "The rune works" not "the algorithm executes"
- **Grit over glamour:** Everything is weathered, repaired, jury-rigged

### Voice Examples

**Technical (❌ Avoid):**
> "The terminal's display flickered as corrupted data scrolled across the screen."

**Medieval-flavored (✅ Preferred):**
> "The oracle-box shuddered, its glass face swimming with ghost-light and symbols no sage could parse."

### Translation Guide

| Don't Write | Write Instead |
|-------------|---------------|
| "Emergency bypass terminal" | "The humming altar" |
| "Power core" | "The heart-stone" |
| "Database" | "The memory-well" |
| "Algorithm" | "The pattern" |
| "Malfunction" | "Curse" or "blight" |
| "Synthetic" | "Dvergr-made" or "Old World craft" |
| "Robot" | "Automaton" or "iron-walker" |
| "Computer" | "Oracle-box" or "rune-mirror" |

---

## Example Template: Annotated Walkthrough

```json
{
  // UNIQUE ID: Use kebab-case, be descriptive
  // Pattern: [category]-[subject]-[detail]
  "id": "servitor-emergency-protocol",
  
  // TYPE: How was this information discovered?
  // Options: TextFragment, EchoRecording, VisualRecord, Specimen, OralHistory, RunicTrace
  "type": "EchoRecording",
  
  // CONTENT: The actual lore text (20-1000 chars)
  // ✓ Sensory language
  // ✓ Medieval vocabulary
  // ✓ No precision measurements
  // ✓ Evokes atmosphere
  "fragmentContent": "A damaged echo-stone crackles to life: '...Unit designate Gamma-Seven. Emergency protocols enacted. All personnel evacuate to designated muster points. This is not a drill. Repeat: the containment field has—' The voice dissolves into static.",
  
  // SOURCE: Where/how the player found this
  // Shown in Codex as context
  "source": "Echo-stone recovery",
  
  // KEYWORDS: For auto-linking to Codex entries
  // If omitted, uses category defaults
  "matchKeywords": ["servitor", "automaton", "aesir", "emergency"],
  
  // QUALITY: Legend Points when Codex entry completes
  // 15 = Standard, 30 = Specialist (expert exam)
  "quality": 15,
  
  // TAGS: Optional metadata for filtering/searching
  // Useful for future features
  "tags": ["aesir", "pre-glitch", "emergency", "containment"]
}
```

---

## NotebookLM → JSON Workflow

If you've drafted lore in NotebookLM, follow this pipeline:

### 1. Export from NotebookLM

- Open your NotebookLM source
- Copy the lore text you want to convert
- Note the context (creature, location, discovery method)

### 2. Create Template Skeleton

```json
{
  "id": "",
  "type": "",
  "fragmentContent": "",
  "source": "",
  "matchKeywords": [],
  "quality": 15,
  "tags": []
}
```

### 3. Fill In Fields

1. **id:** Create from context → `"blight-fungal-network"`
2. **type:** Match discovery → examining creature = `"Specimen"`
3. **fragmentContent:** Paste and refine for Domain 4 compliance
4. **source:** Where found → `"Biological analysis"`
5. **matchKeywords:** Extract key nouns → `["blight", "fungal", "creature"]`
6. **tags:** Add metadata → `["horror", "mutation"]`

### 4. Domain 4 Pass

Read through `fragmentContent` and check for:
- [ ] No percentages or decimals
- [ ] No metric measurements
- [ ] No modern terminology
- [ ] Sensory descriptions only
- [ ] Medieval vocabulary

### 5. Validate and Commit

```bash
pwsh scripts/validate-templates.ps1
git add data/capture-templates/
git commit -m "feat(lore): add blight-fungal-network template"
```

---

## Troubleshooting

### Validation Error: "Missing 'id'"

```
Error: ancient-ruin.json: Template missing 'id'
```

**Fix:** Add a unique `id` field to your template:
```json
"id": "ruin-your-template-name"
```

### Validation Error: "Invalid type"

```
Warning: Template 'my-template' has invalid type 'TextFrag'
```

**Fix:** Use exact enum values (case-sensitive):
- `TextFragment` ✓
- `EchoRecording` ✓
- `VisualRecord` ✓
- `Specimen` ✓
- `OralHistory` ✓
- `RunicTrace` ✓

### Validation Warning: "Domain 4 violation"

```
Warning: Template 'ruin-measurements' may violate Domain 4 (precision measurements)
```

**Fix:** Review your `fragmentContent` for percentages, decimals, or metric units. Replace with qualitative descriptions.

### JSON Parse Error

```
Error: ancient-ruin.json: JSON parse error - Unexpected token
```

**Possible causes:**
- Missing comma between templates
- Missing closing brace `}`
- Unescaped quotes in text (use `\"` or `'`)
- Trailing comma after last template

**Tip:** Use a JSON validator like [jsonlint.com](https://jsonlint.com)

---

## Review Process

All new templates go through this process:

1. **Self-Review:** Run validation script
2. **Domain 4 Check:** Use checklist above
3. **Voice Check:** Match Layer 2 guidelines
4. **Pull Request:** Submit for team review
5. **Content Review:** Lore lead checks for consistency
6. **Merge:** Added to next build

---

## FAQ

**Q: Can I create a new category?**
A: Yes, but coordinate with the dev team first. They need to add keywords to `CategoryKeywords` in `DataCaptureService.cs`.

**Q: What if my template doesn't fit any category?**
A: Use `generic-container.json` as a catch-all, or request a new category.

**Q: How long should `fragmentContent` be?**
A: Between 20 and 1000 characters. Aim for 100-300 for readability.

**Q: Do keywords matter?**
A: Yes! They link captures to Codex entries. Use nouns that match entry titles.

**Q: Can I include dialogue?**
A: Yes! Use single quotes inside the JSON string:
```json
"fragmentContent": "The veteran warned: 'Never trust a Servitor that still moves.'"
```

---

## Related Documentation

These existing documents provide essential context for content authors:

| Document | Contains |
|----------|----------|
| **[sample-codex-entries.md](../design/09-data/sample-codex-entries.md)** | Complete entry examples, Writer's Guide, placement difficulty |
| **[SPEC-CODEX-001](../specs/knowledge/SPEC-CODEX-001.md)** | System architecture, unlock thresholds, categories |
| **[DOCUMENTATION_STANDARDS.md](../../00-project/DOCUMENTATION_STANDARDS.md)** | Domain 4 measurement rules, voice guidelines |

---

## Need Help?

- **Discord:** #lore-development channel
- **Complete Examples:** `docs/design/09-data/sample-codex-entries.md`
- **Schema Reference:** `data/capture-templates/schema/capture-template.schema.json`
```

---

## Document 2: Quick Reference README

**File:** `data/capture-templates/README.md`

```markdown
# Capture Templates

JSON-based lore fragments for the Data Capture system.

## Quick Reference

| File | Purpose | Templates |
|------|---------|-----------|
| `rusted-servitor.json` | Automata, machines | 4 |
| `generic-container.json` | Chests, crates | 3 |
| `blighted-creature.json` | Corrupted creatures | 3 |
| `industrial-site.json` | Forges, factories | 3 |
| `ancient-ruin.json` | Ruins, inscriptions | 3 |
| `field-guide-triggers.json` | Tutorials | 3 |

## Adding Templates

1. Edit the appropriate category `.json` file
2. Add template to `templates` array
3. Run: `pwsh scripts/validate-templates.ps1`
4. Commit and open PR

## Template Fields

```json
{
  "id": "unique-kebab-case-id",
  "type": "TextFragment|EchoRecording|VisualRecord|Specimen|OralHistory|RunicTrace",
  "fragmentContent": "The lore text (20-1000 chars)",
  "source": "Where it was found",
  "matchKeywords": ["codex", "linking"],  // optional
  "quality": 15,                           // optional, default 15
  "tags": ["metadata"]                     // optional
}
```

## Domain 4 Rules

**NO:** Percentages, decimals, exact distances, technical terms
**YES:** Sensory descriptions, medieval vocabulary, qualitative language

## Related Docs

- **Full guide:** `docs/guides/capture-template-authoring.md`
- **Complete examples:** `docs/design/09-data/sample-codex-entries.md`
- **System spec:** `docs/specs/knowledge/SPEC-CODEX-001.md`
```

---

## Work Breakdown

### Phase 1: Main Guide
- [ ] Create `docs/guides/capture-template-authoring.md`
- [ ] Write Quick Start section
- [ ] Write Template Structure section
- [ ] Write Capture Types section
- [ ] Write Step-by-Step walkthrough

### Phase 2: Compliance Reference
- [ ] Write Domain 4 Compliance Checklist
- [ ] Add Medieval Measurement Reference table
- [ ] Write AAM-VOICE Layer 2 Reference
- [ ] Add Translation Guide table

### Phase 3: Workflow & Examples
- [ ] Write Annotated Example walkthrough
- [ ] Write NotebookLM → JSON Workflow
- [ ] Write Troubleshooting section
- [ ] Write FAQ section

### Phase 4: Quick Reference
- [ ] Create `data/capture-templates/README.md`
- [ ] Add Quick Reference table
- [ ] Add Template Fields example
- [ ] Add Domain 4 summary

---

## Estimated Metrics

| Metric | Value |
|--------|-------|
| New Files | 2 |
| Documentation Lines | ~500 |
| Tables | ~15 |
| Code Examples | ~10 |

---

## Pre-Commit Checks

- [ ] Main guide is complete and readable
- [ ] All capture types documented
- [ ] Domain 4 checklist is comprehensive
- [ ] Voice guidelines match DOCUMENTATION_STANDARDS.md
- [ ] Example template is annotated
- [ ] NotebookLM workflow is actionable
- [ ] Troubleshooting covers common errors
- [ ] README is quick-scannable

**End of Plan**

