# v0.11.1a Design Specification: Recipe Definitions

**Version:** 0.11.1a
**Status:** Planning
**Focus:** Recipe definition data model with ingredients, outputs, and configuration
**Prerequisite:** v0.11.0c (Gathering Service)

---

## Table of Contents

1. [Executive Summary](#1-executive-summary)
2. [Feature Overview](#2-feature-overview)
3. [Architecture Diagrams](#3-architecture-diagrams)
4. [RecipeCategory Enum](#4-recipecategory-enum)
5. [RecipeIngredient Value Object](#5-recipeingredient-value-object)
6. [RecipeOutput Value Object](#6-recipeoutput-value-object)
7. [RecipeDefinition Entity](#7-recipedefinition-entity)
8. [IRecipeProvider Interface](#8-irecipeprovider-interface)
9. [RecipeProvider Implementation](#9-recipeprovider-implementation)
10. [Configuration Schema](#10-configuration-schema)
11. [Configuration File](#11-configuration-file)
12. [Logging Specifications](#12-logging-specifications)
13. [Unit Testing Requirements](#13-unit-testing-requirements)
14. [Use Cases](#14-use-cases)
15. [Deliverable Checklist](#15-deliverable-checklist)
16. [Acceptance Criteria](#16-acceptance-criteria)
17. [Dependencies](#17-dependencies)
18. [Future Considerations](#18-future-considerations)

---

## 1. Executive Summary

Version 0.11.1a introduces the **Recipe Definition** system, establishing the foundational data model for crafting in RuneAndRust. Recipes define what resources are consumed and what items are produced, enabling the crafting system to transform gathered materials into useful equipment, potions, and tools.

This version implements the definition-instance pattern established in v0.11.0a (ResourceDefinition) and v0.10.0a (StatusEffectDefinition), creating recipe templates that are loaded from JSON configuration. The recipe book and actual crafting execution will be implemented in subsequent versions (v0.11.1b and v0.11.2).

### Key Deliverables

| Category | Items |
|----------|-------|
| **Domain Enums** | RecipeCategory (7 categories) |
| **Domain Value Objects** | RecipeIngredient, RecipeOutput |
| **Domain Entities** | RecipeDefinition |
| **Application Interfaces** | IRecipeProvider |
| **Infrastructure** | RecipeProvider |
| **Configuration** | recipes.json, recipes.schema.json |
| **Tests** | ~9 new unit tests |

### Architectural Significance

This version establishes the **recipe definition pattern** that connects the resource system to the item system:

- **Ingredient References**: Link to ResourceDefinition IDs from v0.11.0a
- **Output References**: Link to ItemDefinition IDs from prior versions
- **Station Requirements**: Prepare for crafting stations in v0.11.2
- **Difficulty Classes**: Enable skill-based crafting with dice mechanics

---

## 2. Feature Overview

```
v0.11.1a Features
├── RecipeCategory Enum
│   ├── Weapon
│   ├── Armor
│   ├── Potion
│   ├── Consumable
│   ├── Accessory
│   ├── Tool
│   └── Material
├── RecipeIngredient Value Object
│   ├── ResourceId Reference
│   ├── Quantity Required
│   └── Validation
├── RecipeOutput Value Object
│   ├── ItemId Reference
│   ├── Quantity Produced
│   ├── Quality Formula (Optional)
│   └── HasQualityScaling Property
├── RecipeDefinition Entity
│   ├── RecipeId (Unique Identifier)
│   ├── Name and Description
│   ├── Category Classification
│   ├── RequiredStationId Reference
│   ├── Ingredients Collection
│   ├── Output Configuration
│   ├── DifficultyClass (DC)
│   ├── IsDefault Flag
│   ├── CraftingTimeSeconds
│   └── Helper Methods
├── IRecipeProvider Interface
│   ├── GetRecipe(recipeId)
│   ├── GetAllRecipes()
│   ├── GetRecipesByCategory(category)
│   ├── GetRecipesForStation(stationId)
│   ├── GetDefaultRecipes()
│   ├── GetRecipesForItem(itemId)
│   └── Exists(recipeId)
├── RecipeProvider Implementation
│   ├── JSON Loading
│   ├── Validation
│   └── Caching
└── Configuration
    ├── recipes.json
    └── recipes.schema.json
```

---

## 3. Architecture Diagrams

### 3.1 Recipe Definition Architecture

```
┌─────────────────────────────────────────────────────────────────────────┐
│                     RECIPE DEFINITION ARCHITECTURE                       │
└─────────────────────────────────────────────────────────────────────────┘

    Configuration Layer                          Domain Layer
    ───────────────────                          ────────────

    recipes.json                         ┌───────────────────────────────┐
    ┌─────────────────────┐              │       RecipeDefinition        │
    │ {                   │              ├───────────────────────────────┤
    │   "id": "iron-sword"│              │ + Id: Guid                    │
    │   "name": "...",    │   ─────▶     │ + RecipeId: string            │
    │   "ingredients": [  │              │ + Name: string                │
    │     { "resourceId", │              │ + Description: string         │
    │       "quantity" }  │              │ + Category: RecipeCategory    │
    │   ],                │              │ + RequiredStationId: string   │
    │   "output": {...},  │              │ + Ingredients: List<Ingr>     │
    │   "station": "..."  │              │ + Output: RecipeOutput        │
    │ }                   │              │ + DifficultyClass: int        │
    └─────────────────────┘              │ + IsDefault: bool             │
                                         │ + CraftingTimeSeconds: int    │
                                         │ + IconPath: string?           │
                                         └───────────────────────────────┘
                                                       │
                         ┌─────────────────────────────┼────────────────────────────┐
                         │                             │                            │
                         ▼                             ▼                            ▼
              ┌──────────────────────┐   ┌──────────────────────┐   ┌──────────────────────┐
              │   RecipeIngredient   │   │    RecipeOutput      │   │   RecipeCategory     │
              ├──────────────────────┤   ├──────────────────────┤   ├──────────────────────┤
              │ + ResourceId: string │   │ + ItemId: string     │   │ Weapon               │
              │ + Quantity: int      │   │ + Quantity: int      │   │ Armor                │
              └──────────────────────┘   │ + QualityFormula?    │   │ Potion               │
                                         └──────────────────────┘   │ Consumable           │
                                                                    │ Accessory            │
                                                                    │ Tool                 │
                                                                    │ Material             │
                                                                    └──────────────────────┘
```

### 3.2 Recipe Structure Example

```
┌─────────────────────────────────────────────────────────────────────────┐
│  RECIPE: Iron Sword                                                     │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ID: iron-sword                                                         │
│  Category: Weapon                              Station: Anvil           │
│  Difficulty: DC 12                             Default: Yes             │
│  Crafting Time: 30 seconds                                              │
│                                                                         │
│  INGREDIENTS:                                  OUTPUT:                  │
│  ┌──────────────────────────┐                 ┌───────────────────────┐ │
│  │ iron-ore         x5     │                 │ iron-sword            │ │
│  │ leather          x2     │       ▶         │   Quantity: 1         │ │
│  └──────────────────────────┘                 └───────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────┐
│  RECIPE: Mithril Blade (Quality Scaling)                                │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ID: mithril-blade                                                      │
│  Category: Weapon                              Station: Anvil           │
│  Difficulty: DC 18                             Default: No (Scroll)     │
│  Crafting Time: 120 seconds                                             │
│                                                                         │
│  INGREDIENTS:                                  OUTPUT:                  │
│  ┌──────────────────────────┐                 ┌───────────────────────┐ │
│  │ mithril-ore       x10   │                 │ mithril-blade         │ │
│  │ dragon-scale      x2    │       ▶         │   Quantity: 1         │ │
│  │ ruby              x1    │                 │   Quality: SCALED     │ │
│  └──────────────────────────┘                 │                       │ │
│                                               │   Roll >= 20: Legend. │ │
│                                               │   Roll >= 15: Epic    │ │
│                                               │   Roll < 15:  Rare    │ │
│                                               └───────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────┘
```

### 3.3 Provider Layer Diagram

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          PROVIDER LAYER                                  │
└─────────────────────────────────────────────────────────────────────────┘

    Application Layer                        Infrastructure Layer
    ─────────────────                        ────────────────────

┌─────────────────────────────┐         ┌─────────────────────────────────┐
│      IRecipeProvider        │         │        RecipeProvider           │
├─────────────────────────────┤         ├─────────────────────────────────┤
│ + GetRecipe(id)             │◀────────│ + GetRecipe(id)                 │
│ + GetAllRecipes()           │         │ + GetAllRecipes()               │
│ + GetRecipesByCategory(cat) │         │ + GetRecipesByCategory(cat)     │
│ + GetRecipesForStation(sid) │         │ + GetRecipesForStation(sid)     │
│ + GetDefaultRecipes()       │         │ + GetDefaultRecipes()           │
│ + GetRecipesForItem(itemId) │         │ + GetRecipesForItem(itemId)     │
│ + Exists(id)                │         │ + Exists(id)                    │
└─────────────────────────────┘         ├─────────────────────────────────┤
                                        │ - _recipes: Dictionary          │
                                        │ - _byCategory: Dictionary       │
                                        │ - _byStation: Dictionary        │
                                        │ - _defaultRecipes: List         │
                                        │ - _byOutputItem: Dictionary     │
                                        │ - _configPath: string           │
                                        │ - _logger: ILogger              │
                                        │ - LoadRecipes()                 │
                                        │ - ValidateRecipe()              │
                                        │ - BuildIndexes()                │
                                        └─────────────────────────────────┘
                                                        │
                                                        │ reads
                                                        ▼
                                        ┌─────────────────────────────────┐
                                        │    config/recipes.json          │
                                        ├─────────────────────────────────┤
                                        │ {                               │
                                        │   "recipes": [                  │
                                        │     { recipe definitions... }   │
                                        │   ]                             │
                                        │ }                               │
                                        └─────────────────────────────────┘
```

### 3.4 Recipe Relationship Diagram

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      RECIPE RELATIONSHIPS                                │
└─────────────────────────────────────────────────────────────────────────┘

  v0.11.0a Resources              v0.11.1a Recipes              Item System
  ─────────────────              ────────────────              ───────────

┌───────────────────┐         ┌───────────────────┐         ┌───────────────────┐
│ ResourceDefinition │         │  RecipeDefinition  │         │  ItemDefinition   │
├───────────────────┤         ├───────────────────┤         ├───────────────────┤
│ - iron-ore        │◀────────│ - Ingredients      │─────────│ - iron-sword     │
│ - leather         │         │ - Output           │         │ - iron-helmet    │
│ - healing-herb    │         │ - RequiredStation  │         │ - healing-potion │
│ - mithril-ore     │         │                    │         │ - mithril-blade  │
└───────────────────┘         └───────────────────┘         └───────────────────┘
                                       │
                                       │ references
                                       ▼
                              ┌───────────────────┐
                              │  Crafting Station  │  (v0.11.2)
                              ├───────────────────┤
                              │ - anvil           │
                              │ - alchemy-table   │
                              │ - workbench       │
                              │ - enchanting-table│
                              └───────────────────┘
```

---

## 4. RecipeCategory Enum

### 4.1 Purpose

The `RecipeCategory` enum classifies recipes into logical groups for filtering, display, and organization in the recipe book UI.

### 4.2 Implementation

**File:** `src/Core/RuneAndRust.Domain/Enums/RecipeCategory.cs`

```csharp
namespace RuneAndRust.Domain.Enums;

/// <summary>
/// Categories of craftable recipes.
/// </summary>
/// <remarks>
/// Used for organizing recipes in the recipe book UI and filtering
/// available recipes at crafting stations.
/// </remarks>
public enum RecipeCategory
{
    /// <summary>
    /// Offensive equipment: swords, axes, bows, staffs.
    /// </summary>
    Weapon = 0,

    /// <summary>
    /// Defensive equipment: helmets, chestplates, boots, shields.
    /// </summary>
    Armor = 1,

    /// <summary>
    /// Drinkable concoctions: healing, mana, buff potions.
    /// </summary>
    Potion = 2,

    /// <summary>
    /// Single-use items: food, scrolls, bombs.
    /// </summary>
    Consumable = 3,

    /// <summary>
    /// Worn accessories: rings, amulets, cloaks.
    /// </summary>
    Accessory = 4,

    /// <summary>
    /// Utility items: pickaxes, sickles, fishing rods.
    /// </summary>
    Tool = 5,

    /// <summary>
    /// Intermediate crafting materials: ingots, treated leather, refined gems.
    /// </summary>
    Material = 6
}
```

### 4.3 Category-Station Mapping

| Category | Primary Stations | Notes |
|----------|-----------------|-------|
| Weapon | Anvil, Workbench | Metal vs wood-based |
| Armor | Anvil, Workbench | Metal vs leather |
| Potion | Alchemy Table | All potions |
| Consumable | Cooking Fire, Workbench | Food vs other |
| Accessory | Enchanting Table | Magical items |
| Tool | Anvil, Workbench | Metal or wood handles |
| Material | Anvil, Alchemy Table | Processed resources |

---

## 5. RecipeIngredient Value Object

### 5.1 Purpose

The `RecipeIngredient` record represents a single ingredient requirement for a recipe, linking to a resource definition and specifying the quantity needed.

### 5.2 Implementation

**File:** `src/Core/RuneAndRust.Domain/ValueObjects/RecipeIngredient.cs`

```csharp
namespace RuneAndRust.Domain.ValueObjects;

/// <summary>
/// Represents an ingredient required for a recipe.
/// </summary>
/// <param name="ResourceId">The unique identifier of the required resource.</param>
/// <param name="Quantity">The number of resources required.</param>
/// <remarks>
/// <para>
/// Recipe ingredients reference <see cref="ResourceDefinition"/> entities
/// by their string identifiers. The quantity must be at least 1.
/// </para>
/// <para>
/// Resource IDs are normalized to lowercase for consistent lookups.
/// </para>
/// </remarks>
public sealed record RecipeIngredient
{
    /// <summary>
    /// Gets the unique identifier of the required resource.
    /// </summary>
    public string ResourceId { get; }

    /// <summary>
    /// Gets the number of resources required.
    /// </summary>
    public int Quantity { get; }

    /// <summary>
    /// Initializes a new instance of the <see cref="RecipeIngredient"/> record.
    /// </summary>
    /// <param name="resourceId">The unique identifier of the required resource.</param>
    /// <param name="quantity">The number of resources required.</param>
    /// <exception cref="ArgumentException">
    /// Thrown when <paramref name="resourceId"/> is null or whitespace.
    /// </exception>
    /// <exception cref="ArgumentOutOfRangeException">
    /// Thrown when <paramref name="quantity"/> is less than 1.
    /// </exception>
    public RecipeIngredient(string resourceId, int quantity)
    {
        ArgumentException.ThrowIfNullOrWhiteSpace(resourceId, nameof(resourceId));
        ArgumentOutOfRangeException.ThrowIfNegativeOrZero(quantity, nameof(quantity));

        ResourceId = resourceId.ToLowerInvariant();
        Quantity = quantity;
    }

    /// <summary>
    /// Creates a string representation of the ingredient.
    /// </summary>
    /// <returns>A string in the format "ResourceId x Quantity".</returns>
    public override string ToString() => $"{ResourceId} x{Quantity}";
}
```

### 5.3 Properties

| Property | Type | Description |
|----------|------|-------------|
| `ResourceId` | `string` | Reference to ResourceDefinition.ResourceId |
| `Quantity` | `int` | Number of resources consumed (minimum 1) |

---

## 6. RecipeOutput Value Object

### 6.1 Purpose

The `RecipeOutput` record defines what a recipe produces when successfully crafted, including optional quality scaling based on the crafting roll.

### 6.2 Implementation

**File:** `src/Core/RuneAndRust.Domain/ValueObjects/RecipeOutput.cs`

```csharp
namespace RuneAndRust.Domain.ValueObjects;

/// <summary>
/// Represents the output produced by a recipe.
/// </summary>
/// <remarks>
/// <para>
/// Recipe outputs reference <see cref="ItemDefinition"/> entities by their
/// string identifiers. The quantity specifies how many items are produced.
/// </para>
/// <para>
/// The optional <see cref="QualityFormula"/> enables roll-based quality
/// determination for high-tier recipes where exceptional crafting results
/// can produce better quality items.
/// </para>
/// </remarks>
public sealed record RecipeOutput
{
    /// <summary>
    /// Gets the unique identifier of the produced item.
    /// </summary>
    public string ItemId { get; }

    /// <summary>
    /// Gets the number of items produced.
    /// </summary>
    public int Quantity { get; }

    /// <summary>
    /// Gets the optional quality determination formula.
    /// </summary>
    /// <remarks>
    /// When set, the formula is evaluated against the crafting roll to determine
    /// the output item's quality tier. Format: "roll >= 20 ? 'Legendary' : roll >= 15 ? 'Epic' : 'Rare'"
    /// </remarks>
    public string? QualityFormula { get; }

    /// <summary>
    /// Gets a value indicating whether this output has quality scaling.
    /// </summary>
    public bool HasQualityScaling => !string.IsNullOrEmpty(QualityFormula);

    /// <summary>
    /// Initializes a new instance of the <see cref="RecipeOutput"/> record.
    /// </summary>
    /// <param name="itemId">The unique identifier of the produced item.</param>
    /// <param name="quantity">The number of items produced.</param>
    /// <param name="qualityFormula">Optional quality determination formula.</param>
    /// <exception cref="ArgumentException">
    /// Thrown when <paramref name="itemId"/> is null or whitespace.
    /// </exception>
    /// <exception cref="ArgumentOutOfRangeException">
    /// Thrown when <paramref name="quantity"/> is less than 1.
    /// </exception>
    public RecipeOutput(string itemId, int quantity, string? qualityFormula = null)
    {
        ArgumentException.ThrowIfNullOrWhiteSpace(itemId, nameof(itemId));
        ArgumentOutOfRangeException.ThrowIfNegativeOrZero(quantity, nameof(quantity));

        ItemId = itemId.ToLowerInvariant();
        Quantity = quantity;
        QualityFormula = qualityFormula;
    }

    /// <summary>
    /// Creates a string representation of the output.
    /// </summary>
    /// <returns>A string describing the output.</returns>
    public override string ToString()
    {
        var result = $"{ItemId} x{Quantity}";
        if (HasQualityScaling)
        {
            result += " (quality scaling)";
        }
        return result;
    }
}
```

### 6.3 Properties

| Property | Type | Description |
|----------|------|-------------|
| `ItemId` | `string` | Reference to ItemDefinition.ItemId |
| `Quantity` | `int` | Number of items produced (minimum 1) |
| `QualityFormula` | `string?` | Optional roll-based quality formula |
| `HasQualityScaling` | `bool` | True if quality formula is set |

### 6.4 Quality Formula Examples

| Formula | Roll 20+ | Roll 15-19 | Roll < 15 |
|---------|----------|------------|-----------|
| `"roll >= 20 ? 'Legendary' : roll >= 15 ? 'Epic' : 'Rare'"` | Legendary | Epic | Rare |
| `"roll >= 18 ? 'Fine' : 'Common'"` | Fine | Common | Common |

---

## 7. RecipeDefinition Entity

### 7.1 Purpose

The `RecipeDefinition` entity is the core recipe template that defines ingredients, outputs, station requirements, and difficulty for crafting.

### 7.2 Implementation

**File:** `src/Core/RuneAndRust.Domain/Definitions/RecipeDefinition.cs`

```csharp
namespace RuneAndRust.Domain.Definitions;

using RuneAndRust.Domain.Enums;
using RuneAndRust.Domain.ValueObjects;

/// <summary>
/// Defines a crafting recipe with ingredients, output, and requirements.
/// </summary>
/// <remarks>
/// <para>
/// Recipe definitions are immutable templates loaded from configuration.
/// They specify what resources are consumed and what items are produced
/// when crafting succeeds.
/// </para>
/// <para>
/// The <see cref="DifficultyClass"/> determines the target number for
/// the crafting skill check (d20 + modifier vs DC).
/// </para>
/// <para>
/// Recipes marked with <see cref="IsDefault"/> are automatically added
/// to new players' recipe books.
/// </para>
/// </remarks>
public sealed class RecipeDefinition : IEntity
{
    /// <summary>
    /// Gets the unique entity identifier.
    /// </summary>
    public Guid Id { get; private set; }

    /// <summary>
    /// Gets the unique recipe identifier used for lookups.
    /// </summary>
    public string RecipeId { get; private set; } = null!;

    /// <summary>
    /// Gets the display name of the recipe.
    /// </summary>
    public string Name { get; private set; } = null!;

    /// <summary>
    /// Gets the description of the recipe.
    /// </summary>
    public string Description { get; private set; } = null!;

    /// <summary>
    /// Gets the category of the recipe.
    /// </summary>
    public RecipeCategory Category { get; private set; }

    /// <summary>
    /// Gets the unique identifier of the required crafting station.
    /// </summary>
    public string RequiredStationId { get; private set; } = null!;

    /// <summary>
    /// Gets the list of ingredients required for this recipe.
    /// </summary>
    public IReadOnlyList<RecipeIngredient> Ingredients { get; private set; } = [];

    /// <summary>
    /// Gets the output produced by this recipe.
    /// </summary>
    public RecipeOutput Output { get; private set; } = null!;

    /// <summary>
    /// Gets the difficulty class for the crafting skill check.
    /// </summary>
    /// <remarks>
    /// The player must roll d20 + crafting modifier >= DC to succeed.
    /// </remarks>
    public int DifficultyClass { get; private set; }

    /// <summary>
    /// Gets a value indicating whether this is a default recipe.
    /// </summary>
    /// <remarks>
    /// Default recipes are automatically known by new players.
    /// </remarks>
    public bool IsDefault { get; private set; }

    /// <summary>
    /// Gets the time in seconds required to craft this recipe.
    /// </summary>
    public int CraftingTimeSeconds { get; private set; }

    /// <summary>
    /// Gets the optional icon path for UI display.
    /// </summary>
    public string? IconPath { get; private set; }

    /// <summary>
    /// Private constructor for factory pattern.
    /// </summary>
    private RecipeDefinition() { }

    /// <summary>
    /// Creates a new recipe definition.
    /// </summary>
    /// <param name="recipeId">Unique recipe identifier.</param>
    /// <param name="name">Display name.</param>
    /// <param name="description">Description text.</param>
    /// <param name="category">Recipe category.</param>
    /// <param name="requiredStationId">Required crafting station ID.</param>
    /// <param name="ingredients">List of required ingredients.</param>
    /// <param name="output">Recipe output.</param>
    /// <param name="difficultyClass">Crafting DC.</param>
    /// <param name="isDefault">Whether this is a starter recipe.</param>
    /// <param name="craftingTimeSeconds">Time to craft in seconds.</param>
    /// <param name="iconPath">Optional icon path.</param>
    /// <returns>A new RecipeDefinition instance.</returns>
    /// <exception cref="ArgumentException">
    /// Thrown when required string parameters are null or whitespace.
    /// </exception>
    /// <exception cref="ArgumentOutOfRangeException">
    /// Thrown when difficultyClass is less than 1.
    /// </exception>
    /// <exception cref="ArgumentException">
    /// Thrown when ingredients collection is empty.
    /// </exception>
    public static RecipeDefinition Create(
        string recipeId,
        string name,
        string description,
        RecipeCategory category,
        string requiredStationId,
        IEnumerable<RecipeIngredient> ingredients,
        RecipeOutput output,
        int difficultyClass,
        bool isDefault = false,
        int craftingTimeSeconds = 30,
        string? iconPath = null)
    {
        ArgumentException.ThrowIfNullOrWhiteSpace(recipeId, nameof(recipeId));
        ArgumentException.ThrowIfNullOrWhiteSpace(name, nameof(name));
        ArgumentException.ThrowIfNullOrWhiteSpace(requiredStationId, nameof(requiredStationId));
        ArgumentNullException.ThrowIfNull(output, nameof(output));
        ArgumentOutOfRangeException.ThrowIfNegativeOrZero(difficultyClass, nameof(difficultyClass));
        ArgumentOutOfRangeException.ThrowIfNegative(craftingTimeSeconds, nameof(craftingTimeSeconds));

        var ingredientList = ingredients?.ToList() ?? [];
        if (ingredientList.Count == 0)
        {
            throw new ArgumentException("Recipe must have at least one ingredient.", nameof(ingredients));
        }

        return new RecipeDefinition
        {
            Id = Guid.NewGuid(),
            RecipeId = recipeId.ToLowerInvariant(),
            Name = name,
            Description = description ?? string.Empty,
            Category = category,
            RequiredStationId = requiredStationId.ToLowerInvariant(),
            Ingredients = ingredientList.AsReadOnly(),
            Output = output,
            DifficultyClass = difficultyClass,
            IsDefault = isDefault,
            CraftingTimeSeconds = craftingTimeSeconds,
            IconPath = iconPath
        };
    }

    /// <summary>
    /// Gets the total number of resources required.
    /// </summary>
    /// <returns>Sum of all ingredient quantities.</returns>
    public int GetTotalIngredientCount()
    {
        return Ingredients.Sum(i => i.Quantity);
    }

    /// <summary>
    /// Gets a specific ingredient by resource ID.
    /// </summary>
    /// <param name="resourceId">The resource ID to find.</param>
    /// <returns>The ingredient if found; otherwise, null.</returns>
    public RecipeIngredient? GetIngredient(string resourceId)
    {
        var normalizedId = resourceId.ToLowerInvariant();
        return Ingredients.FirstOrDefault(i => i.ResourceId == normalizedId);
    }

    /// <summary>
    /// Checks if the recipe requires a specific resource.
    /// </summary>
    /// <param name="resourceId">The resource ID to check.</param>
    /// <returns>True if the resource is required; otherwise, false.</returns>
    public bool RequiresResource(string resourceId)
    {
        return GetIngredient(resourceId) is not null;
    }

    /// <summary>
    /// Gets a difficulty description based on the DC.
    /// </summary>
    /// <returns>A human-readable difficulty string.</returns>
    public string GetDifficultyDescription()
    {
        return DifficultyClass switch
        {
            <= 8 => "Trivial",
            <= 10 => "Easy",
            <= 12 => "Moderate",
            <= 14 => "Challenging",
            <= 16 => "Hard",
            <= 18 => "Very Hard",
            _ => "Legendary"
        };
    }

    /// <summary>
    /// Returns a string representation of the recipe.
    /// </summary>
    /// <returns>The recipe name and ID.</returns>
    public override string ToString() => $"{Name} ({RecipeId})";
}
```

### 7.3 Properties Summary

| Property | Type | Description | Constraints |
|----------|------|-------------|-------------|
| `Id` | `Guid` | Entity identifier | Auto-generated |
| `RecipeId` | `string` | Unique lookup key | Required, lowercase |
| `Name` | `string` | Display name | Required |
| `Description` | `string` | Recipe description | Optional |
| `Category` | `RecipeCategory` | Classification | Enum value |
| `RequiredStationId` | `string` | Station reference | Required, lowercase |
| `Ingredients` | `IReadOnlyList<RecipeIngredient>` | Required resources | At least 1 |
| `Output` | `RecipeOutput` | Produced item(s) | Required |
| `DifficultyClass` | `int` | Crafting DC | >= 1 |
| `IsDefault` | `bool` | Starter recipe flag | Default false |
| `CraftingTimeSeconds` | `int` | Crafting duration | >= 0 |
| `IconPath` | `string?` | UI icon path | Optional |

### 7.4 Difficulty Class Scale

| DC | Description | Example Recipes |
|----|-------------|-----------------|
| 5-8 | Trivial | Basic materials (iron ingot) |
| 9-10 | Easy | Simple potions |
| 11-12 | Moderate | Standard weapons/armor |
| 13-14 | Challenging | Enhanced equipment |
| 15-16 | Hard | Rare potions, quality gear |
| 17-18 | Very Hard | Epic equipment |
| 19-20 | Legendary | Mythic items |

---

## 8. IRecipeProvider Interface

### 8.1 Purpose

The `IRecipeProvider` interface defines the contract for accessing recipe definitions, enabling dependency injection and testability.

### 8.2 Implementation

**File:** `src/Core/RuneAndRust.Application/Interfaces/IRecipeProvider.cs`

```csharp
namespace RuneAndRust.Application.Interfaces;

using RuneAndRust.Domain.Definitions;
using RuneAndRust.Domain.Enums;

/// <summary>
/// Provides access to recipe definitions.
/// </summary>
/// <remarks>
/// Recipe providers load recipe definitions from configuration and provide
/// query methods for retrieving recipes by various criteria.
/// </remarks>
public interface IRecipeProvider
{
    /// <summary>
    /// Gets a recipe by its unique identifier.
    /// </summary>
    /// <param name="recipeId">The recipe identifier.</param>
    /// <returns>The recipe definition if found; otherwise, null.</returns>
    RecipeDefinition? GetRecipe(string recipeId);

    /// <summary>
    /// Gets all recipe definitions.
    /// </summary>
    /// <returns>A read-only list of all recipes.</returns>
    IReadOnlyList<RecipeDefinition> GetAllRecipes();

    /// <summary>
    /// Gets recipes filtered by category.
    /// </summary>
    /// <param name="category">The category to filter by.</param>
    /// <returns>A read-only list of recipes in the specified category.</returns>
    IReadOnlyList<RecipeDefinition> GetRecipesByCategory(RecipeCategory category);

    /// <summary>
    /// Gets recipes that can be crafted at a specific station.
    /// </summary>
    /// <param name="stationId">The station identifier.</param>
    /// <returns>A read-only list of recipes for the station.</returns>
    IReadOnlyList<RecipeDefinition> GetRecipesForStation(string stationId);

    /// <summary>
    /// Gets all default (starter) recipes.
    /// </summary>
    /// <returns>A read-only list of default recipes.</returns>
    IReadOnlyList<RecipeDefinition> GetDefaultRecipes();

    /// <summary>
    /// Gets recipes that produce a specific item.
    /// </summary>
    /// <param name="itemId">The output item identifier.</param>
    /// <returns>A read-only list of recipes producing the item.</returns>
    IReadOnlyList<RecipeDefinition> GetRecipesForItem(string itemId);

    /// <summary>
    /// Checks if a recipe exists.
    /// </summary>
    /// <param name="recipeId">The recipe identifier.</param>
    /// <returns>True if the recipe exists; otherwise, false.</returns>
    bool Exists(string recipeId);

    /// <summary>
    /// Gets the total number of recipes.
    /// </summary>
    /// <returns>The recipe count.</returns>
    int GetRecipeCount();
}
```

### 8.3 Method Summary

| Method | Return Type | Description |
|--------|-------------|-------------|
| `GetRecipe` | `RecipeDefinition?` | Lookup by ID |
| `GetAllRecipes` | `IReadOnlyList<RecipeDefinition>` | All recipes |
| `GetRecipesByCategory` | `IReadOnlyList<RecipeDefinition>` | Filter by category |
| `GetRecipesForStation` | `IReadOnlyList<RecipeDefinition>` | Filter by station |
| `GetDefaultRecipes` | `IReadOnlyList<RecipeDefinition>` | Starter recipes only |
| `GetRecipesForItem` | `IReadOnlyList<RecipeDefinition>` | Recipes producing item |
| `Exists` | `bool` | Existence check |
| `GetRecipeCount` | `int` | Total count |

---

## 9. RecipeProvider Implementation

### 9.1 Purpose

The `RecipeProvider` implements JSON-based loading of recipe definitions with validation, caching, and indexed lookups.

### 9.2 Implementation

**File:** `src/Infrastructure/RuneAndRust.Infrastructure/Providers/RecipeProvider.cs`

```csharp
namespace RuneAndRust.Infrastructure.Providers;

using Microsoft.Extensions.Logging;
using RuneAndRust.Application.Interfaces;
using RuneAndRust.Domain.Definitions;
using RuneAndRust.Domain.Enums;
using RuneAndRust.Domain.ValueObjects;
using System.Text.Json;

/// <summary>
/// Provides recipe definitions loaded from JSON configuration.
/// </summary>
/// <remarks>
/// <para>
/// Recipes are loaded once at startup and cached for efficient access.
/// Multiple indexes are built for fast lookups by category, station, and output item.
/// </para>
/// <para>
/// Invalid recipes are logged and skipped, allowing the game to continue
/// with valid recipes.
/// </para>
/// </remarks>
public sealed class RecipeProvider : IRecipeProvider
{
    private readonly Dictionary<string, RecipeDefinition> _recipes = new(StringComparer.OrdinalIgnoreCase);
    private readonly Dictionary<RecipeCategory, List<RecipeDefinition>> _byCategory = [];
    private readonly Dictionary<string, List<RecipeDefinition>> _byStation = new(StringComparer.OrdinalIgnoreCase);
    private readonly Dictionary<string, List<RecipeDefinition>> _byOutputItem = new(StringComparer.OrdinalIgnoreCase);
    private readonly List<RecipeDefinition> _defaultRecipes = [];
    private readonly string _configPath;
    private readonly ILogger<RecipeProvider> _logger;
    private bool _isLoaded;

    /// <summary>
    /// Initializes a new instance of the <see cref="RecipeProvider"/> class.
    /// </summary>
    /// <param name="configPath">Path to the recipes.json configuration file.</param>
    /// <param name="logger">Logger instance.</param>
    public RecipeProvider(string configPath, ILogger<RecipeProvider> logger)
    {
        _configPath = configPath ?? throw new ArgumentNullException(nameof(configPath));
        _logger = logger ?? throw new ArgumentNullException(nameof(logger));
    }

    /// <inheritdoc/>
    public RecipeDefinition? GetRecipe(string recipeId)
    {
        EnsureLoaded();
        if (string.IsNullOrWhiteSpace(recipeId))
        {
            return null;
        }
        return _recipes.GetValueOrDefault(recipeId.ToLowerInvariant());
    }

    /// <inheritdoc/>
    public IReadOnlyList<RecipeDefinition> GetAllRecipes()
    {
        EnsureLoaded();
        return _recipes.Values.ToList().AsReadOnly();
    }

    /// <inheritdoc/>
    public IReadOnlyList<RecipeDefinition> GetRecipesByCategory(RecipeCategory category)
    {
        EnsureLoaded();
        return _byCategory.TryGetValue(category, out var recipes)
            ? recipes.AsReadOnly()
            : Array.Empty<RecipeDefinition>();
    }

    /// <inheritdoc/>
    public IReadOnlyList<RecipeDefinition> GetRecipesForStation(string stationId)
    {
        EnsureLoaded();
        if (string.IsNullOrWhiteSpace(stationId))
        {
            return Array.Empty<RecipeDefinition>();
        }
        return _byStation.TryGetValue(stationId.ToLowerInvariant(), out var recipes)
            ? recipes.AsReadOnly()
            : Array.Empty<RecipeDefinition>();
    }

    /// <inheritdoc/>
    public IReadOnlyList<RecipeDefinition> GetDefaultRecipes()
    {
        EnsureLoaded();
        return _defaultRecipes.AsReadOnly();
    }

    /// <inheritdoc/>
    public IReadOnlyList<RecipeDefinition> GetRecipesForItem(string itemId)
    {
        EnsureLoaded();
        if (string.IsNullOrWhiteSpace(itemId))
        {
            return Array.Empty<RecipeDefinition>();
        }
        return _byOutputItem.TryGetValue(itemId.ToLowerInvariant(), out var recipes)
            ? recipes.AsReadOnly()
            : Array.Empty<RecipeDefinition>();
    }

    /// <inheritdoc/>
    public bool Exists(string recipeId)
    {
        EnsureLoaded();
        if (string.IsNullOrWhiteSpace(recipeId))
        {
            return false;
        }
        return _recipes.ContainsKey(recipeId.ToLowerInvariant());
    }

    /// <inheritdoc/>
    public int GetRecipeCount()
    {
        EnsureLoaded();
        return _recipes.Count;
    }

    /// <summary>
    /// Ensures recipes are loaded from configuration.
    /// </summary>
    private void EnsureLoaded()
    {
        if (_isLoaded)
        {
            return;
        }

        LoadRecipes();
        _isLoaded = true;
    }

    /// <summary>
    /// Loads recipes from the JSON configuration file.
    /// </summary>
    private void LoadRecipes()
    {
        _logger.LogInformation("Loading recipes from {Path}", _configPath);

        if (!File.Exists(_configPath))
        {
            _logger.LogWarning("Recipe configuration file not found: {Path}", _configPath);
            return;
        }

        try
        {
            var json = File.ReadAllText(_configPath);
            var config = JsonSerializer.Deserialize<RecipeConfiguration>(json, GetJsonOptions());

            if (config?.Recipes is null || config.Recipes.Count == 0)
            {
                _logger.LogWarning("No recipes found in configuration");
                return;
            }

            var loadedCount = 0;
            var skippedCount = 0;

            foreach (var recipeData in config.Recipes)
            {
                try
                {
                    var recipe = CreateRecipeFromData(recipeData);
                    if (recipe is not null && ValidateRecipe(recipe))
                    {
                        AddRecipeToIndexes(recipe);
                        loadedCount++;
                    }
                    else
                    {
                        skippedCount++;
                    }
                }
                catch (Exception ex)
                {
                    _logger.LogWarning(ex, "Failed to load recipe: {RecipeId}", recipeData.Id);
                    skippedCount++;
                }
            }

            _logger.LogInformation(
                "Loaded {Loaded} recipes, skipped {Skipped}",
                loadedCount, skippedCount);
        }
        catch (JsonException ex)
        {
            _logger.LogError(ex, "Failed to parse recipe configuration: {Path}", _configPath);
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, "Unexpected error loading recipes from: {Path}", _configPath);
        }
    }

    /// <summary>
    /// Creates a RecipeDefinition from configuration data.
    /// </summary>
    private RecipeDefinition? CreateRecipeFromData(RecipeData data)
    {
        if (string.IsNullOrWhiteSpace(data.Id) ||
            string.IsNullOrWhiteSpace(data.Name) ||
            string.IsNullOrWhiteSpace(data.RequiredStation))
        {
            _logger.LogWarning("Recipe missing required fields: {Id}", data.Id);
            return null;
        }

        if (data.Ingredients is null || data.Ingredients.Count == 0)
        {
            _logger.LogWarning("Recipe has no ingredients: {Id}", data.Id);
            return null;
        }

        if (data.Output is null)
        {
            _logger.LogWarning("Recipe has no output: {Id}", data.Id);
            return null;
        }

        var ingredients = data.Ingredients
            .Select(i => new RecipeIngredient(i.ResourceId, i.Quantity))
            .ToList();

        var output = new RecipeOutput(
            data.Output.ItemId,
            data.Output.Quantity,
            data.Output.QualityFormula);

        if (!Enum.TryParse<RecipeCategory>(data.Category, true, out var category))
        {
            _logger.LogWarning("Invalid recipe category '{Category}' for: {Id}", data.Category, data.Id);
            return null;
        }

        return RecipeDefinition.Create(
            recipeId: data.Id,
            name: data.Name,
            description: data.Description ?? string.Empty,
            category: category,
            requiredStationId: data.RequiredStation,
            ingredients: ingredients,
            output: output,
            difficultyClass: data.DifficultyClass,
            isDefault: data.IsDefault,
            craftingTimeSeconds: data.CraftingTimeSeconds,
            iconPath: data.Icon);
    }

    /// <summary>
    /// Validates a recipe definition.
    /// </summary>
    private bool ValidateRecipe(RecipeDefinition recipe)
    {
        if (_recipes.ContainsKey(recipe.RecipeId))
        {
            _logger.LogWarning("Duplicate recipe ID: {RecipeId}", recipe.RecipeId);
            return false;
        }

        if (recipe.DifficultyClass < 1 || recipe.DifficultyClass > 30)
        {
            _logger.LogWarning(
                "Recipe {RecipeId} has invalid DC: {DC}",
                recipe.RecipeId, recipe.DifficultyClass);
            return false;
        }

        return true;
    }

    /// <summary>
    /// Adds a recipe to all lookup indexes.
    /// </summary>
    private void AddRecipeToIndexes(RecipeDefinition recipe)
    {
        _recipes[recipe.RecipeId] = recipe;

        // Index by category
        if (!_byCategory.TryGetValue(recipe.Category, out var categoryList))
        {
            categoryList = [];
            _byCategory[recipe.Category] = categoryList;
        }
        categoryList.Add(recipe);

        // Index by station
        if (!_byStation.TryGetValue(recipe.RequiredStationId, out var stationList))
        {
            stationList = [];
            _byStation[recipe.RequiredStationId] = stationList;
        }
        stationList.Add(recipe);

        // Index by output item
        if (!_byOutputItem.TryGetValue(recipe.Output.ItemId, out var itemList))
        {
            itemList = [];
            _byOutputItem[recipe.Output.ItemId] = itemList;
        }
        itemList.Add(recipe);

        // Track default recipes
        if (recipe.IsDefault)
        {
            _defaultRecipes.Add(recipe);
        }

        _logger.LogDebug(
            "Loaded recipe: {RecipeId} ({Category}, Station: {Station}, DC: {DC})",
            recipe.RecipeId, recipe.Category, recipe.RequiredStationId, recipe.DifficultyClass);
    }

    /// <summary>
    /// Gets JSON serializer options.
    /// </summary>
    private static JsonSerializerOptions GetJsonOptions()
    {
        return new JsonSerializerOptions
        {
            PropertyNameCaseInsensitive = true,
            ReadCommentHandling = JsonCommentHandling.Skip,
            AllowTrailingCommas = true
        };
    }

    #region Configuration DTOs

    private sealed class RecipeConfiguration
    {
        public List<RecipeData> Recipes { get; set; } = [];
    }

    private sealed class RecipeData
    {
        public string Id { get; set; } = null!;
        public string Name { get; set; } = null!;
        public string? Description { get; set; }
        public string Category { get; set; } = null!;
        public string RequiredStation { get; set; } = null!;
        public List<IngredientData> Ingredients { get; set; } = [];
        public OutputData Output { get; set; } = null!;
        public int DifficultyClass { get; set; } = 10;
        public bool IsDefault { get; set; }
        public int CraftingTimeSeconds { get; set; } = 30;
        public string? Icon { get; set; }
    }

    private sealed class IngredientData
    {
        public string ResourceId { get; set; } = null!;
        public int Quantity { get; set; } = 1;
    }

    private sealed class OutputData
    {
        public string ItemId { get; set; } = null!;
        public int Quantity { get; set; } = 1;
        public string? QualityFormula { get; set; }
    }

    #endregion
}
```

### 9.3 Loading Flow

```
┌────────────────────────────────────────────────────────────────────────┐
│                      RECIPE LOADING FLOW                                │
└────────────────────────────────────────────────────────────────────────┘

     Application Start
           │
           ▼
    ┌──────────────┐
    │ GetRecipe()  │  ◀── First access triggers load
    └──────────────┘
           │
           ▼
    ┌──────────────┐
    │ EnsureLoaded │
    └──────────────┘
           │
           ▼ (if not loaded)
    ┌──────────────────────────────────────────┐
    │ LoadRecipes()                            │
    ├──────────────────────────────────────────┤
    │ 1. Read recipes.json                     │
    │ 2. Deserialize to RecipeConfiguration    │
    │ 3. For each recipe:                      │
    │    a. CreateRecipeFromData()             │
    │    b. ValidateRecipe()                   │
    │    c. AddRecipeToIndexes()               │
    │ 4. Log summary                           │
    └──────────────────────────────────────────┘
           │
           ▼
    ┌──────────────────────────────────────────┐
    │ Indexes Built                            │
    ├──────────────────────────────────────────┤
    │ _recipes: Dictionary<string, Recipe>     │
    │ _byCategory: Dict<Category, List>        │
    │ _byStation: Dict<string, List>           │
    │ _byOutputItem: Dict<string, List>        │
    │ _defaultRecipes: List<Recipe>            │
    └──────────────────────────────────────────┘
           │
           ▼
    ┌──────────────┐
    │ Return result│
    └──────────────┘
```

---

## 10. Configuration Schema

### 10.1 JSON Schema

**File:** `config/schemas/recipes.schema.json`

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "recipes.schema.json",
  "title": "Recipe Definitions",
  "description": "Schema for crafting recipe definitions in RuneAndRust",
  "type": "object",
  "required": ["recipes"],
  "properties": {
    "$schema": {
      "type": "string",
      "description": "Reference to this schema file"
    },
    "recipes": {
      "type": "array",
      "description": "Array of recipe definitions",
      "items": {
        "$ref": "#/$defs/recipe"
      },
      "minItems": 1
    }
  },
  "$defs": {
    "recipe": {
      "type": "object",
      "description": "A single recipe definition",
      "required": ["id", "name", "category", "requiredStation", "ingredients", "output", "difficultyClass"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique recipe identifier (lowercase, kebab-case)",
          "pattern": "^[a-z][a-z0-9-]*$",
          "minLength": 2,
          "maxLength": 64
        },
        "name": {
          "type": "string",
          "description": "Display name for the recipe",
          "minLength": 1,
          "maxLength": 64
        },
        "description": {
          "type": "string",
          "description": "Recipe description text",
          "maxLength": 256
        },
        "category": {
          "type": "string",
          "description": "Recipe category",
          "enum": ["Weapon", "Armor", "Potion", "Consumable", "Accessory", "Tool", "Material"]
        },
        "requiredStation": {
          "type": "string",
          "description": "ID of the crafting station required",
          "pattern": "^[a-z][a-z0-9-]*$",
          "minLength": 2
        },
        "ingredients": {
          "type": "array",
          "description": "Required ingredients for the recipe",
          "items": {
            "$ref": "#/$defs/ingredient"
          },
          "minItems": 1,
          "maxItems": 10
        },
        "output": {
          "$ref": "#/$defs/output",
          "description": "What the recipe produces"
        },
        "difficultyClass": {
          "type": "integer",
          "description": "Crafting skill check DC (1-30)",
          "minimum": 1,
          "maximum": 30
        },
        "isDefault": {
          "type": "boolean",
          "description": "Whether this recipe is known by default",
          "default": false
        },
        "craftingTimeSeconds": {
          "type": "integer",
          "description": "Time to craft in seconds",
          "minimum": 0,
          "maximum": 3600,
          "default": 30
        },
        "icon": {
          "type": "string",
          "description": "Path to recipe icon image"
        }
      },
      "additionalProperties": false
    },
    "ingredient": {
      "type": "object",
      "description": "A recipe ingredient requirement",
      "required": ["resourceId", "quantity"],
      "properties": {
        "resourceId": {
          "type": "string",
          "description": "ID of the required resource",
          "pattern": "^[a-z][a-z0-9-]*$",
          "minLength": 2
        },
        "quantity": {
          "type": "integer",
          "description": "Number of resources required",
          "minimum": 1,
          "maximum": 999
        }
      },
      "additionalProperties": false
    },
    "output": {
      "type": "object",
      "description": "Recipe output specification",
      "required": ["itemId", "quantity"],
      "properties": {
        "itemId": {
          "type": "string",
          "description": "ID of the item produced",
          "pattern": "^[a-z][a-z0-9-]*$",
          "minLength": 2
        },
        "quantity": {
          "type": "integer",
          "description": "Number of items produced",
          "minimum": 1,
          "maximum": 99
        },
        "qualityFormula": {
          "type": "string",
          "description": "Formula for roll-based quality determination",
          "maxLength": 256
        }
      },
      "additionalProperties": false
    }
  }
}
```

---

## 11. Configuration File

### 11.1 Recipe Configuration

**File:** `config/recipes.json`

```json
{
  "$schema": "./schemas/recipes.schema.json",
  "recipes": [
    {
      "id": "iron-sword",
      "name": "Iron Sword",
      "description": "Forge a basic but reliable iron sword",
      "category": "Weapon",
      "requiredStation": "anvil",
      "ingredients": [
        { "resourceId": "iron-ore", "quantity": 5 },
        { "resourceId": "leather", "quantity": 2 }
      ],
      "output": {
        "itemId": "iron-sword",
        "quantity": 1
      },
      "difficultyClass": 12,
      "isDefault": true,
      "craftingTimeSeconds": 30,
      "icon": "icons/recipes/iron_sword.png"
    },
    {
      "id": "iron-helmet",
      "name": "Iron Helmet",
      "description": "Forge a protective iron helmet",
      "category": "Armor",
      "requiredStation": "anvil",
      "ingredients": [
        { "resourceId": "iron-ore", "quantity": 4 },
        { "resourceId": "leather", "quantity": 1 }
      ],
      "output": {
        "itemId": "iron-helmet",
        "quantity": 1
      },
      "difficultyClass": 12,
      "isDefault": true,
      "craftingTimeSeconds": 25
    },
    {
      "id": "iron-chestplate",
      "name": "Iron Chestplate",
      "description": "Forge a sturdy iron chestplate for protection",
      "category": "Armor",
      "requiredStation": "anvil",
      "ingredients": [
        { "resourceId": "iron-ore", "quantity": 8 },
        { "resourceId": "leather", "quantity": 3 }
      ],
      "output": {
        "itemId": "iron-chestplate",
        "quantity": 1
      },
      "difficultyClass": 13,
      "isDefault": true,
      "craftingTimeSeconds": 45
    },
    {
      "id": "healing-potion",
      "name": "Healing Potion",
      "description": "Brew a restorative potion that heals wounds",
      "category": "Potion",
      "requiredStation": "alchemy-table",
      "ingredients": [
        { "resourceId": "healing-herb", "quantity": 3 },
        { "resourceId": "empty-vial", "quantity": 1 }
      ],
      "output": {
        "itemId": "healing-potion",
        "quantity": 1
      },
      "difficultyClass": 10,
      "isDefault": true,
      "craftingTimeSeconds": 20
    },
    {
      "id": "mana-potion",
      "name": "Mana Potion",
      "description": "Brew a potion that restores magical energy",
      "category": "Potion",
      "requiredStation": "alchemy-table",
      "ingredients": [
        { "resourceId": "mana-leaf", "quantity": 3 },
        { "resourceId": "empty-vial", "quantity": 1 }
      ],
      "output": {
        "itemId": "mana-potion",
        "quantity": 1
      },
      "difficultyClass": 12,
      "isDefault": true,
      "craftingTimeSeconds": 20
    },
    {
      "id": "leather-armor",
      "name": "Leather Armor",
      "description": "Craft a suit of flexible leather armor",
      "category": "Armor",
      "requiredStation": "workbench",
      "ingredients": [
        { "resourceId": "leather", "quantity": 6 },
        { "resourceId": "linen", "quantity": 2 }
      ],
      "output": {
        "itemId": "leather-armor",
        "quantity": 1
      },
      "difficultyClass": 11,
      "isDefault": true,
      "craftingTimeSeconds": 35
    },
    {
      "id": "iron-pickaxe",
      "name": "Iron Pickaxe",
      "description": "Forge a sturdy pickaxe for mining ore",
      "category": "Tool",
      "requiredStation": "anvil",
      "ingredients": [
        { "resourceId": "iron-ore", "quantity": 4 },
        { "resourceId": "oak-wood", "quantity": 2 }
      ],
      "output": {
        "itemId": "iron-pickaxe",
        "quantity": 1
      },
      "difficultyClass": 11,
      "isDefault": true,
      "craftingTimeSeconds": 25
    },
    {
      "id": "iron-ingot",
      "name": "Iron Ingot",
      "description": "Smelt iron ore into a refined ingot",
      "category": "Material",
      "requiredStation": "anvil",
      "ingredients": [
        { "resourceId": "iron-ore", "quantity": 2 }
      ],
      "output": {
        "itemId": "iron-ingot",
        "quantity": 1
      },
      "difficultyClass": 8,
      "isDefault": true,
      "craftingTimeSeconds": 15
    },
    {
      "id": "steel-sword",
      "name": "Steel Sword",
      "description": "Forge a superior steel blade with enhanced durability",
      "category": "Weapon",
      "requiredStation": "anvil",
      "ingredients": [
        { "resourceId": "iron-ore", "quantity": 8 },
        { "resourceId": "coal", "quantity": 4 },
        { "resourceId": "leather", "quantity": 2 }
      ],
      "output": {
        "itemId": "steel-sword",
        "quantity": 1
      },
      "difficultyClass": 14,
      "isDefault": false,
      "craftingTimeSeconds": 45
    },
    {
      "id": "steel-armor",
      "name": "Steel Armor",
      "description": "Forge a full suit of reinforced steel armor",
      "category": "Armor",
      "requiredStation": "anvil",
      "ingredients": [
        { "resourceId": "iron-ore", "quantity": 12 },
        { "resourceId": "coal", "quantity": 6 },
        { "resourceId": "leather", "quantity": 4 }
      ],
      "output": {
        "itemId": "steel-armor",
        "quantity": 1
      },
      "difficultyClass": 15,
      "isDefault": false,
      "craftingTimeSeconds": 60
    },
    {
      "id": "mithril-blade",
      "name": "Mithril Blade",
      "description": "Forge a legendary mithril weapon of incredible power",
      "category": "Weapon",
      "requiredStation": "anvil",
      "ingredients": [
        { "resourceId": "mithril-ore", "quantity": 10 },
        { "resourceId": "dragon-scale", "quantity": 2 },
        { "resourceId": "ruby", "quantity": 1 }
      ],
      "output": {
        "itemId": "mithril-blade",
        "quantity": 1,
        "qualityFormula": "roll >= 20 ? 'Legendary' : roll >= 15 ? 'Epic' : 'Rare'"
      },
      "difficultyClass": 18,
      "isDefault": false,
      "craftingTimeSeconds": 120
    },
    {
      "id": "fire-resistance-potion",
      "name": "Fire Resistance Potion",
      "description": "A potent potion that grants temporary fire resistance",
      "category": "Potion",
      "requiredStation": "alchemy-table",
      "ingredients": [
        { "resourceId": "firebloom", "quantity": 2 },
        { "resourceId": "mana-leaf", "quantity": 1 },
        { "resourceId": "empty-vial", "quantity": 1 }
      ],
      "output": {
        "itemId": "fire-resistance-potion",
        "quantity": 1
      },
      "difficultyClass": 15,
      "isDefault": false,
      "craftingTimeSeconds": 30
    },
    {
      "id": "greater-healing-potion",
      "name": "Greater Healing Potion",
      "description": "A powerful potion that heals significant wounds",
      "category": "Potion",
      "requiredStation": "alchemy-table",
      "ingredients": [
        { "resourceId": "healing-herb", "quantity": 5 },
        { "resourceId": "moonpetal", "quantity": 2 },
        { "resourceId": "empty-vial", "quantity": 1 }
      ],
      "output": {
        "itemId": "greater-healing-potion",
        "quantity": 1
      },
      "difficultyClass": 14,
      "isDefault": false,
      "craftingTimeSeconds": 30
    },
    {
      "id": "cooked-meat",
      "name": "Cooked Meat",
      "description": "Cook raw meat into a nourishing meal",
      "category": "Consumable",
      "requiredStation": "cooking-fire",
      "ingredients": [
        { "resourceId": "raw-meat", "quantity": 1 }
      ],
      "output": {
        "itemId": "cooked-meat",
        "quantity": 1
      },
      "difficultyClass": 8,
      "isDefault": true,
      "craftingTimeSeconds": 10
    },
    {
      "id": "silver-ring",
      "name": "Silver Ring",
      "description": "Craft a silver ring that can be enchanted",
      "category": "Accessory",
      "requiredStation": "workbench",
      "ingredients": [
        { "resourceId": "silver-ore", "quantity": 2 }
      ],
      "output": {
        "itemId": "silver-ring",
        "quantity": 1
      },
      "difficultyClass": 12,
      "isDefault": false,
      "craftingTimeSeconds": 20
    }
  ]
}
```

### 11.2 Recipe Summary

| Recipe | Category | Station | DC | Default |
|--------|----------|---------|----|---------|
| Iron Sword | Weapon | anvil | 12 | Yes |
| Iron Helmet | Armor | anvil | 12 | Yes |
| Iron Chestplate | Armor | anvil | 13 | Yes |
| Healing Potion | Potion | alchemy-table | 10 | Yes |
| Mana Potion | Potion | alchemy-table | 12 | Yes |
| Leather Armor | Armor | workbench | 11 | Yes |
| Iron Pickaxe | Tool | anvil | 11 | Yes |
| Iron Ingot | Material | anvil | 8 | Yes |
| Cooked Meat | Consumable | cooking-fire | 8 | Yes |
| Steel Sword | Weapon | anvil | 14 | No |
| Steel Armor | Armor | anvil | 15 | No |
| Mithril Blade | Weapon | anvil | 18 | No |
| Fire Resistance Potion | Potion | alchemy-table | 15 | No |
| Greater Healing Potion | Potion | alchemy-table | 14 | No |
| Silver Ring | Accessory | workbench | 12 | No |

---

## 12. Logging Specifications

### 12.1 Log Levels by Component

| Component | Level | Events |
|-----------|-------|--------|
| `RecipeProvider` | Information | Recipes loaded summary |
| `RecipeProvider` | Debug | Individual recipe loaded |
| `RecipeProvider` | Warning | Invalid recipe skipped |
| `RecipeProvider` | Warning | Duplicate recipe ID |
| `RecipeProvider` | Warning | Configuration file not found |
| `RecipeProvider` | Error | JSON parse failure |
| `RecipeProvider` | Error | Unexpected load error |

### 12.2 Log Message Templates

```csharp
// Information
_logger.LogInformation("Loading recipes from {Path}", _configPath);
_logger.LogInformation("Loaded {Loaded} recipes, skipped {Skipped}", loadedCount, skippedCount);

// Debug
_logger.LogDebug(
    "Loaded recipe: {RecipeId} ({Category}, Station: {Station}, DC: {DC})",
    recipe.RecipeId, recipe.Category, recipe.RequiredStationId, recipe.DifficultyClass);

// Warning
_logger.LogWarning("Recipe configuration file not found: {Path}", _configPath);
_logger.LogWarning("No recipes found in configuration");
_logger.LogWarning("Recipe missing required fields: {Id}", data.Id);
_logger.LogWarning("Recipe has no ingredients: {Id}", data.Id);
_logger.LogWarning("Recipe has no output: {Id}", data.Id);
_logger.LogWarning("Invalid recipe category '{Category}' for: {Id}", data.Category, data.Id);
_logger.LogWarning("Duplicate recipe ID: {RecipeId}", recipe.RecipeId);
_logger.LogWarning("Recipe {RecipeId} has invalid DC: {DC}", recipe.RecipeId, recipe.DifficultyClass);
_logger.LogWarning(ex, "Failed to load recipe: {RecipeId}", recipeData.Id);

// Error
_logger.LogError(ex, "Failed to parse recipe configuration: {Path}", _configPath);
_logger.LogError(ex, "Unexpected error loading recipes from: {Path}", _configPath);
```

---

## 13. Unit Testing Requirements

### 13.1 Test Count by Feature

| Feature | Test Count |
|---------|------------|
| RecipeIngredient | 2 |
| RecipeOutput | 2 |
| RecipeDefinition | 3 |
| RecipeProvider | 2 |
| **Total** | **~9** |

### 13.2 Test Specifications

**File:** `tests/RuneAndRust.Domain.Tests/ValueObjects/RecipeIngredientTests.cs`

```csharp
namespace RuneAndRust.Domain.Tests.ValueObjects;

public class RecipeIngredientTests
{
    [Fact]
    public void Create_WithValidInput_SetsPropertiesAndNormalizesId()
    {
        // Arrange & Act
        var ingredient = new RecipeIngredient("Iron-Ore", 5);

        // Assert
        Assert.Equal("iron-ore", ingredient.ResourceId);
        Assert.Equal(5, ingredient.Quantity);
    }

    [Theory]
    [InlineData(null)]
    [InlineData("")]
    [InlineData("   ")]
    public void Create_WithInvalidResourceId_ThrowsArgumentException(string? resourceId)
    {
        // Arrange & Act & Assert
        Assert.Throws<ArgumentException>(() => new RecipeIngredient(resourceId!, 1));
    }

    [Theory]
    [InlineData(0)]
    [InlineData(-1)]
    public void Create_WithInvalidQuantity_ThrowsArgumentOutOfRangeException(int quantity)
    {
        // Arrange & Act & Assert
        Assert.Throws<ArgumentOutOfRangeException>(() => new RecipeIngredient("iron-ore", quantity));
    }
}
```

**File:** `tests/RuneAndRust.Domain.Tests/ValueObjects/RecipeOutputTests.cs`

```csharp
namespace RuneAndRust.Domain.Tests.ValueObjects;

public class RecipeOutputTests
{
    [Fact]
    public void Create_WithoutQualityFormula_HasQualityScalingIsFalse()
    {
        // Arrange & Act
        var output = new RecipeOutput("iron-sword", 1);

        // Assert
        Assert.Equal("iron-sword", output.ItemId);
        Assert.Equal(1, output.Quantity);
        Assert.Null(output.QualityFormula);
        Assert.False(output.HasQualityScaling);
    }

    [Fact]
    public void Create_WithQualityFormula_HasQualityScalingIsTrue()
    {
        // Arrange
        var formula = "roll >= 20 ? 'Legendary' : 'Rare'";

        // Act
        var output = new RecipeOutput("mithril-blade", 1, formula);

        // Assert
        Assert.Equal(formula, output.QualityFormula);
        Assert.True(output.HasQualityScaling);
    }
}
```

**File:** `tests/RuneAndRust.Domain.Tests/Definitions/RecipeDefinitionTests.cs`

```csharp
namespace RuneAndRust.Domain.Tests.Definitions;

public class RecipeDefinitionTests
{
    [Fact]
    public void Create_WithValidInput_CreatesRecipeWithAllProperties()
    {
        // Arrange
        var ingredients = new List<RecipeIngredient>
        {
            new("iron-ore", 5),
            new("leather", 2)
        };
        var output = new RecipeOutput("iron-sword", 1);

        // Act
        var recipe = RecipeDefinition.Create(
            recipeId: "iron-sword",
            name: "Iron Sword",
            description: "A basic iron sword",
            category: RecipeCategory.Weapon,
            requiredStationId: "anvil",
            ingredients: ingredients,
            output: output,
            difficultyClass: 12,
            isDefault: true,
            craftingTimeSeconds: 30);

        // Assert
        Assert.Equal("iron-sword", recipe.RecipeId);
        Assert.Equal("Iron Sword", recipe.Name);
        Assert.Equal(RecipeCategory.Weapon, recipe.Category);
        Assert.Equal("anvil", recipe.RequiredStationId);
        Assert.Equal(2, recipe.Ingredients.Count);
        Assert.Equal(12, recipe.DifficultyClass);
        Assert.True(recipe.IsDefault);
        Assert.Equal(30, recipe.CraftingTimeSeconds);
    }

    [Fact]
    public void Create_WithEmptyIngredients_ThrowsArgumentException()
    {
        // Arrange
        var output = new RecipeOutput("iron-sword", 1);

        // Act & Assert
        Assert.Throws<ArgumentException>(() => RecipeDefinition.Create(
            recipeId: "iron-sword",
            name: "Iron Sword",
            description: "Test",
            category: RecipeCategory.Weapon,
            requiredStationId: "anvil",
            ingredients: Array.Empty<RecipeIngredient>(),
            output: output,
            difficultyClass: 12));
    }

    [Fact]
    public void GetTotalIngredientCount_ReturnsSum()
    {
        // Arrange
        var ingredients = new List<RecipeIngredient>
        {
            new("iron-ore", 5),
            new("leather", 2),
            new("coal", 3)
        };
        var output = new RecipeOutput("steel-sword", 1);
        var recipe = RecipeDefinition.Create(
            "steel-sword", "Steel Sword", "Test", RecipeCategory.Weapon,
            "anvil", ingredients, output, 14);

        // Act
        var total = recipe.GetTotalIngredientCount();

        // Assert
        Assert.Equal(10, total);
    }

    [Fact]
    public void RequiresResource_WithMatchingResource_ReturnsTrue()
    {
        // Arrange
        var ingredients = new List<RecipeIngredient> { new("iron-ore", 5) };
        var output = new RecipeOutput("iron-sword", 1);
        var recipe = RecipeDefinition.Create(
            "iron-sword", "Iron Sword", "Test", RecipeCategory.Weapon,
            "anvil", ingredients, output, 12);

        // Act & Assert
        Assert.True(recipe.RequiresResource("iron-ore"));
        Assert.True(recipe.RequiresResource("IRON-ORE")); // Case insensitive
        Assert.False(recipe.RequiresResource("leather"));
    }

    [Theory]
    [InlineData(5, "Trivial")]
    [InlineData(10, "Easy")]
    [InlineData(12, "Moderate")]
    [InlineData(14, "Challenging")]
    [InlineData(16, "Hard")]
    [InlineData(18, "Very Hard")]
    [InlineData(20, "Legendary")]
    public void GetDifficultyDescription_ReturnsCorrectDescription(int dc, string expected)
    {
        // Arrange
        var ingredients = new List<RecipeIngredient> { new("iron-ore", 1) };
        var output = new RecipeOutput("item", 1);
        var recipe = RecipeDefinition.Create(
            "test", "Test", "Test", RecipeCategory.Weapon,
            "anvil", ingredients, output, dc);

        // Act
        var description = recipe.GetDifficultyDescription();

        // Assert
        Assert.Equal(expected, description);
    }
}
```

**File:** `tests/RuneAndRust.Infrastructure.Tests/Providers/RecipeProviderTests.cs`

```csharp
namespace RuneAndRust.Infrastructure.Tests.Providers;

public class RecipeProviderTests
{
    [Fact]
    public void GetRecipe_WithValidId_ReturnsRecipe()
    {
        // Arrange
        var provider = CreateProviderWithTestData();

        // Act
        var recipe = provider.GetRecipe("iron-sword");

        // Assert
        Assert.NotNull(recipe);
        Assert.Equal("iron-sword", recipe.RecipeId);
        Assert.Equal("Iron Sword", recipe.Name);
    }

    [Fact]
    public void GetRecipesByCategory_ReturnsFilteredList()
    {
        // Arrange
        var provider = CreateProviderWithTestData();

        // Act
        var weapons = provider.GetRecipesByCategory(RecipeCategory.Weapon);
        var potions = provider.GetRecipesByCategory(RecipeCategory.Potion);

        // Assert
        Assert.All(weapons, r => Assert.Equal(RecipeCategory.Weapon, r.Category));
        Assert.All(potions, r => Assert.Equal(RecipeCategory.Potion, r.Category));
    }

    [Fact]
    public void GetRecipesForStation_ReturnsFilteredList()
    {
        // Arrange
        var provider = CreateProviderWithTestData();

        // Act
        var anvilRecipes = provider.GetRecipesForStation("anvil");

        // Assert
        Assert.All(anvilRecipes, r => Assert.Equal("anvil", r.RequiredStationId));
    }

    [Fact]
    public void GetDefaultRecipes_ReturnsOnlyDefaults()
    {
        // Arrange
        var provider = CreateProviderWithTestData();

        // Act
        var defaults = provider.GetDefaultRecipes();

        // Assert
        Assert.All(defaults, r => Assert.True(r.IsDefault));
    }

    private RecipeProvider CreateProviderWithTestData()
    {
        // Creates provider with test JSON file
        var logger = new Mock<ILogger<RecipeProvider>>();
        var testConfigPath = Path.Combine(TestContext.TestDataPath, "test-recipes.json");
        return new RecipeProvider(testConfigPath, logger.Object);
    }
}
```

---

## 14. Use Cases

### UC-001: Load Recipes at Startup

**Actor:** System
**Flow:** Application starts → RecipeProvider instantiated → First recipe access triggers load → JSON parsed → Recipes indexed → Ready for queries

```
Application Start
      │
      ▼
┌──────────────────┐
│ Create Provider  │
└────────┬─────────┘
         │
         ▼
┌──────────────────┐
│ First GetRecipe  │
│ call triggers    │
│ EnsureLoaded()   │
└────────┬─────────┘
         │
         ▼
┌──────────────────┐
│ Load recipes.json│
│ Parse JSON       │
│ Validate entries │
│ Build indexes    │
└────────┬─────────┘
         │
         ▼
┌──────────────────┐
│ Provider ready   │
│ for queries      │
└──────────────────┘
```

### UC-002: Retrieve Recipe by ID

**Actor:** Game System (crafting service)
**Flow:** Service requests recipe by ID → Provider normalizes ID → Lookup in dictionary → Return recipe or null

```
┌──────────────────┐
│ GetRecipe("Iron- │
│    Sword")       │
└────────┬─────────┘
         │
         ▼
┌──────────────────┐
│ Normalize to     │
│ "iron-sword"     │
└────────┬─────────┘
         │
         ▼
┌──────────────────┐
│ _recipes.TryGet  │
│ Value("iron-     │
│ sword", out r)   │
└────────┬─────────┘
         │
         ▼
┌──────────────────┐
│ Return Recipe    │
│ Definition       │
└──────────────────┘
```

### UC-003: Filter Recipes by Station

**Actor:** Crafting UI
**Flow:** Player interacts with crafting station → UI requests recipes for station → Provider returns filtered list → UI displays available recipes

```
Player at Anvil
      │
      ▼
┌──────────────────┐
│ GetRecipesFor    │
│ Station("anvil") │
└────────┬─────────┘
         │
         ▼
┌──────────────────┐
│ _byStation.TryGet│
│ Value("anvil",   │
│   out recipes)   │
└────────┬─────────┘
         │
         ▼
┌──────────────────┐
│ Return filtered  │
│ recipe list      │
│ (6 recipes)      │
└──────────────────┘
```

### UC-004: Get Default Recipes for New Player

**Actor:** Player Creation Service
**Flow:** New player created → Service requests default recipes → Provider returns IsDefault=true recipes → Service adds to player's recipe book

```
New Player Created
      │
      ▼
┌──────────────────┐
│ GetDefaultRecipes│
└────────┬─────────┘
         │
         ▼
┌──────────────────┐
│ Return           │
│ _defaultRecipes  │
│ (9 recipes)      │
└────────┬─────────┘
         │
         ▼
┌──────────────────┐
│ Add recipe IDs   │
│ to player's      │
│ RecipeBook       │
└──────────────────┘
```

### UC-005: Check Recipe Ingredient Requirements

**Actor:** Crafting Service
**Flow:** Player attempts craft → Get recipe → Check each ingredient against inventory → Return validation result

```
Craft Request
      │
      ▼
┌──────────────────┐
│ GetRecipe(id)    │
└────────┬─────────┘
         │
         ▼
┌──────────────────┐
│ For each         │
│ Ingredient:      │
│ - GetIngredient()│
│ - Check inventory│
└────────┬─────────┘
         │
    ┌────┴────┐
    │         │
    ▼         ▼
┌───────┐  ┌───────┐
│ Has   │  │Missing│
│ All   │  │Some   │
└───┬───┘  └───┬───┘
    │          │
    ▼          ▼
Success    Fail with
           missing list
```

---

## 15. Deliverable Checklist

### Domain Layer
- [ ] `RecipeCategory` enum created in `Domain/Enums/`
- [ ] `RecipeIngredient` value object created in `Domain/ValueObjects/`
- [ ] `RecipeOutput` value object created in `Domain/ValueObjects/`
- [ ] `RecipeDefinition` entity created in `Domain/Definitions/`

### Application Layer
- [ ] `IRecipeProvider` interface created in `Application/Interfaces/`

### Infrastructure Layer
- [ ] `RecipeProvider` implementation created in `Infrastructure/Providers/`

### Configuration
- [ ] `config/recipes.json` created with 15 recipes
- [ ] `config/schemas/recipes.schema.json` created

### Testing
- [ ] `RecipeIngredientTests` with 2 tests
- [ ] `RecipeOutputTests` with 2 tests
- [ ] `RecipeDefinitionTests` with 3 tests
- [ ] `RecipeProviderTests` with 2 tests
- [ ] All ~9 unit tests passing

### Documentation
- [ ] XML documentation on all public members
- [ ] Code follows .editorconfig conventions

---

## 16. Acceptance Criteria

### Functional Criteria
- [ ] RecipeDefinition loads from JSON configuration
- [ ] Ingredients list contains ResourceId and Quantity
- [ ] Output specifies ItemId, Quantity, and optional QualityFormula
- [ ] RecipeCategory enum has 7 values
- [ ] RequiredStationId links recipes to crafting stations
- [ ] DifficultyClass specifies crafting DC (1-30)
- [ ] IsDefault marks starter recipes
- [ ] GetRecipe returns recipe by ID (case-insensitive)
- [ ] GetRecipesByCategory filters correctly
- [ ] GetRecipesForStation filters correctly
- [ ] GetDefaultRecipes returns only default recipes
- [ ] GetRecipesForItem returns recipes producing an item
- [ ] Exists returns correct boolean

### Quality Criteria
- [ ] Build succeeds with 0 errors and 0 warnings
- [ ] All ~9 unit tests pass
- [ ] Configuration files validate against schemas
- [ ] XML documentation complete on all public members
- [ ] Code follows existing patterns (ResourceProvider, StatusEffectProvider)
- [ ] Recipe IDs normalized to lowercase
- [ ] Invalid recipes logged and skipped gracefully

---

## 17. Dependencies

### Required From Prior Versions
| Version | Dependency | Usage |
|---------|------------|-------|
| v0.11.0a | ResourceDefinition | Ingredient references |
| v0.11.0a | IResourceProvider | Resource lookups |
| v0.0.x | ItemDefinition | Output references |
| v0.0.x | IEntity interface | Entity base |

### Provides To Future Versions
| Version | Feature | Usage |
|---------|---------|-------|
| v0.11.1b | RecipeDefinition | Recipe book filtering |
| v0.11.1b | IRecipeProvider | Recipe queries |
| v0.11.1c | RecipeDefinition | Scroll recipe linking |
| v0.11.2 | RecipeDefinition | Crafting execution |

---

## 18. Future Considerations

### Deferred to v0.11.1b (Recipe Book)
- **RecipeBook Entity**: Player's known recipes tracking
- **IRecipeService**: Recipe management service
- **RecipesCommand**: List known recipes command

### Deferred to v0.11.1c (Recipe Discovery)
- **RecipeScrollItem**: Scroll that teaches recipes
- **Recipe scroll loot generation**
- **RecipeDiscoveredEvent**: Discovery events

### Deferred to v0.11.2 (Crafting System)
- **ICraftingService**: Crafting execution
- **Crafting skill checks**: d20 + modifier vs DC
- **Quality determination**: Roll-based quality scaling
- **Ingredient consumption**: Remove resources from inventory
- **Item creation**: Add crafted items to inventory

### Out of Scope (Future Versions)
- **Recipe upgrades**: Improving recipes through use
- **Recipe variants**: Alternative ingredient paths
- **Seasonal recipes**: Time-limited crafting options
- **Collaborative crafting**: Multi-player crafting

---

*Document Version: 1.0*
*Last Updated: 2026-01-16*
*Author: Claude (AI Assistant)*
