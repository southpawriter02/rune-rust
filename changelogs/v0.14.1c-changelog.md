# v0.14.1c Changelog: Damage Type Schema

**Date:** 2026-01-21
**Version:** 0.14.1c
**Scope:** Damage Type Schema

---

## Summary

Introduced `damage-types.schema.json` to validate damage type configuration including categories, relationships, resistance templates, and immunity/absorption mechanics. The schema supports full customization of the damage system for different elemental systems and creature-specific resistances.

---

## Added

### Schema Files
- **`config/schemas/damage-types.schema.json`** - JSON Schema Draft-07 for damage types
  - Root properties: `$schema`, `version`, `damageCategories`, `damageTypes`, `resistanceTemplates`
  - `DamageCategory` definition (id, name, description, sortOrder)
  - `DamageType` definition (12 properties including color, relationships, bypassesArmor, canCrit)
  - `DamageRelationship` definition (targetTypeId, relationship enum, modifier)
  - `ResistanceTemplate` definition (creatureTypes, resistances)
  - `ResistanceEntry` definition (damageTypeId, value, isImmunity, isAbsorption)

### Enum Validations
| Enum | Values |
|------|--------|
| relationship | Strong, Weak, Neutral, Nullifies |

### Range Validations
| Property | Range |
|----------|-------|
| value (resistance) | -100 to 100 |
| modifier | 0.0 to 3.0 |

### Unit Tests
- **`DamageTypesSchemaTests.cs`** - 8 new tests
  1. `Schema_IsValidJsonSchemaDraft07`
  2. `ExistingDamageTypesJson_ValidatesAgainstSchema`
  3. `Relationship_InvalidEnumValue_FailsValidation`
  4. `ResistanceValue_OutOfRange_FailsValidation`
  5. `IsImmunity_ValidBoolean_PassesValidation`
  6. `IsAbsorption_ValidBoolean_PassesValidation`
  7. `Id_InvalidPattern_FailsValidation`
  8. `Color_MissingOrEmpty_FailsValidation`

---

## Changed

### Configuration Updates
- **`config/damage-types.json`** - Major expansion:
  - Added `$schema` reference to `./schemas/damage-types.schema.json`
  - Added 4 damage categories: physical, elemental, magical, special
  - Added `categoryId` to all 7 existing damage types
  - Added elemental relationships: fire→ice (Strong), ice→fire (Weak), holy↔dark (Strong)
  - Added 4 resistance templates:
    - `undead-resistances`: Poison/psychic immune, resistant to dark/ice, vulnerable to holy/fire
    - `construct-resistances`: Poison immune, resistant to physical, vulnerable to lightning
    - `fire-elemental-resistances`: Fire immune+absorbs, vulnerable to ice
    - `ice-elemental-resistances`: Ice immune+absorbs, vulnerable to fire

---

## Verification

| Check | Status |
|-------|--------|
| Build (0 errors) | ✅ |
| Build (0 warnings) | ✅ |
| New unit tests (8/8) | ✅ |
| Damage types validate | ✅ (7 types) |
| Categories validate | ✅ (4 categories) |
| Templates validate | ✅ (4 templates) |

---

## Dependencies

**Requires:** v0.14.0 (Character Configuration Schemas)
**Provides:** Damage type validation for v0.14.1d (Combat Schema)
