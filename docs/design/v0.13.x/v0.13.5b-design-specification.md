# v0.13.5b Design Specification: Theme Consolidation

**Version:** 0.13.5b
**Theme:** Theme Consolidation
**Author:** Claude
**Created:** 2026-01-16
**Status:** Draft
**Prerequisites:** v0.13.5a Complete (Naming Convention Alignment)

---

## Table of Contents

1. [Overview](#1-overview)
2. [Dependencies](#2-dependencies)
3. [Architecture Diagrams](#3-architecture-diagrams)
4. [IThemeService Interface](#4-ithemeservice-interface)
5. [Theme Adapters](#5-theme-adapters)
6. [Theme Definitions](#6-theme-definitions)
7. [Color Migration Plan](#7-color-migration-plan)
8. [Data Model Changes](#8-data-model-changes)
9. [Configuration](#9-configuration)
10. [Commands](#10-commands)
11. [User-Facing Changes](#11-user-facing-changes)
12. [Logging Specifications](#12-logging-specifications)
13. [Unit Testing Requirements](#13-unit-testing-requirements)
14. [Use Cases](#14-use-cases)
15. [Deliverable Checklist](#15-deliverable-checklist)
16. [Acceptance Criteria](#16-acceptance-criteria)
17. [Future Considerations](#17-future-considerations)
18. [Implementation Notes](#18-implementation-notes)
19. [Document Metadata](#19-document-metadata)

---

## 1. Overview

### 1.1 Purpose

This document provides a comprehensive design specification for v0.13.5b, the Theme Consolidation implementation. This part focuses on creating a shared theme service (`IThemeService`) that provides consistent color, icon, and animation definitions across TUI and GUI layers, eliminating hardcoded values and duplicated color definitions that accumulated during incremental development from v0.1.x through v0.9.x.

### 1.2 Scope

**In Scope:**
- Create `IThemeService` interface in Presentation.Shared
- Implement `TuiThemeAdapter` for ConsoleColor mapping
- Implement `GuiThemeAdapter` for Avalonia Brush mapping
- Create `ThemeDefinition` with centralized color palette
- Create `ThemeColor` value object for platform-agnostic colors
- Create `ColorPalette` with all game color definitions
- Create `ColorKey` and `IconKey` enums for type-safe access
- Migrate all hardcoded colors to theme service
- Remove duplicate color definitions across components

**Out of Scope:**
- Naming convention changes (v0.13.5a - completed)
- Service integration patterns (v0.13.5c)
- Error handling changes (v0.13.5d)
- Shared layer refactoring (v0.13.5e)
- Accessibility and performance (v0.13.5f)
- Color blind mode implementation (v0.13.5f - uses theme service)

### 1.3 Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Interfaces | 1 | `IThemeService` |
| Services | 2 | `TuiThemeAdapter`, `GuiThemeAdapter` |
| Value Objects | 3 | `ThemeDefinition`, `ThemeColor`, `ColorPalette` |
| Enums | 2 | `ColorKey`, `IconKey` |
| Configuration | 1 | `ThemeConfiguration` |
| Unit Tests | ~8 | Theme service, adapter, color mapping tests |

---

## 2. Dependencies

### 2.1 Required from v0.13.5a (Naming Convention Alignment)

| Component | New Name | Location |
|-----------|----------|----------|
| `HealthBarDisplay` | Renamed from `HealthBar` | `Presentation.Tui/Displays/HealthBarDisplay.cs` |
| `ResourceBarDisplay` | Renamed from `ResourceBar` | `Presentation.Tui/Displays/ResourceBarDisplay.cs` |
| `CombatGridPanel` | Renamed from `CombatGridView` | `Presentation.Tui/Panels/CombatGridPanel.cs` |
| `ColoredTextRenderer` | Renamed from `ColoredText` | `Presentation.Tui/Renderers/ColoredTextRenderer.cs` |
| `BossHealthBarDisplay` | Renamed from `BossHealthBar` | `Presentation.Tui/Displays/BossHealthBarDisplay.cs` |

### 2.2 Existing Components Requiring Migration (from v0.1.x-v0.9.x)

| Component | Location | Current Issue |
|-----------|----------|---------------|
| `HealthBarDisplay` | `Presentation.Tui/Displays/HealthBarDisplay.cs` | Uses `HealthBarConfig` for color thresholds |
| `ResourceBarDisplay` | `Presentation.Tui/Displays/ResourceBarDisplay.cs` | Static `Dictionary<string, ConsoleColor>` |
| `CombatGridPanel` | `Presentation.Tui/Panels/CombatGridPanel.cs` | Method-based switch expression colors |
| `SpectreGameRenderer` | `Presentation.Tui/Renderers/SpectreGameRenderer.cs` | Inline string colors ("yellow", "red") |
| `ColoredTextRenderer` | `Presentation.Tui/Renderers/ColoredTextRenderer.cs` | Factory-based color creation |
| `HealthBarControl` | `Presentation.Gui/Controls/HealthBarControl.cs` | Hardcoded `Brushes.*` values |
| `GridCellControl` | `Presentation.Gui/Controls/GridCellControl.cs` | Hardcoded terrain colors |
| `EntityTokenControl` | `Presentation.Gui/Controls/EntityTokenControl.cs` | Inconsistent green values |
| `DamagePopupControl` | `Presentation.Gui/Controls/DamagePopupControl.cs` | Hardcoded popup colors |
| `MessageTypeToColorConverter` | `Presentation.Gui/Converters/MessageTypeToColorConverter.cs` | Hardcoded brush mapping |

### 2.3 Existing Configuration to Consolidate

| Configuration | Location | Issue |
|---------------|----------|-------|
| `HealthBarConfig` | `Presentation.Tui/Configuration/HealthBarConfig.cs` | Threshold colors duplicated |
| `Colors.axaml` | `Presentation.Gui/Themes/Colors.axaml` | Centralized but underutilized |

### 2.4 Provides to v0.13.5c (Service Integration Patterns)

| Type | Usage |
|------|-------|
| `IThemeService` | Required dependency for base classes |
| `ThemeColor` | Color representation for all components |
| `ColorKey` | Type-safe color access |

---

## 3. Architecture Diagrams

### 3.1 Theme Service Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      THEME SERVICE ARCHITECTURE                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚                         Presentation.Shared                                  â”‚
â”‚                         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    IThemeService (Interface)                         â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ + GetColor(ColorKey key) : ThemeColor                                â”‚    â”‚
â”‚  â”‚ + GetHealthColor(double percentage) : ThemeColor                     â”‚    â”‚
â”‚  â”‚ + GetResourceColor(ResourceType type) : ThemeColor                   â”‚    â”‚
â”‚  â”‚ + GetStatusEffectColor(StatusEffectCategory category) : ThemeColor   â”‚    â”‚
â”‚  â”‚ + GetIcon(IconKey key) : string                                      â”‚    â”‚
â”‚  â”‚ + GetStatusIcon(StatusEffectCategory category) : string              â”‚    â”‚
â”‚  â”‚ + GetAnimationDuration(AnimationKey key) : TimeSpan                  â”‚    â”‚
â”‚  â”‚ + IsColorBlindModeEnabled : bool { get; }                            â”‚    â”‚
â”‚  â”‚ + ColorBlindMode : ColorBlindMode { get; set; }                      â”‚    â”‚
â”‚  â”‚ + ThemeDefinition : ThemeDefinition { get; }                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â–²                                         â”‚
â”‚                                    â”‚ implements                              â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                    â”‚                               â”‚                        â”‚
â”‚                    â–¼                               â–¼                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Presentation.Tui           â”‚   â”‚  Presentation.Gui           â”‚         â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚         â”‚
â”‚  â”‚                             â”‚   â”‚                             â”‚         â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”‚
â”‚  â”‚  â”‚   TuiThemeAdapter     â”‚  â”‚   â”‚  â”‚   GuiThemeAdapter     â”‚  â”‚         â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚   â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚         â”‚
â”‚  â”‚  â”‚ + ToConsoleColor()    â”‚  â”‚   â”‚  â”‚ + ToBrush()           â”‚  â”‚         â”‚
â”‚  â”‚  â”‚ + GetTuiIcon()        â”‚  â”‚   â”‚  â”‚ + GetGuiIcon()        â”‚  â”‚         â”‚
â”‚  â”‚  â”‚ + ToSpectreColor()    â”‚  â”‚   â”‚  â”‚ + ToAvaloniaColor()   â”‚  â”‚         â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚         â”‚
â”‚  â”‚             â”‚               â”‚   â”‚             â”‚               â”‚         â”‚
â”‚  â”‚             â–¼               â”‚   â”‚             â–¼               â”‚         â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”‚
â”‚  â”‚  â”‚ HealthBarDisplay      â”‚  â”‚   â”‚  â”‚ HealthBarControl      â”‚  â”‚         â”‚
â”‚  â”‚  â”‚ ResourceBarDisplay    â”‚  â”‚   â”‚  â”‚ GridCellControl       â”‚  â”‚         â”‚
â”‚  â”‚  â”‚ CombatGridPanel       â”‚  â”‚   â”‚  â”‚ EntityTokenControl    â”‚  â”‚         â”‚
â”‚  â”‚  â”‚ SpectreGameRenderer   â”‚  â”‚   â”‚  â”‚ DamagePopupControl    â”‚  â”‚         â”‚
â”‚  â”‚  â”‚ ColoredTextRenderer   â”‚  â”‚   â”‚  â”‚ MessageTypeConverter  â”‚  â”‚         â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Color Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         COLOR FLOW DIAGRAM                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Component Request                    Theme Service                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚  â”‚HealthBarDisplay â”‚                                                        â”‚
â”‚  â”‚ needs health    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ color at 45%    â”‚                                       â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚                â”‚
â”‚                                                            â–¼                â”‚
â”‚                                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                             â”‚      IThemeService          â”‚ â”‚
â”‚                                             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚                                             â”‚ GetHealthColor(0.45)        â”‚ â”‚
â”‚                                             â”‚                             â”‚ â”‚
â”‚                                             â”‚ Threshold Logic:            â”‚ â”‚
â”‚                                             â”‚ |-- 76-100%: HealthFull     â”‚ â”‚
â”‚                                             â”‚ |-- 51-75%:  HealthGood     â”‚ â”‚
â”‚                                             â”‚ |-- 26-50%:  HealthLow  â—„â”€â”€â”€â”‚ â”‚
â”‚                                             â”‚ +-- 0-25%:   HealthCritical â”‚ â”‚
â”‚                                             â”‚                             â”‚ â”‚
â”‚                                             â”‚ Returns: ThemeColor         â”‚ â”‚
â”‚                                             â”‚          (255, 215, 0)      â”‚ â”‚
â”‚                                             â”‚          #FFD700 (Gold)     â”‚ â”‚
â”‚                                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                            â”‚                â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                              â”‚                                           â”‚  â”‚
â”‚                              â–¼                                           â–¼  â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               â”‚      TuiThemeAdapter        â”‚         â”‚   GuiThemeAdapter   â”‚
â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚               â”‚ ToConsoleColor(ThemeColor)  â”‚         â”‚ ToBrush(ThemeColor) â”‚
â”‚               â”‚                             â”‚         â”‚                     â”‚
â”‚               â”‚ Maps RGB to nearest         â”‚         â”‚ Creates SolidColor  â”‚
â”‚               â”‚ ConsoleColor:               â”‚         â”‚ Brush from RGB:     â”‚
â”‚               â”‚                             â”‚         â”‚                     â”‚
â”‚               â”‚ #FFD700 â†’ ConsoleColor.     â”‚         â”‚ #FFD700 â†’ new Solid â”‚
â”‚               â”‚           DarkYellow        â”‚         â”‚ ColorBrush(Color.   â”‚
â”‚               â”‚                             â”‚         â”‚ FromRgb(255,215,0)) â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                              â”‚                                           â”‚  â”‚
â”‚                              â–¼                                           â–¼  â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               â”‚ Console Output:             â”‚         â”‚ Avalonia Output:    â”‚
â”‚               â”‚ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 45%  â”‚         â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘ 45%   â”‚
â”‚               â”‚ (DarkYellow foreground)     â”‚         â”‚ (Gold brush fill)   â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 Theme Definition Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      THEME DEFINITION STRUCTURE                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    ThemeDefinition                                   â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚  ColorPalette                                                  â”‚  â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚    â”‚
â”‚  â”‚  â”‚                                                                â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Core Colors:                                                  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Primary:    #4A90D9 (Blue)                                â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Secondary:  #2ECC71 (Green)                               â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Accent:     #E74C3C (Red)                                 â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Warning:    #F39C12 (Orange)                              â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Background: #1A1A2E                                       â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Surface:    #16213E                                       â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Text:       #EAEAEA                                       â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  +-- Muted:      #7F8C8D                                       â”‚  â”‚    â”‚
â”‚  â”‚  â”‚                                                                â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Health Colors:                                                â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- HealthFull:     #228B22 (ForestGreen)                     â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- HealthGood:     #32CD32 (LimeGreen)                       â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- HealthLow:      #FFD700 (Gold)                            â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  +-- HealthCritical: #DC143C (Crimson)                         â”‚  â”‚    â”‚
â”‚  â”‚  â”‚                                                                â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Resource Colors:                                              â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Mana:    #4169E1 (RoyalBlue)                              â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Rage:    #DC143C (Crimson)                                â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Energy:  #FFD700 (Gold)                                   â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Focus:   #00CED1 (DarkTurquoise)                          â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  +-- Stamina: #32CD32 (LimeGreen)                              â”‚  â”‚    â”‚
â”‚  â”‚  â”‚                                                                â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Status Effect Colors:                                         â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Buff:      #32CD32 (LimeGreen)                            â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Debuff:    #DC143C (Crimson)                              â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Fire:      #FF4500 (OrangeRed)                            â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Ice:       #00BFFF (DeepSkyBlue)                          â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Poison:    #9400D3 (DarkViolet)                           â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  +-- Lightning: #FFD700 (Gold)                                 â”‚  â”‚    â”‚
â”‚  â”‚  â”‚                                                                â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Terrain Colors:                                               â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Floor:    #696969 (DimGray)                               â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Wall:     #2F4F4F (DarkSlateGray)                         â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Water:    #1E90FF (DodgerBlue)                            â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Lava:     #FF4500 (OrangeRed)                             â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  +-- Grass:    #228B22 (ForestGreen)                           â”‚  â”‚    â”‚
â”‚  â”‚  â”‚                                                                â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Entity Colors:                                                â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Player:   #00FF00 (Lime)                                  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- Enemy:    #FF0000 (Red)                                   â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  |-- NPC:      #FFFF00 (Yellow)                                â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  +-- Boss:     #FF00FF (Magenta)                               â”‚  â”‚    â”‚
â”‚  â”‚  â”‚                                                                â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚  IconSet                                                       â”‚  â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚    â”‚
â”‚  â”‚  â”‚  Health:    "â™¥" / "[HP]"     Mana:      "âœ¦" / "[MP]"          â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Attack:    "âš”" / "[ATK]"    Defense:   "ğŸ›¡" / "[DEF]"         â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Buff:      "â†‘" / "[+]"      Debuff:    "â†“" / "[-]"           â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Fire:      "ğŸ”¥" / "[F]"     Ice:       "â„" / "[I]"           â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Poison:    "â˜ " / "[P]"      Lightning: "âš¡" / "[L]"           â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚  AnimationTimings                                              â”‚  â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚    â”‚
â”‚  â”‚  â”‚  Short:    100ms (quick feedback)                              â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Medium:   250ms (standard transitions)                        â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Long:     500ms (emphasis animations)                         â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Extended: 1000ms (dramatic effects)                           â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 Before/After Color Source Comparison

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   COLOR SOURCE COMPARISON: BEFORE / AFTER                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  BEFORE (v0.1.x-v0.9.x - Fragmented)                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  HealthBarConfig.cs         â”‚  â”‚  ResourceBar.cs             â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚  FullHealthColor = Green    â”‚  â”‚  static Dictionary<string,  â”‚           â”‚
â”‚  â”‚  GoodHealthColor = Green    â”‚  â”‚    ConsoleColor> = {        â”‚           â”‚
â”‚  â”‚  LowHealthColor = Yellow    â”‚  â”‚    "Mana" = Blue,           â”‚           â”‚
â”‚  â”‚  CriticalColor = Red        â”‚  â”‚    "Rage" = Red,            â”‚           â”‚
â”‚  â”‚  FullThreshold = 0.75       â”‚  â”‚    "Energy" = Yellow        â”‚           â”‚
â”‚  â”‚  GoodThreshold = 0.50       â”‚  â”‚  };                         â”‚           â”‚
â”‚  â”‚  LowThreshold = 0.25        â”‚  â”‚                             â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  CombatGridView.cs          â”‚  â”‚  SpectreGameRenderer.cs     â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚  GetTerrainColor(type)      â”‚  â”‚  .WriteWithColor(           â”‚           â”‚
â”‚  â”‚  {                          â”‚  â”‚    "Player moved",          â”‚           â”‚
â”‚  â”‚    Floor => Gray,           â”‚  â”‚    "yellow");               â”‚           â”‚
â”‚  â”‚    Wall => DarkGray,        â”‚  â”‚                             â”‚           â”‚
â”‚  â”‚    Water => Blue            â”‚  â”‚  .WriteWithColor(           â”‚           â”‚
â”‚  â”‚  }                          â”‚  â”‚    "Critical hit!",         â”‚           â”‚
â”‚  â”‚                             â”‚  â”‚    "red");                  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  HealthBarControl.xaml.cs   â”‚  â”‚  EntityTokenControl.xaml.cs â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚  Fill = Brushes.ForestGreen â”‚  â”‚  Fill = Brushes.LimeGreen   â”‚           â”‚
â”‚  â”‚  // or Brushes.OrangeRed    â”‚  â”‚  // Different from health!  â”‚           â”‚
â”‚  â”‚  // Hardcoded values        â”‚  â”‚  // Inconsistent greens     â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚  AFTER (v0.13.5b - Unified)                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                         IThemeService                                â”‚    â”‚
â”‚  â”‚                    (Single Source of Truth)                          â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  All components call:                                                â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  _themeService.GetHealthColor(percentage)      // Health bars       â”‚    â”‚
â”‚  â”‚  _themeService.GetResourceColor(ResourceType)  // Resource bars     â”‚    â”‚
â”‚  â”‚  _themeService.GetColor(ColorKey.Floor)        // Terrain           â”‚    â”‚
â”‚  â”‚  _themeService.GetColor(ColorKey.Player)       // Entities          â”‚    â”‚
â”‚  â”‚  _themeService.GetStatusEffectColor(category)  // Status effects    â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  Adapters convert to platform-specific format:                       â”‚    â”‚
â”‚  â”‚  |-- TuiThemeAdapter.ToConsoleColor(color) â†’ ConsoleColor           â”‚    â”‚
â”‚  â”‚  |-- TuiThemeAdapter.ToSpectreColor(color) â†’ Spectre.Console.Color  â”‚    â”‚
â”‚  â”‚  +-- GuiThemeAdapter.ToBrush(color) â†’ ISolidColorBrush              â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. IThemeService Interface

### 4.1 Interface Definition

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File: Presentation.Shared/Services/IThemeService.cs                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  namespace RuneRust.Presentation.Shared.Services;                           â”‚
â”‚                                                                              â”‚
â”‚  /// <summary>                                                               â”‚
â”‚  /// Provides centralized theme definitions including colors, icons,        â”‚
â”‚  /// and animation timings for consistent styling across TUI and GUI.       â”‚
â”‚  /// </summary>                                                              â”‚
â”‚  public interface IThemeService                                             â”‚
â”‚  {                                                                           â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚      // Color Access                                                         â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Gets a color by its key from the theme palette.                    â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      /// <param name="key">The color key to retrieve.</param>               â”‚
â”‚      /// <returns>The theme color for the specified key.</returns>          â”‚
â”‚      ThemeColor GetColor(ColorKey key);                                     â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Gets the appropriate health color based on health percentage.      â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      /// <param name="percentage">Health percentage (0.0 to 1.0).</param>   â”‚
â”‚      /// <returns>The appropriate health color for the percentage.</returns>â”‚
â”‚      ThemeColor GetHealthColor(double percentage);                          â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Gets the color for a specific resource type.                       â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      /// <param name="resourceType">The resource type.</param>              â”‚
â”‚      /// <returns>The theme color for the resource type.</returns>          â”‚
â”‚      ThemeColor GetResourceColor(ResourceType resourceType);                â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Gets the color for a status effect category.                       â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      /// <param name="category">The status effect category.</param>         â”‚
â”‚      /// <returns>The theme color for the status effect.</returns>          â”‚
â”‚      ThemeColor GetStatusEffectColor(StatusEffectCategory category);        â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Gets the color for a terrain type.                                 â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      /// <param name="terrainType">The terrain type.</param>                â”‚
â”‚      /// <returns>The theme color for the terrain.</returns>                â”‚
â”‚      ThemeColor GetTerrainColor(TerrainType terrainType);                   â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Gets the color for an entity type.                                 â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      /// <param name="entityType">The entity type.</param>                  â”‚
â”‚      /// <returns>The theme color for the entity.</returns>                 â”‚
â”‚      ThemeColor GetEntityColor(EntityType entityType);                      â”‚
â”‚                                                                              â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚      // Icon Access                                                          â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Gets an icon string by its key.                                    â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      /// <param name="key">The icon key to retrieve.</param>                â”‚
â”‚      /// <returns>The icon string (Unicode or ASCII fallback).</returns>    â”‚
â”‚      string GetIcon(IconKey key);                                           â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Gets the icon for a status effect category.                        â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      /// <param name="category">The status effect category.</param>         â”‚
â”‚      /// <returns>The icon string for the status effect.</returns>          â”‚
â”‚      string GetStatusIcon(StatusEffectCategory category);                   â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Gets the icon for a resource type.                                 â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      /// <param name="resourceType">The resource type.</param>              â”‚
â”‚      /// <returns>The icon string for the resource.</returns>               â”‚
â”‚      string GetResourceIcon(ResourceType resourceType);                     â”‚
â”‚                                                                              â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚      // Animation Timing                                                     â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Gets the animation duration for a specific animation type.         â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      /// <param name="key">The animation key.</param>                       â”‚
â”‚      /// <returns>The duration for the animation.</returns>                 â”‚
â”‚      TimeSpan GetAnimationDuration(AnimationKey key);                       â”‚
â”‚                                                                              â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚      // Theme Configuration                                                  â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Gets the complete theme definition.                                â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      ThemeDefinition ThemeDefinition { get; }                               â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Gets whether color blind mode is enabled.                          â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      bool IsColorBlindModeEnabled { get; }                                  â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Gets or sets the current color blind mode.                         â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      ColorBlindMode ColorBlindMode { get; set; }                            â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Gets whether to use ASCII fallback icons instead of Unicode.       â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      bool UseAsciiIcons { get; set; }                                       â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Health Color Threshold Logic

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      HEALTH COLOR THRESHOLD LOGIC                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Percentage Range    Color Key         Hex Color      Visual                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”€â”€â”€â”€â”€â”€                â”‚
â”‚                                                                              â”‚
â”‚  100% - 76%          HealthFull        #228B22        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ FULL     â”‚
â”‚                                         ForestGreen                          â”‚
â”‚                                                                              â”‚
â”‚  75% - 51%           HealthGood        #32CD32        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ GOOD     â”‚
â”‚                                         LimeGreen                            â”‚
â”‚                                                                              â”‚
â”‚  50% - 26%           HealthLow         #FFD700        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ LOW      â”‚
â”‚                                         Gold                                 â”‚
â”‚                                                                              â”‚
â”‚  25% - 0%            HealthCritical    #DC143C        â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ CRIT     â”‚
â”‚                                         Crimson                              â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚  Implementation:                                                             â”‚
â”‚                                                                              â”‚
â”‚  public ThemeColor GetHealthColor(double percentage)                        â”‚
â”‚  {                                                                           â”‚
â”‚      return percentage switch                                                â”‚
â”‚      {                                                                       â”‚
â”‚          >= 0.76 => GetColor(ColorKey.HealthFull),                          â”‚
â”‚          >= 0.51 => GetColor(ColorKey.HealthGood),                          â”‚
â”‚          >= 0.26 => GetColor(ColorKey.HealthLow),                           â”‚
â”‚          _ => GetColor(ColorKey.HealthCritical)                             â”‚
â”‚      };                                                                      â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Theme Adapters

### 5.1 TuiThemeAdapter

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File: Presentation.Tui/Services/TuiThemeAdapter.cs                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  namespace RuneRust.Presentation.Tui.Services;                              â”‚
â”‚                                                                              â”‚
â”‚  /// <summary>                                                               â”‚
â”‚  /// TUI-specific implementation of IThemeService that provides             â”‚
â”‚  /// ConsoleColor and Spectre.Console color conversions.                    â”‚
â”‚  /// </summary>                                                              â”‚
â”‚  public class TuiThemeAdapter : IThemeService                               â”‚
â”‚  {                                                                           â”‚
â”‚      private readonly ThemeDefinition _theme;                               â”‚
â”‚      private readonly ILogger<TuiThemeAdapter> _logger;                     â”‚
â”‚                                                                              â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚      // Constructor                                                          â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚      public TuiThemeAdapter(                                                â”‚
â”‚          ThemeDefinition theme,                                             â”‚
â”‚          ILogger<TuiThemeAdapter> logger)                                   â”‚
â”‚      {                                                                       â”‚
â”‚          _theme = theme ?? throw new ArgumentNullException(nameof(theme));  â”‚
â”‚          _logger = logger ?? throw new ArgumentNullException(nameof(logger));â”‚
â”‚      }                                                                       â”‚
â”‚                                                                              â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚      // IThemeService Implementation                                         â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚      public ThemeDefinition ThemeDefinition => _theme;                      â”‚
â”‚      public bool IsColorBlindModeEnabled => ColorBlindMode != None;         â”‚
â”‚      public ColorBlindMode ColorBlindMode { get; set; } = None;             â”‚
â”‚      public bool UseAsciiIcons { get; set; } = false;                       â”‚
â”‚                                                                              â”‚
â”‚      // Color methods delegate to _theme.Palette with color blind adjust    â”‚
â”‚      public ThemeColor GetColor(ColorKey key) =>                            â”‚
â”‚          ApplyColorBlindAdjustment(_theme.Palette.GetColor(key));           â”‚
â”‚                                                                              â”‚
â”‚      // Health, resource, status effect methods use threshold logic         â”‚
â”‚      // ...                                                                  â”‚
â”‚                                                                              â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚      // TUI-Specific Conversions                                             â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Converts a ThemeColor to the nearest ConsoleColor.                 â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public ConsoleColor ToConsoleColor(ThemeColor color)                   â”‚
â”‚      {                                                                       â”‚
â”‚          // Map RGB to nearest of 16 ConsoleColors                          â”‚
â”‚          return FindNearestConsoleColor(color.R, color.G, color.B);         â”‚
â”‚      }                                                                       â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Converts a ThemeColor to a Spectre.Console Color.                  â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public Spectre.Console.Color ToSpectreColor(ThemeColor color)          â”‚
â”‚      {                                                                       â”‚
â”‚          return new Spectre.Console.Color(color.R, color.G, color.B);       â”‚
â”‚      }                                                                       â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Gets an icon appropriate for TUI display.                          â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public string GetTuiIcon(IconKey key)                                  â”‚
â”‚      {                                                                       â”‚
â”‚          return UseAsciiIcons                                               â”‚
â”‚              ? _theme.Icons.GetAsciiIcon(key)                               â”‚
â”‚              : _theme.Icons.GetUnicodeIcon(key);                            â”‚
â”‚      }                                                                       â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ConsoleColor Mapping Table

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CONSOLECOLOR MAPPING TABLE                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  ThemeColor (Hex)      RGB Values         Nearest ConsoleColor              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚                                                                              â”‚
â”‚  Health Colors:                                                              â”‚
â”‚  #228B22 (ForestGreen) (34, 139, 34)      DarkGreen                         â”‚
â”‚  #32CD32 (LimeGreen)   (50, 205, 50)      Green                             â”‚
â”‚  #FFD700 (Gold)        (255, 215, 0)      Yellow / DarkYellow               â”‚
â”‚  #DC143C (Crimson)     (220, 20, 60)      DarkRed                           â”‚
â”‚                                                                              â”‚
â”‚  Resource Colors:                                                            â”‚
â”‚  #4169E1 (RoyalBlue)   (65, 105, 225)     Blue                              â”‚
â”‚  #DC143C (Crimson)     (220, 20, 60)      DarkRed                           â”‚
â”‚  #FFD700 (Gold)        (255, 215, 0)      Yellow                            â”‚
â”‚  #00CED1 (DarkTurquoise)(0, 206, 209)     Cyan                              â”‚
â”‚  #32CD32 (LimeGreen)   (50, 205, 50)      Green                             â”‚
â”‚                                                                              â”‚
â”‚  Status Effect Colors:                                                       â”‚
â”‚  #32CD32 (Buff)        (50, 205, 50)      Green                             â”‚
â”‚  #DC143C (Debuff)      (220, 20, 60)      DarkRed                           â”‚
â”‚  #FF4500 (Fire)        (255, 69, 0)       DarkYellow / Red                  â”‚
â”‚  #00BFFF (Ice)         (0, 191, 255)      Cyan                              â”‚
â”‚  #9400D3 (Poison)      (148, 0, 211)      DarkMagenta                       â”‚
â”‚  #FFD700 (Lightning)   (255, 215, 0)      Yellow                            â”‚
â”‚                                                                              â”‚
â”‚  Entity Colors:                                                              â”‚
â”‚  #00FF00 (Player)      (0, 255, 0)        Green                             â”‚
â”‚  #FF0000 (Enemy)       (255, 0, 0)        Red                               â”‚
â”‚  #FFFF00 (NPC)         (255, 255, 0)      Yellow                            â”‚
â”‚  #FF00FF (Boss)        (255, 0, 255)      Magenta                           â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚  Mapping Algorithm:                                                          â”‚
â”‚                                                                              â”‚
â”‚  private ConsoleColor FindNearestConsoleColor(byte r, byte g, byte b)       â”‚
â”‚  {                                                                           â”‚
â”‚      // Predefined RGB values for each ConsoleColor                         â”‚
â”‚      var consoleColors = new Dictionary<ConsoleColor, (int R, int G, int B)>â”‚
â”‚      {                                                                       â”‚
â”‚          { Black,       (0, 0, 0) },                                        â”‚
â”‚          { DarkBlue,    (0, 0, 139) },                                      â”‚
â”‚          { DarkGreen,   (0, 100, 0) },                                      â”‚
â”‚          { DarkCyan,    (0, 139, 139) },                                    â”‚
â”‚          { DarkRed,     (139, 0, 0) },                                      â”‚
â”‚          { DarkMagenta, (139, 0, 139) },                                    â”‚
â”‚          { DarkYellow,  (128, 128, 0) },                                    â”‚
â”‚          { Gray,        (128, 128, 128) },                                  â”‚
â”‚          { DarkGray,    (169, 169, 169) },                                  â”‚
â”‚          { Blue,        (0, 0, 255) },                                      â”‚
â”‚          { Green,       (0, 255, 0) },                                      â”‚
â”‚          { Cyan,        (0, 255, 255) },                                    â”‚
â”‚          { Red,         (255, 0, 0) },                                      â”‚
â”‚          { Magenta,     (255, 0, 255) },                                    â”‚
â”‚          { Yellow,      (255, 255, 0) },                                    â”‚
â”‚          { White,       (255, 255, 255) }                                   â”‚
â”‚      };                                                                      â”‚
â”‚                                                                              â”‚
â”‚      // Find color with minimum Euclidean distance                          â”‚
â”‚      return consoleColors                                                    â”‚
â”‚          .MinBy(c => ColorDistance(r, g, b, c.Value))                       â”‚
â”‚          .Key;                                                               â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 GuiThemeAdapter

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File: Presentation.Gui/Services/GuiThemeAdapter.cs                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  namespace RuneRust.Presentation.Gui.Services;                              â”‚
â”‚                                                                              â”‚
â”‚  /// <summary>                                                               â”‚
â”‚  /// GUI-specific implementation of IThemeService that provides             â”‚
â”‚  /// Avalonia Brush and Color conversions.                                  â”‚
â”‚  /// </summary>                                                              â”‚
â”‚  public class GuiThemeAdapter : IThemeService                               â”‚
â”‚  {                                                                           â”‚
â”‚      private readonly ThemeDefinition _theme;                               â”‚
â”‚      private readonly ILogger<GuiThemeAdapter> _logger;                     â”‚
â”‚      private readonly Dictionary<ColorKey, ISolidColorBrush> _brushCache;   â”‚
â”‚                                                                              â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚      // Constructor                                                          â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚      public GuiThemeAdapter(                                                â”‚
â”‚          ThemeDefinition theme,                                             â”‚
â”‚          ILogger<GuiThemeAdapter> logger)                                   â”‚
â”‚      {                                                                       â”‚
â”‚          _theme = theme ?? throw new ArgumentNullException(nameof(theme));  â”‚
â”‚          _logger = logger ?? throw new ArgumentNullException(nameof(logger));â”‚
â”‚          _brushCache = new Dictionary<ColorKey, ISolidColorBrush>();        â”‚
â”‚      }                                                                       â”‚
â”‚                                                                              â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚      // IThemeService Implementation                                         â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚      public ThemeDefinition ThemeDefinition => _theme;                      â”‚
â”‚      public bool IsColorBlindModeEnabled => ColorBlindMode != None;         â”‚
â”‚      public ColorBlindMode ColorBlindMode { get; set; } = None;             â”‚
â”‚      public bool UseAsciiIcons { get; set; } = false;                       â”‚
â”‚                                                                              â”‚
â”‚      // Color methods delegate to _theme.Palette with color blind adjust    â”‚
â”‚      public ThemeColor GetColor(ColorKey key) =>                            â”‚
â”‚          ApplyColorBlindAdjustment(_theme.Palette.GetColor(key));           â”‚
â”‚                                                                              â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚      // GUI-Specific Conversions                                             â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Converts a ThemeColor to an Avalonia SolidColorBrush.              â”‚
â”‚      /// Uses caching for performance.                                       â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public ISolidColorBrush ToBrush(ThemeColor color)                      â”‚
â”‚      {                                                                       â”‚
â”‚          var avaloniaColor = Color.FromRgb(color.R, color.G, color.B);      â”‚
â”‚          return new SolidColorBrush(avaloniaColor);                         â”‚
â”‚      }                                                                       â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Gets a cached brush for a color key to avoid repeated allocations. â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public ISolidColorBrush GetCachedBrush(ColorKey key)                   â”‚
â”‚      {                                                                       â”‚
â”‚          if (!_brushCache.TryGetValue(key, out var brush))                  â”‚
â”‚          {                                                                   â”‚
â”‚              brush = ToBrush(GetColor(key));                                â”‚
â”‚              _brushCache[key] = brush;                                      â”‚
â”‚          }                                                                   â”‚
â”‚          return brush;                                                       â”‚
â”‚      }                                                                       â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Converts a ThemeColor to an Avalonia Color.                        â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public Avalonia.Media.Color ToAvaloniaColor(ThemeColor color)          â”‚
â”‚      {                                                                       â”‚
â”‚          return Color.FromRgb(color.R, color.G, color.B);                   â”‚
â”‚      }                                                                       â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Gets an icon appropriate for GUI display.                          â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public string GetGuiIcon(IconKey key)                                  â”‚
â”‚      {                                                                       â”‚
â”‚          // GUI always uses Unicode icons (richer display)                  â”‚
â”‚          return _theme.Icons.GetUnicodeIcon(key);                           â”‚
â”‚      }                                                                       â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Clears the brush cache (call when theme changes).                  â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public void ClearBrushCache()                                          â”‚
â”‚      {                                                                       â”‚
â”‚          _brushCache.Clear();                                               â”‚
â”‚      }                                                                       â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Theme Definitions

### 6.1 ThemeColor Value Object

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File: Presentation.Shared/ValueObjects/ThemeColor.cs                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  namespace RuneRust.Presentation.Shared.ValueObjects;                       â”‚
â”‚                                                                              â”‚
â”‚  /// <summary>                                                               â”‚
â”‚  /// Represents a platform-agnostic color with RGB values.                  â”‚
â”‚  /// </summary>                                                              â”‚
â”‚  /// <param name="R">Red component (0-255).</param>                         â”‚
â”‚  /// <param name="G">Green component (0-255).</param>                       â”‚
â”‚  /// <param name="B">Blue component (0-255).</param>                        â”‚
â”‚  /// <param name="Name">Optional descriptive name for the color.</param>    â”‚
â”‚  public readonly record struct ThemeColor(                                  â”‚
â”‚      byte R,                                                                 â”‚
â”‚      byte G,                                                                 â”‚
â”‚      byte B,                                                                 â”‚
â”‚      string? Name = null)                                                   â”‚
â”‚  {                                                                           â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Gets the hexadecimal representation of the color.                  â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public string Hex => $"#{R:X2}{G:X2}{B:X2}";                           â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Creates a ThemeColor from a hex string (e.g., "#FF5500").          â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public static ThemeColor FromHex(string hex, string? name = null)      â”‚
â”‚      {                                                                       â”‚
â”‚          hex = hex.TrimStart('#');                                          â”‚
â”‚          var r = Convert.ToByte(hex[0..2], 16);                             â”‚
â”‚          var g = Convert.ToByte(hex[2..4], 16);                             â”‚
â”‚          var b = Convert.ToByte(hex[4..6], 16);                             â”‚
â”‚          return new ThemeColor(r, g, b, name);                              â”‚
â”‚      }                                                                       â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Returns a display string for debugging/logging.                    â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public override string ToString() =>                                   â”‚
â”‚          Name is not null ? $"{Name} ({Hex})" : Hex;                        â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ColorKey Enum

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File: Presentation.Shared/Enums/ColorKey.cs                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  namespace RuneRust.Presentation.Shared.Enums;                              â”‚
â”‚                                                                              â”‚
â”‚  /// <summary>                                                               â”‚
â”‚  /// Keys for accessing colors from the theme palette.                      â”‚
â”‚  /// </summary>                                                              â”‚
â”‚  public enum ColorKey                                                        â”‚
â”‚  {                                                                           â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚      // Core UI Colors                                                       â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>Primary brand/accent color.</summary>                     â”‚
â”‚      Primary,                                                                â”‚
â”‚      /// <summary>Secondary accent color.</summary>                         â”‚
â”‚      Secondary,                                                              â”‚
â”‚      /// <summary>Highlight/action color.</summary>                         â”‚
â”‚      Accent,                                                                 â”‚
â”‚      /// <summary>Warning/caution color.</summary>                          â”‚
â”‚      Warning,                                                                â”‚
â”‚      /// <summary>Error/danger color.</summary>                             â”‚
â”‚      Error,                                                                  â”‚
â”‚      /// <summary>Success/confirmation color.</summary>                     â”‚
â”‚      Success,                                                                â”‚
â”‚      /// <summary>Background color.</summary>                               â”‚
â”‚      Background,                                                             â”‚
â”‚      /// <summary>Surface/panel color.</summary>                            â”‚
â”‚      Surface,                                                                â”‚
â”‚      /// <summary>Primary text color.</summary>                             â”‚
â”‚      Text,                                                                   â”‚
â”‚      /// <summary>Muted/secondary text color.</summary>                     â”‚
â”‚      Muted,                                                                  â”‚
â”‚                                                                              â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚      // Health Colors                                                        â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>Full health (76-100%).</summary>                          â”‚
â”‚      HealthFull,                                                             â”‚
â”‚      /// <summary>Good health (51-75%).</summary>                           â”‚
â”‚      HealthGood,                                                             â”‚
â”‚      /// <summary>Low health (26-50%).</summary>                            â”‚
â”‚      HealthLow,                                                              â”‚
â”‚      /// <summary>Critical health (0-25%).</summary>                        â”‚
â”‚      HealthCritical,                                                         â”‚
â”‚                                                                              â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚      // Resource Colors                                                      â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>Mana resource color.</summary>                            â”‚
â”‚      Mana,                                                                   â”‚
â”‚      /// <summary>Rage resource color.</summary>                            â”‚
â”‚      Rage,                                                                   â”‚
â”‚      /// <summary>Energy resource color.</summary>                          â”‚
â”‚      Energy,                                                                 â”‚
â”‚      /// <summary>Focus resource color.</summary>                           â”‚
â”‚      Focus,                                                                  â”‚
â”‚      /// <summary>Stamina resource color.</summary>                         â”‚
â”‚      Stamina,                                                                â”‚
â”‚                                                                              â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚      // Status Effect Colors                                                 â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>Buff effect color.</summary>                              â”‚
â”‚      Buff,                                                                   â”‚
â”‚      /// <summary>Debuff effect color.</summary>                            â”‚
â”‚      Debuff,                                                                 â”‚
â”‚      /// <summary>Fire damage/effect color.</summary>                       â”‚
â”‚      Fire,                                                                   â”‚
â”‚      /// <summary>Ice/cold damage/effect color.</summary>                   â”‚
â”‚      Ice,                                                                    â”‚
â”‚      /// <summary>Poison damage/effect color.</summary>                     â”‚
â”‚      Poison,                                                                 â”‚
â”‚      /// <summary>Lightning damage/effect color.</summary>                  â”‚
â”‚      Lightning,                                                              â”‚
â”‚      /// <summary>Holy/divine damage/effect color.</summary>                â”‚
â”‚      Holy,                                                                   â”‚
â”‚      /// <summary>Shadow/dark damage/effect color.</summary>                â”‚
â”‚      Shadow,                                                                 â”‚
â”‚                                                                              â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚      // Terrain Colors                                                       â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>Floor/walkable terrain color.</summary>                   â”‚
â”‚      Floor,                                                                  â”‚
â”‚      /// <summary>Wall/obstacle terrain color.</summary>                    â”‚
â”‚      Wall,                                                                   â”‚
â”‚      /// <summary>Water terrain color.</summary>                            â”‚
â”‚      Water,                                                                  â”‚
â”‚      /// <summary>Lava/hazard terrain color.</summary>                      â”‚
â”‚      Lava,                                                                   â”‚
â”‚      /// <summary>Grass/vegetation terrain color.</summary>                 â”‚
â”‚      Grass,                                                                  â”‚
â”‚      /// <summary>Door/portal terrain color.</summary>                      â”‚
â”‚      Door,                                                                   â”‚
â”‚                                                                              â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚      // Entity Colors                                                        â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>Player character color.</summary>                         â”‚
â”‚      Player,                                                                 â”‚
â”‚      /// <summary>Enemy/monster color.</summary>                            â”‚
â”‚      Enemy,                                                                  â”‚
â”‚      /// <summary>NPC (non-hostile) color.</summary>                        â”‚
â”‚      Npc,                                                                    â”‚
â”‚      /// <summary>Boss enemy color.</summary>                               â”‚
â”‚      Boss,                                                                   â”‚
â”‚      /// <summary>Ally/companion color.</summary>                           â”‚
â”‚      Ally,                                                                   â”‚
â”‚                                                                              â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚      // UI State Colors                                                      â”‚
â”‚      // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>Selected/highlighted item color.</summary>                â”‚
â”‚      Selected,                                                               â”‚
â”‚      /// <summary>Disabled/inactive color.</summary>                        â”‚
â”‚      Disabled,                                                               â”‚
â”‚      /// <summary>Border/outline color.</summary>                           â”‚
â”‚      Border                                                                  â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 IconKey Enum

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File: Presentation.Shared/Enums/IconKey.cs                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  namespace RuneRust.Presentation.Shared.Enums;                              â”‚
â”‚                                                                              â”‚
â”‚  /// <summary>                                                               â”‚
â”‚  /// Keys for accessing icons from the theme.                               â”‚
â”‚  /// </summary>                                                              â”‚
â”‚  public enum IconKey                                                         â”‚
â”‚  {                                                                           â”‚
â”‚      // Stats                                                                â”‚
â”‚      Health,                                                                 â”‚
â”‚      Mana,                                                                   â”‚
â”‚      Attack,                                                                 â”‚
â”‚      Defense,                                                                â”‚
â”‚      Speed,                                                                  â”‚
â”‚      Luck,                                                                   â”‚
â”‚                                                                              â”‚
â”‚      // Status Effects                                                       â”‚
â”‚      Buff,                                                                   â”‚
â”‚      Debuff,                                                                 â”‚
â”‚      Fire,                                                                   â”‚
â”‚      Ice,                                                                    â”‚
â”‚      Poison,                                                                 â”‚
â”‚      Lightning,                                                              â”‚
â”‚      Stun,                                                                   â”‚
â”‚      Shield,                                                                 â”‚
â”‚                                                                              â”‚
â”‚      // Resources                                                            â”‚
â”‚      Ore,                                                                    â”‚
â”‚      Herb,                                                                   â”‚
â”‚      Leather,                                                                â”‚
â”‚      Gem,                                                                    â”‚
â”‚      Wood,                                                                   â”‚
â”‚                                                                              â”‚
â”‚      // Navigation                                                           â”‚
â”‚      ArrowUp,                                                                â”‚
â”‚      ArrowDown,                                                              â”‚
â”‚      ArrowLeft,                                                              â”‚
â”‚      ArrowRight,                                                             â”‚
â”‚                                                                              â”‚
â”‚      // UI                                                                   â”‚
â”‚      Check,                                                                  â”‚
â”‚      Cross,                                                                  â”‚
â”‚      Warning,                                                                â”‚
â”‚      Info,                                                                   â”‚
â”‚      Lock,                                                                   â”‚
â”‚      Unlock,                                                                 â”‚
â”‚      Star,                                                                   â”‚
â”‚      StarEmpty,                                                              â”‚
â”‚                                                                              â”‚
â”‚      // Entities                                                             â”‚
â”‚      Player,                                                                 â”‚
â”‚      Enemy,                                                                  â”‚
â”‚      Boss,                                                                   â”‚
â”‚      Npc,                                                                    â”‚
â”‚                                                                              â”‚
â”‚      // Dice                                                                 â”‚
â”‚      D20,                                                                    â”‚
â”‚      CriticalSuccess,                                                        â”‚
â”‚      CriticalFailure                                                         â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.4 AnimationKey Enum

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File: Presentation.Shared/Enums/AnimationKey.cs                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  namespace RuneRust.Presentation.Shared.Enums;                              â”‚
â”‚                                                                              â”‚
â”‚  /// <summary>                                                               â”‚
â”‚  /// Keys for accessing animation timing definitions.                       â”‚
â”‚  /// </summary>                                                              â”‚
â”‚  public enum AnimationKey                                                    â”‚
â”‚  {                                                                           â”‚
â”‚      /// <summary>Quick feedback (100ms).</summary>                         â”‚
â”‚      Short,                                                                  â”‚
â”‚      /// <summary>Standard transitions (250ms).</summary>                   â”‚
â”‚      Medium,                                                                 â”‚
â”‚      /// <summary>Emphasis animations (500ms).</summary>                    â”‚
â”‚      Long,                                                                   â”‚
â”‚      /// <summary>Dramatic effects (1000ms).</summary>                      â”‚
â”‚      Extended,                                                               â”‚
â”‚      /// <summary>Health bar change animation.</summary>                    â”‚
â”‚      HealthChange,                                                           â”‚
â”‚      /// <summary>Damage popup animation.</summary>                         â”‚
â”‚      DamagePopup,                                                            â”‚
â”‚      /// <summary>Status effect application.</summary>                      â”‚
â”‚      StatusEffect,                                                           â”‚
â”‚      /// <summary>Notification appearance.</summary>                        â”‚
â”‚      Notification,                                                           â”‚
â”‚      /// <summary>Panel slide animation.</summary>                          â”‚
â”‚      PanelSlide,                                                             â”‚
â”‚      /// <summary>Achievement unlock.</summary>                             â”‚
â”‚      AchievementUnlock                                                       â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.5 ColorPalette Class

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File: Presentation.Shared/ValueObjects/ColorPalette.cs                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  namespace RuneRust.Presentation.Shared.ValueObjects;                       â”‚
â”‚                                                                              â”‚
â”‚  /// <summary>                                                               â”‚
â”‚  /// Contains the complete color palette for the game theme.                â”‚
â”‚  /// </summary>                                                              â”‚
â”‚  public class ColorPalette                                                   â”‚
â”‚  {                                                                           â”‚
â”‚      private readonly Dictionary<ColorKey, ThemeColor> _colors;             â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Creates the default game color palette.                            â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public static ColorPalette CreateDefault() => new ColorPalette         â”‚
â”‚      {                                                                       â”‚
â”‚          // Core UI Colors                                                   â”‚
â”‚          [ColorKey.Primary]    = FromHex("#4A90D9", "Primary Blue"),        â”‚
â”‚          [ColorKey.Secondary]  = FromHex("#2ECC71", "Secondary Green"),     â”‚
â”‚          [ColorKey.Accent]     = FromHex("#E74C3C", "Accent Red"),          â”‚
â”‚          [ColorKey.Warning]    = FromHex("#F39C12", "Warning Orange"),      â”‚
â”‚          [ColorKey.Error]      = FromHex("#E74C3C", "Error Red"),           â”‚
â”‚          [ColorKey.Success]    = FromHex("#2ECC71", "Success Green"),       â”‚
â”‚          [ColorKey.Background] = FromHex("#1A1A2E", "Background"),          â”‚
â”‚          [ColorKey.Surface]    = FromHex("#16213E", "Surface"),             â”‚
â”‚          [ColorKey.Text]       = FromHex("#EAEAEA", "Text"),                â”‚
â”‚          [ColorKey.Muted]      = FromHex("#7F8C8D", "Muted"),               â”‚
â”‚                                                                              â”‚
â”‚          // Health Colors                                                    â”‚
â”‚          [ColorKey.HealthFull]     = FromHex("#228B22", "Forest Green"),    â”‚
â”‚          [ColorKey.HealthGood]     = FromHex("#32CD32", "Lime Green"),      â”‚
â”‚          [ColorKey.HealthLow]      = FromHex("#FFD700", "Gold"),            â”‚
â”‚          [ColorKey.HealthCritical] = FromHex("#DC143C", "Crimson"),         â”‚
â”‚                                                                              â”‚
â”‚          // Resource Colors                                                  â”‚
â”‚          [ColorKey.Mana]    = FromHex("#4169E1", "Royal Blue"),             â”‚
â”‚          [ColorKey.Rage]    = FromHex("#DC143C", "Crimson"),                â”‚
â”‚          [ColorKey.Energy]  = FromHex("#FFD700", "Gold"),                   â”‚
â”‚          [ColorKey.Focus]   = FromHex("#00CED1", "Dark Turquoise"),         â”‚
â”‚          [ColorKey.Stamina] = FromHex("#32CD32", "Lime Green"),             â”‚
â”‚                                                                              â”‚
â”‚          // Status Effect Colors                                             â”‚
â”‚          [ColorKey.Buff]      = FromHex("#32CD32", "Lime Green"),           â”‚
â”‚          [ColorKey.Debuff]    = FromHex("#DC143C", "Crimson"),              â”‚
â”‚          [ColorKey.Fire]      = FromHex("#FF4500", "Orange Red"),           â”‚
â”‚          [ColorKey.Ice]       = FromHex("#00BFFF", "Deep Sky Blue"),        â”‚
â”‚          [ColorKey.Poison]    = FromHex("#9400D3", "Dark Violet"),          â”‚
â”‚          [ColorKey.Lightning] = FromHex("#FFD700", "Gold"),                 â”‚
â”‚          [ColorKey.Holy]      = FromHex("#FFFACD", "Lemon Chiffon"),        â”‚
â”‚          [ColorKey.Shadow]    = FromHex("#4B0082", "Indigo"),               â”‚
â”‚                                                                              â”‚
â”‚          // Terrain Colors                                                   â”‚
â”‚          [ColorKey.Floor] = FromHex("#696969", "Dim Gray"),                 â”‚
â”‚          [ColorKey.Wall]  = FromHex("#2F4F4F", "Dark Slate Gray"),          â”‚
â”‚          [ColorKey.Water] = FromHex("#1E90FF", "Dodger Blue"),              â”‚
â”‚          [ColorKey.Lava]  = FromHex("#FF4500", "Orange Red"),               â”‚
â”‚          [ColorKey.Grass] = FromHex("#228B22", "Forest Green"),             â”‚
â”‚          [ColorKey.Door]  = FromHex("#8B4513", "Saddle Brown"),             â”‚
â”‚                                                                              â”‚
â”‚          // Entity Colors                                                    â”‚
â”‚          [ColorKey.Player] = FromHex("#00FF00", "Lime"),                    â”‚
â”‚          [ColorKey.Enemy]  = FromHex("#FF0000", "Red"),                     â”‚
â”‚          [ColorKey.Npc]    = FromHex("#FFFF00", "Yellow"),                  â”‚
â”‚          [ColorKey.Boss]   = FromHex("#FF00FF", "Magenta"),                 â”‚
â”‚          [ColorKey.Ally]   = FromHex("#00FFFF", "Cyan"),                    â”‚
â”‚                                                                              â”‚
â”‚          // UI State Colors                                                  â”‚
â”‚          [ColorKey.Selected] = FromHex("#4A90D9", "Primary Blue"),          â”‚
â”‚          [ColorKey.Disabled] = FromHex("#555555", "Dark Gray"),             â”‚
â”‚          [ColorKey.Border]   = FromHex("#7F8C8D", "Gray")                   â”‚
â”‚      };                                                                      â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Gets a color by its key.                                           â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public ThemeColor GetColor(ColorKey key) =>                            â”‚
â”‚          _colors.TryGetValue(key, out var color)                            â”‚
â”‚              ? color                                                         â”‚
â”‚              : ThemeColor.FromHex("#FF00FF", "Missing Color");              â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.6 ThemeDefinition Class

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File: Presentation.Shared/ValueObjects/ThemeDefinition.cs                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  namespace RuneRust.Presentation.Shared.ValueObjects;                       â”‚
â”‚                                                                              â”‚
â”‚  /// <summary>                                                               â”‚
â”‚  /// Complete theme definition including colors, icons, and animations.     â”‚
â”‚  /// </summary>                                                              â”‚
â”‚  public class ThemeDefinition                                                â”‚
â”‚  {                                                                           â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// The color palette for this theme.                                  â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public ColorPalette Palette { get; init; } = ColorPalette.CreateDefault();â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// The icon set for this theme.                                       â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public IconSet Icons { get; init; } = IconSet.CreateDefault();         â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// The animation timing definitions.                                  â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public AnimationTimings Animations { get; init; } = AnimationTimings.CreateDefault();â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Theme name for identification.                                     â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public string Name { get; init; } = "Default";                         â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Creates the default game theme.                                    â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public static ThemeDefinition CreateDefault() => new ThemeDefinition   â”‚
â”‚      {                                                                       â”‚
â”‚          Name = "Rune & Rust Default",                                      â”‚
â”‚          Palette = ColorPalette.CreateDefault(),                            â”‚
â”‚          Icons = IconSet.CreateDefault(),                                   â”‚
â”‚          Animations = AnimationTimings.CreateDefault()                      â”‚
â”‚      };                                                                      â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.7 IconSet Class

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File: Presentation.Shared/ValueObjects/IconSet.cs                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  namespace RuneRust.Presentation.Shared.ValueObjects;                       â”‚
â”‚                                                                              â”‚
â”‚  /// <summary>                                                               â”‚
â”‚  /// Contains icon definitions with Unicode and ASCII fallback options.     â”‚
â”‚  /// </summary>                                                              â”‚
â”‚  public class IconSet                                                        â”‚
â”‚  {                                                                           â”‚
â”‚      private readonly Dictionary<IconKey, (string Unicode, string Ascii)> _icons;â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Creates the default icon set.                                      â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public static IconSet CreateDefault() => new IconSet                   â”‚
â”‚      {                                                                       â”‚
â”‚          // Stats                                                            â”‚
â”‚          [IconKey.Health]  = ("â™¥", "[HP]"),                                 â”‚
â”‚          [IconKey.Mana]    = ("âœ¦", "[MP]"),                                 â”‚
â”‚          [IconKey.Attack]  = ("âš”", "[ATK]"),                                â”‚
â”‚          [IconKey.Defense] = ("ğŸ›¡", "[DEF]"),                                â”‚
â”‚          [IconKey.Speed]   = ("â†’", "[SPD]"),                                â”‚
â”‚          [IconKey.Luck]    = ("â˜†", "[LCK]"),                                â”‚
â”‚                                                                              â”‚
â”‚          // Status Effects                                                   â”‚
â”‚          [IconKey.Buff]      = ("â†‘", "[+]"),                                â”‚
â”‚          [IconKey.Debuff]    = ("â†“", "[-]"),                                â”‚
â”‚          [IconKey.Fire]      = ("ğŸ”¥", "[F]"),                                â”‚
â”‚          [IconKey.Ice]       = ("â„", "[I]"),                                â”‚
â”‚          [IconKey.Poison]    = ("â˜ ", "[P]"),                                â”‚
â”‚          [IconKey.Lightning] = ("âš¡", "[L]"),                                â”‚
â”‚          [IconKey.Stun]      = ("âœ§", "[S]"),                                â”‚
â”‚          [IconKey.Shield]    = ("â—ˆ", "[SH]"),                               â”‚
â”‚                                                                              â”‚
â”‚          // Resources                                                        â”‚
â”‚          [IconKey.Ore]     = ("ï¿½ite", "[O]"),                                â”‚
â”‚          [IconKey.Herb]    = ("â€", "[H]"),                                  â”‚
â”‚          [IconKey.Leather] = ("â—­", "[L]"),                                  â”‚
â”‚          [IconKey.Gem]     = ("â—†", "[G]"),                                  â”‚
â”‚          [IconKey.Wood]    = ("âŒ‚", "[W]"),                                  â”‚
â”‚                                                                              â”‚
â”‚          // Navigation                                                       â”‚
â”‚          [IconKey.ArrowUp]    = ("â–²", "^"),                                 â”‚
â”‚          [IconKey.ArrowDown]  = ("â–¼", "v"),                                 â”‚
â”‚          [IconKey.ArrowLeft]  = ("â—„", "<"),                                 â”‚
â”‚          [IconKey.ArrowRight] = ("â–º", ">"),                                 â”‚
â”‚                                                                              â”‚
â”‚          // UI                                                               â”‚
â”‚          [IconKey.Check]     = ("âœ“", "[x]"),                                â”‚
â”‚          [IconKey.Cross]     = ("âœ—", "[ ]"),                                â”‚
â”‚          [IconKey.Warning]   = ("âš ", "[!]"),                                â”‚
â”‚          [IconKey.Info]      = ("â„¹", "[i]"),                                â”‚
â”‚          [IconKey.Lock]      = ("ğŸ”’", "[L]"),                                â”‚
â”‚          [IconKey.Unlock]    = ("ğŸ”“", "[U]"),                                â”‚
â”‚          [IconKey.Star]      = ("â˜…", "[*]"),                                â”‚
â”‚          [IconKey.StarEmpty] = ("â˜†", "[ ]"),                                â”‚
â”‚                                                                              â”‚
â”‚          // Entities                                                         â”‚
â”‚          [IconKey.Player] = ("@", "@"),                                     â”‚
â”‚          [IconKey.Enemy]  = ("!", "!"),                                     â”‚
â”‚          [IconKey.Boss]   = ("â™š", "B"),                                     â”‚
â”‚          [IconKey.Npc]    = ("?", "?"),                                     â”‚
â”‚                                                                              â”‚
â”‚          // Dice                                                             â”‚
â”‚          [IconKey.D20]              = ("âš„", "[d20]"),                       â”‚
â”‚          [IconKey.CriticalSuccess]  = ("20!", "20!"),                       â”‚
â”‚          [IconKey.CriticalFailure]  = ("1!", "1!")                          â”‚
â”‚      };                                                                      â”‚
â”‚                                                                              â”‚
â”‚      public string GetUnicodeIcon(IconKey key) => _icons[key].Unicode;      â”‚
â”‚      public string GetAsciiIcon(IconKey key) => _icons[key].Ascii;          â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.8 AnimationTimings Class

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File: Presentation.Shared/ValueObjects/AnimationTimings.cs                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  namespace RuneRust.Presentation.Shared.ValueObjects;                       â”‚
â”‚                                                                              â”‚
â”‚  /// <summary>                                                               â”‚
â”‚  /// Contains animation timing definitions for consistent UI animations.    â”‚
â”‚  /// </summary>                                                              â”‚
â”‚  public class AnimationTimings                                               â”‚
â”‚  {                                                                           â”‚
â”‚      private readonly Dictionary<AnimationKey, TimeSpan> _timings;          â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Creates the default animation timings.                             â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public static AnimationTimings CreateDefault() => new AnimationTimings â”‚
â”‚      {                                                                       â”‚
â”‚          [AnimationKey.Short]           = TimeSpan.FromMilliseconds(100),   â”‚
â”‚          [AnimationKey.Medium]          = TimeSpan.FromMilliseconds(250),   â”‚
â”‚          [AnimationKey.Long]            = TimeSpan.FromMilliseconds(500),   â”‚
â”‚          [AnimationKey.Extended]        = TimeSpan.FromMilliseconds(1000),  â”‚
â”‚          [AnimationKey.HealthChange]    = TimeSpan.FromMilliseconds(300),   â”‚
â”‚          [AnimationKey.DamagePopup]     = TimeSpan.FromMilliseconds(800),   â”‚
â”‚          [AnimationKey.StatusEffect]    = TimeSpan.FromMilliseconds(200),   â”‚
â”‚          [AnimationKey.Notification]    = TimeSpan.FromMilliseconds(5000),  â”‚
â”‚          [AnimationKey.PanelSlide]      = TimeSpan.FromMilliseconds(250),   â”‚
â”‚          [AnimationKey.AchievementUnlock] = TimeSpan.FromMilliseconds(1500) â”‚
â”‚      };                                                                      â”‚
â”‚                                                                              â”‚
â”‚      public TimeSpan GetDuration(AnimationKey key) => _timings[key];        â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. Color Migration Plan

### 7.1 TUI Component Migration

| Component | Current Pattern | Migration To | File Changes |
|-----------|-----------------|--------------|--------------|
| `HealthBarDisplay` | `HealthBarConfig` thresholds | `_themeService.GetHealthColor(percentage)` | Remove config dependency |
| `ResourceBarDisplay` | `static Dictionary<string, ConsoleColor>` | `_themeService.GetResourceColor(type)` | Remove static dictionary |
| `CombatGridPanel` | Switch expression in method | `_themeService.GetTerrainColor(type)` | Inject IThemeService |
| `SpectreGameRenderer` | Inline strings `"yellow"`, `"red"` | `_tuiAdapter.ToSpectreColor(color)` | Replace all inline colors |
| `ColoredTextRenderer` | Factory methods with colors | `_themeService.GetColor(key)` | Update factory methods |
| `BossHealthBarDisplay` | Hardcoded phase colors | `_themeService.GetHealthColor()` | Remove hardcoded colors |

### 7.2 GUI Component Migration

| Component | Current Pattern | Migration To | File Changes |
|-----------|-----------------|--------------|--------------|
| `HealthBarControl` | `Brushes.ForestGreen`, `Brushes.OrangeRed` | `_guiAdapter.GetCachedBrush(key)` | Replace Brushes.* |
| `GridCellControl` | Hardcoded terrain `Brushes.*` | `_guiAdapter.ToBrush(terrainColor)` | Remove hardcoded brushes |
| `EntityTokenControl` | `Brushes.LimeGreen` (inconsistent) | `_guiAdapter.GetCachedBrush(ColorKey.Player)` | Standardize colors |
| `DamagePopupControl` | Hardcoded popup colors | `_guiAdapter.ToBrush(colorKey)` | Remove hardcoded values |
| `MessageTypeToColorConverter` | Switch with `Brushes.*` | `_guiAdapter.ToBrush(...)` | Inject theme service |

### 7.3 Configuration Consolidation

| Old Configuration | Location | Consolidation Action |
|-------------------|----------|----------------------|
| `HealthBarConfig` | `Presentation.Tui/Configuration/` | Merge thresholds into `IThemeService.GetHealthColor()` |
| `Colors.axaml` | `Presentation.Gui/Themes/` | Keep as resource dictionary, populated from `IThemeService` |

### 7.4 Migration Example: HealthBarDisplay

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MIGRATION EXAMPLE: HealthBarDisplay                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  BEFORE (Uses HealthBarConfig):                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                            â”‚
â”‚                                                                              â”‚
â”‚  public class HealthBarDisplay                                               â”‚
â”‚  {                                                                           â”‚
â”‚      private readonly HealthBarConfig _config;                              â”‚
â”‚                                                                              â”‚
â”‚      public void Render(int current, int max)                               â”‚
â”‚      {                                                                       â”‚
â”‚          var percentage = (double)current / max;                            â”‚
â”‚          var color = GetColor(percentage);                                  â”‚
â”‚          // ... render with color                                           â”‚
â”‚      }                                                                       â”‚
â”‚                                                                              â”‚
â”‚      private ConsoleColor GetColor(double percentage)                       â”‚
â”‚      {                                                                       â”‚
â”‚          if (percentage >= _config.FullThreshold)                           â”‚
â”‚              return _config.FullHealthColor;    // Green                    â”‚
â”‚          if (percentage >= _config.GoodThreshold)                           â”‚
â”‚              return _config.GoodHealthColor;    // Green                    â”‚
â”‚          if (percentage >= _config.LowThreshold)                            â”‚
â”‚              return _config.LowHealthColor;     // Yellow                   â”‚
â”‚          return _config.CriticalHealthColor;    // Red                      â”‚
â”‚      }                                                                       â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚  AFTER (Uses IThemeService):                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                â”‚
â”‚                                                                              â”‚
â”‚  public class HealthBarDisplay                                               â”‚
â”‚  {                                                                           â”‚
â”‚      private readonly IThemeService _themeService;                          â”‚
â”‚      private readonly TuiThemeAdapter _adapter;                             â”‚
â”‚                                                                              â”‚
â”‚      public HealthBarDisplay(                                               â”‚
â”‚          IThemeService themeService,                                        â”‚
â”‚          TuiThemeAdapter adapter)                                           â”‚
â”‚      {                                                                       â”‚
â”‚          _themeService = themeService;                                      â”‚
â”‚          _adapter = adapter;                                                â”‚
â”‚      }                                                                       â”‚
â”‚                                                                              â”‚
â”‚      public void Render(int current, int max)                               â”‚
â”‚      {                                                                       â”‚
â”‚          var percentage = (double)current / max;                            â”‚
â”‚          var themeColor = _themeService.GetHealthColor(percentage);         â”‚
â”‚          var consoleColor = _adapter.ToConsoleColor(themeColor);            â”‚
â”‚          // ... render with consoleColor                                    â”‚
â”‚      }                                                                       â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â”‚  Benefits:                                                                   â”‚
â”‚  |-- Single source of truth for health colors                               â”‚
â”‚  |-- Thresholds centralized in IThemeService                                â”‚
â”‚  |-- Color blind mode support automatic                                     â”‚
â”‚  +-- Consistent with GUI HealthBarControl                                   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Data Model Changes

### 8.1 Summary

| Type | Layer | Purpose |
|------|-------|---------|
| `IThemeService` | Presentation.Shared | Theme access interface |
| `TuiThemeAdapter` | Presentation.Tui | Console color conversion |
| `GuiThemeAdapter` | Presentation.Gui | Avalonia brush conversion |
| `ThemeDefinition` | Presentation.Shared | Complete theme definition |
| `ThemeColor` | Presentation.Shared | Platform-agnostic color |
| `ColorPalette` | Presentation.Shared | Color collection |
| `IconSet` | Presentation.Shared | Icon definitions |
| `AnimationTimings` | Presentation.Shared | Animation durations |
| `ColorKey` | Presentation.Shared | Color access keys |
| `IconKey` | Presentation.Shared | Icon access keys |
| `AnimationKey` | Presentation.Shared | Animation access keys |

### 8.2 Data Model Diagram

```
NEW: IThemeService (Interface - Presentation.Shared)
|-- GetColor(ColorKey): ThemeColor
|-- GetHealthColor(double): ThemeColor
|-- GetResourceColor(ResourceType): ThemeColor
|-- GetStatusEffectColor(StatusEffectCategory): ThemeColor
|-- GetTerrainColor(TerrainType): ThemeColor
|-- GetEntityColor(EntityType): ThemeColor
|-- GetIcon(IconKey): string
|-- GetStatusIcon(StatusEffectCategory): string
|-- GetResourceIcon(ResourceType): string
|-- GetAnimationDuration(AnimationKey): TimeSpan
|-- ThemeDefinition: ThemeDefinition { get; }
|-- IsColorBlindModeEnabled: bool { get; }
|-- ColorBlindMode: ColorBlindMode { get; set; }
+-- UseAsciiIcons: bool { get; set; }

NEW: TuiThemeAdapter (Service - Presentation.Tui)
|-- Implements: IThemeService
|-- ToConsoleColor(ThemeColor): ConsoleColor
|-- ToSpectreColor(ThemeColor): Spectre.Console.Color
+-- GetTuiIcon(IconKey): string

NEW: GuiThemeAdapter (Service - Presentation.Gui)
|-- Implements: IThemeService
|-- ToBrush(ThemeColor): ISolidColorBrush
|-- GetCachedBrush(ColorKey): ISolidColorBrush
|-- ToAvaloniaColor(ThemeColor): Avalonia.Media.Color
|-- GetGuiIcon(IconKey): string
+-- ClearBrushCache(): void

NEW: ThemeDefinition (Class - Presentation.Shared)
|-- Name: string
|-- Palette: ColorPalette
|-- Icons: IconSet
+-- Animations: AnimationTimings

NEW: ThemeColor (Record Struct - Presentation.Shared)
|-- R: byte
|-- G: byte
|-- B: byte
|-- Name: string?
|-- Hex: string { get; }
+-- FromHex(string, string?): ThemeColor

NEW: ColorPalette (Class - Presentation.Shared)
|-- GetColor(ColorKey): ThemeColor
+-- CreateDefault(): ColorPalette

NEW: IconSet (Class - Presentation.Shared)
|-- GetUnicodeIcon(IconKey): string
|-- GetAsciiIcon(IconKey): string
+-- CreateDefault(): IconSet

NEW: AnimationTimings (Class - Presentation.Shared)
|-- GetDuration(AnimationKey): TimeSpan
+-- CreateDefault(): AnimationTimings

NEW: ColorKey (Enum - Presentation.Shared)
|-- Primary, Secondary, Accent, Warning, Error, Success
|-- Background, Surface, Text, Muted
|-- HealthFull, HealthGood, HealthLow, HealthCritical
|-- Mana, Rage, Energy, Focus, Stamina
|-- Buff, Debuff, Fire, Ice, Poison, Lightning, Holy, Shadow
|-- Floor, Wall, Water, Lava, Grass, Door
|-- Player, Enemy, Npc, Boss, Ally
+-- Selected, Disabled, Border

NEW: IconKey (Enum - Presentation.Shared)
|-- Health, Mana, Attack, Defense, Speed, Luck
|-- Buff, Debuff, Fire, Ice, Poison, Lightning, Stun, Shield
|-- Ore, Herb, Leather, Gem, Wood
|-- ArrowUp, ArrowDown, ArrowLeft, ArrowRight
|-- Check, Cross, Warning, Info, Lock, Unlock, Star, StarEmpty
|-- Player, Enemy, Boss, Npc
+-- D20, CriticalSuccess, CriticalFailure

NEW: AnimationKey (Enum - Presentation.Shared)
|-- Short, Medium, Long, Extended
|-- HealthChange, DamagePopup, StatusEffect
|-- Notification, PanelSlide, AchievementUnlock

DEPRECATED: HealthBarConfig (Class - Presentation.Tui)
|-- Previously: Threshold color definitions
+-- Replaced by: IThemeService.GetHealthColor()
```

---

## 9. Configuration

### 9.1 ThemeConfiguration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File: Presentation.Shared/Configuration/ThemeConfiguration.cs              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  namespace RuneRust.Presentation.Shared.Configuration;                      â”‚
â”‚                                                                              â”‚
â”‚  /// <summary>                                                               â”‚
â”‚  /// Configuration options for the theme service.                           â”‚
â”‚  /// </summary>                                                              â”‚
â”‚  public class ThemeConfiguration                                             â”‚
â”‚  {                                                                           â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Whether to use ASCII icons instead of Unicode.                     â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public bool UseAsciiIcons { get; set; } = false;                       â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// The color blind mode to apply.                                     â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public ColorBlindMode ColorBlindMode { get; set; } = ColorBlindMode.None;â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>                                                           â”‚
â”‚      /// Health color thresholds.                                           â”‚
â”‚      /// </summary>                                                          â”‚
â”‚      public HealthThresholds HealthThresholds { get; set; } = new();        â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â”‚  /// <summary>                                                               â”‚
â”‚  /// Health color threshold configuration.                                  â”‚
â”‚  /// </summary>                                                              â”‚
â”‚  public class HealthThresholds                                               â”‚
â”‚  {                                                                           â”‚
â”‚      /// <summary>Full health threshold (default 0.76).</summary>           â”‚
â”‚      public double Full { get; set; } = 0.76;                               â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>Good health threshold (default 0.51).</summary>           â”‚
â”‚      public double Good { get; set; } = 0.51;                               â”‚
â”‚                                                                              â”‚
â”‚      /// <summary>Low health threshold (default 0.26).</summary>            â”‚
â”‚      public double Low { get; set; } = 0.26;                                â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 DI Registration

```csharp
// Presentation.Shared registration
services.AddSingleton<ThemeDefinition>(ThemeDefinition.CreateDefault());

// Presentation.Tui registration
services.AddSingleton<IThemeService, TuiThemeAdapter>();
services.AddSingleton<TuiThemeAdapter>();

// Presentation.Gui registration
services.AddSingleton<IThemeService, GuiThemeAdapter>();
services.AddSingleton<GuiThemeAdapter>();
```

---

## 10. Commands

### 10.1 Summary

No new commands are introduced in v0.13.5b. This version is focused on internal infrastructure and does not affect the command interface.

---

## 11. User-Facing Changes

### 11.1 Summary

No direct user-facing changes are introduced in v0.13.5b. All changes are internal refactoring that:
- Do not change the visual appearance (colors remain the same)
- Do not change user interaction patterns
- Do not affect command syntax or availability
- Do not affect game functionality

### 11.2 Visual Consistency Improvements

After migration, users may notice improved visual consistency:
- Entity colors consistent across all displays
- Health bar colors identical between TUI and GUI
- Status effect colors uniform across all components

---

## 12. Logging Specifications

### 12.1 Theme Service Logging

| Level | Event | Example |
|-------|-------|---------|
| Debug | Color retrieval | `"Getting color for key {ColorKey}"` |
| Debug | Color conversion | `"Converting {ThemeColor} to ConsoleColor"` |
| Information | Theme initialization | `"Theme service initialized with theme: {ThemeName}"` |
| Information | Color blind mode change | `"Color blind mode changed to {ColorBlindMode}"` |
| Warning | Missing color key | `"Color key {ColorKey} not found, using fallback"` |
| Warning | Cache cleared | `"Brush cache cleared due to theme change"` |

### 12.2 Adapter Logging

```csharp
// TuiThemeAdapter logging
_logger.LogDebug("Converting ThemeColor {Color} to ConsoleColor", color);
_logger.LogInformation("TUI theme adapter initialized");

// GuiThemeAdapter logging
_logger.LogDebug("Creating brush for color {ColorKey}", key);
_logger.LogInformation("GUI theme adapter initialized, cache size: {CacheSize}");
```

---

## 13. Unit Testing Requirements

### 13.1 Test Summary

| Test Category | Test Count | Description |
|---------------|------------|-------------|
| ThemeColor Tests | 2 | Value object creation, hex conversion |
| ColorPalette Tests | 2 | Color retrieval, default palette |
| IThemeService Tests | 2 | Health color thresholds, resource colors |
| TuiThemeAdapter Tests | 1 | ConsoleColor mapping |
| GuiThemeAdapter Tests | 1 | Brush creation and caching |
| **Total** | **~8** | |

### 13.2 ThemeColor Tests

```
Test: ThemeColor_FromHex_CreatesCorrectColor
â”œâ”€â”€ Description: Verify ThemeColor.FromHex parses hex strings correctly
â”œâ”€â”€ Arrange:
â”‚   â””â”€â”€ hex = "#FF5500"
â”œâ”€â”€ Act:
â”‚   â””â”€â”€ color = ThemeColor.FromHex(hex, "Orange")
â”œâ”€â”€ Assert:
â”‚   â”œâ”€â”€ color.R == 255
â”‚   â”œâ”€â”€ color.G == 85
â”‚   â”œâ”€â”€ color.B == 0
â”‚   â””â”€â”€ color.Name == "Orange"
â””â”€â”€ Expected: Color components match hex values

Test: ThemeColor_Hex_ReturnsCorrectFormat
â”œâ”€â”€ Description: Verify ThemeColor.Hex property returns correct format
â”œâ”€â”€ Arrange:
â”‚   â””â”€â”€ color = new ThemeColor(255, 128, 0)
â”œâ”€â”€ Act:
â”‚   â””â”€â”€ hex = color.Hex
â”œâ”€â”€ Assert:
â”‚   â””â”€â”€ hex == "#FF8000"
â””â”€â”€ Expected: Hex string in correct format
```

### 13.3 ColorPalette Tests

```
Test: ColorPalette_GetColor_ReturnsDefinedColor
â”œâ”€â”€ Description: Verify ColorPalette returns correct colors for keys
â”œâ”€â”€ Arrange:
â”‚   â””â”€â”€ palette = ColorPalette.CreateDefault()
â”œâ”€â”€ Act:
â”‚   â””â”€â”€ healthFull = palette.GetColor(ColorKey.HealthFull)
â”œâ”€â”€ Assert:
â”‚   â””â”€â”€ healthFull.Hex == "#228B22"
â””â”€â”€ Expected: Returns ForestGreen for HealthFull

Test: ColorPalette_CreateDefault_ContainsAllKeys
â”œâ”€â”€ Description: Verify default palette contains all ColorKey values
â”œâ”€â”€ Arrange:
â”‚   â””â”€â”€ palette = ColorPalette.CreateDefault()
â”œâ”€â”€ Act:
â”‚   â””â”€â”€ Iterate all ColorKey values
â”œâ”€â”€ Assert:
â”‚   â””â”€â”€ All keys return valid ThemeColor (not fallback)
â””â”€â”€ Expected: No missing colors
```

### 13.4 IThemeService Tests

```
Test: GetHealthColor_ReturnsCorrectColorForThreshold
â”œâ”€â”€ Description: Verify health color thresholds work correctly
â”œâ”€â”€ Arrange:
â”‚   â””â”€â”€ themeService = new TuiThemeAdapter(...)
â”œâ”€â”€ Act:
â”‚   â”œâ”€â”€ fullHealth = themeService.GetHealthColor(0.80)
â”‚   â”œâ”€â”€ goodHealth = themeService.GetHealthColor(0.60)
â”‚   â”œâ”€â”€ lowHealth = themeService.GetHealthColor(0.40)
â”‚   â””â”€â”€ criticalHealth = themeService.GetHealthColor(0.10)
â”œâ”€â”€ Assert:
â”‚   â”œâ”€â”€ fullHealth matches ColorKey.HealthFull
â”‚   â”œâ”€â”€ goodHealth matches ColorKey.HealthGood
â”‚   â”œâ”€â”€ lowHealth matches ColorKey.HealthLow
â”‚   â””â”€â”€ criticalHealth matches ColorKey.HealthCritical
â””â”€â”€ Expected: Correct colors for each threshold

Test: GetResourceColor_ReturnsCorrectColorForType
â”œâ”€â”€ Description: Verify resource colors map correctly
â”œâ”€â”€ Arrange:
â”‚   â””â”€â”€ themeService = new TuiThemeAdapter(...)
â”œâ”€â”€ Act:
â”‚   â””â”€â”€ manaColor = themeService.GetResourceColor(ResourceType.Mana)
â”œâ”€â”€ Assert:
â”‚   â””â”€â”€ manaColor.Hex == "#4169E1" (Royal Blue)
â””â”€â”€ Expected: Mana returns blue color
```

### 13.5 TuiThemeAdapter Tests

```
Test: ToConsoleColor_MapsToNearestColor
â”œâ”€â”€ Description: Verify RGB to ConsoleColor mapping
â”œâ”€â”€ Arrange:
â”‚   â””â”€â”€ adapter = new TuiThemeAdapter(...)
â”œâ”€â”€ Act:
â”‚   â”œâ”€â”€ green = adapter.ToConsoleColor(ThemeColor.FromHex("#32CD32"))
â”‚   â”œâ”€â”€ red = adapter.ToConsoleColor(ThemeColor.FromHex("#DC143C"))
â”‚   â””â”€â”€ blue = adapter.ToConsoleColor(ThemeColor.FromHex("#4169E1"))
â”œâ”€â”€ Assert:
â”‚   â”œâ”€â”€ green == ConsoleColor.Green
â”‚   â”œâ”€â”€ red == ConsoleColor.DarkRed
â”‚   â””â”€â”€ blue == ConsoleColor.Blue
â””â”€â”€ Expected: Correct nearest ConsoleColor mapping
```

### 13.6 GuiThemeAdapter Tests

```
Test: GetCachedBrush_ReturnsSameBrushInstance
â”œâ”€â”€ Description: Verify brush caching works correctly
â”œâ”€â”€ Arrange:
â”‚   â””â”€â”€ adapter = new GuiThemeAdapter(...)
â”œâ”€â”€ Act:
â”‚   â”œâ”€â”€ brush1 = adapter.GetCachedBrush(ColorKey.Player)
â”‚   â””â”€â”€ brush2 = adapter.GetCachedBrush(ColorKey.Player)
â”œâ”€â”€ Assert:
â”‚   â””â”€â”€ ReferenceEquals(brush1, brush2)
â””â”€â”€ Expected: Same instance returned from cache
```

---

## 14. Use Cases

### 14.1 Developer Adding New UI Component

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USE CASE: Developer Adding New UI Component                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Scenario: Developer needs to add a mana bar display                        â”‚
â”‚                                                                              â”‚
â”‚  Steps:                                                                      â”‚
â”‚  1. Inject IThemeService in constructor                                     â”‚
â”‚  2. Use _themeService.GetResourceColor(ResourceType.Mana) for bar color     â”‚
â”‚  3. For TUI, use TuiThemeAdapter.ToConsoleColor() for console output        â”‚
â”‚  4. For GUI, use GuiThemeAdapter.ToBrush() for Avalonia brush               â”‚
â”‚                                                                              â”‚
â”‚  Code Example (TUI):                                                        â”‚
â”‚                                                                              â”‚
â”‚  public class ManaBarDisplay                                                 â”‚
â”‚  {                                                                           â”‚
â”‚      private readonly IThemeService _theme;                                 â”‚
â”‚      private readonly TuiThemeAdapter _adapter;                             â”‚
â”‚                                                                              â”‚
â”‚      public void Render(int current, int max)                               â”‚
â”‚      {                                                                       â”‚
â”‚          var manaColor = _theme.GetResourceColor(ResourceType.Mana);        â”‚
â”‚          var consoleColor = _adapter.ToConsoleColor(manaColor);             â”‚
â”‚          // Render with consoleColor                                        â”‚
â”‚      }                                                                       â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â”‚  Result: Consistent mana color across all displays                          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 14.2 Modifying Theme Colors

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USE CASE: Designer Modifying Theme Colors                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Scenario: Designer wants to change health bar colors                       â”‚
â”‚                                                                              â”‚
â”‚  Before v0.13.5b:                                                            â”‚
â”‚  - Modify HealthBarConfig.cs (TUI)                                          â”‚
â”‚  - Modify HealthBarControl.xaml.cs (GUI)                                    â”‚
â”‚  - Modify BossHealthBar.cs (separate colors)                                â”‚
â”‚  - Search for other hardcoded health colors                                 â”‚
â”‚  - Risk of missing some occurrences                                         â”‚
â”‚                                                                              â”‚
â”‚  After v0.13.5b:                                                             â”‚
â”‚  - Modify ColorPalette.CreateDefault() once                                 â”‚
â”‚  - All components automatically use new colors                              â”‚
â”‚  - No risk of inconsistency                                                 â”‚
â”‚                                                                              â”‚
â”‚  Change Location:                                                            â”‚
â”‚  Presentation.Shared/ValueObjects/ColorPalette.cs                           â”‚
â”‚                                                                              â”‚
â”‚  // Change this:                                                             â”‚
â”‚  [ColorKey.HealthFull] = FromHex("#228B22", "Forest Green"),                â”‚
â”‚  // To this:                                                                 â”‚
â”‚  [ColorKey.HealthFull] = FromHex("#00FF00", "Bright Green"),                â”‚
â”‚                                                                              â”‚
â”‚  Result: All health bars across TUI and GUI update automatically            â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 14.3 Adding Color Blind Support (Future v0.13.5f)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USE CASE: Adding Color Blind Mode (Foundation for v0.13.5f)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Scenario: User enables color blind mode                                    â”‚
â”‚                                                                              â”‚
â”‚  With IThemeService:                                                        â”‚
â”‚  1. User sets themeService.ColorBlindMode = ColorBlindMode.Protanopia       â”‚
â”‚  2. IThemeService.GetColor() automatically applies color adjustment         â”‚
â”‚  3. All components receive adjusted colors without code changes             â”‚
â”‚                                                                              â”‚
â”‚  Implementation in adapter:                                                  â”‚
â”‚                                                                              â”‚
â”‚  private ThemeColor ApplyColorBlindAdjustment(ThemeColor color)             â”‚
â”‚  {                                                                           â”‚
â”‚      if (ColorBlindMode == ColorBlindMode.None)                             â”‚
â”‚          return color;                                                       â”‚
â”‚                                                                              â”‚
â”‚      return ColorBlindMode switch                                           â”‚
â”‚      {                                                                       â”‚
â”‚          Protanopia => ShiftRedToBlue(color),                               â”‚
â”‚          Deuteranopia => ShiftGreenToYellow(color),                         â”‚
â”‚          Tritanopia => ShiftBlueToCyan(color),                              â”‚
â”‚          _ => color                                                          â”‚
â”‚      };                                                                      â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â”‚  Result: Single point of color adjustment for accessibility                 â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 15. Deliverable Checklist

### 15.1 Interfaces

- [ ] `IThemeService` interface in `Presentation.Shared/Services/`

### 15.2 Services

- [ ] `TuiThemeAdapter` in `Presentation.Tui/Services/`
- [ ] `GuiThemeAdapter` in `Presentation.Gui/Services/`

### 15.3 Value Objects

- [ ] `ThemeColor` in `Presentation.Shared/ValueObjects/`
- [ ] `ThemeDefinition` in `Presentation.Shared/ValueObjects/`
- [ ] `ColorPalette` in `Presentation.Shared/ValueObjects/`
- [ ] `IconSet` in `Presentation.Shared/ValueObjects/`
- [ ] `AnimationTimings` in `Presentation.Shared/ValueObjects/`

### 15.4 Enums

- [ ] `ColorKey` in `Presentation.Shared/Enums/`
- [ ] `IconKey` in `Presentation.Shared/Enums/`
- [ ] `AnimationKey` in `Presentation.Shared/Enums/`

### 15.5 Configuration

- [ ] `ThemeConfiguration` in `Presentation.Shared/Configuration/`

### 15.6 Migrated Components

- [ ] `HealthBarDisplay` migrated to use `IThemeService`
- [ ] `ResourceBarDisplay` migrated to use `IThemeService`
- [ ] `CombatGridPanel` migrated to use `IThemeService`
- [ ] `SpectreGameRenderer` migrated to use `IThemeService`
- [ ] `ColoredTextRenderer` migrated to use `IThemeService`
- [ ] `HealthBarControl` migrated to use theme bindings
- [ ] `GridCellControl` migrated to use theme bindings
- [ ] `EntityTokenControl` migrated to use theme bindings
- [ ] `DamagePopupControl` migrated to use theme bindings
- [ ] `MessageTypeToColorConverter` migrated to use `IThemeService`

### 15.7 Deprecated/Removed

- [ ] `HealthBarConfig` marked as deprecated (functionality moved to IThemeService)

### 15.8 Unit Tests

- [ ] `ThemeColorTests.cs` created (~2 tests)
- [ ] `ColorPaletteTests.cs` created (~2 tests)
- [ ] `ThemeServiceTests.cs` created (~2 tests)
- [ ] `TuiThemeAdapterTests.cs` created (~1 test)
- [ ] `GuiThemeAdapterTests.cs` created (~1 test)

---

## 16. Acceptance Criteria

### 16.1 Functional Requirements

- [ ] `IThemeService` interface defined in `Presentation.Shared`
- [ ] `TuiThemeAdapter` implements `IThemeService` for console output
- [ ] `GuiThemeAdapter` implements `IThemeService` for Avalonia output
- [ ] All hardcoded colors migrated to theme service
- [ ] `HealthBarConfig` functionality consolidated into theme service
- [ ] `ResourceBarDisplay` uses theme service for colors
- [ ] `CombatGridPanel` uses theme service for terrain colors
- [ ] `SpectreGameRenderer` uses theme service for all colors
- [ ] `HealthBarControl` uses theme bindings
- [ ] `GridCellControl` uses theme bindings
- [ ] `EntityTokenControl` uses consistent colors from theme

### 16.2 Non-Functional Requirements

- [ ] Colors consistent between TUI and GUI for same semantic meaning
- [ ] No hardcoded color values remain in migrated components
- [ ] Color blind mode property available (implementation in v0.13.5f)
- [ ] Brush caching in GUI adapter for performance

### 16.3 Testing Requirements

- [ ] ~8 unit tests pass
- [ ] All existing tests still pass after migration
- [ ] No visual regressions in component appearance

---

## 17. Future Considerations

### 17.1 Relationship to v0.13.5f (Accessibility)

| Future Feature | Foundation in v0.13.5b |
|----------------|------------------------|
| Color blind modes | `ColorBlindMode` property on `IThemeService` |
| Color adjustments | `ApplyColorBlindAdjustment()` method stub |
| High contrast mode | Can extend theme with alternative palette |

### 17.2 Potential Extensions

| Extension | Version | Notes |
|-----------|---------|-------|
| Theme switching | Future | Multiple `ThemeDefinition` instances |
| User custom themes | Future | Theme loading from JSON |
| Dark/Light mode | Future | Alternative color palettes |
| Theme persistence | Future | Save user theme preferences |

### 17.3 Out of Scope for v0.13.5b

| Item | Reason | Future Version |
|------|--------|----------------|
| Color blind mode implementation | Accessibility feature | v0.13.5f |
| Multiple themes | Beyond consolidation scope | Future |
| Theme JSON loading | Configuration enhancement | Future |

---

## 18. Implementation Notes

### 18.1 Implementation Order

1. **Create enums first** - `ColorKey`, `IconKey`, `AnimationKey`
2. **Create value objects** - `ThemeColor`, `ColorPalette`, `IconSet`, `AnimationTimings`, `ThemeDefinition`
3. **Create interface** - `IThemeService`
4. **Create TUI adapter** - `TuiThemeAdapter` with all conversions
5. **Create GUI adapter** - `GuiThemeAdapter` with brush caching
6. **Migrate TUI components** - One at a time, test after each
7. **Migrate GUI components** - One at a time, test after each
8. **Remove deprecated config** - `HealthBarConfig` after all migrations

### 18.2 Migration Strategy

- Migrate one component at a time
- Run full test suite after each migration
- Visually verify no color changes (should be identical)
- Keep `HealthBarConfig` until all dependents migrated

### 18.3 Common Pitfalls

| Pitfall | Mitigation |
|---------|------------|
| Missing color in palette | Use fallback color (magenta) for visibility |
| ConsoleColor mapping inaccurate | Test all colors visually in console |
| Brush cache not cleared on theme change | Call `ClearBrushCache()` in setter |
| Inconsistent threshold logic | Centralize in one `GetHealthColor()` implementation |

### 18.4 Verification Steps

1. **Build verification** - Full solution build after all migrations
2. **Test execution** - Run all unit tests
3. **Visual verification** - Check each component displays correctly
4. **Color consistency** - Compare TUI and GUI colors for same semantic values

---

## 19. Document Metadata

### 19.1 Change Log

| Version | Date | Author | Changes |
|---------|------|--------|---------|
| 1.0 | 2026-01-16 | Claude | Initial design specification |

### 19.2 References

| Document | Location | Relationship |
|----------|----------|--------------|
| v0.13.5-scope-breakdown.md | `docs/design/v0.13.x/` | Parent scope document |
| v0.13.5a-design-specification.md | `docs/design/v0.13.x/` | Prerequisite (Naming Convention Alignment) |
| v0.13.x-scope-breakdown.md | `docs/design/v0.13.x/` | Version series overview |
| design-specification-template.md | `docs/templates/` | Template reference |

### 19.3 Approvals

| Role | Name | Date | Status |
|------|------|------|--------|
| Author | Claude | 2026-01-16 | Complete |
| Reviewer | | | Pending |
| Approver | | | Pending |

---

*This design specification provides a comprehensive guide for implementing v0.13.5b Theme Consolidation. By creating a shared `IThemeService` interface with TUI and GUI adapters, this version eliminates hardcoded colors, consolidates duplicated color definitions, and establishes the foundation for accessibility features in v0.13.5f. The centralized theme system ensures consistent styling across all presentation layer components.*
