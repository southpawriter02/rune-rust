# v0.16.1b Design Specification: Weapon Category System

**Version:** 0.16.1b  
**Phase Name:** Weapon Category System  
**Parent Version:** v0.16.1 (Weapon Proficiency System)  
**Prerequisites:** v0.16.1a Complete (Proficiency Level Enum)  
**Estimated Tests:** ~2 unit tests

---

## Table of Contents

1. [Executive Summary](#1-executive-summary)
2. [Feature Overview](#2-feature-overview)
3. [Architecture Diagrams](#3-architecture-diagrams)
4. [WeaponCategory Enum](#4-weaponcategory-enum)
5. [WeaponCategoryDefinition Value Object](#5-weaponcategorydefinition-value-object)
6. [IWeaponCategoryProvider Interface](#6-iweaponcategoryprovider-interface)
7. [Data Model Changes](#7-data-model-changes)
8. [Configuration File Schemas](#8-configuration-file-schemas)
9. [Logging Specifications](#9-logging-specifications)
10. [Unit Testing Requirements](#10-unit-testing-requirements)
11. [Use Cases](#11-use-cases)
12. [Deliverable Checklist](#12-deliverable-checklist)
13. [Acceptance Criteria](#13-acceptance-criteria)
14. [Dependencies](#14-dependencies)
15. [Future Considerations](#15-future-considerations)

---

## 1. Executive Summary

### 1.1 Purpose

This specification defines the weapon category enumeration and associated metadata. Weapon categories group similar weapons for proficiency purposes, enabling the archetype-based proficiency system defined in v0.16.1c.

The 11 weapon categories are:

- **Melee (Strength-based):** Axes, Swords, Hammers, Polearms
- **Melee (Finesse-based):** Daggers
- **Ranged (Physical):** Bows, Crossbows, Firearms
- **Defensive:** Shields
- **Magical:** Staves, ArcaneImplements

Each category has a primary attribute (MIGHT, FINESSE, WILL, or WITS) and optional special training requirements.

### 1.2 Key Deliverables

| Category          | Items                                                     |
| ----------------- | --------------------------------------------------------- |
| **Enums**         | `WeaponCategory`                                          |
| **Value Objects** | `WeaponCategoryDefinition`                                |
| **Interfaces**    | `IWeaponCategoryProvider`                                 |
| **Configuration** | `weapon-categories.json`, `weapon-categories.schema.json` |
| **Tests**         | ~2 unit tests                                             |

### 1.3 Architectural Significance

This version establishes the **Weapon Classification Pattern**:

- **Enum-Based Category Identification**: Weapons reference a `WeaponCategory` value
- **Attribute Linkage**: Each category maps to a primary attribute for attack/damage calculations
- **Special Training Flags**: Some categories (e.g., Firearms) require special training beyond archetype defaults
- **Provider Pattern**: `IWeaponCategoryProvider` centralizes category metadata access

---

## 2. Feature Overview

```
v0.16.1b Weapon Category System
├── WeaponCategory Enum (11 categories)
│   ├── Axes — MIGHT-based heavy melee
│   ├── Swords — MIGHT-based versatile melee
│   ├── Hammers — MIGHT-based blunt melee
│   ├── Daggers — FINESSE-based light melee
│   ├── Polearms — MIGHT-based reach melee
│   ├── Staves — WILL-based arcane melee
│   ├── Bows — FINESSE-based ranged
│   ├── Crossbows — WITS-based mechanical ranged
│   ├── Shields — MIGHT-based defensive
│   ├── Firearms — WITS-based, requires special training
│   └── ArcaneImplements — WILL-based spellcasting focus
├── WeaponCategoryDefinition Value Object
│   ├── Category: WeaponCategory
│   ├── DisplayName: string
│   ├── Description: string
│   ├── ExampleWeapons: IReadOnlyList<string>
│   ├── PrimaryAttribute: AttributeType
│   └── RequiresSpecialTraining: bool
└── IWeaponCategoryProvider Interface
    ├── GetDefinition(category): WeaponCategoryDefinition
    ├── GetAllDefinitions(): IReadOnlyList<WeaponCategoryDefinition>
    ├── GetCategoriesByAttribute(attr): IReadOnlyList<WeaponCategory>
    └── RequiresSpecialTraining(category): bool
```

### 2.1 Scope Alignment

**In Scope:**

- `WeaponCategory` enum with 11 categories
- `WeaponCategoryDefinition` value object with metadata
- `IWeaponCategoryProvider` interface for category data access
- `weapon-categories.json` configuration file
- `weapon-categories.schema.json` validation schema
- Primary attribute mapping (MIGHT, FINESSE, WILL, WITS)

**Out of Scope:**

- Archetype proficiency matrix (v0.16.1c)
- Character proficiency tracking (v0.16.1d)
- Proficiency acquisition methods (v0.16.1e)
- Combat integration (v0.16.1f)

---

## 3. Architecture Diagrams

### 3.1 Weapon Category System Overview

```
┌─────────────────────────────────────────────────────────────────────┐
│                 WEAPON CATEGORY SYSTEM OVERVIEW                      │
└─────────────────────────────────────────────────────────────────────┘

    Weapon Entity
         │
         │  Has category assignment
         ▼
┌─────────────────────────────────────────────────────────────────────┐
│                      WeaponCategory Enum                             │
├─────────────────────────────────────────────────────────────────────┤
│ Axes │ Swords │ Hammers │ Daggers │ Polearms │ Staves │ Bows │ ... │
└─────────────────────────────────────────────────────────────────────┘
         │
         │  Get category metadata
         ▼
┌─────────────────────────────────────────────────────────────────────┐
│                   IWeaponCategoryProvider                            │
├─────────────────────────────────────────────────────────────────────┤
│  + GetDefinition(category): WeaponCategoryDefinition                │
│  + GetAllDefinitions(): IReadOnlyList<WeaponCategoryDefinition>     │
│  + GetCategoriesByAttribute(attr): IReadOnlyList<WeaponCategory>    │
│  + RequiresSpecialTraining(category): bool                          │
└─────────────────────────────────────────────────────────────────────┘
         │
         │  Returns category data
         ▼
┌─────────────────────────────────────────────────────────────────────┐
│                   WeaponCategoryDefinition                           │
├─────────────────────────────────────────────────────────────────────┤
│  Category: WeaponCategory                                            │
│  DisplayName: string           (e.g., "Swords")                      │
│  Description: string           (e.g., "Versatile bladed weapons...")│
│  ExampleWeapons: List<string>  (e.g., ["Longsword", "Shortsword"])  │
│  PrimaryAttribute: AttributeType (e.g., MIGHT)                       │
│  RequiresSpecialTraining: bool (e.g., false)                         │
└─────────────────────────────────────────────────────────────────────┘
```

### 3.2 Category-to-Attribute Mapping

```
┌─────────────────────────────────────────────────────────────────────┐
│                  PRIMARY ATTRIBUTE MAPPING                           │
└─────────────────────────────────────────────────────────────────────┘

    ┌───────────────────────────────────────────────────────────────┐
    │                         MIGHT                                  │
    │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐  │
    │  │  Axes   │ │ Swords  │ │ Hammers │ │Polearms │ │ Shields │  │
    │  └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘  │
    └───────────────────────────────────────────────────────────────┘

    ┌───────────────────────────────────────────────────────────────┐
    │                        FINESSE                                 │
    │  ┌─────────┐ ┌─────────┐                                       │
    │  │ Daggers │ │  Bows   │                                       │
    │  └─────────┘ └─────────┘                                       │
    └───────────────────────────────────────────────────────────────┘

    ┌───────────────────────────────────────────────────────────────┐
    │                          WILL                                  │
    │  ┌─────────┐ ┌─────────────────┐                               │
    │  │ Staves  │ │ArcaneImplements │                               │
    │  └─────────┘ └─────────────────┘                               │
    └───────────────────────────────────────────────────────────────┘

    ┌───────────────────────────────────────────────────────────────┐
    │                          WITS                                  │
    │  ┌──────────┐ ┌──────────┐                                     │
    │  │Crossbows │ │ Firearms │ ← Requires Special Training         │
    │  └──────────┘ └──────────┘                                     │
    └───────────────────────────────────────────────────────────────┘
```

### 3.3 Layer Diagram

```
┌─────────────────────────────────────────────────────────────────────┐
│                        PRESENTATION LAYER                            │
├─────────────────────────────────────────────────────────────────────┤
│  WeaponTooltip                                                       │
│  └── Shows weapon category with icon and attribute                  │
│                                                                      │
│  CharacterSheet                                                      │
│  └── Groups proficiencies by weapon category                        │
│                                                                      │
│  EquipmentView                                                       │
│  └── Displays category-based restrictions                           │
└───────┬─────────────────────────────────────────────────────────────┘
        │
        ▼
┌─────────────────────────────────────────────────────────────────────┐
│                       APPLICATION LAYER                              │
├─────────────────────────────────────────────────────────────────────┤
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │              WeaponCategoryProvider                            │  │
│  │          (implements IWeaponCategoryProvider)                  │  │
│  ├───────────────────────────────────────────────────────────────┤  │
│  │  + GetDefinition(category): WeaponCategoryDefinition          │  │
│  │  + GetAllDefinitions(): IReadOnlyList                         │  │
│  │  + GetCategoriesByAttribute(attr): IReadOnlyList<Category>    │  │
│  │  + RequiresSpecialTraining(category): bool                    │  │
│  │                                                               │  │
│  │  - LoadConfiguration(): void (from JSON)                      │  │
│  │  - _definitions: Dictionary<WeaponCategory, Definition>       │  │
│  └───────────────────────────────────────────────────────────────┘  │
└───────┬─────────────────────────────────────────────────────────────┘
        │
        ▼
┌─────────────────────────────────────────────────────────────────────┐
│                         DOMAIN LAYER                                 │
├─────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────┐  ┌────────────────────────────────┐   │
│  │    WeaponCategory       │  │  WeaponCategoryDefinition      │   │
│  │        (Enum)           │  │       (Value Object)           │   │
│  ├─────────────────────────┤  ├────────────────────────────────┤   │
│  │ Axes = 0                │  │ Category: WeaponCategory       │   │
│  │ Swords = 1              │  │ DisplayName: string            │   │
│  │ Hammers = 2             │  │ Description: string            │   │
│  │ Daggers = 3             │  │ ExampleWeapons: List<string>   │   │
│  │ Polearms = 4            │  │ PrimaryAttribute: AttributeType│   │
│  │ Staves = 5              │  │ RequiresSpecialTraining: bool  │   │
│  │ Bows = 6                │  └────────────────────────────────┘   │
│  │ Crossbows = 7           │                                        │
│  │ Shields = 8             │                                        │
│  │ Firearms = 9            │                                        │
│  │ ArcaneImplements = 10   │                                        │
│  └─────────────────────────┘                                        │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 4. WeaponCategory Enum

### 4.1 Purpose

The `WeaponCategory` enum classifies weapons into 11 distinct categories for proficiency tracking. This enables archetype-based proficiency without tracking individual weapon types.

### 4.2 Implementation

**File:** `src/Core/RuneAndRust.Domain/Enums/WeaponCategory.cs`

```csharp
namespace RuneAndRust.Domain.Enums;

/// <summary>
/// Classifies weapons into categories for proficiency tracking.
/// </summary>
/// <remarks>
/// <para>
/// Weapon categories group similar weapons together, allowing the
/// proficiency system to track category-level competency rather than
/// individual weapon types.
/// </para>
/// <para>
/// Each category has an associated primary attribute (MIGHT, FINESSE,
/// WILL, or WITS) that affects attack and damage calculations.
/// </para>
/// <para>
/// Values are explicitly assigned (0-10) for stable serialization.
/// </para>
/// </remarks>
public enum WeaponCategory
{
    /// <summary>
    /// Heavy chopping weapons including battleaxes and handaxes.
    /// </summary>
    /// <remarks>Primary attribute: MIGHT. High damage, moderate speed.</remarks>
    Axes = 0,

    /// <summary>
    /// Versatile bladed weapons including longswords and shortswords.
    /// </summary>
    /// <remarks>Primary attribute: MIGHT. Balanced damage and speed.</remarks>
    Swords = 1,

    /// <summary>
    /// Blunt impact weapons including warhammers and maces.
    /// </summary>
    /// <remarks>Primary attribute: MIGHT. High damage vs. armored targets.</remarks>
    Hammers = 2,

    /// <summary>
    /// Light, precise bladed weapons including daggers and stilettos.
    /// </summary>
    /// <remarks>Primary attribute: FINESSE. Fast attacks, critical bonuses.</remarks>
    Daggers = 3,

    /// <summary>
    /// Long-hafted weapons including spears, halberds, and glaives.
    /// </summary>
    /// <remarks>Primary attribute: MIGHT. Reach advantage in combat.</remarks>
    Polearms = 4,

    /// <summary>
    /// Two-handed arcane implements used for both melee and magic.
    /// </summary>
    /// <remarks>Primary attribute: WILL. Enhances spellcasting.</remarks>
    Staves = 5,

    /// <summary>
    /// Drawn ranged weapons including longbows and shortbows.
    /// </summary>
    /// <remarks>Primary attribute: FINESSE. Long range, requires arrows.</remarks>
    Bows = 6,

    /// <summary>
    /// Mechanical ranged weapons including light and heavy crossbows.
    /// </summary>
    /// <remarks>Primary attribute: WITS. High damage, slower reload.</remarks>
    Crossbows = 7,

    /// <summary>
    /// Defensive equipment used for blocking and shield-bashing.
    /// </summary>
    /// <remarks>Primary attribute: MIGHT. Provides defense bonuses.</remarks>
    Shields = 8,

    /// <summary>
    /// Gunpowder-based ranged weapons including pistols and muskets.
    /// </summary>
    /// <remarks>
    /// Primary attribute: WITS. Requires special training beyond
    /// standard archetype proficiencies.
    /// </remarks>
    Firearms = 9,

    /// <summary>
    /// Magical foci including wands, orbs, and tomes.
    /// </summary>
    /// <remarks>Primary attribute: WILL. Enhances spell power.</remarks>
    ArcaneImplements = 10
}
```

### 4.3 Category Reference Table

| Enum Value         | Int | Primary Attr | Special Training | Example Weapons                |
| ------------------ | --- | ------------ | ---------------- | ------------------------------ |
| `Axes`             | 0   | MIGHT        | No               | Battleaxe, Handaxe             |
| `Swords`           | 1   | MIGHT        | No               | Longsword, Shortsword          |
| `Hammers`          | 2   | MIGHT        | No               | Warhammer, Mace                |
| `Daggers`          | 3   | FINESSE      | No               | Dagger, Stiletto               |
| `Polearms`         | 4   | MIGHT        | No               | Spear, Halberd, Glaive         |
| `Staves`           | 5   | WILL         | No               | Quarterstaff, Arcane Staff     |
| `Bows`             | 6   | FINESSE      | No               | Longbow, Shortbow              |
| `Crossbows`        | 7   | WITS         | No               | Light Crossbow, Heavy Crossbow |
| `Shields`          | 8   | MIGHT        | No               | Buckler, Tower Shield          |
| `Firearms`         | 9   | WITS         | **Yes**          | Pistol, Musket                 |
| `ArcaneImplements` | 10  | WILL         | No               | Wand, Orb, Tome                |

---

## 5. WeaponCategoryDefinition Value Object

### 5.1 Purpose

The `WeaponCategoryDefinition` value object contains all metadata for a weapon category. This includes display information, example weapons, attribute mapping, and training requirements.

### 5.2 Implementation

**File:** `src/Core/RuneAndRust.Domain/ValueObjects/WeaponCategoryDefinition.cs`

```csharp
namespace RuneAndRust.Domain.ValueObjects;

using RuneAndRust.Domain.Enums;

/// <summary>
/// Contains metadata for a weapon category.
/// </summary>
/// <remarks>
/// <para>
/// WeaponCategoryDefinition is loaded from configuration and provides
/// all display and gameplay information for a weapon category.
/// </para>
/// </remarks>
/// <param name="Category">The weapon category this definition describes.</param>
/// <param name="DisplayName">Human-readable category name.</param>
/// <param name="Description">Flavor text describing the category.</param>
/// <param name="ExampleWeapons">List of example weapon names.</param>
/// <param name="PrimaryAttribute">The attribute used for attack/damage.</param>
/// <param name="RequiresSpecialTraining">Whether extra training is needed.</param>
public readonly record struct WeaponCategoryDefinition(
    WeaponCategory Category,
    string DisplayName,
    string Description,
    IReadOnlyList<string> ExampleWeapons,
    AttributeType PrimaryAttribute,
    bool RequiresSpecialTraining)
{
    /// <summary>
    /// Gets the category as an integer value.
    /// </summary>
    public int CategoryValue => (int)Category;

    /// <summary>
    /// Gets whether this is a magical weapon category.
    /// </summary>
    public bool IsMagical => PrimaryAttribute == AttributeType.Will;

    /// <summary>
    /// Gets whether this is a ranged weapon category.
    /// </summary>
    public bool IsRanged => Category is WeaponCategory.Bows
        or WeaponCategory.Crossbows
        or WeaponCategory.Firearms;

    /// <summary>
    /// Gets whether this is a melee weapon category.
    /// </summary>
    public bool IsMelee => !IsRanged && Category != WeaponCategory.ArcaneImplements;

    /// <summary>
    /// Gets whether this category uses MIGHT for attacks.
    /// </summary>
    public bool UsesMight => PrimaryAttribute == AttributeType.Might;

    /// <summary>
    /// Gets whether this category uses FINESSE for attacks.
    /// </summary>
    public bool UsesFinesse => PrimaryAttribute == AttributeType.Finesse;

    /// <summary>
    /// Creates a new WeaponCategoryDefinition with validation.
    /// </summary>
    public static WeaponCategoryDefinition Create(
        WeaponCategory category,
        string displayName,
        string description,
        IReadOnlyList<string> exampleWeapons,
        AttributeType primaryAttribute,
        bool requiresSpecialTraining)
    {
        ArgumentException.ThrowIfNullOrWhiteSpace(displayName);
        ArgumentException.ThrowIfNullOrWhiteSpace(description);
        ArgumentNullException.ThrowIfNull(exampleWeapons);

        return new WeaponCategoryDefinition(
            category,
            displayName,
            description,
            exampleWeapons,
            primaryAttribute,
            requiresSpecialTraining);
    }

    /// <summary>
    /// Formats example weapons as a comma-separated string.
    /// </summary>
    public string FormatExamples() => string.Join(", ", ExampleWeapons);

    /// <summary>
    /// Creates a display string for debug/logging purposes.
    /// </summary>
    public override string ToString() =>
        $"{DisplayName} ({PrimaryAttribute})" +
        (RequiresSpecialTraining ? " [Special Training]" : "");
}
```

---

## 6. IWeaponCategoryProvider Interface

### 6.1 Purpose

The `IWeaponCategoryProvider` interface abstracts access to weapon category metadata, enabling configuration-driven category definitions.

### 6.2 Implementation

**File:** `src/Core/RuneAndRust.Application/Interfaces/IWeaponCategoryProvider.cs`

```csharp
namespace RuneAndRust.Application.Interfaces;

using RuneAndRust.Domain.Enums;
using RuneAndRust.Domain.ValueObjects;

/// <summary>
/// Provides access to weapon category metadata.
/// </summary>
public interface IWeaponCategoryProvider
{
    /// <summary>
    /// Gets the definition for a specific weapon category.
    /// </summary>
    /// <param name="category">The weapon category.</param>
    /// <returns>The category definition.</returns>
    WeaponCategoryDefinition GetDefinition(WeaponCategory category);

    /// <summary>
    /// Gets definitions for all weapon categories.
    /// </summary>
    /// <returns>All category definitions ordered by enum value.</returns>
    IReadOnlyList<WeaponCategoryDefinition> GetAllDefinitions();

    /// <summary>
    /// Gets all categories that use a specific primary attribute.
    /// </summary>
    /// <param name="attribute">The primary attribute.</param>
    /// <returns>Categories using that attribute.</returns>
    IReadOnlyList<WeaponCategory> GetCategoriesByAttribute(AttributeType attribute);

    /// <summary>
    /// Gets the primary attribute for a category.
    /// </summary>
    /// <param name="category">The weapon category.</param>
    /// <returns>The primary attribute.</returns>
    AttributeType GetPrimaryAttribute(WeaponCategory category);

    /// <summary>
    /// Checks if a category requires special training.
    /// </summary>
    /// <param name="category">The weapon category.</param>
    /// <returns>True if special training is required.</returns>
    bool RequiresSpecialTraining(WeaponCategory category);

    /// <summary>
    /// Gets the display name for a category.
    /// </summary>
    /// <param name="category">The weapon category.</param>
    /// <returns>The localized display name.</returns>
    string GetDisplayName(WeaponCategory category);

    /// <summary>
    /// Validates that all categories have definitions.
    /// </summary>
    /// <returns>True if all categories are configured.</returns>
    bool ValidateConfiguration();
}
```

---

## 7. Data Model Changes

### 7.1 New Types Summary

| Type                       | Layer       | Category     | Description               |
| -------------------------- | ----------- | ------------ | ------------------------- |
| `WeaponCategory`           | Domain      | Enum         | 11 weapon classifications |
| `WeaponCategoryDefinition` | Domain      | Value Object | Category metadata         |
| `IWeaponCategoryProvider`  | Application | Interface    | Category data access      |

### 7.2 File Locations

```
src/Core/RuneAndRust.Domain/
├── Enums/
│   └── WeaponCategory.cs                ← NEW
└── ValueObjects/
    └── WeaponCategoryDefinition.cs      ← NEW

src/Core/RuneAndRust.Application/
└── Interfaces/
    └── IWeaponCategoryProvider.cs       ← NEW

config/
├── weapon-categories.json               ← NEW
└── schemas/
    └── weapon-categories.schema.json    ← NEW
```

---

## 8. Configuration File Schemas

### 8.1 weapon-categories.json

**File:** `config/weapon-categories.json`

```json
{
    "$schema": "./schemas/weapon-categories.schema.json",
    "categories": [
        {
            "category": "Axes",
            "categoryValue": 0,
            "displayName": "Axes",
            "description": "Heavy chopping weapons favored by warriors for their devastating strikes.",
            "exampleWeapons": [
                "Battleaxe",
                "Handaxe",
                "Greataxe",
                "Throwing Axe"
            ],
            "primaryAttribute": "Might",
            "requiresSpecialTraining": false
        },
        {
            "category": "Swords",
            "categoryValue": 1,
            "displayName": "Swords",
            "description": "Versatile bladed weapons balanced for both offense and defense.",
            "exampleWeapons": [
                "Longsword",
                "Shortsword",
                "Greatsword",
                "Rapier"
            ],
            "primaryAttribute": "Might",
            "requiresSpecialTraining": false
        },
        {
            "category": "Hammers",
            "categoryValue": 2,
            "displayName": "Hammers",
            "description": "Blunt impact weapons effective against armored foes.",
            "exampleWeapons": ["Warhammer", "Mace", "Maul", "Flail"],
            "primaryAttribute": "Might",
            "requiresSpecialTraining": false
        },
        {
            "category": "Daggers",
            "categoryValue": 3,
            "displayName": "Daggers",
            "description": "Light, precise bladed weapons ideal for swift, targeted strikes.",
            "exampleWeapons": ["Dagger", "Stiletto", "Kris", "Throwing Knife"],
            "primaryAttribute": "Finesse",
            "requiresSpecialTraining": false
        },
        {
            "category": "Polearms",
            "categoryValue": 4,
            "displayName": "Polearms",
            "description": "Long-hafted weapons providing reach advantage in combat.",
            "exampleWeapons": ["Spear", "Halberd", "Glaive", "Pike"],
            "primaryAttribute": "Might",
            "requiresSpecialTraining": false
        },
        {
            "category": "Staves",
            "categoryValue": 5,
            "displayName": "Staves",
            "description": "Two-handed implements channeling arcane energy.",
            "exampleWeapons": ["Quarterstaff", "Arcane Staff", "Runestaff"],
            "primaryAttribute": "Will",
            "requiresSpecialTraining": false
        },
        {
            "category": "Bows",
            "categoryValue": 6,
            "displayName": "Bows",
            "description": "Drawn ranged weapons requiring finesse and steady aim.",
            "exampleWeapons": [
                "Longbow",
                "Shortbow",
                "Composite Bow",
                "Recurve Bow"
            ],
            "primaryAttribute": "Finesse",
            "requiresSpecialTraining": false
        },
        {
            "category": "Crossbows",
            "categoryValue": 7,
            "displayName": "Crossbows",
            "description": "Mechanical ranged weapons with powerful bolts.",
            "exampleWeapons": [
                "Light Crossbow",
                "Heavy Crossbow",
                "Hand Crossbow"
            ],
            "primaryAttribute": "Wits",
            "requiresSpecialTraining": false
        },
        {
            "category": "Shields",
            "categoryValue": 8,
            "displayName": "Shields",
            "description": "Defensive equipment for blocking attacks and shield-bashing.",
            "exampleWeapons": [
                "Buckler",
                "Round Shield",
                "Kite Shield",
                "Tower Shield"
            ],
            "primaryAttribute": "Might",
            "requiresSpecialTraining": false
        },
        {
            "category": "Firearms",
            "categoryValue": 9,
            "displayName": "Firearms",
            "description": "Gunpowder-based ranged weapons requiring specialized training.",
            "exampleWeapons": ["Pistol", "Musket", "Blunderbuss", "Arquebus"],
            "primaryAttribute": "Wits",
            "requiresSpecialTraining": true
        },
        {
            "category": "ArcaneImplements",
            "categoryValue": 10,
            "displayName": "Arcane Implements",
            "description": "Magical foci that enhance spellcasting abilities.",
            "exampleWeapons": ["Wand", "Orb", "Tome", "Crystal Focus"],
            "primaryAttribute": "Will",
            "requiresSpecialTraining": false
        }
    ]
}
```

### 8.2 weapon-categories.schema.json

**File:** `config/schemas/weapon-categories.schema.json`

```json
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "weapon-categories.schema.json",
    "title": "Weapon Categories Configuration",
    "description": "Defines weapon category metadata",
    "type": "object",
    "required": ["categories"],
    "properties": {
        "$schema": { "type": "string" },
        "categories": {
            "type": "array",
            "minItems": 11,
            "maxItems": 11,
            "items": { "$ref": "#/$defs/categoryDefinition" }
        }
    },
    "$defs": {
        "categoryDefinition": {
            "type": "object",
            "required": [
                "category",
                "categoryValue",
                "displayName",
                "description",
                "exampleWeapons",
                "primaryAttribute",
                "requiresSpecialTraining"
            ],
            "properties": {
                "category": {
                    "type": "string",
                    "enum": [
                        "Axes",
                        "Swords",
                        "Hammers",
                        "Daggers",
                        "Polearms",
                        "Staves",
                        "Bows",
                        "Crossbows",
                        "Shields",
                        "Firearms",
                        "ArcaneImplements"
                    ]
                },
                "categoryValue": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 10
                },
                "displayName": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 50
                },
                "description": {
                    "type": "string",
                    "minLength": 10,
                    "maxLength": 500
                },
                "exampleWeapons": {
                    "type": "array",
                    "minItems": 1,
                    "items": { "type": "string" }
                },
                "primaryAttribute": {
                    "type": "string",
                    "enum": ["Might", "Finesse", "Will", "Wits"]
                },
                "requiresSpecialTraining": { "type": "boolean" }
            },
            "additionalProperties": false
        }
    }
}
```

---

## 9. Logging Specifications

### 9.1 Log Levels by Component

| Component                | Level       | Events                                     |
| ------------------------ | ----------- | ------------------------------------------ |
| `WeaponCategoryProvider` | Information | Configuration loaded, validation complete  |
| `WeaponCategoryProvider` | Debug       | Category lookup, attribute query           |
| `WeaponCategoryProvider` | Warning     | Missing category in configuration          |
| `WeaponCategoryProvider` | Error       | Configuration file not found, invalid JSON |

### 9.2 Structured Logging Templates

```csharp
// Information - Configuration loaded
_logger.LogInformation(
    "Weapon categories loaded. CategoryCount={Count}", categories.Count);

// Debug - Category retrieved
_logger.LogDebug(
    "Category retrieved. Category={Category}, Attribute={Attribute}",
    category, definition.PrimaryAttribute);

// Warning - Missing category
_logger.LogWarning(
    "Weapon category missing from configuration. Category={Category}", category);

// Error - Configuration failure
_logger.LogError(
    "Failed to load weapon categories. Path={Path}, Error={Error}",
    filePath, exception.Message);
```

---

## 10. Unit Testing Requirements

### 10.1 Test Count by Feature

| Feature                  | Test Count |
| ------------------------ | ---------- |
| WeaponCategory enum      | ~1         |
| WeaponCategoryDefinition | ~1         |
| **Total**                | **~2**     |

### 10.2 Test Specifications

**File:** `tests/RuneAndRust.Domain.UnitTests/Enums/WeaponCategoryTests.cs`

```csharp
[TestFixture]
public class WeaponCategoryTests
{
    [Test]
    public void WeaponCategory_HasExactly11Categories_CountEquals11();

    [Test]
    public void WeaponCategory_AllValuesAreSequential_ValuesRange0To10();

    [Test]
    public void WeaponCategory_CanCastToInt_ReturnsCorrectValues();
}
```

**File:** `tests/RuneAndRust.Domain.UnitTests/ValueObjects/WeaponCategoryDefinitionTests.cs`

```csharp
[TestFixture]
public class WeaponCategoryDefinitionTests
{
    [Test]
    public void Create_WithValidParameters_CreatesDefinition();

    [Test]
    public void Create_WithNullDisplayName_ThrowsArgumentException();

    [Test]
    public void IsRanged_ForBows_ReturnsTrue();

    [Test]
    public void IsRanged_ForSwords_ReturnsFalse();

    [Test]
    public void IsMagical_ForStaves_ReturnsTrue();
}
```

---

## 11. Use Cases

### UC-001: Get Weapon Category Metadata

**Actor:** Equipment Service  
**Flow:** Get weapon's category → Query provider → Return definition with attribute and examples

### UC-002: Display Category-Based Equipment Filter

**Actor:** Equipment UI  
**Flow:** Get all definitions → Group by attribute → Display filter options

### UC-003: Check Special Training Requirement

**Actor:** Proficiency Service (v0.16.1c)  
**Flow:** Get weapon category → Check RequiresSpecialTraining → Apply additional restrictions

---

## 12. Deliverable Checklist

### Domain Layer

- [ ] `WeaponCategory.cs` enum with 11 categories
- [ ] `WeaponCategoryDefinition.cs` value object
- [ ] All types have complete XML documentation

### Application Layer

- [ ] `IWeaponCategoryProvider.cs` interface

### Configuration Files

- [ ] `config/weapon-categories.json` with all 11 categories
- [ ] `config/schemas/weapon-categories.schema.json`

### Testing

- [ ] `WeaponCategoryTests.cs` created
- [ ] `WeaponCategoryDefinitionTests.cs` created
- [ ] ~2 unit tests passing

### Documentation

- [ ] `v0.16.1b-changelog.md` created

---

## 13. Acceptance Criteria

### Functional

- [ ] `WeaponCategory` enum defines exactly 11 categories (0-10)
- [ ] All 11 categories have valid definitions in configuration
- [ ] `Firearms` has `RequiresSpecialTraining = true`
- [ ] All other categories have `RequiresSpecialTraining = false`
- [ ] MIGHT categories: Axes, Swords, Hammers, Polearms, Shields
- [ ] FINESSE categories: Daggers, Bows
- [ ] WILL categories: Staves, ArcaneImplements
- [ ] WITS categories: Crossbows, Firearms
- [ ] `IWeaponCategoryProvider.GetDefinition()` returns correct data
- [ ] `IWeaponCategoryProvider.ValidateConfiguration()` returns true

### Quality

- [ ] Build succeeds with 0 errors
- [ ] Build succeeds with 0 warnings
- [ ] ~2 unit tests pass
- [ ] Configuration validates against JSON schema
- [ ] All public types have XML documentation

---

## 14. Dependencies

### Required from v0.16.1a

| Type                     | Usage                             |
| ------------------------ | --------------------------------- |
| `WeaponProficiencyLevel` | Referenced in proficiency lookups |

### Provides to v0.16.1c

| Type                      | Usage                               |
| ------------------------- | ----------------------------------- |
| `WeaponCategory`          | Archetype matrix maps to categories |
| `IWeaponCategoryProvider` | Matrix uses category metadata       |

### Provides to v0.16.1d

| Type             | Usage                                     |
| ---------------- | ----------------------------------------- |
| `WeaponCategory` | Character tracks proficiency per category |

### Provides to v0.16.1f

| Type                       | Usage                                    |
| -------------------------- | ---------------------------------------- |
| `WeaponCategory`           | Combat checks weapon category            |
| `WeaponCategoryDefinition` | Attack calculations use PrimaryAttribute |

---

## 15. Future Considerations

### Deferred to v0.16.1c

- **ArchetypeProficiencySet Entity**: Maps archetypes to category proficiencies
- **IArchetypeProficiencyProvider Interface**: Matrix data access

### Deferred to v0.16.1d

- **CharacterProficiencies Entity**: Per-character category state
- **ProficiencyProgress Value Object**: Experience tracking per category

### Out of Scope

- **Weapon Subcategories**: One-handed vs two-handed handled by weapon properties, not categories
- **Category-Specific Techniques**: Technique definitions are v0.17.x scope
- **Additional Categories**: 11 categories cover all planned weapons

---

_Document Version: 1.0_  
_Last Updated: 2026-01-27_  
_Author: AI Assistant_
