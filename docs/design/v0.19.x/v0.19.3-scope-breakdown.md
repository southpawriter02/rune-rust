# v0.19.3 Muspelheim & Niflheim Implementation - Scope Breakdown

**Version:** 0.19.3
**Theme:** Muspelheim & Niflheim (Fire & Ice Extremes)
**Prerequisites:** v0.19.2 (Svartalfheim & Helheim)
**Total Estimated Tests:** ~24 new tests

---

## Executive Summary

v0.19.3 implements the extreme temperature realms: Muspelheim (eternal fire) and Niflheim (frozen tomb). These realms are **Incompatible** and cannot neighbor directly. This version introduces IntenseHeat and ExtremeCold environmental mechanics with thermal equipment effects.

| Phase    | Name                  | Focus                                                      | Est. Tests |
| -------- | --------------------- | ---------------------------------------------------------- | ---------- |
| v0.19.3a | Muspelheim & Niflheim | Both realm definitions, thermal mechanics, incompatibility | ~24        |

---

## Feature Analysis & Categorization

| Feature                    | Complexity | Dependencies           | Assigned Phase |
| -------------------------- | ---------- | ---------------------- | -------------- |
| Muspelheim BiomeDefinition | Medium     | BiomeDefinition entity | **v0.19.3a**   |
| Niflheim BiomeDefinition   | Medium     | BiomeDefinition entity | **v0.19.3a**   |
| IntenseHeat Mechanics      | High       | EnvironmentalCondition | **v0.19.3a**   |
| ExtremeCold Mechanics      | High       | EnvironmentalCondition | **v0.19.3a**   |
| Thermal Incompatibility    | Medium     | IBiomeAdjacencyService | **v0.19.3a**   |
| Brittleness Mechanics      | Medium     | ExtremeCold            | **v0.19.3a**   |

---

## Phase Definitions

## v0.19.3a: Muspelheim & Niflheim Implementation

### Scope

**In Scope:**

- Muspelheim `BiomeDefinition` (Deck 08 â€” Power Generation)
- Niflheim `BiomeDefinition` (Deck 05 â€” Cryogenic Preservation)
- Muspelheim zones: The Hearth Perimeter, Surtr's Furnace, The Slag Fields
- Niflheim zones: The Frost Marches, Hvergelmir's Heart, The Living Glacier
- IntenseHeat environmental condition (fire damage, equipment overheating)
- ExtremeCold environmental condition (cold damage, brittleness)
- Fire/Ice adjacency incompatibility enforcement
- Fire/Bio (Muspelheim/Vanaheim) adjacency incompatibility

**Out of Scope:**

- Other realm implementations (v0.19.4+)
- Thermal equipment crafting
- Cold/Heat resistance trait integration

### Key Deliverables

| Type                     | Count | Details                            |
| ------------------------ | ----- | ---------------------------------- |
| Configuration            | 2     | muspelheim.json, niflheim.json     |
| BiomeDefinitions         | 2     | Muspelheim, Niflheim               |
| Zone Definitions         | 6     | 3 per realm                        |
| Environmental Conditions | 2     | IntenseHeat, ExtremeCold           |
| Adjacency Rules          | 2     | Fire/Ice, Fire/Bio incompatibility |
| Unit Tests               | ~24   |                                    |

### Acceptance Criteria

- [ ] Muspelheim BiomeDefinition loads with all properties
- [ ] Niflheim BiomeDefinition loads with all properties
- [ ] Surtr's Furnace zone returns IntenseHeat DC 18
- [ ] Hvergelmir's Heart zone returns ExtremeCold DC 18
- [ ] CanBiomesNeighbor(Muspelheim, Niflheim) returns false
- [ ] CanBiomesNeighbor(Muspelheim, Vanaheim) returns false
- [ ] Thermal damage applies correctly on failed checks
- [ ] ~24 unit tests pass

---

## Realm Specifications

### Muspelheim â€” Deck 08: The Eternal Meltdown

| Property           | Value                    |
| ------------------ | ------------------------ |
| Temperature        | 85Â°C (base), up to 200Â°C |
| Aetheric Intensity | 0.6                      |
| Humidity           | 5%                       |
| Light Level        | 0.9                      |
| Scale Factor       | 1.0                      |
| Corrosion Rate     | 0.3                      |
| Primary Condition  | IntenseHeat              |
| Vertical Range     | Z: -1 to +2              |

**Zones:**

- **The Hearth Perimeter** â€” Tolerable heat, IntenseHeat DC 10
- **Surtr's Furnace** â€” Reactor core, IntenseHeat DC 18, 3d6 fire
- **The Slag Fields** â€” Molten waste, IntenseHeat DC 14

### Niflheim â€” Deck 05: The Frozen Tomb

| Property           | Value                       |
| ------------------ | --------------------------- |
| Temperature        | -40Â°C (base), down to -80Â°C |
| Aetheric Intensity | 0.3                         |
| Humidity           | 15%                         |
| Light Level        | 0.5                         |
| Scale Factor       | 1.0                         |
| Corrosion Rate     | 0.0 (frozen)                |
| Primary Condition  | ExtremeCold                 |
| Vertical Range     | Z: -2 to +1                 |

**Zones:**

- **The Frost Marches** â€” Outer cold, ExtremeCold DC 10
- **Hvergelmir's Heart** â€” Deep freeze, ExtremeCold DC 18, 3d6 cold
- **The Living Glacier** â€” Moving ice, ExtremeCold DC 14, crush hazard

---

## Thermal Mechanics

### IntenseHeat Effects

- **Base DC:** 12
- **Damage:** 2d6 fire (base), varies by zone
- **Frequency:** Per Turn
- **Effects:**
    - Equipment overheating (metal weapons become damaging to hold)
    - Water/cold items evaporate
    - Fatigue accumulation
- **Mitigations:** Fire resistance, cooling equipment, Dvergr thermal suits

### ExtremeCold Effects

- **Base DC:** 12
- **Damage:** 2d6 cold (base), varies by zone
- **Frequency:** Per Turn
- **Effects:**
    - Equipment brittleness (increased breakage chance)
    - Movement speed reduction
    - Frostbite on failed checks
- **Mitigations:** Cold resistance, thermal gear, Ice-Marrow consumption

### Brittleness Mechanics

- Cold exposure causes equipment brittleness
- Brittleness level: 0-3 (None, Light, Moderate, Severe)
- Light: 10% break chance on impact
- Moderate: 25% break chance on impact
- Severe: 50% break chance on impact

---

## Dependencies & Prerequisites

```
v0.19.2 (Svartalfheim & Helheim) - REQUIRED
    â”‚
    â””â”€â”€ Environmental condition pattern
            â”‚
            â–¼
v0.19.0 (Core Infrastructure) - REQUIRED
    â”‚
    â”œâ”€â”€ RealmId.Muspelheim, RealmId.Niflheim
    â”œâ”€â”€ EnvironmentalConditionType.IntenseHeat
    â”œâ”€â”€ EnvironmentalConditionType.ExtremeCold
    â”œâ”€â”€ IBiomeAdjacencyService
    â””â”€â”€ BiomeDefinition, BiomeZone entities
            â”‚
            â–¼
v0.19.3 (Muspelheim & Niflheim)
```

---

## Risk Assessment

| Risk                          | Impact | Probability | Mitigation                                   |
| ----------------------------- | ------ | ----------- | -------------------------------------------- |
| Thermal damage balance issues | Medium | Medium      | Conservative base values, tune later         |
| Brittleness complexity        | Medium | Low         | Simple tier system (0-3)                     |
| Equipment overheating scope   | Low    | Medium      | Defer detailed mechanics to Equipment system |

---

## Design Decisions (Confirmed)

| Decision                 | Value        | Notes                       |
| ------------------------ | ------------ | --------------------------- |
| Muspelheim base temp     | 85Â°C         | Survivable with protection  |
| Niflheim base temp       | -40Â°C        | Survivable with protection  |
| Surtr's Furnace DC       | 18           | Base 12 + 6 modifier        |
| Hvergelmir's Heart DC    | 18           | Base 12 + 6 modifier        |
| Fire/Ice incompatibility | Incompatible | Cannot neighbor directly    |
| Fire/Bio incompatibility | Incompatible | Muspelheim kills plant life |

---

## Unit Testing Requirements (~24 tests)

### Muspelheim Tests (~8)

- GetBiome returns valid definition
- Base properties correct (Temp=85, Light=0.9)
- Three zones returned
- Hearth Perimeter has IntenseHeat DC 10
- Surtr's Furnace has IntenseHeat DC 18
- Slag Fields has IntenseHeat DC 14

### Niflheim Tests (~8)

- GetBiome returns valid definition
- Base properties correct (Temp=-40, Corrosion=0.0)
- Three zones returned
- Frost Marches has ExtremeCold DC 10
- Hvergelmir's Heart has ExtremeCold DC 18
- Living Glacier has ExtremeCold DC 14

### Adjacency Tests (~4)

- Muspelheim + Niflheim = Incompatible
- Muspelheim + Vanaheim = Incompatible
- Muspelheim + Svartalfheim = Compatible
- Niflheim + Midgard = RequiresTransition

### Thermal Mechanics Tests (~4)

- IntenseHeat base DC = 12
- ExtremeCold base DC = 12
- Thermal damage applies correctly
- Brittleness accumulates with cold exposure

---

## Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              v0.19.3 Muspelheim & Niflheim                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚     MUSPELHEIM       â”‚    â”‚      NIFLHEIM        â”‚          â”‚
â”‚  â”‚     (Deck 08)        â”‚    â”‚      (Deck 05)       â”‚          â”‚
â”‚  â”‚     ğŸ”¥ FIRE ğŸ”¥       â”‚ âœ—âœ— â”‚      â„ï¸ ICE â„ï¸       â”‚          â”‚
â”‚  â”‚                      â”‚    â”‚                      â”‚          â”‚
â”‚  â”‚  â€¢ Hearth DC10       â”‚ IN â”‚  â€¢ Frost Marches DC10â”‚          â”‚
â”‚  â”‚  â€¢ Surtr's DC18      â”‚ CO â”‚  â€¢ Hvergelmir DC18   â”‚          â”‚
â”‚  â”‚  â€¢ Slag Fields DC14  â”‚ MP â”‚  â€¢ Glacier DC14      â”‚          â”‚
â”‚  â”‚                      â”‚ AT â”‚                      â”‚          â”‚
â”‚  â”‚  Temp: 85-200Â°C      â”‚ IB â”‚  Temp: -40 to -80Â°C  â”‚          â”‚
â”‚  â”‚  Damage: Fire        â”‚ LE â”‚  Damage: Cold        â”‚          â”‚
â”‚  â”‚  Effect: Overheat    â”‚    â”‚  Effect: Brittleness â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Adjacency Rules                             â”‚   â”‚
â”‚  â”‚  â€¢ Muspelheim â†” Niflheim = INCOMPATIBLE                 â”‚   â”‚
â”‚  â”‚  â€¢ Muspelheim â†” Vanaheim = INCOMPATIBLE                 â”‚   â”‚
â”‚  â”‚  â€¢ Muspelheim â†” Svartalfheim = Compatible               â”‚   â”‚
â”‚  â”‚  â€¢ Niflheim â†” Midgard = RequiresTransition              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Deliverable Checklist

### Configuration

- [ ] `muspelheim.json` complete with all zones
- [ ] `niflheim.json` complete with all zones
- [ ] IntenseHeat condition configured
- [ ] ExtremeCold condition configured
- [ ] Adjacency rules updated (Fire/Ice, Fire/Bio incompatibility)
- [ ] JSON validates against biomes.schema.json

### Tests

- [ ] Muspelheim tests (~8)
- [ ] Niflheim tests (~8)
- [ ] Adjacency tests (~4)
- [ ] Thermal mechanics tests (~4)

---

_This scope breakdown provides a structured approach to implementing v0.19.3 Muspelheim & Niflheim with thermal mechanics and adjacency incompatibility._
