# v0.13.4b Changelog - Statistics Dashboard

**Release Date:** 2026-01-21  
**Version:** 0.13.4b  
**Feature:** Statistics Dashboard UI

---

## Summary

Implements the Statistics Dashboard UI component for displaying comprehensive player statistics with session vs all-time comparison, category tabs, ASCII bar charts, and playtime displays.

---

## Added

### Configuration

- **`StatisticsDashboardConfig.cs`** - Configuration class for dashboard display settings (panel dimensions, column widths, chart settings, colors)
- **`config/statistics-dashboard.json`** - Default configuration values
- **`config/schemas/statistics-dashboard.schema.json`** - JSON schema for validation

### DTOs

- **`StatisticDisplayDto.cs`** - DTO for statistic display with session/all-time/delta values and percentage support
- **`ChartDataPointDto.cs`** - DTO for chart data points with label, value, percentage, and color

### Renderers

- **`PlaytimeRenderer.cs`** - Playtime formatting with `#h ##m` format and color-coded milestones:
  - 0-9 hours: White (default)
  - 10-49 hours: Green (milestone)
  - 50-99 hours: Yellow (dedicated)
  - 100+ hours: Cyan (veteran)

### UI Components

- **`CategoryTabs.cs`** - Category filter tabs with key number mappings (1-5)
  - Categories: Combat, Explore, Progress, Time, Dice
  - Active tab: `[1.Combat]`, Inactive: ` 2.Explore `

- **`StatComparisonView.cs`** - Three-column comparison table
  - Columns: Statistic | Session | All-Time | Change
  - Delta formatting: `+47`, `-3`, `-` (no change)
  - Percentage delta: `+2.5%`, `-1.2%`
  - Color coding: Green (positive), Red (negative), Gray (neutral)

- **`SimpleChart.cs`** - ASCII bar chart component
  - Format: `Label     [######..............] 58%`
  - Supports colored bars and distribution charts

- **`StatisticsDashboard.cs`** - Main dashboard panel orchestrating:
  - Panel header with title
  - Playtime summary line
  - Category tabs
  - Comparison view
  - Distribution charts (for Combat category)

### Commands

- **`StatisticsCommand.cs`** - Command handler for `statistics` and `stats` commands
  - Uses `IStatisticsService.GetCategoryStatistics()` and `GetMetrics()`
  - Supports category argument filtering

### Unit Tests (36 new tests)

- **`PlaytimeRendererTests.cs`** (8 tests) - Formatting rules, color milestones
- **`StatComparisonViewTests.cs`** (12 tests) - Delta formatting, percentage deltas, color coding
- **`SimpleChartTests.cs`** (7 tests) - Bar formatting proportions
- **`StatisticsDashboardTests.cs`** (13 tests) - Construction, filtering, input handling

---

## Technical Notes

### Design Deviations from Specification

| Spec | Implementation | Reason |
|------|----------------|--------|
| `StatisticsCategory` | `StatisticCategory` | Existing domain enum uses singular form |
| Categories: Combat, Exploration, Crafting, Misc | Combat, Exploration, Progression, Time, Dice | Match existing `StatisticCategory` enum values |

### Category Tab Key Mappings

| Key | Category |
|-----|----------|
| 1 | Combat |
| 2 | Exploration |
| 3 | Progression |
| 4 | Time |
| 5 | Dice |

---

## Dependencies

- `RuneAndRust.Application.Interfaces.IStatisticsService`
- `RuneAndRust.Application.Interfaces.ITerminalService`
- `RuneAndRust.Domain.Enums.StatisticCategory`

---

## Verification

```bash
# Build
dotnet build src/Presentation/RuneAndRust.Presentation.Tui
# Tests
dotnet test tests/RuneAndRust.Presentation.Tui.UnitTests --filter "Playtime|StatComparison|SimpleChart|StatisticsDashboard"
```

**Result:** Build succeeded (0 errors, 0 warnings). 36 tests passed.
