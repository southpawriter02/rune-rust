# v0.17.3a Design Specification: Archetype Enum & Definition

**Version:** 0.17.3a  
**Phase Name:** Archetype Enum & Definition  
**Parent Version:** v0.17.3 (Archetype System)  
**Prerequisites:** v0.17.2 Complete (Attribute System)  
**Estimated Tests:** ~8 unit tests

---

## Table of Contents

1. [Executive Summary](#1-executive-summary)
2. [Feature Overview](#2-feature-overview)
3. [Architecture Diagrams](#3-architecture-diagrams)
4. [Archetype Enum](#4-archetype-enum)
5. [ResourceType Enum](#5-resourcetype-enum)
6. [ArchetypeDefinition Entity](#6-archetypedefinition-entity)
7. [Data Model Changes](#7-data-model-changes)
8. [Configuration File Schemas](#8-configuration-file-schemas)
9. [Logging Specifications](#9-logging-specifications)
10. [Unit Testing Requirements](#10-unit-testing-requirements)
11. [Use Cases](#11-use-cases)
12. [User Stories](#12-user-stories)
13. [Deliverable Checklist](#13-deliverable-checklist)
14. [Acceptance Criteria](#14-acceptance-criteria)
15. [Dependencies](#15-dependencies)
16. [Future Considerations](#16-future-considerations)

---

## 1. Executive Summary

### 1.1 Purpose

This specification defines the `Archetype` and `ResourceType` enumerations along with the `ArchetypeDefinition` entity that form the foundation of the v0.17.3 Archetype System. Archetypes define a character's fundamental combat role and approach to survival in Aethelgard. **Archetype is a permanent choice** that cannot be changed after character creation.

The four archetypes are:

- **Warrior** — Tank / Melee DPS (Stamina-based)
- **Skirmisher** — Mobile DPS (Stamina-based)
- **Mystic** — Caster / Control (Aether Pool-based)
- **Adept** — Support / Utility (Stamina-based)

This phase establishes the core types that all subsequent v0.17.3x phases depend upon for resource bonuses, starting abilities, and specialization mappings.

### 1.2 Key Deliverables

| Category          | Items                                                           |
| ----------------- | --------------------------------------------------------------- |
| **Enums**         | `Archetype`, `ResourceType`                                     |
| **Entities**      | `ArchetypeDefinition`                                           |
| **Configuration** | `archetypes.json` (partial), `archetypes.schema.json` (partial) |
| **Tests**         | ~8 unit tests                                                   |

### 1.3 Architectural Significance

This version establishes the **Archetype Pattern** used throughout character mechanics:

- **Enum-Based Archetype Identification**: All characters reference `Archetype` values
- **Definition Entity Pattern**: `ArchetypeDefinition` holds all archetype data
- **Configuration-Driven Definitions**: Archetype details loaded from JSON for customization
- **Permanent Choice Pattern**: Archetype cannot be changed post-creation
- **Resource Type Differentiation**: Distinguishes Stamina-based vs. Aether-based archetypes
- **Foundation for Combat Role**: Determines HP bonuses, resource pools, and available specializations

---

## 2. Feature Overview

```
v0.17.3a Archetype Enum & Definition
├── Archetype Enum
│   ├── Warrior (0) — Tank / Melee DPS
│   ├── Skirmisher (1) — Mobile DPS
│   ├── Mystic (2) — Caster / Control
│   └── Adept (3) — Support / Utility
├── ResourceType Enum
│   ├── Stamina (0) — Physical resource
│   └── AetherPool (1) — Magical resource
├── ArchetypeDefinition Entity
│   ├── Id: Guid
│   ├── ArchetypeId: Archetype
│   ├── DisplayName: string
│   ├── Tagline: string
│   ├── Description: string
│   ├── SelectionText: string
│   ├── CombatRole: string
│   ├── PrimaryResource: ResourceType
│   ├── PlaystyleDescription: string
│   └── IsPermanent: bool (always true)
└── Configuration Files
    ├── archetypes.json (partial - definition section)
    └── archetypes.schema.json (partial)
```

### 2.1 Scope Alignment

**In Scope:**

- `Archetype` enum with four values (0-3)
- `ResourceType` enum with two values (0-1)
- `ArchetypeDefinition` entity with display and role properties
- Partial `archetypes.json` configuration (definition section only)
- Partial `archetypes.schema.json` validation schema
- Thematic naming following Aethelgard conventions

**Out of Scope:**

- Resource bonuses (ArchetypeResourceBonuses) → v0.17.3b
- Starting abilities (ArchetypeAbilityGrant) → v0.17.3c
- Specialization mappings → v0.17.3d
- Archetype provider service → v0.17.3e
- Archetype application service → v0.17.3f
- Integration with character creation workflow → v0.17.5

---

## 3. Architecture Diagrams

### 3.1 Archetype System Overview

```
┌─────────────────────────────────────────────────────────────────────┐
│                   ARCHETYPE SYSTEM OVERVIEW                          │
└─────────────────────────────────────────────────────────────────────┘

    Character Creation UI (Step 4: Archetype)
           │
           │  Player selects archetype (permanent choice)
           ▼
┌─────────────────────────────────────────────────────────────────────┐
│                         Archetype Enum                               │
├─────────────────────────────────────────────────────────────────────┤
│  Warrior(0)  │  Skirmisher(1)  │  Mystic(2)  │  Adept(3)            │
└─────────────────────────────────────────────────────────────────────┘
           │
           │  Get definition for display
           ▼
┌─────────────────────────────────────────────────────────────────────┐
│                   ArchetypeDefinition Entity                         │
├─────────────────────────────────────────────────────────────────────┤
│  - ArchetypeId: Archetype         (enum reference)                   │
│  - DisplayName: string            (e.g., "Warrior")                  │
│  - Tagline: string                (e.g., "The Unyielding Bulwark")   │
│  - Description: string            (full explanation)                 │
│  - SelectionText: string          (flavor for creation UI)          │
│  - CombatRole: string             (e.g., "Tank / Melee DPS")         │
│  - PrimaryResource: ResourceType  (Stamina or AetherPool)            │
│  - PlaystyleDescription: string   (gameplay summary)                 │
│  - IsPermanent: bool              (always true)                      │
└─────────────────────────────────────────────────────────────────────┘
```

### 3.2 Layer Diagram

```
┌─────────────────────────────────────────────────────────────────────┐
│                        PRESENTATION LAYER                            │
├─────────────────────────────────────────────────────────────────────┤
│  CharacterCreationView (v0.17.5)                                     │
│  └── Uses ArchetypeDefinition.DisplayName, Tagline, SelectionText   │
│                                                                      │
│  ArchetypeSelectionPanel (v0.17.5)                                   │
│  └── Uses ArchetypeDefinition for detail display                    │
│                                                                      │
│  CharacterSheetView                                                  │
│  └── Uses ArchetypeDefinition.CombatRole for display                │
└───────┬─────────────────────────────────────────────────────────────┘
        │
        ▼
┌─────────────────────────────────────────────────────────────────────┐
│                       APPLICATION LAYER                              │
├─────────────────────────────────────────────────────────────────────┤
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │               IArchetypeProvider (v0.17.3e)                   │  │
│  │                 (interface for archetype access)              │  │
│  ├───────────────────────────────────────────────────────────────┤  │
│  │  + GetArchetype(Archetype): ArchetypeDefinition?              │  │
│  │  + GetAllArchetypes(): IReadOnlyList<ArchetypeDefinition>     │  │
│  │  + GetSelectionText(Archetype): string                        │  │
│  └───────────────────────────────────────────────────────────────┘  │
│                                                                      │
│  IArchetypeApplicationService (v0.17.3f)                             │
│  └── Uses Archetype enum and ArchetypeDefinition                    │
└───────┬─────────────────────────────────────────────────────────────┘
        │
        ▼
┌─────────────────────────────────────────────────────────────────────┐
│                         DOMAIN LAYER                                 │
├─────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────┐  ┌─────────────────────────────────────┐   │
│  │     Archetype       │  │        ArchetypeDefinition          │   │
│  │       (Enum)        │  │           (Entity)                  │   │
│  ├─────────────────────┤  ├─────────────────────────────────────┤   │
│  │ Warrior = 0         │  │ Id: Guid                            │   │
│  │ Skirmisher = 1      │  │ ArchetypeId: Archetype              │   │
│  │ Mystic = 2          │  │ DisplayName: string                 │   │
│  │ Adept = 3           │  │ Tagline: string                     │   │
│  └─────────────────────┘  │ Description: string                 │   │
│                           │ SelectionText: string               │   │
│  ┌─────────────────────┐  │ CombatRole: string                  │   │
│  │    ResourceType     │  │ PrimaryResource: ResourceType       │   │
│  │       (Enum)        │  │ PlaystyleDescription: string        │   │
│  ├─────────────────────┤  │ IsPermanent: bool                   │   │
│  │ Stamina = 0         │  └─────────────────────────────────────┘   │
│  │ AetherPool = 1      │                                            │
│  └─────────────────────┘                                            │
└─────────────────────────────────────────────────────────────────────┘
```

### 3.3 Character Creation Flow: Archetype Step

```
┌─────────────────────────────────────────────────────────────────────┐
│             CHARACTER CREATION FLOW: ARCHETYPE STEP                  │
└─────────────────────────────────────────────────────────────────────┘

    Player completes Step 3 (Attributes)
           │
           ▼
┌─────────────────────────────────────────────────────────────────────┐
│                  STEP 4: ARCHETYPE SELECTION                         │
├─────────────────────────────────────────────────────────────────────┤
│  1. Display all 4 archetypes with DisplayName and Tagline           │
│  2. Show combat role and primary resource for each                   │
│  3. Display "⚠ PERMANENT CHOICE" warning                            │
│  4. Player selects archetype                                         │
│  5. Show detailed description and playstyle                          │
│  6. Confirm selection                                                │
└─────────────────────────────────────────────────────────────────────┘
           │
           ▼
┌─────────────────────────────────────────────────────────────────────┐
│             ARCHETYPE PANEL: SELECTED ARCHETYPE DETAIL               │
├─────────────────────────────────────────────────────────────────────┤
│  Example: Player selects "Warrior"                                  │
│                                                                      │
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │  WARRIOR                                                       │  │
│  │  "The Unyielding Bulwark"                                     │  │
│  │  ─────────────────────────────────────────────────────────────│  │
│  │  Role: Tank / Melee DPS                                       │  │
│  │  Resource: Stamina                                            │  │
│  │                                                                │  │
│  │  Warriors are the frontline fighters who absorb punishment    │  │
│  │  and deal devastating melee damage.                           │  │
│  │                                                                │  │
│  │  "You are the shield between the innocent and the horror.     │  │
│  │   When others flee, you advance. Your body is a weapon,       │  │
│  │   your will is unbreakable."                                  │  │
│  │                                                                │  │
│  │  Playstyle: Stand in the front, absorb damage, protect allies │  │
│  │                                                                │  │
│  │  ⚠ This choice is PERMANENT and cannot be changed.           │  │
│  └───────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────┘
           │
           ▼
    Confirm selection → Proceed to Step 5 (Specialization)
```

### 3.4 Archetype to Combat Role Relationship

```
┌─────────────────────────────────────────────────────────────────────┐
│              ARCHETYPE TO COMBAT ROLE RELATIONSHIP                   │
└─────────────────────────────────────────────────────────────────────┘

    ┌─────────────────┐        ┌─────────────────────────────────────┐
    │    WARRIOR      │───────▶│  Combat Role: Tank / Melee DPS      │
    │                 │───────▶│  Primary Resource: Stamina          │
    │                 │───────▶│  Key Strength: Highest HP           │
    └─────────────────┘        └─────────────────────────────────────┘

    ┌─────────────────┐        ┌─────────────────────────────────────┐
    │   SKIRMISHER    │───────▶│  Combat Role: Mobile DPS            │
    │                 │───────▶│  Primary Resource: Stamina          │
    │                 │───────▶│  Key Strength: +1 Movement, evasion │
    └─────────────────┘        └─────────────────────────────────────┘

    ┌─────────────────┐        ┌─────────────────────────────────────┐
    │     MYSTIC      │───────▶│  Combat Role: Caster / Control      │
    │                 │───────▶│  Primary Resource: Aether Pool      │
    │                 │───────▶│  Key Strength: Ranged Aetheric power│
    └─────────────────┘        └─────────────────────────────────────┘

    ┌─────────────────┐        ┌─────────────────────────────────────┐
    │      ADEPT      │───────▶│  Combat Role: Support / Utility     │
    │                 │───────▶│  Primary Resource: Stamina          │
    │                 │───────▶│  Key Strength: +20% Consumables     │
    └─────────────────┘        └─────────────────────────────────────┘

    Design Notes:
    ┌─────────────────────────────────────────────────────────────────┐
    │ • Warrior focuses on damage absorption and melee combat         │
    │ • Skirmisher focuses on mobility and hit-and-run tactics        │
    │ • Mystic is the only Aether Pool-based archetype                │
    │ • Adept excels at resource efficiency and party support         │
    │ • Each archetype has distinct combat identity                   │
    └─────────────────────────────────────────────────────────────────┘
```

### 3.5 Archetype Selection Decision Tree

```
┌─────────────────────────────────────────────────────────────────────┐
│               ARCHETYPE SELECTION DECISION TREE                      │
└─────────────────────────────────────────────────────────────────────┘

    Player enters Archetype selection
           │
           ▼
    ┌──────────────────────────────────────────────────────────────────┐
    │ Display all 4 archetypes with summary information                │
    │ - DisplayName, Tagline, CombatRole, PrimaryResource              │
    └──────────────────────────────────────────────────────────────────┘
           │
           ▼
    ┌──────────────────────┐
    │ Player selects an    │
    │ archetype?           │
    └──────────┬───────────┘
               │
        ┌──────┴──────┐
       YES            NO
        │              │
        ▼              ▼
    ┌────────────┐  ┌────────────────────────────────────────────────┐
    │ Show full  │  │ Wait for selection                             │
    │ details:   │  │ (cannot proceed without archetype)            │
    │ Description│  └────────────────────────────────────────────────┘
    │ SelectText │
    │ Playstyle  │
    │ Warning    │
    └──────┬─────┘
           │
           ▼
    ┌──────────────────────┐
    │ Player confirms      │
    │ selection?           │
    └──────────┬───────────┘
               │
        ┌──────┴──────┐
       YES            NO
        │              │
        ▼              ▼
    ┌────────────┐  ┌────────────────────────────────────────────────┐
    │ Lock       │  │ Return to archetype list                       │
    │ archetype  │  │ (player can select different archetype)        │
    │ Proceed to │  └────────────────────────────────────────────────┘
    │ Step 5     │
    └────────────┘
```

---

## 4. Archetype Enum

### 4.1 Purpose

The `Archetype` enum defines the four fundamental combat roles in Aethelgard. This enum is the foundation for all archetype-related mechanics including resource pools, starting abilities, and available specializations.

### 4.2 Implementation

**File:** `src/Core/RuneAndRust.Domain/Enums/Archetype.cs`

```csharp
namespace RuneAndRust.Domain.Enums;

/// <summary>
/// Defines the four archetypes that determine a character's combat role.
/// </summary>
/// <remarks>
/// <para>
/// Archetypes represent the fundamental combat identity of every character
/// in Aethelgard. They determine the primary resource pool, starting abilities,
/// and available specializations. Archetype is a PERMANENT choice that cannot
/// be changed after character creation.
/// </para>
/// <para>
/// The four archetypes cover all major combat roles:
/// - Warrior: Tank / Melee DPS focused on damage absorption
/// - Skirmisher: Mobile DPS focused on hit-and-run tactics
/// - Mystic: Caster / Control focused on Aetheric abilities
/// - Adept: Support / Utility focused on resource efficiency
/// </para>
/// <para>
/// Archetype values are explicitly assigned (0-3) to ensure stable serialization
/// and database storage. The order reflects typical selection frequency.
/// </para>
/// </remarks>
public enum Archetype
{
    /// <summary>
    /// Warrior - Tank / Melee DPS focused on damage absorption.
    /// </summary>
    /// <remarks>
    /// Warriors are the frontline fighters. They use Stamina as their primary
    /// resource and have the highest HP bonus (+49). Key characteristics:
    /// - Highest HP pool in the game
    /// - Defensive abilities and stances
    /// - Melee-focused combat style
    /// - 6 available specializations
    /// </remarks>
    Warrior = 0,

    /// <summary>
    /// Skirmisher - Mobile DPS focused on hit-and-run tactics.
    /// </summary>
    /// <remarks>
    /// Skirmishers excel at mobility and precision strikes. They use Stamina
    /// as their primary resource and have +1 Movement bonus. Key characteristics:
    /// - Enhanced movement speed
    /// - Evasion-focused defense
    /// - Quick, precise attacks
    /// - 4 available specializations
    /// </remarks>
    Skirmisher = 1,

    /// <summary>
    /// Mystic - Caster / Control focused on Aetheric abilities.
    /// </summary>
    /// <remarks>
    /// Mystics channel the corrupted Aether for devastating magical attacks.
    /// They are the ONLY archetype using Aether Pool as primary resource.
    /// Key characteristics:
    /// - Ranged magical damage
    /// - Crowd control abilities
    /// - Highest Aether Pool bonus (+20)
    /// - 2 available specializations
    /// </remarks>
    Mystic = 2,

    /// <summary>
    /// Adept - Support / Utility focused on resource efficiency.
    /// </summary>
    /// <remarks>
    /// Adepts master mundane arts and make the most of limited resources.
    /// They use Stamina as their primary resource and have unique bonuses.
    /// Key characteristics:
    /// - +20% consumable effectiveness
    /// - Support and utility abilities
    /// - Resource optimization focus
    /// - 5 available specializations
    /// </remarks>
    Adept = 3
}
```

### 4.3 Design Decisions

#### 4.3.1 Explicit Enum Values

**Decision:** Explicitly assign integer values (0-3) to enum members.

**Rationale:**

- Ensures stable serialization to JSON and database storage
- Prevents accidental value changes if enum order is modified
- Matches existing game patterns for enums (e.g., `CoreAttribute`, `Lineage`)
- Supports array/dictionary indexing by casting to int
- Enables future archetype additions at higher values without breaking existing data

#### 4.3.2 Four-Archetype System

**Decision:** Use exactly four archetypes as defined in the scope breakdown.

**Rationale:**

- Matches the design specification in v0.17.3-scope-breakdown.md
- Each archetype has distinct mechanical and thematic identity
- Four archetypes balance meaningful choice with manageable complexity
- Covers all major combat roles (tank, DPS, caster, support)
- Aligns with party composition needs (tank, damage, control, support)

#### 4.3.3 Naming Conventions

**Decision:** Use descriptive PascalCase names based on combat roles.

**Rationale:**

- `Warrior`: Clear indication of frontline fighter role
- `Skirmisher`: Conveys hit-and-run, mobile combat style
- `Mystic`: Suggests arcane power and mystery (not "Mage" for thematic distinction)
- `Adept`: Implies mastery of skills and versatility (not "Rogue" for broader utility focus)

### 4.4 Archetype Reference Table

| Enum Value   | Integer | Display Name | Combat Role       | Primary Resource |
| ------------ | ------- | ------------ | ----------------- | ---------------- |
| `Warrior`    | 0       | Warrior      | Tank / Melee DPS  | Stamina          |
| `Skirmisher` | 1       | Skirmisher   | Mobile DPS        | Stamina          |
| `Mystic`     | 2       | Mystic       | Caster / Control  | Aether Pool      |
| `Adept`      | 3       | Adept        | Support / Utility | Stamina          |

---

## 5. ResourceType Enum

### 5.1 Purpose

The `ResourceType` enum defines the primary resource pools used by archetypes for abilities. This differentiation is fundamental to archetype identity—Mystics use Aether while others use Stamina.

### 5.2 Implementation

**File:** `src/Core/RuneAndRust.Domain/Enums/ResourceType.cs`

```csharp
namespace RuneAndRust.Domain.Enums;

/// <summary>
/// Defines the primary resource types used by archetypes for abilities.
/// </summary>
/// <remarks>
/// <para>
/// Resource types determine which pool characters draw from when using
/// abilities. The primary resource affects regeneration rates, ability
/// costs, and synergies with lineage traits.
/// </para>
/// <para>
/// Currently, Mystic is the only archetype using Aether Pool.
/// Warrior, Skirmisher, and Adept all use Stamina.
/// </para>
/// </remarks>
public enum ResourceType
{
    /// <summary>
    /// Stamina - Physical resource for non-magical abilities.
    /// </summary>
    /// <remarks>
    /// Used by Warrior, Skirmisher, and Adept archetypes.
    /// Regenerates based on Finesse and Might attributes.
    /// Formula: Max Stamina = 20 + (Finesse × 5) + (Might × 5) + Archetype Bonus
    /// </remarks>
    Stamina = 0,

    /// <summary>
    /// Aether Pool - Magical resource for Aetheric abilities.
    /// </summary>
    /// <remarks>
    /// Used exclusively by the Mystic archetype.
    /// Regenerates based on Will and Wits attributes.
    /// Formula: Max Aether Pool = (Will × 10) + (Wits × 5) + Archetype Bonus + Lineage Bonus
    /// Rune-Marked lineage provides multiplier (×1.10).
    /// </remarks>
    AetherPool = 1
}
```

### 5.3 Resource Type Reference Table

| Enum Value   | Integer | Used By                    | Primary Attribute | Secondary Attribute |
| ------------ | ------- | -------------------------- | ----------------- | ------------------- |
| `Stamina`    | 0       | Warrior, Skirmisher, Adept | Finesse           | Might               |
| `AetherPool` | 1       | Mystic                     | Will              | Wits                |

---

## 6. ArchetypeDefinition Entity

### 6.1 Purpose

The `ArchetypeDefinition` entity encapsulates all core definition data for a single archetype. This entity is loaded from configuration and provides display text, combat role information, and the permanent choice flag.

### 6.2 Implementation

**File:** `src/Core/RuneAndRust.Domain/Entities/ArchetypeDefinition.cs`

```csharp
namespace RuneAndRust.Domain.Entities;

using RuneAndRust.Domain.Enums;
using RuneAndRust.Domain.Interfaces;

/// <summary>
/// Represents the core definition of an archetype loaded from configuration.
/// </summary>
/// <remarks>
/// <para>
/// ArchetypeDefinition contains all display and identification properties for
/// an archetype. This entity is immutable after creation and represents the
/// template from which character archetypes are applied.
/// </para>
/// <para>
/// This entity contains only the core definition properties. Resource bonuses,
/// starting abilities, and specialization mappings are defined in separate
/// value objects (v0.17.3b, v0.17.3c, v0.17.3d respectively).
/// </para>
/// <para>
/// Archetype is a PERMANENT choice—once selected during character creation,
/// it cannot be changed. The IsPermanent property is always true.
/// </para>
/// </remarks>
public class ArchetypeDefinition : IEntity
{
    /// <summary>
    /// Gets the unique identifier for this archetype definition.
    /// </summary>
    public Guid Id { get; private set; }

    /// <summary>
    /// Gets the archetype enum value this definition represents.
    /// </summary>
    public Archetype ArchetypeId { get; private set; }

    /// <summary>
    /// Gets the display name shown in UI (e.g., "Warrior").
    /// </summary>
    public string DisplayName { get; private set; }

    /// <summary>
    /// Gets the thematic tagline (e.g., "The Unyielding Bulwark").
    /// </summary>
    public string Tagline { get; private set; }

    /// <summary>
    /// Gets the full description of the archetype.
    /// </summary>
    public string Description { get; private set; }

    /// <summary>
    /// Gets the flavor text shown during character creation selection.
    /// </summary>
    public string SelectionText { get; private set; }

    /// <summary>
    /// Gets the combat role descriptor (e.g., "Tank / Melee DPS").
    /// </summary>
    public string CombatRole { get; private set; }

    /// <summary>
    /// Gets the primary resource type used by this archetype.
    /// </summary>
    public ResourceType PrimaryResource { get; private set; }

    /// <summary>
    /// Gets the playstyle description for player guidance.
    /// </summary>
    public string PlaystyleDescription { get; private set; }

    /// <summary>
    /// Gets whether this archetype choice is permanent.
    /// </summary>
    /// <remarks>
    /// This is always true. Archetype cannot be changed after character creation.
    /// </remarks>
    public bool IsPermanent { get; private set; }

    /// <summary>
    /// Private constructor for EF Core.
    /// </summary>
    private ArchetypeDefinition()
    {
        DisplayName = null!;
        Tagline = null!;
        Description = null!;
        SelectionText = null!;
        CombatRole = null!;
        PlaystyleDescription = null!;
    }

    /// <summary>
    /// Creates a new ArchetypeDefinition with validation.
    /// </summary>
    /// <param name="archetypeId">The archetype enum value.</param>
    /// <param name="displayName">The display name.</param>
    /// <param name="tagline">The thematic tagline.</param>
    /// <param name="description">The full description.</param>
    /// <param name="selectionText">The character creation selection text.</param>
    /// <param name="combatRole">The combat role descriptor.</param>
    /// <param name="primaryResource">The primary resource type.</param>
    /// <param name="playstyleDescription">The playstyle description.</param>
    /// <returns>A new ArchetypeDefinition instance.</returns>
    /// <exception cref="ArgumentException">Thrown when required strings are null or whitespace.</exception>
    public static ArchetypeDefinition Create(
        Archetype archetypeId,
        string displayName,
        string tagline,
        string description,
        string selectionText,
        string combatRole,
        ResourceType primaryResource,
        string playstyleDescription)
    {
        ArgumentException.ThrowIfNullOrWhiteSpace(displayName);
        ArgumentException.ThrowIfNullOrWhiteSpace(tagline);
        ArgumentException.ThrowIfNullOrWhiteSpace(description);
        ArgumentException.ThrowIfNullOrWhiteSpace(selectionText);
        ArgumentException.ThrowIfNullOrWhiteSpace(combatRole);
        ArgumentException.ThrowIfNullOrWhiteSpace(playstyleDescription);

        return new ArchetypeDefinition
        {
            Id = Guid.NewGuid(),
            ArchetypeId = archetypeId,
            DisplayName = displayName,
            Tagline = tagline,
            Description = description,
            SelectionText = selectionText,
            CombatRole = combatRole,
            PrimaryResource = primaryResource,
            PlaystyleDescription = playstyleDescription,
            IsPermanent = true // Always true - archetype is permanent
        };
    }

    /// <summary>
    /// Gets a summary string for logging and debugging.
    /// </summary>
    /// <returns>A formatted summary string.</returns>
    public string GetSummary() =>
        $"{DisplayName} ({CombatRole}) - {PrimaryResource}";

    /// <summary>
    /// Gets the full selection display for character creation UI.
    /// </summary>
    /// <returns>A formatted selection display string.</returns>
    public string GetSelectionDisplay() =>
        $"{DisplayName}\n\"{Tagline}\"\n\n{SelectionText}";

    /// <inheritdoc />
    public override string ToString() =>
        $"ArchetypeDefinition: {DisplayName} [{ArchetypeId}]";
}
```

### 6.3 Archetype Definition Reference Table

| Archetype  | Display Name | Tagline                   | Combat Role       | Primary Resource |
| ---------- | ------------ | ------------------------- | ----------------- | ---------------- |
| Warrior    | Warrior      | The Unyielding Bulwark    | Tank / Melee DPS  | Stamina          |
| Skirmisher | Skirmisher   | Swift as Shadow           | Mobile DPS        | Stamina          |
| Mystic     | Mystic       | Wielder of Tainted Aether | Caster / Control  | AetherPool       |
| Adept      | Adept        | Master of Mundane Arts    | Support / Utility | Stamina          |

### 6.4 Selection Text Content

| Archetype  | Selection Text                                                                                                                            |
| ---------- | ----------------------------------------------------------------------------------------------------------------------------------------- |
| Warrior    | "You are the shield between the innocent and the horror. When others flee, you advance. Your body is a weapon, your will is unbreakable." |
| Skirmisher | "Speed is survival. Strike fast, strike true, and be gone before they know you were there."                                               |
| Mystic     | "The Aether flows through you like a river of broken logic. Others fear its touch; you have learned to direct its chaos."                 |
| Adept      | "While others rely on strength or magic, you rely on knowledge, skill, and preparation."                                                  |

### 6.5 Playstyle Descriptions

| Archetype  | Playstyle Description                                   |
| ---------- | ------------------------------------------------------- |
| Warrior    | Stand in the front, absorb damage, protect allies       |
| Skirmisher | High mobility, hit-and-run tactics, evasion             |
| Mystic     | Ranged magical damage, crowd control, Aether management |
| Adept      | Support allies, maximize resources, utility skills      |

---

## 7. Data Model Changes

### 7.1 New Types Summary

| Type                  | Layer  | Category | Description                           |
| --------------------- | ------ | -------- | ------------------------------------- |
| `Archetype`           | Domain | Enum     | Four character combat role archetypes |
| `ResourceType`        | Domain | Enum     | Primary resource pool types           |
| `ArchetypeDefinition` | Domain | Entity   | Core archetype definition data        |

### 7.2 File Locations

```
src/Core/RuneAndRust.Domain/
├── Enums/
│   ├── Archetype.cs                             ← NEW
│   └── ResourceType.cs                          ← NEW
├── Entities/
│   └── ArchetypeDefinition.cs                   ← NEW

config/
├── archetypes.json                              ← NEW (partial)
└── schemas/
    └── archetypes.schema.json                   ← NEW (partial)
```

### 7.3 Type Relationships

```
┌─────────────────┐         ┌─────────────────────┐
│    Archetype    │◄────────│  ArchetypeDefinition│
│     (Enum)      │  1:1    │      (Entity)       │
└─────────────────┘         └─────────────────────┘
                                     │
                                     │ has-a
                                     ▼
                           ┌─────────────────────┐
                           │    ResourceType     │
                           │      (Enum)         │
                           ├─────────────────────┤
                           │ Stamina             │
                           │ AetherPool          │
                           └─────────────────────┘
```

---

## 8. Configuration File Schemas

### 8.1 archetypes.json (Partial - Definition Section)

**File:** `config/archetypes.json`

```json
{
    "$schema": "./schemas/archetypes.schema.json",
    "archetypes": [
        {
            "archetypeId": "Warrior",
            "displayName": "Warrior",
            "tagline": "The Unyielding Bulwark",
            "description": "Warriors are the frontline fighters who absorb punishment and deal devastating melee damage.",
            "selectionText": "You are the shield between the innocent and the horror. When others flee, you advance. Your body is a weapon, your will is unbreakable.",
            "combatRole": "Tank / Melee DPS",
            "primaryResource": "Stamina",
            "playstyleDescription": "Stand in the front, absorb damage, protect allies",
            "isPermanent": true
        },
        {
            "archetypeId": "Skirmisher",
            "displayName": "Skirmisher",
            "tagline": "Swift as Shadow",
            "description": "Skirmishers excel at mobility and precision strikes, weaving in and out of combat.",
            "selectionText": "Speed is survival. Strike fast, strike true, and be gone before they know you were there.",
            "combatRole": "Mobile DPS",
            "primaryResource": "Stamina",
            "playstyleDescription": "High mobility, hit-and-run tactics, evasion",
            "isPermanent": true
        },
        {
            "archetypeId": "Mystic",
            "displayName": "Mystic",
            "tagline": "Wielder of Tainted Aether",
            "description": "Mystics channel the corrupted Aether to unleash devastating magical attacks from range.",
            "selectionText": "The Aether flows through you like a river of broken logic. Others fear its touch; you have learned to direct its chaos.",
            "combatRole": "Caster / Control",
            "primaryResource": "AetherPool",
            "playstyleDescription": "Ranged magical damage, crowd control, Aether management",
            "isPermanent": true
        },
        {
            "archetypeId": "Adept",
            "displayName": "Adept",
            "tagline": "Master of Mundane Arts",
            "description": "Adepts excel at support, utility, and making the most of limited resources.",
            "selectionText": "While others rely on strength or magic, you rely on knowledge, skill, and preparation.",
            "combatRole": "Support / Utility",
            "primaryResource": "Stamina",
            "playstyleDescription": "Support allies, maximize resources, utility skills",
            "isPermanent": true
        }
    ]
}
```

### 8.2 archetypes.schema.json (Partial)

**File:** `config/schemas/archetypes.schema.json`

```json
{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "archetypes.schema.json",
    "title": "Archetypes Configuration",
    "description": "Configuration for character archetypes and their definitions",
    "type": "object",
    "required": ["archetypes"],
    "properties": {
        "archetypes": {
            "type": "array",
            "description": "List of archetype definitions",
            "items": { "$ref": "#/$defs/archetypeDefinition" },
            "minItems": 4,
            "maxItems": 4
        }
    },
    "$defs": {
        "archetypeDefinition": {
            "type": "object",
            "description": "Core definition for a single archetype",
            "required": [
                "archetypeId",
                "displayName",
                "tagline",
                "description",
                "selectionText",
                "combatRole",
                "primaryResource",
                "playstyleDescription",
                "isPermanent"
            ],
            "properties": {
                "archetypeId": {
                    "type": "string",
                    "description": "The archetype enum value",
                    "enum": ["Warrior", "Skirmisher", "Mystic", "Adept"]
                },
                "displayName": {
                    "type": "string",
                    "description": "Display name shown in UI",
                    "minLength": 1,
                    "maxLength": 50
                },
                "tagline": {
                    "type": "string",
                    "description": "Thematic tagline for the archetype",
                    "minLength": 1,
                    "maxLength": 100
                },
                "description": {
                    "type": "string",
                    "description": "Full description of the archetype",
                    "minLength": 1,
                    "maxLength": 500
                },
                "selectionText": {
                    "type": "string",
                    "description": "Flavor text for character creation selection",
                    "minLength": 1,
                    "maxLength": 500
                },
                "combatRole": {
                    "type": "string",
                    "description": "Combat role descriptor",
                    "minLength": 1,
                    "maxLength": 50
                },
                "primaryResource": {
                    "type": "string",
                    "description": "Primary resource type",
                    "enum": ["Stamina", "AetherPool"]
                },
                "playstyleDescription": {
                    "type": "string",
                    "description": "Brief playstyle guidance",
                    "minLength": 1,
                    "maxLength": 200
                },
                "isPermanent": {
                    "type": "boolean",
                    "description": "Whether the archetype choice is permanent (always true)",
                    "const": true
                }
            }
        }
    }
}
```

---

## 9. Logging Specifications

### 9.1 Log Levels by Component

| Component             | Level       | Events                                   |
| --------------------- | ----------- | ---------------------------------------- |
| `ArchetypeDefinition` | Debug       | Entity creation, property access         |
| `ArchetypeDefinition` | Information | Factory method success                   |
| `ArchetypeDefinition` | Warning     | Validation failures                      |
| `ArchetypeDefinition` | Error       | Critical validation failures (null args) |

### 9.2 Logging Rules

- **Debug**: Internal property access and lookup operations
- **Information**: Successful archetype definition creation
- **Warning**: Unexpected but handled validation issues
- **Error**: Failed creation due to invalid parameters

---

## 10. Unit Testing Requirements

### 10.1 Test Count: ~8 tests

```csharp
[TestFixture]
public class ArchetypeEnumTests
{
    [Test]
    public void Archetype_HasFourValues()
    {
        // Arrange & Act
        var values = Enum.GetValues<Archetype>();

        // Assert
        values.Should().HaveCount(4);
    }

    [Test]
    public void Archetype_WarriorHasValue0()
    {
        // Arrange & Act & Assert
        ((int)Archetype.Warrior).Should().Be(0);
    }

    [Test]
    public void Archetype_MysticHasValue2()
    {
        // Arrange & Act & Assert
        ((int)Archetype.Mystic).Should().Be(2);
    }
}

[TestFixture]
public class ResourceTypeEnumTests
{
    [Test]
    public void ResourceType_HasTwoValues()
    {
        // Arrange & Act
        var values = Enum.GetValues<ResourceType>();

        // Assert
        values.Should().HaveCount(2);
    }

    [Test]
    public void ResourceType_StaminaHasValue0()
    {
        // Arrange & Act & Assert
        ((int)ResourceType.Stamina).Should().Be(0);
    }
}

[TestFixture]
public class ArchetypeDefinitionTests
{
    [Test]
    public void Create_WithValidData_ReturnsDefinition()
    {
        // Arrange & Act
        var definition = ArchetypeDefinition.Create(
            Archetype.Warrior,
            "Warrior",
            "The Unyielding Bulwark",
            "Warriors are the frontline fighters.",
            "You are the shield between the innocent and the horror.",
            "Tank / Melee DPS",
            ResourceType.Stamina,
            "Stand in the front, absorb damage, protect allies");

        // Assert
        definition.ArchetypeId.Should().Be(Archetype.Warrior);
        definition.DisplayName.Should().Be("Warrior");
        definition.PrimaryResource.Should().Be(ResourceType.Stamina);
        definition.IsPermanent.Should().BeTrue();
    }

    [Test]
    public void Create_WithNullDisplayName_ThrowsArgumentException()
    {
        // Arrange
        Action act = () => ArchetypeDefinition.Create(
            Archetype.Warrior,
            null!,  // Invalid
            "Tagline",
            "Description",
            "Selection",
            "Role",
            ResourceType.Stamina,
            "Playstyle");

        // Assert
        act.Should().Throw<ArgumentException>();
    }

    [Test]
    public void IsPermanent_AlwaysReturnsTrue()
    {
        // Arrange
        var definition = CreateValidDefinition(Archetype.Mystic);

        // Assert
        definition.IsPermanent.Should().BeTrue();
    }

    private static ArchetypeDefinition CreateValidDefinition(Archetype archetype) =>
        ArchetypeDefinition.Create(
            archetype,
            archetype.ToString(),
            "Test Tagline",
            "Test Description",
            "Test Selection Text",
            "Test Role",
            ResourceType.Stamina,
            "Test Playstyle");
}
```

---

## 11. Use Cases

### UC-001: View Archetype Selection List

**Actor:** Player  
**Precondition:** Player has completed Step 3 (Attributes)  
**Flow:** Enter Step 4 → Load all ArchetypeDefinitions → Display DisplayName, Tagline, CombatRole for each → Wait for selection  
**Postcondition:** Player sees all 4 archetype options

### UC-002: View Archetype Details

**Actor:** Player  
**Precondition:** Player is on Step 4 (Archetype)  
**Flow:** Select archetype → Load ArchetypeDefinition → Display Description, SelectionText, PlaystyleDescription → Show permanent warning  
**Postcondition:** Player sees full archetype details

### UC-003: Confirm Archetype Selection

**Actor:** Player  
**Precondition:** Player has selected an archetype  
**Flow:** Select "Confirm" → Validate selection → Lock archetype (permanent) → Proceed to Step 5  
**Postcondition:** Archetype is permanently assigned to character

---

## 12. User Stories

**US-001:** As a player, I want to see all four archetypes with their taglines so I can quickly understand each combat role.

**US-002:** As a player, I want to read the selection text for each archetype to understand the thematic identity before choosing.

**US-003:** As a player, I want to see a clear "permanent choice" warning before confirming my archetype selection.

**US-004:** As a player, I want to see the primary resource type (Stamina vs. Aether Pool) for each archetype so I understand resource management expectations.

---

## 13. Deliverable Checklist

### Enums

- [ ] `Archetype` enum with 4 values (Warrior, Skirmisher, Mystic, Adept)
- [ ] `ResourceType` enum with 2 values (Stamina, AetherPool)
- [ ] Explicit integer values assigned (0-3, 0-1)
- [ ] Full XML documentation with remarks

### ArchetypeDefinition Entity

- [ ] `ArchetypeDefinition` entity implementing `IEntity`
- [ ] All required properties (Id, ArchetypeId, DisplayName, etc.)
- [ ] Private constructor for EF Core
- [ ] `Create()` factory method with validation
- [ ] `GetSummary()` and `GetSelectionDisplay()` helper methods
- [ ] `IsPermanent` always returns true
- [ ] Full XML documentation

### Configuration Files

- [ ] `config/archetypes.json` created with 4 archetype definitions
- [ ] `config/schemas/archetypes.schema.json` created
- [ ] Schema validates against JSON file
- [ ] All required properties present in configuration

### Testing

- [ ] ~8 unit tests implemented
- [ ] All tests passing
- [ ] Edge cases covered (null validation, enum values)

---

## 14. Acceptance Criteria

### Functional

- [ ] `Archetype` enum has exactly 4 values
- [ ] `Archetype.Warrior` equals 0
- [ ] `Archetype.Skirmisher` equals 1
- [ ] `Archetype.Mystic` equals 2
- [ ] `Archetype.Adept` equals 3
- [ ] `ResourceType` enum has exactly 2 values
- [ ] `ResourceType.Stamina` equals 0
- [ ] `ResourceType.AetherPool` equals 1
- [ ] `ArchetypeDefinition.Create()` validates all required parameters
- [ ] `ArchetypeDefinition.IsPermanent` always returns true
- [ ] Mystic is the only archetype with `PrimaryResource = AetherPool`
- [ ] Configuration file contains all 4 archetypes

### Quality

- [ ] Build succeeds with 0 errors
- [ ] Build succeeds with 0 warnings
- [ ] All ~8 unit tests pass
- [ ] XML documentation complete for all public types
- [ ] Configuration validates against schema

---

## 15. Dependencies

### Required from Previous Phases

| Type      | Phase  | Usage                         |
| --------- | ------ | ----------------------------- |
| `IEntity` | v0.0.x | Interface for domain entities |

### Provides to Future Phases

| Type                  | Phase    | Usage                         |
| --------------------- | -------- | ----------------------------- |
| `Archetype`           | v0.17.3b | Resource bonus mapping        |
| `Archetype`           | v0.17.3c | Starting ability mapping      |
| `Archetype`           | v0.17.3d | Specialization availability   |
| `Archetype`           | v0.17.3e | Provider service lookup       |
| `Archetype`           | v0.17.3f | Application service           |
| `ResourceType`        | v0.17.3b | Resource bonus calculations   |
| `ArchetypeDefinition` | v0.17.3e | Provider returns definitions  |
| `ArchetypeDefinition` | v0.17.5  | Character creation UI display |

---

## 16. Future Considerations

### Deferred to v0.17.3b

- `ArchetypeResourceBonuses` value object
- HP, Stamina, AP, Movement bonuses per archetype
- `ArchetypeSpecialBonus` for Adept's consumable effectiveness

### Deferred to v0.17.3c

- `ArchetypeAbilityGrant` value object
- Starting abilities per archetype (3 abilities each)
- `AbilityType` enum (Active, Passive, Stance)

### Deferred to v0.17.3d

- `ArchetypeSpecializationMapping` value object
- Available specializations per archetype
- Recommended first specialization

### Deferred to v0.17.3e

- `IArchetypeProvider` interface
- `ArchetypeProvider` service with JSON loading
- Configuration loading and caching

### Deferred to v0.17.3f

- `IArchetypeApplicationService` interface
- `ArchetypeApplicationResult` value object
- `ArchetypePreview` value object
- Application logic for character creation

### Out of Scope for v0.17.3

- Archetype changing/respec mechanics
- Multi-archetype characters
- Archetype-specific questlines
- Advanced archetype variations

---

_Document Version: 1.0_  
_Last Updated: 2026-01-27_
