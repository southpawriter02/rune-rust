# v0.7.1a Design Specification: Room Display Panel

**Version:** 0.7.1a
**Parent:** v0.7.1 (Core Display Panels)
**Prerequisites:** v0.7.0c Complete (Application Shell - Game Window Layout)
**Status:** Design Complete
**Estimated Unit Tests:** ~8

---

## Table of Contents

1. [Overview](#1-overview)
2. [Feature Overview](#2-feature-overview)
3. [Architecture](#3-architecture)
4. [Room Display Panel](#4-room-display-panel)
5. [Room Display ViewModel](#5-room-display-viewmodel)
6. [Supporting ViewModels](#6-supporting-viewmodels)
7. [Value Converters](#7-value-converters)
8. [Styles](#8-styles)
9. [Data Model Changes](#9-data-model-changes)
10. [Logging Specifications](#10-logging-specifications)
11. [Unit Testing Requirements](#11-unit-testing-requirements)
12. [Use Cases](#12-use-cases)
13. [Deliverable Checklist](#13-deliverable-checklist)
14. [Acceptance Criteria](#14-acceptance-criteria)
15. [Dependencies](#15-dependencies)
16. [Future Considerations](#16-future-considerations)

---

## 1. Overview

### Purpose

This phase implements the room display panel that shows the current room's name, description, ASCII art (when defined), available exits, and visible entities. This is the primary view of the game world, occupying the MainContent region of the GameWindow.

### Key Deliverables

| Category | Items |
|----------|-------|
| **User Controls** | `RoomDisplayPanel` |
| **ViewModels** | `RoomDisplayViewModel`, `ExitViewModel`, `EntityViewModel`, `ItemViewModel` |
| **Converters** | `DirectionToSymbolConverter` |
| **Styles** | `RoomDisplayStyles.axaml` |
| **Tests** | ~8 unit tests |

### Design Principles

1. **Immersive Display**: ASCII art and rich descriptions for atmosphere
2. **Interactive Exits**: Clickable direction buttons for navigation
3. **Entity Awareness**: Clear visibility of monsters and items
4. **Reactive Updates**: Panel updates when room changes

---

## 2. Feature Overview

```
v0.7.1a Features
â”œâ”€â”€ Room Display Panel (UserControl)
â”‚   â”œâ”€â”€ Room name header
â”‚   â”œâ”€â”€ ASCII art section (conditional)
â”‚   â”œâ”€â”€ Art legend display
â”‚   â”œâ”€â”€ Room description text
â”‚   â”œâ”€â”€ Exit buttons section
â”‚   â””â”€â”€ Visible entities section
â”œâ”€â”€ Room Display ViewModel
â”‚   â”œâ”€â”€ Room name/description binding
â”‚   â”œâ”€â”€ ASCII art lines binding
â”‚   â”œâ”€â”€ Art legend binding
â”‚   â”œâ”€â”€ Exit collection
â”‚   â”œâ”€â”€ Visible monsters collection
â”‚   â”œâ”€â”€ Visible items collection
â”‚   â””â”€â”€ MoveToExitCommand
â”œâ”€â”€ Supporting ViewModels
â”‚   â”œâ”€â”€ ExitViewModel (direction, locked state)
â”‚   â”œâ”€â”€ EntityViewModel (monster display)
â”‚   â””â”€â”€ ItemViewModel (item display)
â”œâ”€â”€ Value Converters
â”‚   â””â”€â”€ DirectionToSymbolConverter
â””â”€â”€ Room Display Styles
    â”œâ”€â”€ ASCII art text style
    â”œâ”€â”€ Exit button style
    â””â”€â”€ Entity list style
```

---

## 3. Architecture

### Component Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       PRESENTATION LAYER                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  VIEWS                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      RoomDisplayPanel                              â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ - RoomNameHeader (TextBlock)                                      â”‚ â”‚
â”‚  â”‚ - AsciiArtSection (ItemsControl, conditional)                     â”‚ â”‚
â”‚  â”‚ - ArtLegendSection (ItemsControl, conditional)                    â”‚ â”‚
â”‚  â”‚ - DescriptionSection (TextBlock)                                  â”‚ â”‚
â”‚  â”‚ - ExitsSection (ItemsControl with Buttons)                        â”‚ â”‚
â”‚  â”‚ - EntitiesSection (ItemsControl)                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                   â”‚ DataContext                        â”‚
â”‚                                   â–¼                                    â”‚
â”‚  VIEWMODELS                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   RoomDisplayViewModel                             â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ + RoomName: string                                                â”‚ â”‚
â”‚  â”‚ + RoomDescription: string                                         â”‚ â”‚
â”‚  â”‚ + AsciiArt: IReadOnlyList<string>?                                â”‚ â”‚
â”‚  â”‚ + ArtLegend: IReadOnlyDictionary<char, string>?                   â”‚ â”‚
â”‚  â”‚ + HasAsciiArt: bool                                               â”‚ â”‚
â”‚  â”‚ + Exits: ObservableCollection<ExitViewModel>                      â”‚ â”‚
â”‚  â”‚ + VisibleMonsters: ObservableCollection<EntityViewModel>          â”‚ â”‚
â”‚  â”‚ + VisibleItems: ObservableCollection<ItemViewModel>               â”‚ â”‚
â”‚  â”‚ + MoveToExitCommand                                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                   â”‚                                    â”‚
â”‚  SUPPORTING VIEWMODELS            â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ExitViewModel  â”‚ â”‚  EntityViewModel    â”‚ â”‚   ItemViewModel     â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ + Direction     â”‚ â”‚ + Name              â”‚ â”‚ + Name              â”‚  â”‚
â”‚  â”‚ + IsLocked      â”‚ â”‚ + Symbol            â”‚ â”‚ + Symbol            â”‚  â”‚
â”‚  â”‚ + Symbol        â”‚ â”‚ + IsHostile         â”‚ â”‚ + IsQuestItem       â”‚  â”‚
â”‚  â”‚ + Label         â”‚ â”‚ + Description       â”‚ â”‚ + Description       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         APPLICATION LAYER                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                      IGameSessionService                           â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ + OnRoomChanged: event                                             â”‚â”‚
â”‚  â”‚ + ExecuteCommand(command): void                                    â”‚â”‚
â”‚  â”‚ + GetRoomArt(roomId): RoomArtDefinition?                           â”‚â”‚
â”‚  â”‚ + CurrentRoom: Room                                                â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ROOM UPDATE FLOW                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Player moves / Game starts
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   GameSessionService.OnRoomChanged                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Raises event with new Room entity                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              RoomDisplayViewModel.HandleRoomChanged(room)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. Update RoomName, RoomDescription                                   â”‚
â”‚  2. Fetch and update AsciiArt, ArtLegend                               â”‚
â”‚  3. Update Exits collection                                            â”‚
â”‚  4. Update VisibleMonsters, VisibleItems collections                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RoomDisplayPanel (UI Updates)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Bindings automatically refresh all UI elements                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Room Display Panel

### Panel Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ROOM DISPLAY PANEL                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚                            â•â•â• Dark Cave â•â•â•                             â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚  â”‚
â”‚  â”‚   â•”â•                                                           â•šâ•— â”‚  â”‚
â”‚  â”‚  â•”â•   ~~~   â–²   ~~~                                             â•šâ•—â”‚  â”‚
â”‚  â”‚ â•”â•    ~~~  â–²â–²â–²  ~~~    â˜                                         â•šâ•—  â”‚
â”‚  â”‚â•”â•         â–²â–²â–²â–²â–²                                                  â•šâ•— â”‚
â”‚  â”‚â•‘    â–‘â–‘     cave     â–‘â–‘                                            â•‘ â”‚
â”‚  â”‚â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚  Legend: ~ water  â–² stalagmite  â˜  skeleton  â–‘ shadow              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ You stand in a dark, damp cave. Water drips from stalactites      â”‚  â”‚
â”‚  â”‚ overhead. A skeletal figure guards the passage to the north.      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Exits:    [â†‘ North]    [â†’ East]                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ You see:   â˜  Skeleton (hostile)    ğŸ”‘ Rusty Key                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### XAML Implementation

**File:** `src/Presentation/RuneAndRust.Avalonia/Controls/RoomDisplayPanel.axaml`

```xml
<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:RuneAndRust.Avalonia.ViewModels"
             xmlns:conv="using:RuneAndRust.Avalonia.Converters"
             x:Class="RuneAndRust.Avalonia.Controls.RoomDisplayPanel"
             x:DataType="vm:RoomDisplayViewModel">
    
    <UserControl.Resources>
        <conv:DirectionToSymbolConverter x:Key="DirectionToSymbol" />
    </UserControl.Resources>
    
    <Design.DataContext>
        <vm:RoomDisplayViewModel />
    </Design.DataContext>
    
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Spacing="12" Margin="8">
            
            <!-- Room Name Header -->
            <TextBlock Text="{Binding RoomName}"
                       Classes="title"
                       HorizontalAlignment="Center"
                       Margin="0,8,0,16" />
            
            <!-- ASCII Art Section (conditional) -->
            <Border Classes="panel"
                    IsVisible="{Binding HasAsciiArt}"
                    Padding="16">
                <StackPanel Spacing="8">
                    <!-- Art Lines -->
                    <ItemsControl ItemsSource="{Binding AsciiArt}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding}"
                                           FontFamily="Consolas, Courier New, monospace"
                                           FontSize="12"
                                           Foreground="{StaticResource TextPrimaryBrush}" />
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    
                    <!-- Legend -->
                    <ItemsControl ItemsSource="{Binding ArtLegendItems}"
                                  IsVisible="{Binding HasArtLegend}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" Margin="0,0,16,0">
                                    <TextBlock Text="{Binding Symbol}"
                                               FontFamily="Consolas"
                                               Margin="0,0,4,0" />
                                    <TextBlock Text="{Binding Description}"
                                               Classes="muted" />
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Border>
            
            <!-- Room Description -->
            <Border Classes="panel" Padding="16">
                <TextBlock Text="{Binding RoomDescription}"
                           Classes="body"
                           TextWrapping="Wrap" />
            </Border>
            
            <!-- Exits Section -->
            <Border Classes="panel" Padding="12">
                <StackPanel>
                    <TextBlock Text="Exits:" Classes="secondary" Margin="0,0,0,8" />
                    <ItemsControl ItemsSource="{Binding Exits}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Button Classes="exit-button"
                                        Content="{Binding Label}"
                                        Command="{Binding $parent[UserControl].((vm:RoomDisplayViewModel)DataContext).MoveToExitCommand}"
                                        CommandParameter="{Binding Direction}"
                                        ToolTip.Tip="{Binding Tooltip}"
                                        Margin="0,0,8,0"
                                        Opacity="{Binding IsLocked, Converter={StaticResource BoolToOpacityConverter}}" />
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    
                    <!-- No exits message -->
                    <TextBlock Text="No visible exits."
                               Classes="muted"
                               IsVisible="{Binding !Exits.Count}" />
                </StackPanel>
            </Border>
            
            <!-- Visible Entities Section -->
            <Border Classes="panel" Padding="12"
                    IsVisible="{Binding HasVisibleEntities}">
                <StackPanel>
                    <TextBlock Text="You see:" Classes="secondary" Margin="0,0,0,8" />
                    
                    <!-- Monsters -->
                    <ItemsControl ItemsSource="{Binding VisibleMonsters}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" Margin="8,2">
                                    <TextBlock Text="{Binding Symbol}"
                                               Foreground="{StaticResource DamageColor}"
                                               Margin="0,0,8,0" />
                                    <TextBlock Text="{Binding DisplayText}"
                                               Classes="body" />
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    
                    <!-- Items -->
                    <ItemsControl ItemsSource="{Binding VisibleItems}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" Margin="8,2">
                                    <TextBlock Text="{Binding Symbol}"
                                               Foreground="{StaticResource AccentBrush}"
                                               Margin="0,0,8,0" />
                                    <TextBlock Text="{Binding Name}"
                                               Classes="body" />
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Border>
            
        </StackPanel>
    </ScrollViewer>
</UserControl>
```

**File:** `src/Presentation/RuneAndRust.Avalonia/Controls/RoomDisplayPanel.axaml.cs`

```csharp
namespace RuneAndRust.Avalonia.Controls;

using global::Avalonia.Controls;

/// <summary>
/// Panel control displaying the current room's state.
/// </summary>
public partial class RoomDisplayPanel : UserControl
{
    public RoomDisplayPanel()
    {
        InitializeComponent();
    }
}
```

---

## 5. Room Display ViewModel

**File:** `src/Presentation/RuneAndRust.Avalonia/ViewModels/RoomDisplayViewModel.cs`

```csharp
namespace RuneAndRust.Avalonia.ViewModels;

using CommunityToolkit.Mvvm.ComponentModel;
using CommunityToolkit.Mvvm.Input;
using RuneAndRust.Application.Interfaces;
using RuneAndRust.Domain.Entities;
using RuneAndRust.Domain.Enums;
using System.Collections.ObjectModel;
using Serilog;

/// <summary>
/// View model for the room display panel.
/// </summary>
public partial class RoomDisplayViewModel : ViewModelBase
{
    private readonly IGameSessionService? _gameSession;

    [ObservableProperty]
    private string _roomName = "Unknown Location";

    [ObservableProperty]
    private string _roomDescription = "You are in an unknown location.";

    [ObservableProperty]
    private IReadOnlyList<string>? _asciiArt;

    [ObservableProperty]
    private bool _hasAsciiArt;

    [ObservableProperty]
    private ObservableCollection<LegendItem> _artLegendItems = new();

    [ObservableProperty]
    private bool _hasArtLegend;

    [ObservableProperty]
    private ObservableCollection<ExitViewModel> _exits = new();

    [ObservableProperty]
    private ObservableCollection<EntityViewModel> _visibleMonsters = new();

    [ObservableProperty]
    private ObservableCollection<ItemViewModel> _visibleItems = new();

    [ObservableProperty]
    private bool _hasVisibleEntities;

    /// <summary>
    /// Creates a new RoomDisplayViewModel with game session.
    /// </summary>
    public RoomDisplayViewModel(IGameSessionService gameSession)
    {
        _gameSession = gameSession;
        _gameSession.OnRoomChanged += HandleRoomChanged;
        
        // Initialize with current room if available
        if (_gameSession.CurrentRoom is not null)
        {
            HandleRoomChanged(_gameSession.CurrentRoom);
        }
    }

    /// <summary>
    /// Design-time constructor.
    /// </summary>
    public RoomDisplayViewModel()
    {
        // Design-time sample data
        RoomName = "Dark Cave";
        RoomDescription = "A dark, damp cave. Water drips from stalactites overhead.";
        Exits.Add(new ExitViewModel(Direction.North, false));
        Exits.Add(new ExitViewModel(Direction.East, false));
        VisibleMonsters.Add(new EntityViewModel("Skeleton", "â˜ ", true, "A skeletal warrior"));
        VisibleItems.Add(new ItemViewModel("Rusty Key", "ğŸ”‘", false, "An old rusty key"));
        HasVisibleEntities = true;
    }

    /// <summary>
    /// Moves the player in the specified direction.
    /// </summary>
    [RelayCommand]
    private void MoveToExit(Direction direction)
    {
        Log.Information("Moving {Direction}", direction);
        _gameSession?.ExecuteCommand($"go {direction.ToString().ToLower()}");
    }

    private void HandleRoomChanged(Room room)
    {
        Log.Debug("Room changed to {RoomName}", room.Name);
        
        RoomName = room.Name;
        RoomDescription = room.Description;

        // Update ASCII art
        UpdateAsciiArt(room);

        // Update exits
        UpdateExits(room);

        // Update visible entities
        UpdateVisibleEntities(room);
    }

    private void UpdateAsciiArt(Room room)
    {
        var art = _gameSession?.GetRoomArt(room.Id);
        AsciiArt = art?.ArtLines;
        HasAsciiArt = art is not null;

        ArtLegendItems.Clear();
        if (art?.Legend is not null)
        {
            foreach (var (symbol, description) in art.Legend)
            {
                ArtLegendItems.Add(new LegendItem(symbol.ToString(), description));
            }
        }
        HasArtLegend = ArtLegendItems.Count > 0;
    }

    private void UpdateExits(Room room)
    {
        Exits.Clear();
        foreach (var exit in room.Exits)
        {
            Exits.Add(new ExitViewModel(exit.Direction, exit.IsLocked));
        }
    }

    private void UpdateVisibleEntities(Room room)
    {
        VisibleMonsters.Clear();
        foreach (var monster in room.Monsters.Where(m => m.IsAlive))
        {
            VisibleMonsters.Add(new EntityViewModel(
                monster.Name,
                GetMonsterSymbol(monster),
                monster.IsHostile,
                monster.Description));
        }

        VisibleItems.Clear();
        foreach (var item in room.Items)
        {
            VisibleItems.Add(new ItemViewModel(
                item.Name,
                GetItemSymbol(item),
                item.IsQuestItem,
                item.Description));
        }

        HasVisibleEntities = VisibleMonsters.Count > 0 || VisibleItems.Count > 0;
    }

    private static string GetMonsterSymbol(Monster monster)
    {
        return monster.MonsterType switch
        {
            "undead" => "â˜ ",
            "beast" => "ğŸº",
            "humanoid" => "ğŸ‘¤",
            _ => "â—†"
        };
    }

    private static string GetItemSymbol(Item item)
    {
        return item.ItemType switch
        {
            "key" => "ğŸ”‘",
            "weapon" => "âš”",
            "armor" => "ğŸ›¡",
            "potion" => "ğŸ§ª",
            "gold" => "ğŸ’°",
            _ => "â—‡"
        };
    }
}

/// <summary>
/// Legend item for ASCII art display.
/// </summary>
public record LegendItem(string Symbol, string Description);
```

---

## 6. Supporting ViewModels

**File:** `src/Presentation/RuneAndRust.Avalonia/ViewModels/ExitViewModel.cs`

```csharp
namespace RuneAndRust.Avalonia.ViewModels;

using RuneAndRust.Domain.Enums;

/// <summary>
/// View model representing a room exit.
/// </summary>
public record ExitViewModel(Direction Direction, bool IsLocked)
{
    /// <summary>
    /// Gets the directional arrow symbol.
    /// </summary>
    public string Symbol => Direction switch
    {
        Direction.North => "â†‘",
        Direction.South => "â†“",
        Direction.East => "â†’",
        Direction.West => "â†",
        Direction.Up => "â¬†",
        Direction.Down => "â¬‡",
        Direction.Northeast => "â†—",
        Direction.Northwest => "â†–",
        Direction.Southeast => "â†˜",
        Direction.Southwest => "â†™",
        _ => "?"
    };

    /// <summary>
    /// Gets the button label text.
    /// </summary>
    public string Label => $"{Symbol} {Direction}";

    /// <summary>
    /// Gets the tooltip text.
    /// </summary>
    public string Tooltip => IsLocked ? $"{Direction} (Locked)" : Direction.ToString();
}
```

**File:** `src/Presentation/RuneAndRust.Avalonia/ViewModels/EntityViewModel.cs`

```csharp
namespace RuneAndRust.Avalonia.ViewModels;

/// <summary>
/// View model representing a visible entity (monster).
/// </summary>
public record EntityViewModel(string Name, string Symbol, bool IsHostile, string Description)
{
    /// <summary>
    /// Gets the display text with hostility indicator.
    /// </summary>
    public string DisplayText => IsHostile ? $"{Name} (hostile)" : Name;
}
```

**File:** `src/Presentation/RuneAndRust.Avalonia/ViewModels/ItemViewModel.cs`

```csharp
namespace RuneAndRust.Avalonia.ViewModels;

/// <summary>
/// View model representing a visible item.
/// </summary>
public record ItemViewModel(string Name, string Symbol, bool IsQuestItem, string Description)
{
    /// <summary>
    /// Gets the display text with quest indicator.
    /// </summary>
    public string DisplayText => IsQuestItem ? $"{Name} (quest)" : Name;
}
```

---

## 7. Value Converters

**File:** `src/Presentation/RuneAndRust.Avalonia/Converters/DirectionToSymbolConverter.cs`

```csharp
namespace RuneAndRust.Avalonia.Converters;

using global::Avalonia.Data.Converters;
using RuneAndRust.Domain.Enums;
using System.Globalization;

/// <summary>
/// Converts Direction enum to arrow symbol.
/// </summary>
public class DirectionToSymbolConverter : IValueConverter
{
    public object Convert(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        if (value is not Direction direction)
            return "?";

        return direction switch
        {
            Direction.North => "â†‘",
            Direction.South => "â†“",
            Direction.East => "â†’",
            Direction.West => "â†",
            Direction.Up => "â¬†",
            Direction.Down => "â¬‡",
            _ => "?"
        };
    }

    public object ConvertBack(object? value, Type targetType, object? parameter, CultureInfo culture)
        => throw new NotImplementedException();
}
```

**File:** `src/Presentation/RuneAndRust.Avalonia/Converters/BoolToOpacityConverter.cs`

```csharp
namespace RuneAndRust.Avalonia.Converters;

using global::Avalonia.Data.Converters;
using System.Globalization;

/// <summary>
/// Converts boolean to opacity (for locked exits).
/// </summary>
public class BoolToOpacityConverter : IValueConverter
{
    public object Convert(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        if (value is bool isLocked)
            return isLocked ? 0.5 : 1.0;
        return 1.0;
    }

    public object ConvertBack(object? value, Type targetType, object? parameter, CultureInfo culture)
        => throw new NotImplementedException();
}
```

---

## 8. Styles

**File:** `src/Presentation/RuneAndRust.Avalonia/Styles/RoomDisplayStyles.axaml`

```xml
<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    
    <!-- Exit Button Style -->
    <Style Selector="Button.exit-button">
        <Setter Property="Background" Value="{StaticResource PrimaryBrush}" />
        <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
        <Setter Property="FontSize" Value="{StaticResource FontSizeBody}" />
        <Setter Property="Padding" Value="12,6" />
        <Setter Property="MinWidth" Value="80" />
        <Setter Property="CornerRadius" Value="4" />
        <Setter Property="Cursor" Value="Hand" />
    </Style>
    
    <Style Selector="Button.exit-button:pointerover">
        <Setter Property="Background" Value="{StaticResource PrimaryLightBrush}" />
    </Style>
    
    <Style Selector="Button.exit-button:pressed">
        <Setter Property="Background" Value="{StaticResource AccentBrush}" />
    </Style>
    
    <!-- ASCII Art Text Style -->
    <Style Selector="TextBlock.ascii-art">
        <Setter Property="FontFamily" Value="Consolas, Courier New, monospace" />
        <Setter Property="FontSize" Value="12" />
        <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
        <Setter Property="TextAlignment" Value="Left" />
    </Style>
    
    <!-- Room Title Style -->
    <Style Selector="TextBlock.room-title">
        <Setter Property="FontSize" Value="{StaticResource FontSizeXLarge}" />
        <Setter Property="FontWeight" Value="{StaticResource FontWeightBold}" />
        <Setter Property="Foreground" Value="{StaticResource TextAccentBrush}" />
    </Style>
    
</Styles>
```

---

## 9. Data Model Changes

### New Types

| Type | Layer | Description |
|------|-------|-------------|
| `RoomDisplayPanel` | Presentation | Room display UserControl |
| `RoomDisplayViewModel` | Presentation | Room state view model |
| `ExitViewModel` | Presentation | Exit display record |
| `EntityViewModel` | Presentation | Monster display record |
| `ItemViewModel` | Presentation | Item display record |
| `LegendItem` | Presentation | Art legend item record |
| `DirectionToSymbolConverter` | Presentation | Direction to arrow converter |
| `BoolToOpacityConverter` | Presentation | Locked state converter |

No domain or application layer changes required.

---

## 10. Logging Specifications

| Component | Level | Events |
|-----------|-------|--------|
| `RoomDisplayViewModel` | Information | Move commands |
| `RoomDisplayViewModel` | Debug | Room changes, entity updates |

---

## 11. Unit Testing Requirements

### Test Count by Feature

| Feature | Test Count |
|---------|------------|
| RoomDisplayViewModel | ~4 |
| ExitViewModel | ~2 |
| DirectionToSymbolConverter | ~2 |
| **Total** | **~8** |

### Test Specifications

**File:** `tests/RuneAndRust.Avalonia.UnitTests/ViewModels/RoomDisplayViewModelTests.cs`

```csharp
[TestFixture]
public class RoomDisplayViewModelTests
{
    [Test]
    public void Constructor_WithNoRoom_HasDefaultValues();

    [Test]
    public void HandleRoomChanged_UpdatesRoomName();

    [Test]
    public void HandleRoomChanged_UpdatesExits();

    [Test]
    public void MoveToExitCommand_ExecutesGoCommand();
}
```

**File:** `tests/RuneAndRust.Avalonia.UnitTests/ViewModels/ExitViewModelTests.cs`

```csharp
[TestFixture]
public class ExitViewModelTests
{
    [Test]
    public void Symbol_ForNorth_ReturnsUpArrow();

    [Test]
    public void Tooltip_WhenLocked_IndicatesLocked();
}
```

---

## 12. Use Cases

### UC-071a-001: View Current Room
**Actor:** Player
**Flow:** Enter room â†’ RoomDisplayPanel shows name, description, exits, entities

### UC-071a-002: View Room ASCII Art
**Actor:** Player
**Flow:** Enter room with art â†’ ASCII art displays with legend

### UC-071a-003: Navigate via Exit Button
**Actor:** Player
**Flow:** Click exit button â†’ MoveToExitCommand fires â†’ Player moves â†’ Panel updates

### UC-071a-004: View Visible Entities
**Actor:** Player
**Flow:** Enter room â†’ Monsters and items listed with symbols

---

## 13. Deliverable Checklist

### Controls
- [ ] `Controls/RoomDisplayPanel.axaml` created
- [ ] `Controls/RoomDisplayPanel.axaml.cs` created

### ViewModels
- [ ] `ViewModels/RoomDisplayViewModel.cs` created
- [ ] `ViewModels/ExitViewModel.cs` created
- [ ] `ViewModels/EntityViewModel.cs` created
- [ ] `ViewModels/ItemViewModel.cs` created

### Converters
- [ ] `Converters/DirectionToSymbolConverter.cs` created
- [ ] `Converters/BoolToOpacityConverter.cs` created

### Styles
- [ ] `Styles/RoomDisplayStyles.axaml` created

### Integration
- [ ] `App.axaml` includes RoomDisplayStyles
- [ ] GameWindow registers RoomDisplayPanel in MainContent region

### Testing
- [ ] ~8 unit tests implemented
- [ ] All tests passing

---

## 14. Acceptance Criteria

### Room Display
- [ ] Room name displays as header
- [ ] Room description displays in text area
- [ ] Description text wraps properly

### ASCII Art
- [ ] ASCII art renders with monospace font
- [ ] Art displays only when HasAsciiArt is true
- [ ] Legend displays when art has legend entries

### Exits
- [ ] Exit buttons display for each exit
- [ ] Exit buttons show direction arrows
- [ ] Clicking exit executes move command
- [ ] Locked exits appear dimmed

### Entities
- [ ] Visible monsters display with symbols
- [ ] Hostile monsters show "(hostile)" indicator
- [ ] Visible items display with symbols
- [ ] Section hidden when no entities

### Quality
- [ ] Build completes with 0 errors
- [ ] Build completes with 0 warnings
- [ ] ~8 unit tests pass
- [ ] Panel updates when room changes

---

## 15. Dependencies

### Required from v0.7.0c

| Type | Location | Usage |
|------|----------|-------|
| `GameWindow` | `Views/GameWindow.axaml` | MainContent region host |
| `IWindowLayoutService` | `Services/IWindowLayoutService.cs` | Panel registration |
| `PanelRegion.MainContent` | `Services/PanelRegion.cs` | Region identifier |
| Panel styles | `Styles/PanelStyles.axaml` | `.panel` class |

### Required from Application Layer

| Type | Location | Usage |
|------|----------|-------|
| `IGameSessionService` | Application layer | Room events, commands |
| `Room` | Domain layer | Room data |
| `Direction` | Domain layer | Exit directions |

### Provides to v0.7.1b

| Type | Usage |
|------|-------|
| ViewModel patterns | Reference for PlayerStatusViewModel |
| Converter patterns | Reference for stat converters |

---

## 16. Future Considerations

### Deferred to v0.7.1b
- **Player Status Panel**: RightSidebarTop region content
- **HealthBarControl**: Custom health bar control

### Deferred to v0.7.1c
- **Message Log Panel**: BottomContent region content

### Deferred to v0.7.2
- **Context menus**: Right-click on entities
- **Entity tooltips**: Detailed info on hover
- **Room transitions**: Fade animation between rooms

### Out of Scope
- **Interactive map**: v0.8.0+ feature
- **Room editing**: Developer tool, not player feature

---

*Document Version: 1.0*
*Last Updated: 2026-01-10*
*Author: Assistant*
