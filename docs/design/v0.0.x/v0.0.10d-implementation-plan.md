# v0.0.10d Implementation Plan: Implementation Specifications

**Version:** 0.0.10d
**Parent:** v0.0.10 (Documentation & Polish)
**Prerequisites:** v0.0.9 Complete, v0.0.5-v0.0.9 Implementations Complete
**Design Specification:** [v0.0.10d-design-specification.md](v0.0.10d-design-specification.md)
**Status:** Ready for Implementation
**Target Tests:** ~0 (documentation-only phase)

---

## Table of Contents

1. [Executive Summary](#executive-summary)
2. [Documentation Types](#documentation-types)
3. [Directory Structure](#directory-structure)
4. [Implementation Checklist](#implementation-checklist)
5. [Acceptance Criteria](#acceptance-criteria)
6. [File Summary](#file-summary)

---

## Executive Summary

### Purpose

Create comprehensive post-implementation documentation capturing how features were built, architectural decisions made, and use case specifications for all gameplay interactions. This documentation serves as a reference for future development and onboarding.

### Scope

- **In Scope:**
  - 6 Implementation Specifications (v0.0.4 through v0.0.9)
  - 7 Architecture Decision Records (ADRs)
  - 24 Use Case Documents (14 player, 10 system)
  - Documentation directory structure and READMEs
  - Cross-referencing between documents

- **Out of Scope:**
  - User-facing documentation (player guides)
  - External API documentation
  - Localization documentation

### Key Decisions

| Decision | Choice | Rationale |
|----------|--------|-----------|
| **Format** | Markdown | Version control friendly, IDE support |
| **Templates** | Standardized | Consistency across documents |
| **Organization** | By type + version | Easy navigation |

---

## Documentation Types

### Implementation Specifications

Post-implementation documents describing how features were built.

| Version | Feature | Source |
|---------|---------|--------|
| v0.0.4 | Classes & Abilities | Changelogs exist |
| v0.0.5 | Dice Pool System | After implementation |
| v0.0.6 | Enhanced Combat | After implementation |
| v0.0.7 | Equipment System | After implementation |
| v0.0.8 | Experience & Leveling | After implementation |
| v0.0.9 | Monster Variety & Loot | After implementation |

### Architecture Decision Records (ADRs)

Documents capturing key architectural decisions and rationale.

| ADR | Topic | Status |
|-----|-------|--------|
| ADR-001 | Clean Architecture | Accepted |
| ADR-002 | JSON Configuration System | Accepted |
| ADR-003 | Entity Framework Core Integration | Accepted |
| ADR-004 | Multiple Presentation Layers | Accepted |
| ADR-005 | NUnit Test Organization | Accepted |
| ADR-006 | Definition Entity Pattern | Accepted |
| ADR-007 | Resource System Design | Accepted |

### Use Case Documentation

Detailed interaction specifications for player and system actions.

**Player Use Cases (14):**
- UC-001 through UC-014: Create Character, Select Class, Navigate, Examine, Combat, Abilities, Inventory, Items, Equipment, Level Up, Dice, Skills, Flee, Loot

**System Use Cases (10):**
- UC-101 through UC-110: Turn End, Regeneration, Cooldowns, Monster AI, Status Effects, Loot Generation, Damage Calculation, Initiative, XP Award, Monster Spawn

---

## Directory Structure

```
docs/
‚îú‚îÄ‚îÄ architecture/                    # NEW
‚îÇ   ‚îú‚îÄ‚îÄ README.md
‚îÇ   ‚îú‚îÄ‚îÄ ADR-001-clean-architecture.md
‚îÇ   ‚îú‚îÄ‚îÄ ADR-002-json-configuration.md
‚îÇ   ‚îú‚îÄ‚îÄ ADR-003-entity-framework.md
‚îÇ   ‚îú‚îÄ‚îÄ ADR-004-presentation-layers.md
‚îÇ   ‚îú‚îÄ‚îÄ ADR-005-test-organization.md
‚îÇ   ‚îú‚îÄ‚îÄ ADR-006-definition-pattern.md
‚îÇ   ‚îî‚îÄ‚îÄ ADR-007-resource-system.md
‚îú‚îÄ‚îÄ use-cases/                       # NEW
‚îÇ   ‚îú‚îÄ‚îÄ README.md
‚îÇ   ‚îú‚îÄ‚îÄ player/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UC-001-create-character.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UC-002-select-class.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ... (12 more)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UC-014-collect-loot.md
‚îÇ   ‚îî‚îÄ‚îÄ system/
‚îÇ       ‚îú‚îÄ‚îÄ UC-101-process-turn-end.md
‚îÇ       ‚îú‚îÄ‚îÄ ... (8 more)
‚îÇ       ‚îî‚îÄ‚îÄ UC-110-spawn-monster.md
‚îî‚îÄ‚îÄ v0.0.x/
    ‚îî‚îÄ‚îÄ implementation-specifications/  # NEW
        ‚îú‚îÄ‚îÄ v0.0.4-implementation-specification.md
        ‚îú‚îÄ‚îÄ v0.0.5-implementation-specification.md
        ‚îú‚îÄ‚îÄ v0.0.6-implementation-specification.md
        ‚îú‚îÄ‚îÄ v0.0.7-implementation-specification.md
        ‚îú‚îÄ‚îÄ v0.0.8-implementation-specification.md
        ‚îî‚îÄ‚îÄ v0.0.9-implementation-specification.md
```

---

## Implementation Checklist

> **Legend:** üü¢ No dependencies | üü° Has dependencies | üî¥ Critical path
> **Complexity:** ‚≠ê Simple | ‚≠ê‚≠ê Moderate | ‚≠ê‚≠ê‚≠ê Complex

---

### Phase 1: Directory Structure

#### 1.1 Create Documentation Directories üü¢ ‚≠ê üî¥

- [ ] Create `docs/architecture/` directory
- [ ] Create `docs/use-cases/` directory
- [ ] Create `docs/use-cases/player/` directory
- [ ] Create `docs/use-cases/system/` directory
- [ ] Create `docs/v0.0.x/implementation-specifications/` directory

**Acceptance:** Directories exist and are committed.

---

### Phase 2: Architecture Decision Records

#### 2.1 Create Architecture README üü¢ ‚≠ê

**File:** `docs/architecture/README.md`

- [ ] Add overview of architectural approach
- [ ] List all ADRs with status and links
- [ ] Explain ADR format and process

**Acceptance:** README provides navigation to all ADRs.

---

#### 2.2 ADR-001: Clean Architecture üü¢ ‚≠ê‚≠ê

**File:** `docs/architecture/ADR-001-clean-architecture.md`

- [ ] **Context:** Need maintainable, testable architecture
- [ ] **Decision:** Clean Architecture with Domain/Application/Infrastructure/Presentation layers
- [ ] **Consequences:** Dependency inversion, testable domain, swappable infrastructure
- [ ] **Alternatives:** Traditional N-tier, CQRS, Microservices

**Acceptance:** ADR follows template, explains layer dependencies.

---

#### 2.3 ADR-002: JSON Configuration üü¢ ‚≠ê‚≠ê

**File:** `docs/architecture/ADR-002-json-configuration.md`

- [ ] **Context:** Game data should be configurable without code changes
- [ ] **Decision:** JSON files with DTOs ‚Üí Definition entities
- [ ] **Consequences:** Data-driven design, easy modding, requires validation
- [ ] **Details:** config/ directory, System.Text.Json, IGameConfigurationProvider

**Acceptance:** ADR explains configuration loading pipeline.

---

#### 2.4 ADR-003: Entity Framework Core üü¢ ‚≠ê‚≠ê

**File:** `docs/architecture/ADR-003-entity-framework.md`

- [ ] **Context:** Need to persist game sessions
- [ ] **Decision:** EF Core with private constructors
- [ ] **Consequences:** ORM benefits, careful entity design
- [ ] **Details:** Private parameterless constructors, GameDbContext, Repository pattern

**Acceptance:** ADR explains EF Core entity requirements.

---

#### 2.5 ADR-004: Presentation Layers üü¢ ‚≠ê‚≠ê

**File:** `docs/architecture/ADR-004-presentation-layers.md`

- [ ] **Context:** Support both TUI and GUI
- [ ] **Decision:** Shared ViewModels, presentation-specific adapters
- [ ] **Consequences:** Code reuse, adapter complexity
- [ ] **Details:** IInputHandler, IGameRenderer, Spectre.Console, Avalonia

**Acceptance:** ADR explains presentation abstraction.

---

#### 2.6 ADR-005: Test Organization üü¢ ‚≠ê‚≠ê

**File:** `docs/architecture/ADR-005-test-organization.md`

- [ ] **Context:** Need consistent, organized test structure
- [ ] **Decision:** NUnit + FluentAssertions + Moq, separate projects per layer
- [ ] **Consequences:** Clear organization, good tooling
- [ ] **Details:** Naming convention, project structure

**Acceptance:** ADR explains test organization and patterns.

---

#### 2.7 ADR-006: Definition Pattern üü¢ ‚≠ê‚≠ê

**File:** `docs/architecture/ADR-006-definition-pattern.md`

- [ ] **Context:** Need immutable, validated configuration entities
- [ ] **Decision:** init properties + static Create() factories
- [ ] **Consequences:** Consistent validation, immutability
- [ ] **Details:** JSON deserialization path, validation in factory

**Acceptance:** ADR explains Definition entity pattern.

---

#### 2.8 ADR-007: Resource System üü¢ ‚≠ê‚≠ê

**File:** `docs/architecture/ADR-007-resource-system.md`

- [ ] **Context:** Different classes need different resource mechanics
- [ ] **Decision:** Configurable ResourceTypeDefinition with regen/decay
- [ ] **Consequences:** Flexible class design, turn processing complexity
- [ ] **Details:** ResourcePool, combat/non-combat rates, turn-end processing

**Acceptance:** ADR explains resource system architecture.

---

### Phase 3: Use Case Documentation

#### 3.1 Create Use Case README üü¢ ‚≠ê

**File:** `docs/use-cases/README.md`

- [ ] Explain use case format
- [ ] List all player use cases with links
- [ ] List all system use cases with links
- [ ] Explain actor types

**Acceptance:** README provides navigation to all use cases.

---

#### 3.2 Player Use Cases (14) üü° ‚≠ê‚≠ê

**Directory:** `docs/use-cases/player/`

- [ ] UC-001: Create Character (v0.0.3)
- [ ] UC-002: Select Class (v0.0.4)
- [ ] UC-003: Navigate Dungeon (v0.0.2)
- [ ] UC-004: Examine Environment (v0.0.2)
- [ ] UC-005: Engage in Combat (v0.0.2)
- [ ] UC-006: Use Ability (v0.0.4)
- [ ] UC-007: Manage Inventory (v0.0.2)
- [ ] UC-008: Use Item (v0.0.2)
- [ ] UC-009: Equip Item (v0.0.7)
- [ ] UC-010: Level Up (v0.0.8)
- [ ] UC-011: Roll Dice (v0.0.5)
- [ ] UC-012: Skill Check (v0.0.5)
- [ ] UC-013: Flee Combat (v0.0.6)
- [ ] UC-014: Collect Loot (v0.0.9)

**Template for each:**
- Description, Preconditions, Basic Flow, Alternative Flows, Exception Flows, Postconditions, Business Rules, Related Use Cases

**Acceptance:** All use cases follow template with complete flows.

---

#### 3.3 System Use Cases (10) üü° ‚≠ê‚≠ê

**Directory:** `docs/use-cases/system/`

- [ ] UC-101: Process Turn End (v0.0.4)
- [ ] UC-102: Regenerate Resources (v0.0.4)
- [ ] UC-103: Reduce Cooldowns (v0.0.4)
- [ ] UC-104: Monster Turn (v0.0.6)
- [ ] UC-105: Apply Status Effects (v0.0.6)
- [ ] UC-106: Generate Loot (v0.0.9)
- [ ] UC-107: Calculate Damage (v0.0.9)
- [ ] UC-108: Roll Initiative (v0.0.6)
- [ ] UC-109: Award Experience (v0.0.8)
- [ ] UC-110: Spawn Monster (v0.0.9)

**Acceptance:** All system use cases documented with triggers and outcomes.

---

### Phase 4: Implementation Specifications

#### 4.1 v0.0.4 Implementation Specification üü¢ ‚≠ê‚≠ê‚≠ê

**File:** `docs/v0.0.x/implementation-specifications/v0.0.4-implementation-specification.md`

- [ ] **Overview:** Classes & Abilities summary, key features, deviations
- [ ] **Architecture:** Layer diagram, key patterns, dependencies
- [ ] **Data Model:** Entities (Definitions), Value Objects, Player extensions
- [ ] **Services:** ClassService, ResourceService, AbilityService, GameSessionService
- [ ] **Configuration:** JSON files, schema examples
- [ ] **Testing:** Test coverage, key scenarios
- [ ] **Limitations:** Current limits, future improvements
- [ ] **References:** Link to ADRs and use cases

**Acceptance:** Complete spec following template.

---

#### 4.2 v0.0.5 Implementation Specification üü° ‚≠ê‚≠ê‚≠ê

**File:** `docs/v0.0.x/implementation-specifications/v0.0.5-implementation-specification.md`
**Depends on:** v0.0.5 implementation complete

- [ ] **Overview:** Dice Pool System summary
- [ ] **Architecture:** DiceService integration
- [ ] **Data Model:** DicePool, DiceRollResult, SkillDefinition
- [ ] **Services:** DiceService, SkillCheckService
- [ ] **Configuration:** Skill definitions, dice notation
- [ ] **Testing:** Coverage areas
- [ ] **References:** Link related docs

**Acceptance:** Complete spec following template.

---

#### 4.3 v0.0.6 Implementation Specification üü° ‚≠ê‚≠ê‚≠ê

**File:** `docs/v0.0.x/implementation-specifications/v0.0.6-implementation-specification.md`
**Depends on:** v0.0.6 implementation complete

- [ ] **Overview:** Enhanced Combat summary
- [ ] **Architecture:** Multi-monster combat flow
- [ ] **Data Model:** CombatEncounter, InitiativeRoll, StatusEffectDefinition
- [ ] **Services:** InitiativeService, MonsterAIService, StatusEffectService
- [ ] **Configuration:** AI behaviors, status effects
- [ ] **Testing:** Coverage areas
- [ ] **References:** Link related docs

**Acceptance:** Complete spec following template.

---

#### 4.4 v0.0.7 Implementation Specification üü° ‚≠ê‚≠ê‚≠ê

**File:** `docs/v0.0.x/implementation-specifications/v0.0.7-implementation-specification.md`
**Depends on:** v0.0.7 implementation complete

- [ ] **Overview:** Equipment System summary
- [ ] **Architecture:** Equipment slot design
- [ ] **Data Model:** EquipmentSlot, WeaponDefinition, ArmorDefinition
- [ ] **Services:** EquipmentService
- [ ] **Configuration:** Equipment definitions
- [ ] **Testing:** Coverage areas
- [ ] **References:** Link related docs

**Acceptance:** Complete spec following template.

---

#### 4.5 v0.0.8 Implementation Specification üü° ‚≠ê‚≠ê‚≠ê

**File:** `docs/v0.0.x/implementation-specifications/v0.0.8-implementation-specification.md`
**Depends on:** v0.0.8 implementation complete

- [ ] **Overview:** Experience & Leveling summary
- [ ] **Architecture:** XP and progression flow
- [ ] **Data Model:** Level thresholds, stat gains
- [ ] **Services:** ExperienceService, ProgressionService
- [ ] **Configuration:** Progression tables
- [ ] **Testing:** Coverage areas
- [ ] **References:** Link related docs

**Acceptance:** Complete spec following template.

---

#### 4.6 v0.0.9 Implementation Specification üü° ‚≠ê‚≠ê‚≠ê

**File:** `docs/v0.0.x/implementation-specifications/v0.0.9-implementation-specification.md`
**Depends on:** v0.0.9 implementation complete

- [ ] **Overview:** Monster Variety & Loot summary
- [ ] **Architecture:** Monster spawning, loot generation
- [ ] **Data Model:** MonsterDefinition, DamageTypeDefinition, TierDefinition, LootTable
- [ ] **Services:** MonsterService, DamageCalculationService, TierService, LootService
- [ ] **Configuration:** monsters.json, currency.json, loot tables
- [ ] **Testing:** Coverage areas
- [ ] **References:** Link related docs

**Acceptance:** Complete spec following template.

---

### Implementation Order Summary

```
Phase 1: Directory Structure
  1.1 Create directories ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                                          ‚Üì
Phase 2: Architecture Decision Records (Parallel)
  2.1 Architecture README
  2.2-2.8 ADR-001 through ADR-007 (7 ADRs)
                                                          ‚Üì
Phase 3: Use Case Documentation (Parallel)
  3.1 Use Case README
  3.2 Player Use Cases (14)
  3.3 System Use Cases (10)
                                                          ‚Üì
Phase 4: Implementation Specifications
  4.1 v0.0.4 ‚Üê Can create now (changelogs exist)
  4.2-4.6 v0.0.5-v0.0.9 ‚Üê After respective implementations
```

### Estimated Effort

| Phase | Files | Complexity | Est. Time |
|-------|-------|------------|-----------|
| Directory Structure | 5 dirs | ‚≠ê | 15 min |
| Architecture README | 1 | ‚≠ê | 30 min |
| ADRs | 7 | ‚≠ê‚≠ê | 3 hours |
| Use Case README | 1 | ‚≠ê | 30 min |
| Player Use Cases | 14 | ‚≠ê‚≠ê | 4 hours |
| System Use Cases | 10 | ‚≠ê‚≠ê | 3 hours |
| v0.0.4 Impl Spec | 1 | ‚≠ê‚≠ê‚≠ê | 2 hours |
| v0.0.5-9 Impl Specs | 5 | ‚≠ê‚≠ê‚≠ê | 8 hours |
| **Total** | **~40** | | **~21 hours** |

---

## Acceptance Criteria

### Implementation Specifications

- [ ] v0.0.4 Implementation Specification complete
- [ ] v0.0.5-v0.0.9 Implementation Specifications complete (after implementations)
- [ ] All specs follow template structure
- [ ] All specs have cross-references to ADRs and use cases

### Architecture Decision Records

- [ ] All 7 ADRs complete (ADR-001 through ADR-007)
- [ ] All ADRs follow template with Context, Decision, Consequences, Alternatives
- [ ] Architecture README provides overview and navigation

### Use Case Documentation

- [ ] All 14 player use cases documented
- [ ] All 10 system use cases documented
- [ ] Use cases follow template with flows and business rules
- [ ] Use cases organized by actor type

### Organization

- [ ] Documentation directory structure created
- [ ] README files in each directory
- [ ] Cross-references between documents working

---

## File Summary

### Directories to Create (5)

| Directory | Purpose |
|-----------|---------|
| `docs/architecture/` | ADRs and architecture overview |
| `docs/use-cases/` | Use case overview |
| `docs/use-cases/player/` | Player interaction use cases |
| `docs/use-cases/system/` | System/automated use cases |
| `docs/v0.0.x/implementation-specifications/` | Post-implementation docs |

### Files to Create (~40)

| Category | Count | Description |
|----------|-------|-------------|
| README files | 2 | Architecture and Use Case overviews |
| ADRs | 7 | Architecture Decision Records |
| Player Use Cases | 14 | UC-001 through UC-014 |
| System Use Cases | 10 | UC-101 through UC-110 |
| Implementation Specs | 6 | v0.0.4 through v0.0.9 |
| **Total** | **~40** | |

---

## Provides to Future Development

### Onboarding

- ADRs explain architectural choices
- Use cases document expected behaviors
- Implementation specs capture design decisions

### Maintenance

- ADRs guide future architectural decisions
- Use cases serve as acceptance criteria
- Implementation specs document extension points

### Documentation Generation

- Markdown-based, DocFX compatible
- Cross-referenced for navigation
- Template-based for consistency

---

*This implementation plan establishes comprehensive post-implementation documentation capturing architectural decisions, use case specifications, and implementation details for all major features.*
