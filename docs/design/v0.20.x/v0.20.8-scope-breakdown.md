# v0.20.8 Scope Breakdown: Seiðkona (Seeress)

**Version:** 0.20.8
**Theme:** Seiðkona Specialization Implementation
**Prerequisites:** v0.20.7 Complete (Veiðimaðr Specialization)
**Total Estimated Tests:** ~25 new tests

---

## Executive Summary

v0.20.8 implements the **Seiðkona** (Seeress) specialization — the traditional Aether magic practitioner for the Mystic archetype. The Seiðkona is the **only Mystic archetype specialization** in the v0.20.x series and the **final Heretical path specialization** to be implemented. These practitioners channel the raw Aether that permeates Aethelgard, building Resonance through casting until they can unleash devastating magical effects. Their abilities emphasize magical damage, divination, and battlefield control — but at the risk of Corruption.

> _"The Aether speaks to those who know how to listen."_

The work is divided into **3 sub-phases**:

| Phase    | Name                         | Focus                                                                | Est. Tests |
| -------- | ---------------------------- | -------------------------------------------------------------------- | ---------- |
| v0.20.8a | Framework & Tier 1 Abilities | Aether Resonance resource, Seiðr Bolt, Wyrd Sight, Aether Attunement | ~10        |
| v0.20.8b | Tier 2 Abilities             | Fate's Thread, Weave Disruption, Resonance Cascade                   | ~8         |
| v0.20.8c | Tier 3 Abilities & Capstone  | Völva's Vision, Aether Storm, Unraveling                             | ~7         |

---

## Specialization Profile

### Seiðkona Identity

| Attribute            | Value                                           |
| -------------------- | ----------------------------------------------- |
| **Display Name**     | Seiðkona                                        |
| **Pronunciation**    | SAY-th-koh-nah                                  |
| **Translation**      | Seeress / Practitioner of Seiðr (Old Norse)     |
| **Archetype**        | Mystic                                          |
| **Path Type**        | Heretical                                       |
| **Role**             | Traditional Aether Magic / Divination / Control |
| **Special Resource** | Aether Resonance (Max 10)                       |
| **Tagline**          | "Weaver of the Wyrd"                            |

### Thematic Elements

The Seiðkona represents the dangerous path of those who tap directly into the Aether — the mystical energy that flows through Aethelgard since the World-Machine's fall. Unlike the practical crafters or healers who follow the Coherent path, the Seiðkona embraces the Heretical traditions of their Norse ancestors, channeling raw magical power at the risk of Corruption. They are seers who glimpse fate, weavers who manipulate reality, and destructive forces who can unleash the accumulated Aether in devastating attacks.

**Design Principles:**

1. **Heretical Power**: High magical output but with Corruption risk
2. **Resonance Building**: Power accumulates through casting, rewarding sustained engagement
3. **Divination Focus**: Abilities reveal hidden information and predict enemy actions
4. **Aetheric Damage**: Specialized damage type tied to the setting's metaphysics
5. **Risk-Reward Capstone**: Unraveling unleashes all accumulated Resonance for massive damage

### Heretical Path — Corruption Risk

As a Heretical path specialization, the Seiðkona risks Corruption:

| Trigger                               | Corruption Risk       |
| ------------------------------------- | --------------------- |
| Casting at 5+ Resonance               | Low (5% per cast)     |
| Casting at 8+ Resonance               | Medium (15% per cast) |
| Casting at 10 Resonance               | High (25% per cast)   |
| Using Capstone (Unraveling)           | Moderate (20%)        |
| Casting in Aetheric instability zones | +10% to all risks     |
| Casting against Coherent targets      | +5% to all risks      |

**Corruption Integration:**

- Seiðkona abilities integrate with CorruptionService (v0.18.x)
- High Resonance states trigger Corruption checks
- Capstone use has guaranteed Corruption check
- Corruption thresholds may affect ability effectiveness

---

## Feature Analysis & Categorization

### From v0.20.x-overview.md — Ability Tier Structure

| Ability           | Tier | Type     | Complexity | Assigned Phase |
| ----------------- | ---- | -------- | ---------- | -------------- |
| Seiðr Bolt        | T1   | Attack   | Medium     | **v0.20.8a**   |
| Wyrd Sight        | T1   | Active   | Medium     | **v0.20.8a**   |
| Aether Attunement | T1   | Passive  | Low        | **v0.20.8a**   |
| Fate's Thread     | T2   | Active   | High       | **v0.20.8b**   |
| Weave Disruption  | T2   | Active   | Medium     | **v0.20.8b**   |
| Resonance Cascade | T2   | Passive  | Medium     | **v0.20.8b**   |
| Völva's Vision    | T3   | Active   | Medium     | **v0.20.8c**   |
| Aether Storm      | T3   | Attack   | High       | **v0.20.8c**   |
| Unraveling        | Cap  | Ultimate | High       | **v0.20.8c**   |

### From v0.20.x-overview.md — Special Resource

| Feature                           | Complexity | Dependencies      | Assigned Phase |
| --------------------------------- | ---------- | ----------------- | -------------- |
| Aether Resonance (Max 10)         | Medium     | Resource System   | **v0.20.8a**   |
| Resonance gain (casting)          | Medium     | Ability execution | **v0.20.8a**   |
| Resonance decay (rest/time)       | Low        | Rest System       | **v0.20.8a**   |
| Resonance thresholds (5+, 8+, 10) | Medium     | Combat bonuses    | **v0.20.8b**   |
| Corruption risk at high Resonance | High       | CorruptionService | **v0.20.8a**   |

---

## Phase Definitions

---

## v0.20.8a: Framework & Tier 1 Abilities

[v0.20.8a Design Specification](v0.20.8a-design-specification.md)

### Overview

This phase establishes the Seiðkona specialization framework including the Aether Resonance building resource system, Corruption risk integration, and implements the three Tier 1 abilities that define the core mystic identity: magical attack, detection/divination, and passive AP enhancement.

### Scope

**In Scope:**

- `SeiðkonaSpecialization` registration with v0.17.4 framework
- `AetherResonanceResource` special resource implementation (Max 10)
- Resonance gain mechanics (from casting)
- Resonance decay mechanics (on rest)
- Corruption risk integration at high Resonance
- Seiðr Bolt attack ability (2d6 Aetheric damage, +1 Resonance)
- Wyrd Sight active ability (see invisible, detect magic)
- Aether Attunement passive ability (+10% AP regeneration)
- Ability slot initialization for Seiðkona
- Configuration entries in `specializations.json` and `abilities.json`

**Out of Scope:**

- Tier 2 abilities (v0.20.8b)
- Tier 3 abilities and Capstone (v0.20.8c)
- Future Mystic specializations (v0.21.x+)

### Key Deliverables

| Type                    | Count | Details                                                                               |
| ----------------------- | ----- | ------------------------------------------------------------------------------------- |
| Domain Value Objects    | 4     | `AetherResonanceResource`, `SeiðrBoltResult`, `WyrdSightResult`, `ResonanceGainEvent` |
| Domain Enums            | 3     | `SeiðkonaAbilityId`, `ResonanceThreshold`, `AetherDetectionType`                      |
| Application Services    | 2     | `AetherResonanceService`, `SeiðkonaAbilityService`                                    |
| Ability Implementations | 3     | Seiðr Bolt, Wyrd Sight, Aether Attunement                                             |
| Corruption Integration  | 1     | High-Resonance Corruption checks                                                      |
| Configuration           | 2     | `specializations.json` updates, `abilities.json` updates                              |
| Unit Tests              | ~10   |                                                                                       |

### Data Model Changes

```
NEW: AetherResonanceResource (Value Object)
├── CurrentResonance: int (0-10)
├── MaxResonance: int (10)
├── ResonanceThreshold: ResonanceThreshold (computed)
├── LastGainedAt: DateTime?
├── GainsThisCombat: int
├── CorruptionRiskModifier: float (computed from threshold)
└── Methods:
    ├── GainResonance(int amount): ResonanceGainEvent
    ├── SpendResonance(int amount): bool
    ├── SpendAllResonance(): int
    ├── DecayResonance(int amount): int
    ├── GetCorruptionRisk(): float
    ├── IsAtThreshold(ResonanceThreshold threshold): bool
    ├── ResetOnRest(): void
    └── GetDescription(): string

NEW: SeiðrBoltResult (Value Object)
├── CasterId: Guid
├── CasterName: string
├── TargetId: Guid
├── TargetName: string
├── AttackRoll: int
├── HitSuccess: bool
├── DamageRoll: int (2d6)
├── DamageType: DamageType (Aetheric)
├── TotalDamage: int
├── ResonanceBefore: int
├── ResonanceAfter: int
├── ResonanceGained: int (+1)
├── CorruptionCheckTriggered: bool
├── CorruptionGained: int?
└── Methods:
    ├── GetDamageBreakdown(): string
    ├── GetResonanceChange(): string
    ├── TriggeredCorruptionCheck(): bool
    └── GetFullDescription(): string

NEW: WyrdSightResult (Value Object)
├── CasterId: Guid
├── Duration: int (turns)
├── InvisibleCreaturesRevealed: IReadOnlyList<Guid>
├── MagicalAurasDetected: IReadOnlyList<MagicalAuraInfo>
├── MagicalItemsDetected: IReadOnlyList<Guid>
├── AetherSourcesDetected: IReadOnlyList<Position>
├── ResonanceGained: int (+1)
├── ActivatedAt: DateTime
└── Methods:
    ├── GetRevealedCount(): int
    ├── HasDetections(): bool
    ├── GetDescription(): string
    └── IsStillActive(int currentTurn): bool

NEW: ResonanceGainEvent (Value Object)
├── CharacterId: Guid
├── AbilityUsed: string
├── ResonanceBefore: int
├── ResonanceGained: int
├── ResonanceAfter: int
├── ThresholdCrossed: ResonanceThreshold?
├── CorruptionCheckRequired: bool
├── GainedAt: DateTime
└── Methods:
    ├── CrossedThreshold(): bool
    ├── GetDescription(): string
    └── GetCorruptionRisk(): float

NEW: MagicalAuraInfo (Value Object)
├── SourceId: Guid
├── SourceType: string (Creature, Item, Location)
├── AuraStrength: string (Faint, Moderate, Strong)
├── MagicSchool: string? (if identifiable)
├── Position: Position
└── Methods:
    ├── GetDescription(): string
    └── IsDangerous(): bool

NEW: ResonanceThreshold (Enum)
├── None - 0-4 Resonance, no risk
├── Low - 5-7 Resonance, 5% Corruption per cast
├── Medium - 8-9 Resonance, 15% Corruption per cast
├── High - 10 Resonance, 25% Corruption per cast

NEW: SeiðkonaAbilityId (Enum)
├── SeiðrBolt
├── WyrdSight
├── AetherAttunement
├── FatesThread
├── WeaveDisruption
├── ResonanceCascade
├── VölvasVision
├── AetherStorm
└── Unraveling

NEW: AetherDetectionType (Enum)
├── Invisible - Hidden creatures
├── Magical - Active magical effects
├── Enchanted - Magical items
├── AetherSource - Ley lines, nodes
├── Corruption - Heretical presence
└── Glitch - Reality anomalies

MODIFY: Character (Entity)
├── ADD: AetherResonance: AetherResonanceResource?
├── ADD: ApRegenerationBonus: float (from Aether Attunement)
└── ADD: WyrdSightActive: bool
```

### Tier 1 Ability Specifications

#### Seiðr Bolt (Attack)

| Property            | Value                             |
| ------------------- | --------------------------------- |
| **ID**              | `seidr-bolt`                      |
| **Type**            | Attack                            |
| **AP Cost**         | 2 AP                              |
| **Range**           | 8 spaces                          |
| **Effect**          | 2d6 Aetheric damage, +1 Resonance |
| **Corruption Risk** | Based on current Resonance        |

**Mechanics:**

- Make a magical attack roll against target
- Deal 2d6 Aetheric damage on hit
- Gain +1 Aether Resonance regardless of hit/miss
- Aetheric damage type — few creatures resist it
- Attack roll uses Intelligence or Wisdom modifier
- Does not require a weapon
- Can be used while holding items in both hands
- Corruption check triggered if at 5+ Resonance after casting

**Damage Calculation:**
| Component | Value |
|-----------|-------|
| Base Damage | 2d6 |
| Damage Type | Aetheric |
| Scaling | None (consistent damage) |
| Average | 7 damage |
| Range | 2-12 damage |

**Resonance Interaction:**
| Before Cast | After Cast | Corruption Check? |
|-------------|------------|-------------------|
| 0-3 | 1-4 | No |
| 4 | 5 | Yes (5%) |
| 5-6 | 6-7 | Yes (5%) |
| 7 | 8 | Yes (15%) |
| 8 | 9 | Yes (15%) |
| 9 | 10 | Yes (25%) |
| 10 | 10 (capped) | Yes (25%) |

#### Wyrd Sight (Active)

| Property            | Value                       |
| ------------------- | --------------------------- |
| **ID**              | `wyrd-sight`                |
| **Type**            | Active                      |
| **AP Cost**         | 2 AP                        |
| **Duration**        | 3 turns                     |
| **Effect**          | See invisible, detect magic |
| **Resonance**       | +1 Resonance                |
| **Corruption Risk** | Based on current Resonance  |

**Mechanics:**

- Activate to gain magical sight for 3 turns
- See invisible creatures within 12 spaces
- Detect active magical effects on creatures/objects
- Detect magical items (glow faintly)
- Sense Aether sources (ley lines, nodes) within 20 spaces
- Gain +1 Resonance on activation
- Detection is passive while active — no additional checks needed
- Revealed creatures remain visible for duration

**Detection Ranges:**
| Detection Type | Range |
|----------------|-------|
| Invisible Creatures | 12 spaces |
| Magical Effects | 12 spaces |
| Magical Items | 12 spaces |
| Aether Sources | 20 spaces |
| Corruption/Glitch | 6 spaces |

**Revealed Information:**
| Target Type | Information Shown |
|-------------|-------------------|
| Invisible Creature | Position, outline |
| Magical Effect | School (if known), strength |
| Magical Item | Glow intensity (power level) |
| Aether Source | Direction, distance |

#### Aether Attunement (Passive)

| Property            | Value                |
| ------------------- | -------------------- |
| **ID**              | `aether-attunement`  |
| **Type**            | Passive              |
| **Effect**          | +10% AP regeneration |
| **Corruption Risk** | None (passive)       |

**Mechanics:**

- Permanently gain +10% bonus to AP regeneration rate
- Always active while conscious
- Stacks with other AP regeneration bonuses
- Does not grant Resonance (passive ability)
- Represents attunement to the Aether flow
- Allows more frequent casting over long encounters

**AP Regeneration Calculation:**
| Base Regen | Bonus | Total |
|------------|-------|-------|
| 2 AP/round | +0.2 | 2.2 AP/round (rounds to 2) |
| 3 AP/round | +0.3 | 3.3 AP/round (rounds to 3) |
| Effect | Every 5th round, gain +1 extra AP |

**Practical Effect:**

- Over 10 rounds: +1 extra AP
- Over 20 rounds: +2 extra AP
- Sustained combat rewards the Seiðkona

### User-Facing Changes

**Commands:**

```
> ability seidr-bolt <target>      # Attack with Aetheric bolt
> ability wyrd-sight               # Activate magical sight
> status                           # Shows Resonance: 5/10 [LOW THRESHOLD]
> resonance                        # Show detailed resonance info
```

**Output Example:**

```
╔══════════════════════════════════════════════════════════════╗
║  SEIÐKONA - Yrsa Wyrdweaver                                  ║
╠══════════════════════════════════════════════════════════════╣
║  HP: 24/24    Defense: 10    AP: 5/6                         ║
║  Aether Resonance: █████░░░░░ 5/10 [LOW THRESHOLD]           ║
║                                                              ║
║  ⚠ Corruption Risk: 5% per cast                              ║
║                                                              ║
║  [Aether Attunement] +10% AP regeneration                    ║
║  [HERETICAL] Corruption risk at high Resonance               ║
╚══════════════════════════════════════════════════════════════╝

> seidr-bolt "Corrupted Sentinel"

You channel the Aether into a bolt of raw energy...
Attack Roll: 17 vs Defense 12 - HIT!
╔══════════════════════════════════════════════════════════════╗
║  SEIÐR BOLT                                                  ║
╠══════════════════════════════════════════════════════════════╣
║  Target: Corrupted Sentinel                                  ║
║  Damage: 9 Aetheric (2d6: 4+5)                               ║
║                                                              ║
║  Resonance: 5 → 6/10                                         ║
║  [CORRUPTION CHECK] Roll: 87 vs 5% — No Corruption           ║
╚══════════════════════════════════════════════════════════════╝

> wyrd-sight

Your eyes shimmer with otherworldly light...
╔══════════════════════════════════════════════════════════════╗
║  WYRD SIGHT ACTIVATED (3 turns)                              ║
╠══════════════════════════════════════════════════════════════╣
║  Invisible Creatures Revealed:                               ║
║    • Shadow Lurker (6 spaces NE)                             ║
║                                                              ║
║  Magical Auras Detected:                                     ║
║    • Enchanted Blade (Ally's weapon) - Moderate              ║
║    • Protective Ward (Door) - Strong                         ║
║                                                              ║
║  Aether Sources:                                             ║
║    • Ley Line Node (15 spaces W)                             ║
║                                                              ║
║  Resonance: 6 → 7/10                                         ║
║  [CORRUPTION CHECK] Roll: 42 vs 5% — No Corruption           ║
╚══════════════════════════════════════════════════════════════╝
```

### Acceptance Criteria

- [ ] Seiðkona specialization registered in SpecializationDefinition
- [ ] Aether Resonance initializes at 0/10
- [ ] Aether Resonance tracks current value and thresholds
- [ ] Seiðr Bolt deals 2d6 Aetheric damage and grants +1 Resonance
- [ ] Seiðr Bolt triggers Corruption check at 5+ Resonance
- [ ] Wyrd Sight reveals invisible creatures and magical auras
- [ ] Wyrd Sight lasts 3 turns and grants +1 Resonance
- [ ] Aether Attunement grants +10% AP regeneration
- [ ] Corruption risk scales with Resonance threshold (5%/15%/25%)
- [ ] Resonance capped at 10
- [ ] No Corruption risk below 5 Resonance
- [ ] Ability slots correctly show Tier 1 abilities as unlocked
- [ ] ~10 unit tests pass

---

## v0.20.8b: Tier 2 Abilities

[v0.20.8b Design Specification](v0.20.8b-design-specification.md)

### Overview

This phase implements the three Tier 2 abilities that expand the Seiðkona's magical capabilities with enemy action prediction, spell disruption, and a powerful passive that reduces spell costs at high Resonance.

### Scope

**In Scope:**

- Fate's Thread active ability (glimpse enemy's next action)
- Weave Disruption active ability (dispel one magical effect)
- Resonance Cascade passive ability (at 5+ Resonance, spells cost -2 AP)
- Tier 2 unlock validation (requires 8 PP invested in tree)
- PP cost enforcement (4 PP per Tier 2 ability)
- Divination and dispel integration

**Out of Scope:**

- Tier 3 abilities and Capstone (v0.20.8c)
- Aether Resonance modifications (established in v0.20.8a)

### Key Deliverables

| Type                    | Count | Details                                                               |
| ----------------------- | ----- | --------------------------------------------------------------------- |
| Domain Value Objects    | 3     | `FatesThreadResult`, `WeaveDisruptionResult`, `ResonanceCascadeState` |
| Domain Enums            | 2     | `EnemyActionType`, `DispelDifficulty`                                 |
| Ability Implementations | 3     | Fate's Thread, Weave Disruption, Resonance Cascade                    |
| Combat Integration      | 2     | Action prediction, dispel mechanics                                   |
| Unit Tests              | ~8    |                                                                       |

### Tier 2 Ability Specifications

#### Fate's Thread (Active)

| Property            | Value                          |
| ------------------- | ------------------------------ |
| **ID**              | `fates-thread`                 |
| **Type**            | Active                         |
| **AP Cost**         | 3 AP                           |
| **Range**           | 10 spaces                      |
| **Effect**          | Glimpse enemy's next action    |
| **Resonance**       | +1 Resonance                   |
| **PP Cost**         | 4 PP to unlock                 |
| **Prerequisite**    | 8 PP invested in Seiðkona tree |
| **Corruption Risk** | Based on current Resonance     |

**Mechanics:**

- Target one enemy within range
- GM reveals the enemy's intended action for their next turn
- Information includes: action type, target (if applicable), and movement
- Does not reveal exact damage or success chance
- Enemy is unaware their intention was divined
- Gain +1 Resonance
- Information persists until enemy acts or 2 turns pass
- Enemy may change action if circumstances change dramatically

**Information Revealed:**
| Action Category | Details Shown |
|-----------------|---------------|
| Attack | Target, attack type (melee/ranged/magic) |
| Movement | Direction, approximate distance |
| Ability | Ability name, general target |
| Defend | Defensive stance type |
| Flee | Escape route direction |
| Special | General description |

**Limitations:**
| Limitation | Description |
|------------|-------------|
| One target | Cannot divine multiple enemies |
| Duration | Info valid for 2 turns max |
| Uncertainty | Major events may change enemy plans |
| Boss creatures | May have resistance (GM discretion) |

#### Weave Disruption (Active)

| Property            | Value                          |
| ------------------- | ------------------------------ |
| **ID**              | `weave-disruption`             |
| **Type**            | Active                         |
| **AP Cost**         | 3 AP                           |
| **Range**           | 6 spaces                       |
| **Effect**          | Dispel one magical effect      |
| **Resonance**       | +1 Resonance                   |
| **PP Cost**         | 4 PP to unlock                 |
| **Prerequisite**    | 8 PP invested in Seiðkona tree |
| **Corruption Risk** | Based on current Resonance     |

**Mechanics:**

- Target one magical effect on a creature, object, or area
- Attempt to dispel the effect
- Dispel check: d20 + Resonance vs DC based on effect strength
- On success, magical effect is removed
- Gain +1 Resonance regardless of success
- Can target beneficial or harmful effects
- Cannot dispel inherent magical abilities (only cast effects)
- Cannot dispel Corruption (that requires specialized purification)

**Dispel DC by Effect Strength:**
| Effect Strength | Base DC |
|-----------------|---------|
| Weak (Tier 1) | 10 |
| Moderate (Tier 2) | 14 |
| Strong (Tier 3) | 18 |
| Powerful (Capstone) | 22 |
| Legendary | 26+ |

**Dispel Check:**
| Component | Value |
|-----------|-------|
| Roll | 1d20 |
| Bonus | Current Resonance |
| vs DC | Effect strength DC |
| Success | Effect dispelled |
| Failure | Effect persists, still gain Resonance |

**Dispellable Effects:**
| Can Dispel | Cannot Dispel |
|------------|---------------|
| Buffs | Innate abilities |
| Debuffs | Racial features |
| Magical barriers | Corruption |
| Enchantments (temp) | Permanent enchantments |
| Summoned creatures | Natural creatures |
| Illusions | Non-magical concealment |

#### Resonance Cascade (Passive)

| Property            | Value                              |
| ------------------- | ---------------------------------- |
| **ID**              | `resonance-cascade`                |
| **Type**            | Passive                            |
| **Effect**          | At 5+ Resonance, spells cost -2 AP |
| **PP Cost**         | 4 PP to unlock                     |
| **Prerequisite**    | 8 PP invested in Seiðkona tree     |
| **Corruption Risk** | None (passive)                     |

**Mechanics:**

- When at 5 or more Resonance, all Seiðkona spells cost 2 less AP
- Minimum spell cost is 1 AP (cannot reduce to 0)
- Encourages maintaining high Resonance despite Corruption risk
- Applies to: Seiðr Bolt, Wyrd Sight, Fate's Thread, Weave Disruption, Völva's Vision, Aether Storm
- Does not apply to Unraveling (capstone has special rules)
- Creates risk-reward tension with Corruption threshold

**AP Cost Reduction:**
| Ability | Normal Cost | At 5+ Resonance |
|---------|-------------|-----------------|
| Seiðr Bolt | 2 AP | 1 AP (minimum) |
| Wyrd Sight | 2 AP | 1 AP (minimum) |
| Fate's Thread | 3 AP | 1 AP |
| Weave Disruption | 3 AP | 1 AP |
| Völva's Vision | 4 AP | 2 AP |
| Aether Storm | 5 AP | 3 AP |
| Unraveling | 6 AP | 6 AP (no reduction) |

**Risk-Reward Balance:**
| Resonance | AP Benefit | Corruption Risk |
|-----------|------------|-----------------|
| 0-4 | None | None |
| 5-7 | -2 AP | 5% per cast |
| 8-9 | -2 AP | 15% per cast |
| 10 | -2 AP | 25% per cast |

### Data Model Changes

```
NEW: FatesThreadResult (Value Object)
├── CasterId: Guid
├── TargetId: Guid
├── TargetName: string
├── IntendedAction: EnemyActionType
├── ActionDescription: string
├── ActionTarget: Guid?
├── ActionTargetName: string?
├── IntendedMovement: string?
├── ValidForTurns: int (2)
├── DivinedAt: DateTime
├── ResonanceGained: int (+1)
├── CorruptionCheckTriggered: bool
└── Methods:
    ├── GetFullDescription(): string
    ├── IsStillValid(int turnsPassed): bool
    ├── GetActionSummary(): string
    └── GetTargetInfo(): string

NEW: WeaveDisruptionResult (Value Object)
├── CasterId: Guid
├── TargetEffectId: Guid
├── TargetEffectName: string
├── EffectOwner: Guid
├── DispelRoll: int (d20 + Resonance)
├── DispelDc: int
├── Success: bool
├── EffectDispelled: bool
├── ResonanceGained: int (+1)
├── CorruptionCheckTriggered: bool
└── Methods:
    ├── GetResultDescription(): string
    ├── GetDispelBreakdown(): string
    ├── WasSuccessful(): bool
    └── GetMarginOfSuccess(): int

NEW: ResonanceCascadeState (Value Object)
├── OwnerId: Guid
├── IsActive: bool (computed from Resonance >= 5)
├── ApReduction: int (2)
├── MinimumApCost: int (1)
├── AffectedAbilities: IReadOnlyList<string>
└── Methods:
    ├── GetReducedCost(int baseCost): int
    ├── IsAbilityAffected(string abilityId): bool
    ├── GetDescription(): string
    └── GetCurrentState(): string

NEW: EnemyActionType (Enum)
├── MeleeAttack - Physical close range
├── RangedAttack - Physical at distance
├── SpellCast - Magical ability
├── Movement - Repositioning
├── Defend - Taking defensive action
├── UseAbility - Special ability
├── Flee - Attempting to escape
├── Interact - Environmental interaction
└── Unknown - Cannot determine

NEW: DispelDifficulty (Enum)
├── Weak - DC 10 (Tier 1 effects)
├── Moderate - DC 14 (Tier 2 effects)
├── Strong - DC 18 (Tier 3 effects)
├── Powerful - DC 22 (Capstone effects)
└── Legendary - DC 26+ (Ancient magic)
```

### Acceptance Criteria

- [ ] Tier 2 abilities locked until 8 PP invested in tree
- [ ] Each Tier 2 ability costs 4 PP to unlock
- [ ] Fate's Thread reveals enemy's intended next action
- [ ] Fate's Thread grants +1 Resonance
- [ ] Weave Disruption attempts dispel with d20 + Resonance vs DC
- [ ] Weave Disruption grants +1 Resonance regardless of success
- [ ] Resonance Cascade reduces spell costs by 2 AP at 5+ Resonance
- [ ] Resonance Cascade does not reduce below 1 AP minimum
- [ ] Resonance Cascade does not affect Unraveling capstone
- [ ] Corruption checks trigger at appropriate thresholds
- [ ] ~8 unit tests pass

---

## v0.20.8c: Tier 3 Abilities & Capstone

[v0.20.8c Design Specification](v0.20.8c-design-specification.md)

### Overview

This phase implements the two Tier 3 abilities and the Capstone ultimate that represent the pinnacle of Seiðkona mastery, including revealing all hidden enemies, devastating area damage, and the signature Unraveling that unleashes all accumulated Aetheric damage.

### Scope

**In Scope:**

- Völva's Vision active ability (reveal all hidden enemies in area)
- Aether Storm attack ability (4d6 damage to all enemies in cone)
- Unraveling ultimate ability (at 10 Resonance: massive accumulated damage)
- Tier 3 unlock validation (requires 16 PP invested in tree)
- Capstone unlock validation (requires 24 PP invested in tree)
- PP cost enforcement (5 PP per Tier 3, 6 PP for Capstone)
- Resonance consumption mechanics for capstone

**Out of Scope:**

- Future Mystic specializations (v0.21.x Echo-Caller)
- v0.21.x+ content

### Key Deliverables

| Type                    | Count | Details                                                       |
| ----------------------- | ----- | ------------------------------------------------------------- |
| Domain Value Objects    | 3     | `VölvasVisionResult`, `AetherStormResult`, `UnravelingResult` |
| Domain Enums            | 1     | `ConeDirection`                                               |
| Ability Implementations | 3     | Völva's Vision, Aether Storm, Unraveling                      |
| Combat Integration      | 3     | Area reveal, cone damage, Resonance explosion                 |
| Unit Tests              | ~7    |                                                               |

### Tier 3 & Capstone Ability Specifications

#### Völva's Vision (Active)

| Property            | Value                             |
| ------------------- | --------------------------------- |
| **ID**              | `völvas-vision`                   |
| **Type**            | Active                            |
| **AP Cost**         | 4 AP (2 AP with Cascade)          |
| **Range**           | 15 spaces (radius)                |
| **Effect**          | Reveal all hidden enemies in area |
| **Resonance**       | +1 Resonance                      |
| **PP Cost**         | 5 PP to unlock                    |
| **Prerequisite**    | 16 PP invested in Seiðkona tree   |
| **Corruption Risk** | Based on current Resonance        |

**Mechanics:**

- Reveal all hidden, invisible, or concealed enemies within 15 spaces
- Includes: invisible, hidden in shadows, disguised, shapeshifted
- Revealed enemies lose concealment benefits for 2 turns
- Does not reveal traps (use Veiðimaðr for that)
- Enemies are aware they have been detected
- Enhanced version of Wyrd Sight focused on enemy detection
- Gain +1 Resonance
- Triggers Corruption check at appropriate threshold

**Revelation Types:**
| Hidden State | Revealed? | Duration |
|--------------|-----------|----------|
| Invisible | Yes | 2 turns |
| Hidden (stealth) | Yes | 2 turns |
| Disguised | Yes | Permanent |
| Shapeshifted | Detected (not revealed) | 2 turns |
| Ethereal | Partial (location only) | 2 turns |
| Phased | No | — |

**Comparison with Wyrd Sight:**
| Feature | Wyrd Sight (T1) | Völva's Vision (T3) |
|---------|-----------------|---------------------|
| Range | 12 spaces | 15 spaces |
| Duration | 3 turns | Instant reveal |
| Targets | Individual detection | All enemies |
| Effect | See invisible | Remove concealment |
| Magical detection | Yes | No (enemy focus) |

#### Aether Storm (Attack)

| Property            | Value                             |
| ------------------- | --------------------------------- |
| **ID**              | `aether-storm`                    |
| **Type**            | Attack                            |
| **AP Cost**         | 5 AP (3 AP with Cascade)          |
| **Range**           | 8 spaces (cone origin)            |
| **Area**            | 6 space cone                      |
| **Effect**          | 4d6 damage to all enemies in cone |
| **Resonance**       | +2 Resonance                      |
| **PP Cost**         | 5 PP to unlock                    |
| **Prerequisite**    | 16 PP invested in Seiðkona tree   |
| **Corruption Risk** | Based on current Resonance        |

**Mechanics:**

- Unleash a cone of Aetheric energy
- All enemies in cone take 4d6 Aetheric damage
- Save for half damage (DC = 10 + Resonance)
- Cone is 6 spaces long, 4 spaces wide at end
- Does not harm allies (controlled Aether)
- Gain +2 Resonance (significant gain)
- High Resonance gain makes this risky at moderate Resonance
- Devastating against groups but expensive

**Cone Dimensions:**

```
    ╱ ╲
   ╱   ╲
  ╱     ╲
 ╱       ╲
╱    4    ╲   <- 4 spaces wide at end

    6 spaces long

     (S)      <- Seiðkona position
```

**Damage Calculation:**
| Component | Value |
|-----------|-------|
| Base Damage | 4d6 |
| Damage Type | Aetheric |
| Average | 14 damage |
| Range | 4-24 damage |
| Save | Half damage |
| Save DC | 10 + current Resonance |

**Save DC Examples:**
| Resonance | Save DC |
|-----------|---------|
| 3 | DC 13 |
| 5 | DC 15 |
| 8 | DC 18 |
| 10 | DC 20 |

#### Unraveling (Ultimate/Capstone)

| Property            | Value                                          |
| ------------------- | ---------------------------------------------- |
| **ID**              | `unraveling`                                   |
| **Type**            | Ultimate                                       |
| **AP Cost**         | 6 AP (no Cascade reduction)                    |
| **Requirement**     | Must be at 10 Resonance                        |
| **Range**           | 10 spaces                                      |
| **Effect**          | Target suffers all accumulated Aetheric damage |
| **Cooldown**        | Once per long rest                             |
| **PP Cost**         | 6 PP to unlock                                 |
| **Prerequisite**    | 24 PP invested in Seiðkona tree                |
| **Corruption Risk** | 20% (guaranteed check)                         |

**Mechanics:**

- Can only be used when at exactly 10 Resonance
- Target one enemy within range
- Deal damage equal to total Aetheric damage dealt this combat
- Consumes all 10 Resonance (resets to 0)
- Guaranteed Corruption check at 20% risk
- Represents unleashing the entire accumulated Aether pattern
- Extremely powerful but requires buildup and carries risk
- Once per long rest (cannot chain multiple Unravelings)

**Damage Calculation:**

- Tracks all Aetheric damage dealt by this Seiðkona this combat
- Sources: Seiðr Bolt, Aether Storm
- Example: 5 Seiðr Bolts (avg 7 each) + 1 Aether Storm (avg 14) = 49 accumulated
- Unraveling deals 49 damage to single target

**Accumulated Damage Tracking:**
| Round | Action | Damage | Running Total |
|-------|--------|--------|---------------|
| 1 | Seiðr Bolt | 8 | 8 |
| 2 | Seiðr Bolt | 5 | 13 |
| 3 | Seiðr Bolt | 9 | 22 |
| 4 | Aether Storm | 16 | 38 |
| 5 | Seiðr Bolt | 7 | 45 |
| 6 | Seiðr Bolt | 6 | 51 |
| 7 | **UNRAVELING** | **51** | Reset to 0 |

**Requirements Summary:**
| Requirement | Status |
|-------------|--------|
| At 10 Resonance | Required |
| Long rest cooldown available | Required |
| Valid target | Required |
| 6 AP available | Required |
| Corruption check | Guaranteed (20%) |

**Risk-Reward Analysis:**
| Risk | Reward |
|------|--------|
| 20% Corruption chance | Massive single-target damage |
| Resets Resonance to 0 | Eliminates ongoing Corruption risk |
| Once per long rest | Can eliminate priority targets |
| Requires combat buildup | Rewards sustained magical engagement |

### Data Model Changes

```
NEW: VölvasVisionResult (Value Object)
├── CasterId: Guid
├── CasterName: string
├── AreaRadius: int (15)
├── EnemiesRevealed: IReadOnlyList<RevealedEnemyInfo>
├── TotalRevealed: int
├── RevealDuration: int (2 turns)
├── ResonanceGained: int (+1)
├── CorruptionCheckTriggered: bool
├── CastAt: DateTime
└── Methods:
    ├── GetFullDescription(): string
    ├── GetRevealedList(): string
    ├── HasReveals(): bool
    └── GetRevealedCount(): int

NEW: RevealedEnemyInfo (Value Object)
├── EnemyId: Guid
├── EnemyName: string
├── HiddenType: string (Invisible, Hidden, Disguised)
├── Position: Position
├── TurnsRevealed: int
└── Methods:
    ├── GetDescription(): string
    └── IsStillRevealed(int turnsPassed): bool

NEW: AetherStormResult (Value Object)
├── CasterId: Guid
├── CasterName: string
├── ConeOrigin: Position
├── ConeDirection: ConeDirection
├── ConeLength: int (6)
├── ConeWidth: int (4)
├── EnemiesHit: IReadOnlyList<AetherStormHit>
├── TotalDamageDealt: int
├── BaseDamageRoll: int (4d6)
├── SaveDc: int (10 + Resonance)
├── ResonanceGained: int (+2)
├── CorruptionCheckTriggered: bool
└── Methods:
    ├── GetFullDescription(): string
    ├── GetDamageBreakdown(): string
    ├── GetHitCount(): int
    └── GetTotalDamage(): int

NEW: AetherStormHit (Value Object)
├── TargetId: Guid
├── TargetName: string
├── SaveRoll: int
├── SaveSuccess: bool
├── DamageTaken: int
├── WasFullDamage: bool
└── Methods:
    ├── GetDescription(): string
    └── GetSaveResult(): string

NEW: UnravelingResult (Value Object)
├── CasterId: Guid
├── CasterName: string
├── TargetId: Guid
├── TargetName: string
├── AccumulatedDamage: int
├── DamageDealt: int (equals accumulated)
├── ResonanceBefore: int (10)
├── ResonanceAfter: int (0)
├── DamageSources: IReadOnlyList<DamageSourceEntry>
├── CorruptionCheckTriggered: bool (always true)
├── CorruptionCheckRoll: int
├── CorruptionGained: int?
├── CooldownResetAt: DateTime
└── Methods:
    ├── GetFullDescription(): string
    ├── GetDamageBreakdown(): string
    ├── GetSourceList(): string
    ├── WasCorruptionGained(): bool
    └── GetTotalAccumulated(): int

NEW: DamageSourceEntry (Value Object)
├── AbilityUsed: string
├── DamageDealt: int
├── Turn: int
├── TargetName: string
└── Methods:
    ├── GetDescription(): string

NEW: ConeDirection (Enum)
├── North
├── Northeast
├── East
├── Southeast
├── South
├── Southwest
├── West
└── Northwest
```

### Acceptance Criteria

- [ ] Tier 3 abilities locked until 16 PP invested in tree
- [ ] Capstone locked until 24 PP invested in tree
- [ ] Tier 3 abilities cost 5 PP each to unlock
- [ ] Capstone costs 6 PP to unlock
- [ ] Völva's Vision reveals all hidden enemies within 15 spaces
- [ ] Völva's Vision removes concealment for 2 turns
- [ ] Aether Storm deals 4d6 to all enemies in cone
- [ ] Aether Storm grants +2 Resonance
- [ ] Aether Storm save DC equals 10 + Resonance
- [ ] Unraveling requires exactly 10 Resonance
- [ ] Unraveling deals total accumulated Aetheric damage
- [ ] Unraveling resets Resonance to 0
- [ ] Unraveling triggers guaranteed 20% Corruption check
- [ ] Unraveling is once per long rest
- [ ] Accumulated damage tracking works correctly
- [ ] ~7 unit tests pass

---

## Dependencies & Prerequisites

```
v0.17.3 (Archetype System) - REQUIRED
    │
    └── Mystic archetype foundation
                                    │
                                    ▼
v0.17.4 (Specialization Framework) - REQUIRED
    │
    ├── SpecializationDefinition entity
    ├── SpecializationPathType enum (includes Heretical)
    ├── SpecializationId enum (includes Seiðkona)
    ├── SpecialResourceDefinition
    └── Tier unlock mechanics (8/16/24 PP)
                                    │
                                    ▼
v0.10.x (Status Effect System) - REQUIRED
    │
    ├── StatusEffectService
    ├── Buff/debuff tracking
    └── Dispel targets
                                    │
                                    ▼
v0.18.x (Corruption System) - REQUIRED
    │
    ├── CorruptionService
    ├── Corruption checks
    ├── Heretical path integration
    └── Corruption thresholds
                                    │
                                    ▼
v0.20.0 (Legacy Class Removal) - REQUIRED
    │
    ├── IAbilitySlotService
    ├── ISpecializationPrerequisiteService
    └── Migration infrastructure
                                    │
                                    ▼
v0.20.1-v0.20.7 (Prior Specializations) - REQUIRED
    │
    └── Establish specialization ability patterns
                                    │
                                    ▼
v0.20.8 (Seiðkona)
    │
    ├── v0.20.8a: Framework & Tier 1 ──────────────────┐
    │       ├── AetherResonanceResource                │
    │       ├── Final Heretical specialization         │
    │       ├── Corruption integration                 │
    │       ├── Seiðr Bolt                             │
    │       ├── Wyrd Sight                             │
    │       └── Aether Attunement                      │
    │                                                  │
    ├── v0.20.8b: Tier 2 Abilities ───────────────────┤
    │       Dependencies: v0.20.8a                     │
    │       ├── Fate's Thread                          │
    │       ├── Weave Disruption                       │
    │       └── Resonance Cascade                      │
    │                                                  │
    └── v0.20.8c: Tier 3 & Capstone ──────────────────┘
            Dependencies: v0.20.8a, v0.20.8b
            ├── Völva's Vision
            ├── Aether Storm
            └── Unraveling
```

---

## Aether Resonance Resource

### Resource Specification

```csharp
/// <summary>
/// Special resource for Seiðkona specialization.
/// Aether Resonance builds through casting, enabling powerful effects
/// but risking Corruption at high levels.
/// </summary>
public sealed record AetherResonanceResource
{
    /// <summary>Current Resonance level (0-10).</summary>
    public int CurrentResonance { get; private set; }

    /// <summary>Maximum Resonance (always 10).</summary>
    public int MaxResonance { get; init; } = 10;

    /// <summary>Total Aetheric damage dealt this combat (for Unraveling).</summary>
    public int AccumulatedAethericDamage { get; private set; }

    /// <summary>Current threshold level.</summary>
    public ResonanceThreshold Threshold => CurrentResonance switch
    {
        >= 10 => ResonanceThreshold.High,
        >= 8 => ResonanceThreshold.Medium,
        >= 5 => ResonanceThreshold.Low,
        _ => ResonanceThreshold.None
    };

    /// <summary>Current Corruption risk percentage.</summary>
    public float CorruptionRisk => Threshold switch
    {
        ResonanceThreshold.High => 0.25f,
        ResonanceThreshold.Medium => 0.15f,
        ResonanceThreshold.Low => 0.05f,
        _ => 0f
    };

    /// <summary>
    /// Gains Resonance from casting.
    /// </summary>
    public ResonanceGainEvent GainResonance(int amount, string abilityUsed)
    {
        var before = CurrentResonance;
        CurrentResonance = Math.Min(CurrentResonance + amount, MaxResonance);
        var after = CurrentResonance;

        var oldThreshold = before switch
        {
            >= 10 => ResonanceThreshold.High,
            >= 8 => ResonanceThreshold.Medium,
            >= 5 => ResonanceThreshold.Low,
            _ => ResonanceThreshold.None
        };

        var newThreshold = Threshold;
        var crossedThreshold = newThreshold > oldThreshold ? newThreshold : null;

        return new ResonanceGainEvent
        {
            ResonanceBefore = before,
            ResonanceGained = after - before,
            ResonanceAfter = after,
            ThresholdCrossed = crossedThreshold,
            CorruptionCheckRequired = after >= 5,
            AbilityUsed = abilityUsed
        };
    }

    /// <summary>
    /// Tracks Aetheric damage for Unraveling.
    /// </summary>
    public void TrackAethericDamage(int damage)
    {
        AccumulatedAethericDamage += damage;
    }

    /// <summary>
    /// Spends all Resonance (for Unraveling).
    /// </summary>
    public int SpendAllResonance()
    {
        var spent = CurrentResonance;
        CurrentResonance = 0;
        return spent;
    }

    /// <summary>
    /// Gets accumulated damage and resets tracking (for Unraveling).
    /// </summary>
    public int ConsumeAccumulatedDamage()
    {
        var damage = AccumulatedAethericDamage;
        AccumulatedAethericDamage = 0;
        return damage;
    }

    /// <summary>
    /// Resets Resonance on rest.
    /// </summary>
    public void ResetOnRest()
    {
        CurrentResonance = 0;
        AccumulatedAethericDamage = 0;
    }

    /// <summary>
    /// Checks if at required Resonance for Unraveling.
    /// </summary>
    public bool CanUnravel() => CurrentResonance == MaxResonance;
}
```

### Resource Acquisition & Consumption

| Action           | Effect               |
| ---------------- | -------------------- |
| Seiðr Bolt       | +1 Resonance         |
| Wyrd Sight       | +1 Resonance         |
| Fate's Thread    | +1 Resonance         |
| Weave Disruption | +1 Resonance         |
| Völva's Vision   | +1 Resonance         |
| Aether Storm     | +2 Resonance         |
| Unraveling       | Consume all (10 → 0) |
| Short Rest       | No change            |
| Long Rest        | Reset to 0           |

### Corruption Risk Thresholds

| Threshold  | Resonance | Risk per Cast | Effect           |
| ---------- | --------- | ------------- | ---------------- |
| None       | 0-4       | 0%            | Safe casting     |
| Low        | 5-7       | 5%            | Minor risk       |
| Medium     | 8-9       | 15%           | Moderate risk    |
| High       | 10        | 25%           | Significant risk |
| Unraveling | N/A       | 20%           | Guaranteed check |

---

## Configuration Updates

### specializations.json

```json
{
    "specializations": [
        {
            "specializationId": "Seiðkona",
            "displayName": "Seiðkona",
            "tagline": "Weaver of the Wyrd",
            "description": "The Seiðkona represents the dangerous path of those who tap directly into the Aether. Unlike practical crafters or healers who follow the Coherent path, the Seiðkona embraces Heretical traditions, channeling raw magical power at the risk of Corruption. They are seers who glimpse fate, weavers who manipulate reality, and destructive forces who can unleash accumulated Aether in devastating attacks.",
            "selectionText": "The Aether speaks to those who know how to listen. Let me show you what lies beyond the veil.",
            "parentArchetype": "Mystic",
            "pathType": "Heretical",
            "corruptionRisk": {
                "lowThreshold": 5,
                "lowRisk": 0.05,
                "mediumThreshold": 8,
                "mediumRisk": 0.15,
                "highThreshold": 10,
                "highRisk": 0.25,
                "capstoneRisk": 0.2,
                "triggers": [
                    "Casting at 5+ Resonance",
                    "Using Unraveling capstone"
                ]
            },
            "specialResource": {
                "resourceId": "aether-resonance",
                "resourceName": "Aether Resonance",
                "description": "Accumulated Aetheric energy that builds through casting. High Resonance enables powerful effects but risks Corruption.",
                "maxValue": 10,
                "startingValue": 0,
                "generationMethod": "Gain Resonance from casting spells",
                "consumptionMethod": "Consumed by Unraveling capstone, resets on long rest"
            },
            "unlockCost": 0,
            "abilityTiers": [
                {
                    "tier": 1,
                    "ppRequirement": 0,
                    "abilityCost": 0,
                    "abilities": [
                        "seidr-bolt",
                        "wyrd-sight",
                        "aether-attunement"
                    ]
                },
                {
                    "tier": 2,
                    "ppRequirement": 8,
                    "abilityCost": 4,
                    "abilities": [
                        "fates-thread",
                        "weave-disruption",
                        "resonance-cascade"
                    ]
                },
                {
                    "tier": 3,
                    "ppRequirement": 16,
                    "abilityCost": 5,
                    "abilities": ["völvas-vision", "aether-storm"]
                },
                {
                    "tier": "capstone",
                    "ppRequirement": 24,
                    "abilityCost": 6,
                    "abilities": ["unraveling"]
                }
            ]
        }
    ]
}
```

### abilities.json (Seiðkona Section)

```json
{
    "abilities": [
        {
            "abilityId": "seidr-bolt",
            "displayName": "Seiðr Bolt",
            "specializationId": "Seiðkona",
            "tier": 1,
            "type": "Attack",
            "apCost": 2,
            "range": 8,
            "rangeUnit": "Spaces",
            "description": "Channel the Aether into a bolt of raw magical energy. Deal 2d6 Aetheric damage and gain +1 Resonance. Corruption check at 5+ Resonance.",
            "effects": [
                {
                    "type": "MagicalAttack",
                    "damage": "2d6",
                    "damageType": "Aetheric"
                },
                {
                    "type": "GainResonance",
                    "amount": 1
                }
            ],
            "targeting": {
                "validTargets": ["Enemy"],
                "requiresLineOfSight": true
            }
        },
        {
            "abilityId": "wyrd-sight",
            "displayName": "Wyrd Sight",
            "specializationId": "Seiðkona",
            "tier": 1,
            "type": "Active",
            "apCost": 2,
            "duration": 3,
            "durationUnit": "Turns",
            "description": "Open your eyes to the unseen. For 3 turns, see invisible creatures, detect magical effects, and sense Aether sources. Gain +1 Resonance.",
            "effects": [
                {
                    "type": "DetectInvisible",
                    "range": 12
                },
                {
                    "type": "DetectMagic",
                    "range": 12
                },
                {
                    "type": "SenseAether",
                    "range": 20
                },
                {
                    "type": "GainResonance",
                    "amount": 1
                }
            ]
        },
        {
            "abilityId": "aether-attunement",
            "displayName": "Aether Attunement",
            "specializationId": "Seiðkona",
            "tier": 1,
            "type": "Passive",
            "description": "Your attunement to the Aether flow grants +10% AP regeneration. Always active while conscious.",
            "effects": [
                {
                    "type": "ApRegenBonus",
                    "percentage": 10
                }
            ]
        },
        {
            "abilityId": "fates-thread",
            "displayName": "Fate's Thread",
            "specializationId": "Seiðkona",
            "tier": 2,
            "type": "Active",
            "apCost": 3,
            "range": 10,
            "rangeUnit": "Spaces",
            "description": "Glimpse the wyrd to see an enemy's intended action. Reveals their next action type and target. Gain +1 Resonance.",
            "effects": [
                {
                    "type": "Divination",
                    "reveals": ["NextAction", "ActionTarget", "Movement"]
                },
                {
                    "type": "GainResonance",
                    "amount": 1
                }
            ],
            "targeting": {
                "validTargets": ["Enemy"],
                "requiresLineOfSight": true
            }
        },
        {
            "abilityId": "weave-disruption",
            "displayName": "Weave Disruption",
            "specializationId": "Seiðkona",
            "tier": 2,
            "type": "Active",
            "apCost": 3,
            "range": 6,
            "rangeUnit": "Spaces",
            "description": "Unravel a magical effect. Roll d20 + Resonance vs DC based on effect strength. On success, dispel the effect. Gain +1 Resonance.",
            "effects": [
                {
                    "type": "Dispel",
                    "rollFormula": "d20 + Resonance",
                    "dcByStrength": {
                        "weak": 10,
                        "moderate": 14,
                        "strong": 18,
                        "powerful": 22
                    }
                },
                {
                    "type": "GainResonance",
                    "amount": 1
                }
            ],
            "targeting": {
                "validTargets": ["MagicalEffect"],
                "requiresLineOfSight": true
            }
        },
        {
            "abilityId": "resonance-cascade",
            "displayName": "Resonance Cascade",
            "specializationId": "Seiðkona",
            "tier": 2,
            "type": "Passive",
            "description": "At 5+ Resonance, your spells cost 2 less AP (minimum 1 AP). Does not apply to Unraveling.",
            "effects": [
                {
                    "type": "ConditionalApReduction",
                    "condition": "Resonance >= 5",
                    "reduction": 2,
                    "minimum": 1,
                    "excludes": ["unraveling"]
                }
            ]
        },
        {
            "abilityId": "völvas-vision",
            "displayName": "Völva's Vision",
            "specializationId": "Seiðkona",
            "tier": 3,
            "type": "Active",
            "apCost": 4,
            "range": 15,
            "rangeUnit": "Spaces",
            "rangeType": "Radius",
            "description": "Reveal all hidden enemies within 15 spaces. Invisible, hidden, and disguised enemies lose concealment for 2 turns. Gain +1 Resonance.",
            "effects": [
                {
                    "type": "MassReveal",
                    "radius": 15,
                    "revealTypes": ["Invisible", "Hidden", "Disguised"],
                    "duration": 2
                },
                {
                    "type": "GainResonance",
                    "amount": 1
                }
            ]
        },
        {
            "abilityId": "aether-storm",
            "displayName": "Aether Storm",
            "specializationId": "Seiðkona",
            "tier": 3,
            "type": "Attack",
            "apCost": 5,
            "range": 8,
            "rangeUnit": "Spaces",
            "areaType": "Cone",
            "areaLength": 6,
            "areaWidth": 4,
            "description": "Unleash a cone of Aetheric energy. All enemies in cone take 4d6 Aetheric damage (save DC 10 + Resonance for half). Gain +2 Resonance.",
            "effects": [
                {
                    "type": "AreaAttack",
                    "shape": "Cone",
                    "damage": "4d6",
                    "damageType": "Aetheric",
                    "saveDcFormula": "10 + Resonance",
                    "saveType": "Reflex",
                    "saveEffect": "Half"
                },
                {
                    "type": "GainResonance",
                    "amount": 2
                }
            ],
            "targeting": {
                "validTargets": ["Enemy"],
                "areaEffect": true,
                "friendlyFire": false
            }
        },
        {
            "abilityId": "unraveling",
            "displayName": "Unraveling",
            "specializationId": "Seiðkona",
            "tier": "capstone",
            "type": "Ultimate",
            "apCost": 6,
            "range": 10,
            "rangeUnit": "Spaces",
            "cooldown": "LongRest",
            "description": "At 10 Resonance: Target suffers all Aetheric damage you've dealt this combat. Consumes all Resonance. Guaranteed 20% Corruption check. Once per long rest.",
            "requirements": {
                "resonance": 10
            },
            "effects": [
                {
                    "type": "AccumulatedDamage",
                    "damageType": "Aetheric",
                    "source": "AllAethericDamageThisCombat"
                },
                {
                    "type": "ConsumeAllResonance"
                },
                {
                    "type": "GuaranteedCorruptionCheck",
                    "risk": 0.2
                }
            ],
            "targeting": {
                "validTargets": ["Enemy"],
                "requiresLineOfSight": true
            }
        }
    ]
}
```

---

## Estimated Effort Summary

| Phase     | New Files | Modified Files | Est. Tests | Complexity  |
| --------- | --------- | -------------- | ---------- | ----------- |
| v0.20.8a  | ~9        | ~5             | ~10        | Medium-High |
| v0.20.8b  | ~5        | ~3             | ~8         | Medium      |
| v0.20.8c  | ~5        | ~3             | ~7         | High        |
| **Total** | **~19**   | **~11**        | **~25**    |             |

---

## Risk Assessment

| Risk                              | Impact | Probability | Mitigation                                |
| --------------------------------- | ------ | ----------- | ----------------------------------------- |
| Corruption integration complexity | High   | Medium      | Reuse existing CorruptionService patterns |
| Resonance threshold balance       | Medium | Medium      | Tune thresholds through playtesting       |
| Unraveling damage too high/low    | High   | Medium      | Track damage carefully, cap if needed     |
| Resonance Cascade too powerful    | Medium | Medium      | AP minimum of 1 prevents infinite casting |
| Dispel mechanics edge cases       | Medium | Low         | Clear dispellable vs non-dispellable list |
| Accumulated damage tracking bugs  | Medium | Medium      | Comprehensive testing, clear reset points |

---

## Design Decisions (Confirmed)

### Aether Resonance Resource

| Decision                  | Value      | Notes                                |
| ------------------------- | ---------- | ------------------------------------ |
| **Max Resonance**         | 10         | Clear cap for Unraveling requirement |
| **Starting Resonance**    | 0          | Must build through casting           |
| **Decay on Rest**         | Reset to 0 | Fresh start each combat              |
| **Corruption Thresholds** | 5/8/10     | Gradual risk increase                |

### Corruption Balance

| Decision                  | Value | Notes                           |
| ------------------------- | ----- | ------------------------------- |
| **Low Threshold (5+)**    | 5%    | Minor but present risk          |
| **Medium Threshold (8+)** | 15%   | Significant decision point      |
| **High Threshold (10)**   | 25%   | Major risk before Unraveling    |
| **Unraveling Check**      | 20%   | Guaranteed check, moderate risk |

### Ability Balance

| Decision                        | Value                | Notes                                     |
| ------------------------------- | -------------------- | ----------------------------------------- |
| **Seiðr Bolt Damage**           | 2d6                  | Consistent, scales via Resonance benefits |
| **Aether Storm Gain**           | +2 Resonance         | Big gain rewards risk                     |
| **Resonance Cascade Reduction** | -2 AP                | Significant but minimum 1                 |
| **Unraveling Requirement**      | 10 Resonance exactly | Requires full buildup                     |

---

## Unit Test Specifications

### v0.20.8a Tests (~10 tests)

#### AetherResonanceResourceTests.cs

```csharp
[TestFixture]
public class AetherResonanceResourceTests
{
    [Test]
    public void Create_InitializesAtZero();

    [Test]
    public void GainResonance_UnderMax_GainsCorrectly();

    [Test]
    public void GainResonance_AtMax_CapsAt10();

    [Test]
    public void GainResonance_CrossesThreshold_ReturnsThresholdCrossed();

    [Test]
    public void CorruptionRisk_AtThreshold_ReturnsCorrectPercentage();

    [Test]
    public void SpendAllResonance_ResetsToZero();

    [Test]
    public void TrackAethericDamage_AccumulatesCorrectly();
}
```

#### SeiðkonaAbilityServiceTests.cs

```csharp
[TestFixture]
public class SeiðkonaAbilityServiceTests
{
    [Test]
    public void SeiðrBolt_Deals2d6AethericDamage();

    [Test]
    public void SeiðrBolt_Grants1Resonance();

    [Test]
    public void WyrdSight_RevealsInvisibleCreatures();
}
```

### v0.20.8b Tests (~8 tests)

#### Tier2AbilityTests.cs

```csharp
[TestFixture]
public class Tier2AbilityTests
{
    [Test]
    public void FatesThread_RevealsEnemyAction();

    [Test]
    public void FatesThread_Grants1Resonance();

    [Test]
    public void WeaveDisruption_DispelsOnSuccess();

    [Test]
    public void WeaveDisruption_FailsAgainstHighDC();

    [Test]
    public void ResonanceCascade_ReducesApAt5Resonance();

    [Test]
    public void ResonanceCascade_MinimumCost1Ap();

    [Test]
    public void ResonanceCascade_DoesNotAffectUnraveling();

    [Test]
    public void Tier2_LockedUntil8PPInvested();
}
```

### v0.20.8c Tests (~7 tests)

#### Tier3AndCapstoneTests.cs

```csharp
[TestFixture]
public class Tier3AndCapstoneTests
{
    [Test]
    public void VölvasVision_RevealsAllHiddenEnemies();

    [Test]
    public void AetherStorm_Deals4d6ToCone();

    [Test]
    public void AetherStorm_Grants2Resonance();

    [Test]
    public void Unraveling_Requires10Resonance();

    [Test]
    public void Unraveling_DealsAccumulatedDamage();

    [Test]
    public void Unraveling_ResetsResonanceToZero();

    [Test]
    public void Unraveling_TriggersCorruptionCheck();
}
```

---

## Architecture Diagram

```
┌─────────────────────────────────────────────────────────────────┐
│                v0.20.8 Seiðkona Specialization                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                    Domain Layer                          │   │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │   │
│  │  │   Aether     │  │  SeiðrBolt   │  │  WyrdSight   │  │   │
│  │  │  Resonance   │  │   Result     │  │   Result     │  │   │
│  │  │   Resource   │  │ Value Object │  │ Value Object │  │   │
│  │  └──────────────┘  └──────────────┘  └──────────────┘  │   │
│  │                                                          │   │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │   │
│  │  │ FatesThread  │  │   Weave      │  │  Resonance   │  │   │
│  │  │   Result     │  │  Disruption  │  │   Cascade    │  │   │
│  │  │ Value Object │  │   Result     │  │    State     │  │   │
│  │  └──────────────┘  └──────────────┘  └──────────────┘  │   │
│  │                                                          │   │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │   │
│  │  │VölvasVision  │  │ AetherStorm  │  │ Unraveling   │  │   │
│  │  │   Result     │  │   Result     │  │   Result     │  │   │
│  │  │ Value Object │  │ Value Object │  │ Value Object │  │   │
│  │  └──────────────┘  └──────────────┘  └──────────────┘  │   │
│  │                                                          │   │
│  │  ┌──────────────┐  ┌──────────────┐                     │   │
│  │  │  Seiðkona   │  │  Resonance   │                     │   │
│  │  │  AbilityId   │  │  Threshold   │                     │   │
│  │  │    Enum      │  │    Enum      │                     │   │
│  │  └──────────────┘  └──────────────┘                     │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              │                                   │
│                              ▼                                   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                  Application Layer                       │   │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │   │
│  │  │   IAether    │  │  ISeiðkona  │  │  ISeiðkona  │   │   │
│  │  │  Resonance   │  │   Ability    │  │  Corruption  │   │   │
│  │  │   Service    │  │   Service    │  │   Service    │   │   │
│  │  └──────────────┘  └──────────────┘  └──────────────┘   │   │
│  │         │                  │                  │          │   │
│  │         ▼                  ▼                  ▼          │   │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐   │   │
│  │  │   Aether     │  │  Seiðkona   │  │  Seiðkona   │   │   │
│  │  │  Resonance   │  │   Ability    │  │  Corruption  │   │   │
│  │  │Service Impl  │  │ Service Impl │  │ Service Impl │   │   │
│  │  └──────────────┘  └──────────────┘  └──────────────┘   │   │
│  │         │                  │                  │          │   │
│  │         └─────────┬────────┴──────────────────┘          │   │
│  │                   ▼                                       │   │
│  │         ┌──────────────────┐                             │   │
│  │         │  IShadowCorrupt  │  (from v0.20.4)             │   │
│  │         │   ionService     │                             │   │
│  │         └──────────────────┘                             │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              │                                   │
│                              ▼                                   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                 Infrastructure Layer                     │   │
│  │  ┌──────────────────────┐  ┌──────────────────────┐    │   │
│  │  │ specializations.json │  │ abilities.json       │    │   │
│  │  │ (Seiðkona entry)    │  │ (9 Seiðkona abilities│    │   │
│  │  └──────────────────────┘  └──────────────────────┘    │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘

Aether Resonance Resource Flow:
┌─────────────┐  Aetheric Abilities ┌─────────────┐  High Resonance ┌─────────────┐
│   Seiðr    │ ─────────────────► │   Aether    │ ──────────────►│ Corruption  │
│   Bolt     │   +1-2 Resonance   │  Resonance  │  Check @8+      │   Service   │
└─────────────┘                    └─────────────┘                └─────────────┘
                                          │
                                          ▼ Consume @10
                                   ┌─────────────┐
                                   │ Unraveling  │
                                   │ (Capstone)  │
                                   └─────────────┘
```

---

## Integration Points

### With Prior Specializations

| System                    | Integration Point                                       |
| ------------------------- | ------------------------------------------------------- |
| Specialization framework  | Follows established v0.20.1-v0.20.7 patterns            |
| Special resource patterns | Building resource (similar to Rage)                     |
| Heretical path            | Integrates with Myrk-gengr/Berserkr Corruption patterns |
| Mystic archetype          | Only Mystic specialization in v0.20.x                   |

### With Core Systems

| System                         | Integration Point                       |
| ------------------------------ | --------------------------------------- |
| Status Effect System (v0.10.x) | Dispel targets, buff/debuff interaction |
| Corruption System (v0.18.x)    | Heretical path Corruption checks        |
| Combat System                  | Damage tracking, area effects           |
| Detection System               | Invisible/hidden creature reveals       |

### Provides to Future Versions

| Provides                        | Consumer                         |
| ------------------------------- | -------------------------------- |
| Building resource patterns      | Echo-Caller (Echoes resource)    |
| Corruption integration patterns | Future Heretical specializations |
| Dispel mechanics                | Other magic-using classes        |
| Area effect cone patterns       | Other area damage abilities      |
| Accumulated damage patterns     | Other "charged" abilities        |
| Divination patterns             | Other seer/oracle types          |

---

## Deliverable Checklist

### Domain Layer

- [ ] `AetherResonanceResource` value object
- [ ] `SeiðrBoltResult` value object
- [ ] `WyrdSightResult` value object
- [ ] `ResonanceGainEvent` value object
- [ ] `MagicalAuraInfo` value object
- [ ] `FatesThreadResult` value object
- [ ] `WeaveDisruptionResult` value object
- [ ] `ResonanceCascadeState` value object
- [ ] `VölvasVisionResult` value object
- [ ] `RevealedEnemyInfo` value object
- [ ] `AetherStormResult` value object
- [ ] `AetherStormHit` value object
- [ ] `UnravelingResult` value object
- [ ] `DamageSourceEntry` value object
- [ ] `SeiðkonaAbilityId` enum
- [ ] `ResonanceThreshold` enum
- [ ] `AetherDetectionType` enum
- [ ] `EnemyActionType` enum
- [ ] `DispelDifficulty` enum
- [ ] `ConeDirection` enum

### Application Layer

- [ ] `AetherResonanceService` implementation
- [ ] `SeiðkonaAbilityService` implementation
- [ ] Seiðr Bolt ability handler
- [ ] Wyrd Sight ability handler
- [ ] Aether Attunement passive integration
- [ ] Fate's Thread ability handler
- [ ] Weave Disruption ability handler
- [ ] Resonance Cascade passive integration
- [ ] Völva's Vision ability handler
- [ ] Aether Storm ability handler
- [ ] Unraveling ability handler
- [ ] Corruption check integration

### Infrastructure Layer

- [ ] `specializations.json` Seiðkona entry
- [ ] `abilities.json` Seiðkona abilities (9 total)

### Tests

- [ ] AetherResonanceResourceTests.cs (~7 tests)
- [ ] SeiðkonaAbilityServiceTests.cs (~3 tests)
- [ ] Tier2AbilityTests.cs (~8 tests)
- [ ] Tier3AndCapstoneTests.cs (~7 tests)

---

## Next Steps

1. **Review & Approve** - Confirm scope breakdown with stakeholders
2. **v0.20.8a Design Spec** - Create detailed design specification for Tier 1
3. **Implement v0.20.8a** - Build Aether Resonance resource and Tier 1 abilities
4. **v0.20.8b Design Spec** - Create detailed design specification for Tier 2
5. **Implement v0.20.8b** - Build Tier 2 abilities including Resonance Cascade
6. **v0.20.8c Design Spec** - Create detailed design specification for Tier 3 & Capstone
7. **Implement v0.20.8c** - Build Tier 3 abilities and Unraveling
8. **v0.20.x Complete** - All 8 specializations implemented, ~210 tests pass

---

## v0.20.x Completion Summary

With v0.20.8 complete, the full v0.20.x Aethelgard Specialization Implementation will include:

| Version   | Specialization        | Archetype  | Path      | Tests    |
| --------- | --------------------- | ---------- | --------- | -------- |
| v0.20.0   | Legacy Removal        | —          | —         | ~10      |
| v0.20.1   | Skjaldmær             | Warrior    | Coherent  | ~25      |
| v0.20.2   | Rúnasmiðr             | Adept      | Coherent  | ~25      |
| v0.20.3   | Jötun-Reader          | Adept      | Coherent  | ~25      |
| v0.20.4   | Myrk-gengr            | Skirmisher | Heretical | ~25      |
| v0.20.5   | Berserkr              | Warrior    | Heretical | ~25      |
| v0.20.6   | Bone-Setter           | Adept      | Coherent  | ~25      |
| v0.20.7   | Veiðimaðr             | Skirmisher | Coherent  | ~25      |
| v0.20.8   | Seiðkona              | Mystic     | Heretical | ~25      |
| **Total** | **8 Specializations** |            |           | **~210** |

---

_This scope breakdown provides a structured approach to implementing the Seiðkona specialization — the Aether-wielding seeress of the Mystic archetype. As the final Heretical path specialization and only Mystic in v0.20.x, the Seiðkona brings powerful magical capabilities to Aethelgard with the characteristic risk of Corruption. The Aether Resonance resource creates a risk-reward playstyle where building power enables devastating effects like Unraveling, but tempts Corruption at every cast. With v0.20.8 complete, the full Aethelgard Specialization System will be ready for play._
