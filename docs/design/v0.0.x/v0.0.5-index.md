## v0.0.5 - Dice Pool System

**Focus:** Core randomization engine for all game mechanics

**Prerequisites:** v0.0.4d Complete (Integration & Polish)

### Related Documents

- [v0.0.5 Scope Breakdown](v0.0.5-scope-breakdown.md)
- [v0.0.5 Design Specification](v0.0.5-design-specification.md) *(detailed implementation reference)*
- [v0.0.5a Implementation Plan](v0.0.5a-implementation-plan.md)
- [v0.0.5b Design Specification](v0.0.5b-design-specification.md)
- [v0.0.5b Implementation Plan](v0.0.5b-implementation-plan.md)
- [v0.0.5c Design Specification](v0.0.5c-design-specification.md)
- [v0.0.5c Implementation Plan](v0.0.5c-implementation-plan.md)
- [v0.0.5d Design Specification](v0.0.5d-design-specification.md)
- [v0.0.5d Implementation Plan](v0.0.5d-implementation-plan.md)

### Sub-Phases

| Phase | Name | Focus | Est. Tests |
|-------|------|-------|------------|
| v0.0.5a | Core Dice Engine | DicePool, DiceResult, DiceService, basic rolling | ~18 |
| v0.0.5b | Skill Check System | SkillDefinition, SkillCheckService, difficulty classes | ~20 |
| v0.0.5c | Combat Integration | Attack rolls, damage rolls, CombatService refactor | ~15 |
| v0.0.5d | Configuration & Polish | JSON configs, rendering, commands, descriptors | ~9 |

### Features

#### Core Dice Engine (v0.0.5a)
- [x] **Dice Types** - d4, d6, d8, d10 support
- [x] **Dice Pools** - Multiple dice rolled together (e.g., 3d6, 2d10+5)
- [x] **Modifiers** - Bonuses/penalties from stats, equipment, abilities
- [x] **Advantage/Disadvantage** - Roll multiple, take best/worst
- [x] **Exploding Dice** - Max roll triggers additional die
- [x] **Dice Notation Parsing** - Parse strings like "3d6+5", "1d10-2", "2d8!"

#### Skill Check System (v0.0.5b)
- [x] **Skill Definitions** - Configurable skills with primary/secondary attributes
- [x] **Difficulty Classes** - 8 DC levels from Trivial (5) to Impossible (30)
- [x] **Skill Check Service** - Perform checks against difficulty
- [x] **Critical Success** - Natural max on roll
- [x] **Critical Failure** - Natural 1 on roll
- [x] **Attribute Bonuses** - Skills modified by player attributes

#### Combat Integration (v0.0.5c)
- [x] **Attack Rolls** - 1d10 + Finesse vs Defense to determine hits
- [x] **Damage Rolls** - Weapon dice + Might for damage calculation
- [x] **Critical Hits** - Natural 10 doubles damage dice
- [x] **Critical Miss** - Natural 1 always misses
- [x] **Monster Counterattack** - Dice-based monster attacks

#### Commands & Polish (v0.0.5d)
- [x] **Roll Command** - Direct dice rolling (`roll 3d6+5`)
- [x] **Check Command** - Skill checks (`check perception`)
- [x] **Roll Display** - Show individual dice results to player
- [x] **Descriptors** - Flavor text for critical rolls

### Data Model Updates

- [x] Create `DiceType` enum (D4, D6, D8, D10)
- [x] Create `AdvantageType` enum (Normal, Advantage, Disadvantage)
- [x] Create `SuccessLevel` enum (CriticalFailure, Failure, Success, CriticalSuccess)
- [x] Create `DicePool` value object with parsing
- [x] Create `DiceRollResult` value object
- [x] Create `SkillDefinition` entity
- [x] Create `DifficultyClassDefinition` entity
- [x] Create `SkillCheckResult` value object
- [x] Create `CombatRoundResult` record with dice breakdown
- [x] Create `MonsterCounterAttackResult` record
- [x] Create `DiceService` for rolling
- [x] Create `SkillCheckService` for checks

### Commands

| Command | Description |
|---------|-------------|
| `roll <notation>` | Roll dice directly (e.g., `roll 3d6+5`) |
| `check <skill>` | Perform a skill check (e.g., `check perception`) |
| `check <skill> <difficulty>` | Skill check with specific difficulty |

### Configuration

- [x] Add `config/skills.json` for 10 skill definitions
- [x] Add `config/difficulty.json` for 8 difficulty classes

### Test Metrics

| Metric | Before v0.0.5 | After v0.0.5 |
|--------|---------------|--------------|
| Domain Tests | 123 | ~155 |
| Application Tests | 67 | ~97 |
| Architecture Tests | 8 | 8 |
| **Total Tests** | **198** | **~260** |
