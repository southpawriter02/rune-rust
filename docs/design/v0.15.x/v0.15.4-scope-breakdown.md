## v0.15.4 - System Bypass Skill Expansion

**Focus:** Lockpicking, terminal hacking, trap disarmament, jury-rigging, and glitch exploitation

**Source Specification:** [system-bypass.md](../../aethelgard/design/01-core/skills/system-bypass.md)

### Overview

This version transforms System Bypass from simple checks into a comprehensive "cargo cult" technology manipulation system. Characters interact with incomprehensible Old World technology through pattern recognition, physical manipulation, and learned rituals—never true understanding.

---

### Deliverables Summary

| Category | Items | Estimated Tests |
|----------|-------|-----------------|
| Enums | 6 | 6 |
| Value Objects | 8 | 12 |
| Entities | 4 | 8 |
| Services | 5 | 4 |
| **Total** | **23** | **~30** |

---

### v0.15.4a - Lockpicking System

#### LockType Enum
```
LockType
├── ImprovisedLatch (DC 6)
├── SimpleLock (DC 10)
├── StandardLock (DC 14)
├── ComplexLock (DC 18)
├── MasterLock (DC 22)
├── JotunForged (DC 26)
```

#### LockContext Value Object
- [ ] `LockType` - Classification
- [ ] `CorruptionLevel` - Normal, [Glitched], [Blighted]
- [ ] `ToolQuality` - Bare hands, improvised, proper, masterwork
- [ ] `PreviousAttempts` - Number of failed attempts
- [ ] `IsJammed` - From previous fumble

**Corruption Modifiers:**
| Corruption | DC Modifier |
|------------|-------------|
| [Glitched] | +2 DC |
| [Blighted] | +4 DC |

**Tool Modifiers:**
| Tool | Modifier |
|------|----------|
| Bare Hands | -2d10 |
| Improvised Tools | +0 |
| Proper Lockpicks | +1d10 |
| Masterwork Tools | +2d10 |

**Tool Requirements:**
- [ ] DC 4+ requires [Tinker's Toolkit]
- [ ] Cannot attempt DC 4+ bare-handed

**Degrees of Success:**
- [ ] Success: Lock opens
- [ ] Critical Success: Lock opens + salvage component
- [ ] Failure: Lock remains locked, may retry
- [ ] Fumble: [Mechanism Jammed] - DC +2 permanent, key useless

**Salvageable Components:**
| Lock Type | Component |
|-----------|-----------|
| Mechanical | [High-Tension Spring], [Pin Set] |
| Electronic | [Circuit Fragment], [Power Cell] |
| Complex | [Encryption Chip], [Biometric Sensor] |

**Unit Tests (~4):**
- [ ] Lock type sets correct DC
- [ ] Tool modifier applies correctly
- [ ] Critical success yields component
- [ ] Fumble triggers [Mechanism Jammed]

---

### v0.15.4b - Terminal Hacking System (Multi-Layer)

#### TerminalType Enum
```
TerminalType
├── CivilianDataPort (DC 8, no ICE)
├── CorporateMainframe (DC 12, Passive ICE)
├── SecurityHub (DC 16, Active ICE)
├── MilitaryServer (DC 20, Active ICE)
├── JotunArchive (DC 24, Lethal ICE)
├── GlitchedManifold (DC varies, unpredictable)
```

#### TerminalInfiltrationState Entity
```
TerminalInfiltrationState
├── InfiltrationId: string
├── CharacterId: string
├── TerminalType: TerminalType
├── CurrentLayer: int (1-3)
├── LayerResults: List<LayerResult>
├── IceEncounters: List<IceEncounter>
├── AccessLevel: AccessLevel enum
├── AlertLevel: int
├── IsLockedOut: bool
└── Status: InfiltrationStatus enum
```

#### InfiltrationLayer Enum
```
InfiltrationLayer
├── Layer1_Access - Initial connection, bypass security
├── Layer2_Authentication - Identity verification
├── Layer3_Navigation - Data location and access
```

#### AccessLevel Enum
```
AccessLevel
├── None - Access denied
├── UserLevel - Basic functions
├── AdminLevel - All functions, hidden files
├── Lockout - Terminal disabled
```

**Layer DCs:**

| Terminal Type | Layer 1 DC | Time |
|---------------|------------|------|
| Basic | 12 | 1 round |
| Secured | 14 | 2 rounds |
| Encrypted | 16 | 3 rounds |
| Jötun-Archive | 18 | 5 rounds |

| Security Level | Layer 2 DC Modifier |
|----------------|---------------------|
| Password only | +0 |
| Biometric | +2 |
| Multi-factor | +4 |
| Jötun-Locked | +6 |

| Data Type | Layer 3 DC |
|-----------|------------|
| Public records | 10 |
| Internal docs | 14 |
| Classified | 18 |
| Archived/Hidden | 22 |

**Infiltration Logic:**
- [ ] Layer 1 failure: 1 minute lockout, retry at DC +2
- [ ] Layer 2 failure: Alert triggers, ICE may activate
- [ ] Layer 3 failure: Partial access only
- [ ] Critical success: Gain [Admin-Level]
- [ ] Fumble: [System Lockout] - terminal disabled, alert broadcast

**Covering Tracks:**
- [ ] Optional DC 14 stealth check
- [ ] Success: Access logs wiped
- [ ] Failure: Access logged permanently

**Unit Tests (~4):**
- [ ] Terminal type sets correct layer DCs
- [ ] Layer failure applies lockout
- [ ] Layer 2 failure triggers ICE check
- [ ] Fumble causes permanent lockout

---

### v0.15.4c - ICE Countermeasures

#### IceType Enum
```
IceType
├── Passive (Trace) - Reveal hacker location
├── Active (Attack) - Force disconnect
├── Lethal (Neural) - Psychic damage
```

#### IceEncounter Value Object
- [ ] `IceType` - Classification
- [ ] `IceRating` - Difficulty (12-24)
- [ ] `Triggered` - Has it activated
- [ ] `EncounterResult` - Win/Lose/Evade

**ICE Ratings by Terminal:**
| Terminal Security | ICE Rating | ICE Type |
|-------------------|------------|----------|
| Basic | — | No ICE |
| Secured | 12 | Passive (Trace) |
| Encrypted | 16 | Active (Attack) |
| Military | 20 | Active + Lethal |
| Jötun-Archive | 24 | Lethal (Neural) |

**ICE Resolution:**
- [ ] Passive (Trace): Contested Bypass vs. ICE Rating
  - Win: Evade detection
  - Lose: Physical location revealed
- [ ] Active (Attack): Contested Bypass vs. ICE Rating
  - Win: ICE disabled
  - Lose: Forced disconnect
- [ ] Lethal (Neural): WILL save DC 16
  - Success: Auto-disconnect, 1d6 stress
  - Failure: 3d10 psychic damage + 2d6 stress

**Unit Tests (~3):**
- [ ] ICE triggers on Layer 2 failure
- [ ] Contested check resolves correctly
- [ ] Lethal ICE applies damage/stress

---

### v0.15.4d - Trap Disarmament System

#### TrapType Enum
```
TrapType
├── Tripwire (DC 8, triggers alarm)
├── PressurePlate (DC 12, 2d10 damage)
├── Electrified (DC 16, 3d10 lightning)
├── LaserGrid (DC 20, alarm + lockdown)
├── JotunDefense (DC 24, 5d10 + alert)
```

#### TrapDisarmState Entity
```
TrapDisarmState
├── DisarmId: string
├── CharacterId: string
├── TrapType: TrapType
├── CurrentStep: DisarmStep enum
├── AnalysisComplete: bool
├── HintsRevealed: List<string>
├── AttemptsRemaining: int
├── Status: DisarmStatus enum
```

#### DisarmStep Enum
```
DisarmStep
├── Detection - Finding the trap
├── Analysis - Understanding the trap
├── Disarmament - Neutralizing the trap
```

**Three-Step Procedure:**

1. **Detection (Required):**
   - Perception check to find trap
   - DC varies by trap sophistication
   - Failure = walk into trap

2. **Analysis (Recommended):**
   | Information | Analysis DC |
   |-------------|-------------|
   | Disarm DC | Base DC - 2 |
   | Failure consequences | Base DC |
   | Disarm hints | Base DC + 2 |

3. **Disarmament:**
   - Higher of WITS or FINESSE
   - Success: Trap disabled
   - Critical: Disabled + salvage components
   - Failure: DC +1 for next attempt
   - Fumble: [Forced Execution] - trap triggers

**Salvageable Components:**
| Trap Type | Components |
|-----------|------------|
| Pressure Plate | [High-Tension Spring], [Pressure Sensor] |
| Tripwire | [Trigger Mechanism], [Wire Bundle] |
| Electrified | [Capacitor], [Blighted Power Cell] |
| Explosive | [Explosive Casing], [Detonator Cap] |
| Laser Grid | [Sensor Module], [Focusing Crystal] |

**Tool Requirement:**
- [ ] DC 4+ traps require [Tinker's Toolkit]
- [ ] DC 1-3 can attempt bare-handed at -2d10

**Unit Tests (~4):**
- [ ] Trap type sets correct DC
- [ ] Analysis reveals correct information
- [ ] Failure increases DC
- [ ] Fumble triggers trap on disarmer

---

### v0.15.4e - Jury-Rigging System

#### BypassMethod Enum
```
BypassMethod
├── PercussiveMaintenance (+0, may break)
├── WireManipulation (-2 DC, electrocution risk)
├── GlitchExploitation (-4 DC, unpredictable)
├── MemorizedSequence (-2 DC, familiar types only)
├── BruteDisassembly (+2 DC, destroys mechanism)
├── PowerCycling (+0, resets progress)
```

#### JuryRigContext Value Object
- [ ] `MethodUsed` - Bypass approach
- [ ] `FamiliarMechanism` - Has character seen this before
- [ ] `ToolsAvailable` - Quality of tools
- [ ] `ElectrocutionRisk` - For wire manipulation
- [ ] `ComplicationRoll` - d10 for failure effects

**Trial-and-Error Procedure:**
| Step | Action | Check | Outcome |
|------|--------|-------|---------|
| 1. Observe | Study visually | WITS DC 10 | Identify inputs |
| 2. Probe | Try buttons/levers | Auto | Machine reacts |
| 3. Pattern | Recognize type | WITS DC 12 | +2d10 if familiar |
| 4. Experiment | Try combinations | Bypass DC | Success or complication |
| 5. Iterate | Learn from failure | Auto | DC -1 next attempt |

**Complication Table (on failure):**
| d10 | Effect |
|-----|--------|
| 1 | Machine locks permanently |
| 2-3 | Alarm triggers |
| 4-5 | Sparks fly (1d6 damage) |
| 6-7 | Nothing, try again |
| 8-9 | Partial success (one function works) |
| 10 | Machine glitches in your favor |

**Electrocution Risk (Wire Manipulation):**
- [ ] FINESSE save DC 12
- [ ] Failure: 2d10 lightning damage
- [ ] Success: Proceed with bypass at -2 DC

**Unit Tests (~3):**
- [ ] Method applies correct modifier
- [ ] Familiar mechanism grants bonus
- [ ] Complication table resolves correctly

---

### v0.15.4f - Glitch Exploitation

#### GlitchState Value Object
- [ ] `GlitchCycleIdentified` - Did character observe pattern
- [ ] `CyclePhase` - Where in the cycle
- [ ] `ExploitWindow` - When to act
- [ ] `ChaosRoll` - d6 for unpredictable behavior

**Glitch Exploitation Logic:**
1. Observe glitch pattern: WITS DC 14
2. If success: Can time action for -4 DC
3. If failure: Random chaos

**Chaos Roll (unpredictable glitch):**
| d6 | Effect |
|----|--------|
| 1-2 | Glitch works against you, +4 DC |
| 3-4 | Normal difficulty |
| 5-6 | Glitch helps, -2 DC |

**Unit Tests (~2):**
- [ ] Pattern identification reduces DC
- [ ] Chaos roll applies correct modifier

---

### v0.15.4g - Improvised Tool Crafting

#### ImprovisedTool Value Object
- [ ] `ToolId` - Identifier
- [ ] `ToolName` - Display name
- [ ] `ComponentsRequired` - What's needed
- [ ] `CraftDc` - Difficulty to make
- [ ] `BonusWhenUsed` - Modifier granted

**Craftable Tools:**
| Tool | Components | Craft DC | Bonus |
|------|------------|----------|-------|
| Shim Picks | Scrap metal × 3 | 10 | +1d10 to locks |
| Wire Probe | Copper wire × 2, handle | 12 | +1d10 to terminals |
| Glitch Trigger | Capacitor × 1, wire × 4 | 14 | Force glitch state |
| Bypass Clamps | Metal clips × 4 | 12 | Skip one layer |

**Unit Tests (~2):**
- [ ] Tool crafting succeeds with components
- [ ] Crafted tool provides correct bonus

---

### v0.15.4h - Alternative Bypass Methods

#### BruteForceOption Value Object
**Purpose:** When lockpicking unavailable

| Target | MIGHT DC | Consequences |
|--------|----------|--------------|
| Simple Door | 12 | Loud (alerts nearby) |
| Reinforced Door | 16 | Very loud, may damage contents |
| Vault | 22 | Multiple attempts, exhausting |
| Container | 10-16 | Contents may be damaged |

**Alternative Methods:**
| Obstacle | Alternatives |
|----------|--------------|
| Locked Door | Find key, brute force, runic bypass, alternate route |
| Secured Terminal | Find codes, hotwire to different terminal, accept partial |
| Active Trap | Trigger from distance, destroy mechanism, sacrifice |

**Unit Tests (~2):**
- [ ] Brute force applies correct DC
- [ ] Brute force consequences apply

---

### v0.15.4i - Specialization Integration

#### Scrap-Tinker Abilities
- [ ] `[Master Craftsman]` - Craft [Masterwork Tools] from rare components
- [ ] `[Relock]` - Can re-lock bypassed lock to slow pursuit

#### Ruin-Stalker Abilities
- [ ] `[Trap Artist]` - Re-arm disabled traps as party defenses
- [ ] `[Sixth Sense]` - Auto-detect traps within 10 feet

#### Jötun-Reader Abilities
- [ ] `[Deep Access]` - Automatically gain [Admin-Level] on success
- [ ] `[Pattern Recognition]` - Reduce [Glitched] DC penalty by 2

#### Gantry-Runner Abilities
- [ ] `[Fast Pick]` - Reduced time on bypass
- [ ] `[Bypass Under Fire]` - No penalty when in danger

**Unit Tests (~2):**
- [ ] Jötun-Reader gains Admin on success
- [ ] Ruin-Stalker auto-detects nearby traps

---

### Configuration Files

| File | Purpose |
|------|---------|
| `lock-types.json` | Lock classification and DCs |
| `terminal-types.json` | Terminal types and ICE ratings |
| `trap-types.json` | Trap definitions and consequences |
| `bypass-methods.json` | Jury-rigging approaches |
| `improvised-tools.json` | Craftable tool recipes |
| `system-bypass-descriptors.json` | Voice guidance text |

---

### Dependencies

**Requires:**
- v0.15.0: Dice pool refactor (success-counting, fumble/critical detection)
- v0.15.1: Skill infrastructure (SkillContext, SkillOutcome, FumbleConsequence)
- v0.10.x: Status effects
- Crafting system: Component usage

**Provides to:**
- Dungeon exploration mechanics
- Security system interactions
- Resource recovery

---

### Acceptance Criteria

- [ ] Lockpicking uses tool modifiers correctly
- [ ] Lock fumble creates [Mechanism Jammed]
- [ ] Terminal hacking progresses through layers
- [ ] ICE encounters resolve correctly
- [ ] Trap disarmament follows three-step process
- [ ] Trap fumble triggers on disarmer
- [ ] Jury-rigging methods apply modifiers
- [ ] Complication table resolves on failure
- [ ] Glitch exploitation timing works
- [ ] Tool crafting produces usable items
- [ ] Specialization abilities function
- [ ] ~30 unit tests pass
