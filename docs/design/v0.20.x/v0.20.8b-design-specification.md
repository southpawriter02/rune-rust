# Design Specification: v0.20.8b - Tier 2 Abilities & Advanced Mechanics

**Version:** v0.20.8b
**Status:** Design Phase
**Last Updated:** 2026-01-28
**Target Tests:** ~14 unit and integration tests
**Specialization:** Seiðkona (Seeress)
**Path Type:** Heretical (Final)
**Archetype:** Mystic
**Tier:** 2 (Advanced)

---

## Table of Contents

1. [Executive Summary](#1-executive-summary)
2. [Tier 2 Overview](#2-tier-2-overview)
3. [Architecture Diagrams](#3-architecture-diagrams)
4. [Fate's Thread Ability Specification](#4-fates-thread-ability-specification)
5. [Weave Disruption Ability Specification](#5-weave-disruption-ability-specification)
6. [Resonance Cascade Ability Specification](#6-resonance-cascade-ability-specification)
7. [Advanced Resonance Mechanics](#7-advanced-resonance-mechanics)
8. [Precognition System](#8-precognition-system)
9. [Weave Disruption Mechanics](#9-weave-disruption-mechanics)
10. [Cost Reduction Cascade System](#10-cost-reduction-cascade-system)
11. [User Stories](#11-user-stories)
12. [Application Service Layer](#12-application-service-layer)
13. [Domain Models (Tier 2 Only)](#13-domain-models-tier-2-only)
14. [Configuration Specifications](#14-configuration-specifications)
15. [Code Examples & Implementation](#15-code-examples--implementation)
16. [Corruption Risk at Tier 2](#16-corruption-risk-at-tier-2)
17. [Logging Specifications](#17-logging-specifications)
18. [Unit Testing Requirements](#18-unit-testing-requirements)
19. [Integration with Tier 1](#19-integration-with-tier-1)
20. [Deliverable Checklist](#20-deliverable-checklist)
21. [Acceptance Criteria](#21-acceptance-criteria)
22. [Dependencies & Prerequisites](#22-dependencies--prerequisites)

---

## 1. Executive Summary

Version 0.20.8b introduces **Tier 2 Abilities** for the Seiðkona specialization, significantly expanding magical versatility while maintaining corruption risk escalation.

### Key Features

| Feature | Description |
|---------|-------------|
| **Fate's Thread** | Precognitive ability to glimpse enemy's next action (+2 Resonance) |
| **Weave Disruption** | Dispel magical effects with Resonance scaling (+1 Resonance) |
| **Resonance Cascade** | Cost reduction mechanic at high Resonance (-2 AP, min 1) |
| **Unlock Cost** | 2 PP (specialization points) |
| **Resonance Interaction** | Tier 2 abilities build MORE Resonance (+1 to +2), accelerating corruption risk |
| **Strategic Depth** | New tactical choices: precognition, dispelling, cost optimization |

### Tier 2 Abilities Matrix

| Ability | Type | AP Cost | AP with Cascade | Resonance | Risk | Duration |
|---------|------|---------|-----------------|-----------|------|----------|
| **Fate's Thread** | Active | 2 AP | 0 AP* | +2 | High | 1 action |
| **Weave Disruption** | Active | 3 AP | 1 AP* | +1 | High | Instant |
| **Resonance Cascade** | Passive Mod | — | -2 to other abilities | +0 | N/A | Persistent |

*When Resonance 5+, Cascade applies to future casts

### Key Deliverables

| Category | Count | Details |
|----------|-------|---------|
| **Domain Value Objects** | 3 | PrecognitionResult, DispelAttempt, CascadeModifier |
| **Domain Enums** | 2 | DispelEffect, PrecognitionAccuracy |
| **Application Services** | 2 | IPrecognitionService, IDispelService |
| **Ability Implementations** | 3 | All Tier 2 abilities with full mechanics |
| **Configuration Files** | 1 | abilities.json (Tier 2 entries) |
| **Unit Tests** | ~14 | Comprehensive T2 ability coverage |

---

## 2. Tier 2 Overview

### 2.1 Progression Rationale

Tier 2 abilities represent the Seiðkona's mastery over Aetheric manipulation:

1. **Fate's Thread:** Knowledge-focused (divination/precognition)
2. **Weave Disruption:** Control-focused (dispelling/counterspelling)
3. **Resonance Cascade:** System-focused (optimization/efficiency)

Together, they enable sophisticated tactical play while raising corruption exposure through increased Resonance building.

### 2.2 Corruption Risk Escalation

**Tier 1 vs Tier 2 Comparison:**

```
Tier 1: Seiðr Bolt
- 1 AP cost
- +1 Resonance per cast
- Path to 10 Resonance = 10 casts

Tier 2: Multiple abilities
- 2-3 AP costs (before cascade)
- +1 to +2 Resonance per cast
- Resonance Cascade enables rapid Resonance buildup
- Faster path to dangerous corruption thresholds
```

**Strategic Implication:** Tier 2 encourages risky, resource-intensive play with potential for rapid Resonance escalation.

### 2.3 New Mechanic: Resonance Cascade

**What it is:** A passive modifier that reduces AP costs of other Seiðkona abilities when Resonance is 5+.

**Mechanic:**
```
At Resonance 5+, all Seiðkona abilities cost 2 less AP (minimum 1)

Example:
- Seiðr Bolt: 1 AP → 1 AP (already at 1, no change)
- Fate's Thread: 2 AP → 1 AP (2-1=1 after rounding)
- Weave Disruption: 3 AP → 1 AP (3-2=1)
- Wyrd Sight: 2 AP → 1 AP (not affected, but shown for reference)

Wait, this creates issues. Let me recalculate:
```

Actually, let me reconsider the cost reduction to be clearer:

**Corrected Cascade Mechanic:**
```
At Resonance 5+, activate Resonance Cascade as passive modifier:
- Reduce next Seiðkona ability's AP cost by 2 (minimum 1)
- Can be used up to (Resonance - 4) times before expiring
- OR: Lock in at 5+ and reduce all future abilities by 1 AP

Cleaner version:
When Resonance 5+, all Seiðkona ability costs are reduced by 1 AP (minimum 1)

Examples:
- Seiðr Bolt: 1 → 1 (no change, already at min)
- Fate's Thread: 2 → 1
- Weave Disruption: 3 → 2
- Wyrd Sight: 2 → 1
```

This makes more sense mechanically.

---

## 3. Architecture Diagrams

### 3.1 Tier 2 Service Architecture

```
┌──────────────────────────────────────────────────────────────────┐
│         v0.20.8b - Tier 2 Services Layer                         │
├──────────────────────────────────────────────────────────────────┤
│                                                                   │
│  ┌───────────────────────┐  ┌──────────────────────────────────┐ │
│  │ IPrecognitionService  │  │ IDispelService                   │ │
│  │ (Fate's Thread)       │  │ (Weave Disruption)               │ │
│  ├───────────────────────┤  ├──────────────────────────────────┤ │
│  │ + GetNextAction()     │  │ + AttemptDispel()                │ │
│  │ + RevealTarget()      │  │ + CalculateDC()                  │ │
│  │ + CounterMove()       │  │ + IdentifyEffects()              │ │
│  │ + Accuracy()          │  │ + Apply Resonance Bonus()        │ │
│  └───────────────────────┘  └──────────────────────────────────┘ │
│           │                                 │                    │
│           └──────────────────┬──────────────┘                    │
│                              │                                  │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ ICascadeModifierService                                  │  │
│  │ (Resonance Cascade - Cost Reduction)                     │  │
│  ├──────────────────────────────────────────────────────────┤  │
│  │ + IsCascadeActive(Resonance): bool                       │  │
│  │ + ApplyCostReduction(baseCost): int                      │  │
│  │ + GetCascadeCount(Resonance): int                        │  │
│  │ + ValidateApplicability(abilityId): bool                │  │
│  └──────────────────────────────────────────────────────────┘  │
│                              │                                  │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ ISeiðkonaAbilityService (Extended from Tier 1)          │  │
│  │ ┌────────────────────────────────────────────────────┐  │  │
│  │ │ + ExecuteFatesThread()                            │  │  │
│  │ │ + ExecuteWeaveDisruption()                        │  │  │
│  │ │ + ApplyResonanceCascade()                         │  │  │
│  │ │ + ValidateT2Prerequisites()                       │  │  │
│  │ └────────────────────────────────────────────────────┘  │  │
│  └──────────────────────────────────────────────────────────┘  │
│                                                                   │
└──────────────────────────────────────────────────────────────────┘
```

### 3.2 Tier 2 Domain Model Relationships

```
┌─────────────────────────────────────────────────────────────────┐
│       v0.20.8b - Tier 2 Domain Models                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  AetherResonanceResource (from v0.20.8a)                        │
│  ├── CurrentResonance: int (0-10)                               │
│  └── GetCorruptionRiskPercentage(): int                         │
│                │                                                │
│                │ DRIVES                                         │
│                ▼                                                │
│  ┌──────────────────────────┐  ┌──────────────────────────┐    │
│  │ PrecognitionResult       │  │ CascadeModifier          │    │
│  │ (Value Object)           │  │ (Value Object)           │    │
│  ├──────────────────────────┤  ├──────────────────────────┤    │
│  │ + TargetAction: Action   │  │ + IsActive: bool         │    │
│  │ + Accuracy: enum         │  │ + BaseCostReduction: int │    │
│  │ + ConfidenceLevel: int   │  │ + ResonanceThreshold: 5  │    │
│  │ + RevelationTime: DateTime│ │ + AffectedAbilities: []  │    │
│  │ + CounterActions: Action[]│ └──────────────────────────┘    │
│  └──────────────────────────┘                                   │
│                                                                  │
│  ┌──────────────────────────┐  ┌──────────────────────────┐    │
│  │ DispelAttempt            │  │ DispelEffect (Enum)      │    │
│  │ (Value Object)           │  │                          │    │
│  ├──────────────────────────┤  ├──────────────────────────┤    │
│  │ + TargetEffects: Effect[]│  │ - Bind                   │    │
│  │ + DispelDC: int          │  │ - Petrify                │    │
│  │ + RollResult: int        │  │ - Curse                  │    │
│  │ + EffectsRemoved: int    │  │ - Stun                   │    │
│  │ + ResonanceBonus: int    │  │ - Silence                │    │
│  │ + Success: bool          │  │ - Slow                   │    │
│  └──────────────────────────┘  └──────────────────────────┘    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 3.3 Resonance Cascade Activation Flow

```
                    RESONANCE LEVEL CHECK
                            │
            ┌───────────────┴───────────────┐
            │                               │
       Resonance < 5                   Resonance >= 5
       (0-4)                           (5-10)
            │                               │
            ▼                               ▼
    ┌──────────────┐          ┌──────────────────────┐
    │ No Cascade   │          │ Cascade ACTIVE       │
    │ Modifiers    │          │                      │
    │ Costs normal │          │ Cost Reduction = 1   │
    └──────────────┘          │ Applied to:          │
                              │ - Fate's Thread      │
                              │ - Weave Disruption   │
                              │ - Other Tier 2+      │
                              │                      │
                              │ Example:             │
                              │ Weave Disruption     │
                              │ 3 AP → 2 AP          │
                              └──────────────────────┘
                                       │
                                       ▼
                              Ability executes
                              at reduced cost
```

---

## 4. Fate's Thread Ability Specification

### 4.1 Overview

**Fate's Thread** grants temporary precognition, allowing the Seiðkona to glimpse the immediate future and anticipate enemy actions.

**Mechanical Focus:** Intelligence gathering + Tactical advantage (no damage)

### 4.2 Ability Details

| Property | Value |
|----------|-------|
| **Ability ID** | SeiðkonaAbilityId.FatesThread |
| **Display Name** | Fate's Thread |
| **Tier** | 2 (Unlock: 2 PP) |
| **Type** | Active Divination |
| **AP Cost** | 2 AP (1 AP with Cascade at 5+ Resonance) |
| **Resource Cost** | None |
| **Range** | 12 spaces |
| **Target Type** | Single hostile creature |
| **Duration** | 1 action (glimpse of next turn's action) |
| **Resonance Generated** | +2 (significant step up from Tier 1) |

### 4.3 Effect Resolution

**On Successful Cast:**

1. **Peek into Wyrd:**
   - Roll Perception + Resonance vs target's Will DC
   - Success reveals target's likely next action
   - Partial success: rough category (attack, move, ability use)
   - Failure: vague impression (enemy will act)

2. **Information Disclosure:**
   - Type of action (attack, skill, movement, ability)
   - Target location if moving
   - General damage type if attacking
   - NOT exact damage rolls or hidden conditions

3. **Resonance Generation:**
   - Increase Resonance by +2 (significant build)
   - Both Tier 2 abilities generate +2 (riskier than Tier 1)

4. **Corruption Check:**
   - Always triggers if Resonance becomes 5+ after this cast
   - High-risk ability at mid-range Resonance

5. **Tactical Use:**
   - Allows countermeasures (movement, defensive positioning)
   - Enables team coordination (communicate information to allies)
   - No mechanical penalty for enemy, purely informational

### 4.4 Precognition Accuracy Levels

| Roll Result vs DC | Accuracy | Information Granted |
|-------------------|----------|---------------------|
| Success by 15+ | Perfect | Exact action and parameters |
| Success by 5-14 | Clear | Action type and rough target |
| Success by 1-4 | Partial | Action category only |
| Failure by 1-4 | Vague | "Enemy will take an action" |
| Failure by 5+ | Confused | Misleading impression (GM's choice) |

### 4.5 Code Implementation Fragment

```csharp
public async Task<PrecognitionResult> ExecuteFatesThreadAsync(
    Guid characterId,
    Guid targetId)
{
    if (!await CanCastAbilityAsync(characterId, SeiðkonaAbilityId.FatesThread))
        throw new InvalidOperationException("Cannot cast Fate's Thread");

    // Determine if Cascade applies
    var resonance = await _resonanceService.GetCurrentResonanceAsync(characterId);
    var apCost = resonance >= 5 ? 1 : 2; // Cascade reduces by 1

    // Spend AP
    await _combatService.SpendAPAsync(characterId, apCost);

    // Get target
    var target = await _combatService.GetCharacterAsync(targetId);

    // Roll: Perception + Resonance vs Will DC
    var perceptionBonus = await _combatService.GetSkillBonusAsync(
        characterId, SkillType.Perception);
    var resonanceBonus = resonance; // Add resonance as bonus
    var roll = _diceService.Roll(1, 20);
    var total = roll.Total + perceptionBonus + resonanceBonus;

    var targetWillDC = target.WillDC;
    var success = total >= targetWillDC;

    // Determine accuracy
    var margin = total - targetWillDC;
    var accuracy = DetermineAccuracy(margin);

    // Peek at next action
    var nextAction = await _combatService.GetPlannedActionAsync(targetId);
    var revealedInformation = FilterInformationByAccuracy(nextAction, accuracy);

    // Build Resonance (+2 for Tier 2)
    var newResonance = await _resonanceService.BuildResonanceAsync(characterId, 2);

    // Evaluate corruption check
    var corruptionResult = await EvaluateCorruptionRiskAsync(
        characterId,
        newResonance);

    return new PrecognitionResult(
        Success: success,
        Accuracy: accuracy,
        RevealedAction: revealedInformation,
        TargetName: target.Name,
        DurationTurns: 1,
        ResonanceBefore: resonance,
        ResonanceAfter: newResonance,
        CorruptionResult: corruptionResult);
}

private PrecognitionAccuracy DetermineAccuracy(int margin)
{
    return margin switch
    {
        >= 15 => PrecognitionAccuracy.Perfect,
        >= 5 => PrecognitionAccuracy.Clear,
        >= 1 => PrecognitionAccuracy.Partial,
        >= -4 => PrecognitionAccuracy.Vague,
        _ => PrecognitionAccuracy.Confused
    };
}

private RevealedAction FilterInformationByAccuracy(
    PlannedAction fullAction,
    PrecognitionAccuracy accuracy)
{
    return accuracy switch
    {
        PrecognitionAccuracy.Perfect => fullAction.CompleteDetails(),
        PrecognitionAccuracy.Clear => fullAction.TypeAndTarget(),
        PrecognitionAccuracy.Partial => fullAction.ActionCategoryOnly(),
        PrecognitionAccuracy.Vague => fullAction.VagueDescription(),
        PrecognitionAccuracy.Confused => fullAction.MisleadingHint(),
        _ => fullAction.UnknownHint()
    };
}
```

### 4.6 Output Display Format

```
FATE'S THREAD CAST SUCCESSFUL

Target: Corrupted Wolf
Perception Check: [d20: 14] + Perception Bonus (3) + Resonance (5) = 22
Target Will DC: 15
Result: SUCCESS by 7 (Clear accuracy)

REVEALED INFORMATION
├─ Next Action: ATTACK
├─ Target: You (primary threat)
├─ Attack Type: Physical Claw Strike
├─ Approximate Damage: Medium (6-12 range)
└─ Timing: Next turn

RESONANCE UPDATE
├─ Before: 3/10
├─ After:  5/10 (ENTERED LOW RISK ZONE)
└─ Corruption Risk: 5% (next cast)

TACTICAL NOTE: Prepare defenses or countermeasures next turn
Status: Ready for next action
```

---

## 5. Weave Disruption Ability Specification

### 5.1 Overview

**Weave Disruption** allows the Seiðkona to unravel magical effects, functioning as a dispel/counterspell.

**Mechanical Focus:** Control + Magical interception (no damage)

### 5.2 Ability Details

| Property | Value |
|----------|-------|
| **Ability ID** | SeiðkonaAbilityId.WeaveDisruption |
| **Display Name** | Weave Disruption |
| **Tier** | 2 (Unlock: 2 PP) |
| **Type** | Active Counterspell/Dispel |
| **AP Cost** | 3 AP (2 AP with Cascade at 5+ Resonance) |
| **Resource Cost** | None |
| **Range** | 10 spaces |
| **Target Type** | Single creature with active effects OR spell being cast |
| **Duration** | Instant |
| **Resonance Generated** | +1 (lower than Fate's Thread) |

### 5.3 Effect Resolution

**Option A: Dispel Active Effects**

1. **Identify Effects:**
   - Target creature or area has active magical effects
   - Roll 1d20 + Resonance vs DC (varies by effect)

2. **Attempt Dispel:**
   - Each successful roll removes 1 effect
   - Can attempt multiple rolls if many effects present
   - DC scales with effect tier (weak 10, moderate 15, strong 20)

3. **Resolution:**
   - Removed effects end immediately
   - Creature loses associated benefits/drawbacks
   - Some effects may partially resist (GM judgment)

**Option B: Counterspell Active Spell**

1. **Reaction:** Can be used as reaction to enemy spell cast
2. **Effect:** Spell fizzles and effect is negated
3. **Cost:** Uses 1 AP immediately from next turn's pool
4. **Check:** d20 + Resonance vs spell caster's Spell DC

### 5.4 Effect Tier & DC Table

| Effect Strength | Example | DC | Resonance Needed |
|-----------------|---------|----|----|
| Weak | Bind, Minor Buff | 10 | Any |
| Moderate | Stun, Curse | 15 | 3+ |
| Strong | Petrify, Major Curse | 20 | 7+ |
| Legendary | Curse from Boss | 25 | 10 |

### 5.5 Code Implementation Fragment

```csharp
public async Task<DispelAttemptResult> ExecuteWeaveDisruptionAsync(
    Guid characterId,
    Guid targetId)
{
    if (!await CanCastAbilityAsync(characterId, SeiðkonaAbilityId.WeaveDisruption))
        throw new InvalidOperationException("Cannot cast Weave Disruption");

    var resonance = await _resonanceService.GetCurrentResonanceAsync(characterId);
    var apCost = resonance >= 5 ? 2 : 3; // Cascade reduces by 1

    await _combatService.SpendAPAsync(characterId, apCost);

    var target = await _combatService.GetCharacterAsync(targetId);
    var activeEffects = await _combatService.GetActiveEffectsAsync(targetId);

    if (!activeEffects.Any())
        return DispelAttemptResult.NoEffects(target.Name);

    var dispelledEffects = new List<string>();
    var failedEffects = new List<string>();

    foreach (var effect in activeEffects)
    {
        var dc = GetDispelDC(effect.Strength);
        var roll = _diceService.Roll(1, 20);
        var total = roll.Total + resonance;

        if (total >= dc)
        {
            await _combatService.RemoveEffectAsync(targetId, effect.Id);
            dispelledEffects.Add(effect.Name);
        }
        else
        {
            failedEffects.Add(effect.Name);
        }
    }

    // Build Resonance (+1 for dispel effects)
    var newResonance = await _resonanceService.BuildResonanceAsync(characterId, 1);

    var corruptionResult = await EvaluateCorruptionRiskAsync(
        characterId,
        newResonance);

    return new DispelAttemptResult(
        Success: dispelledEffects.Any(),
        DispelledEffects: dispelledEffects,
        ResistantEffects: failedEffects,
        TargetName: target.Name,
        ResonanceBefore: resonance,
        ResonanceAfter: newResonance,
        CorruptionResult: corruptionResult);
}

private int GetDispelDC(EffectStrength strength)
{
    return strength switch
    {
        EffectStrength.Weak => 10,
        EffectStrength.Moderate => 15,
        EffectStrength.Strong => 20,
        EffectStrength.Legendary => 25,
        _ => 15
    };
}
```

### 5.6 Output Display Format

```
WEAVE DISRUPTION CAST SUCCESSFUL

Target: Cursed Bandit
AP Cost: 3 AP (base) → 2 AP (Cascade modifier at Resonance 6)

DISPEL ATTEMPTS
├─ Curse of Weakness (Strong, DC 20)
│  Roll: [d20: 16] + Resonance (6) = 22
│  Result: SUCCESS! Effect removed
│
├─ Binding Hex (Moderate, DC 15)
│  Roll: [d20: 11] + Resonance (6) = 17
│  Result: SUCCESS! Effect removed
│
└─ Minor Poison (Weak, DC 10)
   Roll: [d20: 8] + Resonance (6) = 14
   Result: SUCCESS! Effect removed

EFFECTS REMOVED: 3 total
└─ Target is now free of magical hindrances

RESONANCE UPDATE
├─ Before: 6/10 (Low Risk Zone)
├─ After:  7/10 (Low Risk Zone)
└─ Corruption Risk: 5% (no change in zone)

Status: Successfully disrupted 3 magical effects
```

---

## 6. Resonance Cascade Ability Specification

### 6.1 Overview

**Resonance Cascade** is a passive ability that reduces AP costs of other Seiðkona abilities when Resonance is at 5+.

**Mechanical Focus:** Resource optimization + Efficiency (meta-ability)

### 6.2 Ability Details

| Property | Value |
|----------|-------|
| **Ability ID** | SeiðkonaAbilityId.ResonanceCascade |
| **Display Name** | Resonance Cascade |
| **Tier** | 2 (Unlock: 2 PP) |
| **Type** | Passive Modifier |
| **AP Cost** | — (passive, no cost) |
| **Resource Cost** | None |
| **Trigger** | Automatic when Resonance reaches 5+ |
| **Effect** | All Seiðkona ability AP costs reduced by 1 (minimum 1) |
| **Duration** | Permanent while Resonance 5+ |
| **Resonance Generated** | None (passive ability) |

### 6.3 Cascade Rules

**When Does It Apply?**
- Automatically active when Resonance is 5, 6, 7, 8, 9, or 10
- Does NOT apply at Resonance 0-4
- No action required to activate/deactivate

**What It Affects?**
- Tier 1 Abilities: Seiðr Bolt (1→1), Wyrd Sight (2→1)
- Tier 2 Abilities: Fate's Thread (2→1), Weave Disruption (3→2)
- Tier 3 Abilities: Völva's Vision (3→2), Aether Storm (5→4)
- Does NOT affect Unraveling (special logic)

**What It Does NOT Affect?**
- Passive abilities (no AP cost to reduce)
- Non-Seiðkona abilities
- Resource costs (only AP costs)

### 6.4 Cost Reduction Table

| Ability | Normal Cost | Cost with Cascade | Min Achieved |
|---------|-------------|-------------------|--------------|
| Seiðr Bolt | 1 | 1 | 1 (no change) |
| Wyrd Sight | 2 | 1 | 1 |
| Fate's Thread | 2 | 1 | 1 |
| Weave Disruption | 3 | 2 | 2 |
| Völva's Vision | 3 | 2 | 2 |
| Aether Storm | 5 | 4 | 4 |

### 6.5 Strategic Implications

**Resource Economy Shift:**

```
PRE-CASCADE (Resonance 0-4):
- AP pool per turn: 5-6 AP
- Weave Disruption: 3 AP (consumes 50% of turn)
- Multiple abilities impossible in single turn

POST-CASCADE (Resonance 5+):
- AP pool per turn: 5-6 AP
- Weave Disruption: 2 AP (33% of turn)
- Multiple abilities possible: Fate's Thread (1) + Weave (2) = 3 AP
- Enables rapid Resonance buildup (risky!)
- Creates "Cascade Loop": Higher Resonance → Cheaper abilities → More casts → Higher Resonance

CASCADE LOOP RISK:
├─ Resonance 5: Cascade activates
├─ Cheaper abilities enable more casts
├─ More casts = faster Resonance buildup
├─ Reaches Resonance 8-9 quickly
├─ Corruption risk escalates to 15%
└─ CRITICAL: Each cast at 8-9 now has 15% corruption chance
```

### 6.6 Code Implementation

```csharp
public class CascadeModifierService : ICascadeModifierService
{
    private readonly IAetherResonanceService _resonanceService;
    private const int CascadeActivationThreshold = 5;
    private const int APCostReduction = 1;
    private const int MinimumAPCost = 1;

    public async Task<bool> IsCascadeActiveAsync(Guid characterId)
    {
        var resonance = await _resonanceService.GetCurrentResonanceAsync(characterId);
        return resonance >= CascadeActivationThreshold;
    }

    public async Task<int> ApplyCostReductionAsync(
        Guid characterId,
        int baseCost,
        SeiðkonaAbilityId abilityId)
    {
        // Verify ability is applicable
        if (!IsApplicableAbility(abilityId))
            return baseCost; // No reduction for non-applicable abilities

        // Check if cascade is active
        var isCascadeActive = await IsCascadeActiveAsync(characterId);
        if (!isCascadeActive)
            return baseCost; // No reduction if cascade not active

        // Apply reduction (minimum 1)
        var reducedCost = Math.Max(baseCost - APCostReduction, MinimumAPCost);
        return reducedCost;
    }

    private bool IsApplicableAbility(SeiðkonaAbilityId abilityId)
    {
        return abilityId switch
        {
            SeiðkonaAbilityId.SeiðrBolt => true,
            SeiðkonaAbilityId.WyrdSight => true,
            SeiðkonaAbilityId.FatesThread => true,
            SeiðkonaAbilityId.WeaveDisruption => true,
            SeiðkonaAbilityId.VölvasVision => true,
            SeiðkonaAbilityId.AetherStorm => true,
            SeiðkonaAbilityId.Unraveling => false, // Special handling
            _ => false
        };
    }

    public async Task<int> GetActiveCascadeCountAsync(Guid characterId)
    {
        var resonance = await _resonanceService.GetCurrentResonanceAsync(characterId);
        if (resonance < CascadeActivationThreshold)
            return 0;

        // Number of abilities affected by cascade at this resonance
        return resonance - CascadeActivationThreshold + 1;
    }
}
```

### 6.7 UI Integration

```
COMBAT HUD - Ability Costs

[At Resonance 4]
- Seiðr Bolt: 1 AP
- Wyrd Sight: 2 AP
- Fate's Thread: 2 AP
- Weave Disruption: 3 AP

[At Resonance 5] [CASCADE ACTIVE]
- Seiðr Bolt: 1 AP ← (no change)
- Wyrd Sight: 1 AP ← REDUCED
- Fate's Thread: 1 AP ← REDUCED
- Weave Disruption: 2 AP ← REDUCED

[At Resonance 8] [CASCADE ACTIVE - HIGH RISK]
- Seiðr Bolt: 1 AP
- Wyrd Sight: 1 AP
- Fate's Thread: 1 AP
- Weave Disruption: 2 AP
⚠️ Each cast has 15% corruption chance
```

---

## 7. Advanced Resonance Mechanics

### 7.1 Multi-Cast Scenarios

**Scenario: High Resonance Combat**

```
Starting State: Resonance 8/10 (High Risk: 15% corruption)

Turn 1: Cast Fate's Thread
- AP Cost: 2 → 1 (Cascade applies)
- Resonance Build: 8 → 10 (MAXIMUM)
- Corruption Check: 15% roll
  └─ If triggered: Apply corruption, ability succeeds
  └─ If avoided: Ability succeeds clean

Turn 2: At Maximum Resonance (10/10)
- Any Seiðkona ability cast triggers 25% corruption check
- Option A: Continue casting high-risk abilities
- Option B: Use Unraveling capstone (v0.20.8c)
- Accumulated Aetheric Damage ready for massive payoff

Turn 3: Cascade persists
- Weave Disruption: 3 → 2 (Cascade)
- Can attempt dispels at reduced cost
- Each cast still has 25% corruption risk
```

### 7.2 Corruption Acceleration Pattern

**The Resonance Feedback Loop:**

```
Lower Resonance (0-4)
├─ Abilities cost normal AP
├─ Slower Resonance building
└─ Lower corruption risk (0%)

        ↓ (after 4-5 casts)

Mid Resonance (5-7)
├─ Cascade activates: -1 AP to abilities
├─ More casts per turn available
├─ Faster Resonance building
├─ Corruption risk: 5%
└─ Temptation to continue casting

        ↓ (after 8-9 casts total)

High Resonance (8-9)
├─ Cascade fully active
├─ Maximum cheap ability spam
├─ Critical corruption risk: 15%
├─ Each cast could corrupt character
└─ But powerful abilities unlocked

        ↓ (one more cast)

Critical (10/10)
├─ Cascade persists
├─ Unprecedented power available
├─ MAXIMUM corruption risk: 25%
├─ One in four casts will corrupt
└─ Ready for Unraveling capstone

DECISION POINT:
A) Continue casting (75% success, 25% corruption)
B) Use Unraveling now (massive payoff, guaranteed 20% check)
C) Disengage and cool down (reset Resonance to 0)
```

### 7.3 Risk Management Strategies

**Conservative Play:**
- Keep Resonance at 0-4 (no corruption risk)
- Use Tier 1 abilities primarily
- Slower progression but safe

**Balanced Play:**
- Maintain Resonance at 5-7 (5% risk)
- Mix Tier 1 and Tier 2 abilities
- Benefits from Cascade without extreme danger
- Manageable corruption exposure

**Aggressive Play:**
- Push Resonance to 8-9 (15% risk)
- Heavy Tier 2 ability usage
- Cascade enables ability spam
- Significant corruption exposure
- High reward, high risk

**Extreme Play:**
- Achieve Resonance 10 (25% risk)
- Every cast risks corruption
- Set up for Unraveling capstone
- One slip-up ruins character
- Victory or corruption, no middle ground

---

## 8. Precognition System

### 8.1 Information Revelation Framework

The Fate's Thread ability does NOT directly affect combat; it only reveals information. The revealed information can be used by the Seiðkona and allies to adjust tactics.

**Information Categories:**

```
LEVEL 1 (Confused): Vague impression
- "Enemy will act somehow"
- No tactical value

LEVEL 2 (Vague): Rough category
- "Enemy will attack"
- "Enemy will use an ability"
- "Enemy will move"

LEVEL 3 (Partial): Action category + general target
- "Enemy will attack a melee target"
- "Enemy will cast an ability at range"
- "Enemy will move toward objective"

LEVEL 4 (Clear): Action type + target + general effect
- "Enemy will attack the rogue"
- "Enemy will cast a fire spell"
- "Enemy will move to defend the exit"

LEVEL 5 (Perfect): Complete information
- "Enemy will attack the rogue with claw strike, dealing 8-10 damage"
- "Enemy will cast Fireball centered on the wizard, 4d6 damage"
- "Enemy will move to flanking position behind the fighter"
```

### 8.2 Tactical Response Options

**If Glimpse Reveals Attack Coming:**
- Move out of melee range
- Raise defenses (defensive stance, shield)
- Use damage mitigation abilities
- Coordinate with allies for setup

**If Glimpse Reveals Ability Coming:**
- Prepare countermeasures (Weave Disruption ready)
- Move out of area of effect
- Use resistance abilities
- Warn allies

**If Glimpse Reveals Movement:**
- Block movement path
- Set up ambush
- Use control abilities
- Coordinate team positioning

---

## 9. Weave Disruption Mechanics

### 9.1 Dispel vs Counterspell

**Dispel (Most Common Use):**
- Target has active effects
- Roll d20 + Resonance vs effect DC
- Remove effects on success
- Can attempt multiple effects

**Counterspell (Reaction Use):**
- Enemy is casting a spell
- React immediately (uses AP from next turn)
- Roll d20 + Resonance vs spell caster's Spell DC
- Spell fizzles and fails on success
- Available as reaction ability

### 9.2 Effect Difficulty Classification

**Weak Effects (DC 10):**
- Minor buffs applied by low-tier abilities
- Basic binds or restraints
- Low-level curses
- Example: "Bind" from basic enemy

**Moderate Effects (DC 15):**
- Stun or daze effects
- Serious curses (attribute penalty)
- Magical damage over time
- Example: "Stun" from combat enemy

**Strong Effects (DC 20):**
- Petrification (full paralysis)
- Major curse (stat damage)
- Permanent effects (until dispelled)
- Example: "Petrify" from boss enemy

**Legendary Effects (DC 25):**
- Curse from legendary foe
- Dimensional trap
- Reality-altering effects
- Example: Custom boss curse

### 9.3 Partial Resistance Mechanic

Some effects partially resist dispel:

```
Success by 5+: Full removal
Success by 1-4: Partial removal (effect weakened but persists)
Failure: Effect persists unchanged

Example: Cursed character has "Major Curse" (DC 20)
Weave Disruption roll: d20 + Resonance = 18

18 vs 20 = Failure
Curse persists fully, no reduction
```

---

## 10. Cost Reduction Cascade System

### 10.1 Cascade Logic Tree

```
ABILITY CAST INITIATED

  Is caster Seiðkona? ─N→ [Don't apply cascade]
  │
  └─Y
      │
      Is ability a Seiðkona ability? ─N→ [Don't apply cascade]
      │
      └─Y
          │
          Is ability passive (no AP cost)? ─Y→ [Don't apply cascade]
          │
          └─N
              │
              Get current Resonance
              │
              Is Resonance >= 5? ─N→ [Normal AP cost]
              │
              └─Y (Cascade ACTIVE)
                  │
                  Reduce AP cost by 1
                  │
                  Is cost < 1? ─Y→ [Set to 1]
                  │
                  └─N [Use reduced cost]
                      │
                      APPLY REDUCED COST
```

### 10.2 Cascade Interaction Examples

**Example 1: Early in fight (Resonance 3)**
```
Casting Weave Disruption (Normal 3 AP)
Cascade Check: Resonance 3 < 5 → No cascade
Result: 3 AP cost, ability executes
```

**Example 2: Mid-fight (Resonance 5, just entered cascade zone)**
```
Casting Weave Disruption (Normal 3 AP)
Cascade Check: Resonance 5 >= 5 → Cascade ACTIVE
Cost Reduction: 3 - 1 = 2 AP
Result: 2 AP cost, ability executes
```

**Example 3: High resonance (Resonance 8)**
```
Casting Fate's Thread (Normal 2 AP)
Cascade Check: Resonance 8 >= 5 → Cascade ACTIVE
Cost Reduction: 2 - 1 = 1 AP
Minimum Check: 1 > 1? No
Result: 1 AP cost, ability executes
```

**Example 4: Different ability same resonance**
```
Casting Seiðr Bolt (Normal 1 AP)
Cascade Check: Resonance 8 >= 5 → Cascade ACTIVE
Cost Reduction: 1 - 1 = 0 AP
Minimum Check: 0 > 1? No (enforce minimum)
Result: 1 AP cost (minimum enforced), ability executes
```

---

## 11. User Stories

### User Story 1: Seiðkona Glimpses Enemy Action

**As a** Tier 2 Seiðkona player
**I want to** cast Fate's Thread to see what enemy will do next turn
**So that** I can coordinate tactics and prepare countermeasures

**Acceptance Criteria:**
- Fate's Thread costs 2 AP (1 with Cascade)
- Roll Perception + Resonance vs target Will DC
- Reveal information based on accuracy level
- Build +2 Resonance
- Trigger corruption check if Resonance becomes 5+
- Information persists for one turn only

### User Story 2: Seiðkona Dispels Magical Effects

**As a** Tier 2 Seiðkona player
**I want to** use Weave Disruption to remove curses from allies
**So that** I can support the party and disable enemy effects

**Acceptance Criteria:**
- Weave Disruption costs 3 AP (2 with Cascade)
- Roll d20 + Resonance vs effect DC
- Remove successful effects
- Build +1 Resonance
- Can dispel multiple effects on same target
- Trigger corruption check afterward

### User Story 3: Cascade Activates at Resonance 5

**As a** Seiðkona reaching Resonance 5 for first time
**I want to** see my abilities cost less AP
**So that** I can cast more efficiently and do more per turn

**Acceptance Criteria:**
- Cascade automatically activates when Resonance reaches 5
- All Seiðkona abilities cost 1 AP less
- Minimum AP cost is 1 (no free abilities)
- Applies to all future ability casts
- Persists as long as Resonance 5+

### User Story 4: Seiðkona Enters Cascade Loop

**As a** aggressive Seiðkona player
**I want to** cast cheap abilities rapidly to build Resonance
**So that** I can escalate power and reach maximum Resonance

**Acceptance Criteria:**
- Cascade enables more casts per turn
- More casts = faster Resonance building
- Each cast risks corruption (escalating at 5+, 8+, 10)
- Reaching Resonance 10 provides massive power but critical risk

---

## 12. Application Service Layer

### 12.1 IPrecognitionService Interface

```csharp
namespace RuneAndRust.Application.Specializations.Seiðkona;

using System;
using System.Threading.Tasks;
using RuneAndRust.Domain.Specializations.Seiðkona;

/// <summary>
/// Manages precognition (Fate's Thread) ability execution and information revelation.
/// </summary>
public interface IPrecognitionService
{
    /// <summary>
    /// Execute Fate's Thread ability to glimpse enemy's next action.
    /// </summary>
    Task<PrecognitionResult> RevealNextActionAsync(Guid characterId, Guid targetId);

    /// <summary>
    /// Determine accuracy level based on roll margin.
    /// </summary>
    Task<PrecognitionAccuracy> DetermineAccuracyAsync(int rollMargin);

    /// <summary>
    /// Filter information based on accuracy level.
    /// </summary>
    Task<RevealedAction> FilterInformationAsync(
        PlannedAction fullAction,
        PrecognitionAccuracy accuracy);

    /// <summary>
    /// Get the planned action for a creature (hidden from player normally).
    /// </summary>
    Task<PlannedAction> GetPlannedActionAsync(Guid targetId);
}
```

### 12.2 IDispelService Interface

```csharp
namespace RuneAndRust.Application.Specializations.Seiðkona;

using System;
using System.Threading.Tasks;
using System.Collections.Generic;
using RuneAndRust.Domain.Specializations.Seiðkona;

/// <summary>
/// Manages dispelling (Weave Disruption) ability execution.
/// </summary>
public interface IDispelService
{
    /// <summary>
    /// Attempt to dispel magical effects on a target.
    /// </summary>
    Task<DispelAttemptResult> AttemptDispelAsync(
        Guid characterId,
        Guid targetId,
        IList<Guid>? specificEffectIds = null);

    /// <summary>
    /// Calculate dispel DC for an effect based on strength.
    /// </summary>
    Task<int> CalculateDispelDCAsync(EffectStrength strength);

    /// <summary>
    /// Check if a target has dispellable effects.
    /// </summary>
    Task<bool> HasDispellableEffectsAsync(Guid targetId);

    /// <summary>
    /// Get all active dispellable effects on a target.
    /// </summary>
    Task<IList<DispellableEffect>> GetDispellableEffectsAsync(Guid targetId);

    /// <summary>
    /// Attempt counterspell against an enemy's casting.
    /// </summary>
    Task<CounterspellResult> AttemptCounterspellAsync(
        Guid casterCharacterId,
        Guid targetSpellCasterId,
        string spellName);
}
```

### 12.3 ICascadeModifierService Interface

```csharp
namespace RuneAndRust.Application.Specializations.Seiðkona;

using System;
using System.Threading.Tasks;
using RuneAndRust.Domain.Specializations.Seiðkona;

/// <summary>
/// Manages Resonance Cascade cost reduction modifier.
/// </summary>
public interface ICascadeModifierService
{
    /// <summary>
    /// Determine if Cascade is currently active for a character.
    /// </summary>
    Task<bool> IsCascadeActiveAsync(Guid characterId);

    /// <summary>
    /// Apply cost reduction to ability AP cost if Cascade is active.
    /// </summary>
    Task<int> ApplyCostReductionAsync(
        Guid characterId,
        int baseCost,
        SeiðkonaAbilityId abilityId);

    /// <summary>
    /// Get the number of abilities affected by cascade at current Resonance.
    /// </summary>
    Task<int> GetActiveCascadeCountAsync(Guid characterId);

    /// <summary>
    /// Validate that an ability is subject to cascade reduction.
    /// </summary>
    Task<bool> IsApplicableToAbilityAsync(SeiðkonaAbilityId abilityId);
}
```

---

## 13. Domain Models (Tier 2 Only)

### 13.1 PrecognitionResult Value Object

```csharp
namespace RuneAndRust.Domain.Specializations.Seiðkona;

using System;
using RuneAndRust.Domain.ValueObjects;

/// <summary>
/// Represents the result of a Fate's Thread casting.
/// </summary>
public sealed class PrecognitionResult : ValueObject
{
    public bool Success { get; }
    public PrecognitionAccuracy Accuracy { get; }
    public RevealedAction RevealedAction { get; }
    public string TargetName { get; }
    public int DurationTurns { get; }
    public int ResonanceBefore { get; }
    public int ResonanceAfter { get; }
    public CorruptionRiskResult CorruptionResult { get; }

    private PrecognitionResult(
        bool success,
        PrecognitionAccuracy accuracy,
        RevealedAction revealedAction,
        string targetName,
        int durationTurns,
        int resonanceBefore,
        int resonanceAfter,
        CorruptionRiskResult corruptionResult)
    {
        Success = success;
        Accuracy = accuracy;
        RevealedAction = revealedAction;
        TargetName = targetName ?? throw new ArgumentNullException(nameof(targetName));
        DurationTurns = durationTurns;
        ResonanceBefore = resonanceBefore;
        ResonanceAfter = resonanceAfter;
        CorruptionResult = corruptionResult;
    }

    public static PrecognitionResult Create(
        bool success,
        PrecognitionAccuracy accuracy,
        RevealedAction revealedAction,
        string targetName,
        int resonanceBefore,
        int resonanceAfter,
        CorruptionRiskResult corruptionResult)
    {
        return new PrecognitionResult(
            success,
            accuracy,
            revealedAction,
            targetName,
            durationTurns: 1,
            resonanceBefore,
            resonanceAfter,
            corruptionResult);
    }

    public override string ToString()
    {
        return $"Precognition ({Accuracy}): {RevealedAction}";
    }

    protected override IEnumerable<object> GetEqualityComponents()
    {
        yield return Success;
        yield return Accuracy;
        yield return TargetName;
    }
}

public enum PrecognitionAccuracy
{
    Confused = 0,
    Vague = 1,
    Partial = 2,
    Clear = 3,
    Perfect = 4
}
```

### 13.2 DispelAttemptResult Value Object

```csharp
namespace RuneAndRust.Domain.Specializations.Seiðkona;

using System;
using System.Collections.Generic;
using RuneAndRust.Domain.ValueObjects;

/// <summary>
/// Represents the result of a Weave Disruption casting.
/// </summary>
public sealed class DispelAttemptResult : ValueObject
{
    public bool Success { get; }
    public IReadOnlyList<string> DispelledEffects { get; }
    public IReadOnlyList<string> ResistantEffects { get; }
    public string TargetName { get; }
    public int ResonanceBefore { get; }
    public int ResonanceAfter { get; }
    public CorruptionRiskResult CorruptionResult { get; }

    private DispelAttemptResult(
        bool success,
        IReadOnlyList<string> dispelledEffects,
        IReadOnlyList<string> resistantEffects,
        string targetName,
        int resonanceBefore,
        int resonanceAfter,
        CorruptionRiskResult corruptionResult)
    {
        Success = success;
        DispelledEffects = dispelledEffects ?? new List<string>();
        ResistantEffects = resistantEffects ?? new List<string>();
        TargetName = targetName ?? throw new ArgumentNullException(nameof(targetName));
        ResonanceBefore = resonanceBefore;
        ResonanceAfter = resonanceAfter;
        CorruptionResult = corruptionResult;
    }

    public static DispelAttemptResult Success(
        IReadOnlyList<string> dispelledEffects,
        string targetName,
        int resonanceBefore,
        int resonanceAfter,
        CorruptionRiskResult corruptionResult)
    {
        return new DispelAttemptResult(
            success: true,
            dispelledEffects,
            new List<string>(),
            targetName,
            resonanceBefore,
            resonanceAfter,
            corruptionResult);
    }

    public static DispelAttemptResult Partial(
        IReadOnlyList<string> dispelledEffects,
        IReadOnlyList<string> resistantEffects,
        string targetName,
        int resonanceBefore,
        int resonanceAfter,
        CorruptionRiskResult corruptionResult)
    {
        return new DispelAttemptResult(
            success: true,
            dispelledEffects,
            resistantEffects,
            targetName,
            resonanceBefore,
            resonanceAfter,
            corruptionResult);
    }

    public static DispelAttemptResult NoEffects(string targetName)
    {
        return new DispelAttemptResult(
            success: false,
            new List<string>(),
            new List<string>(),
            targetName,
            resonanceBefore: 0,
            resonanceAfter: 0,
            CorruptionRiskResult.NoRisk("Weave Disruption", 0));
    }

    public override string ToString()
    {
        return $"Dispel ({DispelledEffects.Count} removed, {ResistantEffects.Count} resistant)";
    }

    protected override IEnumerable<object> GetEqualityComponents()
    {
        yield return Success;
        yield return TargetName;
        yield return DispelledEffects.Count;
    }
}
```

### 13.3 DispelEffect Enum

```csharp
namespace RuneAndRust.Domain.Specializations.Seiðkona;

/// <summary>
/// Identifies magical effects that can be dispelled by Weave Disruption.
/// </summary>
public enum DispelEffect
{
    /// <summary>
    /// Binding/Restraint effects (weak, DC 10).
    /// </summary>
    Bind = 1,

    /// <summary>
    /// Stunning/Daze effects (moderate, DC 15).
    /// </summary>
    Stun = 2,

    /// <summary>
    /// Petrification (strong, DC 20).
    /// </summary>
    Petrify = 3,

    /// <summary>
    /// Curse effects (moderate to strong, DC 15-20).
    /// </summary>
    Curse = 4,

    /// <summary>
    /// Silence/Mute effects (moderate, DC 15).
    /// </summary>
    Silence = 5,

    /// <summary>
    /// Slow/Haste effects (weak to moderate, DC 10-15).
    /// </summary>
    Slow = 6,

    /// <summary>
    /// Damage over time effects (weak to moderate, DC 10-15).
    /// </summary>
    DamageOverTime = 7,

    /// <summary>
    /// Buff effects (weak, DC 10).
    /// </summary>
    Buff = 8
}
```

---

## 14. Configuration Specifications

### 14.1 abilities.json (Tier 2 Entries)

```json
{
  "abilities": [
    {
      "id": "fatesThread",
      "displayName": "Fate's Thread",
      "specialization": "seiðkona",
      "tier": 2,
      "type": "ActiveDivination",
      "range": "Ranged (12 spaces)",
      "apCost": 2,
      "apCostWithCascade": 1,
      "resourceCost": null,
      "durationTurns": 1,
      "effects": [
        "Reveal enemy's next action",
        "Accuracy based on roll margin",
        "Build +2 Aether Resonance",
        "Trigger corruption check if Resonance 5+"
      ],
      "description": "Weave your perception through the Wyrd to glimpse your foe's intention.",
      "flavorText": "The future shimmers before your eyes, showing what the enemy will do next.",
      "cooldown": "None",
      "maxUsesPerEncounter": null,
      "unlockConditions": [
        "Specialization: Seiðkona",
        "Specialization Tier: 2 (Cost 2 PP)",
        "Prerequisite: Tier 1 abilities"
      ]
    },
    {
      "id": "weaveDisruption",
      "displayName": "Weave Disruption",
      "specialization": "seiðkona",
      "tier": 2,
      "type": "ActiveCounterspell",
      "range": "Ranged (10 spaces)",
      "apCost": 3,
      "apCostWithCascade": 2,
      "resourceCost": null,
      "effects": [
        "Dispel magical effects",
        "Roll d20 + Resonance vs effect DC",
        "Build +1 Aether Resonance",
        "Can be used as reaction (uses next turn's AP)",
        "Trigger corruption check"
      ],
      "description": "Unravel magical effects with a gesture, disrupting enemy spellwork.",
      "flavorText": "Aetheric threads snap under your will as magical effects crumble.",
      "cooldown": "None",
      "maxUsesPerEncounter": null,
      "unlockConditions": [
        "Specialization: Seiðkona",
        "Specialization Tier: 2 (Cost 2 PP)",
        "Prerequisite: Tier 1 abilities"
      ]
    },
    {
      "id": "resonanceCascade",
      "displayName": "Resonance Cascade",
      "specialization": "seiðkona",
      "tier": 2,
      "type": "PassiveModifier",
      "apCost": 0,
      "apCostWithCascade": 0,
      "resourceCost": null,
      "cascadeTrigger": {
        "resonanceThreshold": 5,
        "apCostReduction": 1,
        "minimumApCost": 1
      },
      "effects": [
        "Reduce all Seiðkona ability AP costs by 1 (minimum 1)",
        "Activates automatically when Resonance reaches 5",
        "Persists while Resonance 5+",
        "No Resonance build (passive ability)"
      ],
      "description": "Channel the power of accumulated Resonance to optimize your casting.",
      "flavorText": "As your connection to the Wyrd deepens, magic flows through you more efficiently.",
      "cooldown": "None (passive)",
      "maxUsesPerEncounter": null,
      "unlockConditions": [
        "Specialization: Seiðkona",
        "Specialization Tier: 2 (Cost 2 PP)",
        "Prerequisite: Tier 1 abilities"
      ]
    }
  ]
}
```

---

## 15. Code Examples & Implementation

### 15.1 Extended SeiðkonaAbilityService (Tier 2)

```csharp
public async Task<PrecognitionResult> ExecuteFatesThreadAsync(
    Guid characterId,
    Guid targetId)
{
    // Validation
    if (!await CanCastAbilityAsync(characterId, SeiðkonaAbilityId.FatesThread))
        throw new InvalidOperationException("Cannot cast Fate's Thread");

    // Get current state
    var resonance = await _resonanceService.GetCurrentResonanceAsync(characterId);
    var cascadeActive = await _cascadeService.IsCascadeActiveAsync(characterId);

    // Calculate AP cost with cascade
    var baseCost = 2;
    var actualCost = cascadeActive ? 1 : 2;

    // Spend AP
    await _combatService.SpendAPAsync(characterId, actualCost);

    // Get target character
    var target = await _combatService.GetCharacterAsync(targetId);
    if (target == null)
        throw new InvalidOperationException($"Target {targetId} not found");

    // Get caster's perception skill bonus
    var perceptionBonus = await _combatService.GetSkillBonusAsync(
        characterId,
        SkillType.Perception);

    // Roll: d20 + Perception + Resonance vs target Will DC
    var roll = _diceService.Roll(1, 20);
    var total = roll.Total + perceptionBonus + resonance;
    var success = total >= target.WillDC;

    // Determine accuracy if successful
    var accuracy = PrecognitionAccuracy.Confused;
    if (success)
    {
        var margin = total - target.WillDC;
        accuracy = margin switch
        {
            >= 15 => PrecognitionAccuracy.Perfect,
            >= 5 => PrecognitionAccuracy.Clear,
            >= 1 => PrecognitionAccuracy.Partial,
            _ => PrecognitionAccuracy.Vague
        };
    }
    else if (total >= target.WillDC - 4)
    {
        accuracy = PrecognitionAccuracy.Vague;
    }
    else
    {
        accuracy = PrecognitionAccuracy.Confused;
    }

    // Get target's planned next action
    var plannedAction = await _combatService.GetPlannedActionAsync(targetId);

    // Filter information based on accuracy
    var revealedAction = FilterActionByAccuracy(plannedAction, accuracy);

    // Build Resonance (+2 for Tier 2)
    var newResonance = await _resonanceService.BuildResonanceAsync(characterId, 2);

    // Evaluate corruption risk
    var corruptionResult = await EvaluateCorruptionRiskAsync(
        characterId,
        newResonance);

    // Create result
    var result = PrecognitionResult.Create(
        success: success,
        accuracy: accuracy,
        revealedAction: revealedAction,
        targetName: target.Name,
        resonanceBefore: resonance,
        resonanceAfter: newResonance,
        corruptionResult: corruptionResult);

    // Log event
    await _eventLogger.LogAsync(new AbilityExecutionEvent(
        CharacterId: characterId,
        AbilityId: "fatesThread",
        TargetId: targetId,
        Success: success,
        Details: result.ToString()));

    return result;
}

private RevealedAction FilterActionByAccuracy(
    PlannedAction fullAction,
    PrecognitionAccuracy accuracy)
{
    return accuracy switch
    {
        PrecognitionAccuracy.Perfect => new RevealedAction(
            ActionType: fullAction.ActionType,
            TargetPosition: fullAction.TargetPosition,
            EstimatedDamage: fullAction.EstimatedDamage,
            Details: fullAction.FullDetails),

        PrecognitionAccuracy.Clear => new RevealedAction(
            ActionType: fullAction.ActionType,
            TargetPosition: fullAction.TargetPosition,
            EstimatedDamage: null,
            Details: $"{fullAction.ActionType.Name} targeting {fullAction.TargetPosition.Name}"),

        PrecognitionAccuracy.Partial => new RevealedAction(
            ActionType: fullAction.ActionType,
            TargetPosition: null,
            EstimatedDamage: null,
            Details: $"Enemy will {fullAction.ActionType.Name}"),

        PrecognitionAccuracy.Vague => new RevealedAction(
            ActionType: null,
            TargetPosition: null,
            EstimatedDamage: null,
            Details: "Enemy will take an action next turn"),

        PrecognitionAccuracy.Confused => new RevealedAction(
            ActionType: null,
            TargetPosition: null,
            EstimatedDamage: null,
            Details: "Misleading impression of enemy intent"),

        _ => new RevealedAction(
            ActionType: null,
            TargetPosition: null,
            EstimatedDamage: null,
            Details: "Unknown")
    };
}
```

---

## 16. Corruption Risk at Tier 2

### 16.1 Tier 2 Corruption Patterns

**Fate's Thread Corruption Pattern:**
```
At Resonance 4: FatesThread cast 4→5 (+2 Resonance)
└─ Now 5/10 (entered 5% risk zone)
└─ Next ability cast triggers 5% corruption check

At Resonance 6: FatesThread cast 6→8 (+2 Resonance)
└─ Now 8/10 (entered 15% risk zone)
└─ Corruption risk just jumped from 5% to 15%

At Resonance 8: FatesThread cast 8→10 (+2 Resonance)
└─ Now 10/10 (MAXIMUM RESONANCE)
└─ Corruption risk now 25%
```

**Weave Disruption Corruption Pattern:**
```
At Resonance 5: WeaveDisruption cast 5→6 (+1 Resonance)
└─ Stays in 5-7 range (5% risk)

At Resonance 7: WeaveDisruption cast 7→8 (+1 Resonance)
└─ Entered 8-9 range (15% risk zone jump!)

At Resonance 9: WeaveDisruption cast 9→10 (+1 Resonance)
└─ Reached MAXIMUM (25% risk)
```

### 16.2 Corruption Check Integration

```csharp
private async Task<CorruptionRiskResult> EvaluateCorruptionRiskAsync(
    Guid characterId,
    int newResonanceLevel)
{
    var riskPercentage = newResonanceLevel switch
    {
        0 or 1 or 2 or 3 or 4 => 0,
        5 or 6 or 7 => 5,
        8 or 9 => 15,
        10 => 25,
        _ => 0
    };

    if (riskPercentage == 0)
        return CorruptionRiskResult.NoRisk("Tier2Ability", newResonanceLevel);

    // Roll d100 for corruption check
    var roll = _diceService.Roll(1, 100);
    var triggered = roll.Total <= riskPercentage;

    var reason = newResonanceLevel switch
    {
        5 or 6 or 7 => $"Resonance {newResonanceLevel}/10 (Low Risk: 5%)",
        8 or 9 => $"Resonance {newResonanceLevel}/10 (High Risk: 15%)",
        10 => "Resonance 10/10 (CRITICAL: 25%)",
        _ => "Unknown"
    };

    var result = CorruptionRiskResult.AtRisk(
        triggered,
        riskPercentage,
        reason,
        "Tier2Ability",
        newResonanceLevel,
        newResonanceLevel == 10);

    if (triggered)
    {
        await _corruptionService.ApplyCorruptionAsync(
            characterId,
            source: "Seiðkona_Tier2_Resonance",
            amount: 10);
    }

    return result;
}
```

---

## 17. Logging Specifications

### 17.1 Tier 2 Ability Execution Logging

```
[SEIÐKONA_TIER2_ABILITY] CharacterId={guid}
Event: Fate's Thread Executed
Timestamp: 2026-01-28 14:35:22Z
APCost: 2 AP (base) → 1 AP (Cascade applied, Resonance 5)

PERCEPTION CHECK
PerceptionRoll: [d20: 16]
PerceptionBonus: 3
ResonanceBonus: 5
Total: 24
TargetWillDC: 15
Result: SUCCESS by 9 (CLEAR accuracy)

TARGET REVEALED INFORMATION
TargetId: {target-guid}
TargetName: Corrupted Warrior
PlannedAction: Attack (melee claw strike)
EstimatedDamage: 8-12
Accuracy: Clear (action type + target + damage type)

RESONANCE UPDATE
ResonanceBefore: 3/10
ResonanceAfter: 5/10 (ENTERED CASCADE ZONE)
ResonanceGain: +2 (Tier 2 standard)
CorruptionRiskEntry: Now 5% per ability cast

CORRUPTION CHECK
RiskPercentage: 5% (Resonance 5-7 range)
Roll: [d100: 47]
Result: Avoided (rolled above 5%)
CorruptionApplied: FALSE

Status: SUCCESS
```

### 17.2 Cascade Activation Logging

```
[CASCADE_ACTIVATED] CharacterId={guid}
Timestamp: 2026-01-28 14:35:25Z
Event: Resonance Cascade activated
PreviousResonance: 4/10
CurrentResonance: 5/10
Trigger: Fate's Thread cast reached Resonance threshold

COST REDUCTION EFFECTS
Active: TRUE
APCostReduction: 1
MinimumAPCost: 1 (enforced)

AFFECTED ABILITIES
- Seiðr Bolt: 1 → 1 (no change)
- Wyrd Sight: 2 → 1 (reduced)
- Fate's Thread: 2 → 1 (reduced)
- Weave Disruption: 3 → 2 (reduced)
- Völva's Vision: 3 → 2 (reduced next tier)

Next cast will use reduced costs
Status: Cascade is active and persistent
```

---

## 18. Unit Testing Requirements

### 18.1 Test Suites

**File:** `src/Tests/RuneAndRust.Application.Tests/Specializations/Seiðkona/FatesThreadAbilityTests.cs`

```csharp
public class FatesThreadAbilityTests
{
    [Fact]
    public async Task ExecuteFatesThreadAsync_SuccessfullyRevealsAction()
    {
        // Arrange
        var characterId = Guid.NewGuid();
        var targetId = Guid.NewGuid();
        // Setup character with high perception, target with moderate Will DC

        // Act
        var result = await _abilityService.ExecuteFatesThreadAsync(characterId, targetId);

        // Assert
        Assert.True(result.Success);
        Assert.NotEqual(PrecognitionAccuracy.Confused, result.Accuracy);
    }

    [Fact]
    public async Task ExecuteFatesThreadAsync_BuildsResonanceByTwo()
    {
        // Arrange
        var characterId = Guid.NewGuid();
        var targetId = Guid.NewGuid();
        var beforeResonance = await _resonanceService.GetCurrentResonanceAsync(characterId);

        // Act
        await _abilityService.ExecuteFatesThreadAsync(characterId, targetId);
        var afterResonance = await _resonanceService.GetCurrentResonanceAsync(characterId);

        // Assert
        Assert.Equal(beforeResonance + 2, afterResonance);
    }

    [Fact]
    public async Task ExecuteFatesThreadAsync_WhenCascadeActive_CostsOneLessAP()
    {
        // Arrange
        var characterId = Guid.NewGuid();
        var targetId = Guid.NewGuid();
        // Setup character with Resonance 5 (cascade active)

        // Act - track AP spent
        var apBefore = await _combatService.GetAvailableAPAsync(characterId);
        await _abilityService.ExecuteFatesThreadAsync(characterId, targetId);
        var apAfter = await _combatService.GetAvailableAPAsync(characterId);

        // Assert
        var apSpent = apBefore - apAfter;
        Assert.Equal(1, apSpent); // 2 - 1 cascade reduction = 1
    }

    [Fact]
    public async Task ExecuteFatesThreadAsync_TriggersCascadeAtResonance5()
    {
        // Arrange
        var characterId = Guid.NewGuid();
        var targetId = Guid.NewGuid();
        // Setup character with Resonance 4

        // Act
        await _abilityService.ExecuteFatesThreadAsync(characterId, targetId);
        var cascadeActive = await _cascadeService.IsCascadeActiveAsync(characterId);

        // Assert
        Assert.True(cascadeActive); // Resonance is now 6, should be active
    }
}
```

**File:** `src/Tests/RuneAndRust.Application.Tests/Specializations/Seiðkona/WeaveDisruptionAbilityTests.cs`

```csharp
public class WeaveDisruptionAbilityTests
{
    [Fact]
    public async Task ExecuteWeaveDisruptionAsync_RemovesEffects()
    {
        // Arrange
        var characterId = Guid.NewGuid();
        var targetId = Guid.NewGuid();
        // Setup target with 2 weak effects

        // Act
        var result = await _abilityService.ExecuteWeaveDisruptionAsync(characterId, targetId);

        // Assert
        Assert.True(result.Success);
        Assert.Equal(2, result.DispelledEffects.Count);
    }

    [Fact]
    public async Task ExecuteWeaveDisruptionAsync_PartialRemovalOnPartialSuccess()
    {
        // Arrange
        var characterId = Guid.NewGuid();
        var targetId = Guid.NewGuid();
        // Setup target with 1 weak + 1 strong effect

        // Act
        var result = await _abilityService.ExecuteWeaveDisruptionAsync(characterId, targetId);

        // Assert
        Assert.True(result.Success);
        Assert.True(result.DispelledEffects.Count >= 1); // At least weak effect removed
    }

    [Fact]
    public async Task ExecuteWeaveDisruptionAsync_BuildsResonanceByOne()
    {
        // Arrange
        var characterId = Guid.NewGuid();
        var targetId = Guid.NewGuid();
        var beforeResonance = await _resonanceService.GetCurrentResonanceAsync(characterId);

        // Act
        await _abilityService.ExecuteWeaveDisruptionAsync(characterId, targetId);
        var afterResonance = await _resonanceService.GetCurrentResonanceAsync(characterId);

        // Assert
        Assert.Equal(beforeResonance + 1, afterResonance);
    }
}
```

**File:** `src/Tests/RuneAndRust.Application.Tests/Specializations/Seiðkona/CascadeModifierServiceTests.cs`

```csharp
public class CascadeModifierServiceTests
{
    [Fact]
    public async Task IsCascadeActiveAsync_WhenResonance4_ReturnsFalse()
    {
        // Arrange
        var characterId = Guid.NewGuid();
        // Setup with Resonance 4

        // Act
        var result = await _cascadeService.IsCascadeActiveAsync(characterId);

        // Assert
        Assert.False(result);
    }

    [Fact]
    public async Task IsCascadeActiveAsync_WhenResonance5_ReturnsTrue()
    {
        // Arrange
        var characterId = Guid.NewGuid();
        // Setup with Resonance 5

        // Act
        var result = await _cascadeService.IsCascadeActiveAsync(characterId);

        // Assert
        Assert.True(result);
    }

    [Theory]
    [InlineData(2, 1)] // Fate's Thread: 2-1=1
    [InlineData(3, 2)] // Weave Disruption: 3-1=2
    [InlineData(1, 1)] // Seiðr Bolt: 1-1=0, min 1
    public async Task ApplyCostReductionAsync_ReducesByOne_MinOne(int baseCost, int expected)
    {
        // Arrange
        var characterId = Guid.NewGuid();
        // Setup with Resonance 5+ (cascade active)

        // Act
        var result = await _cascadeService.ApplyCostReductionAsync(
            characterId,
            baseCost,
            SeiðkonaAbilityId.FatesThread);

        // Assert
        Assert.Equal(expected, result);
    }
}
```

---

## 19. Integration with Tier 1

### 19.1 Tier 1 + Tier 2 Combination Scenarios

**Scenario 1: Early Encounter (Mixing Tiers)**

```
Turn 1: Cast Seiðr Bolt (Tier 1)
- 1 AP cost
- +1 Resonance (0→1)
- Build Accumulated Aetheric Damage

Turn 2: Cast Wyrd Sight (Tier 1)
- 2 AP cost
- No Resonance build
- Scan for threats

Turn 3: Cast Fate's Thread (Tier 2)
- 2 AP cost
- +2 Resonance (1→3)
- Reveal enemy action
- Corruption risk: 0% (still in safe zone)

Turn 4: Cast Weave Disruption (Tier 2)
- 3 AP cost
- +1 Resonance (3→4)
- Dispel weak effect
- Corruption risk: 0% (still safe at 4)

Turn 5: Continue with mix of abilities
```

**Scenario 2: Reaching Cascade Zone**

```
Turn 1-5: Build Resonance to 5 through combined ability use
├─ Seiðr Bolt casts
├─ Fate's Thread cast (+2)
└─ Total Resonance: 5

CASCADE ACTIVATES
├─ All future abilities cost 1 less AP
└─ Risk: 5% per cast

Turn 6: Cast Weave Disruption with Cascade
- Normal cost: 3 AP
- With Cascade: 2 AP (3-1)
- Use saved 1 AP for something else

Turn 7: Cast Fate's Thread with Cascade
- Normal cost: 2 AP
- With Cascade: 1 AP (2-1)
- Can now cast multiple abilities per turn
```

---

## 20. Deliverable Checklist

- [ ] Domain Value Objects
  - [ ] PrecognitionResult.cs (with XML docs)
  - [ ] DispelAttemptResult.cs (with XML docs)
  - [ ] CascadeModifier.cs (for future use)

- [ ] Domain Enums
  - [ ] PrecognitionAccuracy.cs (5 levels)
  - [ ] DispelEffect.cs (8 effect types)

- [ ] Application Services
  - [ ] IPrecognitionService.cs (interface)
  - [ ] IDispelService.cs (interface)
  - [ ] ICascadeModifierService.cs (interface)
  - [ ] SeiðkonaAbilityService.cs (extended with T2)
  - [ ] PrecognitionService.cs (implementation)
  - [ ] DispelService.cs (implementation)
  - [ ] CascadeModifierService.cs (implementation)

- [ ] Configuration Files
  - [ ] abilities.json (Tier 2 entries: Fate's Thread, Weave Disruption, Resonance Cascade)

- [ ] Unit Tests (~14 tests)
  - [ ] FatesThreadAbilityTests.cs (7 tests)
  - [ ] WeaveDisruptionAbilityTests.cs (7 tests)
  - [ ] CascadeModifierServiceTests.cs (7 tests)

- [ ] Documentation
  - [ ] This design specification (v0.20.8b)
  - [ ] Architecture diagrams (included)
  - [ ] User stories and acceptance criteria
  - [ ] Logging specifications

---

## 21. Acceptance Criteria

### Fate's Thread Criteria

- [x] Costs 2 AP (1 with Cascade at 5+ Resonance)
- [x] Roll Perception + Resonance vs target Will DC
- [x] Reveal information based on accuracy level
- [x] Build +2 Resonance (higher than Tier 1)
- [x] Trigger corruption check after Resonance build
- [x] Information persists for 1 action only
- [x] Can be used multiple times per encounter

### Weave Disruption Criteria

- [x] Costs 3 AP (2 with Cascade at 5+ Resonance)
- [x] Roll d20 + Resonance vs effect DC
- [x] Remove successful effects (can attempt multiple)
- [x] Build +1 Resonance
- [x] Trigger corruption check after Resonance build
- [x] Can be used as reaction (uses next turn's AP)
- [x] Partial resistance mechanic for strong effects

### Resonance Cascade Criteria

- [x] Passive ability (automatic, no cost)
- [x] Activates when Resonance reaches 5
- [x] Reduces all Seiðkona ability AP costs by 1
- [x] Minimum AP cost enforced (1)
- [x] Applies to Tier 1 and Tier 2 abilities
- [x] Does NOT apply to passive abilities
- [x] Persists while Resonance 5+

### Integration Criteria

- [x] Tier 2 abilities integrate with Tier 1 abilities seamlessly
- [x] Cascade applies to Tier 1 abilities at 5+ Resonance
- [x] Corruption checks follow established patterns
- [x] Resonance building is consistent across tiers
- [x] Cost reduction logic is clear and deterministic

---

## 22. Dependencies & Prerequisites

### Required Versions

| Dependency | Version | Purpose |
|------------|---------|---------|
| v0.20.8a (Tier 1) | Complete | Baseline Seiðkona framework |
| v0.6.x Dice System | Complete | Perception rolls, d100 corruption checks |
| v0.15.x Perception | Complete | Skill bonus retrieval, target DC queries |
| v0.17.5 Characters | Complete | Character state, specialization extensions |
| v0.18.x Corruption | Complete | CorruptionService integration |

### New Dependencies

- RuneAndRust.Domain.Specializations.Seiðkona (extended)
- RuneAndRust.Application.Specializations.Seiðkona (extended)

### Integration Points

1. **DiceService:** Perception rolls (d20), corruption checks (d100)
2. **CharacterRepository:** Resonance and state persistence
3. **CombatService:** AP management, effect tracking
4. **CorruptionService:** Corruption application
5. **SkillService:** Perception skill bonus calculation

---

## Conclusion

Version 0.20.8b establishes the Seiðkona's Tier 2 abilities, adding significant tactical depth:

- **Fate's Thread** provides intelligence gathering with high Resonance buildup
- **Weave Disruption** enables magical control with moderate buildup
- **Resonance Cascade** optimizes resource efficiency, enabling rapid escalation
- **Corruption Risk Escalation** creates tension at 5-7 (5%), 8-9 (15%), and 10 (25%)
- **Strategic Depth** enables varied playstyles from conservative to aggressive

Tier 2 prepares for Tier 3 (v0.20.8c) with its powerful Unraveling capstone and advanced abilities.

---

**Version Control:**
- Created: 2026-01-28
- Status: Ready for Implementation
- Next Phase: v0.20.8c (Tier 3 Abilities & Unraveling Capstone)
