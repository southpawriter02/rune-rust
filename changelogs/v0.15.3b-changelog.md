# v0.15.3b Changelog - Persuasion System

## Summary

Implements the **Persuasion System** subsystem of the Rhetoric skill. Enables honest convincing through logical arguments, emotional appeals, and evidence presentation. Features 5-tier request complexity (DC 8-24), argument alignment with NPC values (+/-1d10), evidence bonuses (+2d10), and the [Trust Shattered] fumble consequence.

## Added

### Domain Layer - Enums (2 files)

| File | Description |
|------|-------------|
| `PersuasionRequest.cs` | 5-tier complexity enum: Trivial (DC 8), Simple (DC 12), Moderate (DC 16), Major (DC 20), Extreme (DC 24) |
| `ConvictionDepth.cs` | 5-level conviction enum: None, Shallow, Moderate, Strong, Deep |

### Domain Layer - Extensions (1 file)

| File | Description |
|------|-------------|
| `PersuasionRequestExtensions.cs` | `GetBaseDc()`, `GetRequiredSuccesses()`, `GetMinimumDisposition()`, `MayBeImpossible()`, `GetDescription()` |

### Domain Layer - Value Objects (3 files)

| File | Description |
|------|-------------|
| `ArgumentAlignment.cs` | Evaluates argument themes against NPC values/dislikes; +1d10 aligned, -1d10 contradicting |
| `PersuasionContext.cs` | Captures all persuasion factors: request type, disposition, alignment, evidence, NPC status, previous attempts |
| `PersuasionResult.cs` | Outcome with RequestGranted, ConvictionDepth, disposition/reputation changes, unlocked/locked options |

### Application Layer (2 files)

| File | Description |
|------|-------------|
| `IPersuasionService.cs` | Interface: `AttemptPersuasionAsync`, `BuildContextAsync`, `EvaluateArgumentAlignmentAsync`, `IsPersuasionBlockedAsync` |
| `PersuasionService.cs` | Full implementation with context building, outcome processing, [Trust Shattered] handling |

### Configuration (1 file)

| File | Description |
|------|-------------|
| `config/social/persuasion-requests.json` | Request tiers, modifiers, outcome effects, recovery conditions |

### Unit Tests (2 test files, 39 tests)

| File | Tests |
|------|-------|
| `PersuasionRequestTests.cs` | 25 tests: DC mapping, required successes, minimum disposition, mayBeImpossible, descriptions |
| `ArgumentAlignmentTests.cs` | 9 tests: alignment evaluation, factory methods, priority rules |

## Key Features

### Request Complexity Tiers

| Tier | DC | Successes | Min Disposition | Description |
|------|:--:|:---------:|-----------------|-------------|
| Trivial | 8 | 1 | Unfriendly | Minimal effort |
| Simple | 12 | 2 | Neutral | Small favor |
| Moderate | 16 | 3 | NeutralPositive | Meaningful assistance |
| Major | 20 | 4 | Friendly | Significant risk |
| Extreme | 24 | 4+ | Ally | Life-altering |

### Modifier System

| Source | Modifier | Effect |
|--------|----------|--------|
| Disposition | Ally +3d10, Friendly +2d10, NeutralPositive +1d10, Hostile -2d10 | Dice pool |
| Argument aligned | +1d10 | Dice pool |
| Argument contradicts | -1d10 | Dice pool |
| Evidence provided | +2d10 | Dice pool |
| NPC [Stressed] | -1d10 | Dice pool |
| NPC [Grateful] | +1d10 | Dice pool |
| 2nd attempt | +2 | DC |
| 3rd+ attempt | +4 | DC |
| Same argument | +2 | DC |

### Outcome Effects

| Outcome | Disposition | Reputation | Conviction |
|---------|:-----------:|:----------:|------------|
| Critical Success | +15 | +5 | Deep |
| Exceptional Success | +12 | +3 | Strong |
| Full Success | +10 | +2 | Moderate |
| Marginal Success | +5 | +0 | Shallow |
| Failure | -5 | -2 | None |
| Fumble | -30 | -10 | [Trust Shattered] |

### [Trust Shattered] Fumble

- **Trigger:** 0 successes + â‰¥1 botch
- **Effect:** All persuasion options locked with target NPC
- **Recovery:** Complete quest benefiting NPC, time passage, or third-party intercession

## Files Changed

| File | Change |
|------|--------|
| `src/Core/RuneAndRust.Domain/Enums/PersuasionRequest.cs` | Added |
| `src/Core/RuneAndRust.Domain/Enums/ConvictionDepth.cs` | Added |
| `src/Core/RuneAndRust.Domain/Extensions/PersuasionRequestExtensions.cs` | Added |
| `src/Core/RuneAndRust.Domain/ValueObjects/ArgumentAlignment.cs` | Added |
| `src/Core/RuneAndRust.Domain/ValueObjects/PersuasionContext.cs` | Added |
| `src/Core/RuneAndRust.Domain/ValueObjects/PersuasionResult.cs` | Added |
| `src/Core/RuneAndRust.Application/Interfaces/IPersuasionService.cs` | Added |
| `src/Core/RuneAndRust.Application/Services/PersuasionService.cs` | Added |
| `config/social/persuasion-requests.json` | Added |
| `tests/RuneAndRust.Domain.UnitTests/Enums/PersuasionRequestTests.cs` | Added |
| `tests/RuneAndRust.Domain.UnitTests/ValueObjects/ArgumentAlignmentTests.cs` | Added |
| `changelogs/v0.15.3b-changelog.md` | Added |

## Test Results

```
Total tests: 39
     Passed: 39
Build succeeded with 0 errors
```

## Dependencies

- **v0.15.3a:** `NpcDisposition`, `DispositionLevel`, `SocialContext`, `SocialResult`
- **v0.15.1b:** `FumbleType.TrustShattered`, `FumbleConsequence`, `OutcomeDetails`
- **v0.15.0:** `DiceRollResult`, `SkillOutcome`, `IDiceRollerService`

## Notes

- `FumbleType.TrustShattered` already existed (value = 0), so no modification was needed
- Service uses in-memory tracking; production implementation would persist conversation state
- Simulated skill checks; full integration requires `IDiceRollerService`
