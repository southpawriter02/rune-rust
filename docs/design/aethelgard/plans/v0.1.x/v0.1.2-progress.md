# v0.1.2 Implementation Progress

**Version:** The Burden of Survival
**Started:** 2025-12-18
**Status:** v0.1.2a Complete ✅

## Sub-Version Status

| Version | Scope | Status | Tests |
|---------|-------|--------|-------|
| v0.1.2a | Core entities + persistence | ✅ Complete | 149 new (870 total) |
| v0.1.2b | InventoryService + commands | ⏳ Pending | 0/~60 |
| v0.1.2c | LootService + integration | ⏳ Pending | 0/~60 |

---

## v0.1.2a Progress

### Phase 1a: New Enums
- [x] `Core/Enums/QualityTier.cs`
- [x] `Core/Enums/EquipmentSlot.cs`
- [x] `Core/Enums/ItemType.cs`
- [x] `Core/Enums/BurdenState.cs`

### Phase 1b: New Entities
- [x] `Core/Entities/Item.cs`
- [x] `Core/Entities/Equipment.cs`
- [x] `Core/Entities/InventoryItem.cs`

### Phase 1c: Entity Modifications
- [x] `Core/Entities/Character.cs` - Add Inventory, EquipmentBonuses, GetEffectiveAttribute()
- [x] `Core/Entities/InteractableObject.cs` - Add HasBeenSearched, LootTier

### Phase 1d: Interfaces
- [x] `Core/Interfaces/IItemRepository.cs`
- [x] `Core/Interfaces/IInventoryRepository.cs`

### Phase 1e: Persistence
- [x] `Persistence/Data/RuneAndRustDbContext.cs` - TPH config
- [x] `Persistence/Repositories/ItemRepository.cs`
- [x] `Persistence/Repositories/InventoryRepository.cs`

### Phase 1f: Tests
- [x] `Tests/Core/QualityTierTests.cs` (9 tests)
- [x] `Tests/Core/EquipmentSlotTests.cs` (16 tests)
- [x] `Tests/Core/ItemTypeTests.cs` (14 tests)
- [x] `Tests/Core/BurdenStateTests.cs` (8 tests)
- [x] `Tests/Core/ItemTests.cs` (18 tests)
- [x] `Tests/Core/EquipmentTests.cs` (25 tests)
- [x] `Tests/Core/InventoryItemTests.cs` (14 tests)
- [x] `Tests/Integration/ItemPersistenceTests.cs` (15 tests)
- [x] `Tests/Integration/InventoryPersistenceTests.cs` (19 tests)

### Validation Checklist
- [x] Build succeeds
- [x] All v0.1.2a tests pass (149 new, 870 total)
- [x] TPH discriminator works (Equipment saves/loads as Item)
- [x] InventoryItem join table creates correctly
- [x] Character.Inventory navigation property works

---

## Design Decisions (Reference)

| Decision | Choice |
|----------|--------|
| Item Hierarchy | TPH (Table-per-Hierarchy) |
| Inventory Model | InventoryItem join table |
| Equipment Bonuses | Separate tracking on Character |
| Loot Integration | Extend InteractableObject |
| Burden Calculation | MIGHT × 10kg capacity |

## Key Thresholds

```
Heavy Burden: 70% capacity → -2 Finesse
Overburdened: 90% capacity → Can't move
Max Capacity: MIGHT × 10,000 grams
```

---

## Session Log

### Session 1 (2025-12-18)
- Created implementation plan
- Split into v0.1.2a/b/c sub-versions
- Completed v0.1.2a implementation:
  - 4 new enums (QualityTier, EquipmentSlot, ItemType, BurdenState)
  - 3 new entities (Item, Equipment, InventoryItem)
  - 2 entity modifications (Character, InteractableObject)
  - 2 new interfaces (IItemRepository, IInventoryRepository)
  - DbContext TPH configuration
  - 2 new repositories (ItemRepository, InventoryRepository)
  - 149 new tests (870 total passing)

---

## Next Steps: v0.1.2b

When ready to continue, implement:
1. `Core/Interfaces/IInventoryService.cs`
2. `Engine/Services/InventoryService.cs` with burden calculation
3. Update `StatCalculationService.cs` for equipment bonuses
4. Add inventory commands to CommandParser
5. ~60 additional tests
