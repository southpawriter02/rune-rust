# v0.9.2c Design Specification: UI & Interaction Sounds

**Version:** 0.9.2c
**Parent:** v0.9.2 (Sound Effects)
**Prerequisites:** v0.9.2b Complete (Combat & Ability Sounds)
**Status:** Design Complete
**Estimated Unit Tests:** ~6

---

## 1. Overview

### Purpose

Implement event handlers that trigger UI and interaction sound effects. UI sounds include button clicks, hovers, menu open/close, notifications, and errors. Interaction sounds include item pickup, drop, equip, use, gold collection, puzzle feedback, movement footsteps, door opening, and chest opening.

### Key Deliverables

| Category | Items |
|----------|-------|
| **Event Handlers** | `UISoundHandler`, `InteractionSoundHandler` |
| **Sound Mappings** | ~18 UI/interaction effects |
| **Tests** | ~6 unit tests |

---

## 2. Feature Overview

```
v0.9.2c Features
â”œâ”€â”€ UISoundHandler
â”‚   â”œâ”€â”€ ButtonClickEvent â†’ button-click
â”‚   â”œâ”€â”€ ButtonHoverEvent â†’ button-hover
â”‚   â”œâ”€â”€ MenuOpenEvent â†’ menu-open
â”‚   â”œâ”€â”€ MenuCloseEvent â†’ menu-close
â”‚   â”œâ”€â”€ NotificationEvent â†’ notification
â”‚   â”œâ”€â”€ ErrorEvent â†’ error
â”‚   â”œâ”€â”€ TabChangedEvent â†’ button-click
â”‚   â””â”€â”€ DialogOpenEvent â†’ menu-open
â”‚
â”œâ”€â”€ InteractionSoundHandler
â”‚   â”œâ”€â”€ ItemPickupEvent â†’ item-pickup
â”‚   â”œâ”€â”€ ItemDropEvent â†’ item-drop
â”‚   â”œâ”€â”€ ItemEquipEvent â†’ item-equip
â”‚   â”œâ”€â”€ ItemUseEvent â†’ item-use
â”‚   â”œâ”€â”€ GoldCollectedEvent â†’ gold-coins
â”‚   â”œâ”€â”€ PuzzleCorrectEvent â†’ puzzle-correct
â”‚   â”œâ”€â”€ PuzzleIncorrectEvent â†’ puzzle-incorrect
â”‚   â”œâ”€â”€ PuzzleCompleteEvent â†’ puzzle-complete
â”‚   â”œâ”€â”€ HintRequestedEvent â†’ puzzle-hint
â”‚   â”œâ”€â”€ LeverPulledEvent â†’ lever-pull
â”‚   â”œâ”€â”€ PlayerMovedEvent â†’ footstep-{terrain}
â”‚   â”œâ”€â”€ DoorOpenEvent â†’ door-open
â”‚   â”œâ”€â”€ DoorCloseEvent â†’ door-close
â”‚   â””â”€â”€ ChestOpenEvent â†’ chest-open
â”‚
â””â”€â”€ Event-to-Sound Mapping
    â”œâ”€â”€ EventBus subscription
    â”œâ”€â”€ ISoundEffectService.Play()
    â””â”€â”€ Terrain-aware footsteps
```

---

## 3. Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       UI EVENTS                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ButtonClickEvent â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚  ButtonHoverEvent â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–¶  UISoundHandler                         â”‚
â”‚  MenuOpenEvent â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€ Maps events to effect IDs          â”‚
â”‚  MenuCloseEvent â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â””â”€â”€ Calls ISoundEffectService.Play()   â”‚
â”‚  NotificationEvent â”€â”€â”€â”€â”€â”€â”€â”¤                                             â”‚
â”‚  ErrorEvent â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       INTERACTION EVENTS                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ItemPickupEvent â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚  ItemEquipEvent â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                             â”‚
â”‚  GoldCollectedEvent â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–¶  InteractionSoundHandler                â”‚
â”‚  PuzzleCorrectEvent â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€ Maps events to effect IDs          â”‚
â”‚  PlayerMovedEvent â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€ Terrain-aware footsteps            â”‚
â”‚  DoorOpenEvent â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â””â”€â”€ Calls ISoundEffectService.Play()   â”‚
â”‚  ChestOpenEvent â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ISoundEffectService (v0.9.2a)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Play("button-click")      â†’ ğŸ”Š *click*                                â”‚
â”‚  Play("item-pickup")       â†’ ğŸ”Š *pickup*                               â”‚
â”‚  Play("footstep-stone")    â†’ ğŸ”Š *step* (randomized)                    â”‚
â”‚  Play("puzzle-complete")   â†’ ğŸ”Š *fanfare*                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. UISoundHandler

**File:** `src/Core/RuneAndRust.Application/EventHandlers/UISoundHandler.cs`

```csharp
namespace RuneAndRust.Application.EventHandlers;

/// <summary>
/// Subscribes to UI events and triggers sound effects.
/// </summary>
public class UISoundHandler : IDisposable
{
    private readonly ISoundEffectService _sfx;
    private readonly IEventBus _eventBus;
    private readonly ILogger<UISoundHandler> _logger;
    private readonly List<IDisposable> _subscriptions = new();

    public UISoundHandler(ISoundEffectService sfx, IEventBus eventBus,
        ILogger<UISoundHandler> logger)
    {
        _sfx = sfx;
        _eventBus = eventBus;
        _logger = logger;
        RegisterSubscriptions();
    }

    private void RegisterSubscriptions()
    {
        _subscriptions.Add(_eventBus.Subscribe<ButtonClickEvent>(OnButtonClick));
        _subscriptions.Add(_eventBus.Subscribe<ButtonHoverEvent>(OnButtonHover));
        _subscriptions.Add(_eventBus.Subscribe<MenuOpenEvent>(OnMenuOpen));
        _subscriptions.Add(_eventBus.Subscribe<MenuCloseEvent>(OnMenuClose));
        _subscriptions.Add(_eventBus.Subscribe<NotificationEvent>(OnNotification));
        _subscriptions.Add(_eventBus.Subscribe<ErrorEvent>(OnError));
        _subscriptions.Add(_eventBus.Subscribe<TabChangedEvent>(OnTabChanged));
        _subscriptions.Add(_eventBus.Subscribe<DialogOpenEvent>(OnDialogOpen));
        _subscriptions.Add(_eventBus.Subscribe<DialogCloseEvent>(OnDialogClose));

        _logger.LogDebug("UISoundHandler registered {Count} subscriptions", _subscriptions.Count);
    }

    private void OnButtonClick(ButtonClickEvent e)
    {
        _sfx.Play("button-click");
        _logger.LogDebug("UI sound: button click");
    }

    private void OnButtonHover(ButtonHoverEvent e)
    {
        // Only play hover sound if enabled (can be noisy)
        if (e.PlaySound)
        {
            _sfx.Play("button-hover", volume: 0.5f);
            _logger.LogDebug("UI sound: button hover");
        }
    }

    private void OnMenuOpen(MenuOpenEvent e)
    {
        _sfx.Play("menu-open");
        _logger.LogDebug("UI sound: menu open ({MenuType})", e.MenuType);
    }

    private void OnMenuClose(MenuCloseEvent e)
    {
        _sfx.Play("menu-close");
        _logger.LogDebug("UI sound: menu close");
    }

    private void OnNotification(NotificationEvent e)
    {
        _sfx.Play("notification");
        _logger.LogDebug("UI sound: notification");
    }

    private void OnError(ErrorEvent e)
    {
        _sfx.Play("error");
        _logger.LogDebug("UI sound: error");
    }

    private void OnTabChanged(TabChangedEvent e)
    {
        _sfx.Play("button-click", volume: 0.7f);
        _logger.LogDebug("UI sound: tab changed");
    }

    private void OnDialogOpen(DialogOpenEvent e)
    {
        _sfx.Play("menu-open", volume: 0.8f);
        _logger.LogDebug("UI sound: dialog open");
    }

    private void OnDialogClose(DialogCloseEvent e)
    {
        _sfx.Play("menu-close", volume: 0.8f);
        _logger.LogDebug("UI sound: dialog close");
    }

    public void Dispose()
    {
        foreach (var sub in _subscriptions)
            sub.Dispose();
        _subscriptions.Clear();
    }
}
```

---

## 5. InteractionSoundHandler

**File:** `src/Core/RuneAndRust.Application/EventHandlers/InteractionSoundHandler.cs`

```csharp
namespace RuneAndRust.Application.EventHandlers;

/// <summary>
/// Subscribes to interaction events and triggers sound effects.
/// </summary>
public class InteractionSoundHandler : IDisposable
{
    private readonly ISoundEffectService _sfx;
    private readonly IEventBus _eventBus;
    private readonly ILogger<InteractionSoundHandler> _logger;
    private readonly List<IDisposable> _subscriptions = new();

    public InteractionSoundHandler(ISoundEffectService sfx, IEventBus eventBus,
        ILogger<InteractionSoundHandler> logger)
    {
        _sfx = sfx;
        _eventBus = eventBus;
        _logger = logger;
        RegisterSubscriptions();
    }

    private void RegisterSubscriptions()
    {
        // Item interactions
        _subscriptions.Add(_eventBus.Subscribe<ItemPickupEvent>(OnItemPickup));
        _subscriptions.Add(_eventBus.Subscribe<ItemDropEvent>(OnItemDrop));
        _subscriptions.Add(_eventBus.Subscribe<ItemEquipEvent>(OnItemEquip));
        _subscriptions.Add(_eventBus.Subscribe<ItemUseEvent>(OnItemUse));
        _subscriptions.Add(_eventBus.Subscribe<GoldCollectedEvent>(OnGoldCollected));

        // Puzzle interactions
        _subscriptions.Add(_eventBus.Subscribe<PuzzleCorrectEvent>(OnPuzzleCorrect));
        _subscriptions.Add(_eventBus.Subscribe<PuzzleIncorrectEvent>(OnPuzzleIncorrect));
        _subscriptions.Add(_eventBus.Subscribe<PuzzleCompleteEvent>(OnPuzzleComplete));
        _subscriptions.Add(_eventBus.Subscribe<HintRequestedEvent>(OnHintRequested));
        _subscriptions.Add(_eventBus.Subscribe<LeverPulledEvent>(OnLeverPulled));

        // Movement interactions
        _subscriptions.Add(_eventBus.Subscribe<PlayerMovedEvent>(OnPlayerMoved));
        _subscriptions.Add(_eventBus.Subscribe<DoorOpenEvent>(OnDoorOpen));
        _subscriptions.Add(_eventBus.Subscribe<DoorCloseEvent>(OnDoorClose));
        _subscriptions.Add(_eventBus.Subscribe<ChestOpenEvent>(OnChestOpen));

        _logger.LogDebug("InteractionSoundHandler registered {Count} subscriptions", _subscriptions.Count);
    }

    // Item sounds
    private void OnItemPickup(ItemPickupEvent e)
    {
        _sfx.Play("item-pickup");
        _logger.LogDebug("Interaction sound: item pickup ({Item})", e.ItemName);
    }

    private void OnItemDrop(ItemDropEvent e)
    {
        _sfx.Play("item-drop");
        _logger.LogDebug("Interaction sound: item drop");
    }

    private void OnItemEquip(ItemEquipEvent e)
    {
        _sfx.Play("item-equip");
        _logger.LogDebug("Interaction sound: item equip ({Slot})", e.Slot);
    }

    private void OnItemUse(ItemUseEvent e)
    {
        _sfx.Play("item-use");
        _logger.LogDebug("Interaction sound: item use ({Item})", e.ItemName);
    }

    private void OnGoldCollected(GoldCollectedEvent e)
    {
        _sfx.Play("gold-coins");
        _logger.LogDebug("Interaction sound: gold collected ({Amount})", e.Amount);
    }

    // Puzzle sounds
    private void OnPuzzleCorrect(PuzzleCorrectEvent e)
    {
        _sfx.Play("puzzle-correct");
        _logger.LogDebug("Interaction sound: puzzle correct");
    }

    private void OnPuzzleIncorrect(PuzzleIncorrectEvent e)
    {
        _sfx.Play("puzzle-incorrect");
        _logger.LogDebug("Interaction sound: puzzle incorrect");
    }

    private void OnPuzzleComplete(PuzzleCompleteEvent e)
    {
        _sfx.Play("puzzle-complete");
        _logger.LogDebug("Interaction sound: puzzle complete!");
    }

    private void OnHintRequested(HintRequestedEvent e)
    {
        _sfx.Play("puzzle-hint");
        _logger.LogDebug("Interaction sound: hint requested");
    }

    private void OnLeverPulled(LeverPulledEvent e)
    {
        _sfx.Play("lever-pull");
        _logger.LogDebug("Interaction sound: lever pulled");
    }

    // Movement sounds
    private void OnPlayerMoved(PlayerMovedEvent e)
    {
        var effectId = MapTerrainToFootstep(e.TerrainType);
        _sfx.Play(effectId, volume: 0.5f);
        _logger.LogDebug("Interaction sound: footstep ({Terrain})", e.TerrainType);
    }

    private string MapTerrainToFootstep(string? terrain) => terrain?.ToLowerInvariant() switch
    {
        "stone" or "dungeon" or "cave" => "footstep-stone",
        "wood" or "floor" or "tavern" => "footstep-wood",
        "grass" or "forest" or "nature" => "footstep-grass",
        "water" or "shallow" or "marsh" => "footstep-water",
        "metal" or "grate" => "footstep-metal",
        "sand" or "desert" => "footstep-sand",
        _ => "footstep-stone" // Default fallback
    };

    private void OnDoorOpen(DoorOpenEvent e)
    {
        _sfx.Play("door-open");
        _logger.LogDebug("Interaction sound: door open");
    }

    private void OnDoorClose(DoorCloseEvent e)
    {
        _sfx.Play("door-close");
        _logger.LogDebug("Interaction sound: door close");
    }

    private void OnChestOpen(ChestOpenEvent e)
    {
        _sfx.Play("chest-open");
        _logger.LogDebug("Interaction sound: chest open");
    }

    public void Dispose()
    {
        foreach (var sub in _subscriptions)
            sub.Dispose();
        _subscriptions.Clear();
    }
}
```

---

## 6. Sound Effect Mappings

### UI Sounds

| Event | Effect ID | Description |
|-------|-----------|-------------|
| `ButtonClickEvent` | `button-click` | Button pressed |
| `ButtonHoverEvent` | `button-hover` | Mouse over button |
| `MenuOpenEvent` | `menu-open` | Menu/window opened |
| `MenuCloseEvent` | `menu-close` | Menu/window closed |
| `NotificationEvent` | `notification` | Alert notification |
| `ErrorEvent` | `error` | Error feedback |
| `TabChangedEvent` | `button-click` | Tab switched |
| `DialogOpenEvent` | `menu-open` | Dialog opened |
| `DialogCloseEvent` | `menu-close` | Dialog closed |

### Item Sounds

| Event | Effect ID | Description |
|-------|-----------|-------------|
| `ItemPickupEvent` | `item-pickup` | Item collected |
| `ItemDropEvent` | `item-drop` | Item dropped |
| `ItemEquipEvent` | `item-equip` | Item equipped |
| `ItemUseEvent` | `item-use` | Item consumed |
| `GoldCollectedEvent` | `gold-coins` | Coins collected |

### Puzzle Sounds

| Event | Effect ID | Description |
|-------|-----------|-------------|
| `PuzzleCorrectEvent` | `puzzle-correct` | Correct action |
| `PuzzleIncorrectEvent` | `puzzle-incorrect` | Wrong action |
| `PuzzleCompleteEvent` | `puzzle-complete` | Puzzle solved |
| `HintRequestedEvent` | `puzzle-hint` | Hint revealed |
| `LeverPulledEvent` | `lever-pull` | Lever activated |

### Movement Sounds

| Event | Effect ID | Description |
|-------|-----------|-------------|
| `PlayerMovedEvent` (stone) | `footstep-stone` | Stone footsteps |
| `PlayerMovedEvent` (wood) | `footstep-wood` | Wood footsteps |
| `PlayerMovedEvent` (grass) | `footstep-grass` | Grass footsteps |
| `PlayerMovedEvent` (water) | `footstep-water` | Water footsteps |
| `DoorOpenEvent` | `door-open` | Door opened |
| `DoorCloseEvent` | `door-close` | Door closed |
| `ChestOpenEvent` | `chest-open` | Chest opened |

---

## 7. Extended Configuration

**Additional entries for `config/sound-effects.json`:**

```json
{
  "categories": {
    "items": {
      "effects": {
        "item-drop": {
          "files": ["audio/sfx/items/drop.ogg"],
          "volume": 0.6,
          "randomize": false
        },
        "item-use": {
          "files": ["audio/sfx/items/use_potion.ogg"],
          "volume": 0.7,
          "randomize": false
        }
      }
    },
    "puzzle": {
      "effects": {
        "puzzle-hint": {
          "files": ["audio/sfx/puzzle/hint.ogg"],
          "volume": 0.6,
          "randomize": false
        },
        "lever-pull": {
          "files": ["audio/sfx/puzzle/lever.ogg"],
          "volume": 0.7,
          "randomize": false
        }
      }
    },
    "movement": {
      "effects": {
        "footstep-grass": {
          "files": [
            "audio/sfx/movement/step_grass_01.ogg",
            "audio/sfx/movement/step_grass_02.ogg"
          ],
          "volume": 0.3,
          "randomize": true
        },
        "footstep-water": {
          "files": [
            "audio/sfx/movement/step_water_01.ogg",
            "audio/sfx/movement/step_water_02.ogg"
          ],
          "volume": 0.5,
          "randomize": true
        },
        "footstep-metal": {
          "files": ["audio/sfx/movement/step_metal_01.ogg"],
          "volume": 0.5,
          "randomize": false
        },
        "footstep-sand": {
          "files": ["audio/sfx/movement/step_sand_01.ogg"],
          "volume": 0.3,
          "randomize": false
        },
        "door-close": {
          "files": ["audio/sfx/movement/door_close.ogg"],
          "volume": 0.5,
          "randomize": false
        }
      }
    }
  }
}
```

---

## 8. Terrain-Based Footstep Flow

```
FOOTSTEP SOUND SELECTION:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  PlayerMovedEvent
        â”‚
        â”‚ terrain = ?
        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Terrain Mapping                                                 â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  stone, dungeon, cave    â”€â”€â–¶  footstep-stone  â”€â”€â–¶  ğŸ”Š *tap tap* â”‚
  â”‚  wood, floor, tavern     â”€â”€â–¶  footstep-wood   â”€â”€â–¶  ğŸ”Š *clunk*   â”‚
  â”‚  grass, forest, nature   â”€â”€â–¶  footstep-grass  â”€â”€â–¶  ğŸ”Š *rustle*  â”‚
  â”‚  water, shallow, marsh   â”€â”€â–¶  footstep-water  â”€â”€â–¶  ğŸ”Š *splash*  â”‚
  â”‚  metal, grate            â”€â”€â–¶  footstep-metal  â”€â”€â–¶  ğŸ”Š *clang*   â”‚
  â”‚  sand, desert            â”€â”€â–¶  footstep-sand   â”€â”€â–¶  ğŸ”Š *soft*    â”‚
  â”‚  (default)               â”€â”€â–¶  footstep-stone  â”€â”€â–¶  ğŸ”Š *tap tap* â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. Unit Testing Requirements (~6 tests)

| Feature | Tests |
|---------|-------|
| ButtonClickEvent triggers button-click | 1 |
| ItemPickupEvent triggers item-pickup | 1 |
| PuzzleCompleteEvent triggers puzzle-complete | 1 |
| PlayerMovedEvent maps terrain to footstep | 1 |
| Unknown terrain falls back to stone | 1 |
| Dispose unsubscribes all events | 1 |

---

## 10. Acceptance Criteria

- [ ] UISoundHandler subscribes to UI events
- [ ] Button click plays button-click sound
- [ ] Button hover plays button-hover (optional)
- [ ] Menu open plays menu-open sound
- [ ] Menu close plays menu-close sound
- [ ] Notification plays notification sound
- [ ] Error plays error sound
- [ ] InteractionSoundHandler subscribes to interaction events
- [ ] Item pickup plays item-pickup sound
- [ ] Item equip plays item-equip sound
- [ ] Item use plays item-use sound
- [ ] Gold collected plays gold-coins sound
- [ ] Puzzle correct plays puzzle-correct sound
- [ ] Puzzle complete plays puzzle-complete fanfare
- [ ] Lever pulled plays lever-pull sound
- [ ] Player moved plays terrain-appropriate footstep
- [ ] Stone terrain plays footstep-stone
- [ ] Wood terrain plays footstep-wood
- [ ] Door open plays door-open sound
- [ ] Chest open plays chest-open sound
- [ ] Handlers dispose subscriptions properly
- [ ] ~6 unit tests pass

---

## 11. Dependencies

| From | Required |
|------|----------|
| v0.9.2a | `ISoundEffectService` |
| Application | `IEventBus`, UI/interaction events |
| Domain | Player, item, puzzle, movement events |

---

## 12. Summary

v0.9.2c completes the Sound Effects series by adding:
- **UI sound handlers** for buttons, menus, notifications
- **Item interaction sounds** for pickup, equip, use
- **Puzzle feedback sounds** for correct/incorrect/complete
- **Terrain-aware footsteps** based on room terrain type
- **Environment sounds** for doors, chests, levers

---

*Document Version: 1.0 | Last Updated: 2026-01-10*
