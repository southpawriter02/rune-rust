## v0.0.11 - Descriptors & Ambience

**Focus:** Environmental storytelling, descriptor variety, sensory layers, and atmospheric immersion

**Prerequisites:** v0.0.10 Complete (Documentation & Polish)

### Related Documents

#### Scope & Design
- [v0.0.11 Scope Breakdown](v0.0.11-scope-breakdown.md)
- [v0.0.11a Design Specification](v0.0.11a-design-specification.md) - Descriptor Framework Expansion
- [v0.0.11b Design Specification](v0.0.11b-design-specification.md) - Combat & Ability Descriptors
- [v0.0.11c Design Specification](v0.0.11c-design-specification.md) - Environmental & Sensory Descriptors
- [v0.0.11d Design Specification](v0.0.11d-design-specification.md) - Interactive Objects & Polish

#### Implementation Plans
- [v0.0.11a Implementation Plan](v0.0.11a-implementation-plan.md) - Descriptor Framework Expansion
- [v0.0.11b Implementation Plan](v0.0.11b-implementation-plan.md) - Combat & Ability Descriptors
- [v0.0.11c Implementation Plan](v0.0.11c-implementation-plan.md) - Environmental & Sensory Descriptors
- [v0.0.11d Implementation Plan](v0.0.11d-implementation-plan.md) - Interactive Objects & Polish

### Sub-Phases

| Phase | Name | Focus | Est. Tests |
|-------|------|-------|------------|
| v0.0.11a | Descriptor Framework Expansion | Environment categories, coherence validation, biome system | ~18 |
| v0.0.11b | Combat & Ability Descriptors | Weapon-type hits, damage tiers, death descriptions, ability effects | ~15 |
| v0.0.11c | Environmental & Sensory Descriptors | Lighting, sounds, smells, temperature, weather, time-of-day | ~18 |
| v0.0.11d | Interactive Objects & Polish | Object descriptions, ambient events, caching, integration | ~14 |

### Features

#### Descriptor Framework Expansion (v0.0.11a) - COMPLETE
- [x] **Environment Categories** - Biome, Climate, Era, Condition, Lighting categories
- [x] **Category Values** - Configurable values within each category (cave, freezing, ancient, etc.)
- [x] **Exclusion Rules** - Prevent incoherent combinations (frozen + volcanic, flooded + burning)
- [x] **Biome Definitions** - Cave, Dungeon, Forest, Volcanic, Frozen, Swamp, Desert, Ruins
- [x] **EnvironmentContext** - Room-level environment state tracking
- [x] **Coherence Validation** - Service to validate and reject conflicting environments
- [x] **Biome-Aware Selection** - Descriptor pools filtered by biome context

#### Combat & Ability Descriptors (v0.0.11b) - COMPLETE
- [x] **Weapon-Type Hits** - Sword, axe, bow, staff, dagger, fist, mace, spear descriptor pools
- [x] **Damage Tiers** - 6 tiers (Glancing, Light, Solid, Heavy, Devastating, Lethal)
- [x] **Critical Hits** - Distinct critical hit description pool
- [x] **Miss Descriptions** - Varied miss/dodge/parry descriptions
- [x] **Death Descriptions** - Monster deaths by category (humanoid, undead, beast, construct, elemental, demon)
- [x] **Ability Activation** - Visual and audio effect descriptions for abilities
- [x] **Ability Impact** - On-hit and AoE effect descriptions
- [x] **Status Effect Descriptions** - Application and removal flavor text

#### Environmental & Sensory Descriptors (v0.0.11c) - COMPLETE
- [x] **Light Sources** - Torch, crystal, bioluminescence, magical, sunlight, moonlight, lava
- [x] **Darkness Levels** - Pitch black, dim, normal, bright, blinding
- [x] **Layered Sounds** - Distant, nearby, immediate sound layers
- [x] **Biome Sounds** - Cave, dungeon, forest, volcanic, swamp sound pools
- [x] **Smell Intensity** - Faint, noticeable, strong, overwhelming levels
- [x] **Biome Smells** - Cave, dungeon, volcanic, frozen, swamp, forest, ruins pools
- [x] **Temperature** - Climate-integrated temperature descriptors
- [x] **Weather Conditions** - Rain, storm, snow, fog, wind (indoor/outdoor variants)
- [x] **Time of Day** - Dawn, day, dusk, night effects for outdoor areas
- [x] **SensoryDescription** - Combined multi-sense output value object

#### Interactive Objects & Polish (v0.0.11d) - COMPLETE
- [x] **Object Types** - Door, chest, lever, statue, altar, light source, inscription, water feature
- [x] **Object States** - Closed, open, locked, broken, active, inactive, etc.
- [x] **Examination Depth** - Glance, look, examine progressive detail levels
- [x] **State Descriptions** - Descriptors that change based on object state
- [x] **Interaction Hints** - Context-sensitive hints for interactable objects
- [x] **Ambient Events** - Sound, visual, creature, environmental random occurrences
- [x] **Event Triggers** - Exploration, periodic, combat, room entry triggers
- [x] **Event Cooldown** - Prevent event spam with configurable cooldown
- [x] **Descriptor Caching** - Memory cache with sliding expiration for performance
- [x] **Full Integration** - All v0.0.11 systems working together coherently

### Environment Categories

| Category | Values | Exclusions |
|----------|--------|------------|
| **Biome** | Cave, Dungeon, Forest, Volcanic, Frozen, Swamp, Desert, Ruins | Single value per room |
| **Climate** | Freezing, Cold, Temperate, Warm, Hot, Scorching | Freezing ↔ Hot/Scorching |
| **Era** | Ancient, Medieval, Decayed, Pristine | Ancient ↔ Pristine |
| **Condition** | Flooded, Burning, Collapsed, Overgrown, Infested | Flooded ↔ Burning |
| **Lighting** | Pitch Black, Dim, Normal, Bright, Blinding | Pitch Black ↔ Bright/Blinding |

### Damage Tier System

| Tier | Damage % | Description Pattern |
|------|----------|---------------------|
| Glancing | 0-15% | "barely scratches", "grazes", "deflects off" |
| Light | 15-30% | "finds purchase", "connects", "lands a blow" |
| Solid | 30-50% | "strikes true", "lands solidly", "connects with force" |
| Heavy | 50-75% | "crashes into", "smashes against", "strikes hard" |
| Devastating | 75-90% | "devastates", "shatters", "tears through" |
| Lethal | 90-100% | "cleaves through", "destroys", "ends" |

### Sensory Layers

| Sense | Components | Integration |
|-------|------------|-------------|
| **Sight** | Light source type, darkness level, time of day | Visual scene setting |
| **Sound** | Distant, nearby, immediate layers | Depth and atmosphere |
| **Smell** | Biome-specific, intensity levels | Environmental flavor |
| **Touch** | Temperature, climate integration | Physical sensation |
| **Weather** | Indoor/outdoor variants | Dynamic conditions |

### Interactive Object Types

| Type | Valid States | Examination Levels |
|------|--------------|-------------------|
| Door | Closed, Open, Locked, Barred, Broken | Material, age, markings |
| Chest | Closed, Open, Locked, Trapped, Empty | Size, craftsmanship, wear |
| Lever | Up, Down, Stuck, Broken | Mechanism, rust level |
| Statue | Normal, Damaged, Defaced, Active | Subject, craftsmanship, inscriptions |
| Altar | Active, Inactive, Desecrated, Blessed | Deity, offerings, condition |

### Ambient Event Types

| Type | Trigger Contexts | Examples |
|------|------------------|----------|
| Sound | Exploration, periodic | Distant scream, chains rattling, footsteps |
| Visual | Exploration, periodic | Shadow movement, light flicker, dust fall |
| Creature | Exploration, room entry | Rats scatter, bat flutter, eyes in darkness |
| Environmental | Biome-specific | Ice crack, steam vent, cold draft |

### Descriptor Pool Growth

| Metric | Before v0.0.11 | After v0.0.11 |
|--------|----------------|---------------|
| Descriptor pools | ~10 | ~60+ |
| Descriptor entries | ~100 | ~500+ |
| Environment categories | 0 | 5 |
| Biome definitions | 0 | 8+ |
| Coherence rules | 0 | ~10 |
| Sensory layers | 1 | 5 |
| Interactive object types | 0 | 8 |
| Ambient event types | 0 | 4 |
| Unit tests (descriptor) | ~5 | ~65 |

### Configuration Files

#### New Configuration Files
| File | Phase | Purpose |
|------|-------|---------|
| `config/environment-categories.json` | v0.0.11a | Category and exclusion rule definitions |
| `config/biomes.json` | v0.0.11a | Biome definitions with default pools |
| `config/descriptors/combat-hits.json` | v0.0.11b | Weapon-type hit descriptor pools |
| `config/descriptors/combat-deaths.json` | v0.0.11b | Death descriptor pools by creature type |
| `config/descriptors/damage-tiers.json` | v0.0.11b | Damage tier definitions |
| `config/descriptors/lighting.json` | v0.0.11c | Light source and darkness level pools |
| `config/descriptors/sounds.json` | v0.0.11c | Layered sound pools by biome |
| `config/descriptors/smells.json` | v0.0.11c | Smell pools by biome |
| `config/descriptors/weather.json` | v0.0.11c | Weather condition pools |
| `config/descriptors/objects.json` | v0.0.11d | Interactive object descriptor pools |
| `config/descriptors/ambient-events.json` | v0.0.11d | Ambient event pools by type and biome |

### Files Created/Modified

#### New Domain Files
- `src/Core/RuneAndRust.Domain/ValueObjects/EnvironmentContext.cs`
- `src/Core/RuneAndRust.Domain/ValueObjects/SensoryDescription.cs`
- `src/Core/RuneAndRust.Domain/ValueObjects/InteractiveObjectDescriptor.cs`
- `src/Core/RuneAndRust.Domain/ValueObjects/AmbientEvent.cs`
- `src/Core/RuneAndRust.Domain/Enums/InteractiveObjectType.cs`
- `src/Core/RuneAndRust.Domain/Enums/ObjectState.cs`
- `src/Core/RuneAndRust.Domain/Enums/ExaminationDepth.cs`
- `src/Core/RuneAndRust.Domain/Enums/AmbientEventType.cs`
- `src/Core/RuneAndRust.Domain/Enums/AmbientEventTrigger.cs`
- `src/Core/RuneAndRust.Domain/Enums/SmellIntensity.cs`
- `src/Core/RuneAndRust.Domain/Enums/DamageTier.cs`

#### New Application Files
- `src/Core/RuneAndRust.Application/Configuration/EnvironmentCategoryConfiguration.cs`
- `src/Core/RuneAndRust.Application/Configuration/BiomeConfiguration.cs`
- `src/Core/RuneAndRust.Application/Configuration/SensoryConfiguration.cs`
- `src/Core/RuneAndRust.Application/Configuration/ObjectDescriptorConfiguration.cs`
- `src/Core/RuneAndRust.Application/Configuration/AmbientEventConfiguration.cs`
- `src/Core/RuneAndRust.Application/Services/EnvironmentCoherenceService.cs`
- `src/Core/RuneAndRust.Application/Services/CombatDescriptorService.cs`
- `src/Core/RuneAndRust.Application/Services/AbilityDescriptorService.cs`
- `src/Core/RuneAndRust.Application/Services/SensoryDescriptorService.cs`
- `src/Core/RuneAndRust.Application/Services/ObjectDescriptorService.cs`
- `src/Core/RuneAndRust.Application/Services/AmbientEventService.cs`
- `src/Core/RuneAndRust.Application/Services/CachedDescriptorService.cs`

#### Modified Files
- `src/Core/RuneAndRust.Domain/Entities/Room.cs` - Add EnvironmentContext, InteractiveObjects
- `src/Core/RuneAndRust.Application/Services/DescriptorService.cs` - Environment context support
- `src/Core/RuneAndRust.Application/Services/GameSessionService.cs` - Integration
- `src/Presentation/RuneAndRust.Presentation.Tui/Views/GameView.cs` - Enhanced rendering
- `src/Infrastructure/RuneAndRust.Infrastructure/DependencyInjection.cs` - Register services

#### New Test Files
- `tests/RuneAndRust.Application.UnitTests/Services/EnvironmentCoherenceServiceTests.cs`
- `tests/RuneAndRust.Application.UnitTests/Services/CombatDescriptorServiceTests.cs`
- `tests/RuneAndRust.Application.UnitTests/Services/SensoryDescriptorServiceTests.cs`
- `tests/RuneAndRust.Application.UnitTests/Services/ObjectDescriptorServiceTests.cs`
- `tests/RuneAndRust.Application.UnitTests/Services/AmbientEventServiceTests.cs`
- `tests/RuneAndRust.Application.UnitTests/Services/CachedDescriptorServiceTests.cs`
- `tests/RuneAndRust.Domain.UnitTests/ValueObjects/EnvironmentContextTests.cs`
- `tests/RuneAndRust.Domain.UnitTests/ValueObjects/SensoryDescriptionTests.cs`

### Dependencies

```
v0.0.10 (Documentation & Polish) - REQUIRED
    │
    └── DescriptorService, themes, logging ──────────────────────┐
                                                                  │
                                                                  ▼
v0.0.11 (Descriptors & Ambience)
    │
    ├── v0.0.11a: Descriptor Framework Expansion ─────────────────┐
    │       Dependencies: None (can start immediately)            │
    │                                                             │
    ├── v0.0.11b: Combat & Ability Descriptors ───────────────────┤
    │       Dependencies: v0.0.11a (environment context)          │
    │                     v0.0.9 (damage types)                   │
    │                     v0.0.6 (status effects)                 │
    │                                                             │
    ├── v0.0.11c: Environmental & Sensory Descriptors ────────────┤
    │       Dependencies: v0.0.11a (environment context, biomes)  │
    │                                                             │
    └── v0.0.11d: Interactive Objects & Polish ───────────────────┘
            Dependencies: v0.0.11a, v0.0.11b, v0.0.11c
```

### Notes

- **Parallelization**: v0.0.11b and v0.0.11c can be developed in parallel after v0.0.11a completes
- **Environment Coherence**: The exclusion rule system prevents incoherent descriptions (no ice + lava rooms)
- **Data-Driven**: All descriptor pools, categories, and biomes are JSON-configurable
- **Performance**: Caching layer in v0.0.11d optimizes descriptor retrieval
- **Progressive Detail**: Object examination reveals more information at deeper examination levels
- **Immersion Focus**: Multi-sensory descriptions engage sight, sound, smell, and touch
