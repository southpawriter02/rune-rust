# v0.14.9d Design Specification: Psychological Descriptor Schema

**Version:** 0.14.9d
**Parent:** v0.14.9 (Advanced Descriptor Configuration Schemas)
**Prerequisites:** v0.14.8 Complete (Dice Configuration Schemas)
**Status:** Design Complete

---

## Table of Contents

1. [Executive Summary](#1-executive-summary)
2. [Feature Overview](#2-feature-overview)
3. [Architecture Diagrams](#3-architecture-diagrams)
4. [Schema Root Definition](#4-schema-root-definition)
   - 4.1 [Root Configuration Properties](#41-root-configuration-properties)
   - 4.2 [Category Types](#42-category-types)
   - 4.3 [Pool Structure](#43-pool-structure)
5. [StressDescriptor Definition](#5-stressdescriptor-definition)
   - 5.1 [Core Properties](#51-core-properties)
   - 5.2 [Stress Thresholds](#52-stress-thresholds)
   - 5.3 [Manifestation Types](#53-manifestation-types)
   - 5.4 [Intensity Levels](#54-intensity-levels)
6. [TraumaDescriptor Definition](#6-traumadescriptor-definition)
   - 6.1 [Trauma Properties](#61-trauma-properties)
   - 6.2 [Trauma Types](#62-trauma-types)
   - 6.3 [Trauma Intensity Levels](#63-trauma-intensity-levels)
   - 6.4 [Trigger Contexts](#64-trigger-contexts)
7. [CorruptionDescriptor Definition](#7-corruptiondescriptor-definition)
   - 7.1 [Corruption Properties](#71-corruption-properties)
   - 7.2 [Corruption Thresholds](#72-corruption-thresholds)
   - 7.3 [Corruption Manifestation Types](#73-corruption-manifestation-types)
8. [BiomePressureDescriptor Definition](#8-biomepressuredescriptor-definition)
   - 8.1 [Biome Pressure Properties](#81-biome-pressure-properties)
   - 8.2 [Biome Types](#82-biome-types)
   - 8.3 [Pressure Types by Biome](#83-pressure-types-by-biome)
9. [RecoveryDescriptor Definition](#9-recoverydescriptor-definition)
   - 9.1 [Recovery Properties](#91-recovery-properties)
   - 9.2 [Recovery Types](#92-recovery-types)
10. [Variable Placeholders Reference](#10-variable-placeholders-reference)
11. [Configuration Schema](#11-configuration-schema)
12. [Logging Specifications](#12-logging-specifications)
13. [Unit Testing Requirements](#13-unit-testing-requirements)
14. [Use Cases](#14-use-cases)
15. [Deliverable Checklist](#15-deliverable-checklist)
16. [Acceptance Criteria](#16-acceptance-criteria)
17. [Dependencies](#17-dependencies)
18. [Future Considerations](#18-future-considerations)
19. [Appendix: Schema Validation Examples](#19-appendix-schema-validation-examples)
20. [Appendix: Source SQL Content Reference](#20-appendix-source-sql-content-reference)

---

## 1. Executive Summary

Version 0.14.9d introduces the **Psychological Descriptor Schema** (`psychological-descriptors.schema.json`), which provides a comprehensive JSON schema for validating psychological state descriptors including stress manifestations, trauma effects, corruption progression, biome-specific environmental pressure, and recovery narratives. This schema enables full customization of character mental state presentation—all without code changes.

The Psychological Descriptor Schema converts the existing SQL schema and content from `docs/design/descriptors/schemas/psychological_descriptor_schema.sql` into JSON format, establishing a standard structure for all psychological narrative content in the game. This system supports the core horror and survival elements of Rune & Rust, where psychological degradation is a key mechanic alongside physical survival.

### Key Deliverables

| Category | Items |
|----------|-------|
| **Schema Files** | `psychological-descriptors.schema.json` |
| **Schema Definitions** | `StressDescriptor`, `TraumaDescriptor`, `CorruptionDescriptor`, `BiomePressureDescriptor`, `RecoveryDescriptor`, `StressThreshold`, `TraumaType`, `CorruptionThreshold`, `Biome`, `RecoveryType`, `Manifestation`, `Intensity` |
| **Configuration Files** | `psychological-descriptors.json` (example content) |
| **Tests** | ~6 new unit tests |

### Architectural Significance

This version provides:
- **Stress descriptors** - 5 threshold levels from Minimal to Broken with Physical/Mental/Behavioral manifestations
- **Trauma descriptors** - 5 clinical trauma types (Flashback, Panic, Dissociation, Hypervigilance, Avoidance)
- **Corruption descriptors** - 6-stage progression from Clean to Forlorn with Physical/Mental/Social/Urgent/Final manifestations
- **Biome pressure descriptors** - 6 biomes with unique psychological pressures (Isolation, Heat, Cold, Darkness, Consumption, Scale)
- **Recovery descriptors** - 6 recovery types for healing psychological damage
- **Intensity levels** - Subtle, Moderate, Oppressive gradations
- **Variable placeholders** - Dynamic content substitution for contextual descriptions

### Relationship to Other Schemas

```
┌─────────────────────────────────────────────────────────────────────────────┐
│               v0.14.9 ADVANCED DESCRIPTOR CONFIGURATION SCHEMAS              │
└─────────────────────────────────────────────────────────────────────────────┘

  ┌─────────────────────────────────────────────────────────────────────────┐
  │  v0.14.9a: dialogue.schema.json (dialogue trees)                        │
  │  v0.14.9b: ability-descriptors.schema.json (Galdr, weapon arts)        │
  │  v0.14.9c: npc-descriptors.schema.json (NPC flavor)                    │
  │  v0.14.9d: psychological-descriptors.schema.json ◀── THIS VERSION      │
  │  v0.14.9e: capture-templates.schema.json (lore fragments)              │
  └─────────────────────────────────────────────────────────────────────────┘

  Source Material (SQL format):
  └── docs/design/descriptors/schemas/psychological_descriptor_schema.sql

  Related Systems:
  • Stress tracking system (stress accumulation)
  • Trauma system (trauma triggers and effects)
  • Corruption system (blight corruption progression)
  • Biome system (environmental psychological pressure)
  • Recovery system (healing and grounding)
  • Forlorn transformation (final corruption stage)
```

---

## 2. Feature Overview

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                PSYCHOLOGICAL DESCRIPTOR SCHEMA FEATURE TREE                  │
└─────────────────────────────────────────────────────────────────────────────┘

psychological-descriptors.schema.json
├── Root Configuration
│   ├── $schema reference
│   ├── version identifier
│   ├── category classification
│   └── pools (descriptor collections)
│
├── Stress Descriptors
│   ├── Threshold Levels
│   │   ├── Minimal (0-25)
│   │   ├── Mounting (26-50)
│   │   ├── Critical (51-75)
│   │   ├── Breaking (76-99)
│   │   └── Broken (100)
│   │
│   ├── Manifestation Types
│   │   ├── Physical (body symptoms)
│   │   ├── Mental (thought patterns)
│   │   └── Behavioral (actions)
│   │
│   └── Intensity Levels
│       ├── Subtle (barely noticeable)
│       ├── Moderate (clearly present)
│       └── Oppressive (overwhelming)
│
├── Trauma Descriptors
│   ├── Trauma Types
│   │   ├── Flashback (reliving past)
│   │   ├── Panic (overwhelming fear)
│   │   ├── Dissociation (detachment)
│   │   ├── Hypervigilance (constant alertness)
│   │   └── Avoidance (trigger avoidance)
│   │
│   ├── Trauma Intensity
│   │   ├── Mild (controlled)
│   │   ├── Moderate (struggling)
│   │   └── Severe (overwhelming)
│   │
│   └── Trigger Contexts
│       ├── Combat
│       ├── Darkness
│       ├── Fire
│       └── Other situational triggers
│
├── Corruption Descriptors
│   ├── Threshold Levels
│   │   ├── Clean (0-10)
│   │   ├── Touched (11-30)
│   │   ├── Tainted (31-50)
│   │   ├── Corrupted (51-75)
│   │   ├── Lost (76-99)
│   │   └── Forlorn (100)
│   │
│   └── Manifestation Types
│       ├── Physical (body changes)
│       ├── Mental (thought corruption)
│       ├── Social (relationship impact)
│       ├── Urgent (desperate stage)
│       └── Final (complete transformation)
│
├── Biome Pressure Descriptors
│   ├── Biomes
│   │   ├── The_Roots (industrial decay)
│   │   ├── Muspelheim (volcanic realm)
│   │   ├── Niflheim (frozen realm)
│   │   ├── Svartalfheim (dark elf realm)
│   │   ├── Vanaheim (wild growth realm)
│   │   └── Jotunheim (giant realm)
│   │
│   └── Pressure Types
│       ├── Isolation (loneliness)
│       ├── Claustrophobia (confined spaces)
│       ├── Dread (impending doom)
│       ├── Heat (thermal stress)
│       ├── Thirst (dehydration)
│       ├── Fury (heat-induced rage)
│       ├── Cold (freezing)
│       ├── Despair (hopelessness)
│       ├── Stillness (death wish)
│       ├── Darkness (light absence)
│       ├── Paranoia (constant fear)
│       ├── Madness (sanity loss)
│       ├── Consumption (being eaten)
│       ├── Infection (biological invasion)
│       ├── Alienation (nature hostility)
│       ├── Scale (insignificance)
│       ├── Insignificance (smallness)
│       └── Exposure (vulnerability)
│
└── Recovery Descriptors
    ├── Recovery Types
    │   ├── Rest (physical/mental rest)
    │   ├── Social (human connection)
    │   ├── Grounding (present-focus)
    │   ├── Support (understanding ally)
    │   ├── Milestone (survival achievement)
    │   └── Acceptance (trauma integration)
    │
    └── Effects
        ├── Stress reduction
        ├── Trauma processing
        └── Hope restoration
```

---

## 3. Architecture Diagrams

### 3.1 Psychological Descriptor Pool Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                  PSYCHOLOGICAL DESCRIPTOR POOL ARCHITECTURE                  │
└─────────────────────────────────────────────────────────────────────────────┘

                psychological-descriptors.json
            ┌───────────────────────────────────────┐
            │  {                                    │
            │    "$schema": "...",                  │
            │    "version": "1.0.0",                │
            │    "category": "stress",              │
            │    "pools": {                         │
            │      "stress_minimal_physical": [...],│
            │      "stress_mounting_mental": [...], │
            │      "stress_critical_behavioral":[...]│
            │    }                                  │
            │  }                                    │
            └─────────────────┬─────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                          DESCRIPTOR POOL                                     │
│─────────────────────────────────────────────────────────────────────────────│
│  Pool ID: "stress_critical_physical"                                        │
│  Descriptors: [                                                              │
│    {                                                                         │
│      "id": "stress_critical_physical_001",                                  │
│      "text": "Your heart pounds in your ears, drowning out everything else",│
│      "weight": 10,                                                           │
│      "threshold": "Critical",                                               │
│      "manifestation": "Physical",                                           │
│      "intensity": "Oppressive",                                             │
│      "tags": ["Panic", "Heartbeat"]                                         │
│    },                                                                        │
│    { ... more descriptors ... }                                              │
│  ]                                                                           │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 Stress Progression Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        STRESS PROGRESSION FLOW                               │
└─────────────────────────────────────────────────────────────────────────────┘

        Stress Value: 0                                           100
        ├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
              0-25     26-50     51-75     76-99      100
           Minimal   Mounting  Critical  Breaking   Broken
               │         │         │         │         │
               ▼         ▼         ▼         ▼         ▼
        ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐
        │ Subtle  │ │Moderate │ │Oppres-  │ │Oppres-  │ │Oppres-  │
        │ Signs   │ │ Effects │ │sive     │ │sive     │ │sive     │
        └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘
             │           │           │           │           │
             ▼           ▼           ▼           ▼           ▼
    "Grip tightens" "Jaw aches"  "Heart    "Body      "SNAP.
     "Slight         "Seeing      pounds"   trembles"  Control
     headache"       threats"    "Shaking  "Tunnel    is gone"
                                  hands"    vision"

  Manifestation Selection:
  ═══════════════════════
  Physical: Body symptoms (trembling, sweating, pain)
  Mental:   Thought patterns (fragmented, paranoid, overwhelmed)
  Behavioral: Actions (snapping at allies, fight/flight)

  Example Descriptor Selection:
  ─────────────────────────────
  Player stress = 65 → Threshold: Critical
  Select pool: "stress_critical_{manifestation}"
  Roll manifestation: Physical
  Select from: "stress_critical_physical"
  Weighted random → "Your heart pounds in your ears..."
```

### 3.3 Corruption Progression Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                      CORRUPTION PROGRESSION FLOW                             │
└─────────────────────────────────────────────────────────────────────────────┘

        Corruption: 0                                             100
        ├─────┼─────────┼─────────┼─────────────┼───────────┼─────┤
           0-10   11-30     31-50       51-75       76-99     100
          Clean  Touched   Tainted    Corrupted     Lost    Forlorn
            │        │         │           │          │         │
            ▼        ▼         ▼           ▼          ▼         ▼
       (Normal) ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐
                │Physical│ │Physical│ │Physical│ │Physical│ │ FINAL  │
                │Mental  │ │Mental  │ │Mental  │ │Mental  │ │TRANSFORM│
                │        │ │Social  │ │Social  │ │Urgent  │ │        │
                └────────┘ └────────┘ └────────┘ └────────┘ └────────┘
                    │          │          │          │          │
                    ▼          ▼          ▼          ▼          ▼
               "Paleness"  "Veins     "Skin has   "Mirror   "What was
               "Foreign    show       changed"    shows     you is now
               dreams"     darker"    "Hunger"    other"    other"

  Corruption Manifestation Types:
  ═══════════════════════════════
  Physical: Body transforms (veins, skin, eyes)
  Mental:   Mind corrupts (whispers, hunger, identity loss)
  Social:   Relationships suffer (people sense wrongness)
  Urgent:   Desperate stage (seeking help, last chance)
  Final:    Complete transformation (becoming Forlorn)

  Threshold → Manifestation Matrix:
  ────────────────────────────────
  Clean (0-10):      No descriptors (normal state)
  Touched (11-30):   Physical, Mental
  Tainted (31-50):   Physical, Mental, Social
  Corrupted (51-75): Physical, Mental, Social
  Lost (76-99):      Physical, Mental, Urgent
  Forlorn (100):     Final (transformation complete)
```

### 3.4 Trauma Event Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          TRAUMA EVENT FLOW                                   │
└─────────────────────────────────────────────────────────────────────────────┘

              Trigger Event Occurs
                      │
                      ▼
        ┌─────────────────────────────────┐
        │  1. IDENTIFY TRIGGER CONTEXT    │
        │  Combat, Darkness, Fire, etc.   │
        └─────────────┬───────────────────┘
                      │
                      ▼
        ┌─────────────────────────────────┐
        │  2. CHECK ACTIVE TRAUMAS        │
        │  Player has Flashback trauma    │
        │  from previous encounter        │
        └─────────────┬───────────────────┘
                      │
                      ▼
        ┌─────────────────────────────────┐
        │  3. DETERMINE INTENSITY         │
        │  Based on:                      │
        │  • Trauma severity              │
        │  • Context match strength       │
        │  • Current stress level         │
        └─────────────┬───────────────────┘
                      │
                      ▼
        ┌─────────────────────────────────┐
        │  4. SELECT DESCRIPTOR           │
        │  Pool: "trauma_flashback_severe"│
        │  Weighted random selection      │
        └─────────────┬───────────────────┘
                      │
                      ▼
   ┌──────────────────────────────────────────────────────────┐
   │ OUTPUT: "You are there again. Not here. THERE. Where it  │
   │          happened."                                      │
   └──────────────────────────────────────────────────────────┘

  Trauma Types × Intensity:
  ═════════════════════════
  Flashback  + Mild:     "A memory surfaces, unwanted. You push it back down"
  Flashback  + Moderate: "The past bleeds into the present"
  Flashback  + Severe:   "You are there again. THERE."

  Panic      + Mild:     "Your heart skips. A lurch of fear, quickly controlled"
  Panic      + Moderate: "Panic claws at your chest"
  Panic      + Severe:   "You cannot breathe. You cannot think."

  Dissociation + Mild:   "For a moment, you feel distant from your body"
  Dissociation + Moderate: "Watching yourself from outside"
  Dissociation + Severe: "Not sure who you are"
```

### 3.5 Biome Pressure System

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          BIOME PRESSURE SYSTEM                               │
└─────────────────────────────────────────────────────────────────────────────┘

                        Player Enters Biome
                               │
              ┌────────────────┼────────────────┐
              ▼                ▼                ▼
┌──────────────────┐ ┌──────────────────┐ ┌──────────────────┐
│    The_Roots     │ │    Muspelheim    │ │    Niflheim      │
│  ─────────────── │ │  ─────────────── │ │  ─────────────── │
│  Isolation       │ │  Heat            │ │  Cold            │
│  Claustrophobia  │ │  Thirst          │ │  Despair         │
│  Dread           │ │  Fury            │ │  Stillness       │
└────────┬─────────┘ └────────┬─────────┘ └────────┬─────────┘
         │                    │                    │
         ▼                    ▼                    ▼
┌──────────────────┐ ┌──────────────────┐ ┌──────────────────┐
│   Svartalfheim   │ │    Vanaheim      │ │    Jotunheim     │
│  ─────────────── │ │  ─────────────── │ │  ─────────────── │
│  Darkness        │ │  Consumption     │ │  Scale           │
│  Paranoia        │ │  Infection       │ │  Insignificance  │
│  Madness         │ │  Alienation      │ │  Exposure        │
└────────┬─────────┘ └────────┬─────────┘ └────────┬─────────┘
         │                    │                    │
         └────────────┬───────┴───────────────────┘
                      │
                      ▼
        ┌─────────────────────────────────┐
        │  SELECT PRESSURE DESCRIPTOR     │
        │  Pool: "{biome}_{pressure_type}"│
        │  + Apply intensity filter       │
        └─────────────┬───────────────────┘
                      │
                      ▼
   ┌──────────────────────────────────────────────────────────┐
   │ The_Roots + Isolation:                                    │
   │ "How long since you have seen another person? Days? Weeks?"│
   │                                                           │
   │ Muspelheim + Heat:                                        │
   │ "Your thoughts move slowly, boiled sluggish by the heat"  │
   │                                                           │
   │ Niflheim + Despair:                                       │
   │ "What is the point? The cold has already decided"         │
   └──────────────────────────────────────────────────────────┘

  Intensity by Biome Depth/Duration:
  ═══════════════════════════════════
  Subtle:    Initial exposure, surface areas
  Moderate:  Extended exposure, mid-depth
  Oppressive: Deep biome, prolonged exposure
```

### 3.6 Recovery Selection Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        RECOVERY SELECTION FLOW                               │
└─────────────────────────────────────────────────────────────────────────────┘

              Recovery Trigger Event
                      │
        ┌─────────────┴─────────────┐
        │                           │
    Safe Area              Social Event
        │                           │
        ▼                           ▼
┌──────────────────┐      ┌──────────────────┐
│ Check Context:   │      │ Check Context:   │
│ • Resting        │      │ • Ally present   │
│ • Shelter found  │      │ • NPC interaction│
│ • Danger cleared │      │ • Shared moment  │
└────────┬─────────┘      └────────┬─────────┘
         │                         │
         ▼                         ▼
    ┌─────────┐              ┌─────────┐
    │  Rest   │              │ Social  │
    └────┬────┘              └────┬────┘
         │                         │
         └───────────┬─────────────┘
                     │
                     ▼
        ┌─────────────────────────────────┐
        │  OTHER RECOVERY TYPES           │
        │                                 │
        │  Grounding: Mindfulness moments │
        │  Support:   Understanding ally  │
        │  Milestone: Survival achievement│
        │  Acceptance: Trauma integration │
        └─────────────────┬───────────────┘
                          │
                          ▼
   ┌──────────────────────────────────────────────────────────┐
   │ Rest:    "Breathing slows. The shaking stops. You are    │
   │           still here."                                   │
   │                                                          │
   │ Social:  "Another voice. Human. Not threatening. You     │
   │           had forgotten the sound."                      │
   │                                                          │
   │ Grounding: "Count the exits. Name the objects. You are   │
   │             here. You are now. You are safe."            │
   │                                                          │
   │ Support:   "Someone who understands. They have been      │
   │             there too."                                  │
   │                                                          │
   │ Milestone: "You survived. Again. It does not feel like   │
   │             victory, but it is."                         │
   │                                                          │
   │ Acceptance: "The scar is part of you now. It does not    │
   │              have to define you."                        │
   └──────────────────────────────────────────────────────────┘
```

### 3.7 Schema Layer Diagram

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           SCHEMA LAYER DIAGRAM                               │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                              PRESENTATION                                    │
│                                                                              │
│  Game UI displays psychological state                                        │
│  • Stress indicators and flavor text                                         │
│  • Trauma manifestation descriptions                                         │
│  • Corruption progression warnings                                           │
│  • Biome pressure atmosphere text                                            │
│  • Recovery moment narratives                                                │
└─────────────────────────────────────────────────────────────────────────────┘
                                     │
                                     ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                              APPLICATION                                     │
│                                                                              │
│  PsychologicalDescriptorService manages descriptor selection                 │
│  • GetStressDescriptor(threshold, manifestation, intensity)                  │
│  • GetTraumaDescriptor(traumaType, intensity, triggerContext)                │
│  • GetCorruptionDescriptor(threshold, manifestation)                         │
│  • GetBiomePressureDescriptor(biome, pressureType, intensity)                │
│  • GetRecoveryDescriptor(recoveryType)                                       │
│  • SelectByWeight(descriptors) → weighted random selection                   │
│  • SubstituteVariables(text, context) → {Variable} replacement               │
└─────────────────────────────────────────────────────────────────────────────┘
                                     │
                                     ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                             DOMAIN LAYER                                     │
│                                                                              │
│  Psychological state definitions and descriptor collections                  │
│  • StressDescriptor (stress manifestations)                                  │
│  • TraumaDescriptor (trauma effects)                                         │
│  • CorruptionDescriptor (corruption progression)                             │
│  • BiomePressureDescriptor (environmental pressure)                          │
│  • RecoveryDescriptor (healing moments)                                      │
│  • StressThreshold enum (5 thresholds)                                       │
│  • TraumaType enum (5 types)                                                 │
│  • CorruptionThreshold enum (6 thresholds)                                   │
│  • Biome enum (6 biomes)                                                     │
│  • RecoveryType enum (6 types)                                               │
│  • Manifestation enum (Physical, Mental, Behavioral, Social, Urgent, Final)  │
│  • Intensity enum (Subtle, Moderate, Oppressive / Mild, Moderate, Severe)    │
└─────────────────────────────────────────────────────────────────────────────┘
                                     │
                                     ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                           INFRASTRUCTURE                                     │
│                                                                              │
│  PsychologicalDescriptorProvider loads from JSON with schema validation      │
│  • LoadDescriptors(category) → reads psychological-descriptors/*.json        │
│  • Validates against config/schemas/psychological-descriptors.schema.json    │
│  • Builds pool lookup by threshold/type/biome                                │
│  • Caches descriptors for performance                                        │
│  • Logs warnings for missing required fields                                 │
└─────────────────────────────────────────────────────────────────────────────┘
                                     │
                                     ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                            CONFIGURATION                                     │
│                                                                              │
│  config/schemas/psychological-descriptors.schema.json                        │
│  config/psychological-descriptors/stress-descriptors.json                    │
│  config/psychological-descriptors/trauma-descriptors.json                    │
│  config/psychological-descriptors/corruption-descriptors.json                │
│  config/psychological-descriptors/biome-pressure-descriptors.json            │
│  config/psychological-descriptors/recovery-descriptors.json                  │
│                                                                              │
│  Related Systems:                                                            │
│  • Stress tracking (stress accumulation and decay)                           │
│  • Trauma system (trauma triggers and processing)                            │
│  • Corruption system (blight exposure effects)                               │
│  • Biome system (environmental effects)                                      │
│  • Forlorn transformation (NPC corruption)                                   │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 4. Schema Root Definition

### 4.1 Root Configuration Properties

The psychological descriptor schema defines a collection of descriptor pools organized by category.

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| `$schema` | string | No | - | JSON Schema reference |
| `version` | string | **Yes** | - | Schema version (semver format) |
| `category` | string | **Yes** | - | Descriptor category (enum) |
| `pools` | object | **Yes** | - | Map of pool ID to descriptor array |

### 4.2 Category Types

| Category | Description | Descriptor Type |
|----------|-------------|-----------------|
| `stress` | Stress manifestations | StressDescriptor |
| `trauma` | Trauma effects | TraumaDescriptor |
| `corruption` | Corruption progression | CorruptionDescriptor |
| `biome-pressure` | Environmental pressure | BiomePressureDescriptor |
| `recovery` | Recovery moments | RecoveryDescriptor |

### 4.3 Pool Structure

Pools are identified by a composite key pattern:

```
Stress Pool Pattern: stress_{threshold}_{manifestation}
Example: "stress_critical_physical"

Trauma Pool Pattern: trauma_{traumaType}_{intensity}
Example: "trauma_flashback_severe"

Corruption Pool Pattern: corruption_{threshold}_{manifestation}
Example: "corruption_tainted_physical"

Biome Pressure Pool Pattern: {biome}_{pressureType}
Example: "the_roots_isolation"

Recovery Pool Pattern: recovery_{recoveryType}
Example: "recovery_grounding"
```

Each pool contains an array of descriptors with weighted random selection support.

---

## 5. StressDescriptor Definition

### 5.1 Core Properties

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| `id` | string | **Yes** | - | Unique descriptor identifier |
| `text` | string | **Yes** | - | Descriptor text with {Variable} placeholders |
| `weight` | integer | No | 10 | Selection weight (higher = more likely) |
| `threshold` | string | **Yes** | - | Stress threshold (enum) |
| `manifestation` | string | **Yes** | - | Manifestation type (enum) |
| `intensity` | string | No | null | Intensity level (enum) |
| `tags` | array | No | [] | Metadata tags for filtering |

### 5.2 Stress Thresholds

| Threshold | Range | Description | Typical Manifestations |
|-----------|-------|-------------|------------------------|
| `Minimal` | 0-25 | Manageable tension | Tight grip, slight headache, focused thoughts |
| `Mounting` | 26-50 | Growing pressure | Jaw clenching, flinching, seeing threats |
| `Critical` | 51-75 | Significant distress | Racing heart, shaking hands, fragmented thoughts |
| `Breaking` | 76-99 | Near collapse | Trembling, tunnel vision, primal responses |
| `Broken` | 100 | Complete breakdown | Loss of control, dissociation, snap |

### 5.3 Manifestation Types

| Manifestation | Description | Example |
|---------------|-------------|---------|
| `Physical` | Body symptoms | "Your heart pounds in your ears" |
| `Mental` | Thought patterns | "Thoughts fragment. Complete sentences are getting harder" |
| `Behavioral` | Actions | "You snap at allies. The words leave before you can stop them" |

### 5.4 Intensity Levels

| Intensity | Description | Usage |
|-----------|-------------|-------|
| `Subtle` | Barely noticeable | Minimal stress level, early warnings |
| `Moderate` | Clearly present | Mounting stress, growing concern |
| `Oppressive` | Overwhelming | Critical through Broken, urgent |

---

## 6. TraumaDescriptor Definition

### 6.1 Trauma Properties

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| `id` | string | **Yes** | - | Unique descriptor identifier |
| `text` | string | **Yes** | - | Descriptor text |
| `weight` | integer | No | 10 | Selection weight |
| `traumaType` | string | **Yes** | - | Trauma type (enum) |
| `intensity` | string | **Yes** | - | Trauma intensity (enum) |
| `triggerContext` | string | No | null | Situational trigger |
| `tags` | array | No | [] | Metadata tags |

### 6.2 Trauma Types

| Type | Description | Example Descriptor |
|------|-------------|-------------------|
| `Flashback` | Reliving past trauma | "You are there again. Not here. THERE. Where it happened" |
| `Panic` | Overwhelming fear | "You cannot breathe. You cannot think. You can only feel the terror" |
| `Dissociation` | Detachment from reality | "Watching yourself from outside. A puppet without a script" |
| `Hypervigilance` | Constant alertness | "Everyone is a threat. Everything is a trap. Trust is impossible" |
| `Avoidance` | Trigger avoidance | "You cannot go there. Not again. Never again." |

### 6.3 Trauma Intensity Levels

| Intensity | Description | Control Level |
|-----------|-------------|---------------|
| `Mild` | Controlled response | "A memory surfaces, unwanted. You push it back down" |
| `Moderate` | Struggling for control | "The past bleeds into the present. You see both at once" |
| `Severe` | Overwhelming | "You are there again. THERE." |

### 6.4 Trigger Contexts

| Context | Description | Associated Traumas |
|---------|-------------|-------------------|
| `Combat` | Battle situations | Flashback, Panic, Hypervigilance |
| `Darkness` | Low light areas | Panic, Hypervigilance |
| `Fire` | Flame exposure | Flashback, Panic |
| `Enclosed` | Tight spaces | Panic, Dissociation |
| `Isolation` | Being alone | Panic, Dissociation |
| `Crowds` | Too many people | Panic, Hypervigilance |
| `Blood` | Gore exposure | Flashback, Dissociation |
| `Heights` | Elevated positions | Panic, Dissociation |

---

## 7. CorruptionDescriptor Definition

### 7.1 Corruption Properties

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| `id` | string | **Yes** | - | Unique descriptor identifier |
| `text` | string | **Yes** | - | Descriptor text |
| `weight` | integer | No | 10 | Selection weight |
| `threshold` | string | **Yes** | - | Corruption threshold (enum) |
| `manifestation` | string | **Yes** | - | Manifestation type (enum) |
| `tags` | array | No | [] | Metadata tags |

### 7.2 Corruption Thresholds

| Threshold | Range | Description | Stage |
|-----------|-------|-------------|-------|
| `Clean` | 0-10 | Uncorrupted | Normal |
| `Touched` | 11-30 | First signs of taint | Early corruption |
| `Tainted` | 31-50 | Visible corruption | Moderate corruption |
| `Corrupted` | 51-75 | Significant transformation | Advanced corruption |
| `Lost` | 76-99 | Nearly consumed | Critical corruption |
| `Forlorn` | 100 | Fully transformed | Complete transformation |

### 7.3 Corruption Manifestation Types

| Manifestation | Description | Example |
|---------------|-------------|---------|
| `Physical` | Body transforms | "Veins show through the skin, darker than they should be" |
| `Mental` | Mind corrupts | "The whispers have become a voice. It knows your name" |
| `Social` | Relationships suffer | "People look at you differently. They sense what you are becoming" |
| `Urgent` | Desperate stage | "There is still time. Maybe. If you can find help" |
| `Final` | Complete transformation | "The change is complete. What was you is now... other" |

---

## 8. BiomePressureDescriptor Definition

### 8.1 Biome Pressure Properties

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| `id` | string | **Yes** | - | Unique descriptor identifier |
| `text` | string | **Yes** | - | Descriptor text |
| `weight` | integer | No | 10 | Selection weight |
| `biome` | string | **Yes** | - | Biome type (enum) |
| `pressureType` | string | **Yes** | - | Pressure type (string) |
| `intensity` | string | No | null | Intensity level (enum) |
| `tags` | array | No | [] | Metadata tags |

### 8.2 Biome Types

| Biome | Description | Atmosphere |
|-------|-------------|------------|
| `The_Roots` | Industrial decay, underground | Isolation, claustrophobia, industrial horror |
| `Muspelheim` | Volcanic realm | Heat, thirst, burning rage |
| `Niflheim` | Frozen realm | Cold, despair, death wish |
| `Svartalfheim` | Dark elf realm | Darkness, paranoia, madness |
| `Vanaheim` | Wild growth realm | Consumption, infection, hostility |
| `Jotunheim` | Giant realm | Scale, insignificance, exposure |

### 8.3 Pressure Types by Biome

| Biome | Pressure Types | Example Descriptors |
|-------|----------------|---------------------|
| `The_Roots` | Isolation, Claustrophobia, Dread | "How long since you have seen another person? Days? Weeks?" |
| `Muspelheim` | Heat, Thirst, Fury | "Your thoughts move slowly, boiled sluggish by the heat" |
| `Niflheim` | Cold, Despair, Stillness | "The cold takes emotion first. Then hope. Then everything else" |
| `Svartalfheim` | Darkness, Paranoia, Madness | "The dark has weight here. Presence. Intent" |
| `Vanaheim` | Consumption, Infection, Alienation | "The jungle wants to eat you. It is patient. It has time" |
| `Jotunheim` | Scale, Insignificance, Exposure | "You are small. So small. The giants barely notice you exist" |

---

## 9. RecoveryDescriptor Definition

### 9.1 Recovery Properties

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| `id` | string | **Yes** | - | Unique descriptor identifier |
| `text` | string | **Yes** | - | Descriptor text |
| `weight` | integer | No | 10 | Selection weight |
| `recoveryType` | string | **Yes** | - | Recovery type (enum) |
| `tags` | array | No | [] | Metadata tags |

### 9.2 Recovery Types

| Type | Description | Example |
|------|-------------|---------|
| `Rest` | Physical/mental rest | "Breathing slows. The shaking stops. You are still here" |
| `Social` | Human connection | "Another voice. Human. Not threatening. You had forgotten the sound" |
| `Grounding` | Present-focus techniques | "Count the exits. Name the objects. You are here. You are now. You are safe" |
| `Support` | Understanding ally | "Someone who understands. They have been there too" |
| `Milestone` | Survival achievement | "You survived. Again. It does not feel like victory, but it is" |
| `Acceptance` | Trauma integration | "The scar is part of you now. It does not have to define you" |

---

## 10. Variable Placeholders Reference

### Psychological State Variables

| Variable | Description | Example Value |
|----------|-------------|---------------|
| `{StressLevel}` | Current stress percentage | "65" |
| `{StressThreshold}` | Current threshold name | "Critical" |
| `{CorruptionLevel}` | Current corruption percentage | "42" |
| `{CorruptionThreshold}` | Current threshold name | "Tainted" |
| `{TraumaType}` | Active trauma type | "Flashback" |
| `{TraumaIntensity}` | Trauma intensity | "Severe" |

### Environment Variables

| Variable | Description | Example Value |
|----------|-------------|---------------|
| `{Biome}` | Current biome | "The Roots" |
| `{LocationName}` | Room/area name | "Abandoned Workshop" |
| `{PressureType}` | Active pressure | "Isolation" |
| `{TimeInBiome}` | Duration in biome | "three days" |

### Character Variables

| Variable | Description | Example Value |
|----------|-------------|---------------|
| `{PlayerName}` | Player character name | "Bjorn Ironwill" |
| `{PlayerClass}` | Player class | "Runecaster" |
| `{AllyName}` | Nearby ally name | "Gunnar" |
| `{AllyCount}` | Number of nearby allies | "2" |

### Trigger Variables

| Variable | Description | Example Value |
|----------|-------------|---------------|
| `{TriggerEvent}` | What triggered the response | "combat encounter" |
| `{TriggerContext}` | Situational context | "Darkness" |
| `{TimeSinceTrigger}` | Time since trigger | "moments" |
| `{RecoveryType}` | Type of recovery | "Rest" |

---

## 11. Configuration Schema

### Complete `psychological-descriptors.schema.json`

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://rune-game.com/schemas/psychological-descriptors.schema.json",
  "title": "Psychological Descriptor Configuration",
  "description": "Schema for psychological state flavor text descriptors",
  "type": "object",
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference"
    },
    "version": {
      "type": "string",
      "description": "Schema version (semver format)",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "category": {
      "type": "string",
      "description": "Descriptor category",
      "enum": [
        "stress",
        "trauma",
        "corruption",
        "biome-pressure",
        "recovery"
      ]
    },
    "pools": {
      "type": "object",
      "description": "Map of pool ID to descriptor array",
      "additionalProperties": {
        "type": "array",
        "items": {
          "oneOf": [
            { "$ref": "#/definitions/StressDescriptor" },
            { "$ref": "#/definitions/TraumaDescriptor" },
            { "$ref": "#/definitions/CorruptionDescriptor" },
            { "$ref": "#/definitions/BiomePressureDescriptor" },
            { "$ref": "#/definitions/RecoveryDescriptor" }
          ]
        },
        "minItems": 1
      },
      "propertyNames": {
        "pattern": "^[a-z][a-z0-9_]*$"
      }
    }
  },
  "required": ["version", "category", "pools"],
  "additionalProperties": false,
  "definitions": {
    "StressDescriptor": {
      "type": "object",
      "description": "Stress manifestation descriptor",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique descriptor identifier",
          "pattern": "^[a-z][a-z0-9_-]*$"
        },
        "text": {
          "type": "string",
          "description": "Descriptor text with {Variable} placeholders",
          "minLength": 1
        },
        "weight": {
          "type": "integer",
          "description": "Selection weight (higher = more likely)",
          "minimum": 1,
          "default": 10
        },
        "threshold": {
          "$ref": "#/definitions/StressThreshold",
          "description": "Stress threshold"
        },
        "manifestation": {
          "$ref": "#/definitions/StressManifestation",
          "description": "Manifestation type"
        },
        "intensity": {
          "oneOf": [
            { "$ref": "#/definitions/Intensity" },
            { "type": "null" }
          ],
          "description": "Intensity level"
        },
        "tags": {
          "type": "array",
          "description": "Metadata tags for filtering",
          "items": { "type": "string" },
          "default": []
        }
      },
      "required": ["id", "text", "threshold", "manifestation"],
      "additionalProperties": false
    },
    "TraumaDescriptor": {
      "type": "object",
      "description": "Trauma effect descriptor",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique descriptor identifier",
          "pattern": "^[a-z][a-z0-9_-]*$"
        },
        "text": {
          "type": "string",
          "description": "Descriptor text",
          "minLength": 1
        },
        "weight": {
          "type": "integer",
          "description": "Selection weight",
          "minimum": 1,
          "default": 10
        },
        "traumaType": {
          "$ref": "#/definitions/TraumaType",
          "description": "Trauma type"
        },
        "intensity": {
          "$ref": "#/definitions/TraumaIntensity",
          "description": "Trauma intensity"
        },
        "triggerContext": {
          "type": ["string", "null"],
          "description": "Situational trigger context"
        },
        "tags": {
          "type": "array",
          "items": { "type": "string" },
          "default": []
        }
      },
      "required": ["id", "text", "traumaType", "intensity"],
      "additionalProperties": false
    },
    "CorruptionDescriptor": {
      "type": "object",
      "description": "Corruption progression descriptor",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique descriptor identifier",
          "pattern": "^[a-z][a-z0-9_-]*$"
        },
        "text": {
          "type": "string",
          "description": "Descriptor text",
          "minLength": 1
        },
        "weight": {
          "type": "integer",
          "description": "Selection weight",
          "minimum": 1,
          "default": 10
        },
        "threshold": {
          "$ref": "#/definitions/CorruptionThreshold",
          "description": "Corruption threshold"
        },
        "manifestation": {
          "$ref": "#/definitions/CorruptionManifestation",
          "description": "Manifestation type"
        },
        "tags": {
          "type": "array",
          "items": { "type": "string" },
          "default": []
        }
      },
      "required": ["id", "text", "threshold", "manifestation"],
      "additionalProperties": false
    },
    "BiomePressureDescriptor": {
      "type": "object",
      "description": "Biome environmental pressure descriptor",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique descriptor identifier",
          "pattern": "^[a-z][a-z0-9_-]*$"
        },
        "text": {
          "type": "string",
          "description": "Descriptor text",
          "minLength": 1
        },
        "weight": {
          "type": "integer",
          "description": "Selection weight",
          "minimum": 1,
          "default": 10
        },
        "biome": {
          "$ref": "#/definitions/Biome",
          "description": "Biome type"
        },
        "pressureType": {
          "type": "string",
          "description": "Type of psychological pressure",
          "minLength": 1
        },
        "intensity": {
          "oneOf": [
            { "$ref": "#/definitions/Intensity" },
            { "type": "null" }
          ],
          "description": "Intensity level"
        },
        "tags": {
          "type": "array",
          "items": { "type": "string" },
          "default": []
        }
      },
      "required": ["id", "text", "biome", "pressureType"],
      "additionalProperties": false
    },
    "RecoveryDescriptor": {
      "type": "object",
      "description": "Recovery moment descriptor",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique descriptor identifier",
          "pattern": "^[a-z][a-z0-9_-]*$"
        },
        "text": {
          "type": "string",
          "description": "Descriptor text",
          "minLength": 1
        },
        "weight": {
          "type": "integer",
          "description": "Selection weight",
          "minimum": 1,
          "default": 10
        },
        "recoveryType": {
          "$ref": "#/definitions/RecoveryType",
          "description": "Recovery type"
        },
        "tags": {
          "type": "array",
          "items": { "type": "string" },
          "default": []
        }
      },
      "required": ["id", "text", "recoveryType"],
      "additionalProperties": false
    },
    "StressThreshold": {
      "type": "string",
      "description": "Stress threshold level",
      "enum": [
        "Minimal",
        "Mounting",
        "Critical",
        "Breaking",
        "Broken"
      ]
    },
    "StressManifestation": {
      "type": "string",
      "description": "Stress manifestation type",
      "enum": [
        "Physical",
        "Mental",
        "Behavioral"
      ]
    },
    "TraumaType": {
      "type": "string",
      "description": "Trauma type classification",
      "enum": [
        "Flashback",
        "Panic",
        "Dissociation",
        "Hypervigilance",
        "Avoidance"
      ]
    },
    "TraumaIntensity": {
      "type": "string",
      "description": "Trauma intensity level",
      "enum": [
        "Mild",
        "Moderate",
        "Severe"
      ]
    },
    "CorruptionThreshold": {
      "type": "string",
      "description": "Corruption threshold level",
      "enum": [
        "Clean",
        "Touched",
        "Tainted",
        "Corrupted",
        "Lost",
        "Forlorn"
      ]
    },
    "CorruptionManifestation": {
      "type": "string",
      "description": "Corruption manifestation type",
      "enum": [
        "Physical",
        "Mental",
        "Social",
        "Urgent",
        "Final"
      ]
    },
    "Biome": {
      "type": "string",
      "description": "Game biome",
      "enum": [
        "The_Roots",
        "Muspelheim",
        "Niflheim",
        "Svartalfheim",
        "Vanaheim",
        "Jotunheim"
      ]
    },
    "RecoveryType": {
      "type": "string",
      "description": "Recovery type classification",
      "enum": [
        "Rest",
        "Social",
        "Grounding",
        "Support",
        "Milestone",
        "Acceptance"
      ]
    },
    "Intensity": {
      "type": "string",
      "description": "General intensity level",
      "enum": [
        "Subtle",
        "Moderate",
        "Oppressive"
      ]
    }
  }
}
```

---

## 12. Logging Specifications

### Schema Validation Logging

| Event | Level | Message Format |
|-------|-------|----------------|
| Schema loaded | INFO | `Psychological descriptor schema loaded from {path}` |
| Validation success | DEBUG | `Psychological descriptors validated ({poolCount} pools, {descriptorCount} descriptors)` |
| Validation failure | ERROR | `Psychological descriptor validation failed: {errors}` |
| Invalid threshold | ERROR | `Threshold '{threshold}' not in valid enum` |
| Invalid trauma type | ERROR | `TraumaType '{type}' not in valid enum` |
| Invalid corruption threshold | ERROR | `CorruptionThreshold '{threshold}' not in valid enum` |
| Invalid biome | ERROR | `Biome '{biome}' not in valid enum` |
| Invalid recovery type | ERROR | `RecoveryType '{type}' not in valid enum` |
| Missing required | ERROR | `Descriptor missing required field: {field}` |
| Empty pool | WARN | `Pool '{poolId}' contains no descriptors` |

### Runtime Logging

| Event | Level | Message Format |
|-------|-------|----------------|
| Pool loaded | DEBUG | `Loaded pool '{poolId}' ({count} descriptors)` |
| Descriptor selected | DEBUG | `Selected descriptor '{id}' from pool '{poolId}'` |
| Variable substitution | TRACE | `Substituted {count} variables in descriptor '{id}'` |
| Missing pool | WARN | `Pool '{poolId}' not found, using fallback` |
| No matching descriptor | WARN | `No descriptor matches filters: {filters}` |
| Stress threshold crossed | INFO | `Player stress crossed threshold: {oldThreshold} → {newThreshold}` |
| Corruption threshold crossed | WARN | `Player corruption crossed threshold: {oldThreshold} → {newThreshold}` |

---

## 13. Unit Testing Requirements

### Test Summary

| Test ID | Test Name | Description |
|---------|-----------|-------------|
| PSY-001 | ValidPsychologicalDescriptorConfiguration | Validates complete configuration file |
| PSY-002 | StressDescriptorValidation | Validates stress descriptor structure |
| PSY-003 | TraumaDescriptorValidation | Validates trauma descriptor structure |
| PSY-004 | CorruptionDescriptorValidation | Validates corruption descriptor structure |
| PSY-005 | BiomePressureDescriptorValidation | Validates biome pressure descriptor structure |
| PSY-006 | RecoveryDescriptorValidation | Validates recovery descriptor structure |

### Test Specifications

#### PSY-001: ValidPsychologicalDescriptorConfiguration

```
Test: Valid complete psychological descriptor configuration passes validation
Given: A psychological descriptor JSON file with multiple pools and descriptors
When: Schema validation is performed
Then: Validation passes with no errors
And: All pools contain at least one descriptor
And: Thresholds are valid enum values
And: Manifestation types are valid enum values
```

#### PSY-002: StressDescriptorValidation

```
Test: Stress descriptor structure validates correctly
Given: Stress descriptors with various configurations
When: Schema validation is performed:
  - { "id": "test", "text": "...", "threshold": "Critical", "manifestation": "Physical" } → passes (minimal)
  - { "id": "test", "text": "...", "threshold": "Critical", "manifestation": "Physical", "intensity": "Oppressive" } → passes
  - { "text": "...", "threshold": "Critical", "manifestation": "Physical" } → fails (missing id)
  - { "id": "test", "threshold": "Critical", "manifestation": "Physical" } → fails (missing text)
  - { "id": "test", "text": "...", "threshold": "Invalid", "manifestation": "Physical" } → fails (invalid threshold)
  - { "id": "test", "text": "...", "threshold": "Critical", "manifestation": "Invalid" } → fails (invalid manifestation)
Then: Required fields enforced, enums validated
```

#### PSY-003: TraumaDescriptorValidation

```
Test: Trauma descriptor validates trauma types and intensity
Given: Trauma descriptors with various configurations
When: Schema validation is performed:
  - { "id": "test", "text": "...", "traumaType": "Flashback", "intensity": "Severe" } → passes
  - { "id": "test", "text": "...", "traumaType": "Panic", "intensity": "Mild", "triggerContext": "Combat" } → passes
  - { "id": "test", "text": "...", "traumaType": "Invalid", "intensity": "Severe" } → fails
  - { "id": "test", "text": "...", "traumaType": "Flashback", "intensity": "Invalid" } → fails
  - { "id": "test", "text": "...", "traumaType": "Flashback" } → fails (missing intensity)
Then: Trauma types and intensity validated against enums
```

#### PSY-004: CorruptionDescriptorValidation

```
Test: Corruption descriptor validates thresholds and manifestations
Given: Corruption descriptors with various configurations
When: Schema validation is performed:
  - { "id": "test", "text": "...", "threshold": "Tainted", "manifestation": "Physical" } → passes
  - { "id": "test", "text": "...", "threshold": "Lost", "manifestation": "Urgent" } → passes
  - { "id": "test", "text": "...", "threshold": "Forlorn", "manifestation": "Final" } → passes
  - { "id": "test", "text": "...", "threshold": "Invalid", "manifestation": "Physical" } → fails
  - { "id": "test", "text": "...", "threshold": "Tainted", "manifestation": "Invalid" } → fails
Then: Corruption thresholds and manifestations validated against enums
```

#### PSY-005: BiomePressureDescriptorValidation

```
Test: Biome pressure descriptor validates biomes and pressure types
Given: Biome pressure descriptors with various configurations
When: Schema validation is performed:
  - { "id": "test", "text": "...", "biome": "The_Roots", "pressureType": "Isolation" } → passes
  - { "id": "test", "text": "...", "biome": "Muspelheim", "pressureType": "Heat", "intensity": "Oppressive" } → passes
  - { "id": "test", "text": "...", "biome": "Invalid", "pressureType": "Isolation" } → fails
  - { "id": "test", "text": "...", "biome": "The_Roots" } → fails (missing pressureType)
Then: Biome enums validated, pressure types required
```

#### PSY-006: RecoveryDescriptorValidation

```
Test: Recovery descriptor validates recovery types
Given: Recovery descriptors with various configurations
When: Schema validation is performed:
  - { "id": "test", "text": "...", "recoveryType": "Rest" } → passes
  - { "id": "test", "text": "...", "recoveryType": "Grounding", "tags": ["Technique"] } → passes
  - { "id": "test", "text": "...", "recoveryType": "Invalid" } → fails
  - { "id": "test", "text": "..." } → fails (missing recoveryType)
Then: Recovery types validated against enum
```

---

## 14. Use Cases

### UC-001: Load Psychological Descriptors

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ UC-001: Load Psychological Descriptors                                       │
├─────────────────────────────────────────────────────────────────────────────┤
│ Actors: Game System                                                          │
│ Trigger: Game initialization                                                 │
│ Preconditions: Descriptor files exist                                        │
├─────────────────────────────────────────────────────────────────────────────┤
│ Flow:                                                                        │
│ 1. System loads psychological-descriptors.schema.json                        │
│ 2. System reads stress-descriptors.json, trauma-descriptors.json, etc.       │
│ 3. Validate configuration against schema                                     │
│ 4. Build pool lookup by threshold, type, biome                               │
│ 5. Cache descriptors for performance                                         │
│ 6. Log pool statistics                                                       │
├─────────────────────────────────────────────────────────────────────────────┤
│ Postconditions: Descriptors loaded and cached                                │
│ Exceptions: Invalid JSON → log error, use fallback text                      │
└─────────────────────────────────────────────────────────────────────────────┘
```

### UC-002: Display Stress Manifestation

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ UC-002: Display Stress Manifestation                                         │
├─────────────────────────────────────────────────────────────────────────────┤
│ Actors: Stress Tracking System                                               │
│ Trigger: Stress threshold crossed or stress-inducing event                   │
│ Preconditions: Stress descriptors loaded                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│ Flow:                                                                        │
│ 1. Determine current stress level (e.g., 65)                                 │
│ 2. Map to threshold (65 → Critical)                                          │
│ 3. Roll for manifestation type (Physical, Mental, Behavioral)                │
│ 4. Build pool ID: "stress_critical_physical"                                 │
│ 5. Retrieve pool from cache                                                  │
│ 6. Filter by intensity if applicable                                         │
│ 7. Select descriptor by weighted random                                      │
│ 8. Substitute variables if present                                           │
│ 9. Display stress manifestation text                                         │
├─────────────────────────────────────────────────────────────────────────────┤
│ Postconditions: Player sees stress manifestation flavor text                 │
│ Exceptions: Pool not found → use generic fallback text                       │
└─────────────────────────────────────────────────────────────────────────────┘
```

### UC-003: Trigger Trauma Effect

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ UC-003: Trigger Trauma Effect                                                │
├─────────────────────────────────────────────────────────────────────────────┤
│ Actors: Trauma System                                                        │
│ Trigger: Trauma trigger event occurs                                         │
│ Preconditions: Player has active trauma, trauma descriptors loaded           │
├─────────────────────────────────────────────────────────────────────────────┤
│ Flow:                                                                        │
│ 1. Identify trigger context (e.g., Combat, Darkness)                         │
│ 2. Check player's active traumas for matching type                           │
│ 3. Determine trauma intensity based on severity and stress                   │
│ 4. Build pool ID: "trauma_flashback_severe"                                  │
│ 5. Retrieve pool from cache                                                  │
│ 6. Filter by trigger context if applicable                                   │
│ 7. Select descriptor by weighted random                                      │
│ 8. Substitute variables                                                      │
│ 9. Display trauma effect text                                                │
│ 10. Apply mechanical trauma effects                                          │
├─────────────────────────────────────────────────────────────────────────────┤
│ Postconditions: Trauma effect displayed and applied                          │
│ Exceptions: No matching trauma → skip                                        │
└─────────────────────────────────────────────────────────────────────────────┘
```

### UC-004: Display Corruption Warning

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ UC-004: Display Corruption Warning                                           │
├─────────────────────────────────────────────────────────────────────────────┤
│ Actors: Corruption System                                                    │
│ Trigger: Corruption increases or threshold crossed                           │
│ Preconditions: Corruption descriptors loaded                                 │
├─────────────────────────────────────────────────────────────────────────────┤
│ Flow:                                                                        │
│ 1. Determine current corruption level (e.g., 42)                             │
│ 2. Map to threshold (42 → Tainted)                                           │
│ 3. Determine manifestation type based on context                             │
│ 4. Build pool ID: "corruption_tainted_physical"                              │
│ 5. Retrieve pool from cache                                                  │
│ 6. Select descriptor by weighted random                                      │
│ 7. Substitute variables                                                      │
│ 8. Display corruption warning text                                           │
├─────────────────────────────────────────────────────────────────────────────┤
│ Postconditions: Player sees corruption progression warning                   │
│ Exceptions: Clean threshold → no descriptor needed                           │
└─────────────────────────────────────────────────────────────────────────────┘
```

### UC-005: Apply Biome Pressure

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ UC-005: Apply Biome Pressure                                                 │
├─────────────────────────────────────────────────────────────────────────────┤
│ Actors: Biome System                                                         │
│ Trigger: Player enters biome area or time-based pressure tick                │
│ Preconditions: Biome pressure descriptors loaded                             │
├─────────────────────────────────────────────────────────────────────────────┤
│ Flow:                                                                        │
│ 1. Identify current biome (e.g., The_Roots)                                  │
│ 2. Select pressure type based on location/duration                           │
│ 3. Determine intensity based on depth/exposure time                          │
│ 4. Build pool ID: "the_roots_isolation"                                      │
│ 5. Retrieve pool from cache                                                  │
│ 6. Filter by intensity                                                       │
│ 7. Select descriptor by weighted random                                      │
│ 8. Substitute variables ({Biome}, {TimeInBiome}, etc.)                       │
│ 9. Display biome pressure atmosphere text                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│ Postconditions: Biome atmosphere established through text                    │
│ Exceptions: Unknown pressure type → use generic biome descriptor             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 15. Deliverable Checklist

### Configuration Files

| Status | File | Description |
|--------|------|-------------|
| ☐ | `config/schemas/psychological-descriptors.schema.json` | JSON Schema for validation |
| ☐ | `config/psychological-descriptors/stress-descriptors.json` | Stress manifestation content |
| ☐ | `config/psychological-descriptors/trauma-descriptors.json` | Trauma effect content |
| ☐ | `config/psychological-descriptors/corruption-descriptors.json` | Corruption progression content |
| ☐ | `config/psychological-descriptors/biome-pressure-descriptors.json` | Biome pressure content |
| ☐ | `config/psychological-descriptors/recovery-descriptors.json` | Recovery moment content |

### Unit Tests

| Status | Test | Description |
|--------|------|-------------|
| ☐ | PSY-001 | Valid complete configuration |
| ☐ | PSY-002 | Stress descriptor validation |
| ☐ | PSY-003 | Trauma descriptor validation |
| ☐ | PSY-004 | Corruption descriptor validation |
| ☐ | PSY-005 | Biome pressure descriptor validation |
| ☐ | PSY-006 | Recovery descriptor validation |

### Documentation

| Status | Document | Description |
|--------|----------|-------------|
| ☑ | Design Specification | This document |
| ☐ | Schema Documentation | Inline in schema file |
| ☐ | Variable Placeholder Guide | Developer reference |

---

## 16. Acceptance Criteria

### Functional Criteria

- [ ] `psychological-descriptors.schema.json` created in `config/schemas/`
- [ ] Schema validates all 5 stress thresholds
- [ ] Schema validates all 5 trauma types
- [ ] Schema validates all 6 corruption thresholds
- [ ] Schema validates all 6 biomes
- [ ] Schema validates all 6 recovery types
- [ ] Stress manifestations validated (3 types)
- [ ] Corruption manifestations validated (5 types)
- [ ] Trauma intensities validated (3 levels)
- [ ] General intensities validated (3 levels)
- [ ] Pool ID pattern validated (snake_case)
- [ ] Descriptor ID pattern validated
- [ ] Variable placeholders documented
- [ ] ~6 unit tests pass

### Quality Criteria

- [ ] Schema follows JSON Schema Draft-07 specification
- [ ] All properties include descriptive comments
- [ ] Default values documented for optional fields
- [ ] Pattern constraints clearly specified
- [ ] Enum values match existing SQL content

### Integration Criteria

- [ ] Schema follows patterns from v0.14.9c (NPC descriptor schema)
- [ ] Compatible with existing SQL schema structure
- [ ] Pool IDs use snake_case
- [ ] Property names use camelCase within descriptors
- [ ] Threshold/type names use PascalCase (Critical, not critical)

---

## 17. Dependencies

### Required From

| Version | Dependency | Usage |
|---------|------------|-------|
| v0.14.8 | Dice Configuration Schemas | Schema infrastructure patterns |
| v0.14.9a | Dialogue Schema | Schema pattern reference |
| v0.14.9b | Ability Descriptor Schema | Schema pattern reference |
| v0.14.9c | NPC Descriptor Schema | Schema pattern reference |
| Existing | `psychological_descriptor_schema.sql` | Source structure |

### Provides To

| Version | Consumer | Usage |
|---------|----------|-------|
| v0.14.9e | Capture Template Schema | Schema pattern reference |
| Future | PsychologicalDescriptorService | Descriptor loading and selection |
| Future | StressTrackingSystem | Stress manifestation display |
| Future | TraumaSystem | Trauma effect display |
| Future | CorruptionSystem | Corruption warning display |
| Future | BiomeSystem | Biome atmosphere text |

---

## 18. Future Considerations

### Deferred to Later Versions

| Feature | Rationale |
|---------|-----------|
| Capture template schema | v0.14.9e scope |
| Descriptor execution logic | Runtime concern |
| Mechanical effects application | Runtime concern |
| Audio cue integration | Future audio version |
| Localization support | Future i18n version |

### Potential Enhancements

| Enhancement | Description |
|-------------|-------------|
| Trauma stacking | Multiple traumas interact and compound |
| Corruption resistance | Some characters resist corruption longer |
| Biome adaptation | Reduced pressure after extended exposure |
| Recovery effectiveness | Recovery type effectiveness varies by trauma |
| NPC psychological states | NPCs also have stress/trauma/corruption |
| Seasonal pressure | Different biome pressures in different seasons |
| Time-of-day effects | Night increases certain pressures |
| Group psychology | Being with allies reduces certain pressures |

---

## 19. Appendix: Schema Validation Examples

### Valid Stress Descriptor (Minimal)

```json
{
  "id": "stress_critical_physical_001",
  "text": "Your heart pounds in your ears, drowning out everything else",
  "threshold": "Critical",
  "manifestation": "Physical"
}
```

### Valid Stress Descriptor (Complete)

```json
{
  "id": "stress_critical_physical_001",
  "text": "Your heart pounds in your ears, drowning out everything else",
  "weight": 10,
  "threshold": "Critical",
  "manifestation": "Physical",
  "intensity": "Oppressive",
  "tags": ["Panic", "Heartbeat"]
}
```

### Valid Trauma Descriptor

```json
{
  "id": "trauma_flashback_severe_001",
  "text": "You are there again. Not here. THERE. Where it happened",
  "weight": 10,
  "traumaType": "Flashback",
  "intensity": "Severe",
  "triggerContext": "Combat",
  "tags": ["Memory", "Immersive"]
}
```

### Valid Corruption Descriptor

```json
{
  "id": "corruption_tainted_physical_001",
  "text": "Veins show through the skin, darker than they should be",
  "weight": 10,
  "threshold": "Tainted",
  "manifestation": "Physical",
  "tags": ["Visible", "Veins"]
}
```

### Valid Biome Pressure Descriptor

```json
{
  "id": "the_roots_isolation_001",
  "text": "How long since you have seen another person? Days? Weeks?",
  "weight": 10,
  "biome": "The_Roots",
  "pressureType": "Isolation",
  "intensity": "Moderate",
  "tags": ["Isolation", "Time"]
}
```

### Valid Recovery Descriptor

```json
{
  "id": "recovery_grounding_001",
  "text": "Count the exits. Name the objects. You are here. You are now. You are safe",
  "weight": 10,
  "recoveryType": "Grounding",
  "tags": ["Technique", "Present"]
}
```

### Valid Configuration File

```json
{
  "$schema": "../../config/schemas/psychological-descriptors.schema.json",
  "version": "1.0.0",
  "category": "stress",
  "pools": {
    "stress_minimal_physical": [
      {
        "id": "stress_minimal_physical_001",
        "text": "Your grip tightens on your weapon — unconscious, instinctive",
        "weight": 10,
        "threshold": "Minimal",
        "manifestation": "Physical",
        "intensity": "Subtle",
        "tags": ["Combat", "Tension"]
      }
    ],
    "stress_critical_physical": [
      {
        "id": "stress_critical_physical_001",
        "text": "Your heart pounds in your ears, drowning out everything else",
        "weight": 10,
        "threshold": "Critical",
        "manifestation": "Physical",
        "intensity": "Oppressive",
        "tags": ["Panic", "Heartbeat"]
      },
      {
        "id": "stress_critical_physical_002",
        "text": "Hands shake visibly now. Fine motor control is compromised",
        "weight": 10,
        "threshold": "Critical",
        "manifestation": "Physical",
        "intensity": "Oppressive",
        "tags": ["Trembling", "Control"]
      }
    ]
  }
}
```

### Invalid Examples

```json
// Invalid: Missing required 'threshold'
{
  "id": "test_001",
  "text": "...",
  "manifestation": "Physical"
}
// Error: Missing required property 'threshold'

// Invalid: Invalid stress threshold
{
  "id": "test_001",
  "text": "...",
  "threshold": "Extremely_High",
  "manifestation": "Physical"
}
// Error: 'threshold' must be one of: Minimal, Mounting, Critical, Breaking, Broken

// Invalid: Invalid trauma type
{
  "id": "test_001",
  "text": "...",
  "traumaType": "Anxiety",
  "intensity": "Severe"
}
// Error: 'traumaType' must be one of: Flashback, Panic, Dissociation, Hypervigilance, Avoidance

// Invalid: Invalid corruption manifestation
{
  "id": "test_001",
  "text": "...",
  "threshold": "Tainted",
  "manifestation": "Behavioral"
}
// Error: 'manifestation' must be one of: Physical, Mental, Social, Urgent, Final

// Invalid: Invalid biome
{
  "id": "test_001",
  "text": "...",
  "biome": "Helheim",
  "pressureType": "Death"
}
// Error: 'biome' must be one of: The_Roots, Muspelheim, Niflheim, Svartalfheim, Vanaheim, Jotunheim

// Invalid: Pool ID with uppercase
{
  "pools": {
    "Stress_Critical_Physical": [...]
  }
}
// Error: Pool ID must match pattern ^[a-z][a-z0-9_]*$

// Invalid: Empty pool
{
  "pools": {
    "stress_critical_physical": []
  }
}
// Error: Pool must contain at least 1 descriptor
```

---

## 20. Appendix: Source SQL Content Reference

### Stress Descriptors (from psychological_descriptor_schema.sql)

| Threshold | Manifestation | Count | Example |
|-----------|---------------|-------|---------|
| Minimal | Physical | 2 | "Your grip tightens on your weapon — unconscious, instinctive" |
| Minimal | Mental | 1 | "Your thoughts are clear, focused. You can handle this" |
| Mounting | Physical | 2 | "Your jaw aches from clenching. You did not notice you were doing it" |
| Mounting | Mental | 2 | "Shadows seem to move more than they should" |
| Critical | Physical | 2 | "Your heart pounds in your ears, drowning out everything else" |
| Critical | Mental | 1 | "Thoughts fragment. Complete sentences are getting harder" |
| Critical | Behavioral | 1 | "You snap at allies. The words leave before you can stop them" |
| Breaking | Physical | 2 | "Your whole body trembles. The shaking will not stop" |
| Breaking | Mental | 1 | "Thoughts scream, overlap, contradict. Coherence is failing" |
| Breaking | Behavioral | 1 | "Fight or flight — the only options that make sense now" |
| Broken | Mental | 3 | "Something inside you SNAPS. A string pulled too tight, finally giving" |

### Trauma Descriptors (from psychological_descriptor_schema.sql)

| Type | Intensity | Example |
|------|-----------|---------|
| Flashback | Mild | "A memory surfaces, unwanted. You push it back down" |
| Flashback | Moderate | "The past bleeds into the present. You see both at once" |
| Flashback | Severe | "You are there again. Not here. THERE. Where it happened" |
| Panic | Mild | "Your heart skips. A lurch of fear, quickly controlled" |
| Panic | Moderate | "Panic claws at your chest. Breathing becomes a conscious effort" |
| Panic | Severe | "You cannot breathe. You cannot think. You can only feel the terror" |
| Dissociation | Mild | "For a moment, you feel distant from your body. A step removed" |
| Dissociation | Moderate | "You are watching yourself from outside. A puppet without a script" |
| Dissociation | Severe | "You are not sure who you are. The name feels like a word, not an identity" |
| Hypervigilance | Mild | "You are watching the shadows closer than you need to" |
| Hypervigilance | Moderate | "You cannot relax. Your body refuses. There is danger everywhere" |
| Hypervigilance | Severe | "Everyone is a threat. Everything is a trap. Trust is impossible" |

### Corruption Descriptors (from psychological_descriptor_schema.sql)

| Threshold | Manifestation | Example |
|-----------|---------------|---------|
| Touched | Physical | "A paleness that does not wash away. A coldness that does not warm" |
| Touched | Mental | "Dreams that are not yours. Memories that never happened" |
| Tainted | Physical | "Veins show through the skin, darker than they should be" |
| Tainted | Mental | "The whispers have words now. You are trying not to understand them" |
| Tainted | Social | "People look at you differently. They sense what you are becoming" |
| Corrupted | Physical | "Your skin has changed texture. Not quite human anymore" |
| Corrupted | Mental | "The whispers have become a voice. It knows your name" |
| Corrupted | Social | "Allies keep their distance. They are right to" |
| Lost | Physical | "Looking in mirrors is inadvisable. What looks back is not entirely you" |
| Lost | Mental | "You are losing yourself. Watching it happen. Unable to stop it" |
| Lost | Urgent | "There is still time. Maybe. If you can find help" |
| Forlorn | Final | "The change is complete. What was you is now... other" |

### Biome Pressure Descriptors (from psychological_descriptor_schema.sql)

| Biome | Pressure Type | Example |
|-------|---------------|---------|
| The_Roots | Isolation | "How long since you have seen another person? Days? Weeks?" |
| The_Roots | Claustrophobia | "The walls press in. They are not moving. You know that. They are not moving" |
| The_Roots | Dread | "Every corridor could be your last. Every room could be a tomb" |
| Muspelheim | Heat | "Your thoughts move slowly, boiled sluggish by the heat" |
| Muspelheim | Thirst | "Water. Just water. You would kill for water" |
| Muspelheim | Fury | "The heat breeds anger. Everything is an enemy" |
| Niflheim | Cold | "The cold takes emotion first. Then hope. Then everything else" |
| Niflheim | Despair | "What is the point? The cold has already decided the outcome" |
| Niflheim | Stillness | "Part of you wants to stop. To freeze. To become ice" |
| Svartalfheim | Darkness | "The dark has weight here. Presence. Intent" |
| Svartalfheim | Paranoia | "Something clicked. Close. Too close. Where?" |
| Svartalfheim | Madness | "You are talking to yourself. The silence is worse" |
| Vanaheim | Consumption | "The jungle wants to eat you. It is patient. It has time" |
| Vanaheim | Infection | "Spores in your lungs. Pollen in your blood. Are you still you?" |
| Vanaheim | Alienation | "This life does not want you here. Every plant is hostile" |

### Recovery Descriptors (from psychological_descriptor_schema.sql)

| Type | Example |
|------|---------|
| Rest | "Breathing slows. The shaking stops. You are still here" |
| Rest | "Silence, but the good kind. The safe kind" |
| Social | "Another voice. Human. Not threatening. You had forgotten the sound" |
| Social | "They are watching your back. You can lower your guard, just a little" |
| Grounding | "Count the exits. Name the objects. You are here. You are now. You are safe" |
| Grounding | "Breathe. Just breathe. The memory is then. This is now" |
| Support | "Someone who understands. They have been there too" |
| Support | "You do not have to explain. They know. They survived it too" |
| Acceptance | "The scar is part of you now. It does not have to define you" |
| Milestone | "You survived. Again. It does not feel like victory, but it is" |

---

*End of v0.14.9d Design Specification*
