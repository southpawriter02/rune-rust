You are right; we are in the thick of Milestone 4.9: The Long Polish, which concludes at v0.3.24. My apologies for the premature sign-off.
Here is the comprehensive implementation plan for v0.3.17: The Architect (Debug Tools).
This milestone introduces in-game developer tools to accelerate testing and content validation. Instead of restarting the application or editing JSON files to test specific scenarios, developers (and players in "Cheat Mode") can execute commands directly at runtime to manipulate the game state.
To manage the distinction between the UI overlay and the command logic, this version is split into two sub-versions:
	•	v0.3.17a: The Overlay (Console UI) – The visual terminal overlay, input interception, and log buffer.
	•	v0.3.17b: The Toolbox (Cheat Commands) – The logic for god mode, teleportation, spawning, and state manipulation.

v0.3.17a: The Overlay (Console UI)
Goal: Implement a Quake-style debug console that overlays the current TUI screen when toggled (e.g., via ~ or F1). It must capture input independently of the main game loop and display a history of debug logs.
1. Architecture & Data Flow
The Interception Pipeline
	1	Input: TerminalInputHandler detects the toggle key (~).
	2	State Switch: DebugConsoleService toggles IsVisible.
	3	Render Interruption:
	◦	If IsVisible is true, the GameLoop pauses standard rendering.
	◦	DebugConsoleRenderer draws a panel over the bottom 30% (or overlay) of the screen.
	4	Command Capture: Input typed into the console is routed to DebugCommandService instead of the standard CommandParser.
2. Logic Decision Trees
A. Input Routing Logic Input: Key Press
	1	Is Key ~ (OemTilde)?
	◦	Toggle DebugConsole.IsVisible.
	◦	Re-render current screen.
	2	Is DebugConsole Visible?
	◦	Yes: Route input to DebugConsole.HandleInput().
	◦	No: Route input to standard GameLoop handler.
3. Deliverable Checklist
	•	Core:
	◦	[ ] Define IDebugConsoleService interface.
	•	Engine:
	◦	[ ] Implement DebugConsoleService (State: Visible, LogHistory, CommandHistory).
	•	Terminal:
	◦	[ ] Update TerminalInputHandler to intercept global hotkeys.
	◦	[ ] Implement DebugConsoleRenderer (Spectre.Console layout).
	◦	[ ] Integrate overlay rendering into TerminalGameLoop.
4. Code Implementation
A. Console Service File: RuneAndRust.Engine/Services/DebugConsoleService.cs
public class DebugConsoleService : IDebugConsoleService
{
    public bool IsVisible { get; private set; }
    public List<string> LogHistory { get; } = new();

    public void Toggle() => IsVisible = !IsVisible;

    public void WriteLog(string message)
    {
        LogHistory.Add($"[{DateTime.Now:HH:mm:ss}] {message}");
        if (LogHistory.Count > 50) LogHistory.RemoveAt(0);
    }
}
5. Testing Strategy
	•	Unit Tests:
	◦	Toggle_SwitchesVisibility: Assert true -> false -> true.
	◦	WriteLog_MaintainsBufferLimit: Add 60 items, assert count is 50.

v0.3.17b: The Toolbox (Cheat Commands)
Goal: Implement the specific cheat commands that bypass game rules. These commands must be robust enough to handle invalid inputs (e.g., teleporting to a non-existent room) without crashing the engine.
1. Architecture & Data Flow
The Cheat Pipeline
	1	Input: User types /heal or /tp room_01.
	2	Parsing: DebugCommandParser identifies the verb and arguments.
	3	Execution:
	◦	Resolve dependencies (e.g., Character, RoomRepository).
	◦	Bypass standard checks (e.g., ignore mana cost, ignore walls).
	◦	Directly mutate state.
	4	Feedback: Log result to DebugConsoleService.
2. Logic Decision Trees
A. Teleport Logic Input: /tp [Target]
	1	Validation: Does Target exist in RoomRepository?
	◦	No: Log Error "Room not found."
	◦	Yes:
	1	Set GameState.CurrentRoomId to Target.
	2	Force NavigationService to refresh.
	3	Log "Warped to [Target]."
B. Spawn Logic Input: /spawn [ItemId] [Count]
	1	Validation: Does ItemId exist in ItemRepository?
	◦	No: Log Error.
	◦	Yes: Call InventoryService.AddItem(ItemId, Count).
3. Deliverable Checklist
	•	Engine:
	◦	[ ] Implement DebugCommandParser.
	◦	[ ] Implement cheats:
	▪	/heal (Full HP/Stamina/AP, remove Stress/Conditions).
	▪	/god (Toggle damage immunity).
	▪	/tp <id> (Instant movement).
	▪	/spawn <id> <qty> (Item generation).
	▪	/reveal (Clear Fog of War).
	•	Core:
	◦	[ ] Add IsGodMode flag to GameState.
4. Code Implementation
A. Cheat Execution File: RuneAndRust.Engine/Services/DebugCommandParser.cs
public void Execute(string input)
{
    var parts = input.Split(' ');
    switch (parts.ToLower())
    {
        case "/heal":
            _state.CurrentCharacter.CurrentHP = _state.CurrentCharacter.MaxHP;
            _console.WriteLog("Character fully healed.");
            break;
        case "/god":
            _state.IsGodMode = !_state.IsGodMode;
            _console.WriteLog($"God Mode: {_state.IsGodMode}");
            break;
        // ...
    }
}
5. Logging Requirements
System
Event
Level
Message Template
Properties
Cheat
Execute
Warning
"[Cheat] Executed: {Command}"
Command
Cheat
Fail
Info
"[Cheat] Failed: {Reason}"
Reason
6. Testing Strategy
	•	Integration Tests:
	◦	Heal_RestoresStats: Damage character -> Run /heal -> Assert HP is Max.
	◦	GodMode_PreventsDamage: Toggle God Mode -> Inflict Damage -> Assert HP unchanged.

Draft Changelog (v0.3.17)
# v0.3.17 Changelog: The Architect
**Release Date:** 2026-03-08

## Summary
This release provides developer tools ("The Architect") to assist with testing and content validation. A toggleable debug console allows for runtime state manipulation, including teleportation, spawning items, and invincibility.

## New Features
*   **Debug Console:** Press `~` to toggle a developer overlay.
*   **Cheat Commands:**
    *   `/heal`: Restore all vitals and remove stress.
    *   `/tp [room_id]`: Instant travel to any location.
    *   `/spawn [item_id]`: Add items to inventory.
    *   `/god`: Toggle damage immunity.
    *   `/reveal`: Remove Fog of War from the current map.

## Technical Changes
*   Implemented `DebugConsoleService` and `DebugCommandParser`.
*   Added overlay rendering support to `TerminalGameLoop`.
Would you like to proceed to the detailed plan for v0.3.17a: The Console?
