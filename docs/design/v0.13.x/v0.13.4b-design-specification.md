# v0.13.4b Design Specification: Statistics Dashboard

**Version:** 0.13.4b
**Theme:** Statistics Dashboard
**Author:** Claude
**Created:** 2026-01-16
**Status:** Draft
**Prerequisites:** v0.13.4a Complete (Achievement Panel), v0.12.x Statistics Services Complete

---

## 1. Overview

### 1.1 Purpose

This document provides a comprehensive design specification for v0.13.4b, the Statistics Dashboard implementation. This part focuses on displaying comprehensive player statistics organized by category, with session vs all-time comparison, simple chart visualization, and playtime tracking displays.

### 1.2 Scope

**In Scope:**
- Statistics dashboard with comprehensive overview
- Category tabs (Combat, Exploration, Crafting, Misc)
- Session vs all-time stat comparison with delta indicators
- Simple ASCII bar chart for distribution/trends
- Session timer display
- Total playtime display
- CharacterView integration for playtime

**Out of Scope:**
- Achievement panel (v0.13.4a - completed)
- Leaderboard view (v0.13.4c)
- Dice history panel (v0.13.4d)
- New domain logic or statistics calculations (provided by v0.12.x services)

### 1.3 Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| UI Components | 4 | `StatisticsDashboard`, `CategoryTabs`, `StatComparisonView`, `SimpleChart` |
| Renderers | 1 | `PlaytimeRenderer` |
| DTOs | 2 | `StatisticDisplayDto`, `ChartDataPointDto` |
| Configuration | 1 | `StatisticsDashboardConfig` |
| Commands | 1 | `StatisticsCommand` |
| View Updates | 1 | `CharacterView` integration |
| Unit Tests | ~8 | Dashboard display, category switching, comparison, chart tests |

---

## 2. Dependencies

### 2.1 Required Services (from v0.12.x)

| Service | Location | Purpose |
|---------|----------|---------|
| `IStatisticsService` | `Application/Interfaces/IStatisticsService.cs` | Retrieve player statistics by category |
| `ISessionService` | `Application/Interfaces/ISessionService.cs` | Session tracking and playtime |
| `PlayerStatistics` | `Domain/Entities/PlayerStatistics.cs` | Player statistics data entity |
| `SessionStatistics` | `Domain/Entities/SessionStatistics.cs` | Current session statistics |
| `StatisticsCategory` | `Domain/Enums/StatisticsCategory.cs` | Statistics category enumeration |

### 2.2 Required UI Infrastructure (from v0.7.x-v0.8.x)

| Component | Location | Purpose |
|-----------|----------|---------|
| `ITerminalService` | `Presentation.Tui/Services/ITerminalService.cs` | Terminal output abstraction |
| `CharacterView` | `Presentation.Tui/Views/CharacterView.cs` | Integration point for playtime display |
| `MainMenuView` | `Presentation.Tui/Views/MainMenuView.cs` | Integration point for statistics command |

### 2.3 Related v0.13.4 Components

| Component | Version | Relationship |
|-----------|---------|--------------|
| `AchievementPanel` | v0.13.4a | Similar panel patterns, shared styling conventions |
| `ProgressBarRenderer` | v0.13.4a | Reusable for chart bar rendering |

---

## 3. Architecture Diagrams

### 3.1 Statistics Dashboard Layer Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          PRESENTATION LAYER                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    StatisticsDashboard (New)                         â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ + RenderStatistics(PlayerStatistics, SessionStatistics) : void       â”‚    â”‚
â”‚  â”‚ + FilterByCategory(StatisticsCategory?) : void                       â”‚    â”‚
â”‚  â”‚ + ShowSessionStats(SessionStatistics) : void                         â”‚    â”‚
â”‚  â”‚ + ShowAllTimeStats(PlayerStatistics) : void                          â”‚    â”‚
â”‚  â”‚ + SetPosition(int x, int y) : void                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                                   â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚         â–¼                â–¼                â–¼                  â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚CategoryTabs â”‚  â”‚StatCompare  â”‚  â”‚SimpleChart  â”‚  â”‚PlaytimeRend â”‚        â”‚
â”‚  â”‚   (New)     â”‚  â”‚View (New)   â”‚  â”‚  (New)      â”‚  â”‚erer (New)   â”‚        â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚  â”‚RenderTabs() â”‚  â”‚RenderCompar â”‚  â”‚RenderBar    â”‚  â”‚FormatSessionâ”‚        â”‚
â”‚  â”‚SelectTab()  â”‚  â”‚ison()      â”‚  â”‚Chart()      â”‚  â”‚Time()       â”‚        â”‚
â”‚  â”‚GetTabIcon() â”‚  â”‚FormatDelta()â”‚  â”‚RenderDistri â”‚  â”‚FormatTotal  â”‚        â”‚
â”‚  â”‚HighlightAct â”‚  â”‚GetDeltaCol  â”‚  â”‚bution()    â”‚  â”‚Playtime()   â”‚        â”‚
â”‚  â”‚ive()        â”‚  â”‚or()        â”‚  â”‚SetScale()   â”‚  â”‚GetPlaytime  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ShowPercent  â”‚  â”‚ShowLegend() â”‚  â”‚Color()      â”‚        â”‚
â”‚                   â”‚ageChange() â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    StatisticDisplayDto (New DTO)                     â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ + Name: string                                                       â”‚    â”‚
â”‚  â”‚ + SessionValue: int                                                  â”‚    â”‚
â”‚  â”‚ + AllTimeValue: int                                                  â”‚    â”‚
â”‚  â”‚ + Delta: int                                                         â”‚    â”‚
â”‚  â”‚ + IsPercentage: bool                                                 â”‚    â”‚
â”‚  â”‚ + Category: StatisticsCategory                                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    ChartDataPointDto (New DTO)                       â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ + Label: string                                                      â”‚    â”‚
â”‚  â”‚ + Value: int                                                         â”‚    â”‚
â”‚  â”‚ + Percentage: float                                                  â”‚    â”‚
â”‚  â”‚ + Color: ConsoleColor                                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    StatisticsDashboardConfig (New)                   â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ + PanelWidth: int (default 72)                                       â”‚    â”‚
â”‚  â”‚ + PanelHeight: int (default 40)                                      â”‚    â”‚
â”‚  â”‚ + ChartWidth: int (default 30)                                       â”‚    â”‚
â”‚  â”‚ + NameColumnWidth: int (default 24)                                  â”‚    â”‚
â”‚  â”‚ + ValueColumnWidth: int (default 12)                                 â”‚    â”‚
â”‚  â”‚ + PositiveChangeColor: ConsoleColor (Green)                          â”‚    â”‚
â”‚  â”‚ + NegativeChangeColor: ConsoleColor (Red)                            â”‚    â”‚
â”‚  â”‚ + NeutralChangeColor: ConsoleColor (Gray)                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          APPLICATION LAYER                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    IStatisticsService (existing v0.12.x)             â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ + GetPlayerStatistics(playerId) : PlayerStatistics                   â”‚    â”‚
â”‚  â”‚ + GetSessionStatistics(sessionId) : SessionStatistics                â”‚    â”‚
â”‚  â”‚ + GetStatisticsByCategory(cat) : IReadOnlyList<StatisticEntry>       â”‚    â”‚
â”‚  â”‚ + GetTotalPlaytime(playerId) : TimeSpan                              â”‚    â”‚
â”‚  â”‚ + GetCurrentSessionTime() : TimeSpan                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    ISessionService (existing v0.12.x)                â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ + GetCurrentSession() : GameSession                                  â”‚    â”‚
â”‚  â”‚ + GetSessionDuration() : TimeSpan                                    â”‚    â”‚
â”‚  â”‚ + GetTotalPlaytime() : TimeSpan                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            DOMAIN LAYER                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚   PlayerStatistics      â”‚      â”‚   SessionStatistics     â”‚               â”‚
â”‚  â”‚   (existing v0.12.x)    â”‚      â”‚   (existing v0.12.x)    â”‚               â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
â”‚  â”‚ + PlayerId: string      â”‚      â”‚ + SessionId: string     â”‚               â”‚
â”‚  â”‚ + TotalPlaytime: TimeSpanâ”‚     â”‚ + Duration: TimeSpan    â”‚               â”‚
â”‚  â”‚ + MonstersDefeated: int â”‚      â”‚ + MonstersDefeated: int â”‚               â”‚
â”‚  â”‚ + BossesDefeated: int   â”‚      â”‚ + BossesDefeated: int   â”‚               â”‚
â”‚  â”‚ + TotalDamageDealt: longâ”‚      â”‚ + TotalDamageDealt: longâ”‚               â”‚
â”‚  â”‚ + TotalDamageTaken: longâ”‚      â”‚ + TotalDamageTaken: longâ”‚               â”‚
â”‚  â”‚ + CriticalHits: int     â”‚      â”‚ + CriticalHits: int     â”‚               â”‚
â”‚  â”‚ + Deaths: int           â”‚      â”‚ + Deaths: int           â”‚               â”‚
â”‚  â”‚ + RoomsDiscovered: int  â”‚      â”‚ + RoomsDiscovered: int  â”‚               â”‚
â”‚  â”‚ + SecretsFound: int     â”‚      â”‚ + SecretsFound: int     â”‚               â”‚
â”‚  â”‚ + ItemsCrafted: int     â”‚      â”‚ + ItemsCrafted: int     â”‚               â”‚
â”‚  â”‚ + GoldEarned: long      â”‚      â”‚ + GoldEarned: long      â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚  â”‚   StatisticsCategory    â”‚                                                 â”‚
â”‚  â”‚   (existing v0.12.x)    â”‚                                                 â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                                 â”‚
â”‚  â”‚ + Combat                â”‚                                                 â”‚
â”‚  â”‚ + Exploration           â”‚                                                 â”‚
â”‚  â”‚ + Crafting              â”‚                                                 â”‚
â”‚  â”‚ + Misc                  â”‚                                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Statistics Dashboard Display Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STATISTICS DASHBOARD DISPLAY FLOW                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    User enters "statistics" or "stats" command
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   StatisticsCommand     â”‚
â”‚   Execute()             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ 1. Get player and session statistics
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    IStatisticsService / ISessionService                      â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚GetPlayerStatistics()  â”‚  â”‚GetSessionStatistics() â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚              â”‚                          â”‚                    â”‚
â”‚              â”‚ Returns all-time stats   â”‚ Returns session    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                          â”‚
               â”‚ 2. Map to display DTOs   â”‚
               â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    StatisticsDashboard                                       â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ RenderHeader()                                         â”‚  â”‚
â”‚  â”‚ - "STATISTICS"                                         â”‚  â”‚
â”‚  â”‚ - Session: 2h 15m | Total Playtime: 47h 32m           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ CategoryTabs.RenderTabs()                              â”‚  â”‚
â”‚  â”‚ [Combat] [Exploration] [Crafting] [Misc]              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â”‚ 3. Filter by active category      â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ FilterByCategory() then MapToDisplayDtos()             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                                               â”‚
â”‚              â”‚ 4. Render comparison view                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    StatComparisonView                                        â”‚
â”‚                                                              â”‚
â”‚  RenderComparison(sessionStats, allTimeStats)                â”‚
â”‚  - Column headers: Statistic, Session, All-Time, Change     â”‚
â”‚  - For each statistic:                                       â”‚
â”‚              â”‚                                               â”‚
â”‚              â–¼                                               â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ FormatStatisticRow()                                 â”‚  â”‚
â”‚    â”‚                                                      â”‚  â”‚
â”‚    â”‚ - Name column (left-aligned)                         â”‚  â”‚
â”‚    â”‚ - Session value (right-aligned)                      â”‚  â”‚
â”‚    â”‚ - All-time value (right-aligned)                     â”‚  â”‚
â”‚    â”‚ - Delta with color (FormatDelta, GetDeltaColor)      â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ 5. Render distribution chart (if applicable)
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    SimpleChart                                               â”‚
â”‚                                                              â”‚
â”‚  RenderBarChart(chartDataPoints)                             â”‚
â”‚  - For Combat: Damage type distribution                      â”‚
â”‚  - SetScale(min, max)                                        â”‚
â”‚  - FormatBar(value, maxValue, width)                        â”‚
â”‚              â”‚                                               â”‚
â”‚              â–¼                                               â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ Display format:                                      â”‚  â”‚
â”‚    â”‚ Physical [#############...........] 58%              â”‚  â”‚
â”‚    â”‚ Fire     [######..................] 22%              â”‚  â”‚
â”‚    â”‚ Ice      [####...................] 12%               â”‚  â”‚
â”‚    â”‚ Lightning [##....................] 8%                â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 Category Tab Selection Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CATEGORY TAB SELECTION FLOW                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    User Presses Category Tab Key (1-4)
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    StatisticsDashboard      â”‚
â”‚    HandleCategoryInput()    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ Determine selected category
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Key Mapping                                                 â”‚
â”‚                                                              â”‚
â”‚  Key 1 = Combat (StatisticsCategory.Combat)                 â”‚
â”‚  Key 2 = Exploration (StatisticsCategory.Exploration)       â”‚
â”‚  Key 3 = Crafting (StatisticsCategory.Crafting)             â”‚
â”‚  Key 4 = Misc (StatisticsCategory.Misc)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ Update active category
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CategoryTabs.SelectTab()   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ Update tab highlighting
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CategoryTabs.HighlightActive(category)                      â”‚
â”‚                                                              â”‚
â”‚  Active tab:   [Combat]    (brackets + highlight color)     â”‚
â”‚  Inactive tab:  Exploration (plain text)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ Filter statistics by category
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FilterByCategory(category) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ Re-render statistics view
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  StatComparisonView.RenderComparison(filtered)               â”‚
â”‚  (Shows only statistics for selected category)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 Playtime Display Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PLAYTIME DISPLAY FLOW                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Statistics Dashboard or CharacterView Renders
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Request Playtime Data      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ Get session and total playtime
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ISessionService                                           â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ GetSessionDuration()  â”‚  â”‚ GetTotalPlaytime()    â”‚       â”‚
â”‚  â”‚ â†’ TimeSpan            â”‚  â”‚ â†’ TimeSpan            â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚              â”‚                          â”‚                    â”‚
â”‚              â”‚ e.g., 2:15:30            â”‚ e.g., 47:32:15     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                          â”‚
               â”‚ Format for display       â”‚
               â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    PlaytimeRenderer                                          â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ FormatSessionTime(sessionDuration)                     â”‚  â”‚
â”‚  â”‚ - Format: "#h ##m" (e.g., "2h 15m")                   â”‚  â”‚
â”‚  â”‚ - Less than 1 hour: "##m" (e.g., "45m")               â”‚  â”‚
â”‚  â”‚ - Less than 1 minute: "<1m"                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ FormatTotalPlaytime(totalPlaytime)                     â”‚  â”‚
â”‚  â”‚ - Format: "##h ##m" (e.g., "47h 32m")                 â”‚  â”‚
â”‚  â”‚ - 100+ hours: "###h ##m" (e.g., "156h 20m")           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ GetPlaytimeColor(playtime)                             â”‚  â”‚
â”‚  â”‚ - Default: White                                       â”‚  â”‚
â”‚  â”‚ - 10+ hours: Green (milestone)                         â”‚  â”‚
â”‚  â”‚ - 50+ hours: Yellow (dedicated)                        â”‚  â”‚
â”‚  â”‚ - 100+ hours: Cyan (veteran)                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ Display formatted playtime
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Output: "Session: 2h 15m | Total: 47h 32m"                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Statistics Dashboard Component

### 4.1 StatisticsDashboard Class

**Purpose:** Displays the full statistics overview organized by category with session vs all-time comparison and playtime header.

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/UI/StatisticsDashboard.cs`

```csharp
using RuneAndRust.Application.DTOs;
using RuneAndRust.Application.Interfaces;
using RuneAndRust.Domain.Enums;
using RuneAndRust.Presentation.Tui.Renderers;
using RuneAndRust.Presentation.Tui.Services;
using RuneAndRust.Presentation.Tui.DTOs;
using RuneAndRust.Presentation.Tui.Configuration;
using Microsoft.Extensions.Logging;

namespace RuneAndRust.Presentation.Tui.UI;

/// <summary>
/// Displays the player's statistics organized by category with session and all-time comparison.
/// </summary>
/// <remarks>
/// Statistics are grouped into categories (Combat, Exploration, Crafting, Misc)
/// and displayed with session values, all-time values, and delta indicators.
/// Category tabs allow viewing specific statistic groups.
/// </remarks>
public class StatisticsDashboard
{
    private readonly CategoryTabs _categoryTabs;
    private readonly StatComparisonView _comparisonView;
    private readonly SimpleChart _chart;
    private readonly PlaytimeRenderer _playtimeRenderer;
    private readonly ITerminalService _terminalService;
    private readonly StatisticsDashboardConfig _config;
    private readonly ILogger<StatisticsDashboard> _logger;

    private StatisticsCategory _activeCategory;
    private IReadOnlyList<StatisticDisplayDto> _statistics = Array.Empty<StatisticDisplayDto>();
    private TimeSpan _sessionTime;
    private TimeSpan _totalPlaytime;
    private (int X, int Y) _panelPosition;

    /// <summary>
    /// Gets the currently active category filter.
    /// </summary>
    public StatisticsCategory ActiveCategory => _activeCategory;

    /// <summary>
    /// Creates a new instance of the StatisticsDashboard component.
    /// </summary>
    /// <param name="categoryTabs">The category tabs component.</param>
    /// <param name="comparisonView">The comparison view component.</param>
    /// <param name="chart">The chart component for distribution display.</param>
    /// <param name="playtimeRenderer">The playtime formatting renderer.</param>
    /// <param name="terminalService">The terminal output service.</param>
    /// <param name="config">Configuration for dashboard display settings.</param>
    /// <param name="logger">Logger for diagnostic output.</param>
    public StatisticsDashboard(
        CategoryTabs categoryTabs,
        StatComparisonView comparisonView,
        SimpleChart chart,
        PlaytimeRenderer playtimeRenderer,
        ITerminalService terminalService,
        StatisticsDashboardConfig config,
        ILogger<StatisticsDashboard> logger)
    {
        _categoryTabs = categoryTabs ?? throw new ArgumentNullException(nameof(categoryTabs));
        _comparisonView = comparisonView ?? throw new ArgumentNullException(nameof(comparisonView));
        _chart = chart ?? throw new ArgumentNullException(nameof(chart));
        _playtimeRenderer = playtimeRenderer ?? throw new ArgumentNullException(nameof(playtimeRenderer));
        _terminalService = terminalService ?? throw new ArgumentNullException(nameof(terminalService));
        _config = config ?? throw new ArgumentNullException(nameof(config));
        _logger = logger ?? throw new ArgumentNullException(nameof(logger));

        _activeCategory = StatisticsCategory.Combat;
    }

    /// <summary>
    /// Sets the dashboard position.
    /// </summary>
    /// <param name="x">The X coordinate.</param>
    /// <param name="y">The Y coordinate.</param>
    public void SetPosition(int x, int y)
    {
        _panelPosition = (x, y);
    }

    /// <summary>
    /// Renders all statistics in the dashboard.
    /// </summary>
    /// <param name="statistics">The statistic display data.</param>
    /// <param name="sessionTime">The current session duration.</param>
    /// <param name="totalPlaytime">The total playtime.</param>
    public void RenderStatistics(
        IEnumerable<StatisticDisplayDto> statistics,
        TimeSpan sessionTime,
        TimeSpan totalPlaytime)
    {
        _statistics = statistics.ToList();
        _sessionTime = sessionTime;
        _totalPlaytime = totalPlaytime;

        _logger.LogDebug(
            "Rendering statistics dashboard: {StatCount} statistics, Session: {Session}, Total: {Total}",
            _statistics.Count, sessionTime, totalPlaytime);

        // Clear panel area
        ClearPanel();

        // Render panel header
        RenderHeader();

        // Render playtime summary line
        RenderPlaytimeSummary();

        // Render category tabs
        _categoryTabs.RenderTabs(_panelPosition.X, _panelPosition.Y + 4, _activeCategory);

        // Filter by active category
        var filteredStatistics = FilterStatistics(_statistics);

        // Render comparison view
        _comparisonView.RenderComparison(
            filteredStatistics,
            _panelPosition.X,
            _panelPosition.Y + 7);

        // Render chart if applicable for category
        RenderCategoryChart(filteredStatistics);

        _logger.LogInformation(
            "Statistics dashboard rendered with {FilteredCount} statistics for {Category}",
            filteredStatistics.Count, _activeCategory);
    }

    /// <summary>
    /// Filters statistics by the specified category.
    /// </summary>
    /// <param name="category">The category to filter by.</param>
    public void FilterByCategory(StatisticsCategory category)
    {
        _activeCategory = category;
        _logger.LogDebug("Statistics filter changed to: {Category}", category);

        // Re-render with new category
        RenderStatistics(_statistics, _sessionTime, _totalPlaytime);
    }

    /// <summary>
    /// Shows session statistics in the dashboard.
    /// </summary>
    /// <param name="sessionStats">The session statistics to display.</param>
    public void ShowSessionStats(IEnumerable<StatisticDisplayDto> sessionStats)
    {
        var filteredStats = sessionStats
            .Where(s => s.Category == _activeCategory)
            .ToList();

        _comparisonView.RenderSessionColumn(
            filteredStats,
            _panelPosition.X + _config.NameColumnWidth + 2,
            _panelPosition.Y + 8);
    }

    /// <summary>
    /// Shows all-time statistics in the dashboard.
    /// </summary>
    /// <param name="allTimeStats">The all-time statistics to display.</param>
    public void ShowAllTimeStats(IEnumerable<StatisticDisplayDto> allTimeStats)
    {
        var filteredStats = allTimeStats
            .Where(s => s.Category == _activeCategory)
            .ToList();

        _comparisonView.RenderAllTimeColumn(
            filteredStats,
            _panelPosition.X + _config.NameColumnWidth + _config.ValueColumnWidth + 4,
            _panelPosition.Y + 8);
    }

    /// <summary>
    /// Handles category input from user key press.
    /// </summary>
    /// <param name="key">The pressed key (1-4).</param>
    public void HandleCategoryInput(int key)
    {
        var category = key switch
        {
            1 => StatisticsCategory.Combat,
            2 => StatisticsCategory.Exploration,
            3 => StatisticsCategory.Crafting,
            4 => StatisticsCategory.Misc,
            _ => _activeCategory
        };

        FilterByCategory(category);
    }

    private void ClearPanel()
    {
        for (int y = 0; y < _config.PanelHeight; y++)
        {
            _terminalService.WriteAt(
                _panelPosition.X,
                _panelPosition.Y + y,
                new string(' ', _config.PanelWidth));
        }
    }

    private void RenderHeader()
    {
        var headerLine = new string('=', _config.PanelWidth - 2);
        var title = "STATISTICS";
        var titlePadding = (_config.PanelWidth - title.Length - 2) / 2;

        _terminalService.WriteAt(_panelPosition.X, _panelPosition.Y, $"+{headerLine}+");
        _terminalService.WriteAt(
            _panelPosition.X,
            _panelPosition.Y + 1,
            $"|{new string(' ', titlePadding)}{title}{new string(' ', _config.PanelWidth - title.Length - titlePadding - 2)}|");
        _terminalService.WriteAt(_panelPosition.X, _panelPosition.Y + 2, $"+{headerLine}+");
    }

    private void RenderPlaytimeSummary()
    {
        var sessionFormatted = _playtimeRenderer.FormatSessionTime(_sessionTime);
        var totalFormatted = _playtimeRenderer.FormatTotalPlaytime(_totalPlaytime);
        var summaryText = $"  Session: {sessionFormatted} | Total Playtime: {totalFormatted}";
        var paddedSummary = summaryText.PadRight(_config.PanelWidth - 2);

        _terminalService.WriteAt(
            _panelPosition.X,
            _panelPosition.Y + 3,
            $"|{paddedSummary}|");
        _terminalService.WriteAt(
            _panelPosition.X,
            _panelPosition.Y + 4,
            $"+{new string('=', _config.PanelWidth - 2)}+");
    }

    private IReadOnlyList<StatisticDisplayDto> FilterStatistics(
        IReadOnlyList<StatisticDisplayDto> statistics)
    {
        return statistics
            .Where(s => s.Category == _activeCategory)
            .ToList();
    }

    private void RenderCategoryChart(IReadOnlyList<StatisticDisplayDto> statistics)
    {
        // Only render chart for Combat category (damage type distribution)
        if (_activeCategory != StatisticsCategory.Combat)
        {
            return;
        }

        var chartData = GetDamageTypeDistribution(statistics);
        if (chartData.Count > 0)
        {
            var chartY = _panelPosition.Y + 8 + statistics.Count + 2;
            _chart.RenderDistribution(chartData, _panelPosition.X + 2, chartY);
        }
    }

    private IReadOnlyList<ChartDataPointDto> GetDamageTypeDistribution(
        IReadOnlyList<StatisticDisplayDto> statistics)
    {
        // Extract damage type statistics for chart display
        var damageStats = statistics
            .Where(s => s.Name.Contains("Damage") && s.Name.Contains("Dealt"))
            .ToList();

        if (damageStats.Count == 0)
        {
            return Array.Empty<ChartDataPointDto>();
        }

        var total = damageStats.Sum(s => s.AllTimeValue);
        if (total == 0)
        {
            return Array.Empty<ChartDataPointDto>();
        }

        return damageStats.Select(s => new ChartDataPointDto
        {
            Label = s.Name.Replace(" Damage Dealt", ""),
            Value = s.AllTimeValue,
            Percentage = (float)s.AllTimeValue / total * 100f,
            Color = GetDamageTypeColor(s.Name)
        }).ToList();
    }

    private ConsoleColor GetDamageTypeColor(string damageType)
    {
        return damageType.ToLowerInvariant() switch
        {
            string s when s.Contains("physical") => ConsoleColor.White,
            string s when s.Contains("fire") => ConsoleColor.Red,
            string s when s.Contains("ice") => ConsoleColor.Cyan,
            string s when s.Contains("lightning") => ConsoleColor.Yellow,
            string s when s.Contains("poison") => ConsoleColor.Green,
            string s when s.Contains("shadow") => ConsoleColor.DarkMagenta,
            _ => ConsoleColor.Gray
        };
    }
}
```

### 4.2 Category Tab Mappings

**Purpose:** Provides category tab key mappings for switching between statistic categories.

The tab system uses the following key mappings:

| Key | Category | Description |
|-----|----------|-------------|
| 1 | Combat | Battle-related statistics |
| 2 | Exploration | Discovery and exploration stats |
| 3 | Crafting | Crafting and resource stats |
| 4 | Misc | Miscellaneous statistics |

### 4.3 Panel Header and Playtime Summary

The dashboard header displays:
- Title: "STATISTICS" centered
- Session Time: Current session duration (e.g., "2h 15m")
- Total Playtime: Accumulated playtime (e.g., "47h 32m")

```
+=====================================================================+
|                       STATISTICS                                     |
+=====================================================================+
|  Session: 2h 15m | Total Playtime: 47h 32m                          |
+=====================================================================+
```

---

## 5. Category Tabs Component

### 5.1 CategoryTabs Class

**Purpose:** Displays and manages the category filter tabs for switching between statistic views.

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/UI/CategoryTabs.cs`

```csharp
using RuneAndRust.Domain.Enums;
using RuneAndRust.Presentation.Tui.Services;
using RuneAndRust.Presentation.Tui.Configuration;
using Microsoft.Extensions.Logging;

namespace RuneAndRust.Presentation.Tui.UI;

/// <summary>
/// Displays category tabs for filtering statistics by category.
/// </summary>
/// <remarks>
/// Provides visual tab selection with highlighting for the active category.
/// Supports Combat, Exploration, Crafting, and Misc categories.
/// </remarks>
public class CategoryTabs
{
    private readonly ITerminalService _terminalService;
    private readonly StatisticsDashboardConfig _config;
    private readonly ILogger<CategoryTabs> _logger;

    private static readonly (string Name, StatisticsCategory Category, string Icon)[] TabDefinitions =
    {
        ("Combat", StatisticsCategory.Combat, "âš”"),
        ("Exploration", StatisticsCategory.Exploration, "ğŸ—º"),
        ("Crafting", StatisticsCategory.Crafting, "ğŸ”¨"),
        ("Misc", StatisticsCategory.Misc, "ğŸ“Š")
    };

    /// <summary>
    /// Creates a new instance of the CategoryTabs component.
    /// </summary>
    /// <param name="terminalService">The terminal output service.</param>
    /// <param name="config">Configuration for display settings.</param>
    /// <param name="logger">Logger for diagnostic output.</param>
    public CategoryTabs(
        ITerminalService terminalService,
        StatisticsDashboardConfig config,
        ILogger<CategoryTabs> logger)
    {
        _terminalService = terminalService ?? throw new ArgumentNullException(nameof(terminalService));
        _config = config ?? throw new ArgumentNullException(nameof(config));
        _logger = logger ?? throw new ArgumentNullException(nameof(logger));
    }

    /// <summary>
    /// Renders the category tabs at the specified position.
    /// </summary>
    /// <param name="x">The X coordinate.</param>
    /// <param name="y">The Y coordinate.</param>
    /// <param name="activeCategory">The currently active category.</param>
    public void RenderTabs(int x, int y, StatisticsCategory activeCategory)
    {
        var tabLine = "  ";
        foreach (var (name, category, _) in TabDefinitions)
        {
            var isActive = category == activeCategory;
            var tabText = isActive ? $"[{name}]" : $" {name} ";
            tabLine += tabText + " ";
        }

        var paddedTabs = tabLine.PadRight(_config.PanelWidth - 2);
        _terminalService.WriteAt(x, y, $"|{paddedTabs}|");
        _terminalService.WriteAt(x, y + 1, $"+{new string('=', _config.PanelWidth - 2)}+");

        _logger.LogDebug("Rendered category tabs with active: {ActiveCategory}", activeCategory);
    }

    /// <summary>
    /// Selects a category tab.
    /// </summary>
    /// <param name="category">The category to select.</param>
    public void SelectTab(StatisticsCategory category)
    {
        _logger.LogDebug("Tab selected: {Category}", category);
    }

    /// <summary>
    /// Gets the icon for a category.
    /// </summary>
    /// <param name="category">The category to get the icon for.</param>
    /// <returns>The category icon string.</returns>
    public string GetTabIcon(StatisticsCategory category)
    {
        return TabDefinitions.FirstOrDefault(t => t.Category == category).Icon ?? "ğŸ“Š";
    }

    /// <summary>
    /// Highlights the active tab visually.
    /// </summary>
    /// <param name="category">The category to highlight.</param>
    public void HighlightActive(StatisticsCategory category)
    {
        // Active tab is rendered with brackets and different color
        _logger.LogDebug("Highlighting active tab: {Category}", category);
    }
}
```

### 5.2 Tab Visual States

| State | Format | Description |
|-------|--------|-------------|
| Active | `[Combat]` | Brackets around name, highlighted |
| Inactive | ` Combat ` | Plain text, no brackets |

---

## 6. Stat Comparison View Component

### 6.1 StatComparisonView Class

**Purpose:** Displays the three-column comparison view showing statistic names, session values, all-time values, and change deltas.

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/UI/StatComparisonView.cs`

```csharp
using RuneAndRust.Presentation.Tui.DTOs;
using RuneAndRust.Presentation.Tui.Services;
using RuneAndRust.Presentation.Tui.Configuration;
using Microsoft.Extensions.Logging;

namespace RuneAndRust.Presentation.Tui.UI;

/// <summary>
/// Displays statistics in a three-column comparison format with session, all-time, and delta values.
/// </summary>
/// <remarks>
/// Formats statistics with proper alignment and colors positive/negative changes appropriately.
/// </remarks>
public class StatComparisonView
{
    private readonly ITerminalService _terminalService;
    private readonly StatisticsDashboardConfig _config;
    private readonly ILogger<StatComparisonView> _logger;

    /// <summary>
    /// Creates a new instance of the StatComparisonView component.
    /// </summary>
    /// <param name="terminalService">The terminal output service.</param>
    /// <param name="config">Configuration for display settings.</param>
    /// <param name="logger">Logger for diagnostic output.</param>
    public StatComparisonView(
        ITerminalService terminalService,
        StatisticsDashboardConfig config,
        ILogger<StatComparisonView> logger)
    {
        _terminalService = terminalService ?? throw new ArgumentNullException(nameof(terminalService));
        _config = config ?? throw new ArgumentNullException(nameof(config));
        _logger = logger ?? throw new ArgumentNullException(nameof(logger));
    }

    /// <summary>
    /// Renders the comparison view for the given statistics.
    /// </summary>
    /// <param name="statistics">The statistics to display.</param>
    /// <param name="x">The X coordinate.</param>
    /// <param name="y">The Y coordinate.</param>
    public void RenderComparison(
        IReadOnlyList<StatisticDisplayDto> statistics,
        int x,
        int y)
    {
        // Render category header
        if (statistics.Count > 0)
        {
            var categoryName = statistics[0].Category.ToString().ToUpperInvariant();
            var headerText = $"{categoryName} STATISTICS";
            _terminalService.WriteAt(x + 2, y, headerText);
            _terminalService.WriteAt(x + 2, y + 1, new string('-', headerText.Length));
        }

        // Render column headers
        var headerY = y + 3;
        RenderColumnHeaders(x + 2, headerY);
        _terminalService.WriteAt(x + 2, headerY + 1, new string('=', _config.PanelWidth - 6));

        // Render each statistic row
        var currentY = headerY + 2;
        foreach (var stat in statistics)
        {
            RenderStatisticRow(stat, x + 2, currentY);
            currentY++;
        }

        _logger.LogDebug("Rendered {Count} statistics in comparison view", statistics.Count);
    }

    /// <summary>
    /// Renders just the session column for the statistics.
    /// </summary>
    /// <param name="statistics">The statistics to display.</param>
    /// <param name="x">The X coordinate for the column.</param>
    /// <param name="y">The Y coordinate.</param>
    public void RenderSessionColumn(IReadOnlyList<StatisticDisplayDto> statistics, int x, int y)
    {
        var currentY = y;
        foreach (var stat in statistics)
        {
            var sessionValue = FormatValue(stat.SessionValue, stat.IsPercentage);
            _terminalService.WriteAt(x, currentY, sessionValue.PadLeft(_config.ValueColumnWidth));
            currentY++;
        }
    }

    /// <summary>
    /// Renders just the all-time column for the statistics.
    /// </summary>
    /// <param name="statistics">The statistics to display.</param>
    /// <param name="x">The X coordinate for the column.</param>
    /// <param name="y">The Y coordinate.</param>
    public void RenderAllTimeColumn(IReadOnlyList<StatisticDisplayDto> statistics, int x, int y)
    {
        var currentY = y;
        foreach (var stat in statistics)
        {
            var allTimeValue = FormatValue(stat.AllTimeValue, stat.IsPercentage);
            _terminalService.WriteAt(x, currentY, allTimeValue.PadLeft(_config.ValueColumnWidth));
            currentY++;
        }
    }

    /// <summary>
    /// Formats the delta value with appropriate prefix.
    /// </summary>
    /// <param name="sessionValue">The session value.</param>
    /// <param name="allTimeValue">The all-time value.</param>
    /// <returns>The formatted delta string.</returns>
    public string FormatDelta(int sessionValue, int allTimeValue)
    {
        var delta = sessionValue;

        if (delta == 0)
        {
            return "-";
        }

        var prefix = delta > 0 ? "+" : "";
        return $"{prefix}{delta:N0}";
    }

    /// <summary>
    /// Formats the delta for percentage values.
    /// </summary>
    /// <param name="sessionValue">The session percentage value (as int, e.g., 942 for 94.2%).</param>
    /// <param name="allTimeValue">The all-time percentage value.</param>
    /// <returns>The formatted percentage delta string.</returns>
    public string FormatPercentageDelta(int sessionValue, int allTimeValue)
    {
        var delta = (sessionValue - allTimeValue) / 10.0;

        if (Math.Abs(delta) < 0.1)
        {
            return "-";
        }

        var prefix = delta > 0 ? "+" : "";
        return $"{prefix}{delta:F1}%";
    }

    /// <summary>
    /// Gets the console color for a delta value.
    /// </summary>
    /// <param name="delta">The delta value.</param>
    /// <returns>The appropriate console color.</returns>
    public ConsoleColor GetDeltaColor(int delta)
    {
        return delta switch
        {
            > 0 => _config.PositiveChangeColor,
            < 0 => _config.NegativeChangeColor,
            _ => _config.NeutralChangeColor
        };
    }

    /// <summary>
    /// Shows percentage change with formatting.
    /// </summary>
    /// <param name="percentageChange">The percentage change value.</param>
    public void ShowPercentageChange(float percentageChange)
    {
        var prefix = percentageChange > 0 ? "+" : "";
        var formatted = $"{prefix}{percentageChange:F1}%";
        _logger.LogDebug("Percentage change: {Change}", formatted);
    }

    private void RenderColumnHeaders(int x, int y)
    {
        var nameHeader = "Statistic".PadRight(_config.NameColumnWidth);
        var sessionHeader = "Session".PadLeft(_config.ValueColumnWidth);
        var allTimeHeader = "All-Time".PadLeft(_config.ValueColumnWidth);
        var changeHeader = "Change".PadLeft(_config.ValueColumnWidth);

        var headerLine = $"{nameHeader}{sessionHeader}{allTimeHeader}{changeHeader}";
        _terminalService.WriteAt(x, y, headerLine);
    }

    private void RenderStatisticRow(StatisticDisplayDto stat, int x, int y)
    {
        var name = stat.Name.Length > _config.NameColumnWidth - 2
            ? stat.Name.Substring(0, _config.NameColumnWidth - 5) + "..."
            : stat.Name;

        var nameColumn = name.PadRight(_config.NameColumnWidth);
        var sessionColumn = FormatValue(stat.SessionValue, stat.IsPercentage).PadLeft(_config.ValueColumnWidth);
        var allTimeColumn = FormatValue(stat.AllTimeValue, stat.IsPercentage).PadLeft(_config.ValueColumnWidth);
        var changeColumn = stat.IsPercentage
            ? FormatPercentageDelta(stat.SessionValue, stat.AllTimeValue).PadLeft(_config.ValueColumnWidth)
            : FormatDelta(stat.SessionValue, stat.AllTimeValue).PadLeft(_config.ValueColumnWidth);

        var rowLine = $"{nameColumn}{sessionColumn}{allTimeColumn}{changeColumn}";
        _terminalService.WriteAt(x, y, rowLine);
    }

    private string FormatValue(int value, bool isPercentage)
    {
        if (isPercentage)
        {
            // Value is stored as int * 10 (e.g., 942 = 94.2%)
            return $"{value / 10.0:F1}%";
        }

        return value.ToString("N0");
    }
}
```

### 6.2 Delta Formatting Rules

| Scenario | Format | Color |
|----------|--------|-------|
| Positive change | `+47` | Green |
| Negative change | `-3` | Red |
| No change (0) | `-` | Gray |
| Percentage positive | `+2.5%` | Green |
| Percentage negative | `-1.2%` | Red |

### 6.3 Column Layout

```
Statistic              Session      All-Time      Change
================================================================
Monsters Defeated          47          1,284       +47
Bosses Defeated             2             15       +2
Total Damage Dealt     15,420        524,830   +15,420
Total Damage Taken      3,240        187,650    +3,240
Critical Hits              28            892       +28
Deaths                      1             23        +1
Highest Hit Damage        847          1,523        -
Combat Win Rate          94.2%          91.7%    +2.5%
```

---

## 7. Simple Chart Component

### 7.1 SimpleChart Class

**Purpose:** Renders ASCII bar charts for distribution visualization and trend display.

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/UI/SimpleChart.cs`

```csharp
using RuneAndRust.Presentation.Tui.DTOs;
using RuneAndRust.Presentation.Tui.Services;
using RuneAndRust.Presentation.Tui.Configuration;
using Microsoft.Extensions.Logging;

namespace RuneAndRust.Presentation.Tui.UI;

/// <summary>
/// Renders simple ASCII bar charts for distribution and trend visualization.
/// </summary>
/// <remarks>
/// Uses filled blocks (#) and empty blocks (.) to represent proportional values.
/// Supports labels, percentages, and optional legend display.
/// </remarks>
public class SimpleChart
{
    private readonly ITerminalService _terminalService;
    private readonly StatisticsDashboardConfig _config;
    private readonly ILogger<SimpleChart> _logger;

    private int _minValue;
    private int _maxValue;

    private const char FilledBlock = '#';
    private const char EmptyBlock = '.';

    /// <summary>
    /// Creates a new instance of the SimpleChart component.
    /// </summary>
    /// <param name="terminalService">The terminal output service.</param>
    /// <param name="config">Configuration for chart display settings.</param>
    /// <param name="logger">Logger for diagnostic output.</param>
    public SimpleChart(
        ITerminalService terminalService,
        StatisticsDashboardConfig config,
        ILogger<SimpleChart> logger)
    {
        _terminalService = terminalService ?? throw new ArgumentNullException(nameof(terminalService));
        _config = config ?? throw new ArgumentNullException(nameof(config));
        _logger = logger ?? throw new ArgumentNullException(nameof(logger));

        _minValue = 0;
        _maxValue = 100;
    }

    /// <summary>
    /// Sets the scale for the chart.
    /// </summary>
    /// <param name="min">The minimum value.</param>
    /// <param name="max">The maximum value.</param>
    public void SetScale(int min, int max)
    {
        _minValue = min;
        _maxValue = max;
        _logger.LogDebug("Chart scale set to {Min} - {Max}", min, max);
    }

    /// <summary>
    /// Renders a bar chart from the given data points.
    /// </summary>
    /// <param name="dataPoints">The data points to chart.</param>
    /// <param name="x">The X coordinate.</param>
    /// <param name="y">The Y coordinate.</param>
    public void RenderBarChart(IEnumerable<ChartDataPointDto> dataPoints, int x, int y)
    {
        var points = dataPoints.ToList();
        if (points.Count == 0)
        {
            return;
        }

        var maxValue = points.Max(p => p.Value);
        if (maxValue == 0)
        {
            maxValue = 1; // Prevent division by zero
        }

        var currentY = y;
        foreach (var point in points)
        {
            var bar = FormatBar(point.Value, maxValue, _config.ChartWidth);
            var percentageText = $"{point.Percentage:F0}%";
            var line = $"{point.Label.PadRight(10)} [{bar}] {percentageText}";
            _terminalService.WriteAt(x, currentY, line);
            currentY++;
        }

        _logger.LogDebug("Rendered bar chart with {Count} data points", points.Count);
    }

    /// <summary>
    /// Renders a distribution chart (wrapper for RenderBarChart with distribution-specific formatting).
    /// </summary>
    /// <param name="dataPoints">The data points representing the distribution.</param>
    /// <param name="x">The X coordinate.</param>
    /// <param name="y">The Y coordinate.</param>
    public void RenderDistribution(IReadOnlyList<ChartDataPointDto> dataPoints, int x, int y)
    {
        // Render header
        _terminalService.WriteAt(x, y, "DAMAGE TYPE DISTRIBUTION");

        // Render the bar chart
        RenderBarChart(dataPoints, x, y + 1);
    }

    /// <summary>
    /// Formats a bar for the given value and maximum.
    /// </summary>
    /// <param name="value">The value to represent.</param>
    /// <param name="maxValue">The maximum value for scaling.</param>
    /// <param name="width">The total width of the bar.</param>
    /// <returns>The formatted bar string.</returns>
    public string FormatBar(int value, int maxValue, int width)
    {
        if (maxValue == 0)
        {
            return new string(EmptyBlock, width);
        }

        var filledWidth = (int)Math.Round((double)value / maxValue * width);
        filledWidth = Math.Min(filledWidth, width);
        filledWidth = Math.Max(filledWidth, 0);

        var emptyWidth = width - filledWidth;

        return new string(FilledBlock, filledWidth) + new string(EmptyBlock, emptyWidth);
    }

    /// <summary>
    /// Shows or hides the legend.
    /// </summary>
    /// <param name="show">Whether to show the legend.</param>
    public void ShowLegend(bool show)
    {
        _logger.LogDebug("Legend visibility set to: {Show}", show);
    }
}
```

### 7.2 Chart Formatting

```
DAMAGE TYPE DISTRIBUTION
Physical [#############...........] 58%
Fire     [######..................] 22%
Ice      [####...................] 12%
Lightning [##....................] 8%
```

| Character | Meaning |
|-----------|---------|
| `#` | Filled proportion |
| `.` | Empty proportion |
| `[...]` | Bar container |

---

## 8. Playtime Renderer Component

### 8.1 PlaytimeRenderer Class

**Purpose:** Formats session and total playtime values for display using the `#h ##m` format.

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/Renderers/PlaytimeRenderer.cs`

```csharp
using Microsoft.Extensions.Logging;

namespace RuneAndRust.Presentation.Tui.Renderers;

/// <summary>
/// Renders playtime values in human-readable format.
/// </summary>
/// <remarks>
/// Uses the format "#h ##m" for hours and minutes display.
/// Provides color coding based on playtime milestones.
/// </remarks>
public class PlaytimeRenderer
{
    private readonly ILogger<PlaytimeRenderer> _logger;

    /// <summary>
    /// Creates a new instance of the PlaytimeRenderer.
    /// </summary>
    /// <param name="logger">Logger for diagnostic output.</param>
    public PlaytimeRenderer(ILogger<PlaytimeRenderer> logger)
    {
        _logger = logger ?? throw new ArgumentNullException(nameof(logger));
    }

    /// <summary>
    /// Formats the session time for display.
    /// </summary>
    /// <param name="sessionTime">The session duration.</param>
    /// <returns>The formatted session time string.</returns>
    public string FormatSessionTime(TimeSpan sessionTime)
    {
        return FormatTimeSpan(sessionTime);
    }

    /// <summary>
    /// Formats the total playtime for display.
    /// </summary>
    /// <param name="totalPlaytime">The total playtime duration.</param>
    /// <returns>The formatted total playtime string.</returns>
    public string FormatTotalPlaytime(TimeSpan totalPlaytime)
    {
        return FormatTimeSpan(totalPlaytime);
    }

    /// <summary>
    /// Gets the color for a playtime value based on milestones.
    /// </summary>
    /// <param name="playtime">The playtime duration.</param>
    /// <returns>The appropriate console color.</returns>
    public ConsoleColor GetPlaytimeColor(TimeSpan playtime)
    {
        var hours = playtime.TotalHours;

        return hours switch
        {
            >= 100 => ConsoleColor.Cyan,      // Veteran (100+ hours)
            >= 50 => ConsoleColor.Yellow,     // Dedicated (50+ hours)
            >= 10 => ConsoleColor.Green,      // Milestone (10+ hours)
            _ => ConsoleColor.White           // Default
        };
    }

    private string FormatTimeSpan(TimeSpan time)
    {
        var totalHours = (int)time.TotalHours;
        var minutes = time.Minutes;

        if (totalHours == 0 && minutes == 0)
        {
            return "<1m";
        }

        if (totalHours == 0)
        {
            return $"{minutes}m";
        }

        return $"{totalHours}h {minutes:D2}m";
    }
}
```

### 8.2 Playtime Formatting Rules

| Duration | Format | Example |
|----------|--------|---------|
| Less than 1 minute | `<1m` | `<1m` |
| Less than 1 hour | `##m` | `45m` |
| 1+ hours | `#h ##m` | `2h 15m` |
| 100+ hours | `###h ##m` | `156h 20m` |

### 8.3 Playtime Color Milestones

| Hours | Color | Milestone |
|-------|-------|-----------|
| 0-9 | White | Default |
| 10-49 | Green | Milestone |
| 50-99 | Yellow | Dedicated |
| 100+ | Cyan | Veteran |

---

## 9. Display DTOs

### 9.1 StatisticDisplayDto

**Purpose:** Data transfer object for displaying statistics in the comparison view.

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/DTOs/StatisticDisplayDto.cs`

```csharp
using RuneAndRust.Domain.Enums;

namespace RuneAndRust.Presentation.Tui.DTOs;

/// <summary>
/// Data transfer object for displaying a statistic with session and all-time values.
/// </summary>
public class StatisticDisplayDto
{
    /// <summary>
    /// Gets or sets the statistic name.
    /// </summary>
    public required string Name { get; set; }

    /// <summary>
    /// Gets or sets the session value.
    /// </summary>
    public int SessionValue { get; set; }

    /// <summary>
    /// Gets or sets the all-time value.
    /// </summary>
    public int AllTimeValue { get; set; }

    /// <summary>
    /// Gets the delta between session and all-time values.
    /// </summary>
    public int Delta => SessionValue;

    /// <summary>
    /// Gets or sets whether this statistic is a percentage.
    /// </summary>
    /// <remarks>
    /// When true, values are stored as int * 10 (e.g., 942 = 94.2%).
    /// </remarks>
    public bool IsPercentage { get; set; }

    /// <summary>
    /// Gets or sets the statistic category.
    /// </summary>
    public StatisticsCategory Category { get; set; }
}
```

### 9.2 ChartDataPointDto

**Purpose:** Data transfer object for chart data points.

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/DTOs/ChartDataPointDto.cs`

```csharp
namespace RuneAndRust.Presentation.Tui.DTOs;

/// <summary>
/// Data transfer object for a chart data point.
/// </summary>
public class ChartDataPointDto
{
    /// <summary>
    /// Gets or sets the label for this data point.
    /// </summary>
    public required string Label { get; set; }

    /// <summary>
    /// Gets or sets the value for this data point.
    /// </summary>
    public int Value { get; set; }

    /// <summary>
    /// Gets or sets the percentage this value represents.
    /// </summary>
    public float Percentage { get; set; }

    /// <summary>
    /// Gets or sets the display color for this data point.
    /// </summary>
    public ConsoleColor Color { get; set; }
}
```

---

## 10. Configuration

### 10.1 StatisticsDashboardConfig

**Purpose:** Configuration settings for the Statistics Dashboard display.

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/Configuration/StatisticsDashboardConfig.cs`

```csharp
namespace RuneAndRust.Presentation.Tui.Configuration;

/// <summary>
/// Configuration settings for the statistics dashboard display.
/// </summary>
public class StatisticsDashboardConfig
{
    /// <summary>
    /// Gets or sets the total width of the dashboard panel.
    /// </summary>
    public int PanelWidth { get; set; } = 72;

    /// <summary>
    /// Gets or sets the total height of the dashboard panel.
    /// </summary>
    public int PanelHeight { get; set; } = 40;

    /// <summary>
    /// Gets or sets the width of the chart bars.
    /// </summary>
    public int ChartWidth { get; set; } = 30;

    /// <summary>
    /// Gets or sets the width of the statistic name column.
    /// </summary>
    public int NameColumnWidth { get; set; } = 24;

    /// <summary>
    /// Gets or sets the width of the value columns.
    /// </summary>
    public int ValueColumnWidth { get; set; } = 12;

    /// <summary>
    /// Gets or sets the color for positive change values.
    /// </summary>
    public ConsoleColor PositiveChangeColor { get; set; } = ConsoleColor.Green;

    /// <summary>
    /// Gets or sets the color for negative change values.
    /// </summary>
    public ConsoleColor NegativeChangeColor { get; set; } = ConsoleColor.Red;

    /// <summary>
    /// Gets or sets the color for neutral/zero change values.
    /// </summary>
    public ConsoleColor NeutralChangeColor { get; set; } = ConsoleColor.Gray;

    /// <summary>
    /// Gets or sets the default chart bar character.
    /// </summary>
    public char ChartFilledChar { get; set; } = '#';

    /// <summary>
    /// Gets or sets the default empty bar character.
    /// </summary>
    public char ChartEmptyChar { get; set; } = '.';
}
```

---

## 11. Statistics Command

### 11.1 StatisticsCommand Class

**Purpose:** Command handler for displaying the statistics dashboard.

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/Commands/StatisticsCommand.cs`

```csharp
using RuneAndRust.Application.Interfaces;
using RuneAndRust.Presentation.Tui.UI;
using RuneAndRust.Presentation.Tui.DTOs;
using RuneAndRust.Domain.Enums;
using Microsoft.Extensions.Logging;

namespace RuneAndRust.Presentation.Tui.Commands;

/// <summary>
/// Command handler for displaying the statistics dashboard.
/// </summary>
public class StatisticsCommand : ICommand
{
    private readonly IStatisticsService _statisticsService;
    private readonly ISessionService _sessionService;
    private readonly StatisticsDashboard _dashboard;
    private readonly ILogger<StatisticsCommand> _logger;

    /// <summary>
    /// Gets the command name.
    /// </summary>
    public string Name => "statistics";

    /// <summary>
    /// Gets the command aliases.
    /// </summary>
    public IReadOnlyList<string> Aliases => new[] { "stats" };

    /// <summary>
    /// Gets the command description.
    /// </summary>
    public string Description => "View player statistics";

    /// <summary>
    /// Creates a new instance of the StatisticsCommand.
    /// </summary>
    /// <param name="statisticsService">The statistics service.</param>
    /// <param name="sessionService">The session service.</param>
    /// <param name="dashboard">The statistics dashboard component.</param>
    /// <param name="logger">Logger for diagnostic output.</param>
    public StatisticsCommand(
        IStatisticsService statisticsService,
        ISessionService sessionService,
        StatisticsDashboard dashboard,
        ILogger<StatisticsCommand> logger)
    {
        _statisticsService = statisticsService ?? throw new ArgumentNullException(nameof(statisticsService));
        _sessionService = sessionService ?? throw new ArgumentNullException(nameof(sessionService));
        _dashboard = dashboard ?? throw new ArgumentNullException(nameof(dashboard));
        _logger = logger ?? throw new ArgumentNullException(nameof(logger));
    }

    /// <summary>
    /// Executes the statistics command.
    /// </summary>
    /// <param name="args">The command arguments.</param>
    /// <param name="context">The command context.</param>
    public async Task ExecuteAsync(string[] args, CommandContext context)
    {
        _logger.LogInformation("Executing statistics command");

        // Get player and session data
        var playerStats = await _statisticsService.GetPlayerStatisticsAsync(context.PlayerId);
        var sessionStats = await _statisticsService.GetSessionStatisticsAsync(context.SessionId);
        var sessionTime = _sessionService.GetSessionDuration();
        var totalPlaytime = _sessionService.GetTotalPlaytime();

        // Map to display DTOs
        var displayStats = MapToDisplayDtos(playerStats, sessionStats);

        // Set dashboard position
        _dashboard.SetPosition(0, 0);

        // Render dashboard
        _dashboard.RenderStatistics(displayStats, sessionTime, totalPlaytime);

        _logger.LogInformation("Statistics dashboard displayed successfully");
    }

    private IEnumerable<StatisticDisplayDto> MapToDisplayDtos(
        PlayerStatistics playerStats,
        SessionStatistics sessionStats)
    {
        var dtos = new List<StatisticDisplayDto>();

        // Combat statistics
        dtos.AddRange(new[]
        {
            new StatisticDisplayDto
            {
                Name = "Monsters Defeated",
                SessionValue = sessionStats.MonstersDefeated,
                AllTimeValue = playerStats.MonstersDefeated,
                Category = StatisticsCategory.Combat
            },
            new StatisticDisplayDto
            {
                Name = "Bosses Defeated",
                SessionValue = sessionStats.BossesDefeated,
                AllTimeValue = playerStats.BossesDefeated,
                Category = StatisticsCategory.Combat
            },
            new StatisticDisplayDto
            {
                Name = "Total Damage Dealt",
                SessionValue = (int)sessionStats.TotalDamageDealt,
                AllTimeValue = (int)playerStats.TotalDamageDealt,
                Category = StatisticsCategory.Combat
            },
            new StatisticDisplayDto
            {
                Name = "Total Damage Taken",
                SessionValue = (int)sessionStats.TotalDamageTaken,
                AllTimeValue = (int)playerStats.TotalDamageTaken,
                Category = StatisticsCategory.Combat
            },
            new StatisticDisplayDto
            {
                Name = "Critical Hits",
                SessionValue = sessionStats.CriticalHits,
                AllTimeValue = playerStats.CriticalHits,
                Category = StatisticsCategory.Combat
            },
            new StatisticDisplayDto
            {
                Name = "Deaths",
                SessionValue = sessionStats.Deaths,
                AllTimeValue = playerStats.Deaths,
                Category = StatisticsCategory.Combat
            }
        });

        // Exploration statistics
        dtos.AddRange(new[]
        {
            new StatisticDisplayDto
            {
                Name = "Rooms Discovered",
                SessionValue = sessionStats.RoomsDiscovered,
                AllTimeValue = playerStats.RoomsDiscovered,
                Category = StatisticsCategory.Exploration
            },
            new StatisticDisplayDto
            {
                Name = "Secrets Found",
                SessionValue = sessionStats.SecretsFound,
                AllTimeValue = playerStats.SecretsFound,
                Category = StatisticsCategory.Exploration
            }
        });

        // Crafting statistics
        dtos.AddRange(new[]
        {
            new StatisticDisplayDto
            {
                Name = "Items Crafted",
                SessionValue = sessionStats.ItemsCrafted,
                AllTimeValue = playerStats.ItemsCrafted,
                Category = StatisticsCategory.Crafting
            }
        });

        // Misc statistics
        dtos.AddRange(new[]
        {
            new StatisticDisplayDto
            {
                Name = "Gold Earned",
                SessionValue = (int)sessionStats.GoldEarned,
                AllTimeValue = (int)playerStats.GoldEarned,
                Category = StatisticsCategory.Misc
            }
        });

        return dtos;
    }
}
```

---

## 12. CharacterView Integration

### 12.1 Playtime Display Integration

**Purpose:** Integrate playtime display into the existing CharacterView.

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/Views/CharacterView.cs` (modification)

```csharp
// Add to CharacterView class

private readonly PlaytimeRenderer _playtimeRenderer;
private readonly ISessionService _sessionService;

/// <summary>
/// Renders the playtime section in the character view.
/// </summary>
public void RenderPlaytimeSection(int x, int y)
{
    var sessionTime = _sessionService.GetSessionDuration();
    var totalPlaytime = _sessionService.GetTotalPlaytime();

    var sessionFormatted = _playtimeRenderer.FormatSessionTime(sessionTime);
    var totalFormatted = _playtimeRenderer.FormatTotalPlaytime(totalPlaytime);

    var playtimeText = $"Session: {sessionFormatted} | Total: {totalFormatted}";
    _terminalService.WriteAt(x, y, playtimeText);
}
```

### 12.2 Display Format

```
Session: 2h 15m | Total: 47h 32m
```

---

## 13. Category-Specific Statistics

### 13.1 Combat Statistics

| Statistic | Description |
|-----------|-------------|
| Monsters Defeated | Total monsters killed |
| Bosses Defeated | Boss enemies killed |
| Total Damage Dealt | Cumulative damage output |
| Total Damage Taken | Cumulative damage received |
| Critical Hits | Number of critical hits landed |
| Deaths | Number of player deaths |
| Highest Hit Damage | Maximum single hit damage |
| Combat Win Rate | Victory percentage |

### 13.2 Exploration Statistics

| Statistic | Description |
|-----------|-------------|
| Rooms Discovered | Unique rooms visited |
| Secrets Found | Hidden areas/items found |
| Treasure Chests | Chests opened |
| Traps Triggered | Traps activated |
| NPCs Talked To | Unique NPCs interacted with |
| Quests Completed | Quests finished |
| Distance Traveled | Total movement distance |

### 13.3 Crafting Statistics

| Statistic | Description |
|-----------|-------------|
| Items Crafted | Total items created |
| Resources Gathered | Raw materials collected |
| Recipes Discovered | Unique recipes learned |
| Rare Crafts | Rare quality items made |
| Epic Crafts | Epic quality items made |
| Legendary Crafts | Legendary items made |
| Crafting Failures | Failed craft attempts |

### 13.4 Misc Statistics

| Statistic | Description |
|-----------|-------------|
| Gold Earned | Total gold acquired |
| Items Sold | Items sold to vendors |
| Potions Used | Consumables consumed |
| Skills Used | Ability activations |
| Saves Loaded | Save game loads |

---

## 14. User-Facing Display Examples

### 14.1 Full Statistics Dashboard

```
+=====================================================================+
|                       STATISTICS                                     |
+=====================================================================+
|  Session: 2h 15m | Total Playtime: 47h 32m                          |
+=====================================================================+
|  [Combat] [Exploration] [Crafting] [Misc]                           |
+=====================================================================+
|                                                                      |
|  COMBAT STATISTICS                                                   |
|  -----------------                                                   |
|                                                                      |
|  Statistic              Session      All-Time      Change            |
|  ================================================================== |
|  Monsters Defeated          47          1,284       +47              |
|  Bosses Defeated             2             15       +2               |
|  Total Damage Dealt     15,420        524,830   +15,420              |
|  Total Damage Taken      3,240        187,650    +3,240              |
|  Critical Hits              28            892       +28              |
|  Deaths                      1             23        +1              |
|  Highest Hit Damage        847          1,523        -               |
|  Combat Win Rate          94.2%          91.7%    +2.5%              |
|                                                                      |
|  -------------------------------------------------------------------  |
|                                                                      |
|  DAMAGE TYPE DISTRIBUTION                                            |
|  Physical [#############...........] 58%                             |
|  Fire     [######..................] 22%                             |
|  Ice      [####...................] 12%                              |
|  Lightning [##....................] 8%                               |
|                                                                      |
+=====================================================================+
```

### 14.2 Exploration Tab

```
|  [Combat] [Exploration] [Crafting] [Misc]                           |
+=====================================================================+
|                                                                      |
|  EXPLORATION STATISTICS                                              |
|  ----------------------                                              |
|                                                                      |
|  Statistic              Session      All-Time      Change            |
|  ================================================================== |
|  Rooms Discovered           12            342       +12              |
|  Secrets Found               3             47        +3              |
|  Treasure Chests            8            156        +8              |
|  Traps Triggered             2             34        +2              |
|  NPCs Talked To              5             89        +5              |
|  Quests Completed            2             28        +2              |
|  Distance Traveled         847         24,530      +847              |
|                                                                      |
+=====================================================================+
```

### 14.3 Crafting Tab

```
|  [Combat] [Exploration] [Crafting] [Misc]                           |
+=====================================================================+
|                                                                      |
|  CRAFTING STATISTICS                                                 |
|  -------------------                                                 |
|                                                                      |
|  Statistic              Session      All-Time      Change            |
|  ================================================================== |
|  Items Crafted              12            245       +12              |
|  Resources Gathered         34            892       +34              |
|  Recipes Discovered          2             35        +2              |
|  Rare Crafts                 1             18        +1              |
|  Epic Crafts                 0              4        -               |
|  Legendary Crafts            0              1        -               |
|  Crafting Failures           3             42        +3              |
|                                                                      |
+=====================================================================+
```

### 14.4 CharacterView Playtime

```
Session: 2h 15m | Total: 47h 32m
```

---

## 15. Acceptance Criteria

### 15.1 Statistics Dashboard Display

- [ ] Statistics dashboard displays with proper header and borders
- [ ] Session time displays in `#h ##m` format
- [ ] Total playtime displays in `##h ##m` format
- [ ] Playtime color coding works based on milestones

### 15.2 Category Tabs

- [ ] All four category tabs display (Combat, Exploration, Crafting, Misc)
- [ ] Active tab shows with brackets `[Combat]`
- [ ] Inactive tabs show without brackets ` Exploration `
- [ ] Keys 1-4 switch between categories
- [ ] Tab switching updates the statistics display

### 15.3 Stat Comparison View

- [ ] Three-column layout displays correctly (Statistic, Session, All-Time, Change)
- [ ] Column headers align properly
- [ ] Session values display correctly
- [ ] All-time values display correctly
- [ ] Positive deltas show `+` prefix in green
- [ ] Zero deltas show `-` in gray
- [ ] Percentage values display with `%` suffix
- [ ] Large numbers use comma formatting

### 15.4 Simple Chart

- [ ] Bar chart renders with `#` and `.` characters
- [ ] Percentage labels display correctly
- [ ] Labels align properly
- [ ] Chart scales to maximum value
- [ ] Damage type distribution chart shows for Combat category

### 15.5 Playtime Renderer

- [ ] Session time under 1 minute shows `<1m`
- [ ] Session time under 1 hour shows `##m`
- [ ] Session time 1+ hours shows `#h ##m`
- [ ] Total playtime 100+ hours shows `###h ##m`
- [ ] Playtime colors match milestone thresholds

### 15.6 CharacterView Integration

- [ ] Playtime section displays in CharacterView
- [ ] Format matches `Session: #h ##m | Total: ##h ##m`

---

## 16. Unit Tests

### 16.1 Test Categories

| Test Category | Count | Description |
|--------------|-------|-------------|
| StatisticsDashboard Tests | 2 | Dashboard rendering and category filtering |
| CategoryTabs Tests | 2 | Tab rendering and selection |
| StatComparisonView Tests | 2 | Comparison formatting and delta calculations |
| SimpleChart Tests | 1 | Chart bar formatting |
| PlaytimeRenderer Tests | 1 | Time formatting |

### 16.2 Test Specifications

```csharp
// StatisticsDashboard Tests
[Fact]
public void RenderStatistics_WithValidData_DisplaysCorrectly()
{
    // Arrange: Create statistics DTOs
    // Act: Call RenderStatistics
    // Assert: Verify terminal output contains expected elements
}

[Fact]
public void FilterByCategory_SwitchesCategory_UpdatesDisplay()
{
    // Arrange: Set initial category
    // Act: Call FilterByCategory with new category
    // Assert: Verify active category changed and re-rendered
}

// CategoryTabs Tests
[Fact]
public void RenderTabs_WithActiveCategory_HighlightsCorrectTab()
{
    // Arrange: Set active category
    // Act: Call RenderTabs
    // Assert: Verify active tab has brackets
}

[Fact]
public void SelectTab_ChangesActiveCategory()
{
    // Arrange: Create tabs component
    // Act: Call SelectTab
    // Assert: Verify tab selection logged
}

// StatComparisonView Tests
[Fact]
public void FormatDelta_PositiveValue_ReturnsWithPlusPrefix()
{
    // Arrange: Create view
    // Act: Call FormatDelta with positive value
    // Assert: Returns "+47"
}

[Fact]
public void GetDeltaColor_PositiveValue_ReturnsGreen()
{
    // Arrange: Create view
    // Act: Call GetDeltaColor with positive value
    // Assert: Returns Green
}

// SimpleChart Tests
[Fact]
public void FormatBar_WithValue_ReturnsCorrectProportions()
{
    // Arrange: Create chart
    // Act: Call FormatBar with value 50, max 100, width 20
    // Assert: Returns "##########.........."
}

// PlaytimeRenderer Tests
[Fact]
public void FormatSessionTime_UnderOneHour_ReturnsMinutesOnly()
{
    // Arrange: Create renderer
    // Act: Call FormatSessionTime with 45 minutes
    // Assert: Returns "45m"
}
```

---

## 17. File Summary

### 17.1 New Files

| File | Type | Purpose |
|------|------|---------|
| `UI/StatisticsDashboard.cs` | UI Component | Main dashboard component |
| `UI/CategoryTabs.cs` | UI Component | Category tab navigation |
| `UI/StatComparisonView.cs` | UI Component | Three-column comparison view |
| `UI/SimpleChart.cs` | UI Component | ASCII bar chart rendering |
| `Renderers/PlaytimeRenderer.cs` | Renderer | Playtime formatting |
| `DTOs/StatisticDisplayDto.cs` | DTO | Statistic display data |
| `DTOs/ChartDataPointDto.cs` | DTO | Chart data point |
| `Configuration/StatisticsDashboardConfig.cs` | Config | Dashboard settings |
| `Commands/StatisticsCommand.cs` | Command | Statistics command handler |

### 17.2 Modified Files

| File | Type | Changes |
|------|------|---------|
| `Views/CharacterView.cs` | View | Add playtime display section |
| `Startup/ServiceRegistration.cs` | DI | Register new components |

---

## 18. Design Decisions

### 18.1 Confirmed Decisions (from scope breakdown)

| Decision | Value | Rationale |
|----------|-------|-----------|
| Categories | Combat, Exploration, Crafting, Misc | Four intuitive groupings |
| Comparison Format | Session / All-Time / Change | Clear three-column layout |
| Chart Type | ASCII bar chart | Simple terminal rendering |
| Playtime Format | `#h ##m` | Human-readable format |
| Delta Prefix | `+` for positive | Standard convention |
| No Change Display | `-` | Clear indication of zero |

### 18.2 Implementation Decisions

| Decision | Value | Rationale |
|----------|-------|-----------|
| Percentage Storage | int * 10 | Avoid floating point, store 94.2% as 942 |
| Chart Width | 30 characters | Fits panel width |
| Default Category | Combat | Most common statistics |
| Color for Positive | Green | Universal positive indicator |
| Color for Negative | Red | Universal warning color |

---

## 19. Changelog

| Version | Date | Changes |
|---------|------|---------|
| v0.13.4b-draft | 2026-01-16 | Initial design specification |

---

*This specification provides complete implementation details for v0.13.4b Statistics Dashboard. All features are derived from the v0.13.4-scope-breakdown.md and v0.13.x-scope-breakdown.md documents. No new features or functionality have been invented.*
