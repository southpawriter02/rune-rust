# v0.0.9 Monster Variety & Loot - Scope Breakdown

**Version:** 0.0.9
**Theme:** Monster Variety & Loot
**Prerequisites:** v0.0.8 Complete (Experience & Leveling)
**Total Estimated Tests:** ~65 new tests

---

## Executive Summary

The Monster Variety & Loot system transforms monsters from hardcoded entities into a fully data-driven system. Monsters are loaded from JSON definitions with configurable stats, abilities, behaviors, loot tables, and damage resistances. A currency system and loot drops create rewarding combat loops.

The work is divided into **four sub-phases**:

| Phase | Name | Focus | Est. Tests |
|-------|------|-------|------------|
| v0.0.9a | Monster Definitions | Data-driven monsters, MonsterDefinition entity, monster spawning | ~18 |
| v0.0.9b | Damage Types & Resistances | Damage type definitions, resistance/vulnerability system | ~15 |
| v0.0.9c | Monster Tiers & Traits | Tier system, monster traits/abilities, stat scaling | ~16 |
| v0.0.9d | Loot & Currency | Loot tables, currency system, loot drops, loot command | ~16 |

---

## Existing Infrastructure

### Already Implemented

| Feature | Location | Notes |
|---------|----------|-------|
| `Monster` entity | `Monster.cs` | Basic monster with Name, Health, Stats |
| `Monster.CreateGoblin()` | `Monster.cs` | Hardcoded factory method |
| `AIBehavior` enum | v0.0.6b | Aggressive, Defensive, Cowardly, Support, Chaotic |
| Damage type strings | v0.0.6d | Used in status effects (fire, ice, lightning, etc.) |
| `ExperienceValue` on Monster | v0.0.8a | XP awarded on defeat |

### Needs Implementation (v0.0.9)

| Feature | Phase | Notes |
|---------|-------|-------|
| MonsterDefinition config | v0.0.9a | JSON-driven monster templates |
| Monster spawning from definitions | v0.0.9a | Replace hardcoded factory methods |
| DamageTypeDefinition | v0.0.9b | Formalize damage types |
| Resistance/Vulnerability | v0.0.9b | Per-creature damage modifiers |
| TierDefinition | v0.0.9c | Monster difficulty tiers |
| Monster traits | v0.0.9c | Special abilities/behaviors |
| LootTable | v0.0.9d | Weighted drop configuration |
| CurrencyDefinition | v0.0.9d | Configurable currency system |
| Loot drops | v0.0.9d | Items/currency on monster defeat |

---

## Feature Analysis & Categorization

### From v0.0.9-index.md - Monster Types

| Feature | Complexity | Dependencies | Assigned Phase |
|---------|------------|--------------|----------------|
| MonsterDefinition entity | Medium | Configuration system | **v0.0.9a** |
| Monster stats from config | Medium | MonsterDefinition | **v0.0.9a** |
| Multiple monster types | Low | MonsterDefinition | **v0.0.9a** |
| Monster descriptions | Low | MonsterDefinition | **v0.0.9a** |
| Examine monster command | Low | MonsterDefinition | **v0.0.9a** |

### From v0.0.9-index.md - Damage Types

| Feature | Complexity | Dependencies | Assigned Phase |
|---------|------------|--------------|----------------|
| DamageTypeDefinition | Medium | Configuration | **v0.0.9b** |
| Resistance system | High | DamageType, Monster | **v0.0.9b** |
| Vulnerability system | Medium | DamageType, Monster | **v0.0.9b** |
| Combat damage type integration | Medium | CombatService | **v0.0.9b** |

### From v0.0.9-index.md - Monster Tiers

| Feature | Complexity | Dependencies | Assigned Phase |
|---------|------------|--------------|----------------|
| TierDefinition | Medium | Configuration | **v0.0.9c** |
| Stat multipliers | Medium | TierDefinition | **v0.0.9c** |
| Monster traits/abilities | High | MonsterDefinition | **v0.0.9c** |
| Tier-based XP/loot bonuses | Medium | TierDefinition | **v0.0.9c** |

### From v0.0.9-index.md - Loot & Currency

| Feature | Complexity | Dependencies | Assigned Phase |
|---------|------------|--------------|----------------|
| CurrencyDefinition | Medium | Configuration | **v0.0.9d** |
| Player currency tracking | Low | Player entity | **v0.0.9d** |
| LootTable | High | Items, Currency | **v0.0.9d** |
| Loot drops on defeat | Medium | CombatService | **v0.0.9d** |
| Loot command | Low | Room, Player | **v0.0.9d** |

---

## Phase Definitions

---

## v0.0.9a: Monster Definitions

[v0.0.9a Design Specification](v0.0.9a-design-specification.md)

### Overview

Replace hardcoded monster factory methods with a data-driven monster definition system. Monsters are loaded from JSON configuration with stats, descriptions, behaviors, and base XP values.

### Scope

**In Scope:**
- `MonsterDefinition` entity loaded from config
- `MonsterService` for spawning monsters from definitions
- `config/monsters.json` with default monster types
- Multiple monster types (Goblin, Skeleton, Orc, Spider, Slime)
- Monster descriptions and examine command
- Migration of existing Goblin to definition-based
- Update Room to spawn monsters from definitions

**Out of Scope:**
- Damage type resistances (v0.0.9b)
- Tier system (v0.0.9c)
- Monster traits/abilities (v0.0.9c)
- Loot tables (v0.0.9d)

### Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Domain Definitions | 1 | `MonsterDefinition` |
| Domain Services | 1 | `MonsterService` |
| Configuration | 1 | `monsters.json` |
| Commands | 1 | `ExamineCommand` (for monsters) |
| DTOs | 2 | `MonsterDefinitionDto`, `MonsterExamineDto` |
| Unit Tests | ~18 | |

### Data Model Changes

```
NEW: MonsterDefinition (Entity)
├── Id: string (e.g., "goblin", "skeleton")
├── Name: string
├── Description: string
├── ExamineText: string (detailed description)
├── BaseHealth: int
├── BaseAttack: int
├── BaseDefense: int
├── BaseExperienceValue: int
├── AIBehavior: AIBehavior (from v0.0.6b)
├── Tags: IReadOnlyList<string> (e.g., "undead", "beast")
└── SpawnWeight: int (for random spawning)

NEW: MonsterService
├── GetDefinition(id): MonsterDefinition?
├── GetAllDefinitions(): IReadOnlyList<MonsterDefinition>
├── SpawnMonster(definitionId): Monster
├── SpawnRandomMonster(): Monster
└── GetDefinitionsByTag(tag): IReadOnlyList<MonsterDefinition>

MODIFY: Monster (Entity)
├── ADD: DefinitionId: string (reference to definition)
└── REMOVE: CreateGoblin() factory method (replaced by service)

MODIFY: Room
└── UPDATE: Monster spawning to use MonsterService
```

### Default Monster Definitions

| Monster | HP | ATK | DEF | XP | Behavior | Tags |
|---------|----|----|-----|-----|----------|------|
| Goblin | 30 | 8 | 2 | 25 | Aggressive | humanoid |
| Skeleton | 25 | 10 | 1 | 30 | Aggressive | undead |
| Orc | 50 | 12 | 4 | 50 | Aggressive | humanoid |
| Giant Spider | 20 | 6 | 1 | 20 | Defensive | beast |
| Slime | 40 | 4 | 0 | 15 | Chaotic | ooze |

### User-Facing Changes

**Examine Command:**
```
> examine skeleton

=== Skeleton ===
An animated pile of bones held together by dark magic.
Its hollow eye sockets glow with an eerie light.

Health: 25/25
Behavior: Aggressive
Tags: undead
```

### Acceptance Criteria

- [x] Monsters loaded from JSON configuration
- [x] At least 5 default monster types defined
- [x] Monsters spawn correctly from definitions
- [x] Examine command shows monster details
- [x] Existing combat still works with new system
- [x] ~18 unit tests pass

---

## v0.0.9b: Damage Types & Resistances

[v0.0.9b Design Specification](v0.0.9b-design-specification.md)

### Overview

Formalize the damage type system and add resistance/vulnerability mechanics to creatures. Damage types affect how much damage is dealt based on target resistances.

### Scope

**In Scope:**
- `DamageTypeDefinition` entity
- `DamageType` property on weapons (from v0.0.7)
- `Resistances` dictionary on Monster (and Player)
- Resistance calculation in combat
- Vulnerability (negative resistance) support
- `config/damage-types.json` configuration
- Integration with v0.0.6 status effect damage types

**Out of Scope:**
- Monster tiers (v0.0.9c)
- Monster traits (v0.0.9c)
- Loot (v0.0.9d)

### Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Domain Definitions | 1 | `DamageTypeDefinition` |
| Domain Value Objects | 1 | `DamageResistances` |
| Domain Services | 1 | `DamageCalculationService` |
| Configuration | 1 | `damage-types.json` |
| Unit Tests | ~15 | |

### Data Model Changes

```
NEW: DamageTypeDefinition (Entity)
├── Id: string (e.g., "physical", "fire", "ice")
├── Name: string
├── Description: string
├── Color: string (for display)
└── Icon: string? (optional, for UI)

NEW: DamageResistances (Value Object)
├── Resistances: Dictionary<string, int> (damageTypeId → percentage)
├── GetResistance(damageTypeId): int (default 0)
├── GetMultiplier(damageTypeId): float (1.0 = normal, 0.5 = 50% resist)
└── IsVulnerable(damageTypeId): bool (negative resistance)

NEW: DamageCalculationService
├── CalculateDamage(baseDamage, damageType, targetResistances): int
└── GetDamageDescription(damageType, resistance): string

MODIFY: MonsterDefinition
└── ADD: BaseResistances: DamageResistances

MODIFY: Monster
└── ADD: Resistances: DamageResistances (from definition)

MODIFY: Player
└── ADD: Resistances: DamageResistances (from equipment/buffs)

MODIFY: Item (Weapon)
└── ADD: DamageType: string (default "physical")
```

### Default Damage Types

| Damage Type | Color | Description |
|-------------|-------|-------------|
| Physical | White | Standard weapon damage |
| Fire | Red | Burning, heat damage |
| Ice | Cyan | Freezing, cold damage |
| Lightning | Yellow | Electrical damage |
| Poison | Green | Toxic damage |
| Holy | Gold | Divine damage |
| Dark | Purple | Shadow/necrotic damage |

### Monster Resistance Examples

| Monster | Physical | Fire | Ice | Poison | Holy | Dark |
|---------|----------|------|-----|--------|------|------|
| Skeleton | 25% | -50% | 0% | 100% | -50% | 50% |
| Slime | 50% | -25% | -25% | 100% | 0% | 0% |
| Fire Elemental | 0% | 100% | -100% | 100% | 0% | 0% |

*Positive = resistance, Negative = vulnerability, 100% = immune*

### User-Facing Changes

**Combat with Resistances:**
```
> attack skeleton

You attack the Skeleton with your Fire Sword!
Attack Roll: [15] + 3 (Finesse) = 18 vs Defense 10
Hit! Rolling damage...
Damage Roll: 1d8 [6] + 2 (Might) = 8 fire damage
The Skeleton is vulnerable to fire! (1.5x damage)
The Skeleton takes 12 damage. (HP: 25 -> 13)
```

**Resistance Display:**
```
> examine fire_elemental

=== Fire Elemental ===
A living flame that crackles with intense heat.

Health: 45/45
Resistances:
  Fire: Immune
  Ice: Vulnerable (2x damage)
  Poison: Immune
```

### Acceptance Criteria

- [x] Damage types loaded from configuration
- [x] Monsters have resistance values
- [x] Resistance reduces damage (percentage-based)
- [x] Vulnerability increases damage
- [x] Immunity (100% resistance) blocks all damage of type
- [x] Combat output shows resistance/vulnerability effects
- [x] ~15 unit tests pass

---

## v0.0.9c: Monster Tiers & Traits

[v0.0.9c Design Specification](v0.0.9c-design-specification.md)

### Overview

Add a tier system for monster difficulty scaling and a trait system for special abilities. Tiers multiply base stats and rewards, while traits grant unique behaviors.

### Scope

**In Scope:**
- `TierDefinition` entity for difficulty tiers
- `MonsterTrait` entity for special abilities
- Tier-based stat multipliers
- Tier-based XP and loot bonuses
- Default tiers (Common, Named, Elite, Boss)
- Default traits (e.g., Regenerating, Flying, Venomous)
- Named monster generation (e.g., "Grok the Orc")
- `config/tiers.json` and `config/traits.json`

**Out of Scope:**
- Loot tables (v0.0.9d)
- Boss-specific mechanics (future)

### Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Domain Definitions | 2 | `TierDefinition`, `MonsterTrait` |
| Configuration | 2 | `tiers.json`, `traits.json` |
| Application Services | 1 | Update `MonsterService` |
| Unit Tests | ~16 | |

### Data Model Changes

```
NEW: TierDefinition (Entity)
├── Id: string (e.g., "common", "elite", "boss")
├── Name: string
├── NamePrefix: string? (e.g., null, "Elite", "Boss")
├── HealthMultiplier: float
├── AttackMultiplier: float
├── DefenseMultiplier: float
├── ExperienceMultiplier: float
├── LootMultiplier: float
├── Color: string (for display)
└── SpawnWeight: int (rarity)

NEW: MonsterTrait (Entity)
├── Id: string (e.g., "regenerating", "flying")
├── Name: string
├── Description: string
├── Effect: TraitEffect (enum or flags)
├── EffectValue: int?
└── Tags: IReadOnlyList<string>

NEW: TraitEffect (Enum)
├── None
├── Regeneration (heal per turn)
├── Flying (dodge bonus)
├── Venomous (apply poison on hit)
├── Armored (flat damage reduction)
├── Berserker (damage increases at low HP)
└── Summoner (can summon allies)

MODIFY: MonsterDefinition
├── ADD: PossibleTiers: IReadOnlyList<string>
├── ADD: PossibleTraits: IReadOnlyList<string>
└── ADD: NameGenerator: NameGeneratorConfig?

MODIFY: Monster
├── ADD: Tier: TierDefinition
├── ADD: Traits: IReadOnlyList<MonsterTrait>
├── ADD: DisplayName: string (includes tier prefix)
└── ADD: IsNamed: bool (for Named tier)
```

### Default Tiers

| Tier | HP Mult | ATK Mult | DEF Mult | XP Mult | Loot Mult | Color |
|------|---------|----------|----------|---------|-----------|-------|
| Common | 1.0x | 1.0x | 1.0x | 1.0x | 1.0x | White |
| Named | 1.5x | 1.3x | 1.2x | 2.0x | 2.0x | Yellow |
| Elite | 2.0x | 1.5x | 1.5x | 3.0x | 3.0x | Orange |
| Boss | 5.0x | 2.0x | 2.0x | 10.0x | 5.0x | Red |

### Default Traits

| Trait | Effect | Value | Description |
|-------|--------|-------|-------------|
| Regenerating | Heal per turn | 5 | Recovers health each turn |
| Flying | Dodge bonus | +3 | Harder to hit with melee |
| Venomous | Apply status | Poisoned | Attacks may poison |
| Armored | Damage reduction | 3 | Reduces all damage taken |
| Berserker | Damage bonus at low HP | +50% | Deals more damage when wounded |

### User-Facing Changes

**Tier Display:**
```
You enter the Dungeon Depths.
A dark chamber filled with ancient bones.

Enemies:
  • Elite Skeleton (undead) - HP: 50/50
  • Skeleton (undead) - HP: 25/25
  • Skeleton (undead) - HP: 25/25

Exits: north, south
```

**Named Monster:**
```
You enter the Throne Room.
A Named enemy blocks your path!

Enemies:
  • Grok the Orc (Named) - HP: 75/75
    Traits: Berserker, Armored

Exits: north
```

### Acceptance Criteria

- [x] Tiers loaded from configuration
- [x] Tier multipliers apply to monster stats
- [x] Tier multipliers apply to XP rewards
- [x] Traits loaded from configuration
- [x] Traits affect monster behavior/combat
- [x] Named monsters have generated names
- [x] Elite/Boss monsters display distinctly
- [x] ~16 unit tests pass

---

## v0.0.9d: Loot & Currency

[v0.0.9d Design Specification](v0.0.9d-design-specification.md)

### Overview

Implement a loot table system for monster drops and a configurable currency system. Players can collect gold/currency and items from defeated monsters.

### Scope

**In Scope:**
- `CurrencyDefinition` entity
- `LootTable` entity with weighted drops
- `LootDrop` value object
- Currency tracking on Player
- Loot drops on monster defeat
- Loot display after combat
- `loot` or `take` command to collect
- Room loot storage (dropped items persist)
- `config/currency.json` and loot tables in `monsters.json`
- Tier-based loot bonuses

**Out of Scope:**
- Shops/vendors (future version)
- Item crafting (future version)
- Rare/legendary item drops (future version)

### Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Domain Definitions | 2 | `CurrencyDefinition`, `LootTable` |
| Domain Value Objects | 2 | `LootDrop`, `CurrencyAmount` |
| Domain Services | 1 | `LootService` |
| Commands | 1 | `LootCommand` / `TakeCommand` |
| Configuration | 1 | `currency.json` (loot tables in monsters.json) |
| DTOs | 2 | `LootDropDto`, `CurrencyDto` |
| Unit Tests | ~16 | |

### Data Model Changes

```
NEW: CurrencyDefinition (Entity)
├── Id: string (e.g., "gold", "souls")
├── Name: string
├── PluralName: string
├── Symbol: string (e.g., "G", "⚜")
├── Color: string
└── SortOrder: int

NEW: LootTable (Entity)
├── Id: string
├── Entries: IReadOnlyList<LootEntry>
└── CurrencyDrops: IReadOnlyList<CurrencyDrop>

NEW: LootEntry (Value Object)
├── ItemId: string?
├── ItemDefinitionId: string? (for generated items)
├── Weight: int
├── MinQuantity: int
├── MaxQuantity: int
└── DropChance: float (0.0-1.0)

NEW: CurrencyDrop (Value Object)
├── CurrencyId: string
├── MinAmount: int
├── MaxAmount: int
└── DropChance: float

NEW: LootDrop (Value Object)
├── Items: IReadOnlyList<Item>
├── Currency: Dictionary<string, int>
└── IsEmpty: bool

NEW: LootService
├── GenerateLoot(monster): LootDrop
├── ApplyTierBonus(loot, tier): LootDrop
└── CollectLoot(player, room): LootDrop

MODIFY: MonsterDefinition
└── ADD: LootTableId: string?

MODIFY: Player
├── ADD: Currency: Dictionary<string, int>
├── ADD: AddCurrency(currencyId, amount): void
├── ADD: RemoveCurrency(currencyId, amount): bool
└── ADD: GetCurrency(currencyId): int

MODIFY: Room
├── ADD: DroppedLoot: List<Item>
└── ADD: DroppedCurrency: Dictionary<string, int>
```

### Default Currency

| Currency | Name | Symbol | Color |
|----------|------|--------|-------|
| gold | Gold | G | Yellow |

### Loot Table Example (in monsters.json)

```json
{
  "id": "orc",
  "name": "Orc",
  "lootTable": {
    "currencyDrops": [
      { "currencyId": "gold", "minAmount": 10, "maxAmount": 25, "dropChance": 1.0 }
    ],
    "entries": [
      { "itemId": "health_potion", "weight": 30, "dropChance": 0.25 },
      { "itemId": "iron_sword", "weight": 10, "dropChance": 0.10 },
      { "itemId": "orcish_helm", "weight": 5, "dropChance": 0.05 }
    ]
  }
}
```

### User-Facing Changes

**Combat Victory with Loot:**
```
The Orc is defeated!
You gained 50 XP!

Loot dropped:
  • 18 Gold
  • Health Potion

Use 'loot' or 'take' to collect.
```

**Loot Command:**
```
> loot

You collected:
  • 18 Gold
  • Health Potion

Your gold: 143
```

**Status with Currency:**
```
> status

=== Hero (Level 3 Warrior) ===
HP: 110/110
XP: 380/500 (76%)
Gold: 143
```

### Acceptance Criteria

- [x] Currency system loaded from configuration
- [x] Player tracks currency amounts
- [x] Monsters have loot tables
- [x] Loot generated on monster defeat
- [x] Tier bonuses apply to loot amounts
- [x] Loot command collects from room
- [x] Uncollected loot persists in room
- [x] ~16 unit tests pass

---

## Dependencies & Prerequisites

```
v0.0.6 (Enhanced Combat) - REQUIRED
    │
    ├── v0.0.6b: Monster AI ──────────────────────────┐
    │       (AIBehavior enum)                         │
    │                                                 │
    └── v0.0.6d: Status Effects ──────────────────────┤
            (Damage type strings)                     │
                                                      │
v0.0.7 (Equipment System) - REQUIRED                 │
    │                                                 │
    └── Weapons with damage properties ───────────────┤
                                                      │
v0.0.8 (Experience & Leveling) - REQUIRED            │
    │                                                 │
    └── v0.0.8a: Monster XP values ───────────────────┘
                                                      │
                                                      ▼
v0.0.9 (Monster Variety & Loot)
    │
    ├── v0.0.9a: Monster Definitions ─────────────────┐
    │       Dependencies: None (foundation)           │
    │                                                 │
    ├── v0.0.9b: Damage Types & Resistances ──────────┤
    │       Dependencies: v0.0.9a                     │
    │                                                 │
    ├── v0.0.9c: Monster Tiers & Traits ──────────────┤
    │       Dependencies: v0.0.9a                     │
    │                                                 │
    └── v0.0.9d: Loot & Currency ─────────────────────┘
            Dependencies: v0.0.9a, v0.0.9c (tier bonuses)
```

**Note:** v0.0.9b and v0.0.9c can be developed in parallel after v0.0.9a is complete.

---

## Estimated Effort Summary

| Phase | New Files | Modified Files | Est. Tests | Complexity |
|-------|-----------|----------------|------------|------------|
| v0.0.9a | ~5 | ~4 | ~18 | Medium |
| v0.0.9b | ~4 | ~4 | ~15 | Medium |
| v0.0.9c | ~4 | ~3 | ~16 | High |
| v0.0.9d | ~6 | ~4 | ~16 | High |
| **Total** | **~19** | **~15** | **~65** | |

---

## Risk Assessment

| Risk | Impact | Probability | Mitigation |
|------|--------|-------------|------------|
| Monster balance issues | Medium | High | Start with conservative stats, iterate |
| Loot table complexity | Medium | Medium | Simple weighted system, avoid nested tables |
| Resistance system complexity | Medium | Medium | Percentage-based, cap at ±100% |
| Configuration file bloat | Low | Medium | Separate files per concern, good defaults |
| Breaking existing combat | High | Low | Comprehensive integration tests |
| Trait interaction bugs | Medium | Medium | Each trait isolated, tested individually |

---

## Design Decisions (Confirmed)

### Monster Definitions

| Decision | Value | Notes |
|----------|-------|-------|
| **Definition source** | JSON config | Data-driven, no recompilation |
| **ID format** | Lowercase snake_case | e.g., "goblin", "fire_elemental" |
| **Factory methods** | Removed | MonsterService.SpawnMonster() replaces |
| **Random spawning** | Weighted | SpawnWeight in definition |

### Damage Types

| Decision | Value | Notes |
|----------|-------|-------|
| **Default type** | "physical" | Weapons without DamageType use physical |
| **Resistance range** | -100% to +100% | Negative = vulnerability, 100% = immune |
| **Calculation** | Multiplicative | damage * (1 - resistance/100) |
| **Display** | Show significant | Only show if resistance/vulnerability |

### Tiers

| Decision | Value | Notes |
|----------|-------|-------|
| **Default tiers** | 4 | Common, Named, Elite, Boss |
| **Named monsters** | Generated names | "Grok the Orc" style |
| **Multipliers** | All multiplicative | HP, ATK, DEF, XP, Loot |
| **Boss spawning** | Manual/scripted | Not random (for now) |

### Loot System

| Decision | Value | Notes |
|----------|-------|-------|
| **Drop timing** | On defeat | Loot drops to room |
| **Collection** | Manual command | Player must use `loot`/`take` |
| **Persistence** | Room-based | Stays until collected or room reset |
| **Tier bonus** | Multiplicative | Applies to currency and drop chances |

### Currency

| Decision | Value | Notes |
|----------|-------|-------|
| **Default currency** | Gold | Single currency initially |
| **Multiple currencies** | Supported | Infrastructure ready for future |
| **Display** | In status | Shows current gold amount |

---

## Configuration Examples

### monsters.json

```json
{
  "monsters": [
    {
      "id": "goblin",
      "name": "Goblin",
      "description": "A small, green creature with sharp teeth.",
      "examineText": "This goblin clutches a rusty dagger and eyes you with malicious intent.",
      "baseHealth": 30,
      "baseAttack": 8,
      "baseDefense": 2,
      "baseExperienceValue": 25,
      "aiBehavior": "Aggressive",
      "tags": ["humanoid"],
      "spawnWeight": 100,
      "possibleTiers": ["common", "named"],
      "possibleTraits": ["berserker"],
      "baseResistances": {},
      "lootTable": {
        "currencyDrops": [
          { "currencyId": "gold", "minAmount": 5, "maxAmount": 15, "dropChance": 0.8 }
        ],
        "entries": [
          { "itemId": "health_potion", "weight": 20, "dropChance": 0.15 }
        ]
      }
    },
    {
      "id": "skeleton",
      "name": "Skeleton",
      "description": "An animated pile of bones.",
      "examineText": "Dark magic holds these bones together. Its hollow eyes glow faintly.",
      "baseHealth": 25,
      "baseAttack": 10,
      "baseDefense": 1,
      "baseExperienceValue": 30,
      "aiBehavior": "Aggressive",
      "tags": ["undead"],
      "spawnWeight": 80,
      "possibleTiers": ["common", "named", "elite"],
      "possibleTraits": [],
      "baseResistances": {
        "physical": 25,
        "fire": -50,
        "poison": 100,
        "holy": -50,
        "dark": 50
      },
      "lootTable": {
        "currencyDrops": [
          { "currencyId": "gold", "minAmount": 8, "maxAmount": 20, "dropChance": 0.9 }
        ],
        "entries": [
          { "itemId": "bone_dust", "weight": 50, "dropChance": 0.3 }
        ]
      }
    }
  ]
}
```

### damage-types.json

```json
{
  "damageTypes": [
    { "id": "physical", "name": "Physical", "description": "Standard weapon damage", "color": "white" },
    { "id": "fire", "name": "Fire", "description": "Burning heat damage", "color": "red" },
    { "id": "ice", "name": "Ice", "description": "Freezing cold damage", "color": "cyan" },
    { "id": "lightning", "name": "Lightning", "description": "Electrical damage", "color": "yellow" },
    { "id": "poison", "name": "Poison", "description": "Toxic damage", "color": "green" },
    { "id": "holy", "name": "Holy", "description": "Divine radiant damage", "color": "gold" },
    { "id": "dark", "name": "Dark", "description": "Shadow necrotic damage", "color": "purple" }
  ]
}
```

### tiers.json

```json
{
  "tiers": [
    {
      "id": "common",
      "name": "Common",
      "namePrefix": null,
      "healthMultiplier": 1.0,
      "attackMultiplier": 1.0,
      "defenseMultiplier": 1.0,
      "experienceMultiplier": 1.0,
      "lootMultiplier": 1.0,
      "color": "white",
      "spawnWeight": 70
    },
    {
      "id": "named",
      "name": "Named",
      "namePrefix": null,
      "healthMultiplier": 1.5,
      "attackMultiplier": 1.3,
      "defenseMultiplier": 1.2,
      "experienceMultiplier": 2.0,
      "lootMultiplier": 2.0,
      "color": "yellow",
      "spawnWeight": 20
    },
    {
      "id": "elite",
      "name": "Elite",
      "namePrefix": "Elite",
      "healthMultiplier": 2.0,
      "attackMultiplier": 1.5,
      "defenseMultiplier": 1.5,
      "experienceMultiplier": 3.0,
      "lootMultiplier": 3.0,
      "color": "orange",
      "spawnWeight": 8
    },
    {
      "id": "boss",
      "name": "Boss",
      "namePrefix": "Boss",
      "healthMultiplier": 5.0,
      "attackMultiplier": 2.0,
      "defenseMultiplier": 2.0,
      "experienceMultiplier": 10.0,
      "lootMultiplier": 5.0,
      "color": "red",
      "spawnWeight": 2
    }
  ]
}
```

---

## Files Summary

### Files to Create (New)

| Phase | File | Purpose |
|-------|------|---------|
| 9a | `MonsterDefinition.cs` | Monster template entity |
| 9a | `MonsterService.cs` | Monster spawning service |
| 9a | `config/monsters.json` | Monster definitions |
| 9b | `DamageTypeDefinition.cs` | Damage type entity |
| 9b | `DamageResistances.cs` | Resistance value object |
| 9b | `DamageCalculationService.cs` | Damage calculation with resistance |
| 9b | `config/damage-types.json` | Damage type definitions |
| 9c | `TierDefinition.cs` | Monster tier entity |
| 9c | `MonsterTrait.cs` | Monster trait entity |
| 9c | `config/tiers.json` | Tier definitions |
| 9c | `config/traits.json` | Trait definitions |
| 9d | `CurrencyDefinition.cs` | Currency entity |
| 9d | `LootTable.cs` | Loot table entity |
| 9d | `LootService.cs` | Loot generation service |
| 9d | `config/currency.json` | Currency definitions |

### Files to Modify

| Phase | File | Changes |
|-------|------|---------|
| 9a | `Monster.cs` | Add DefinitionId, remove factory methods |
| 9a | `Room.cs` | Use MonsterService for spawning |
| 9a | `IGameConfigurationProvider.cs` | Add monster definition methods |
| 9b | `Monster.cs` | Add Resistances property |
| 9b | `Player.cs` | Add Resistances property |
| 9b | `CombatService.cs` | Use DamageCalculationService |
| 9b | `Item.cs` | Add DamageType to weapons |
| 9c | `Monster.cs` | Add Tier, Traits, DisplayName |
| 9c | `MonsterService.cs` | Apply tiers, traits, name generation |
| 9d | `Player.cs` | Add Currency dictionary |
| 9d | `Room.cs` | Add DroppedLoot, DroppedCurrency |
| 9d | `GameSessionService.cs` | Handle loot command, drop loot on defeat |

---

## Next Steps

1. **Review & Approve** - Confirm scope breakdown
2. **v0.0.9a Design Spec** - Create monster definition specification
3. **Implement v0.0.9a** - Build data-driven monsters
4. **v0.0.9b & v0.0.9c Design Specs** - Can be created in parallel
5. **Implement v0.0.9b & v0.0.9c** - Can be done in parallel after v0.0.9a
6. **v0.0.9d Design Spec** - Create loot system specification
7. **Implement v0.0.9d** - Build loot and currency

---

*This scope breakdown provides a structured approach to implementing v0.0.9 Monster Variety & Loot. The version transforms the game from hardcoded content to a fully data-driven system, enabling easy content creation and customization.*
