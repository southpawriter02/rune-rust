# v0.13.1b Design Specification: Boss Status Display

**Version:** 0.13.1b
**Parent:** v0.13.1 (Boss & Monster UI)
**Prerequisites:** v0.13.1a Complete (Boss Health Bar), v0.10.4b Complete (Boss Encounter Runtime)
**Status:** Design Complete
**Estimated Unit Tests:** ~6

---

## Table of Contents

1. [Executive Summary](#1-executive-summary)
2. [Feature Overview](#2-feature-overview)
3. [Architecture Diagrams](#3-architecture-diagrams)
4. [Phase Indicator Component](#4-phase-indicator-component)
   - 4.1 [PhaseIndicator Class](#41-phaseindicator-class)
   - 4.2 [Phase Transition Effect](#42-phase-transition-effect)
   - 4.3 [Phase Description Display](#43-phase-description-display)
5. [Enrage Timer Component](#5-enrage-timer-component)
   - 5.1 [EnrageTimer Class](#51-enragetimer-class)
   - 5.2 [Enrage Warning Display](#52-enrage-warning-display)
   - 5.3 [Enrage Active Display](#53-enrage-active-display)
6. [Vulnerability Window Component](#6-vulnerability-window-component)
   - 6.1 [VulnerabilityWindow Class](#61-vulnerabilitywindow-class)
   - 6.2 [Window Open Display](#62-window-open-display)
   - 6.3 [Bonus Indicator](#63-bonus-indicator)
7. [Boss Status Renderer](#7-boss-status-renderer)
   - 7.1 [BossStatusRenderer Class](#71-bossstatusrenderer-class)
   - 7.2 [Phase Text Formatting](#72-phase-text-formatting)
   - 7.3 [Timer Formatting](#73-timer-formatting)
8. [Data Model Changes](#8-data-model-changes)
9. [Configuration File Schemas](#9-configuration-file-schemas)
10. [CombatView Integration](#10-combatview-integration)
11. [Logging Specifications](#11-logging-specifications)
12. [Unit Testing Requirements](#12-unit-testing-requirements)
13. [Use Cases](#13-use-cases)
14. [Deliverable Checklist](#14-deliverable-checklist)
15. [Acceptance Criteria](#15-acceptance-criteria)
16. [Dependencies](#16-dependencies)
17. [Future Considerations](#17-future-considerations)

---

## 1. Executive Summary

This version implements boss status display components including phase information, phase transition visual effects, enrage timer countdown, and vulnerability window indicator. These components provide critical tactical information about the boss's current state during encounters, enabling players to react to phase changes, prepare for enrage mechanics, and capitalize on vulnerability windows.

### Key Deliverables

| Category | Items |
|----------|-------|
| **UI Components** | `PhaseIndicator`, `EnrageTimer`, `VulnerabilityWindow` |
| **Renderers** | `BossStatusRenderer` |
| **DTOs** | `PhaseDisplayDto`, `PhaseTransitionDto`, `EnrageStatusDto`, `VulnerabilityDisplayDto` |
| **View Updates** | `CombatView` integration |
| **Configuration** | `boss-status-display.json` |
| **Tests** | ~6 unit tests |

### Architectural Significance

This version continues the **Combat UI Component Pattern** established in v0.13.0a:
- UI Components receive data from services via DTOs
- Renderers handle symbol/color mapping and terminal output
- Components integrate with existing `CombatView` via defined integration points
- Event-driven updates via BossPhaseChangedEvent, BossVulnerableEvent
- Configuration drives visual appearance (colors, symbols, timing)

---

## 2. Feature Overview

```
v0.13.1b Features
├── PhaseIndicator (UI Component)
│   ├── RenderPhase(PhaseDisplayDto)
│   ├── ShowTransitionEffect(PhaseTransitionDto)
│   ├── GetPhaseDescription(BossPhase)
│   └── Clear()
│
├── EnrageTimer (UI Component)
│   ├── RenderTimer(EnrageStatusDto)
│   ├── ShowEnrageWarning(int)
│   ├── ShowEnrageActive(EnrageStatusDto)
│   └── Clear()
│
├── VulnerabilityWindow (UI Component)
│   ├── RenderWindow(VulnerabilityDisplayDto)
│   ├── ShowWindowOpen(int)
│   ├── ShowWindowClosed()
│   └── Clear()
│
├── BossStatusRenderer (Renderer)
│   ├── FormatPhaseText(string, int)
│   ├── FormatEnrageTimer(int)
│   ├── FormatVulnerabilityWindow(int, float)
│   ├── GetWarningColor(int)
│   └── FormatStatModifiers(Dictionary)
│
└── CombatView Integration
    ├── Phase Change Event Subscription
    ├── Vulnerability Event Subscription
    └── Status Panel Placement
```

### Scope Verification

| Feature | Source | Included |
|---------|--------|----------|
| Current phase indicator with phase name | v0.13.1-scope-breakdown.md | Yes |
| Phase transition visual effects | v0.13.1-scope-breakdown.md | Yes |
| Enrage timer countdown display | v0.13.1-scope-breakdown.md | Yes |
| Vulnerability window indicator | v0.13.1-scope-breakdown.md | Yes |
| Phase-specific ability hints | v0.13.1-scope-breakdown.md | Yes |
| Boss health bar | v0.13.1-scope-breakdown.md | No (v0.13.1a) |
| Monster group display | v0.13.1-scope-breakdown.md | No (v0.13.1c) |

---

## 3. Architecture Diagrams

### 3.1 Layer Diagram

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          PRESENTATION LAYER                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────┐      ┌─────────────────────────┐               │
│  │     CombatView          │      │    PhaseIndicator       │               │
│  │     (existing)          │◄────▶│    (NEW)                │               │
│  ├─────────────────────────┤      ├─────────────────────────┤               │
│  │ - RenderCombatState()   │      │ - RenderPhase()         │               │
│  │ - HandleBossEncounter() │      │ - ShowTransitionEffect()│               │
│  │ - IntegrateComponents() │      │ - GetPhaseDescription() │               │
│  └─────────────────────────┘      └─────────────────────────┘               │
│                                                                              │
│  ┌─────────────────────────┐      ┌─────────────────────────┐               │
│  │    EnrageTimer          │      │  VulnerabilityWindow    │               │
│  │    (NEW)                │      │  (NEW)                  │               │
│  ├─────────────────────────┤      ├─────────────────────────┤               │
│  │ - RenderTimer()         │      │ - RenderWindow()        │               │
│  │ - ShowEnrageWarning()   │      │ - ShowWindowOpen()      │               │
│  │ - ShowEnrageActive()    │      │ - ShowWindowClosed()    │               │
│  └─────────────────────────┘      └─────────────────────────┘               │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                      BossStatusRenderer (NEW)                        │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │ - FormatPhaseText()      - FormatEnrageTimer()                      │    │
│  │ - FormatVulnerabilityWindow()    - GetWarningColor()                │    │
│  │ - FormatStatModifiers()  - GetPhaseColor()                          │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                          APPLICATION LAYER                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                    IBossMechanicsService (existing v0.10.4b)        │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │ + GetBossState(boss) : ActiveBossState?                             │    │
│  │ + GetCurrentPhase(boss) : BossPhase?                                │    │
│  │ + IsVulnerable(boss) : bool                                         │    │
│  │ + GetVulnerabilityMultiplier(boss) : float                          │    │
│  │ + GetAvailableAbilities(boss) : IReadOnlyList<string>               │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                    IEventBus (existing)                             │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │ + Subscribe<BossPhaseChangedEvent>(handler) : IDisposable           │    │
│  │ + Subscribe<BossVulnerableEvent>(handler) : IDisposable             │    │
│  │ + Subscribe<BossVulnerabilityEndedEvent>(handler) : IDisposable     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                            DOMAIN LAYER                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────┐      ┌─────────────────────────┐               │
│  │   ActiveBossState       │      │      BossPhase          │               │
│  │   (existing v0.10.4b)   │      │   (existing v0.10.4a)   │               │
│  ├─────────────────────────┤      ├─────────────────────────┤               │
│  │ + CurrentPhaseNumber:int│      │ + PhaseNumber: int      │               │
│  │ + VulnerableTurns: int  │      │ + Name: string          │               │
│  │ + EnrageStacks: int     │      │ + Behavior: BossBehavior│               │
│  │ + IsVulnerable: bool    │      │ + StatModifiers: Dict   │               │
│  └─────────────────────────┘      │ + TransitionText: str?  │               │
│                                    │ + AbilityIds: List      │               │
│  ┌─────────────────────────┐      └─────────────────────────┘               │
│  │    BossBehavior         │                                                 │
│  │   (existing v0.10.4a)   │                                                 │
│  ├─────────────────────────┤                                                 │
│  │ - Aggressive            │                                                 │
│  │ - Tactical              │                                                 │
│  │ - Defensive             │                                                 │
│  │ - Enraged               │                                                 │
│  │ - Summoner              │                                                 │
│  └─────────────────────────┘                                                 │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 Data Flow Diagram - Phase Transition

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    PHASE TRANSITION DATA FLOW                                │
└─────────────────────────────────────────────────────────────────────────────┘

    Boss Takes Damage → Health Crosses Phase Threshold
           │
           ▼
┌─────────────────────────┐
│  BossMechanicsService   │
│  OnBossDamaged()        │
└───────────┬─────────────┘
            │
            │ 1. Detect phase transition
            ▼
┌─────────────────────────┐
│  BossPhaseChangedEvent  │
│  published to IEventBus │
└───────────┬─────────────┘
            │
            │ 2. Event delivered to subscribers
            ▼
┌─────────────────────────┐
│    CombatView           │
│  OnPhaseChanged(event)  │
└───────────┬─────────────┘
            │
            │ 3. Create transition DTO
            ▼
┌─────────────────────────┐
│  PhaseTransitionDto     │
│  - OldPhaseNumber       │
│  - NewPhaseNumber       │
│  - PhaseName            │
│  - TransitionText       │
│  - BossName             │
└───────────┬─────────────┘
            │
            │ 4. Show transition effect
            ▼
┌─────────────────────────┐
│    PhaseIndicator       │
│  ShowTransitionEffect() │
└───────────┬─────────────┘
            │
            │ 5. Render transition box
            ▼
┌─────────────────────────┐
│  BossStatusRenderer     │
│  FormatTransitionBox()  │
└───────────┬─────────────┘
            │
            │ 6. Display for configured duration
            ▼
┌─────────────────────────┐
│   ITerminalService      │
│   WriteColoredAt(...)   │
└─────────────────────────┘
            │
            │ 7. Update phase indicator
            ▼
┌─────────────────────────┐
│    PhaseIndicator       │
│  RenderPhase(newPhase)  │
└─────────────────────────┘
```

### 3.3 Data Flow Diagram - Vulnerability Window

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    VULNERABILITY WINDOW DATA FLOW                            │
└─────────────────────────────────────────────────────────────────────────────┘

    SetVulnerable(boss, turns) Called
           │
           ▼
┌─────────────────────────┐
│  BossMechanicsService   │
│  SetVulnerable()        │
└───────────┬─────────────┘
            │
            │ 1. Publish vulnerability event
            ▼
┌─────────────────────────┐
│   BossVulnerableEvent   │
│   - MonsterId           │
│   - DurationTurns       │
└───────────┬─────────────┘
            │
            │ 2. Event delivered
            ▼
┌─────────────────────────┐
│     CombatView          │
│  OnBossVulnerable()     │
└───────────┬─────────────┘
            │
            │ 3. Create display DTO
            ▼
┌─────────────────────────┐
│ VulnerabilityDisplayDto │
│ - TurnsRemaining        │
│ - DamageMultiplier (1.5)│
│ - IsActive: true        │
└───────────┬─────────────┘
            │
            │ 4. Show window indicator
            ▼
┌─────────────────────────┐
│  VulnerabilityWindow    │
│  ShowWindowOpen(turns)  │
└───────────┬─────────────┘
            │
            │ 5. Format display
            ▼
┌─────────────────────────┐
│  BossStatusRenderer     │
│ FormatVulnerability...()│
└───────────┬─────────────┘
            │
            │ 6. Output to terminal
            ▼
┌─────────────────────────┐
│   ITerminalService      │
│   WriteColoredAt(...)   │
└─────────────────────────┘

    Each Turn: TickBoss() → VulnerableTurns--
           │
           ▼
    When VulnerableTurns = 0:
┌─────────────────────────┐
│ BossVulnerabilityEnded  │
│       Event             │
└───────────┬─────────────┘
            │
            ▼
┌─────────────────────────┐
│  VulnerabilityWindow    │
│  ShowWindowClosed()     │
└─────────────────────────┘
```

---

## 4. Phase Indicator Component

### 4.1 PhaseIndicator Class

**Purpose:** Displays the current boss phase with name, number, and phase-specific information including ability hints and behavior indicators.

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/UI/PhaseIndicator.cs`

```csharp
using RuneAndRust.Application.Interfaces;
using RuneAndRust.Domain.Definitions;
using RuneAndRust.Presentation.Tui.Renderers;
using RuneAndRust.Presentation.Tui.Services;
using RuneAndRust.Presentation.Tui.DTOs;

namespace RuneAndRust.Presentation.Tui.UI;

/// <summary>
/// Displays the current boss phase with name, number, and phase-specific hints.
/// </summary>
/// <remarks>
/// The phase indicator shows players what phase the boss is in and provides
/// ability hints to help them prepare for phase-specific mechanics.
/// </remarks>
public class PhaseIndicator
{
    private readonly BossStatusRenderer _renderer;
    private readonly ITerminalService _terminalService;
    private readonly BossStatusDisplayConfig _config;
    private readonly ILogger<PhaseIndicator> _logger;

    private PhaseDisplayDto? _currentPhase;
    private bool _isShowingTransition;

    /// <summary>
    /// Creates a new instance of the PhaseIndicator.
    /// </summary>
    /// <param name="renderer">The renderer for formatting phase elements.</param>
    /// <param name="terminalService">The terminal output service.</param>
    /// <param name="config">Configuration for display settings.</param>
    /// <param name="logger">Logger for diagnostic output.</param>
    public PhaseIndicator(
        BossStatusRenderer renderer,
        ITerminalService terminalService,
        BossStatusDisplayConfig config,
        ILogger<PhaseIndicator> logger)
    {
        _renderer = renderer ?? throw new ArgumentNullException(nameof(renderer));
        _terminalService = terminalService ?? throw new ArgumentNullException(nameof(terminalService));
        _config = config ?? throw new ArgumentNullException(nameof(config));
        _logger = logger ?? throw new ArgumentNullException(nameof(logger));
    }

    /// <summary>
    /// Renders the current phase indicator.
    /// </summary>
    /// <param name="phaseDto">The phase display data.</param>
    public void RenderPhase(PhaseDisplayDto phaseDto)
    {
        _currentPhase = phaseDto ?? throw new ArgumentNullException(nameof(phaseDto));

        _logger.LogDebug(
            "Rendering phase indicator: Phase {Number} - {Name}",
            phaseDto.PhaseNumber,
            phaseDto.PhaseName);

        // Render phase header
        var phaseText = _renderer.FormatPhaseText(phaseDto.PhaseName, phaseDto.PhaseNumber);
        var phaseColor = _renderer.GetPhaseColor(phaseDto.Behavior);

        _terminalService.WriteColoredAt(
            _config.PhaseIndicator.StartX,
            _config.PhaseIndicator.StartY,
            phaseText,
            phaseColor);

        // Render ability hints if available
        if (phaseDto.AbilityHints.Count > 0)
        {
            RenderAbilityHints(phaseDto.AbilityHints);
        }

        // Render stat modifier summary if behavior is Enraged
        if (phaseDto.Behavior == BossBehavior.Enraged && phaseDto.StatModifiers.Count > 0)
        {
            RenderStatModifiers(phaseDto.StatModifiers);
        }
    }

    /// <summary>
    /// Displays the phase transition visual effect.
    /// </summary>
    /// <param name="transitionDto">The transition display data.</param>
    public void ShowTransitionEffect(PhaseTransitionDto transitionDto)
    {
        if (_isShowingTransition)
        {
            _logger.LogDebug("Skipping transition - already showing");
            return;
        }

        _isShowingTransition = true;

        try
        {
            _logger.LogInformation(
                "Showing phase transition: Phase {Old} -> Phase {New} ({Name})",
                transitionDto.OldPhaseNumber,
                transitionDto.NewPhaseNumber,
                transitionDto.PhaseName);

            // Render transition box
            var transitionBox = _renderer.FormatTransitionBox(transitionDto);

            var boxX = _config.TransitionEffect.CenterX - (_config.TransitionEffect.BoxWidth / 2);
            var boxY = _config.TransitionEffect.StartY;

            foreach (var (line, index) in transitionBox.Select((l, i) => (l, i)))
            {
                _terminalService.WriteColoredAt(
                    boxX,
                    boxY + index,
                    line,
                    _config.Colors.TransitionBoxColor);
            }

            // Hold for configured duration
            _terminalService.FlashDelay(_config.TransitionEffect.DisplayDurationMs);

            // Clear transition box
            ClearTransitionBox(boxX, boxY, transitionBox.Count);
        }
        finally
        {
            _isShowingTransition = false;
        }
    }

    /// <summary>
    /// Gets phase description hints for the given boss phase.
    /// </summary>
    /// <param name="phase">The boss phase definition.</param>
    /// <returns>A list of description strings for the phase.</returns>
    public IReadOnlyList<string> GetPhaseDescription(BossPhase phase)
    {
        var descriptions = new List<string>();

        // Add behavior description
        descriptions.Add(GetBehaviorDescription(phase.Behavior));

        // Add stat modifier descriptions
        foreach (var modifier in phase.StatModifiers)
        {
            var changeText = modifier.Value > 1.0f
                ? $"+{(modifier.Value - 1.0f) * 100:F0}%"
                : $"{(modifier.Value - 1.0f) * 100:F0}%";
            descriptions.Add($"{FormatStatName(modifier.Key)} {changeText}");
        }

        // Add summon info if applicable
        if (phase.SummonConfig != null)
        {
            descriptions.Add($"Summons {phase.SummonConfig.MonsterId}");
        }

        return descriptions;
    }

    /// <summary>
    /// Clears the phase indicator display.
    /// </summary>
    public void Clear()
    {
        _currentPhase = null;

        var clearWidth = _config.PhaseIndicator.Width;
        var clearHeight = _config.PhaseIndicator.Height;
        var clearLine = new string(' ', clearWidth);

        for (var row = 0; row < clearHeight; row++)
        {
            _terminalService.WriteAt(
                _config.PhaseIndicator.StartX,
                _config.PhaseIndicator.StartY + row,
                clearLine);
        }

        _logger.LogDebug("Cleared phase indicator display");
    }

    #region Private Methods

    private void RenderAbilityHints(IReadOnlyList<string> hints)
    {
        var hintY = _config.PhaseIndicator.StartY + 1;

        foreach (var (hint, index) in hints.Take(_config.PhaseIndicator.MaxHints).Select((h, i) => (h, i)))
        {
            var prefix = index == hints.Count - 1 ? "+-- " : "|-- ";
            var hintText = $"{prefix}{hint}";

            _terminalService.WriteAt(
                _config.PhaseIndicator.StartX + 2,
                hintY + index,
                hintText);
        }
    }

    private void RenderStatModifiers(IReadOnlyDictionary<string, float> modifiers)
    {
        var modifierY = _config.PhaseIndicator.StartY + 1 + _config.PhaseIndicator.MaxHints;
        var modifierText = _renderer.FormatStatModifiers(modifiers);

        _terminalService.WriteColoredAt(
            _config.PhaseIndicator.StartX,
            modifierY,
            modifierText,
            _config.Colors.EnragedColor);
    }

    private void ClearTransitionBox(int x, int y, int lineCount)
    {
        var clearLine = new string(' ', _config.TransitionEffect.BoxWidth);
        for (var i = 0; i < lineCount; i++)
        {
            _terminalService.WriteAt(x, y + i, clearLine);
        }
    }

    private static string GetBehaviorDescription(BossBehavior behavior)
    {
        return behavior switch
        {
            BossBehavior.Aggressive => "Aggressive attacks",
            BossBehavior.Tactical => "Tactical positioning",
            BossBehavior.Defensive => "Defensive stance",
            BossBehavior.Enraged => "Enraged - all-out attacks!",
            BossBehavior.Summoner => "Summons minions",
            _ => "Unknown behavior"
        };
    }

    private static string FormatStatName(string statId)
    {
        return statId switch
        {
            "damage" => "Damage",
            "defense" => "Defense",
            "attackSpeed" => "Attack Speed",
            "moveSpeed" => "Move Speed",
            _ => statId
        };
    }

    #endregion
}
```

### 4.2 Phase Transition Effect

**Purpose:** Display a prominent visual notification when the boss transitions to a new phase.

The transition effect displays a centered box with:
- Phase transition header
- Boss name and new phase name
- Transition text (dramatic flavor text)

**Transition Box Layout:**

```
+=====================================================+
|  [!]  PHASE TRANSITION                              |
+=====================================================+
|                                                     |
|  SKELETON KING enters Phase 2: EMPOWERED            |
|                                                     |
|  "Rise, my minions!"                                |
|                                                     |
+=====================================================+
```

**Transition Timing:**
- Display duration: 2000ms (configurable)
- Box cleared after duration
- Phase indicator updated to show new phase

### 4.3 Phase Description Display

**Purpose:** Show phase-specific ability hints and behavior descriptions.

**Phase Display Layout:**

```
Phase: 2 - EMPOWERED
  |-- Increased damage output
  |-- Summons skeleton minions
  +-- Watch for AoE attacks
```

**Hint Sources:**
- BossBehavior enum description
- StatModifier percentage changes
- SummonConfig monster IDs
- AbilityIds translated to hints

---

## 5. Enrage Timer Component

### 5.1 EnrageTimer Class

**Purpose:** Displays enrage-related status including phase-based enrage indicators and stat modifier warnings.

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/UI/EnrageTimer.cs`

**Note:** Per v0.10.4b research, enrage is **phase-based** (triggered by health thresholds), not a countdown timer. The "enrage timer" UI component instead shows:
1. Warning when boss is nearing an enrage phase threshold
2. Active enrage status with stat modifier display

```csharp
using RuneAndRust.Domain.Definitions;
using RuneAndRust.Presentation.Tui.Renderers;
using RuneAndRust.Presentation.Tui.Services;
using RuneAndRust.Presentation.Tui.DTOs;

namespace RuneAndRust.Presentation.Tui.UI;

/// <summary>
/// Displays enrage status including warnings when approaching enrage phase
/// and active enrage indicator with stat modifier display.
/// </summary>
/// <remarks>
/// Enrage in v0.10.4b is phase-based (triggered by health thresholds),
/// not time-based. This component shows warnings when boss health is
/// approaching an enrage phase threshold and displays stat modifiers
/// when enrage is active.
/// </remarks>
public class EnrageTimer
{
    private readonly BossStatusRenderer _renderer;
    private readonly ITerminalService _terminalService;
    private readonly BossStatusDisplayConfig _config;
    private readonly ILogger<EnrageTimer> _logger;

    private EnrageStatusDto? _currentStatus;

    /// <summary>
    /// Creates a new instance of the EnrageTimer.
    /// </summary>
    /// <param name="renderer">The renderer for formatting enrage elements.</param>
    /// <param name="terminalService">The terminal output service.</param>
    /// <param name="config">Configuration for display settings.</param>
    /// <param name="logger">Logger for diagnostic output.</param>
    public EnrageTimer(
        BossStatusRenderer renderer,
        ITerminalService terminalService,
        BossStatusDisplayConfig config,
        ILogger<EnrageTimer> logger)
    {
        _renderer = renderer ?? throw new ArgumentNullException(nameof(renderer));
        _terminalService = terminalService ?? throw new ArgumentNullException(nameof(terminalService));
        _config = config ?? throw new ArgumentNullException(nameof(config));
        _logger = logger ?? throw new ArgumentNullException(nameof(logger));
    }

    /// <summary>
    /// Renders the enrage status display.
    /// </summary>
    /// <param name="statusDto">The enrage status data.</param>
    public void RenderTimer(EnrageStatusDto statusDto)
    {
        _currentStatus = statusDto ?? throw new ArgumentNullException(nameof(statusDto));

        _logger.LogDebug(
            "Rendering enrage status: IsEnraged={IsEnraged}, HealthToEnrage={Health}%",
            statusDto.IsEnraged,
            statusDto.HealthPercentToEnrage);

        if (statusDto.IsEnraged)
        {
            ShowEnrageActive(statusDto);
        }
        else if (statusDto.HealthPercentToEnrage.HasValue &&
                 statusDto.HealthPercentToEnrage.Value <= _config.EnrageTimer.WarningThreshold)
        {
            ShowEnrageWarning(statusDto.HealthPercentToEnrage.Value);
        }
        else
        {
            Clear();
        }
    }

    /// <summary>
    /// Displays a warning that the boss is approaching enrage threshold.
    /// </summary>
    /// <param name="healthPercentToEnrage">Health percentage until enrage triggers.</param>
    public void ShowEnrageWarning(int healthPercentToEnrage)
    {
        _logger.LogDebug("Showing enrage warning at {Percent}% to enrage", healthPercentToEnrage);

        var warningText = _renderer.FormatEnrageWarning(healthPercentToEnrage);
        var warningColor = _renderer.GetWarningColor(healthPercentToEnrage);

        _terminalService.WriteColoredAt(
            _config.EnrageTimer.StartX,
            _config.EnrageTimer.StartY,
            warningText,
            warningColor);
    }

    /// <summary>
    /// Displays the active enrage indicator with stat modifiers.
    /// </summary>
    /// <param name="statusDto">The enrage status data.</param>
    public void ShowEnrageActive(EnrageStatusDto statusDto)
    {
        _logger.LogInformation("Boss is ENRAGED");

        // Render enrage header
        var headerText = _renderer.FormatEnrageActive();

        _terminalService.WriteColoredAt(
            _config.EnrageTimer.StartX,
            _config.EnrageTimer.StartY,
            headerText,
            _config.Colors.EnragedColor);

        // Render stat modifiers
        if (statusDto.StatModifiers.Count > 0)
        {
            var modifierText = _renderer.FormatEnrageModifiers(statusDto.StatModifiers);
            _terminalService.WriteColoredAt(
                _config.EnrageTimer.StartX,
                _config.EnrageTimer.StartY + 1,
                modifierText,
                _config.Colors.EnragedColor);
        }
    }

    /// <summary>
    /// Clears the enrage status display.
    /// </summary>
    public void Clear()
    {
        _currentStatus = null;

        var clearWidth = _config.EnrageTimer.Width;
        var clearHeight = _config.EnrageTimer.Height;
        var clearLine = new string(' ', clearWidth);

        for (var row = 0; row < clearHeight; row++)
        {
            _terminalService.WriteAt(
                _config.EnrageTimer.StartX,
                _config.EnrageTimer.StartY + row,
                clearLine);
        }

        _logger.LogDebug("Cleared enrage timer display");
    }
}
```

### 5.2 Enrage Warning Display

**Purpose:** Alert players when boss health is approaching an enrage phase threshold.

**Warning Calculation:**
1. Get next enrage phase threshold from BossDefinition
2. Calculate health percentage remaining until threshold
3. Show warning when within configured threshold (default: 10%)

**Warning Display:**

```
[!] Enrage in: 5% health
```

**Warning Color Thresholds:**
- 10%+ to enrage: Yellow
- 5-10% to enrage: Orange
- <5% to enrage: Red (flashing)

### 5.3 Enrage Active Display

**Purpose:** Show prominent enrage indicator with stat modifier summary.

**Active Enrage Display:**

```
[!!!] ENRAGED - +50% damage, +25% attack speed
```

**Stat Modifier Formatting:**
- Positive modifiers (>1.0): "+X%" in red
- Negative modifiers (<1.0): "-X%" (for defense reduction)
- Displayed in order: damage, attackSpeed, defense

---

## 6. Vulnerability Window Component

### 6.1 VulnerabilityWindow Class

**Purpose:** Displays vulnerability window status including turns remaining and damage bonus indicator.

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/UI/VulnerabilityWindow.cs`

```csharp
using RuneAndRust.Presentation.Tui.Renderers;
using RuneAndRust.Presentation.Tui.Services;
using RuneAndRust.Presentation.Tui.DTOs;

namespace RuneAndRust.Presentation.Tui.UI;

/// <summary>
/// Displays vulnerability window status showing when the boss takes
/// increased damage and the remaining duration.
/// </summary>
/// <remarks>
/// The vulnerability window is triggered by SetVulnerable() and lasts
/// for a configured number of turns. During this time, the boss takes
/// 1.5x damage (50% bonus).
/// </remarks>
public class VulnerabilityWindow
{
    private readonly BossStatusRenderer _renderer;
    private readonly ITerminalService _terminalService;
    private readonly BossStatusDisplayConfig _config;
    private readonly ILogger<VulnerabilityWindow> _logger;

    private VulnerabilityDisplayDto? _currentStatus;

    /// <summary>
    /// Creates a new instance of the VulnerabilityWindow.
    /// </summary>
    /// <param name="renderer">The renderer for formatting vulnerability elements.</param>
    /// <param name="terminalService">The terminal output service.</param>
    /// <param name="config">Configuration for display settings.</param>
    /// <param name="logger">Logger for diagnostic output.</param>
    public VulnerabilityWindow(
        BossStatusRenderer renderer,
        ITerminalService terminalService,
        BossStatusDisplayConfig config,
        ILogger<VulnerabilityWindow> logger)
    {
        _renderer = renderer ?? throw new ArgumentNullException(nameof(renderer));
        _terminalService = terminalService ?? throw new ArgumentNullException(nameof(terminalService));
        _config = config ?? throw new ArgumentNullException(nameof(config));
        _logger = logger ?? throw new ArgumentNullException(nameof(logger));
    }

    /// <summary>
    /// Renders the vulnerability window status.
    /// </summary>
    /// <param name="displayDto">The vulnerability display data.</param>
    public void RenderWindow(VulnerabilityDisplayDto displayDto)
    {
        _currentStatus = displayDto ?? throw new ArgumentNullException(nameof(displayDto));

        _logger.LogDebug(
            "Rendering vulnerability window: IsActive={IsActive}, Turns={Turns}",
            displayDto.IsActive,
            displayDto.TurnsRemaining);

        if (displayDto.IsActive)
        {
            ShowWindowOpen(displayDto.TurnsRemaining);
        }
        else
        {
            Clear();
        }
    }

    /// <summary>
    /// Displays the vulnerability window open indicator.
    /// </summary>
    /// <param name="turnsRemaining">Number of turns remaining.</param>
    public void ShowWindowOpen(int turnsRemaining)
    {
        _logger.LogInformation(
            "Vulnerability window OPEN - {Turns} turns remaining",
            turnsRemaining);

        var windowText = _renderer.FormatVulnerabilityWindow(
            turnsRemaining,
            _config.VulnerabilityWindow.DamageMultiplier);

        _terminalService.WriteColoredAt(
            _config.VulnerabilityWindow.StartX,
            _config.VulnerabilityWindow.StartY,
            windowText,
            _config.Colors.VulnerableColor);

        // Add flashing effect for urgency
        if (turnsRemaining == 1)
        {
            FlashUrgency();
        }
    }

    /// <summary>
    /// Displays the vulnerability window closed notification.
    /// </summary>
    public void ShowWindowClosed()
    {
        _logger.LogInformation("Vulnerability window CLOSED");

        var closedText = _renderer.FormatWindowClosed();

        _terminalService.WriteColoredAt(
            _config.VulnerabilityWindow.StartX,
            _config.VulnerabilityWindow.StartY,
            closedText,
            _config.Colors.WindowClosedColor);

        // Brief display then clear
        _terminalService.FlashDelay(_config.VulnerabilityWindow.ClosedDisplayMs);
        Clear();
    }

    /// <summary>
    /// Clears the vulnerability window display.
    /// </summary>
    public void Clear()
    {
        _currentStatus = null;

        var clearWidth = _config.VulnerabilityWindow.Width;
        var clearLine = new string(' ', clearWidth);

        _terminalService.WriteAt(
            _config.VulnerabilityWindow.StartX,
            _config.VulnerabilityWindow.StartY,
            clearLine);

        _logger.LogDebug("Cleared vulnerability window display");
    }

    #region Private Methods

    private void FlashUrgency()
    {
        // Flash the vulnerability text to indicate urgency
        for (var i = 0; i < 2; i++)
        {
            _terminalService.FlashDelay(_config.VulnerabilityWindow.FlashIntervalMs);

            var urgentText = _renderer.FormatVulnerabilityUrgent();
            _terminalService.WriteColoredAt(
                _config.VulnerabilityWindow.StartX,
                _config.VulnerabilityWindow.StartY,
                urgentText,
                _config.Colors.UrgentColor);

            _terminalService.FlashDelay(_config.VulnerabilityWindow.FlashIntervalMs);
        }
    }

    #endregion
}
```

### 6.2 Window Open Display

**Purpose:** Show vulnerability window with turns remaining and damage bonus.

**Display Format:**

```
[!] VULNERABILITY WINDOW OPEN (2 turns) - Deal +50% damage!
```

**Turn-based Updates:**
- Window shows turns remaining
- Updated each turn via TickBoss() event
- Flashes when 1 turn remaining

### 6.3 Bonus Indicator

**Purpose:** Clearly communicate the damage bonus during vulnerability.

**Bonus Calculation:**
- Default multiplier: 1.5x (50% bonus)
- Displayed as "+50% damage" for clarity
- Color coded (bright yellow/cyan) to attract attention

---

## 7. Boss Status Renderer

### 7.1 BossStatusRenderer Class

**Purpose:** Handles all text formatting and color selection for boss status display elements.

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/Renderers/BossStatusRenderer.cs`

```csharp
using RuneAndRust.Domain.Definitions;
using RuneAndRust.Presentation.Tui.DTOs;

namespace RuneAndRust.Presentation.Tui.Renderers;

/// <summary>
/// Handles text formatting and color selection for boss status display elements.
/// </summary>
/// <remarks>
/// This renderer is stateless and handles all string formatting operations
/// for phase indicators, enrage timers, and vulnerability windows.
/// </remarks>
public class BossStatusRenderer
{
    private readonly BossStatusDisplayConfig _config;

    /// <summary>
    /// Creates a new instance of the BossStatusRenderer.
    /// </summary>
    /// <param name="config">Configuration for display settings.</param>
    public BossStatusRenderer(BossStatusDisplayConfig config)
    {
        _config = config ?? throw new ArgumentNullException(nameof(config));
    }

    #region Phase Formatting

    /// <summary>
    /// Formats the phase text display.
    /// </summary>
    /// <param name="phaseName">The phase display name.</param>
    /// <param name="phaseNumber">The phase number.</param>
    /// <returns>Formatted phase text.</returns>
    /// <example>
    /// FormatPhaseText("EMPOWERED", 2) returns: "Phase: 2 - EMPOWERED"
    /// </example>
    public string FormatPhaseText(string phaseName, int phaseNumber)
    {
        return $"Phase: {phaseNumber} - {phaseName.ToUpperInvariant()}";
    }

    /// <summary>
    /// Gets the color for a phase based on boss behavior.
    /// </summary>
    /// <param name="behavior">The boss behavior enum.</param>
    /// <returns>The console color for the phase display.</returns>
    public ConsoleColor GetPhaseColor(BossBehavior behavior)
    {
        return behavior switch
        {
            BossBehavior.Aggressive => _config.Colors.AggressiveColor,
            BossBehavior.Tactical => _config.Colors.TacticalColor,
            BossBehavior.Defensive => _config.Colors.DefensiveColor,
            BossBehavior.Enraged => _config.Colors.EnragedColor,
            BossBehavior.Summoner => _config.Colors.SummonerColor,
            _ => ConsoleColor.White
        };
    }

    /// <summary>
    /// Formats the phase transition effect box.
    /// </summary>
    /// <param name="transitionDto">The transition data.</param>
    /// <returns>A list of strings representing box lines.</returns>
    public IReadOnlyList<string> FormatTransitionBox(PhaseTransitionDto transitionDto)
    {
        var lines = new List<string>();
        var boxWidth = _config.TransitionEffect.BoxWidth;
        var border = new string('=', boxWidth - 2);

        // Top border
        lines.Add($"+{border}+");

        // Header
        var header = "  [!]  PHASE TRANSITION";
        lines.Add($"|{header.PadRight(boxWidth - 2)}|");

        // Separator
        lines.Add($"+{border}+");

        // Empty line
        lines.Add($"|{new string(' ', boxWidth - 2)}|");

        // Boss enters phase line
        var enterText = $"  {transitionDto.BossName} enters Phase {transitionDto.NewPhaseNumber}: {transitionDto.PhaseName}";
        lines.Add($"|{enterText.PadRight(boxWidth - 2)}|");

        // Empty line
        lines.Add($"|{new string(' ', boxWidth - 2)}|");

        // Transition text (if present)
        if (!string.IsNullOrEmpty(transitionDto.TransitionText))
        {
            var quoteText = $"  \"{transitionDto.TransitionText}\"";
            // Truncate if too long
            if (quoteText.Length > boxWidth - 4)
            {
                quoteText = quoteText.Substring(0, boxWidth - 7) + "...\"";
            }
            lines.Add($"|{quoteText.PadRight(boxWidth - 2)}|");
            lines.Add($"|{new string(' ', boxWidth - 2)}|");
        }

        // Bottom border
        lines.Add($"+{border}+");

        return lines;
    }

    #endregion

    #region Enrage Formatting

    /// <summary>
    /// Formats the enrage warning text.
    /// </summary>
    /// <param name="healthPercentToEnrage">Health percentage until enrage.</param>
    /// <returns>Formatted warning text.</returns>
    public string FormatEnrageWarning(int healthPercentToEnrage)
    {
        return $"[!] Enrage in: {healthPercentToEnrage}% health";
    }

    /// <summary>
    /// Formats the active enrage header.
    /// </summary>
    /// <returns>Formatted enrage active text.</returns>
    public string FormatEnrageActive()
    {
        return "[!!!] ENRAGED";
    }

    /// <summary>
    /// Formats enrage stat modifiers.
    /// </summary>
    /// <param name="modifiers">The stat modifiers dictionary.</param>
    /// <returns>Formatted modifier string.</returns>
    /// <example>
    /// FormatEnrageModifiers({damage: 1.5, attackSpeed: 1.25})
    /// returns: "+50% damage, +25% attack speed"
    /// </example>
    public string FormatEnrageModifiers(IReadOnlyDictionary<string, float> modifiers)
    {
        var parts = new List<string>();

        foreach (var (stat, multiplier) in modifiers)
        {
            var percentChange = (multiplier - 1.0f) * 100;
            var sign = percentChange >= 0 ? "+" : "";
            var statName = FormatStatName(stat);
            parts.Add($"{sign}{percentChange:F0}% {statName}");
        }

        return string.Join(", ", parts);
    }

    /// <summary>
    /// Gets the warning color based on proximity to enrage.
    /// </summary>
    /// <param name="healthPercentToEnrage">Health percentage until enrage.</param>
    /// <returns>The console color for the warning.</returns>
    public ConsoleColor GetWarningColor(int healthPercentToEnrage)
    {
        return healthPercentToEnrage switch
        {
            <= 5 => _config.Colors.CriticalWarningColor,
            <= 10 => _config.Colors.HighWarningColor,
            _ => _config.Colors.LowWarningColor
        };
    }

    #endregion

    #region Vulnerability Formatting

    /// <summary>
    /// Formats the vulnerability window display.
    /// </summary>
    /// <param name="turnsRemaining">Turns remaining in window.</param>
    /// <param name="damageMultiplier">The damage multiplier (e.g., 1.5).</param>
    /// <returns>Formatted vulnerability text.</returns>
    public string FormatVulnerabilityWindow(int turnsRemaining, float damageMultiplier)
    {
        var bonusPercent = (damageMultiplier - 1.0f) * 100;
        var turnText = turnsRemaining == 1 ? "turn" : "turns";
        return $"[!] VULNERABILITY WINDOW OPEN ({turnsRemaining} {turnText}) - Deal +{bonusPercent:F0}% damage!";
    }

    /// <summary>
    /// Formats the vulnerability urgent warning (1 turn remaining).
    /// </summary>
    /// <returns>Formatted urgent text.</returns>
    public string FormatVulnerabilityUrgent()
    {
        return "[!!!] LAST CHANCE - Vulnerability closing!";
    }

    /// <summary>
    /// Formats the window closed notification.
    /// </summary>
    /// <returns>Formatted closed text.</returns>
    public string FormatWindowClosed()
    {
        return "[x] Vulnerability window closed";
    }

    #endregion

    #region Stat Formatting

    /// <summary>
    /// Formats stat modifiers for display.
    /// </summary>
    /// <param name="modifiers">The stat modifiers dictionary.</param>
    /// <returns>Formatted modifier string.</returns>
    public string FormatStatModifiers(IReadOnlyDictionary<string, float> modifiers)
    {
        return FormatEnrageModifiers(modifiers);
    }

    private static string FormatStatName(string statId)
    {
        return statId switch
        {
            "damage" => "damage",
            "defense" => "defense",
            "attackSpeed" => "attack speed",
            "moveSpeed" => "move speed",
            _ => statId
        };
    }

    #endregion
}
```

### 7.2 Phase Text Formatting

| Input | Output |
|-------|--------|
| ("Rise", 1) | "Phase: 1 - RISE" |
| ("Empowered", 2) | "Phase: 2 - EMPOWERED" |
| ("Fury", 3) | "Phase: 3 - FURY" |

### 7.3 Timer Formatting

**Enrage Warning:**
- `FormatEnrageWarning(5)` → `"[!] Enrage in: 5% health"`

**Enrage Active:**
- `FormatEnrageActive()` → `"[!!!] ENRAGED"`

**Enrage Modifiers:**
- `FormatEnrageModifiers({damage: 1.5, attackSpeed: 1.25})` → `"+50% damage, +25% attack speed"`

**Vulnerability:**
- `FormatVulnerabilityWindow(2, 1.5f)` → `"[!] VULNERABILITY WINDOW OPEN (2 turns) - Deal +50% damage!"`

---

## 8. Data Model Changes

### 8.1 New DTOs

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/DTOs/BossStatusDtos.cs`

```csharp
using RuneAndRust.Domain.Definitions;

namespace RuneAndRust.Presentation.Tui.DTOs;

/// <summary>
/// Data transfer object for phase indicator display.
/// </summary>
/// <param name="PhaseNumber">The current phase number (1-based).</param>
/// <param name="PhaseName">The display name of the phase.</param>
/// <param name="Behavior">The boss behavior pattern.</param>
/// <param name="AbilityHints">Hints about phase-specific abilities.</param>
/// <param name="StatModifiers">Stat multipliers for the phase.</param>
public record PhaseDisplayDto(
    int PhaseNumber,
    string PhaseName,
    BossBehavior Behavior,
    IReadOnlyList<string> AbilityHints,
    IReadOnlyDictionary<string, float> StatModifiers);

/// <summary>
/// Data transfer object for phase transition effect display.
/// </summary>
/// <param name="OldPhaseNumber">The previous phase number.</param>
/// <param name="NewPhaseNumber">The new phase number.</param>
/// <param name="PhaseName">The display name of the new phase.</param>
/// <param name="TransitionText">Optional dramatic transition text.</param>
/// <param name="BossName">The boss display name.</param>
public record PhaseTransitionDto(
    int OldPhaseNumber,
    int NewPhaseNumber,
    string PhaseName,
    string? TransitionText,
    string BossName);

/// <summary>
/// Data transfer object for enrage status display.
/// </summary>
/// <param name="IsEnraged">Whether the boss is currently in an enraged phase.</param>
/// <param name="HealthPercentToEnrage">Health percentage remaining until next enrage phase (null if no enrage phase).</param>
/// <param name="StatModifiers">Stat multipliers when enraged.</param>
public record EnrageStatusDto(
    bool IsEnraged,
    int? HealthPercentToEnrage,
    IReadOnlyDictionary<string, float> StatModifiers);

/// <summary>
/// Data transfer object for vulnerability window display.
/// </summary>
/// <param name="IsActive">Whether the vulnerability window is currently active.</param>
/// <param name="TurnsRemaining">Number of turns remaining in the window.</param>
/// <param name="DamageMultiplier">The damage multiplier during vulnerability (default 1.5).</param>
public record VulnerabilityDisplayDto(
    bool IsActive,
    int TurnsRemaining,
    float DamageMultiplier);
```

### 8.2 Configuration Classes

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/Configuration/BossStatusDisplayConfig.cs`

```csharp
namespace RuneAndRust.Presentation.Tui.Configuration;

/// <summary>
/// Configuration for boss status display elements.
/// </summary>
public class BossStatusDisplayConfig
{
    /// <summary>
    /// Phase indicator display configuration.
    /// </summary>
    public PhaseIndicatorConfig PhaseIndicator { get; set; } = new();

    /// <summary>
    /// Enrage timer display configuration.
    /// </summary>
    public EnrageTimerConfig EnrageTimer { get; set; } = new();

    /// <summary>
    /// Vulnerability window display configuration.
    /// </summary>
    public VulnerabilityWindowConfig VulnerabilityWindow { get; set; } = new();

    /// <summary>
    /// Phase transition effect configuration.
    /// </summary>
    public TransitionEffectConfig TransitionEffect { get; set; } = new();

    /// <summary>
    /// Color configuration for all status elements.
    /// </summary>
    public BossStatusColors Colors { get; set; } = new();
}

/// <summary>
/// Phase indicator position and size configuration.
/// </summary>
public class PhaseIndicatorConfig
{
    public int StartX { get; set; } = 0;
    public int StartY { get; set; } = 7;
    public int Width { get; set; } = 50;
    public int Height { get; set; } = 5;
    public int MaxHints { get; set; } = 3;
}

/// <summary>
/// Enrage timer position and warning configuration.
/// </summary>
public class EnrageTimerConfig
{
    public int StartX { get; set; } = 0;
    public int StartY { get; set; } = 12;
    public int Width { get; set; } = 60;
    public int Height { get; set; } = 2;
    public int WarningThreshold { get; set; } = 10;
}

/// <summary>
/// Vulnerability window display configuration.
/// </summary>
public class VulnerabilityWindowConfig
{
    public int StartX { get; set; } = 0;
    public int StartY { get; set; } = 14;
    public int Width { get; set; } = 70;
    public float DamageMultiplier { get; set; } = 1.5f;
    public int ClosedDisplayMs { get; set; } = 1000;
    public int FlashIntervalMs { get; set; } = 200;
}

/// <summary>
/// Phase transition effect display configuration.
/// </summary>
public class TransitionEffectConfig
{
    public int CenterX { get; set; } = 40;
    public int StartY { get; set; } = 5;
    public int BoxWidth { get; set; } = 55;
    public int DisplayDurationMs { get; set; } = 2000;
}

/// <summary>
/// Color configuration for boss status elements.
/// </summary>
public class BossStatusColors
{
    public ConsoleColor AggressiveColor { get; set; } = ConsoleColor.Red;
    public ConsoleColor TacticalColor { get; set; } = ConsoleColor.Cyan;
    public ConsoleColor DefensiveColor { get; set; } = ConsoleColor.Blue;
    public ConsoleColor EnragedColor { get; set; } = ConsoleColor.DarkRed;
    public ConsoleColor SummonerColor { get; set; } = ConsoleColor.Magenta;
    public ConsoleColor VulnerableColor { get; set; } = ConsoleColor.Yellow;
    public ConsoleColor UrgentColor { get; set; } = ConsoleColor.Red;
    public ConsoleColor WindowClosedColor { get; set; } = ConsoleColor.Gray;
    public ConsoleColor TransitionBoxColor { get; set; } = ConsoleColor.White;
    public ConsoleColor CriticalWarningColor { get; set; } = ConsoleColor.Red;
    public ConsoleColor HighWarningColor { get; set; } = ConsoleColor.DarkYellow;
    public ConsoleColor LowWarningColor { get; set; } = ConsoleColor.Yellow;
}
```

---

## 9. Configuration File Schemas

### 9.1 boss-status-display.json

**File:** `config/boss-status-display.json`

```json
{
  "$schema": "./schemas/boss-status-display.schema.json",
  "phaseIndicator": {
    "startX": 0,
    "startY": 7,
    "width": 50,
    "height": 5,
    "maxHints": 3
  },
  "enrageTimer": {
    "startX": 0,
    "startY": 12,
    "width": 60,
    "height": 2,
    "warningThreshold": 10
  },
  "vulnerabilityWindow": {
    "startX": 0,
    "startY": 14,
    "width": 70,
    "damageMultiplier": 1.5,
    "closedDisplayMs": 1000,
    "flashIntervalMs": 200
  },
  "transitionEffect": {
    "centerX": 40,
    "startY": 5,
    "boxWidth": 55,
    "displayDurationMs": 2000
  },
  "colors": {
    "aggressiveColor": "Red",
    "tacticalColor": "Cyan",
    "defensiveColor": "Blue",
    "enragedColor": "DarkRed",
    "summonerColor": "Magenta",
    "vulnerableColor": "Yellow",
    "urgentColor": "Red",
    "windowClosedColor": "Gray",
    "transitionBoxColor": "White",
    "criticalWarningColor": "Red",
    "highWarningColor": "DarkYellow",
    "lowWarningColor": "Yellow"
  }
}
```

### 9.2 boss-status-display.schema.json

**File:** `config/schemas/boss-status-display.schema.json`

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "boss-status-display.schema.json",
  "title": "Boss Status Display Configuration",
  "description": "Configuration for boss status UI elements including phase indicator, enrage timer, and vulnerability window",
  "type": "object",
  "properties": {
    "phaseIndicator": {
      "type": "object",
      "description": "Phase indicator position and size",
      "properties": {
        "startX": { "type": "integer", "minimum": 0, "default": 0 },
        "startY": { "type": "integer", "minimum": 0, "default": 7 },
        "width": { "type": "integer", "minimum": 20, "maximum": 100, "default": 50 },
        "height": { "type": "integer", "minimum": 2, "maximum": 10, "default": 5 },
        "maxHints": { "type": "integer", "minimum": 1, "maximum": 5, "default": 3 }
      },
      "additionalProperties": false
    },
    "enrageTimer": {
      "type": "object",
      "description": "Enrage timer position and warning settings",
      "properties": {
        "startX": { "type": "integer", "minimum": 0, "default": 0 },
        "startY": { "type": "integer", "minimum": 0, "default": 12 },
        "width": { "type": "integer", "minimum": 20, "maximum": 100, "default": 60 },
        "height": { "type": "integer", "minimum": 1, "maximum": 5, "default": 2 },
        "warningThreshold": {
          "type": "integer",
          "description": "Health percentage at which to show enrage warning",
          "minimum": 1,
          "maximum": 50,
          "default": 10
        }
      },
      "additionalProperties": false
    },
    "vulnerabilityWindow": {
      "type": "object",
      "description": "Vulnerability window display settings",
      "properties": {
        "startX": { "type": "integer", "minimum": 0, "default": 0 },
        "startY": { "type": "integer", "minimum": 0, "default": 14 },
        "width": { "type": "integer", "minimum": 30, "maximum": 120, "default": 70 },
        "damageMultiplier": {
          "type": "number",
          "description": "Damage multiplier during vulnerability",
          "minimum": 1.0,
          "maximum": 5.0,
          "default": 1.5
        },
        "closedDisplayMs": {
          "type": "integer",
          "description": "Duration to show 'window closed' message",
          "minimum": 0,
          "maximum": 5000,
          "default": 1000
        },
        "flashIntervalMs": {
          "type": "integer",
          "description": "Flash interval for urgent warnings",
          "minimum": 50,
          "maximum": 1000,
          "default": 200
        }
      },
      "additionalProperties": false
    },
    "transitionEffect": {
      "type": "object",
      "description": "Phase transition effect display settings",
      "properties": {
        "centerX": {
          "type": "integer",
          "description": "Center X coordinate for transition box",
          "minimum": 0,
          "default": 40
        },
        "startY": { "type": "integer", "minimum": 0, "default": 5 },
        "boxWidth": {
          "type": "integer",
          "description": "Width of the transition effect box",
          "minimum": 40,
          "maximum": 80,
          "default": 55
        },
        "displayDurationMs": {
          "type": "integer",
          "description": "Duration to display transition effect",
          "minimum": 500,
          "maximum": 5000,
          "default": 2000
        }
      },
      "additionalProperties": false
    },
    "colors": {
      "type": "object",
      "description": "Color configuration for status elements",
      "properties": {
        "aggressiveColor": { "$ref": "#/$defs/consoleColor", "default": "Red" },
        "tacticalColor": { "$ref": "#/$defs/consoleColor", "default": "Cyan" },
        "defensiveColor": { "$ref": "#/$defs/consoleColor", "default": "Blue" },
        "enragedColor": { "$ref": "#/$defs/consoleColor", "default": "DarkRed" },
        "summonerColor": { "$ref": "#/$defs/consoleColor", "default": "Magenta" },
        "vulnerableColor": { "$ref": "#/$defs/consoleColor", "default": "Yellow" },
        "urgentColor": { "$ref": "#/$defs/consoleColor", "default": "Red" },
        "windowClosedColor": { "$ref": "#/$defs/consoleColor", "default": "Gray" },
        "transitionBoxColor": { "$ref": "#/$defs/consoleColor", "default": "White" },
        "criticalWarningColor": { "$ref": "#/$defs/consoleColor", "default": "Red" },
        "highWarningColor": { "$ref": "#/$defs/consoleColor", "default": "DarkYellow" },
        "lowWarningColor": { "$ref": "#/$defs/consoleColor", "default": "Yellow" }
      },
      "additionalProperties": false
    }
  },
  "$defs": {
    "consoleColor": {
      "type": "string",
      "enum": [
        "Black", "DarkBlue", "DarkGreen", "DarkCyan",
        "DarkRed", "DarkMagenta", "DarkYellow", "Gray",
        "DarkGray", "Blue", "Green", "Cyan",
        "Red", "Magenta", "Yellow", "White"
      ]
    }
  },
  "additionalProperties": false
}
```

---

## 10. CombatView Integration

### 10.1 Integration Points

**File:** `src/Presentation/RuneAndRust.Presentation.Tui/Views/CombatView.cs` (modifications)

```csharp
// Add to CombatView class

private readonly PhaseIndicator _phaseIndicator;
private readonly EnrageTimer _enrageTimer;
private readonly VulnerabilityWindow _vulnerabilityWindow;
private IDisposable? _phaseChangedSubscription;
private IDisposable? _vulnerableSubscription;
private IDisposable? _vulnerabilityEndedSubscription;

/// <summary>
/// Initializes boss status UI components when a boss is detected.
/// </summary>
private void InitializeBossStatusUI()
{
    var activeBosses = _bossMechanicsService.GetActiveBosses();
    if (activeBosses.Count == 0)
    {
        ClearBossStatusUI();
        return;
    }

    var boss = activeBosses[0];
    var bossState = _bossMechanicsService.GetBossState(boss);
    if (bossState == null) return;

    var definition = _bossDefinitionProvider.GetBossDefinition(bossState.BossId);
    if (definition == null) return;

    var currentPhase = _bossMechanicsService.GetCurrentPhase(boss);
    if (currentPhase == null) return;

    // Create phase display DTO
    var phaseDto = CreatePhaseDisplayDto(currentPhase, definition);
    _phaseIndicator.RenderPhase(phaseDto);

    // Create enrage status DTO
    var enrageDto = CreateEnrageStatusDto(boss, bossState, definition);
    _enrageTimer.RenderTimer(enrageDto);

    // Create vulnerability display DTO
    var vulnerabilityDto = CreateVulnerabilityDisplayDto(bossState);
    _vulnerabilityWindow.RenderWindow(vulnerabilityDto);

    // Subscribe to events
    SubscribeToBossStatusEvents(boss.Id);
}

/// <summary>
/// Subscribes to boss status change events.
/// </summary>
private void SubscribeToBossStatusEvents(Guid bossId)
{
    _phaseChangedSubscription?.Dispose();
    _phaseChangedSubscription = _eventBus.Subscribe<BossPhaseChangedEvent>(evt =>
    {
        if (evt.MonsterId == bossId)
        {
            var transitionDto = new PhaseTransitionDto(
                OldPhaseNumber: evt.OldPhaseNumber,
                NewPhaseNumber: evt.NewPhaseNumber,
                PhaseName: evt.PhaseName,
                TransitionText: evt.TransitionText,
                BossName: GetBossName(bossId));

            _phaseIndicator.ShowTransitionEffect(transitionDto);

            // Update phase indicator after transition
            RefreshPhaseIndicator(bossId);
        }
    });

    _vulnerableSubscription?.Dispose();
    _vulnerableSubscription = _eventBus.Subscribe<BossVulnerableEvent>(evt =>
    {
        if (evt.MonsterId == bossId)
        {
            _vulnerabilityWindow.ShowWindowOpen(evt.DurationTurns);
        }
    });

    _vulnerabilityEndedSubscription?.Dispose();
    _vulnerabilityEndedSubscription = _eventBus.Subscribe<BossVulnerabilityEndedEvent>(evt =>
    {
        if (evt.MonsterId == bossId)
        {
            _vulnerabilityWindow.ShowWindowClosed();
        }
    });
}

/// <summary>
/// Creates a PhaseDisplayDto from the current phase.
/// </summary>
private PhaseDisplayDto CreatePhaseDisplayDto(BossPhase phase, BossDefinition definition)
{
    var hints = _phaseIndicator.GetPhaseDescription(phase);

    return new PhaseDisplayDto(
        PhaseNumber: phase.PhaseNumber,
        PhaseName: phase.Name,
        Behavior: phase.Behavior,
        AbilityHints: hints,
        StatModifiers: phase.StatModifiers);
}

/// <summary>
/// Creates an EnrageStatusDto from the current boss state.
/// </summary>
private EnrageStatusDto CreateEnrageStatusDto(Monster boss, ActiveBossState state, BossDefinition definition)
{
    var currentPhase = definition.Phases.FirstOrDefault(p => p.PhaseNumber == state.CurrentPhaseNumber);
    var isEnraged = currentPhase?.Behavior == BossBehavior.Enraged;

    // Find next enrage phase threshold
    int? healthToEnrage = null;
    var currentHealthPercent = CalculateHealthPercent(boss);
    var nextEnragePhase = definition.Phases
        .Where(p => p.Behavior == BossBehavior.Enraged && p.HealthThreshold < currentHealthPercent)
        .OrderByDescending(p => p.HealthThreshold)
        .FirstOrDefault();

    if (nextEnragePhase != null)
    {
        healthToEnrage = currentHealthPercent - nextEnragePhase.HealthThreshold;
    }

    var modifiers = isEnraged && currentPhase != null
        ? currentPhase.StatModifiers
        : new Dictionary<string, float>();

    return new EnrageStatusDto(
        IsEnraged: isEnraged,
        HealthPercentToEnrage: healthToEnrage,
        StatModifiers: modifiers);
}

/// <summary>
/// Creates a VulnerabilityDisplayDto from the current boss state.
/// </summary>
private VulnerabilityDisplayDto CreateVulnerabilityDisplayDto(ActiveBossState state)
{
    return new VulnerabilityDisplayDto(
        IsActive: state.IsVulnerable,
        TurnsRemaining: state.VulnerableTurns,
        DamageMultiplier: 1.5f);
}

/// <summary>
/// Clears all boss status UI elements.
/// </summary>
private void ClearBossStatusUI()
{
    _phaseIndicator.Clear();
    _enrageTimer.Clear();
    _vulnerabilityWindow.Clear();

    _phaseChangedSubscription?.Dispose();
    _vulnerableSubscription?.Dispose();
    _vulnerabilityEndedSubscription?.Dispose();
}
```

### 10.2 Layout Position

The boss status elements are positioned below the boss health bar:

```
┌─────────────────────────────────────────────────────────────────────┐
│                    <<  SKELETON KING  >>                            │  ← v0.13.1a
│   HP: 2,847 / 5,000                                                 │
│   +============================================================+   │
│   |############################................................|   │
│   +============================================================+   │
│                 |              |              |                      │
├─────────────────────────────────────────────────────────────────────┤
│   Phase: 2 - EMPOWERED                                              │  ← Row 7: Phase Indicator
│     |-- Increased damage output                                     │  ← Row 8-10: Ability Hints
│     |-- Summons skeleton minions                                    │
│     +-- Watch for AoE attacks                                       │
│                                                                     │
│   [!] Enrage in: 8% health                                          │  ← Row 12: Enrage Timer
│                                                                     │
│   [!] VULNERABILITY WINDOW OPEN (2 turns) - Deal +50% damage!       │  ← Row 14: Vulnerability
├─────────────────────────────────────────────────────────────────────┤
│                        [Rest of Combat UI]                          │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 11. Logging Specifications

### 11.1 Log Levels by Component

| Component | Level | Events |
|-----------|-------|--------|
| `PhaseIndicator` | Information | Phase transition shown |
| `PhaseIndicator` | Debug | Rendering phase, getting description |
| `EnrageTimer` | Information | Boss is ENRAGED |
| `EnrageTimer` | Debug | Rendering enrage status, warning shown |
| `VulnerabilityWindow` | Information | Window OPEN, Window CLOSED |
| `VulnerabilityWindow` | Debug | Rendering window, clearing |
| `BossStatusRenderer` | Debug | Formatting operations |
| `CombatView` | Information | Boss status UI initialized |
| `CombatView` | Debug | Event subscriptions, DTO creation |

### 11.2 Log Message Examples

```
[INF] PhaseIndicator: Showing phase transition: Phase 1 -> Phase 2 (EMPOWERED)
[DBG] PhaseIndicator: Rendering phase indicator: Phase 2 - EMPOWERED
[INF] EnrageTimer: Boss is ENRAGED
[DBG] EnrageTimer: Showing enrage warning at 8% to enrage
[INF] VulnerabilityWindow: Vulnerability window OPEN - 2 turns remaining
[INF] VulnerabilityWindow: Vulnerability window CLOSED
[INF] CombatView: Boss status UI initialized for Skeleton King
[DBG] CombatView: Subscribing to boss status events for 7a3f2b1c-...
```

---

## 12. Unit Testing Requirements

### 12.1 Test Count by Feature

| Feature | Test Count |
|---------|------------|
| BossStatusRenderer | ~3 |
| PhaseIndicator | ~1 |
| EnrageTimer | ~1 |
| VulnerabilityWindow | ~1 |
| **Total** | **~6** |

### 12.2 Test Specifications

**File:** `tests/RuneAndRust.Presentation.Tui.Tests/Renderers/BossStatusRendererTests.cs`

```csharp
[TestFixture]
public class BossStatusRendererTests
{
    private BossStatusRenderer _renderer;
    private BossStatusDisplayConfig _config;

    [SetUp]
    public void Setup()
    {
        _config = new BossStatusDisplayConfig();
        _renderer = new BossStatusRenderer(_config);
    }

    [Test]
    public void FormatPhaseText_WithValidInput_ReturnsFormattedString()
    {
        // Arrange
        var phaseName = "Empowered";
        var phaseNumber = 2;

        // Act
        var result = _renderer.FormatPhaseText(phaseName, phaseNumber);

        // Assert
        Assert.That(result, Is.EqualTo("Phase: 2 - EMPOWERED"));
    }

    [Test]
    public void FormatVulnerabilityWindow_WithTurnsAndMultiplier_ReturnsFormattedString()
    {
        // Arrange
        var turns = 2;
        var multiplier = 1.5f;

        // Act
        var result = _renderer.FormatVulnerabilityWindow(turns, multiplier);

        // Assert
        Assert.That(result, Does.Contain("2 turns"));
        Assert.That(result, Does.Contain("+50%"));
        Assert.That(result, Does.Contain("VULNERABILITY WINDOW OPEN"));
    }

    [Test]
    public void FormatEnrageModifiers_WithMultipleModifiers_ReturnsCommaSeparatedString()
    {
        // Arrange
        var modifiers = new Dictionary<string, float>
        {
            { "damage", 1.5f },
            { "attackSpeed", 1.25f }
        };

        // Act
        var result = _renderer.FormatEnrageModifiers(modifiers);

        // Assert
        Assert.That(result, Does.Contain("+50% damage"));
        Assert.That(result, Does.Contain("+25% attack speed"));
    }
}
```

**File:** `tests/RuneAndRust.Presentation.Tui.Tests/UI/PhaseIndicatorTests.cs`

```csharp
[TestFixture]
public class PhaseIndicatorTests
{
    private Mock<BossStatusRenderer> _mockRenderer;
    private Mock<ITerminalService> _mockTerminal;
    private Mock<ILogger<PhaseIndicator>> _mockLogger;
    private BossStatusDisplayConfig _config;
    private PhaseIndicator _indicator;

    [SetUp]
    public void Setup()
    {
        _config = new BossStatusDisplayConfig();
        _mockRenderer = new Mock<BossStatusRenderer>(_config);
        _mockTerminal = new Mock<ITerminalService>();
        _mockLogger = new Mock<ILogger<PhaseIndicator>>();

        _indicator = new PhaseIndicator(
            _mockRenderer.Object,
            _mockTerminal.Object,
            _config,
            _mockLogger.Object);
    }

    [Test]
    public void RenderPhase_WithValidDto_CallsRenderer()
    {
        // Arrange
        var dto = new PhaseDisplayDto(
            PhaseNumber: 2,
            PhaseName: "Empowered",
            Behavior: BossBehavior.Aggressive,
            AbilityHints: new List<string> { "Watch for AoE" },
            StatModifiers: new Dictionary<string, float>());

        _mockRenderer.Setup(r => r.FormatPhaseText(It.IsAny<string>(), It.IsAny<int>()))
            .Returns("Phase: 2 - EMPOWERED");
        _mockRenderer.Setup(r => r.GetPhaseColor(It.IsAny<BossBehavior>()))
            .Returns(ConsoleColor.Red);

        // Act
        _indicator.RenderPhase(dto);

        // Assert
        _mockTerminal.Verify(t => t.WriteColoredAt(
            It.IsAny<int>(), It.IsAny<int>(),
            It.Is<string>(s => s.Contains("EMPOWERED")),
            It.IsAny<ConsoleColor>()), Times.Once);
    }
}
```

**File:** `tests/RuneAndRust.Presentation.Tui.Tests/UI/EnrageTimerTests.cs`

```csharp
[TestFixture]
public class EnrageTimerTests
{
    [Test]
    public void RenderTimer_WhenEnraged_ShowsEnrageActive()
    {
        // Arrange
        var config = new BossStatusDisplayConfig();
        var mockRenderer = new Mock<BossStatusRenderer>(config);
        var mockTerminal = new Mock<ITerminalService>();
        var mockLogger = new Mock<ILogger<EnrageTimer>>();

        mockRenderer.Setup(r => r.FormatEnrageActive())
            .Returns("[!!!] ENRAGED");

        var timer = new EnrageTimer(
            mockRenderer.Object,
            mockTerminal.Object,
            config,
            mockLogger.Object);

        var dto = new EnrageStatusDto(
            IsEnraged: true,
            HealthPercentToEnrage: null,
            StatModifiers: new Dictionary<string, float> { { "damage", 1.5f } });

        // Act
        timer.RenderTimer(dto);

        // Assert
        mockTerminal.Verify(t => t.WriteColoredAt(
            It.IsAny<int>(), It.IsAny<int>(),
            It.Is<string>(s => s.Contains("ENRAGED")),
            It.IsAny<ConsoleColor>()), Times.Once);
    }
}
```

**File:** `tests/RuneAndRust.Presentation.Tui.Tests/UI/VulnerabilityWindowTests.cs`

```csharp
[TestFixture]
public class VulnerabilityWindowTests
{
    [Test]
    public void RenderWindow_WhenActive_ShowsWindowOpen()
    {
        // Arrange
        var config = new BossStatusDisplayConfig();
        var mockRenderer = new Mock<BossStatusRenderer>(config);
        var mockTerminal = new Mock<ITerminalService>();
        var mockLogger = new Mock<ILogger<VulnerabilityWindow>>();

        mockRenderer.Setup(r => r.FormatVulnerabilityWindow(It.IsAny<int>(), It.IsAny<float>()))
            .Returns("[!] VULNERABILITY WINDOW OPEN (2 turns) - Deal +50% damage!");

        var window = new VulnerabilityWindow(
            mockRenderer.Object,
            mockTerminal.Object,
            config,
            mockLogger.Object);

        var dto = new VulnerabilityDisplayDto(
            IsActive: true,
            TurnsRemaining: 2,
            DamageMultiplier: 1.5f);

        // Act
        window.RenderWindow(dto);

        // Assert
        mockTerminal.Verify(t => t.WriteColoredAt(
            It.IsAny<int>(), It.IsAny<int>(),
            It.Is<string>(s => s.Contains("VULNERABILITY WINDOW OPEN")),
            It.IsAny<ConsoleColor>()), Times.Once);
    }
}
```

---

## 13. Use Cases

### UC-001: View Current Phase During Encounter

**Actor:** Player
**Flow:** Enter boss encounter → Phase indicator shows "Phase: 1 - RISE" → View ability hints → Continue combat

### UC-002: Observe Phase Transition

**Actor:** Player
**Flow:** Deal damage crossing phase threshold → Transition box appears → "SKELETON KING enters Phase 2: EMPOWERED" → Transition text displays → Box clears → Phase indicator updates

### UC-003: Monitor Enrage Warning

**Actor:** Player
**Flow:** Boss at 40% health → Enrage warning appears "[!] Enrage in: 7% health" → Continue damage → Warning color intensifies → Boss crosses 33% threshold → "[!!!] ENRAGED" displays with stat modifiers

### UC-004: Capitalize on Vulnerability Window

**Actor:** Player
**Flow:** Boss ability triggers vulnerability → "[!] VULNERABILITY WINDOW OPEN (2 turns)" → Deal increased damage → Turn ends → Counter decrements to 1 → Urgent flashing → Turn ends → "Vulnerability window closed" → Normal combat resumes

---

## 14. Deliverable Checklist

### UI Components
- [ ] `PhaseIndicator` class implemented
- [ ] `RenderPhase()` method renders phase information
- [ ] `ShowTransitionEffect()` method displays transition box
- [ ] `GetPhaseDescription()` method returns ability hints
- [ ] `EnrageTimer` class implemented
- [ ] `RenderTimer()` method shows enrage status
- [ ] `ShowEnrageWarning()` method displays warning
- [ ] `ShowEnrageActive()` method shows enrage state
- [ ] `VulnerabilityWindow` class implemented
- [ ] `RenderWindow()` method shows vulnerability status
- [ ] `ShowWindowOpen()` method displays active window
- [ ] `ShowWindowClosed()` method shows closed notification

### Renderers
- [ ] `BossStatusRenderer` class implemented
- [ ] `FormatPhaseText()` formats phase display
- [ ] `FormatTransitionBox()` creates transition box lines
- [ ] `FormatEnrageWarning()` formats warning text
- [ ] `FormatEnrageModifiers()` formats stat modifiers
- [ ] `FormatVulnerabilityWindow()` formats vulnerability text
- [ ] `GetWarningColor()` returns appropriate warning color

### DTOs
- [ ] `PhaseDisplayDto` record created
- [ ] `PhaseTransitionDto` record created
- [ ] `EnrageStatusDto` record created
- [ ] `VulnerabilityDisplayDto` record created

### Configuration
- [ ] `BossStatusDisplayConfig` class created
- [ ] `PhaseIndicatorConfig` class created
- [ ] `EnrageTimerConfig` class created
- [ ] `VulnerabilityWindowConfig` class created
- [ ] `TransitionEffectConfig` class created
- [ ] `BossStatusColors` class created
- [ ] `config/boss-status-display.json` created
- [ ] `config/schemas/boss-status-display.schema.json` created

### View Integration
- [ ] `CombatView` boss status initialization implemented
- [ ] `CombatView` event subscriptions implemented
- [ ] Status elements positioned correctly in layout

### Testing
- [ ] ~6 unit tests implemented
- [ ] All tests passing

---

## 15. Acceptance Criteria

### Functional
- [ ] Phase indicator shows current phase name and number
- [ ] Phase transition effect displays on phase change
- [ ] Transition box shows boss name and new phase
- [ ] Transition text displays dramatic flavor text
- [ ] Phase description hints show phase-specific behaviors
- [ ] Enrage warning shows when approaching enrage threshold
- [ ] Enrage warning color intensifies as threshold approaches
- [ ] Enrage active indicator shows when boss is enraged
- [ ] Enrage stat modifiers display correctly
- [ ] Vulnerability window indicator shows when active
- [ ] Vulnerability turns remaining counts down correctly
- [ ] Vulnerability bonus percentage displays correctly
- [ ] Vulnerability window closed notification displays

### Quality
- [ ] Build succeeds with 0 errors/warnings
- [ ] All ~6 unit tests pass
- [ ] Configuration file validates against schema
- [ ] XML documentation complete on all public members
- [ ] No hardcoded values (all configurable)

---

## 16. Dependencies

### Required from v0.10.4x

| Type | Location | Usage in v0.13.1b |
|------|----------|-------------------|
| `IBossMechanicsService` | `Application/Interfaces/` | Get boss state, phase, vulnerability |
| `ActiveBossState` | `Application/Tracking/` | VulnerableTurns, CurrentPhaseNumber |
| `BossPhase` | `Domain/Definitions/` | Name, Behavior, StatModifiers, TransitionText |
| `BossBehavior` | `Domain/Definitions/` | Enraged behavior detection |
| `BossPhaseChangedEvent` | `Application/Events/` | Trigger transition effect |
| `BossVulnerableEvent` | `Application/Events/` | Trigger vulnerability window |
| `BossVulnerabilityEndedEvent` | `Application/Events/` | Close vulnerability window |

### Required from v0.13.1a

| Type | Location | Usage in v0.13.1b |
|------|----------|-------------------|
| `BossHealthBar` | `Presentation.Tui/UI/` | Layout reference, integration pattern |
| `BossHealthDisplayConfig` | `Presentation.Tui/Configuration/` | Shared configuration patterns |

### Provides to v0.13.1c

| Type | Usage |
|------|-------|
| `BossStatusRenderer` | Reusable formatting patterns |
| `BossStatusDisplayConfig` | Configuration structure reference |

---

## 17. Future Considerations

### Deferred to v0.13.1c
- **Monster Group Display**: Group composition view, tactic indicators, leader badge

### Out of Scope
- **Turn-Based Enrage Timer**: v0.10.4b implements phase-based enrage (health thresholds), not time-based
- **Enrage Stack Counter**: EnrageStacks property exists but is reserved for future mechanics
- **Multiple Vulnerability Types**: Current system has single vulnerability multiplier (1.5x)

---

*Document Version: 1.0*
*Last Updated: 2026-01-16*
*Author: Claude (AI Assistant)*
