# v0.14.9d Changelog - Psychological Descriptor Schema

## Summary

Introduced the comprehensive **Psychological Descriptor Schema** (`psychological-descriptors.schema.json`) which validates psychological state descriptors including stress manifestations, trauma effects, corruption progression, biome-specific environmental pressure, and recovery narratives. This schema enables full customization of character mental state presentation—all without code changes. Supports 5 stress thresholds, 5 trauma types, 6 corruption thresholds, 6 biomes, and 6 recovery types. This is the fourth entry in the v0.14.9 Advanced Descriptor Configuration Schemas series.

## Added

### Schema File
- **[config/schemas/psychological-descriptors.schema.json](config/schemas/psychological-descriptors.schema.json)** - Comprehensive JSON Schema Draft-07

### Schema Definitions (14 Total)

| Definition | Description | Required Fields |
|------------|-------------|-----------------|
| `StressDescriptor` | Stress manifestation descriptions | id, text, threshold, manifestation |
| `TraumaDescriptor` | Trauma effect descriptions | id, text, traumaType, intensity |
| `CorruptionDescriptor` | Corruption progression descriptions | id, text, threshold, manifestation |
| `BiomePressureDescriptor` | Environmental pressure descriptions | id, text, biome, pressureType |
| `RecoveryDescriptor` | Recovery moment descriptions | id, text, recoveryType |
| `StressThreshold` | 5 stress thresholds enum | - |
| `StressManifestation` | 3 manifestation types enum | - |
| `TraumaType` | 5 trauma types enum | - |
| `TraumaIntensity` | 3 intensity levels enum | - |
| `CorruptionThreshold` | 6 corruption thresholds enum | - |
| `CorruptionManifestation` | 5 manifestation types enum | - |
| `Biome` | 6 biomes enum | - |
| `RecoveryType` | 6 recovery types enum | - |
| `Intensity` | 3 intensity levels enum | - |

### Category Enumeration (5 values)

| Category | Description | File Pattern |
|----------|-------------|--------------|
| `stress` | Stress manifestations | stress-descriptors.json |
| `trauma` | Trauma effects | trauma-descriptors.json |
| `corruption` | Corruption progression | corruption-descriptors.json |
| `biome-pressure` | Environmental pressure | biome-pressure-descriptors.json |
| `recovery` | Recovery moments | recovery-descriptors.json |

### StressThreshold Enumeration (5 values)

| Threshold | Range | Description |
|-----------|-------|-------------|
| `Minimal` | 0-25 | Manageable tension |
| `Mounting` | 26-50 | Growing pressure |
| `Critical` | 51-75 | Significant distress |
| `Breaking` | 76-99 | Near collapse |
| `Broken` | 100 | Complete breakdown |

### StressManifestation Enumeration (3 values)

| Type | Description | Example |
|------|-------------|---------|
| `Physical` | Body symptoms | "Your heart pounds in your ears..." |
| `Mental` | Thought patterns | "Thoughts fragment. Complete sentences are getting harder..." |
| `Behavioral` | Actions | "You snap at allies. The words leave before you can stop them..." |

### TraumaType Enumeration (5 values)

| Type | Description | Example |
|------|-------------|---------|
| `Flashback` | Reliving past trauma | "You are there again. Not here. THERE..." |
| `Panic` | Overwhelming fear | "You cannot breathe. You cannot think..." |
| `Dissociation` | Detachment from reality | "Watching yourself from outside..." |
| `Hypervigilance` | Constant alertness | "Everyone is a threat. Everything is a trap..." |
| `Avoidance` | Trigger avoidance | "You cannot go there. Not again. Never again..." |

### TraumaIntensity Enumeration (3 values)

| Intensity | Description | Control Level |
|-----------|-------------|---------------|
| `Mild` | Controlled response | "A memory surfaces, unwanted. You push it back down" |
| `Moderate` | Struggling for control | "The past bleeds into the present" |
| `Severe` | Overwhelming | "You are there again. THERE." |

### CorruptionThreshold Enumeration (6 values)

| Threshold | Range | Description |
|-----------|-------|-------------|
| `Clean` | 0-10 | Uncorrupted |
| `Touched` | 11-30 | First signs of taint |
| `Tainted` | 31-50 | Visible corruption |
| `Corrupted` | 51-75 | Significant transformation |
| `Lost` | 76-99 | Nearly consumed |
| `Forlorn` | 100 | Fully transformed |

### CorruptionManifestation Enumeration (5 values)

| Type | Description | Example |
|------|-------------|---------|
| `Physical` | Body transforms | "Veins show through the skin, darker than they should be..." |
| `Mental` | Mind corrupts | "The whispers have become a voice. It knows your name..." |
| `Social` | Relationships suffer | "People look at you differently. They sense what you are becoming..." |
| `Urgent` | Desperate stage | "There is still time. Maybe. If you can find help..." |
| `Final` | Complete transformation | "The change is complete. What was you is now... other" |

### Biome Enumeration (6 values)

| Biome | Pressure Types | Atmosphere |
|-------|----------------|------------|
| `The_Roots` | Isolation, Claustrophobia, Dread | Industrial decay, underground |
| `Muspelheim` | Heat, Thirst, Fury | Volcanic realm |
| `Niflheim` | Cold, Despair, Stillness | Frozen realm |
| `Svartalfheim` | Darkness, Paranoia, Madness | Dark elf realm |
| `Vanaheim` | Consumption, Infection, Alienation | Wild growth realm |
| `Jotunheim` | Scale, Insignificance, Exposure | Giant realm |

### RecoveryType Enumeration (6 values)

| Type | Description | Example |
|------|-------------|---------|
| `Rest` | Physical/mental rest | "Breathing slows. The shaking stops. You are still here" |
| `Social` | Human connection | "Another voice. Human. Not threatening..." |
| `Grounding` | Present-focus techniques | "Count the exits. Name the objects. You are here. You are now..." |
| `Support` | Understanding ally | "Someone who understands. They have been there too" |
| `Milestone` | Survival achievement | "You survived. Again. It does not feel like victory, but it is" |
| `Acceptance` | Trauma integration | "The scar is part of you now. It does not have to define you" |

### Intensity Enumeration (3 values)

| Intensity | Description | Usage |
|-----------|-------------|-------|
| `Subtle` | Barely noticeable | Initial exposure, early warnings |
| `Moderate` | Clearly present | Growing concern, extended exposure |
| `Oppressive` | Overwhelming | Deep biome, prolonged exposure, critical states |

### Configuration Files (5 Example Files)

| File | Description | Pools Count |
|------|-------------|-------------|
| `stress-descriptors.json` | Stress manifestations | 12 pools |
| `trauma-descriptors.json` | Trauma effects | 15 pools |
| `corruption-descriptors.json` | Corruption progression | 12 pools |
| `biome-pressure-descriptors.json` | Environmental pressure | 18 pools |
| `recovery-descriptors.json` | Recovery moments | 6 pools |

### Variable Placeholders Documented

| Category | Variables |
|----------|-----------|
| Psychological State | `{StressLevel}`, `{StressThreshold}`, `{CorruptionLevel}`, `{CorruptionThreshold}`, `{TraumaType}`, `{TraumaIntensity}` |
| Environment | `{Biome}`, `{LocationName}`, `{PressureType}`, `{TimeInBiome}` |
| Character | `{PlayerName}`, `{PlayerClass}`, `{AllyName}`, `{AllyCount}` |
| Trigger | `{TriggerEvent}`, `{TriggerContext}`, `{TimeSinceTrigger}`, `{RecoveryType}` |

### Unit Tests
- **[PsychologicalDescriptorSchemaTests.cs](tests/RuneAndRust.Infrastructure.IntegrationTests/Schemas/PsychologicalDescriptorSchemaTests.cs)** - 71 tests
  - `PsychologicalDescriptorSchema_LoadsAndParses_Successfully` - Schema structure validation (14 definitions)
  - `PsychologicalDescriptorSchema_*_PassesValidation` - 5 tests for configuration files
  - `StressDescriptor_*` - 12 tests for stress descriptor validation
  - `TraumaDescriptor_*` - 11 tests for trauma descriptor validation
  - `CorruptionDescriptor_*` - 12 tests for corruption descriptor validation
  - `BiomePressureDescriptor_*` - 9 tests for biome pressure validation
  - `RecoveryDescriptor_*` - 10 tests for recovery descriptor validation
  - `Configuration_*` - 7 tests for root configuration validation
  - `Intensity_*` - 4 tests for intensity enum validation

## Files Changed

| File | Change Type |
|------|-------------|
| `config/schemas/psychological-descriptors.schema.json` | Added |
| `config/psychological-descriptors/stress-descriptors.json` | Added |
| `config/psychological-descriptors/trauma-descriptors.json` | Added |
| `config/psychological-descriptors/corruption-descriptors.json` | Added |
| `config/psychological-descriptors/biome-pressure-descriptors.json` | Added |
| `config/psychological-descriptors/recovery-descriptors.json` | Added |
| `tests/.../Schemas/PsychologicalDescriptorSchemaTests.cs` | Added |
| `changelogs/v0.14.9d-changelog.md` | Added |

## Test Results

```
Test summary: total: 71, failed: 0, succeeded: 71, skipped: 0
Build succeeded with 0 errors
```

## Schema Structure

```
┌─────────────────────────────────────────────────────────────────┐
│  PSYCHOLOGICAL DESCRIPTOR CONFIGURATION                        │
├─────────────────────────────────────────────────────────────────┤
│  $schema: "http://json-schema.org/draft-07/schema#"             │
│  type: object                                                   │
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │  ROOT PROPERTIES                                          │  │
│  │  version: "1.0.0"       (semver format)                   │  │
│  │  category: "stress" | "trauma" | "corruption" | ...       │  │
│  │  pools: { poolId: [descriptors] }                         │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │  STRESS DESCRIPTOR                                        │  │
│  │  id: "stress_critical_physical_001"                       │  │
│  │  text: "Your heart pounds in your ears..."                │  │
│  │  weight: 10 (selection probability)                       │  │
│  │  threshold: "Critical" (5 thresholds)                     │  │
│  │  manifestation: "Physical" (3 types)                      │  │
│  │  intensity: "Oppressive" (3 levels, optional)             │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │  TRAUMA DESCRIPTOR                                        │  │
│  │  id: "trauma_flashback_severe_001"                        │  │
│  │  text: "You are there again. Not here. THERE."            │  │
│  │  traumaType: "Flashback" (5 types)                        │  │
│  │  intensity: "Severe" (3 levels)                           │  │
│  │  triggerContext: "Combat" (optional)                      │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │  CORRUPTION DESCRIPTOR                                    │  │
│  │  id: "corruption_tainted_physical_001"                    │  │
│  │  text: "Veins show through the skin, darker..."           │  │
│  │  threshold: "Tainted" (6 thresholds)                      │  │
│  │  manifestation: "Physical" (5 types)                      │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │  BIOME PRESSURE DESCRIPTOR                                │  │
│  │  id: "the_roots_isolation_001"                            │  │
│  │  text: "How long since you have seen another person?"     │  │
│  │  biome: "The_Roots" (6 biomes)                            │  │
│  │  pressureType: "Isolation" (string)                       │  │
│  │  intensity: "Moderate" (3 levels, optional)               │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │  RECOVERY DESCRIPTOR                                      │  │
│  │  id: "recovery_rest_001"                                  │  │
│  │  text: "Breathing slows. The shaking stops."              │  │
│  │  recoveryType: "Rest" (6 types)                           │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

## Stress Progression Flow

```
  Stress Value: 0                                           100
  ├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
        0-25     26-50     51-75     76-99      100
     Minimal   Mounting  Critical  Breaking   Broken
         │         │         │         │         │
         ▼         ▼         ▼         ▼         ▼
  "Grip      "Jaw aches"  "Heart    "Body      "SNAP.
   tightens"              pounds"   trembles"  Control
                                               is gone"
```

## Corruption Progression Flow

```
  Corruption: 0                                             100
  ├─────┼─────────┼─────────┼─────────────┼───────────┼─────┤
     0-10   11-30     31-50       51-75       76-99     100
    Clean  Touched   Tainted    Corrupted     Lost    Forlorn
      │        │         │           │          │         │
      ▼        ▼         ▼           ▼          ▼         ▼
  (Normal) "Paleness" "Veins     "Skin has   "Mirror   FINAL
           "Foreign   darker"    changed"    shows     TRANSFORM
           dreams"               "Hunger"    other"
```

## v0.14.9 Advanced Descriptor Schemas - Progress

| Version | Schema | Tests | Status |
|---------|--------|-------|--------|
| v0.14.9a | `dialogue.schema.json` | 76 ✓ | Complete |
| v0.14.9b | `ability-descriptors.schema.json` | 103 ✓ | Complete |
| v0.14.9c | `npc-descriptors.schema.json` | 113 ✓ | Complete |
| v0.14.9d | `psychological-descriptors.schema.json` | 71 ✓ | **Complete** |
| v0.14.9e | `capture-templates.schema.json` | ~6 | Pending |
| **Total** | **5 schemas** | **~369 tests** | 4/5 complete |

## Modding Scenarios Enabled

After this implementation, modders can:
- Create custom stress manifestations for any threshold level
- Define trauma responses for all clinical trauma types
- Add corruption progression descriptions from Clean to Forlorn
- Design biome-specific psychological pressure effects
- Create recovery narratives for healing moments
- Customize intensity levels (Subtle, Moderate, Oppressive)
- Add trigger context for situational trauma responses
- Use variable placeholders for dynamic content substitution
- Create weighted random selection pools for varied narratives

---

*Fourth entry in v0.14.9 Advanced Descriptor Configuration Schemas series. Next: v0.14.9e (Capture Templates Schema).*
