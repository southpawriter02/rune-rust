# v0.0.5d Changelog - Configuration & Polish

**Released:** 2026-01-07

## Overview

This version completes the Dice Pool System presentation layer integration, adding user-facing commands for dice rolling and skill checks, implementing rich console rendering with Spectre.Console, and introducing a descriptor system for flavor text.

## Features

### Commands

- **roll**: Direct dice rolling with notation (e.g., `roll 3d6+5`, `roll 1d10 adv`)
- **check**: Skill checks with optional DC (e.g., `check perception`, `check stealth moderate dis`)

### DiceDescriptorService

New service providing contextual flavor text:
- 12 descriptor categories with 60+ phrases
- Context-aware selection based on roll results
- Categories: `dice.natural_max`, `dice.natural_one`, `skill.critical_success/failure`, `combat.critical_hit/miss`, and more

### Rich Rendering

Three new Spectre.Console render methods:
- **RenderDiceRollAsync**: Panel with notation, individual rolls, explosions, modifiers, total
- **RenderSkillCheckAsync**: Panel with skill name, roll breakdown, DC comparison, margin
- **RenderCombatRoundAsync**: Panel with attack/damage sections, counterattack, round summary

## Technical Changes

### Files Created
| File | Purpose |
|------|---------|
| `Services/DiceDescriptorService.cs` | Flavor text service |
| `config/dice-descriptors.json` | 12 categories, 60+ descriptors |
| `DiceDescriptorServiceTests.cs` | 10 unit tests |
| `CommandParsingTests.cs` | 8 unit tests |

### Files Modified
| File | Changes |
|------|---------|
| `IInputHandler.cs` | +RollCommand, +SkillCheckCommand records |
| `IGameRenderer.cs` | +3 render method signatures |
| `IConfigurationProvider.cs` | +GetDiceDescriptors() |
| `JsonConfigurationProvider.cs` | +GetDiceDescriptors() implementation |
| `ConsoleInputHandler.cs` | +ParseRollCommand(), +ParseSkillCheckCommand() |
| `SpectreGameRenderer.cs` | +3 render method implementations |

## API Examples

```csharp
// Roll command
> roll 3d6+5
> roll 1d10 advantage

// Check command
> check perception
> check stealth moderate
> check athletics hard disadvantage
```

## Testing Summary

| Test File | Tests |
|-----------|-------|
| `DiceDescriptorServiceTests.cs` | 10 |
| `CommandParsingTests.cs` | 8 |
| **Total New** | **18** |

**Test Results:**
- Previous: 275 tests
- Current: 284 tests (+9 Application)
- All passing ✓
- Build: 0 errors, 0 warnings

## Acceptance Criteria

| ID | Criterion | Status |
|----|-----------|--------|
| AC-1 | Roll command parses notation | ✓ |
| AC-2 | Roll command supports advantage/disadvantage | ✓ |
| AC-3 | Check command parses skill ID | ✓ |
| AC-4 | Check command supports optional DC | ✓ |
| AC-5 | Descriptors load from JSON | ✓ |
| AC-6 | Critical results get flavor text | ✓ |
| AC-7 | Dice rolls render with panel | ✓ |
| AC-8 | Skill checks render with breakdown | ✓ |
| AC-9 | Combat rounds render with sections | ✓ |

## Dependencies

- **v0.0.5a** (Core Dice Engine): DicePool, DiceRollResult
- **v0.0.5b** (Skill Check System): SkillCheckResult, definitions
- **v0.0.5c** (Combat Integration): CombatRoundResult
- **Spectre.Console**: Rich TUI rendering

## Completion

This concludes the v0.0.5 Dice Pool System series:
- **v0.0.5a**: Core Dice Engine ✓
- **v0.0.5b**: Skill Check System ✓
- **v0.0.5c**: Combat Integration ✓
- **v0.0.5d**: Configuration & Polish ✓
