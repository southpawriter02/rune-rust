# v0.15.3b Design Specification: Persuasion System

**Version:** 0.15.3b
**Theme:** Persuasion System
**Author:** Claude
**Created:** 2026-01-17
**Status:** Draft
**Prerequisites:** v0.15.3a Complete (Social Interaction Framework with SocialContext, SocialResult, NpcDisposition, DispositionLevel)

---

## Table of Contents

1. [Overview](#1-overview)
2. [Dependencies](#2-dependencies)
3. [Architecture Diagrams](#3-architecture-diagrams)
4. [PersuasionRequest Enum](#4-persuasionrequest-enum)
5. [PersuasionContext Value Object](#5-persuasioncontext-value-object)
6. [PersuasionResult Value Object](#6-persuasionresult-value-object)
7. [ArgumentAlignment Value Object](#7-argumentalignment-value-object)
8. [IPersuasionService Interface](#8-ipersuasionservice-interface)
9. [PersuasionService Implementation](#9-persuasionservice-implementation)
10. [TrustShattered Fumble Consequence](#10-trustshattered-fumble-consequence)
11. [Configuration](#11-configuration)
12. [Commands](#12-commands)
13. [User-Facing Changes](#13-user-facing-changes)
14. [Logging Specifications](#14-logging-specifications)
15. [Unit Testing Requirements](#15-unit-testing-requirements)
16. [Use Cases](#16-use-cases)
17. [Deliverable Checklist](#17-deliverable-checklist)
18. [Acceptance Criteria](#18-acceptance-criteria)
19. [Future Considerations](#19-future-considerations)
20. [Implementation Notes](#20-implementation-notes)
21. [Document Metadata](#21-document-metadata)

---

## 1. Overview

### 1.1 Purpose

This document provides a comprehensive design specification for v0.15.3b, the Persuasion System phase. This part implements the honest convincing subsystem of the Rhetoric skill, allowing players to make requests of NPCs through logical arguments, emotional appeals, and evidence presentation. The key components are:

1. **PersuasionRequest Enum**: Categorizes requests by complexity from Trivial (DC 8) to Extreme (DC 24), determining the base difficulty of the persuasion attempt.

2. **PersuasionContext Value Object**: Extends `SocialContext` with persuasion-specific factors including argument alignment with NPC values, evidence provided, NPC stress state, and previous attempt tracking.

3. **PersuasionResult Value Object**: Captures persuasion-specific outcomes including request granted/denied, conviction depth on critical success, and the [Trust Shattered] fumble consequence.

4. **ArgumentAlignment Value Object**: Evaluates how well the player's argument aligns with or contradicts NPC values and beliefs, providing dice modifiers.

5. **PersuasionService**: Orchestrates persuasion attempts, building context, resolving checks, and applying outcomes including disposition changes and dialogue option locking.

This subsystem enables nuanced social interactions where players must consider NPC disposition, faction relationships, argument quality, and supporting evidence to successfully convince NPCs.

### 1.2 Current vs. Target Implementation

| Aspect | Current Implementation | Target Implementation |
|--------|------------------------|----------------------|
| **Request Complexity** | Generic DC | `PersuasionRequest` enum with 5 tiers (DC 8-24) |
| **Argument Quality** | Not tracked | `ArgumentAlignment` with value matching |
| **Evidence Support** | Not tracked | +2d10 for supporting proof |
| **NPC Values** | Not implemented | Value alignment modifiers (+1d10/-1d10) |
| **Previous Attempts** | Not tracked | Failed attempt tracking, option locking |
| **Critical Success** | Generic bonus | Deep conviction, additional dialogue options |
| **Fumble Consequence** | Generic failure | [Trust Shattered] - permanent persuasion lock |
| **Faction Modifiers** | Basic reputation | [Friendly]/[Unfriendly] faction dice modifiers |

### 1.3 Scope

**In Scope:**
- Define `PersuasionRequest` enum with 5 complexity tiers
- Define `PersuasionContext` value object with persuasion-specific factors
- Define `PersuasionResult` value object for persuasion outcomes
- Define `ArgumentAlignment` value object for value matching
- Create `IPersuasionService` interface for persuasion operations
- Implement `PersuasionService` with full persuasion logic
- Implement [Trust Shattered] fumble consequence
- Configuration file `persuasion-requests.json`
- Unit tests for persuasion mechanics (~3 tests)

**Out of Scope:**
- Deception system - v0.15.3c
- Intimidation system - v0.15.3d
- Negotiation system - v0.15.3e
- Interrogation system - v0.15.3f
- Cultural protocols - v0.15.3g
- Extended influence - v0.15.3h
- Specialization integration (Thul abilities) - v0.15.3i

### 1.4 Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Enums | 1 | `PersuasionRequest` |
| Value Objects | 3 | `PersuasionContext`, `PersuasionResult`, `ArgumentAlignment` |
| Interfaces | 1 | `IPersuasionService` |
| Services | 1 | `PersuasionService` |
| Fumble Types | 1 | `TrustShattered` (extension of `FumbleType`) |
| Configuration | 1 | `persuasion-requests.json` |
| Unit Tests | ~3 | Request type DC, value alignment, fumble consequence |

---

## 2. Dependencies

### 2.1 Required from v0.15.3a (Social Interaction Framework)

| Component | Location | Usage in v0.15.3b |
|-----------|----------|-------------------|
| `SocialInteractionType` | `Domain/Enums/SocialInteractionType.cs` | Set to `Persuasion` for context |
| `NpcDisposition` | `Domain/Enums/NpcDisposition.cs` | Provides disposition dice modifiers |
| `DispositionLevel` | `Domain/ValueObjects/DispositionLevel.cs` | Tracks NPC disposition changes |
| `SocialContext` | `Domain/ValueObjects/SocialContext.cs` | Base context for persuasion |
| `SocialResult` | `Domain/ValueObjects/SocialResult.cs` | Base result pattern |
| `SocialModifier` | `Domain/ValueObjects/SocialModifier.cs` | Argument/evidence modifiers |
| `SocialContextBuilder` | `Application/Services/SocialContextBuilder.cs` | Builds persuasion contexts |

### 2.2 Required from v0.15.0 (Dice Pool Refactor)

| Component | Location | Usage in v0.15.3b |
|-----------|----------|-------------------|
| `DiceRollResult` | `Domain/ValueObjects/DiceRollResult.cs` | Provides `NetSuccesses`, `IsFumble` |
| `IDiceRollerService` | `Application/Interfaces/IDiceRollerService.cs` | Performs persuasion dice rolls |
| `SkillOutcome` | `Domain/Enums/SkillOutcome.cs` | Outcome classification |

### 2.3 Required from v0.15.1b (Outcome Classification)

| Component | Location | Usage in v0.15.3b |
|-----------|----------|-------------------|
| `OutcomeDetails` | `Domain/ValueObjects/OutcomeDetails.cs` | Enhanced outcome metadata |
| `FumbleType` | `Domain/Enums/FumbleType.cs` | Extended with `TrustShattered` |
| `FumbleConsequence` | `Domain/Entities/FumbleConsequence.cs` | Tracks [Trust Shattered] |
| `IFumbleConsequenceService` | `Application/Interfaces/IFumbleConsequenceService.cs` | Creates fumble consequences |

### 2.4 Required from v0.15.1a (Skill Context & Modifiers)

| Component | Location | Usage in v0.15.3b |
|-----------|----------|-------------------|
| `SkillCheckService` | `Application/Services/SkillCheckService.cs` | Performs underlying skill check |
| `EquipmentModifier` | `Domain/ValueObjects/EquipmentModifier.cs` | Evidence items as equipment |

### 2.5 Required from Game State

| Component | Location | Usage in v0.15.3b |
|-----------|----------|-------------------|
| NPC Value System | `Domain/Entities/NpcValues.cs` | NPC beliefs for alignment checking |
| Faction Reputation | `Domain/Services/FactionService.cs` | Player standing with NPC's faction |
| Dialogue Option State | `Application/Services/DialogueService.cs` | Lock/unlock dialogue options |

### 2.6 Provides to Future Versions

| Version | Component | Usage |
|---------|-----------|-------|
| v0.15.3e | Negotiation System | Uses persuasion as one of four negotiation tactics |
| v0.15.3h | Extended Influence | Uses persuasion checks for influence accumulation |
| v0.15.3i | Specialization Integration | Thul [Voice of Reason] modifies persuasion failure |

---

## 3. Architecture Diagrams

### 3.1 Persuasion Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          PERSUASION FLOW                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  PERSUASION REQUEST                                                         │
│  Player: "Persuade merchant to give us a discount"                          │
│           │                                                                  │
│           ▼                                                                  │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                    CLASSIFY REQUEST COMPLEXITY                       │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │                                                                      │    │
│  │  Request: "Give us a discount"                                      │    │
│  │  Classification: Simple (DC 12)                                     │    │
│  │                                                                      │    │
│  │  PersuasionRequest Tiers:                                           │    │
│  │  ├── Trivial (DC 8)  - "Tell me the time"                          │    │
│  │  ├── Simple (DC 12)  - "Share your rations" ← SELECTED             │    │
│  │  ├── Moderate (DC 16) - "Help me fight"                            │    │
│  │  ├── Major (DC 20)   - "Attack faction enemies"                    │    │
│  │  └── Extreme (DC 24) - "Betray your clan leader"                   │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│           │                                                                  │
│           ▼                                                                  │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                    EVALUATE ARGUMENT ALIGNMENT                       │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │                                                                      │    │
│  │  NPC Values (merchant_helena):                                      │    │
│  │  ├── Profit-minded                                                  │    │
│  │  ├── Risk-averse                                                    │    │
│  │  └── Respects loyalty                                               │    │
│  │                                                                      │    │
│  │  Player Argument: "We've been regular customers"                    │    │
│  │  Alignment Check: Matches "Respects loyalty"                        │    │
│  │  Result: ArgumentAligned = true (+1d10)                             │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│           │                                                                  │
│           ▼                                                                  │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                    BUILD PERSUASION CONTEXT                          │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │                                                                      │    │
│  │  PersuasionContext                                                  │    │
│  │  ├── RequestType: Simple (DC 12)                                    │    │
│  │  ├── TargetId: "merchant_helena"                                    │    │
│  │  ├── TargetDisposition: NeutralPositive (30)                        │    │
│  │  ├── TargetFactionId: "merchants_guild"                             │    │
│  │  ├── ArgumentAligned: true                                          │    │
│  │  ├── EvidenceProvided: false                                        │    │
│  │  ├── NpcStressed: false                                             │    │
│  │  └── PreviousAttempts: 0                                            │    │
│  │                                                                      │    │
│  │  MODIFIER CALCULATION:                                              │    │
│  │  ├── Base DC: 12 (Simple request)                                   │    │
│  │  ├── Disposition: +1d10 (NeutralPositive)                           │    │
│  │  ├── Argument Alignment: +1d10 (matches values)                     │    │
│  │  ├── Faction Standing: +0 (neutral with merchants_guild)            │    │
│  │  └── Evidence: +0 (none provided)                                   │    │
│  │                                                                      │    │
│  │  Total Modifier: +2d10                                              │    │
│  │  Required Successes: 2 (DC 12 / 6)                                  │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│           │                                                                  │
│           ▼                                                                  │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                    PERFORM SKILL CHECK                               │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │                                                                      │    │
│  │  Attribute: WILL (3)                                                │    │
│  │  Skill: Rhetoric (2)                                                │    │
│  │  Base Pool: 5d10                                                    │    │
│  │  Modifiers: +2d10                                                   │    │
│  │  Final Pool: 7d10                                                   │    │
│  │                                                                      │    │
│  │  Roll: [10, 8, 6, 9, 4, 7, 8]                                       │    │
│  │  Successes: 4 (10, 8, 9, 8)                                         │    │
│  │  Botches: 0                                                         │    │
│  │  Net Successes: 4                                                   │    │
│  │                                                                      │    │
│  │  DC: 2                                                              │    │
│  │  Margin: 4 - 2 = 2                                                  │    │
│  │  Outcome: FullSuccess                                               │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│           │                                                                  │
│           ▼                                                                  │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                    APPLY PERSUASION OUTCOME                          │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │                                                                      │    │
│  │  PersuasionResult                                                   │    │
│  │  ├── Outcome: FullSuccess                                           │    │
│  │  ├── RequestGranted: true                                           │    │
│  │  ├── DispositionChange: +10                                         │    │
│  │  ├── NewDisposition: 40 (still NeutralPositive)                     │    │
│  │  ├── ReputationChange: +2 (merchants_guild)                         │    │
│  │  ├── UnlockedOptions: ["Request bulk pricing"]                      │    │
│  │  ├── LockedOptions: []                                              │    │
│  │  ├── ConvictionDepth: Moderate (margin 2)                           │    │
│  │  └── FumbleConsequence: null                                        │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│           │                                                                  │
│           ▼                                                                  │
│  OUTPUT: "Helena nods thoughtfully. 'You've been good customers.         │
│           I can offer you 10% off today's purchase.'"                    │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 Persuasion Request Complexity

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    PERSUASION REQUEST COMPLEXITY                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  REQUEST TIERS (Base DC):                                                   │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  TRIVIAL (DC 8)                                                     │    │
│  │  ─────────────────────────────────────────────────────────────────  │    │
│  │  Required Successes: 1-2                                            │    │
│  │  Description: Minimal personal cost or effort for NPC               │    │
│  │                                                                      │    │
│  │  Examples:                                                          │    │
│  │  ├── "Tell me the time"                                             │    │
│  │  ├── "Point me to the tavern"                                       │    │
│  │  ├── "Hold this for a moment"                                       │    │
│  │  └── "Repeat what you just said"                                    │    │
│  │                                                                      │    │
│  │  Typical Disposition Needed: Any (even Unfriendly may comply)       │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  SIMPLE (DC 12)                                                     │    │
│  │  ─────────────────────────────────────────────────────────────────  │    │
│  │  Required Successes: 2                                              │    │
│  │  Description: Small favor or minor inconvenience                    │    │
│  │                                                                      │    │
│  │  Examples:                                                          │    │
│  │  ├── "Share your rations"                                           │    │
│  │  ├── "Let me look at that"                                          │    │
│  │  ├── "Give me a small discount"                                     │    │
│  │  └── "Introduce me to your friend"                                  │    │
│  │                                                                      │    │
│  │  Typical Disposition Needed: Neutral or better                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  MODERATE (DC 16)                                                   │    │
│  │  ─────────────────────────────────────────────────────────────────  │    │
│  │  Required Successes: 3                                              │    │
│  │  Description: Meaningful assistance with some personal cost         │    │
│  │                                                                      │    │
│  │  Examples:                                                          │    │
│  │  ├── "Help me fight these enemies"                                  │    │
│  │  ├── "Lend me your weapon"                                          │    │
│  │  ├── "Share sensitive information"                                  │    │
│  │  └── "Vouch for me to your superior"                                │    │
│  │                                                                      │    │
│  │  Typical Disposition Needed: NeutralPositive or better              │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  MAJOR (DC 20)                                                      │    │
│  │  ─────────────────────────────────────────────────────────────────  │    │
│  │  Required Successes: 4                                              │    │
│  │  Description: Significant personal risk or faction conflict         │    │
│  │                                                                      │    │
│  │  Examples:                                                          │    │
│  │  ├── "Attack your faction's enemies"                                │    │
│  │  ├── "Give me your life savings"                                    │    │
│  │  ├── "Reveal faction secrets"                                       │    │
│  │  └── "Abandon your post"                                            │    │
│  │                                                                      │    │
│  │  Typical Disposition Needed: Friendly or better                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  EXTREME (DC 24)                                                    │    │
│  │  ─────────────────────────────────────────────────────────────────  │    │
│  │  Required Successes: 4+                                             │    │
│  │  Description: Life-altering decision, ultimate betrayal             │    │
│  │                                                                      │    │
│  │  Examples:                                                          │    │
│  │  ├── "Betray your clan leader"                                      │    │
│  │  ├── "Sacrifice yourself for my cause"                              │    │
│  │  ├── "Abandon everything you believe"                               │    │
│  │  └── "Kill your closest ally"                                       │    │
│  │                                                                      │    │
│  │  Typical Disposition Needed: Ally (often impossible otherwise)      │    │
│  │  Note: Many NPCs will refuse regardless of roll outcome             │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.3 Persuasion Modifier Matrix

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                      PERSUASION MODIFIER MATRIX                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  DISPOSITION MODIFIERS (from v0.15.3a)                                      │
│  ─────────────────────────────────────────────────────────────────────────  │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  DISPOSITION           │ DICE MODIFIER │ NOTES                      │    │
│  ├────────────────────────┼───────────────┼────────────────────────────┤    │
│  │  Ally (≥75)            │ +3d10         │ Will consider any request  │    │
│  │  Friendly (50-74)      │ +2d10         │ Open to reasonable asks    │    │
│  │  Neutral-Positive      │ +1d10         │ Willing to listen          │    │
│  │  Neutral (-9 to +9)    │ +0            │ Skeptical but fair         │    │
│  │  Unfriendly (-49→-10)  │ -1d10         │ Reluctant to help          │    │
│  │  Hostile (≤-50)        │ -2d10         │ May refuse outright        │    │
│  └────────────────────────┴───────────────┴────────────────────────────┘    │
│                                                                              │
│  ARGUMENT QUALITY MODIFIERS                                                 │
│  ─────────────────────────────────────────────────────────────────────────  │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  ARGUMENT FACTOR       │ MODIFIER      │ DESCRIPTION                │    │
│  ├────────────────────────┼───────────────┼────────────────────────────┤    │
│  │  Aligns with values    │ +1d10         │ Argument matches NPC       │    │
│  │                        │               │ beliefs or motivations     │    │
│  │  Contradicts values    │ -1d10         │ Argument opposes NPC       │    │
│  │                        │               │ core beliefs               │    │
│  │  Evidence supports     │ +2d10         │ Physical proof, documents, │    │
│  │                        │               │ witnesses                  │    │
│  └────────────────────────┴───────────────┴────────────────────────────┘    │
│                                                                              │
│  FACTION MODIFIERS                                                          │
│  ─────────────────────────────────────────────────────────────────────────  │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  FACTION STANDING      │ MODIFIER      │ WHEN APPLIED               │    │
│  ├────────────────────────┼───────────────┼────────────────────────────┤    │
│  │  [Honored] with NPC's  │ +1d10         │ NPC sees player as         │    │
│  │  faction               │               │ faction friend             │    │
│  │  [Friendly] with NPC's │ +0            │ Neutral faction treatment  │    │
│  │  faction               │               │                            │    │
│  │  [Unfriendly] with     │ -1d10         │ NPC is wary due to        │    │
│  │  NPC's faction         │               │ faction conflict           │    │
│  │  [Hostile] with NPC's  │ -2d10         │ NPC actively distrusts     │    │
│  │  faction               │               │ player                     │    │
│  └────────────────────────┴───────────────┴────────────────────────────┘    │
│                                                                              │
│  TARGET STATE MODIFIERS                                                     │
│  ─────────────────────────────────────────────────────────────────────────  │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  NPC STATUS            │ MODIFIER      │ EFFECT                     │    │
│  ├────────────────────────┼───────────────┼────────────────────────────┤    │
│  │  [Stressed]            │ NPC +1d10     │ Distracted, harder to      │    │
│  │                        │ resistance    │ reach emotionally          │    │
│  │  [Feared]              │ NPC +1d10     │ Defensive, suspicious      │    │
│  │                        │ resistance    │ of manipulation            │    │
│  │  [Grateful]            │ Player +1d10  │ Owes player a favor        │    │
│  │  [Relaxed]             │ Player +1d10  │ Guard down, receptive      │    │
│  └────────────────────────┴───────────────┴────────────────────────────┘    │
│                                                                              │
│  PREVIOUS ATTEMPT MODIFIERS                                                 │
│  ─────────────────────────────────────────────────────────────────────────  │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  ATTEMPT HISTORY       │ MODIFIER      │ EFFECT                     │    │
│  ├────────────────────────┼───────────────┼────────────────────────────┤    │
│  │  First attempt         │ +0            │ No penalty                 │    │
│  │  Second attempt        │ DC +2         │ NPC is growing impatient   │    │
│  │  Third+ attempt        │ DC +4         │ NPC is annoyed             │    │
│  │  Same argument used    │ DC +2         │ "You already said that"    │    │
│  │  New evidence provided │ DC -2         │ Fresh information resets   │    │
│  │                        │               │ some penalty               │    │
│  └────────────────────────┴───────────────┴────────────────────────────┘    │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.4 Persuasion Outcome Effects

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                      PERSUASION OUTCOME EFFECTS                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  CRITICAL SUCCESS (Margin ≥ 5)                                      │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │                                                                      │    │
│  │  Request Outcome:                                                   │    │
│  │  ├── Request granted fully                                          │    │
│  │  ├── May grant more than asked                                      │    │
│  │  └── NPC becomes genuinely convinced                                │    │
│  │                                                                      │    │
│  │  Relationship Effects:                                              │    │
│  │  ├── DispositionChange: +15                                         │    │
│  │  ├── ReputationChange: +5 (with NPC's faction)                      │    │
│  │  └── ConvictionDepth: Deep                                          │    │
│  │                                                                      │    │
│  │  Dialogue Effects:                                                  │    │
│  │  ├── Multiple new options unlocked                                  │    │
│  │  ├── NPC may volunteer additional information                       │    │
│  │  └── Future requests with this NPC easier (DC -2)                   │    │
│  │                                                                      │    │
│  │  Narrative: "Deep conviction achieved. The NPC is fully won over."  │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  FULL SUCCESS (Margin 1-4)                                          │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │                                                                      │    │
│  │  Request Outcome:                                                   │    │
│  │  ├── Request granted as asked                                       │    │
│  │  └── NPC complies willingly                                         │    │
│  │                                                                      │    │
│  │  Relationship Effects:                                              │    │
│  │  ├── DispositionChange: +10                                         │    │
│  │  ├── ReputationChange: +2 (with NPC's faction)                      │    │
│  │  └── ConvictionDepth: Moderate                                      │    │
│  │                                                                      │    │
│  │  Dialogue Effects:                                                  │    │
│  │  └── Related dialogue options may unlock                            │    │
│  │                                                                      │    │
│  │  Narrative: "Your argument finds purchase. The NPC agrees."         │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  MARGINAL SUCCESS (Margin = 0)                                      │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │                                                                      │    │
│  │  Request Outcome:                                                   │    │
│  │  ├── Request granted reluctantly                                    │    │
│  │  ├── NPC may impose conditions                                      │    │
│  │  └── Partial compliance possible                                    │    │
│  │                                                                      │    │
│  │  Relationship Effects:                                              │    │
│  │  ├── DispositionChange: +5                                          │    │
│  │  ├── ReputationChange: +0                                           │    │
│  │  └── ConvictionDepth: Shallow                                       │    │
│  │                                                                      │    │
│  │  Dialogue Effects:                                                  │    │
│  │  └── No new options unlocked                                        │    │
│  │                                                                      │    │
│  │  Narrative: "Barely convinced. The NPC agrees, but with             │    │
│  │              reservations."                                          │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  FAILURE (Margin < 0)                                               │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │                                                                      │    │
│  │  Request Outcome:                                                   │    │
│  │  ├── Request denied                                                 │    │
│  │  └── NPC remains unconvinced                                        │    │
│  │                                                                      │    │
│  │  Relationship Effects:                                              │    │
│  │  ├── DispositionChange: -5                                          │    │
│  │  ├── ReputationChange: -2 (with NPC's faction)                      │    │
│  │  └── PreviousAttempts: +1                                           │    │
│  │                                                                      │    │
│  │  Dialogue Effects:                                                  │    │
│  │  ├── This specific argument locked for this conversation            │    │
│  │  └── NPC remembers the failed attempt                               │    │
│  │                                                                      │    │
│  │  Narrative: "Your words fall flat. The NPC shakes their head."      │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  FUMBLE (0 Successes + ≥1 Botch)                                    │    │
│  │  [TRUST SHATTERED]                                                  │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │                                                                      │    │
│  │  Request Outcome:                                                   │    │
│  │  ├── Request denied permanently                                     │    │
│  │  └── NPC is deeply offended                                         │    │
│  │                                                                      │    │
│  │  Relationship Effects:                                              │    │
│  │  ├── DispositionChange: -30                                         │    │
│  │  ├── ReputationChange: -10 (with NPC's faction)                     │    │
│  │  └── FumbleConsequence: TrustShattered                              │    │
│  │                                                                      │    │
│  │  Dialogue Effects:                                                  │    │
│  │  ├── ALL persuasion options locked with this NPC                    │    │
│  │  ├── NPC may refuse to speak further                                │    │
│  │  └── NPC may spread negative reputation                             │    │
│  │                                                                      │    │
│  │  Recovery:                                                          │    │
│  │  ├── Complete quest that benefits NPC                               │    │
│  │  ├── Significant time passage (in-game weeks)                       │    │
│  │  └── Third-party intercession                                       │    │
│  │                                                                      │    │
│  │  Narrative: "Your words come out completely wrong. The NPC's        │    │
│  │              expression hardens. 'We're done here.'"                 │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.5 Layer Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           LAYER ARCHITECTURE                                 │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                      DOMAIN LAYER                                    │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │                                                                      │    │
│  │  ValueObjects/                                                      │    │
│  │  ├── PersuasionContext.cs           ←── NEW                        │    │
│  │  ├── PersuasionResult.cs            ←── NEW                        │    │
│  │  └── ArgumentAlignment.cs           ←── NEW                        │    │
│  │                                                                      │    │
│  │  Enums/                                                             │    │
│  │  ├── PersuasionRequest.cs           ←── NEW                        │    │
│  │  ├── ConvictionDepth.cs             ←── NEW                        │    │
│  │  └── FumbleType.cs                  ←── MODIFIED (add TrustShattered)│   │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                  │                                           │
│                                  │ uses                                      │
│                                  ▼                                           │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                    APPLICATION LAYER                                 │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │                                                                      │    │
│  │  Interfaces/                                                        │    │
│  │  └── IPersuasionService.cs          ←── NEW                        │    │
│  │                                                                      │    │
│  │  Services/                                                          │    │
│  │  └── PersuasionService.cs           ←── NEW                        │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                  │                                           │
│                                  │ uses                                      │
│                                  ▼                                           │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                  INFRASTRUCTURE LAYER                                │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │                                                                      │    │
│  │  Configuration/                                                     │    │
│  │  └── persuasion-requests.json       ←── NEW                        │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 4. PersuasionRequest Enum

### 4.1 Enum Definition

**File:** `src/Core/RuneAndRust.Domain/Enums/PersuasionRequest.cs`

```csharp
namespace RuneAndRust.Domain.Enums;

/// <summary>
/// Categorizes persuasion requests by complexity, determining base DC.
/// </summary>
/// <remarks>
/// <para>
/// Request complexity is determined by the personal cost or risk to the NPC.
/// Higher complexity requests require more successes and typically need
/// higher disposition levels to have reasonable chances of success.
/// </para>
/// <para>
/// Some requests may be impossible regardless of roll if the NPC's disposition
/// is too low or if the request contradicts the NPC's core values.
/// </para>
/// </remarks>
public enum PersuasionRequest
{
    /// <summary>
    /// Minimal cost or effort for the NPC. Almost always granted.
    /// </summary>
    /// <remarks>
    /// <para>Base DC: 8 (1-2 successes needed)</para>
    /// <para>Examples: "Tell me the time", "Point me to the tavern"</para>
    /// <para>Even Unfriendly NPCs may comply with trivial requests.</para>
    /// </remarks>
    Trivial = 0,

    /// <summary>
    /// Small favor or minor inconvenience to the NPC.
    /// </summary>
    /// <remarks>
    /// <para>Base DC: 12 (2 successes needed)</para>
    /// <para>Examples: "Share your rations", "Give me a small discount"</para>
    /// <para>Typically requires Neutral or better disposition.</para>
    /// </remarks>
    Simple = 1,

    /// <summary>
    /// Meaningful assistance with some personal cost to the NPC.
    /// </summary>
    /// <remarks>
    /// <para>Base DC: 16 (3 successes needed)</para>
    /// <para>Examples: "Help me fight", "Share sensitive information"</para>
    /// <para>Typically requires NeutralPositive or better disposition.</para>
    /// </remarks>
    Moderate = 2,

    /// <summary>
    /// Significant personal risk or potential faction conflict for the NPC.
    /// </summary>
    /// <remarks>
    /// <para>Base DC: 20 (4 successes needed)</para>
    /// <para>Examples: "Attack faction enemies", "Reveal faction secrets"</para>
    /// <para>Typically requires Friendly or better disposition.</para>
    /// </remarks>
    Major = 3,

    /// <summary>
    /// Life-altering decision, ultimate betrayal, or sacrifice.
    /// </summary>
    /// <remarks>
    /// <para>Base DC: 24 (4+ successes needed)</para>
    /// <para>Examples: "Betray your clan leader", "Sacrifice yourself"</para>
    /// <para>Typically requires Ally disposition; many NPCs will refuse outright.</para>
    /// <para>Some requests may be flagged as impossible by the game.</para>
    /// </remarks>
    Extreme = 4
}
```

### 4.2 Extension Methods

**File:** `src/Core/RuneAndRust.Domain/Extensions/PersuasionRequestExtensions.cs`

```csharp
namespace RuneAndRust.Domain.Extensions;

using RuneAndRust.Domain.Enums;

/// <summary>
/// Extension methods for <see cref="PersuasionRequest"/> enum.
/// </summary>
public static class PersuasionRequestExtensions
{
    /// <summary>
    /// Gets the base DC for this request complexity.
    /// </summary>
    /// <param name="request">The request complexity.</param>
    /// <returns>The base difficulty class.</returns>
    public static int GetBaseDc(this PersuasionRequest request)
    {
        return request switch
        {
            PersuasionRequest.Trivial => 8,
            PersuasionRequest.Simple => 12,
            PersuasionRequest.Moderate => 16,
            PersuasionRequest.Major => 20,
            PersuasionRequest.Extreme => 24,
            _ => 12
        };
    }

    /// <summary>
    /// Gets the number of successes typically required.
    /// </summary>
    /// <param name="request">The request complexity.</param>
    /// <returns>The target number of successes.</returns>
    public static int GetRequiredSuccesses(this PersuasionRequest request)
    {
        return request switch
        {
            PersuasionRequest.Trivial => 1,
            PersuasionRequest.Simple => 2,
            PersuasionRequest.Moderate => 3,
            PersuasionRequest.Major => 4,
            PersuasionRequest.Extreme => 4,
            _ => 2
        };
    }

    /// <summary>
    /// Gets the minimum disposition typically required for this request.
    /// </summary>
    /// <param name="request">The request complexity.</param>
    /// <returns>The minimum <see cref="NpcDisposition"/> for reasonable success chances.</returns>
    public static NpcDisposition GetMinimumDisposition(this PersuasionRequest request)
    {
        return request switch
        {
            PersuasionRequest.Trivial => NpcDisposition.Unfriendly,
            PersuasionRequest.Simple => NpcDisposition.Neutral,
            PersuasionRequest.Moderate => NpcDisposition.NeutralPositive,
            PersuasionRequest.Major => NpcDisposition.Friendly,
            PersuasionRequest.Extreme => NpcDisposition.Ally,
            _ => NpcDisposition.Neutral
        };
    }

    /// <summary>
    /// Gets whether this request may be refused outright regardless of roll.
    /// </summary>
    /// <param name="request">The request complexity.</param>
    /// <returns>True if the request may be impossible for some NPCs.</returns>
    public static bool MayBeImpossible(this PersuasionRequest request)
    {
        return request == PersuasionRequest.Extreme;
    }

    /// <summary>
    /// Gets a human-readable description of the request complexity.
    /// </summary>
    /// <param name="request">The request complexity.</param>
    /// <returns>A descriptive string for UI display.</returns>
    public static string GetDescription(this PersuasionRequest request)
    {
        return request switch
        {
            PersuasionRequest.Trivial => "Trivial (DC 8) - Minimal effort for NPC",
            PersuasionRequest.Simple => "Simple (DC 12) - Small favor or minor inconvenience",
            PersuasionRequest.Moderate => "Moderate (DC 16) - Meaningful assistance",
            PersuasionRequest.Major => "Major (DC 20) - Significant personal risk",
            PersuasionRequest.Extreme => "Extreme (DC 24) - Life-altering decision",
            _ => "Unknown request complexity"
        };
    }
}
```

---

## 5. PersuasionContext Value Object

### 5.1 Class Definition

**File:** `src/Core/RuneAndRust.Domain/ValueObjects/PersuasionContext.cs`

```csharp
namespace RuneAndRust.Domain.ValueObjects;

using RuneAndRust.Domain.Enums;
using RuneAndRust.Domain.Extensions;

/// <summary>
/// Encapsulates all factors affecting a persuasion attempt.
/// </summary>
/// <remarks>
/// <para>
/// The persuasion context extends <see cref="SocialContext"/> with factors
/// specific to persuasion attempts, including request complexity, argument
/// alignment with NPC values, evidence support, and attempt history.
/// </para>
/// <para>
/// This is an immutable value object created via the PersuasionService.
/// </para>
/// </remarks>
/// <param name="RequestType">The complexity tier of the request.</param>
/// <param name="TargetId">The NPC being persuaded.</param>
/// <param name="TargetDisposition">The NPC's current disposition.</param>
/// <param name="TargetFactionId">The faction the NPC belongs to.</param>
/// <param name="ArgumentAlignment">How well the argument aligns with NPC values.</param>
/// <param name="EvidenceProvided">Whether supporting evidence was presented.</param>
/// <param name="EvidenceDescription">Description of the evidence, if any.</param>
/// <param name="NpcStressed">Whether the NPC has [Stressed] status.</param>
/// <param name="NpcFeared">Whether the NPC has [Feared] status.</param>
/// <param name="NpcGrateful">Whether the NPC has [Grateful] status.</param>
/// <param name="PreviousAttempts">Number of previous failed attempts this conversation.</param>
/// <param name="SameArgumentUsed">Whether this exact argument was used before.</param>
/// <param name="PlayerFactionStanding">Player's reputation with NPC's faction.</param>
public readonly record struct PersuasionContext(
    PersuasionRequest RequestType,
    string TargetId,
    DispositionLevel TargetDisposition,
    string? TargetFactionId,
    ArgumentAlignment ArgumentAlignment,
    bool EvidenceProvided,
    string? EvidenceDescription,
    bool NpcStressed,
    bool NpcFeared,
    bool NpcGrateful,
    int PreviousAttempts,
    bool SameArgumentUsed,
    int PlayerFactionStanding)
{
    /// <summary>
    /// Gets the base DC from request complexity.
    /// </summary>
    public int BaseDc => RequestType.GetBaseDc();

    /// <summary>
    /// Gets the disposition dice modifier.
    /// </summary>
    public int DispositionModifier => TargetDisposition.DiceModifier;

    /// <summary>
    /// Gets the argument alignment dice modifier.
    /// </summary>
    public int ArgumentModifier => ArgumentAlignment.DiceModifier;

    /// <summary>
    /// Gets the evidence dice modifier (+2d10 if evidence provided).
    /// </summary>
    public int EvidenceModifier => EvidenceProvided ? 2 : 0;

    /// <summary>
    /// Gets the faction standing dice modifier.
    /// </summary>
    public int FactionModifier => PlayerFactionStanding switch
    {
        >= 75 => 1,   // Honored
        >= -24 => 0,  // Neutral range
        >= -74 => -1, // Unfriendly
        _ => -2       // Hostile
    };

    /// <summary>
    /// Gets the NPC status modifier (positive = NPC resistance, negative = player bonus).
    /// </summary>
    public int NpcStatusModifier
    {
        get
        {
            var modifier = 0;
            if (NpcStressed) modifier -= 1; // Harder to persuade stressed NPC
            if (NpcFeared) modifier -= 1;   // Harder to persuade fearful NPC
            if (NpcGrateful) modifier += 1; // Easier to persuade grateful NPC
            return modifier;
        }
    }

    /// <summary>
    /// Gets the previous attempt DC modifier.
    /// </summary>
    public int PreviousAttemptDcModifier
    {
        get
        {
            var modifier = PreviousAttempts switch
            {
                0 => 0,
                1 => 2,
                _ => 4
            };
            if (SameArgumentUsed) modifier += 2;
            return modifier;
        }
    }

    /// <summary>
    /// Gets the total dice pool modifier.
    /// </summary>
    public int TotalDiceModifier =>
        DispositionModifier +
        ArgumentModifier +
        EvidenceModifier +
        FactionModifier +
        NpcStatusModifier;

    /// <summary>
    /// Gets the total DC modifier.
    /// </summary>
    public int TotalDcModifier => PreviousAttemptDcModifier;

    /// <summary>
    /// Gets the effective DC after all modifiers.
    /// </summary>
    public int EffectiveDc => Math.Max(1, BaseDc + TotalDcModifier);

    /// <summary>
    /// Gets whether persuasion is likely to fail due to disposition.
    /// </summary>
    public bool IsUnlikelyDueToDisposition =>
        TargetDisposition.Category < RequestType.GetMinimumDisposition();

    /// <summary>
    /// Gets whether this request may be refused outright.
    /// </summary>
    public bool MayBeImpossible => RequestType.MayBeImpossible();

    /// <summary>
    /// Builds a detailed modifier breakdown for display.
    /// </summary>
    /// <returns>A multi-line string showing all modifiers.</returns>
    public string ToModifierBreakdown()
    {
        var lines = new List<string>
        {
            $"Persuasion: {RequestType.GetDescription()}",
            $"Target: {TargetId} ({TargetDisposition.Category.GetDescription()})"
        };

        if (DispositionModifier != 0)
        {
            var sign = DispositionModifier > 0 ? "+" : "";
            lines.Add($"  Disposition: {sign}{DispositionModifier}d10");
        }

        if (ArgumentModifier != 0)
        {
            var sign = ArgumentModifier > 0 ? "+" : "";
            var desc = ArgumentAlignment.IsAligned ? "aligns with values" : "contradicts values";
            lines.Add($"  Argument ({desc}): {sign}{ArgumentModifier}d10");
        }

        if (EvidenceProvided)
        {
            lines.Add($"  Evidence ({EvidenceDescription ?? "provided"}): +2d10");
        }

        if (FactionModifier != 0)
        {
            var sign = FactionModifier > 0 ? "+" : "";
            lines.Add($"  Faction standing: {sign}{FactionModifier}d10");
        }

        if (NpcStatusModifier != 0)
        {
            var sign = NpcStatusModifier > 0 ? "+" : "";
            var statuses = new List<string>();
            if (NpcStressed) statuses.Add("[Stressed]");
            if (NpcFeared) statuses.Add("[Feared]");
            if (NpcGrateful) statuses.Add("[Grateful]");
            lines.Add($"  NPC status ({string.Join(", ", statuses)}): {sign}{NpcStatusModifier}d10");
        }

        if (PreviousAttemptDcModifier != 0)
        {
            lines.Add($"  Previous attempts: DC +{PreviousAttemptDcModifier}");
        }

        var totalDice = TotalDiceModifier >= 0 ? $"+{TotalDiceModifier}d10" : $"{TotalDiceModifier}d10";
        lines.Add($"Total dice: {totalDice}");
        lines.Add($"Effective DC: {EffectiveDc}");

        if (IsUnlikelyDueToDisposition)
        {
            lines.Add($"WARNING: NPC disposition too low for this request type");
        }

        return string.Join(Environment.NewLine, lines);
    }

    /// <inheritdoc/>
    public override string ToString()
    {
        var dice = TotalDiceModifier >= 0 ? $"+{TotalDiceModifier}d10" : $"{TotalDiceModifier}d10";
        return $"Persuade {TargetId}: {RequestType} (DC {EffectiveDc}, {dice})";
    }
}
```

---

## 6. PersuasionResult Value Object

### 6.1 Class Definition

**File:** `src/Core/RuneAndRust.Domain/ValueObjects/PersuasionResult.cs`

```csharp
namespace RuneAndRust.Domain.ValueObjects;

using RuneAndRust.Domain.Enums;
using RuneAndRust.Domain.Entities;

/// <summary>
/// Represents the outcome of a persuasion attempt.
/// </summary>
/// <remarks>
/// <para>
/// Persuasion results include whether the request was granted, how deeply
/// the NPC was convinced (conviction depth), relationship changes, and
/// any dialogue options that were unlocked or locked as a result.
/// </para>
/// </remarks>
/// <param name="TargetId">The NPC that was persuaded.</param>
/// <param name="RequestType">The complexity of the request.</param>
/// <param name="Outcome">The skill check outcome.</param>
/// <param name="OutcomeDetails">Enhanced outcome metadata.</param>
/// <param name="RequestGranted">Whether the NPC agreed to the request.</param>
/// <param name="ConvictionDepth">How deeply the NPC was convinced.</param>
/// <param name="DispositionChange">Change to NPC disposition.</param>
/// <param name="NewDisposition">NPC disposition after the attempt.</param>
/// <param name="ReputationChange">Change to faction reputation.</param>
/// <param name="AffectedFactionId">The faction affected by reputation change.</param>
/// <param name="UnlockedOptions">Dialogue options now available.</param>
/// <param name="LockedOptions">Dialogue options now unavailable.</param>
/// <param name="FumbleConsequence">The fumble consequence if applicable.</param>
/// <param name="NarrativeText">Flavor text describing the outcome.</param>
public readonly record struct PersuasionResult(
    string TargetId,
    PersuasionRequest RequestType,
    SkillOutcome Outcome,
    OutcomeDetails OutcomeDetails,
    bool RequestGranted,
    ConvictionDepth ConvictionDepth,
    int DispositionChange,
    DispositionLevel NewDisposition,
    int ReputationChange,
    string? AffectedFactionId,
    IReadOnlyList<string> UnlockedOptions,
    IReadOnlyList<string> LockedOptions,
    FumbleConsequence? FumbleConsequence,
    string? NarrativeText)
{
    /// <summary>
    /// Gets whether the persuasion succeeded.
    /// </summary>
    public bool IsSuccess => Outcome >= SkillOutcome.MarginalSuccess;

    /// <summary>
    /// Gets whether this was a critical success.
    /// </summary>
    public bool IsCriticalSuccess => Outcome == SkillOutcome.CriticalSuccess;

    /// <summary>
    /// Gets whether this was a fumble.
    /// </summary>
    public bool IsFumble => Outcome == SkillOutcome.CriticalFailure;

    /// <summary>
    /// Gets whether [Trust Shattered] was triggered.
    /// </summary>
    public bool IsTrustShattered => FumbleConsequence?.FumbleType == FumbleType.TrustShattered;

    /// <summary>
    /// Gets whether any dialogue options were unlocked.
    /// </summary>
    public bool HasUnlockedOptions => UnlockedOptions.Count > 0;

    /// <summary>
    /// Gets whether any dialogue options were locked.
    /// </summary>
    public bool HasLockedOptions => LockedOptions.Count > 0;

    /// <summary>
    /// Creates a successful persuasion result.
    /// </summary>
    public static PersuasionResult CreateSuccess(
        string targetId,
        PersuasionRequest requestType,
        SkillOutcome outcome,
        OutcomeDetails details,
        DispositionLevel currentDisposition,
        string? factionId = null,
        IReadOnlyList<string>? unlockedOptions = null,
        string? narrativeText = null)
    {
        var convictionDepth = outcome switch
        {
            SkillOutcome.CriticalSuccess => ConvictionDepth.Deep,
            SkillOutcome.ExceptionalSuccess => ConvictionDepth.Strong,
            SkillOutcome.FullSuccess => ConvictionDepth.Moderate,
            SkillOutcome.MarginalSuccess => ConvictionDepth.Shallow,
            _ => ConvictionDepth.None
        };

        var dispositionChange = outcome switch
        {
            SkillOutcome.CriticalSuccess => 15,
            SkillOutcome.ExceptionalSuccess => 12,
            SkillOutcome.FullSuccess => 10,
            SkillOutcome.MarginalSuccess => 5,
            _ => 0
        };

        var reputationChange = outcome switch
        {
            SkillOutcome.CriticalSuccess => 5,
            SkillOutcome.ExceptionalSuccess => 3,
            SkillOutcome.FullSuccess => 2,
            _ => 0
        };

        return new PersuasionResult(
            TargetId: targetId,
            RequestType: requestType,
            Outcome: outcome,
            OutcomeDetails: details,
            RequestGranted: true,
            ConvictionDepth: convictionDepth,
            DispositionChange: dispositionChange,
            NewDisposition: currentDisposition.Modify(dispositionChange),
            ReputationChange: reputationChange,
            AffectedFactionId: factionId,
            UnlockedOptions: unlockedOptions ?? Array.Empty<string>(),
            LockedOptions: Array.Empty<string>(),
            FumbleConsequence: null,
            NarrativeText: narrativeText);
    }

    /// <summary>
    /// Creates a failed persuasion result.
    /// </summary>
    public static PersuasionResult CreateFailure(
        string targetId,
        PersuasionRequest requestType,
        SkillOutcome outcome,
        OutcomeDetails details,
        DispositionLevel currentDisposition,
        string? factionId = null,
        IReadOnlyList<string>? lockedOptions = null,
        string? narrativeText = null)
    {
        return new PersuasionResult(
            TargetId: targetId,
            RequestType: requestType,
            Outcome: outcome,
            OutcomeDetails: details,
            RequestGranted: false,
            ConvictionDepth: ConvictionDepth.None,
            DispositionChange: -5,
            NewDisposition: currentDisposition.Modify(-5),
            ReputationChange: -2,
            AffectedFactionId: factionId,
            UnlockedOptions: Array.Empty<string>(),
            LockedOptions: lockedOptions ?? Array.Empty<string>(),
            FumbleConsequence: null,
            NarrativeText: narrativeText);
    }

    /// <summary>
    /// Creates a fumble (Trust Shattered) persuasion result.
    /// </summary>
    public static PersuasionResult CreateTrustShattered(
        string targetId,
        PersuasionRequest requestType,
        OutcomeDetails details,
        DispositionLevel currentDisposition,
        FumbleConsequence consequence,
        string? factionId = null,
        IReadOnlyList<string>? lockedOptions = null,
        string? narrativeText = null)
    {
        return new PersuasionResult(
            TargetId: targetId,
            RequestType: requestType,
            Outcome: SkillOutcome.CriticalFailure,
            OutcomeDetails: details,
            RequestGranted: false,
            ConvictionDepth: ConvictionDepth.None,
            DispositionChange: -30,
            NewDisposition: currentDisposition.Modify(-30),
            ReputationChange: -10,
            AffectedFactionId: factionId,
            UnlockedOptions: Array.Empty<string>(),
            LockedOptions: lockedOptions ?? new[] { "*" }, // Lock all persuasion options
            FumbleConsequence: consequence,
            NarrativeText: narrativeText);
    }

    /// <summary>
    /// Gets a summary of the result for display.
    /// </summary>
    public string ToSummary()
    {
        var lines = new List<string>
        {
            $"Persuasion ({RequestType}): {Outcome}"
        };

        if (RequestGranted)
        {
            lines.Add($"Request GRANTED (Conviction: {ConvictionDepth})");
        }
        else
        {
            lines.Add("Request DENIED");
        }

        if (DispositionChange != 0)
        {
            var sign = DispositionChange > 0 ? "+" : "";
            lines.Add($"Disposition: {sign}{DispositionChange} → {NewDisposition.Category.GetDescription()}");
        }

        if (ReputationChange != 0 && !string.IsNullOrEmpty(AffectedFactionId))
        {
            var sign = ReputationChange > 0 ? "+" : "";
            lines.Add($"Reputation ({AffectedFactionId}): {sign}{ReputationChange}");
        }

        if (HasUnlockedOptions)
        {
            lines.Add($"Unlocked: {string.Join(", ", UnlockedOptions)}");
        }

        if (HasLockedOptions)
        {
            var lockedDisplay = LockedOptions.Contains("*") ? "ALL PERSUASION OPTIONS" : string.Join(", ", LockedOptions);
            lines.Add($"Locked: {lockedDisplay}");
        }

        if (IsTrustShattered)
        {
            lines.Add("FUMBLE: [Trust Shattered] - All future persuasion locked with this NPC");
        }

        return string.Join(Environment.NewLine, lines);
    }

    /// <inheritdoc/>
    public override string ToString() => ToSummary();
}

/// <summary>
/// Indicates how deeply an NPC was convinced by a persuasion attempt.
/// </summary>
public enum ConvictionDepth
{
    /// <summary>
    /// NPC was not convinced at all.
    /// </summary>
    None = 0,

    /// <summary>
    /// Barely convinced, may have reservations. Marginal success.
    /// </summary>
    Shallow = 1,

    /// <summary>
    /// Willingly agrees, standard compliance. Full success.
    /// </summary>
    Moderate = 2,

    /// <summary>
    /// Genuinely convinced, enthusiastic compliance. Exceptional success.
    /// </summary>
    Strong = 3,

    /// <summary>
    /// Deeply won over, may volunteer additional help. Critical success.
    /// </summary>
    Deep = 4
}
```

---

## 7. ArgumentAlignment Value Object

### 7.1 Class Definition

**File:** `src/Core/RuneAndRust.Domain/ValueObjects/ArgumentAlignment.cs`

```csharp
namespace RuneAndRust.Domain.ValueObjects;

/// <summary>
/// Evaluates how well an argument aligns with NPC values and beliefs.
/// </summary>
/// <remarks>
/// <para>
/// Argument alignment provides dice modifiers based on whether the player's
/// reasoning appeals to or contradicts the NPC's core values and motivations.
/// </para>
/// <para>
/// NPCs have defined value sets (e.g., "profit-minded", "risk-averse",
/// "respects loyalty") that can be matched against argument themes.
/// </para>
/// </remarks>
/// <param name="IsAligned">Whether the argument aligns with NPC values.</param>
/// <param name="IsContradicting">Whether the argument contradicts NPC values.</param>
/// <param name="MatchedValue">The NPC value that was matched, if any.</param>
/// <param name="ContradictedValue">The NPC value that was contradicted, if any.</param>
/// <param name="Reason">Explanation of the alignment evaluation.</param>
public readonly record struct ArgumentAlignment(
    bool IsAligned,
    bool IsContradicting,
    string? MatchedValue,
    string? ContradictedValue,
    string? Reason)
{
    /// <summary>
    /// Gets the dice modifier based on alignment.
    /// </summary>
    /// <remarks>
    /// Returns +1 if aligned, -1 if contradicting, 0 otherwise.
    /// These are mutually exclusive in normal circumstances.
    /// </remarks>
    public int DiceModifier
    {
        get
        {
            if (IsAligned) return 1;
            if (IsContradicting) return -1;
            return 0;
        }
    }

    /// <summary>
    /// Gets whether this alignment provides any modifier.
    /// </summary>
    public bool HasModifier => IsAligned || IsContradicting;

    /// <summary>
    /// Creates a neutral alignment (no match or contradiction).
    /// </summary>
    public static ArgumentAlignment CreateNeutral()
    {
        return new ArgumentAlignment(
            IsAligned: false,
            IsContradicting: false,
            MatchedValue: null,
            ContradictedValue: null,
            Reason: "Argument does not strongly relate to NPC values");
    }

    /// <summary>
    /// Creates an aligned argument.
    /// </summary>
    /// <param name="matchedValue">The NPC value that was matched.</param>
    /// <param name="reason">Explanation of why the argument aligns.</param>
    public static ArgumentAlignment CreateAligned(string matchedValue, string? reason = null)
    {
        return new ArgumentAlignment(
            IsAligned: true,
            IsContradicting: false,
            MatchedValue: matchedValue,
            ContradictedValue: null,
            Reason: reason ?? $"Argument appeals to NPC's {matchedValue} value");
    }

    /// <summary>
    /// Creates a contradicting argument.
    /// </summary>
    /// <param name="contradictedValue">The NPC value that was contradicted.</param>
    /// <param name="reason">Explanation of why the argument contradicts.</param>
    public static ArgumentAlignment CreateContradicting(string contradictedValue, string? reason = null)
    {
        return new ArgumentAlignment(
            IsAligned: false,
            IsContradicting: true,
            MatchedValue: null,
            ContradictedValue: contradictedValue,
            Reason: reason ?? $"Argument conflicts with NPC's {contradictedValue} value");
    }

    /// <summary>
    /// Evaluates argument alignment against a set of NPC values.
    /// </summary>
    /// <param name="argumentThemes">The themes present in the player's argument.</param>
    /// <param name="npcValues">The NPC's core values and motivations.</param>
    /// <param name="npcDislikes">Values the NPC opposes or dislikes.</param>
    /// <returns>An ArgumentAlignment based on the evaluation.</returns>
    public static ArgumentAlignment Evaluate(
        IEnumerable<string> argumentThemes,
        IEnumerable<string> npcValues,
        IEnumerable<string> npcDislikes)
    {
        var themes = argumentThemes.ToHashSet(StringComparer.OrdinalIgnoreCase);
        var values = npcValues.ToHashSet(StringComparer.OrdinalIgnoreCase);
        var dislikes = npcDislikes.ToHashSet(StringComparer.OrdinalIgnoreCase);

        // Check for contradictions first (they take priority)
        var contradiction = themes.Intersect(dislikes, StringComparer.OrdinalIgnoreCase).FirstOrDefault();
        if (contradiction != null)
        {
            return CreateContradicting(contradiction);
        }

        // Check for alignment
        var match = themes.Intersect(values, StringComparer.OrdinalIgnoreCase).FirstOrDefault();
        if (match != null)
        {
            return CreateAligned(match);
        }

        return CreateNeutral();
    }

    /// <summary>
    /// Gets a human-readable description of the alignment.
    /// </summary>
    public string ToDescription()
    {
        if (IsAligned)
        {
            return $"Aligned (+1d10): Appeals to '{MatchedValue}'";
        }
        if (IsContradicting)
        {
            return $"Contradicts (-1d10): Conflicts with '{ContradictedValue}'";
        }
        return "Neutral: No strong value alignment";
    }

    /// <inheritdoc/>
    public override string ToString() => ToDescription();
}
```

---

## 8. IPersuasionService Interface

### 8.1 Interface Definition

**File:** `src/Core/RuneAndRust.Application/Interfaces/IPersuasionService.cs`

```csharp
namespace RuneAndRust.Application.Interfaces;

using RuneAndRust.Domain.Enums;
using RuneAndRust.Domain.ValueObjects;
using RuneAndRust.Domain.Entities;

/// <summary>
/// Service interface for handling persuasion attempts.
/// </summary>
/// <remarks>
/// <para>
/// The persuasion service orchestrates the complete persuasion flow:
/// building context, evaluating argument alignment, performing skill checks,
/// and applying outcomes including disposition and reputation changes.
/// </para>
/// </remarks>
public interface IPersuasionService
{
    /// <summary>
    /// Attempts to persuade an NPC to grant a request.
    /// </summary>
    /// <param name="characterId">The character making the persuasion attempt.</param>
    /// <param name="targetId">The NPC being persuaded.</param>
    /// <param name="requestType">The complexity of the request.</param>
    /// <param name="argumentThemes">Themes present in the player's argument.</param>
    /// <param name="evidenceItemId">Optional evidence item to support the argument.</param>
    /// <returns>The result of the persuasion attempt.</returns>
    Task<PersuasionResult> AttemptPersuasionAsync(
        string characterId,
        string targetId,
        PersuasionRequest requestType,
        IReadOnlyList<string> argumentThemes,
        string? evidenceItemId = null);

    /// <summary>
    /// Builds a persuasion context without performing the check.
    /// </summary>
    /// <param name="characterId">The character making the persuasion attempt.</param>
    /// <param name="targetId">The NPC being persuaded.</param>
    /// <param name="requestType">The complexity of the request.</param>
    /// <param name="argumentThemes">Themes present in the player's argument.</param>
    /// <param name="evidenceItemId">Optional evidence item.</param>
    /// <returns>The persuasion context with all modifiers calculated.</returns>
    Task<PersuasionContext> BuildContextAsync(
        string characterId,
        string targetId,
        PersuasionRequest requestType,
        IReadOnlyList<string> argumentThemes,
        string? evidenceItemId = null);

    /// <summary>
    /// Evaluates argument alignment against NPC values.
    /// </summary>
    /// <param name="targetId">The NPC to evaluate against.</param>
    /// <param name="argumentThemes">Themes present in the player's argument.</param>
    /// <returns>The argument alignment evaluation.</returns>
    Task<ArgumentAlignment> EvaluateArgumentAlignmentAsync(
        string targetId,
        IReadOnlyList<string> argumentThemes);

    /// <summary>
    /// Checks if persuasion is currently blocked with an NPC.
    /// </summary>
    /// <param name="characterId">The character attempting persuasion.</param>
    /// <param name="targetId">The NPC to check.</param>
    /// <returns>True if [Trust Shattered] or similar consequence is active.</returns>
    Task<bool> IsPersuasionBlockedAsync(string characterId, string targetId);

    /// <summary>
    /// Gets the current [Trust Shattered] consequence if active.
    /// </summary>
    /// <param name="characterId">The character to check.</param>
    /// <param name="targetId">The NPC to check.</param>
    /// <returns>The active fumble consequence, or null if none.</returns>
    Task<FumbleConsequence?> GetTrustShatteredConsequenceAsync(string characterId, string targetId);

    /// <summary>
    /// Attempts to recover from [Trust Shattered] through a specific action.
    /// </summary>
    /// <param name="characterId">The character attempting recovery.</param>
    /// <param name="targetId">The NPC to recover trust with.</param>
    /// <param name="recoveryAction">The action taken to recover (e.g., quest completion).</param>
    /// <returns>True if trust was successfully recovered.</returns>
    Task<bool> AttemptTrustRecoveryAsync(
        string characterId,
        string targetId,
        string recoveryAction);

    /// <summary>
    /// Gets the number of previous persuasion attempts this conversation.
    /// </summary>
    /// <param name="characterId">The character making attempts.</param>
    /// <param name="targetId">The NPC being persuaded.</param>
    /// <returns>The number of previous failed attempts.</returns>
    Task<int> GetPreviousAttemptsAsync(string characterId, string targetId);

    /// <summary>
    /// Records a persuasion attempt for tracking purposes.
    /// </summary>
    /// <param name="characterId">The character making the attempt.</param>
    /// <param name="targetId">The NPC being persuaded.</param>
    /// <param name="result">The result of the attempt.</param>
    Task RecordAttemptAsync(string characterId, string targetId, PersuasionResult result);
}
```

---

## 9. PersuasionService Implementation

### 9.1 Class Definition

**File:** `src/Core/RuneAndRust.Application/Services/PersuasionService.cs`

```csharp
namespace RuneAndRust.Application.Services;

using RuneAndRust.Application.Interfaces;
using RuneAndRust.Domain.Enums;
using RuneAndRust.Domain.ValueObjects;
using RuneAndRust.Domain.Entities;
using RuneAndRust.Domain.Extensions;
using Microsoft.Extensions.Logging;

/// <summary>
/// Service for handling persuasion attempts.
/// </summary>
public class PersuasionService : IPersuasionService
{
    private readonly ISkillCheckService _skillCheckService;
    private readonly INpcService _npcService;
    private readonly IFactionService _factionService;
    private readonly IFumbleConsequenceService _fumbleConsequenceService;
    private readonly IDialogueService _dialogueService;
    private readonly IInventoryService _inventoryService;
    private readonly IStatusEffectService _statusEffectService;
    private readonly ILogger<PersuasionService> _logger;

    // Track previous attempts per conversation (character -> target -> count)
    private readonly Dictionary<string, Dictionary<string, int>> _previousAttempts = new();
    private readonly Dictionary<string, Dictionary<string, HashSet<string>>> _usedArguments = new();

    public PersuasionService(
        ISkillCheckService skillCheckService,
        INpcService npcService,
        IFactionService factionService,
        IFumbleConsequenceService fumbleConsequenceService,
        IDialogueService dialogueService,
        IInventoryService inventoryService,
        IStatusEffectService statusEffectService,
        ILogger<PersuasionService> logger)
    {
        _skillCheckService = skillCheckService;
        _npcService = npcService;
        _factionService = factionService;
        _fumbleConsequenceService = fumbleConsequenceService;
        _dialogueService = dialogueService;
        _inventoryService = inventoryService;
        _statusEffectService = statusEffectService;
        _logger = logger;
    }

    /// <inheritdoc/>
    public async Task<PersuasionResult> AttemptPersuasionAsync(
        string characterId,
        string targetId,
        PersuasionRequest requestType,
        IReadOnlyList<string> argumentThemes,
        string? evidenceItemId = null)
    {
        _logger.LogDebug("Persuasion attempt: {CharacterId} → {TargetId}, Request: {RequestType}",
            characterId, targetId, requestType);

        // Check if persuasion is blocked
        if (await IsPersuasionBlockedAsync(characterId, targetId))
        {
            var consequence = await GetTrustShatteredConsequenceAsync(characterId, targetId);
            _logger.LogInformation("Persuasion blocked by [Trust Shattered] for {TargetId}", targetId);

            return new PersuasionResult(
                TargetId: targetId,
                RequestType: requestType,
                Outcome: SkillOutcome.Failure,
                OutcomeDetails: new OutcomeDetails(SkillOutcome.Failure, -99, false, false),
                RequestGranted: false,
                ConvictionDepth: ConvictionDepth.None,
                DispositionChange: 0,
                NewDisposition: (await _npcService.GetDispositionAsync(targetId)),
                ReputationChange: 0,
                AffectedFactionId: null,
                UnlockedOptions: Array.Empty<string>(),
                LockedOptions: new[] { "*" },
                FumbleConsequence: consequence,
                NarrativeText: $"{targetId} refuses to speak with you. The trust between you has been shattered.");
        }

        // Build context
        var context = await BuildContextAsync(characterId, targetId, requestType, argumentThemes, evidenceItemId);

        // Check if request is impossible
        if (context.MayBeImpossible)
        {
            var npcWillRefuse = await _npcService.WillRefuseExtremeRequestAsync(targetId, characterId);
            if (npcWillRefuse)
            {
                _logger.LogInformation("NPC {TargetId} will refuse extreme request regardless of roll", targetId);
                return CreateImpossibleResult(context);
            }
        }

        // Perform skill check
        var checkResult = await _skillCheckService.PerformCheckWithContextAsync(
            characterId: characterId,
            skillId: "rhetoric",
            difficultyClass: context.EffectiveDc,
            additionalDice: context.TotalDiceModifier);

        // Process result
        var result = ProcessOutcome(context, checkResult, characterId);

        // Apply effects
        await ApplyPersuasionEffectsAsync(characterId, targetId, result, argumentThemes);

        // Record attempt
        await RecordAttemptAsync(characterId, targetId, result);

        _logger.LogInformation("Persuasion result: {Outcome}, Request granted: {Granted}",
            result.Outcome, result.RequestGranted);

        return result;
    }

    /// <inheritdoc/>
    public async Task<PersuasionContext> BuildContextAsync(
        string characterId,
        string targetId,
        PersuasionRequest requestType,
        IReadOnlyList<string> argumentThemes,
        string? evidenceItemId = null)
    {
        var disposition = await _npcService.GetDispositionAsync(targetId);
        var factionId = await _npcService.GetFactionIdAsync(targetId);
        var factionStanding = factionId != null
            ? await _factionService.GetStandingAsync(characterId, factionId)
            : 0;

        var argumentAlignment = await EvaluateArgumentAlignmentAsync(targetId, argumentThemes);

        var hasEvidence = false;
        string? evidenceDescription = null;
        if (!string.IsNullOrEmpty(evidenceItemId))
        {
            var item = await _inventoryService.GetItemAsync(characterId, evidenceItemId);
            if (item != null && item.CanBeEvidence)
            {
                hasEvidence = true;
                evidenceDescription = item.DisplayName;
            }
        }

        var npcStressed = await _statusEffectService.HasStatusAsync(targetId, StatusEffectId.Stressed);
        var npcFeared = await _statusEffectService.HasStatusAsync(targetId, StatusEffectId.Feared);
        var npcGrateful = await _statusEffectService.HasStatusAsync(targetId, StatusEffectId.Grateful);

        var previousAttempts = await GetPreviousAttemptsAsync(characterId, targetId);
        var sameArgumentUsed = await CheckSameArgumentUsedAsync(characterId, targetId, argumentThemes);

        return new PersuasionContext(
            RequestType: requestType,
            TargetId: targetId,
            TargetDisposition: disposition,
            TargetFactionId: factionId,
            ArgumentAlignment: argumentAlignment,
            EvidenceProvided: hasEvidence,
            EvidenceDescription: evidenceDescription,
            NpcStressed: npcStressed,
            NpcFeared: npcFeared,
            NpcGrateful: npcGrateful,
            PreviousAttempts: previousAttempts,
            SameArgumentUsed: sameArgumentUsed,
            PlayerFactionStanding: factionStanding);
    }

    /// <inheritdoc/>
    public async Task<ArgumentAlignment> EvaluateArgumentAlignmentAsync(
        string targetId,
        IReadOnlyList<string> argumentThemes)
    {
        var npcValues = await _npcService.GetValuesAsync(targetId);
        var npcDislikes = await _npcService.GetDislikesAsync(targetId);

        return ArgumentAlignment.Evaluate(argumentThemes, npcValues, npcDislikes);
    }

    /// <inheritdoc/>
    public async Task<bool> IsPersuasionBlockedAsync(string characterId, string targetId)
    {
        var consequence = await GetTrustShatteredConsequenceAsync(characterId, targetId);
        return consequence != null && consequence.IsActive;
    }

    /// <inheritdoc/>
    public async Task<FumbleConsequence?> GetTrustShatteredConsequenceAsync(string characterId, string targetId)
    {
        var consequences = await _fumbleConsequenceService.GetActiveConsequencesAsync(characterId);
        return consequences.FirstOrDefault(c =>
            c.FumbleType == FumbleType.TrustShattered &&
            c.TargetId == targetId);
    }

    /// <inheritdoc/>
    public async Task<bool> AttemptTrustRecoveryAsync(
        string characterId,
        string targetId,
        string recoveryAction)
    {
        var consequence = await GetTrustShatteredConsequenceAsync(characterId, targetId);
        if (consequence == null)
        {
            return true; // No consequence to recover from
        }

        // Check if recovery action matches recovery condition
        if (consequence.RecoveryCondition != null &&
            recoveryAction.Contains(consequence.RecoveryCondition, StringComparison.OrdinalIgnoreCase))
        {
            await _fumbleConsequenceService.DeactivateConsequenceAsync(consequence.Id);
            _logger.LogInformation("Trust recovered with {TargetId} via {Action}", targetId, recoveryAction);
            return true;
        }

        return false;
    }

    /// <inheritdoc/>
    public Task<int> GetPreviousAttemptsAsync(string characterId, string targetId)
    {
        if (_previousAttempts.TryGetValue(characterId, out var targetAttempts) &&
            targetAttempts.TryGetValue(targetId, out var count))
        {
            return Task.FromResult(count);
        }
        return Task.FromResult(0);
    }

    /// <inheritdoc/>
    public Task RecordAttemptAsync(string characterId, string targetId, PersuasionResult result)
    {
        if (!result.RequestGranted)
        {
            // Increment failed attempt counter
            if (!_previousAttempts.ContainsKey(characterId))
            {
                _previousAttempts[characterId] = new Dictionary<string, int>();
            }
            if (!_previousAttempts[characterId].ContainsKey(targetId))
            {
                _previousAttempts[characterId][targetId] = 0;
            }
            _previousAttempts[characterId][targetId]++;
        }
        else
        {
            // Reset on success
            if (_previousAttempts.TryGetValue(characterId, out var targetAttempts))
            {
                targetAttempts.Remove(targetId);
            }
        }

        return Task.CompletedTask;
    }

    private PersuasionResult ProcessOutcome(
        PersuasionContext context,
        SkillCheckResult checkResult,
        string characterId)
    {
        var outcome = checkResult.Outcome;
        var details = checkResult.OutcomeDetails;

        return outcome switch
        {
            SkillOutcome.CriticalSuccess => PersuasionResult.CreateSuccess(
                context.TargetId,
                context.RequestType,
                outcome,
                details,
                context.TargetDisposition,
                context.TargetFactionId,
                GetUnlockedOptions(context.TargetId, ConvictionDepth.Deep),
                "Your words resonate deeply. The NPC is fully convinced."),

            SkillOutcome.ExceptionalSuccess or SkillOutcome.FullSuccess => PersuasionResult.CreateSuccess(
                context.TargetId,
                context.RequestType,
                outcome,
                details,
                context.TargetDisposition,
                context.TargetFactionId,
                GetUnlockedOptions(context.TargetId, ConvictionDepth.Moderate),
                "Your argument finds purchase. The NPC agrees."),

            SkillOutcome.MarginalSuccess => PersuasionResult.CreateSuccess(
                context.TargetId,
                context.RequestType,
                outcome,
                details,
                context.TargetDisposition,
                context.TargetFactionId,
                narrativeText: "Barely convinced, the NPC agrees with reservations."),

            SkillOutcome.Failure => PersuasionResult.CreateFailure(
                context.TargetId,
                context.RequestType,
                outcome,
                details,
                context.TargetDisposition,
                context.TargetFactionId,
                GetLockedOptions(context.TargetId),
                "Your words fall flat. The NPC shakes their head."),

            SkillOutcome.CriticalFailure => CreateTrustShatteredResult(context, details, characterId),

            _ => PersuasionResult.CreateFailure(
                context.TargetId,
                context.RequestType,
                outcome,
                details,
                context.TargetDisposition,
                context.TargetFactionId)
        };
    }

    private PersuasionResult CreateTrustShatteredResult(
        PersuasionContext context,
        OutcomeDetails details,
        string characterId)
    {
        var consequence = new FumbleConsequence(
            Id: Guid.NewGuid().ToString(),
            CharacterId: characterId,
            FumbleType: FumbleType.TrustShattered,
            TargetId: context.TargetId,
            SkillId: "rhetoric",
            Description: $"Your attempt at persuasion backfired catastrophically. {context.TargetId} will no longer listen to your arguments.",
            CreatedAt: DateTime.UtcNow,
            RecoveryCondition: $"complete_quest_for_{context.TargetId}");

        return PersuasionResult.CreateTrustShattered(
            context.TargetId,
            context.RequestType,
            details,
            context.TargetDisposition,
            consequence,
            context.TargetFactionId,
            narrativeText: $"Your words come out completely wrong. {context.TargetId}'s expression hardens. 'We're done here.'");
    }

    private PersuasionResult CreateImpossibleResult(PersuasionContext context)
    {
        return new PersuasionResult(
            TargetId: context.TargetId,
            RequestType: context.RequestType,
            Outcome: SkillOutcome.Failure,
            OutcomeDetails: new OutcomeDetails(SkillOutcome.Failure, -99, false, false),
            RequestGranted: false,
            ConvictionDepth: ConvictionDepth.None,
            DispositionChange: 0,
            NewDisposition: context.TargetDisposition,
            ReputationChange: 0,
            AffectedFactionId: context.TargetFactionId,
            UnlockedOptions: Array.Empty<string>(),
            LockedOptions: Array.Empty<string>(),
            FumbleConsequence: null,
            NarrativeText: $"{context.TargetId} looks at you incredulously. 'That's not something I would ever do, no matter what you say.'");
    }

    private async Task ApplyPersuasionEffectsAsync(
        string characterId,
        string targetId,
        PersuasionResult result,
        IReadOnlyList<string> argumentThemes)
    {
        // Apply disposition change
        if (result.DispositionChange != 0)
        {
            await _npcService.ModifyDispositionAsync(targetId, result.DispositionChange);
        }

        // Apply reputation change
        if (result.ReputationChange != 0 && !string.IsNullOrEmpty(result.AffectedFactionId))
        {
            await _factionService.ModifyStandingAsync(characterId, result.AffectedFactionId, result.ReputationChange);
        }

        // Lock/unlock dialogue options
        foreach (var option in result.UnlockedOptions)
        {
            await _dialogueService.UnlockOptionAsync(characterId, targetId, option);
        }

        foreach (var option in result.LockedOptions)
        {
            if (option == "*")
            {
                await _dialogueService.LockAllPersuasionOptionsAsync(characterId, targetId);
            }
            else
            {
                await _dialogueService.LockOptionAsync(characterId, targetId, option);
            }
        }

        // Record fumble consequence
        if (result.FumbleConsequence != null)
        {
            await _fumbleConsequenceService.AddConsequenceAsync(result.FumbleConsequence);
        }

        // Track used arguments
        TrackUsedArguments(characterId, targetId, argumentThemes);
    }

    private async Task<bool> CheckSameArgumentUsedAsync(
        string characterId,
        string targetId,
        IReadOnlyList<string> argumentThemes)
    {
        if (!_usedArguments.TryGetValue(characterId, out var targetArgs) ||
            !targetArgs.TryGetValue(targetId, out var usedThemes))
        {
            return false;
        }

        return argumentThemes.Any(t => usedThemes.Contains(t, StringComparer.OrdinalIgnoreCase));
    }

    private void TrackUsedArguments(string characterId, string targetId, IReadOnlyList<string> argumentThemes)
    {
        if (!_usedArguments.ContainsKey(characterId))
        {
            _usedArguments[characterId] = new Dictionary<string, HashSet<string>>();
        }
        if (!_usedArguments[characterId].ContainsKey(targetId))
        {
            _usedArguments[characterId][targetId] = new HashSet<string>(StringComparer.OrdinalIgnoreCase);
        }

        foreach (var theme in argumentThemes)
        {
            _usedArguments[characterId][targetId].Add(theme);
        }
    }

    private IReadOnlyList<string> GetUnlockedOptions(string targetId, ConvictionDepth depth)
    {
        // This would be populated from dialogue configuration
        // Placeholder implementation
        return depth switch
        {
            ConvictionDepth.Deep => new[] { "request_favor", "request_information", "request_alliance" },
            ConvictionDepth.Strong => new[] { "request_favor", "request_information" },
            ConvictionDepth.Moderate => new[] { "request_favor" },
            _ => Array.Empty<string>()
        };
    }

    private IReadOnlyList<string> GetLockedOptions(string targetId)
    {
        // Return the current argument as locked on failure
        return new[] { "current_argument" };
    }
}
```

---

## 10. TrustShattered Fumble Consequence

### 10.1 FumbleType Extension

**File:** `src/Core/RuneAndRust.Domain/Enums/FumbleType.cs` (modification)

```csharp
// Add to existing FumbleType enum:

/// <summary>
/// Catastrophic persuasion failure. All persuasion options are locked
/// with the target NPC until recovery conditions are met.
/// </summary>
/// <remarks>
/// <para>
/// Recovery requires:
/// <list type="bullet">
///   <item><description>Completing a quest that benefits the NPC</description></item>
///   <item><description>Significant in-game time passage (weeks)</description></item>
///   <item><description>Third-party intercession</description></item>
/// </list>
/// </para>
/// <para>
/// Effects:
/// <list type="bullet">
///   <item><description>Disposition: -30</description></item>
///   <item><description>Reputation: -10 with NPC's faction</description></item>
///   <item><description>All persuasion dialogue options locked</description></item>
///   <item><description>NPC may refuse further conversation</description></item>
/// </list>
/// </para>
/// </remarks>
TrustShattered = 100,
```

---

## 11. Configuration

### 11.1 Persuasion Requests Configuration

**File:** `src/Infrastructure/RuneAndRust.Infrastructure/Configuration/persuasion-requests.json`

```json
{
  "$schema": "./schemas/persuasion-requests.schema.json",
  "version": "0.15.3b",
  "description": "Persuasion request complexity definitions and modifiers",

  "requestTiers": {
    "trivial": {
      "id": "trivial",
      "displayName": "Trivial Request",
      "baseDc": 8,
      "requiredSuccesses": 1,
      "minimumDisposition": "Unfriendly",
      "mayBeImpossible": false,
      "examples": [
        "Tell me the time",
        "Point me to the tavern",
        "Hold this for a moment"
      ],
      "description": "Minimal cost or effort for the NPC"
    },
    "simple": {
      "id": "simple",
      "displayName": "Simple Request",
      "baseDc": 12,
      "requiredSuccesses": 2,
      "minimumDisposition": "Neutral",
      "mayBeImpossible": false,
      "examples": [
        "Share your rations",
        "Give me a small discount",
        "Introduce me to your friend"
      ],
      "description": "Small favor or minor inconvenience"
    },
    "moderate": {
      "id": "moderate",
      "displayName": "Moderate Request",
      "baseDc": 16,
      "requiredSuccesses": 3,
      "minimumDisposition": "NeutralPositive",
      "mayBeImpossible": false,
      "examples": [
        "Help me fight these enemies",
        "Lend me your weapon",
        "Share sensitive information"
      ],
      "description": "Meaningful assistance with some personal cost"
    },
    "major": {
      "id": "major",
      "displayName": "Major Request",
      "baseDc": 20,
      "requiredSuccesses": 4,
      "minimumDisposition": "Friendly",
      "mayBeImpossible": false,
      "examples": [
        "Attack your faction's enemies",
        "Give me your life savings",
        "Reveal faction secrets"
      ],
      "description": "Significant personal risk or faction conflict"
    },
    "extreme": {
      "id": "extreme",
      "displayName": "Extreme Request",
      "baseDc": 24,
      "requiredSuccesses": 4,
      "minimumDisposition": "Ally",
      "mayBeImpossible": true,
      "examples": [
        "Betray your clan leader",
        "Sacrifice yourself",
        "Kill your closest ally"
      ],
      "description": "Life-altering decision, ultimate betrayal"
    }
  },

  "modifiers": {
    "argumentAligned": {
      "diceModifier": 1,
      "description": "Argument appeals to NPC values"
    },
    "argumentContradicts": {
      "diceModifier": -1,
      "description": "Argument conflicts with NPC values"
    },
    "evidenceProvided": {
      "diceModifier": 2,
      "description": "Physical proof supports argument"
    },
    "npcStressed": {
      "diceModifier": -1,
      "description": "Target has [Stressed] status"
    },
    "npcFeared": {
      "diceModifier": -1,
      "description": "Target has [Feared] status"
    },
    "npcGrateful": {
      "diceModifier": 1,
      "description": "Target has [Grateful] status"
    },
    "previousAttemptSecond": {
      "dcModifier": 2,
      "description": "Second persuasion attempt"
    },
    "previousAttemptThird": {
      "dcModifier": 4,
      "description": "Third or more persuasion attempt"
    },
    "sameArgumentUsed": {
      "dcModifier": 2,
      "description": "Same argument used previously"
    },
    "newEvidenceProvided": {
      "dcModifier": -2,
      "description": "New evidence resets some penalty"
    }
  },

  "outcomes": {
    "criticalSuccess": {
      "dispositionChange": 15,
      "reputationChange": 5,
      "convictionDepth": "Deep",
      "unlocksMultipleOptions": true
    },
    "exceptionalSuccess": {
      "dispositionChange": 12,
      "reputationChange": 3,
      "convictionDepth": "Strong",
      "unlocksMultipleOptions": false
    },
    "fullSuccess": {
      "dispositionChange": 10,
      "reputationChange": 2,
      "convictionDepth": "Moderate",
      "unlocksMultipleOptions": false
    },
    "marginalSuccess": {
      "dispositionChange": 5,
      "reputationChange": 0,
      "convictionDepth": "Shallow",
      "unlocksMultipleOptions": false
    },
    "failure": {
      "dispositionChange": -5,
      "reputationChange": -2,
      "convictionDepth": "None",
      "locksCurrentArgument": true
    },
    "fumble": {
      "dispositionChange": -30,
      "reputationChange": -10,
      "convictionDepth": "None",
      "fumbleType": "TrustShattered",
      "locksAllPersuasion": true
    }
  },

  "trustShatteredRecovery": {
    "questCompletion": "Complete a quest that benefits the NPC",
    "timePassing": "Wait several in-game weeks",
    "thirdPartyIntercession": "Have an ally vouch for you"
  }
}
```

---

## 12. Commands

### 12.1 Persuade Command

**Command:** `persuade <npc> [argument]`

**Description:** Attempt to persuade an NPC to grant a request.

**Usage:**
```
persuade guard_marcus "we are here on official business"
persuade merchant_helena --evidence council_letter
persuade prisoner "you'll be treated fairly"
```

**Parameters:**
| Parameter | Required | Description |
|-----------|----------|-------------|
| `<npc>` | Yes | The NPC to persuade (ID or display name) |
| `[argument]` | No | The argument to present (for alignment checking) |
| `--evidence <item>` | No | An inventory item to use as evidence |
| `--request <type>` | No | Override request complexity classification |

**Output:**
```
=== PERSUASION ATTEMPT ===
Target: Guard Marcus (Well-disposed, +1d10)
Request: Simple (DC 12)

Modifiers:
  Disposition (Neutral-Positive): +1d10
  Argument (loyalty): +1d10
  Evidence (Council Letter): +2d10

Dice Pool: 5d10 + 4d10 = 9d10
Required Successes: 2

Rolling... [10, 8, 6, 9, 4, 7, 8, 3, 5]
Successes: 4 | Botches: 0 | Net: 4

RESULT: Full Success (Margin: +2)
Request GRANTED

Marcus nods thoughtfully. "The letter checks out. You may pass."

Disposition: +10 (30 → 40)
Reputation (City Guard): +2
Unlocked: [Request escort]
```

---

## 13. User-Facing Changes

### 13.1 New Persuasion Mechanics

Players will experience:
- Request complexity affects difficulty (DC 8 to DC 24)
- Arguments that align with NPC values grant bonuses
- Evidence items provide significant bonuses (+2d10)
- Previous failed attempts increase difficulty
- Critical success unlocks additional dialogue options
- Fumbles trigger [Trust Shattered], locking all persuasion with that NPC

### 13.2 Visual Feedback

The persuasion interface displays:
- Request complexity tier and base DC
- All active modifiers with explanations
- NPC disposition and its effect
- Roll results with success/botch counts
- Outcome with disposition and reputation changes
- Unlocked or locked dialogue options

---

## 14. Logging Specifications

### 14.1 Log Categories

| Category | Level | Description |
|----------|-------|-------------|
| `Persuasion.Attempt` | Info | Persuasion attempt initiated |
| `Persuasion.Context` | Debug | Context building details |
| `Persuasion.Alignment` | Debug | Argument alignment evaluation |
| `Persuasion.Result` | Info | Persuasion outcome |
| `Persuasion.TrustShattered` | Warning | Fumble consequence created |
| `Persuasion.Blocked` | Info | Attempt blocked by consequence |

### 14.2 Log Format Examples

```
[Info] Persuasion.Attempt: player_1 attempting to persuade guard_marcus (Simple request)
[Debug] Persuasion.Context: Building context - Disposition: 30, Faction: city_guard
[Debug] Persuasion.Alignment: Argument theme "loyalty" aligns with NPC value "respects_loyalty"
[Debug] Persuasion.Context: Total modifiers: +4d10, DC 12
[Info] Persuasion.Result: Full Success (margin 2), request granted
[Info] Persuasion.Result: Disposition change: +10 (30 → 40)
[Warning] Persuasion.TrustShattered: Fumble consequence created for merchant_anne
```

---

## 15. Unit Testing Requirements

### 15.1 Test Categories

| Category | Tests | Description |
|----------|-------|-------------|
| Request DC | 1 | Request type correctly sets base DC |
| Alignment | 1 | Value alignment applies correct modifier |
| Fumble | 1 | Fumble triggers [Trust Shattered] |

### 15.2 Test Specifications

**Test 1: Request Type Sets Correct DC**
```csharp
[Theory]
[InlineData(PersuasionRequest.Trivial, 8)]
[InlineData(PersuasionRequest.Simple, 12)]
[InlineData(PersuasionRequest.Moderate, 16)]
[InlineData(PersuasionRequest.Major, 20)]
[InlineData(PersuasionRequest.Extreme, 24)]
public void PersuasionRequest_ReturnsCorrectBaseDc(PersuasionRequest request, int expectedDc)
{
    var baseDc = request.GetBaseDc();

    Assert.Equal(expectedDc, baseDc);
}
```

**Test 2: Value Alignment Applies Bonus**
```csharp
[Fact]
public void ArgumentAlignment_WhenAligned_ProvidesPlusOneDice()
{
    var npcValues = new[] { "loyalty", "profit", "honor" };
    var npcDislikes = new[] { "cowardice", "betrayal" };
    var argumentThemes = new[] { "loyalty", "duty" };

    var alignment = ArgumentAlignment.Evaluate(argumentThemes, npcValues, npcDislikes);

    Assert.True(alignment.IsAligned);
    Assert.Equal(1, alignment.DiceModifier);
    Assert.Equal("loyalty", alignment.MatchedValue);
}

[Fact]
public void ArgumentAlignment_WhenContradicting_ProvidesMinusOneDice()
{
    var npcValues = new[] { "loyalty", "profit" };
    var npcDislikes = new[] { "cowardice", "betrayal" };
    var argumentThemes = new[] { "betrayal", "self-interest" };

    var alignment = ArgumentAlignment.Evaluate(argumentThemes, npcValues, npcDislikes);

    Assert.True(alignment.IsContradicting);
    Assert.Equal(-1, alignment.DiceModifier);
    Assert.Equal("betrayal", alignment.ContradictedValue);
}
```

**Test 3: Fumble Triggers Trust Shattered**
```csharp
[Fact]
public async Task PersuasionService_OnFumble_CreatesTrustShatteredConsequence()
{
    // Arrange
    var service = CreatePersuasionService();
    SetupNpc("target_npc", disposition: 30, factionId: "test_faction");
    SetupFumbleRoll(); // Configure dice to produce fumble

    // Act
    var result = await service.AttemptPersuasionAsync(
        characterId: "player_1",
        targetId: "target_npc",
        requestType: PersuasionRequest.Simple,
        argumentThemes: new[] { "test" });

    // Assert
    Assert.True(result.IsFumble);
    Assert.True(result.IsTrustShattered);
    Assert.NotNull(result.FumbleConsequence);
    Assert.Equal(FumbleType.TrustShattered, result.FumbleConsequence.FumbleType);
    Assert.Equal(-30, result.DispositionChange);
    Assert.Contains("*", result.LockedOptions); // All persuasion locked
}
```

---

## 16. Use Cases

### 16.1 Use Case: Simple Persuasion With Evidence

**Scenario:** Player persuades a guard using a letter as evidence.

**Input:**
- Target: guard_marcus (disposition: 25)
- Request: Simple (DC 12)
- Evidence: council_letter
- Argument themes: ["authority", "duty"]

**Expected Outcome:**
- Base DC: 12
- Disposition modifier: +1d10 (NeutralPositive)
- Evidence modifier: +2d10
- Argument alignment: Checked against guard values
- Total modifier calculation applied
- On success: Request granted, disposition +5 to +15

### 16.2 Use Case: Failed Persuasion Retry

**Scenario:** Player retries a failed persuasion attempt.

**Input:**
- Previous attempts: 1
- Same argument used: Yes

**Expected Outcome:**
- DC modifier: +2 (second attempt) +2 (same argument) = +4
- Effective DC: 16 (for Simple request)
- Player warned about reduced chances

### 16.3 Use Case: Trust Shattered Recovery

**Scenario:** Player completes a quest to recover from [Trust Shattered].

**Input:**
- Active consequence: TrustShattered with merchant_anne
- Recovery action: "completed_delivery_quest_for_merchant_anne"

**Expected Outcome:**
- Consequence deactivated
- Persuasion options unlocked with merchant_anne
- Disposition remains at modified level (doesn't reset)

---

## 17. Deliverable Checklist

### 17.1 Domain Layer

| Item | Status | File |
|------|--------|------|
| `PersuasionRequest` enum | [ ] | `Domain/Enums/PersuasionRequest.cs` |
| `PersuasionRequestExtensions` | [ ] | `Domain/Extensions/PersuasionRequestExtensions.cs` |
| `ConvictionDepth` enum | [ ] | `Domain/Enums/ConvictionDepth.cs` |
| `PersuasionContext` value object | [ ] | `Domain/ValueObjects/PersuasionContext.cs` |
| `PersuasionResult` value object | [ ] | `Domain/ValueObjects/PersuasionResult.cs` |
| `ArgumentAlignment` value object | [ ] | `Domain/ValueObjects/ArgumentAlignment.cs` |
| `FumbleType` extension | [ ] | `Domain/Enums/FumbleType.cs` (add TrustShattered) |

### 17.2 Application Layer

| Item | Status | File |
|------|--------|------|
| `IPersuasionService` interface | [ ] | `Application/Interfaces/IPersuasionService.cs` |
| `PersuasionService` implementation | [ ] | `Application/Services/PersuasionService.cs` |

### 17.3 Infrastructure Layer

| Item | Status | File |
|------|--------|------|
| `persuasion-requests.json` config | [ ] | `Infrastructure/Configuration/persuasion-requests.json` |

### 17.4 Tests

| Item | Status | File |
|------|--------|------|
| Request DC tests | [ ] | `Tests/Domain/PersuasionRequestTests.cs` |
| Argument alignment tests | [ ] | `Tests/Domain/ArgumentAlignmentTests.cs` |
| Fumble consequence tests | [ ] | `Tests/Application/PersuasionServiceTests.cs` |

---

## 18. Acceptance Criteria

### 18.1 Functional Requirements

- [ ] `PersuasionRequest` enum correctly maps to DC values
- [ ] Request complexity determines base difficulty (DC 8-24)
- [ ] Argument alignment evaluates against NPC values
- [ ] Aligned arguments provide +1d10 bonus
- [ ] Contradicting arguments provide -1d10 penalty
- [ ] Evidence provides +2d10 bonus
- [ ] Previous failed attempts increase DC
- [ ] Same argument reuse increases DC
- [ ] Critical success grants deep conviction and unlocks options
- [ ] Failure locks current argument
- [ ] Fumble creates [Trust Shattered] consequence
- [ ] [Trust Shattered] blocks all future persuasion with target
- [ ] Recovery conditions can lift [Trust Shattered]
- [ ] Disposition changes apply correctly per outcome
- [ ] Reputation changes apply to NPC's faction

### 18.2 Non-Functional Requirements

- [ ] All value objects are immutable
- [ ] Service properly logs all operations
- [ ] Configuration follows established JSON patterns
- [ ] ~3 unit tests pass
- [ ] Integrates with existing SocialContext from v0.15.3a

---

## 19. Future Considerations

### 19.1 Specialization Integration (v0.15.3i)

The Thul archetype will modify persuasion:
- **[Voice of Reason]**: Failed persuasion doesn't lock dialogue options
- **[Scholarly Authority]**: +2d10 when discussing lore/history topics

### 19.2 Extended Influence (v0.15.3h)

For deeply-held beliefs, persuasion accumulates over time:
- Each successful persuasion adds to influence pool
- When pool reaches conviction threshold, belief changes
- Failed persuasion may increase NPC resistance

### 19.3 Negotiation Tactics (v0.15.3e)

Persuasion serves as one of four negotiation tactics:
- Persuade: Move opponent position through honest argument
- Deceive: Move position through false information
- Pressure: Move position through intimidation
- Concede: Give ground for future bonus

---

## 20. Implementation Notes

### 20.1 Integration with v0.15.3a

The persuasion system builds on the social framework:
- Uses `SocialContext` as base (extended by `PersuasionContext`)
- Uses `SocialResult` pattern (extended by `PersuasionResult`)
- Uses `DispositionLevel` for all disposition tracking
- Uses `NpcDisposition` for dice modifier calculation
- Uses `SocialModifier` for argument/evidence modifiers

### 20.2 NPC Value System

NPCs require defined value sets for alignment checking:
```json
{
  "npcId": "guard_marcus",
  "values": ["duty", "loyalty", "order"],
  "dislikes": ["chaos", "betrayal", "disrespect"]
}
```

### 20.3 Dialogue Integration

The persuasion system interacts with dialogue through:
- `IDialogueService.LockOptionAsync()` - Lock specific options
- `IDialogueService.UnlockOptionAsync()` - Unlock new options
- `IDialogueService.LockAllPersuasionOptionsAsync()` - For [Trust Shattered]

---

## 21. Document Metadata

| Field | Value |
|-------|-------|
| Version | 0.15.3b |
| Status | Draft |
| Author | Claude |
| Created | 2026-01-17 |
| Updated | 2026-01-17 |
| Review Status | Pending |
| Implementation Status | Not Started |

### 21.1 Change Log

| Date | Version | Changes |
|------|---------|---------|
| 2026-01-17 | 0.15.3b | Initial specification created |

### 21.2 Related Documents

| Document | Relationship |
|----------|-------------|
| [v0.15.3-scope-breakdown.md](v0.15.3-scope-breakdown.md) | Parent scope document |
| [v0.15.3a-design-specification.md](v0.15.3a-design-specification.md) | Prerequisite (Social Framework) |
| [v0.15.1b-design-specification.md](v0.15.1b-design-specification.md) | Fumble consequence reference |
| [v0.15.x-overview.md](v0.15.x-overview.md) | Version series overview |
