# v0.14.9b Design Specification: Ability Descriptor Schema

**Version:** 0.14.9b
**Parent:** v0.14.9 (Advanced Descriptor Configuration Schemas)
**Prerequisites:** v0.14.8 Complete (Dice Configuration Schemas)
**Status:** Design Complete

---

## Table of Contents

1. [Executive Summary](#1-executive-summary)
2. [Feature Overview](#2-feature-overview)
3. [Architecture Diagrams](#3-architecture-diagrams)
4. [Schema Root Definition](#4-schema-root-definition)
   - 4.1 [Root Configuration Properties](#41-root-configuration-properties)
   - 4.2 [Category Types](#42-category-types)
   - 4.3 [Pool Structure](#43-pool-structure)
5. [GaldrActionDescriptor Definition](#5-galdrationdescriptor-definition)
   - 5.1 [Core Properties](#51-core-properties)
   - 5.2 [Action Types](#52-action-types)
   - 5.3 [Rune School Integration](#53-rune-school-integration)
6. [GaldrManifestationDescriptor Definition](#6-galdrmanifestationdescriptor-definition)
   - 6.1 [Manifestation Properties](#61-manifestation-properties)
   - 6.2 [Manifestation Types](#62-manifestation-types)
   - 6.3 [Power Levels](#63-power-levels)
7. [GaldrOutcomeDescriptor Definition](#7-galdroutcomedescriptor-definition)
   - 7.1 [Outcome Properties](#71-outcome-properties)
   - 7.2 [Outcome Types](#72-outcome-types)
   - 7.3 [Target Types](#73-target-types)
8. [GaldrMiscastDescriptor Definition](#8-galdrmiscastdescriptor-definition)
   - 8.1 [Miscast Properties](#81-miscast-properties)
   - 8.2 [Miscast Types](#82-miscast-types)
   - 8.3 [Severity Levels](#83-severity-levels)
   - 8.4 [Mechanical Effects](#84-mechanical-effects)
9. [WeaponArtDescriptor Definition](#9-weaponartdescriptor-definition)
   - 9.1 [Weapon Art Properties](#91-weapon-art-properties)
   - 9.2 [Ability Categories](#92-ability-categories)
   - 9.3 [Weapon Types](#93-weapon-types)
10. [SkillUsageDescriptor Definition](#10-skillusagedescriptor-definition)
    - 10.1 [Skill Usage Properties](#101-skill-usage-properties)
    - 10.2 [Difficulty Levels](#102-difficulty-levels)
11. [Rune Schools Reference](#11-rune-schools-reference)
    - 11.1 [Elder Futhark Runes](#111-elder-futhark-runes)
    - 11.2 [Rune School Enum](#112-rune-school-enum)
12. [Success Levels Reference](#12-success-levels-reference)
13. [Variable Placeholders Reference](#13-variable-placeholders-reference)
14. [Configuration Schema](#14-configuration-schema)
15. [Logging Specifications](#15-logging-specifications)
16. [Unit Testing Requirements](#16-unit-testing-requirements)
17. [Use Cases](#17-use-cases)
18. [Deliverable Checklist](#18-deliverable-checklist)
19. [Acceptance Criteria](#19-acceptance-criteria)
20. [Dependencies](#20-dependencies)
21. [Future Considerations](#21-future-considerations)
22. [Appendix: Schema Validation Examples](#22-appendix-schema-validation-examples)

---

## 1. Executive Summary

Version 0.14.9b introduces the **Ability Descriptor Schema** (`ability-descriptors.schema.json`), which provides a comprehensive JSON schema for validating ability and Galdr (magic) flavor text descriptors. This schema enables full customization of casting sequences, manifestation descriptions, outcome narratives, miscast effects, and weapon art descriptions—all without code changes.

The Ability Descriptor Schema converts the existing SQL schema and content from `docs/design/descriptors/` into JSON format, establishing a standard structure for all ability-related narrative content in the game, supporting the Norse runic magic system (Galdr), weapon arts, and general skill usage descriptions.

### Key Deliverables

| Category | Items |
|----------|-------|
| **Schema Files** | `ability-descriptors.schema.json` |
| **Schema Definitions** | `GaldrActionDescriptor`, `GaldrManifestationDescriptor`, `GaldrOutcomeDescriptor`, `GaldrMiscastDescriptor`, `WeaponArtDescriptor`, `SkillUsageDescriptor`, `RuneSchool`, `SuccessLevel` |
| **Configuration Files** | `ability-descriptors.json` (example content) |
| **Tests** | ~6 new unit tests |

### Architectural Significance

This version provides:
- **Galdr action descriptors** - Casting sequences from invocation through discharge
- **Manifestation descriptors** - Visual, auditory, and tactile magic effects
- **Outcome descriptors** - Success/failure narratives for ability resolution
- **Miscast descriptors** - Blight corruption, paradox, and magical failure narratives
- **Weapon art descriptors** - Non-magical combat ability flavor text
- **24 rune schools** - Complete Elder Futhark runic magic system
- **Variable placeholders** - Dynamic content substitution
- **Biome-specific variations** - Location-based descriptor variants

### Relationship to Other Schemas

```
┌─────────────────────────────────────────────────────────────────────────────┐
│               v0.14.9 ADVANCED DESCRIPTOR CONFIGURATION SCHEMAS              │
└─────────────────────────────────────────────────────────────────────────────┘

  ┌─────────────────────────────────────────────────────────────────────────┐
  │  v0.14.9a: dialogue.schema.json (dialogue trees)                        │
  │  v0.14.9b: ability-descriptors.schema.json ◀── THIS VERSION (GALDR)    │
  │  v0.14.9c: npc-descriptors.schema.json (appearance, barks, reactions)  │
  │  v0.14.9d: psychological-descriptors.schema.json (stress, trauma)      │
  │  v0.14.9e: capture-templates.schema.json (lore fragments)              │
  └─────────────────────────────────────────────────────────────────────────┘

  Source Material (SQL format):
  ├── docs/design/descriptors/schemas/galdr_flavor_text_schema.sql
  ├── docs/design/descriptors/descriptors/galdr_action_descriptors.sql
  ├── docs/design/descriptors/descriptors/galdr_outcome_descriptors.sql
  └── docs/design/descriptors/descriptors/galdr_miscast_descriptors.sql

  Related Systems:
  • Galdr magic system (runic casting)
  • Combat system (weapon arts, tactical abilities)
  • Status effects (buffs, debuffs, control)
  • Biome system (environmental variations)
```

---

## 2. Feature Overview

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                   ABILITY DESCRIPTOR SCHEMA FEATURE TREE                     │
└─────────────────────────────────────────────────────────────────────────────┘

ability-descriptors.schema.json
├── Root Configuration
│   ├── $schema reference
│   ├── version identifier
│   ├── category classification
│   └── pools (descriptor collections)
│
├── Galdr Action Descriptors
│   ├── Casting Sequences
│   │   ├── Invocation (spell beginning)
│   │   ├── Chant (runic recitation)
│   │   ├── RuneManifestation (rune appears)
│   │   ├── Discharge (spell release)
│   │   └── Aftermath (post-cast effects)
│   │
│   ├── Rune Schools (24 Elder Futhark)
│   │   ├── Fehu (Fire/Wealth)
│   │   ├── Thurisaz (Ice/Thorns)
│   │   ├── Ansuz (Wind/Lightning)
│   │   ├── Berkanan (Healing/Growth)
│   │   └── ... (20 more runes)
│   │
│   └── Success Levels
│       ├── MinorSuccess (1-2 successes)
│       ├── SolidSuccess (3-4 successes)
│       └── ExceptionalSuccess (5+ successes)
│
├── Galdr Manifestation Descriptors
│   ├── Visual (lights, colors, shapes)
│   ├── Auditory (sounds, words, music)
│   ├── Tactile (temperature, pressure)
│   ├── Supernatural (otherworldly effects)
│   └── RunicGlyph (rune symbol appearance)
│
├── Galdr Outcome Descriptors
│   ├── Hit (successful strike)
│   ├── Miss (failed attack)
│   ├── CriticalHit (devastating success)
│   ├── PartialEffect (reduced effectiveness)
│   ├── FullEffect (complete success)
│   ├── Resisted (target reduced effect)
│   ├── Immune (target unaffected)
│   └── Amplified (enhanced effect)
│
├── Galdr Miscast Descriptors
│   ├── BlightCorruption (Blight interference)
│   ├── Paradox (reality rebellion)
│   ├── Backlash (magic recoil)
│   ├── Fizzle (spell failure)
│   ├── WildMagic (uncontrolled effects)
│   ├── AlfheimDistortion (Cursed Choir)
│   └── RunicInversion (rune meaning corrupts)
│
├── Weapon Art Descriptors
│   ├── WeaponArt (special attacks)
│   ├── TacticalAbility (combat maneuvers)
│   ├── DefensiveAbility (protective actions)
│   ├── PassiveAbility (constant effects)
│   └── ResourceAbility (resource management)
│
└── Skill Usage Descriptors
    ├── Skill-based action flavor text
    ├── Success/failure variations
    └── Difficulty-based descriptions
```

---

## 3. Architecture Diagrams

### 3.1 Descriptor Pool Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                      DESCRIPTOR POOL ARCHITECTURE                            │
└─────────────────────────────────────────────────────────────────────────────┘

                    ability-descriptors.json
            ┌───────────────────────────────────────┐
            │  {                                    │
            │    "$schema": "...",                  │
            │    "version": "1.0.0",                │
            │    "category": "galdr-actions",       │
            │    "pools": {                         │
            │      "fehu_flamebolt_minor": [...],   │
            │      "fehu_flamebolt_solid": [...],   │
            │      "fehu_flamebolt_exceptional":[...│
            │    }                                  │
            │  }                                    │
            └─────────────────┬─────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                          DESCRIPTOR POOL                                     │
│─────────────────────────────────────────────────────────────────────────────│
│  Pool ID: "fehu_flamebolt_solid"                                            │
│  Descriptors: [                                                              │
│    {                                                                         │
│      "id": "fehu_flamebolt_solid_001",                                       │
│      "text": "You sing the Fehu rune, its ancient will igniting the air...",│
│      "weight": 10,                                                           │
│      "actionType": "Invocation",                                            │
│      "runeSchool": "Fehu",                                                  │
│      "abilityName": "FlameBolt",                                            │
│      "successLevel": "SolidSuccess",                                        │
│      "tags": ["Verbose", "Descriptive"]                                     │
│    },                                                                        │
│    { ... more descriptors ... }                                              │
│  ]                                                                           │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 Galdr Casting Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         GALDR CASTING FLOW                                   │
└─────────────────────────────────────────────────────────────────────────────┘

              Player casts Galdr ability
                         │
                         ▼
        ┌─────────────────────────────────┐
        │  1. INVOCATION                  │
        │  "You invoke Fehu with steady   │
        │   voice..."                     │
        │  (Action Type: Invocation)      │
        └─────────────┬───────────────────┘
                      │
                      ▼
        ┌─────────────────────────────────┐
        │  2. RUNE MANIFESTATION          │
        │  "The rune blazes crimson..."   │
        │  (Action Type: RuneManifestation│
        └─────────────┬───────────────────┘
                      │
                      ▼
        ┌─────────────────────────────────┐
        │  3. DISCHARGE                   │
        │  "Fire answers your call!"      │
        │  (Action Type: Discharge)       │
        └─────────────┬───────────────────┘
                      │
             ┌────────┴────────┐
             │                 │
          Success           Failure
             │                 │
             ▼                 ▼
   ┌──────────────────┐  ┌──────────────────┐
   │ 4a. OUTCOME      │  │ 4b. MISCAST      │
   │ "Flames engulf   │  │ "Your chant      │
   │  the {Target}!"  │  │  falters—the     │
   │ (GaldrOutcome)   │  │  Blight warps    │
   │                  │  │  Fehu's meaning!"│
   └──────────────────┘  │ (GaldrMiscast)   │
                         └──────────────────┘

  Casting Sequence Phases:
  ════════════════════════
  Invocation       → Beginning of cast, player starts chanting
  Chant            → Continued runic recitation
  RuneManifestation→ Rune symbol appears visually
  Discharge        → Magic effect releases
  Aftermath        → Post-cast environmental effects
  EffectTrigger    → Reactive/triggered effects (wards, etc.)
```

### 3.3 Success Level Resolution

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                      SUCCESS LEVEL RESOLUTION                                │
└─────────────────────────────────────────────────────────────────────────────┘

                    Dice Pool Roll Result
                           │
                           ▼
                ┌───────────────────────┐
                │ Count Successes       │
                │ (Dice showing target  │
                │  number or higher)    │
                └───────────┬───────────┘
                            │
      ┌─────────────────────┼─────────────────────┐
      │                     │                     │
      ▼                     ▼                     ▼
┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│ 0 Successes  │     │ 1-2 Success  │     │ 3-4 Success  │
│              │     │              │     │              │
│   FAILURE    │     │ MinorSuccess │     │ SolidSuccess │
│ or MISCAST   │     │              │     │              │
└──────────────┘     └──────────────┘     └──────────────┘
                            │
                            ▼
                  ┌──────────────┐
                  │ 5+ Successes │
                  │              │
                  │ Exceptional  │
                  │   Success    │
                  └──────────────┘

  Success Level Descriptors:
  ══════════════════════════
  MinorSuccess (1-2):
    "You chant the Fehu rune, its fiery syllables harsh on your tongue.
     Flames sputter weakly from your palm, barely reaching the {Target}."

  SolidSuccess (3-4):
    "You sing the Fehu rune, its ancient will igniting the air.
     A bolt of flame streaks toward the {Target}, trailing embers."

  ExceptionalSuccess (5+):
    "You invoke Fehu with perfect resonance—the rune blazes in the air!
     A devastating torrent of flame engulfs the {Target}!"

  Failure/Miscast:
    "Your Galdr falters. The Blight warps Fehu's meaning!
     Fire burns backward, cold as ice, wrong!"
```

### 3.4 Miscast Type Classification

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                      MISCAST TYPE CLASSIFICATION                             │
└─────────────────────────────────────────────────────────────────────────────┘

  Casting Failed
       │
       ├─────────────────────────────────────────────────────────────────────┐
       │                                                                     │
       ▼                                                                     │
┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐      │
│  FIZZLE      │  │  BACKLASH    │  │  WILD MAGIC  │  │   PARADOX    │      │
│              │  │              │  │              │  │              │      │
│ Spell fails  │  │ Magic recoils│  │ Uncontrolled │  │ Reality      │      │
│ harmlessly   │  │ on caster    │  │ effects      │  │ rebels       │      │
│              │  │              │  │              │  │              │      │
│ Severity:    │  │ Severity:    │  │ Severity:    │  │ Severity:    │      │
│ Minor        │  │ Minor-Severe │  │ Moderate     │  │ Moderate-    │      │
│              │  │              │  │              │  │ Catastrophic │      │
└──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘      │
                                                                             │
       ├─────────────────────────────────────────────────────────────────────┤
       │                                                                     │
       ▼                                                                     │
┌──────────────┐  ┌──────────────┐  ┌──────────────┐                        │
│  BLIGHT      │  │  ALFHEIM     │  │   RUNIC      │                        │
│  CORRUPTION  │  │  DISTORTION  │  │  INVERSION   │                        │
│              │  │              │  │              │                        │
│ Runic Blight │  │ Cursed Choir │  │ Rune meaning │                        │
│ corrupts     │  │ interference │  │ reverses     │                        │
│ the spell    │  │              │  │              │                        │
│              │  │ Biome-       │  │ Fire→Ice,    │                        │
│ Severity:    │  │ specific to  │  │ Heal→Harm,   │                        │
│ Minor-Severe │  │ Alfheim      │  │ etc.         │                        │
└──────────────┘  └──────────────┘  └──────────────┘                        │
                                                                             │
  Severity Scale:                                                            │
  ════════════════                                                           │
  Minor       → Cosmetic/minor inconvenience, no real harm                  │
  Moderate    → Damage to self, temporary debuffs                           │
  Severe      → Significant damage, lasting effects                          │
  Catastrophic→ Devastating damage, permanent corruption, affects all       │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.5 Schema Layer Diagram

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           SCHEMA LAYER DIAGRAM                               │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                              PRESENTATION                                    │
│                                                                              │
│  Combat UI displays ability flavor text                                      │
│  • Casting animation with descriptor text                                    │
│  • Outcome message with damage/effect                                        │
│  • Miscast warning with failure narrative                                    │
│  • Variable substitution ({Target}, {Damage}, etc.)                          │
└─────────────────────────────────────────────────────────────────────────────┘
                                     │
                                     ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                              APPLICATION                                     │
│                                                                              │
│  AbilityDescriptorService manages descriptor selection                       │
│  • GetGaldrActionDescriptor(school, ability, success, biome)                 │
│  • GetGaldrManifestationDescriptor(school, type, power)                      │
│  • GetGaldrOutcomeDescriptor(ability, outcome, target)                       │
│  • GetGaldrMiscastDescriptor(type, severity, school, biome)                  │
│  • GetWeaponArtDescriptor(category, ability, weapon, success)                │
│  • SelectByWeight(descriptors) → weighted random selection                   │
│  • SubstituteVariables(text, context) → {Variable} replacement               │
└─────────────────────────────────────────────────────────────────────────────┘
                                     │
                                     ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                             DOMAIN LAYER                                     │
│                                                                              │
│  Ability definitions and descriptor collections                              │
│  • GaldrActionDescriptor (casting sequences)                                 │
│  • GaldrManifestationDescriptor (sensory effects)                            │
│  • GaldrOutcomeDescriptor (ability results)                                  │
│  • GaldrMiscastDescriptor (failure narratives)                               │
│  • WeaponArtDescriptor (combat ability flavor)                               │
│  • SkillUsageDescriptor (skill action flavor)                                │
│  • RuneSchool enum (24 Elder Futhark runes)                                  │
│  • SuccessLevel enum (5 outcome levels)                                      │
└─────────────────────────────────────────────────────────────────────────────┘
                                     │
                                     ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                           INFRASTRUCTURE                                     │
│                                                                              │
│  AbilityDescriptorProvider loads from JSON with schema validation            │
│  • LoadDescriptors(category) → reads ability-descriptors/*.json              │
│  • Validates against config/schemas/ability-descriptors.schema.json          │
│  • Builds pool lookup by category and filters                                │
│  • Caches descriptors for performance                                        │
│  • Logs warnings for missing required fields                                 │
└─────────────────────────────────────────────────────────────────────────────┘
                                     │
                                     ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                            CONFIGURATION                                     │
│                                                                              │
│  config/schemas/ability-descriptors.schema.json                              │
│  config/ability-descriptors/galdr-actions.json                               │
│  config/ability-descriptors/galdr-manifestations.json                        │
│  config/ability-descriptors/galdr-outcomes.json                              │
│  config/ability-descriptors/galdr-miscasts.json                              │
│  config/ability-descriptors/weapon-arts.json                                 │
│  config/ability-descriptors/skill-usage.json                                 │
│                                                                              │
│  Related Systems:                                                            │
│  • Galdr magic system (ability definitions)                                  │
│  • Combat system (damage, effects)                                           │
│  • Status effect system (buffs, debuffs)                                     │
│  • Biome system (environmental context)                                      │
│  • Corruption system (Blight tracking)                                       │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 4. Schema Root Definition

### 4.1 Root Configuration Properties

The ability descriptor schema defines a collection of descriptor pools organized by category.

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| `$schema` | string | No | - | JSON Schema reference |
| `version` | string | **Yes** | - | Schema version (semver format) |
| `category` | string | **Yes** | - | Descriptor category (enum) |
| `pools` | object | **Yes** | - | Map of pool ID to descriptor array |

### 4.2 Category Types

| Category | Description | Descriptor Type |
|----------|-------------|-----------------|
| `galdr-actions` | Galdr casting sequences | GaldrActionDescriptor |
| `galdr-manifestations` | Sensory magic effects | GaldrManifestationDescriptor |
| `galdr-outcomes` | Ability results | GaldrOutcomeDescriptor |
| `galdr-miscasts` | Magical failures | GaldrMiscastDescriptor |
| `weapon-arts` | Combat ability flavor | WeaponArtDescriptor |
| `skill-usage` | Skill action flavor | SkillUsageDescriptor |

### 4.3 Pool Structure

Pools are identified by a composite key pattern:

```
Pool ID Pattern: {runeSchool}_{abilityName}_{successLevel}
Example: "fehu_flamebolt_solid"

Alternative Pattern: {category}_{context}
Example: "miscast_blight_moderate"
```

Each pool contains an array of descriptors with weighted random selection support.

---

## 5. GaldrActionDescriptor Definition

### 5.1 Core Properties

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| `id` | string | **Yes** | - | Unique descriptor identifier |
| `text` | string | **Yes** | - | Descriptor text with {Variable} placeholders |
| `weight` | integer | No | 10 | Selection weight (higher = more likely) |
| `actionType` | string | **Yes** | - | Casting phase (enum) |
| `runeSchool` | string | No | null | Rune school (null for non-school-specific) |
| `abilityName` | string | No | null | Specific ability (null for generic) |
| `successLevel` | string | No | null | Success level filter |
| `biome` | string | No | null | Biome-specific variant |
| `tags` | array | No | [] | Metadata tags for filtering |

### 5.2 Action Types

| Action Type | Phase | Description | Example |
|-------------|-------|-------------|---------|
| `Invocation` | Beginning | Player begins casting | "You invoke Fehu..." |
| `Chant` | Continuation | Runic recitation | "Fehu! Fehu! Fehu!" |
| `RuneManifestation` | Visual | Rune appears | "The rune blazes crimson..." |
| `Discharge` | Release | Magic effect fires | "Fire erupts from your hand!" |
| `Aftermath` | Post-cast | Environmental effects | "Embers drift through the air..." |
| `EffectTrigger` | Reactive | Ward/triggered effect | "The ward flares as {Enemy} strikes!" |
| `Activation` | Buff/Toggle | Ability activation | "Power surges through you!" |

### 5.3 Rune School Integration

GaldrActionDescriptors are organized by rune school for targeted selection:

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                       RUNE SCHOOL ORGANIZATION                               │
└─────────────────────────────────────────────────────────────────────────────┘

  pools: {
    // Fehu (Fire) - FlameBolt ability
    "fehu_flamebolt_minor": [
      { id: "...", text: "Flames sputter weakly...", successLevel: "MinorSuccess" }
    ],
    "fehu_flamebolt_solid": [
      { id: "...", text: "A bolt of flame streaks...", successLevel: "SolidSuccess" }
    ],
    "fehu_flamebolt_exceptional": [
      { id: "...", text: "A devastating torrent...", successLevel: "ExceptionalSuccess" }
    ],

    // Thurisaz (Ice) - FrostLance ability
    "thurisaz_frostlance_minor": [ ... ],
    "thurisaz_frostlance_solid": [ ... ],

    // Generic (any school)
    "generic_invocation": [
      { id: "...", text: "You chant the {Rune}...", runeSchool: null }
    ]
  }
```

---

## 6. GaldrManifestationDescriptor Definition

### 6.1 Manifestation Properties

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| `id` | string | **Yes** | - | Unique descriptor identifier |
| `text` | string | **Yes** | - | Manifestation description |
| `weight` | integer | No | 10 | Selection weight |
| `manifestationType` | string | **Yes** | - | Sensory type (enum) |
| `runeSchool` | string | **Yes** | - | Associated rune school |
| `element` | string | No | null | Element type (Fire, Ice, etc.) |
| `powerLevel` | string | No | "Moderate" | Power intensity |
| `biome` | string | No | null | Biome-specific variant |
| `environmentalInteraction` | string | No | null | Environmental effect description |
| `tags` | array | No | [] | Metadata tags |

### 6.2 Manifestation Types

| Type | Sense | Description | Example |
|------|-------|-------------|---------|
| `Visual` | Sight | Lights, colors, shapes | "Crimson flames dance..." |
| `Auditory` | Hearing | Sounds, words, music | "Thunder echoes through the chamber..." |
| `Tactile` | Touch | Temperature, pressure | "Heat washes over nearby surfaces..." |
| `Supernatural` | Otherworldly | Unnatural effects | "Reality warps around the spell..." |
| `RunicGlyph` | Sight | Rune symbol appearance | "The ᚠ rune blazes golden..." |

### 6.3 Power Levels

| Level | Description | Typical Use |
|-------|-------------|-------------|
| `Weak` | Barely visible/audible | Minor success, weak abilities |
| `Moderate` | Noticeable effect | Standard casting |
| `Strong` | Impressive display | Solid success |
| `Devastating` | Overwhelming presence | Exceptional success |
| `Catastrophic` | Reality-breaking | Critical effects, miscasts |

---

## 7. GaldrOutcomeDescriptor Definition

### 7.1 Outcome Properties

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| `id` | string | **Yes** | - | Unique descriptor identifier |
| `text` | string | **Yes** | - | Outcome narrative with {Variables} |
| `weight` | integer | No | 10 | Selection weight |
| `outcomeType` | string | **Yes** | - | Result type (enum) |
| `abilityName` | string | **Yes** | - | Associated ability |
| `successCount` | integer | No | null | Specific success count filter |
| `targetType` | string | No | null | Target classification |
| `enemyArchetype` | string | No | null | Enemy-specific variant |
| `effectCategory` | string | No | null | Effect type classification |
| `tags` | array | No | [] | Metadata tags |

### 7.2 Outcome Types

| Type | Description | Example |
|------|-------------|---------|
| `Hit` | Standard successful attack | "Fire engulfs the {Target}!" |
| `Miss` | Attack failed to connect | "Your flames dissipate before reaching..." |
| `CriticalHit` | Devastating success | "The {Target} is consumed by primal fire!" |
| `PartialEffect` | Reduced effectiveness | "Flames wash over, dealing minor damage..." |
| `FullEffect` | Complete success | "Perfect healing! Wounds vanish..." |
| `Resisted` | Target reduced effect | "The {Target} shrugs off your flames..." |
| `Immune` | Target unaffected | "Fire has no effect on this creature!" |
| `Amplified` | Enhanced effect | "The ambient heat amplifies your fire!" |

### 7.3 Target Types

| Type | Description | Example Targets |
|------|-------------|-----------------|
| `Enemy` | Hostile target | Servitor, Forlorn, Corrupted_Dvergr |
| `Self` | Caster | Healing, buffs, wards |
| `Ally` | Friendly target | Healing, support |
| `Area` | Multiple targets | AoE effects |
| `Environment` | Terrain/objects | Destructible, interactable |

### 7.4 Effect Categories

| Category | Description | Examples |
|----------|-------------|----------|
| `Damage` | Deals damage | Fire, Ice, Lightning |
| `Healing` | Restores health | HealingChant, Regeneration |
| `Buff` | Positive status | Empower, Shield, Haste |
| `Debuff` | Negative status | Drain, Weaken, Slow |
| `Control` | Movement/action control | Stun, Root, Silence |
| `Utility` | Non-combat effects | Purification, Detection |
| `Summon` | Creates entities | Summon familiar, minions |

---

## 8. GaldrMiscastDescriptor Definition

### 8.1 Miscast Properties

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| `id` | string | **Yes** | - | Unique descriptor identifier |
| `text` | string | **Yes** | - | Miscast narrative |
| `weight` | integer | No | 10 | Selection weight |
| `miscastType` | string | **Yes** | - | Failure type (enum) |
| `severity` | string | **Yes** | - | Severity level (enum) |
| `runeSchool` | string | No | null | Affected rune school |
| `abilityName` | string | No | null | Specific ability |
| `corruptionSource` | string | No | null | Cause of corruption |
| `biome` | string | No | null | Biome-specific variant |
| `mechanicalEffect` | object | No | null | Game mechanical effects |
| `tags` | array | No | [] | Metadata tags |

### 8.2 Miscast Types

| Type | Description | Lore |
|------|-------------|------|
| `BlightCorruption` | Runic Blight corrupts spell | "The Blight seizes your Galdr!" |
| `Paradox` | Reality rebels against magic | "The rune exists and doesn't exist..." |
| `Backlash` | Magic recoils on caster | "The spell fizzles back at you!" |
| `Fizzle` | Spell fails harmlessly | "Nothing happens." |
| `WildMagic` | Uncontrolled random effects | "Magic erupts in all directions!" |
| `AlfheimDistortion` | Cursed Choir interference | "The Choir harmonizes with your Galdr..." |
| `RunicInversion` | Rune meaning reverses | "Fehu inverts—fire becomes ice!" |

### 8.3 Severity Levels

| Severity | Effect Range | Description |
|----------|--------------|-------------|
| `Minor` | None-Cosmetic | Embarrassing but harmless |
| `Moderate` | 5-8 damage, 1-2 turn debuff | Painful but recoverable |
| `Severe` | 8-12 damage, 2-3 turn debuff | Significant consequences |
| `Catastrophic` | 12+ damage, permanent effects | Devastating, potentially fatal |

### 8.4 Mechanical Effects

The `mechanicalEffect` property stores JSON-encoded game effects:

```json
{
  "damage": 5,
  "status": "Corrupted",
  "duration": 2,
  "target": "Self",
  "ap_loss": 5,
  "healing_to_enemy": 10,
  "random_effect": true,
  "corruption": 1,
  "permanent_effect": "Choir_Touched"
}
```

| Property | Type | Description |
|----------|------|-------------|
| `damage` | integer | Damage dealt |
| `status` | string | Status effect applied |
| `duration` | integer | Effect duration in turns |
| `target` | string | Effect target (Self, Enemy, Area, All) |
| `ap_loss` | integer | Action points lost |
| `healing_to_enemy` | integer | Healing given to enemy (drain reversal) |
| `random_effect` | boolean | Triggers random effect table |
| `corruption` | integer | Corruption points gained |
| `permanent_effect` | string | Permanent effect applied |

---

## 9. WeaponArtDescriptor Definition

### 9.1 Weapon Art Properties

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| `id` | string | **Yes** | - | Unique descriptor identifier |
| `text` | string | **Yes** | - | Ability description with {Variables} |
| `weight` | integer | No | 10 | Selection weight |
| `abilityCategory` | string | **Yes** | - | Ability type (enum) |
| `abilityName` | string | **Yes** | - | Specific ability name |
| `weaponType` | string | No | null | Associated weapon type |
| `specialization` | string | No | null | Player specialization |
| `successLevel` | string | No | null | Success level filter |
| `tags` | array | No | [] | Metadata tags |

### 9.2 Ability Categories

| Category | Description | Examples |
|----------|-------------|----------|
| `WeaponArt` | Special weapon attacks | WhirlwindStrike, PrecisionStrike |
| `TacticalAbility` | Combat maneuvers | Sprint, Disengage, Charge |
| `DefensiveAbility` | Protective actions | Block, Parry, DefensiveStance |
| `PassiveAbility` | Constant effects | Awareness, Toughness |
| `ResourceAbility` | Resource management | SecondWind, Rally |

### 9.3 Weapon Types

| Type | Description | Example Abilities |
|------|-------------|-------------------|
| `TwoHanded` | Two-handed weapons | Cleave, Overhead Strike |
| `OneHanded` | One-handed weapons | Quick Slash, Shield Bash |
| `DualWield` | Dual-wielded weapons | Flurry, Cross Strike |
| `Bow` | Ranged bow | Aimed Shot, Volley |
| `Crossbow` | Ranged crossbow | Power Shot, Quick Reload |
| `Unarmed` | No weapon | Punch, Kick, Grapple |
| `Shield` | Shield-based | Shield Bash, Block |

---

## 10. SkillUsageDescriptor Definition

### 10.1 Skill Usage Properties

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| `id` | string | **Yes** | - | Unique descriptor identifier |
| `text` | string | **Yes** | - | Skill usage description |
| `weight` | integer | No | 10 | Selection weight |
| `skillName` | string | **Yes** | - | Associated skill |
| `successLevel` | string | No | null | Success level filter |
| `difficulty` | string | No | null | Task difficulty |
| `tags` | array | No | [] | Metadata tags |

### 10.2 Difficulty Levels

| Difficulty | Description | Target Number Range |
|------------|-------------|---------------------|
| `trivial` | Almost automatic | 1-2 |
| `easy` | Slight challenge | 3-4 |
| `moderate` | Standard difficulty | 5-6 |
| `hard` | Significant challenge | 7-8 |
| `very_hard` | Expert required | 9-10 |
| `near_impossible` | Legendary feat | 11+ |

---

## 11. Rune Schools Reference

### 11.1 Elder Futhark Runes

The 24 Elder Futhark runes form the foundation of the Galdr magic system:

| Rune | Name | Symbol | Domain | Example Ability |
|------|------|--------|--------|-----------------|
| 1 | Fehu | ᚠ | Fire/Wealth | FlameBolt, InfernoWard |
| 2 | Uruz | ᚢ | Strength/Health | BullRush, Fortify |
| 3 | Thurisaz | ᚦ | Ice/Thorns | FrostLance, ThornBarrier |
| 4 | Ansuz | ᚨ | Wind/Divine | LightningBolt, Prophecy |
| 5 | Raido | ᚱ | Journey/Movement | SwiftJourney, Teleport |
| 6 | Kenaz | ᚲ | Torch/Knowledge | Illuminate, Reveal |
| 7 | Gebo | ᚷ | Gift/Exchange | Blessing, Sacrifice |
| 8 | Wunjo | ᚹ | Joy/Harmony | Restoration, Morale |
| 9 | Hagalaz | ᚺ | Hail/Destruction | Hailstorm, Shatter |
| 10 | Naudiz | ᚾ | Need/Constraint | DrainLife, Binding |
| 11 | Isa | ᛁ | Ice/Stillness | FrozenTime, Glaciate |
| 12 | Jera | ᛃ | Year/Harvest | Accelerate, Growth |
| 13 | Eihwaz | ᛇ | Yew/Death | LifeDrain, Deathward |
| 14 | Perthro | ᛈ | Mystery/Fate | FortuneTurn, Gambit |
| 15 | Algiz | ᛉ | Protection/Elk | Shield, Sanctuary |
| 16 | Sowilo | ᛊ | Sun/Victory | Radiance, Triumph |
| 17 | Tiwaz | ᛏ | Tyr/Justice | RuneWard, Judgment |
| 18 | Berkanan | ᛒ | Birch/Growth | HealingChant, Nurture |
| 19 | Ehwaz | ᛖ | Horse/Partnership | Swiftness, Bond |
| 20 | Mannaz | ᛗ | Man/Mind | Empower, Clarity |
| 21 | Laguz | ᛚ | Water/Flow | CleansingWave, Torrent |
| 22 | Ingwaz | ᛝ | Ing/Fertility | Nurture, Renewal |
| 23 | Dagaz | ᛞ | Day/Awakening | Dawn, Enlighten |
| 24 | Othala | ᛟ | Heritage/Home | AncestralMemory, Homeland |

### 11.2 Rune School Enum

```json
{
  "RuneSchool": {
    "enum": [
      "Fehu", "Uruz", "Thurisaz", "Ansuz", "Raido", "Kenaz", "Gebo", "Wunjo",
      "Hagalaz", "Naudiz", "Isa", "Jera", "Eihwaz", "Perthro", "Algiz", "Sowilo",
      "Tiwaz", "Berkanan", "Ehwaz", "Mannaz", "Laguz", "Ingwaz", "Dagaz", "Othala"
    ]
  }
}
```

---

## 12. Success Levels Reference

| Level | Successes | Description | Descriptor Tone |
|-------|-----------|-------------|-----------------|
| `MinorSuccess` | 1-2 | Barely achieved | Weak, sputtering, barely |
| `SolidSuccess` | 3-4 | Standard success | Strong, effective, true |
| `ExceptionalSuccess` | 5+ | Outstanding result | Perfect, devastating, overwhelming |
| `Failure` | 0 | Did not succeed | Failed, fizzled, missed |
| `CriticalFailure` | Special | Catastrophic failure | Backfired, inverted, paradox |

```json
{
  "SuccessLevel": {
    "enum": [
      "MinorSuccess",
      "SolidSuccess",
      "ExceptionalSuccess",
      "Failure",
      "CriticalFailure"
    ]
  }
}
```

---

## 13. Variable Placeholders Reference

Variable placeholders enable dynamic content substitution in descriptor text.

### Character Variables

| Variable | Description | Example Value |
|----------|-------------|---------------|
| `{Caster}` | Caster name | "Bjorn Ironwill" / "You" |
| `{Target}` | Target name | "the Corrupted Servitor" |
| `{Enemy}` | Enemy name | "the Forlorn" |
| `{Ally}` | Ally name | "Sigrun" |

### Ability Variables

| Variable | Description | Example Value |
|----------|-------------|---------------|
| `{Ability}` | Ability display name | "Flame Bolt" |
| `{Rune}` | Rune name | "Fehu" |
| `{RuneSymbol}` | Rune glyph | "ᚠ" |
| `{Element}` | Element type | "Fire" |

### Weapon Variables

| Variable | Description | Example Value |
|----------|-------------|---------------|
| `{Weapon}` | Weapon name | "Rusted Atgeir" |
| `{WeaponType}` | Weapon category | "Two-Handed" |

### Outcome Variables

| Variable | Description | Example Value |
|----------|-------------|---------------|
| `{Damage}` | Damage amount | "15" |
| `{SuccessCount}` | Successes rolled | "3" |
| `{Healing}` | Healing amount | "20" |
| `{Duration}` | Effect duration | "2 turns" |

### Location Variables

| Variable | Description | Example Value |
|----------|-------------|---------------|
| `{Target_Location}` | Body part hit | "torso" |
| `{Vital_Location}` | Vital area | "heart" |
| `{Biome}` | Current biome | "Muspelheim" |
| `{Environment_Feature}` | Nearby feature | "corroded pillar" |

### Manifestation Variables

| Variable | Description | Example Value |
|----------|-------------|---------------|
| `{RunicGlyph}` | Rune visual | "blazing crimson sigil" |
| `{MagicColor}` | Magic color | "crimson" |
| `{SoundEffect}` | Auditory effect | "crackling roar" |
| `{TactileEffect}` | Tactile sensation | "searing heat" |

### Corruption Variables

| Variable | Description | Example Value |
|----------|-------------|---------------|
| `{BlightEffect}` | Blight description | "rust-tainted corruption" |
| `{ParadoxManifestation}` | Paradox visual | "flickering between states" |
| `{CorruptionLevel}` | Severity | "Moderate" |

---

## 14. Configuration Schema

### Complete `ability-descriptors.schema.json`

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://rune-game.com/schemas/ability-descriptors.schema.json",
  "title": "Ability Descriptor Configuration",
  "description": "Schema for ability and Galdr flavor text descriptors",
  "type": "object",
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference"
    },
    "version": {
      "type": "string",
      "description": "Schema version (semver format)",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "category": {
      "type": "string",
      "description": "Descriptor category",
      "enum": [
        "galdr-actions",
        "galdr-manifestations",
        "galdr-outcomes",
        "galdr-miscasts",
        "weapon-arts",
        "skill-usage"
      ]
    },
    "pools": {
      "type": "object",
      "description": "Map of pool ID to descriptor array",
      "additionalProperties": {
        "type": "array",
        "items": {
          "oneOf": [
            { "$ref": "#/definitions/GaldrActionDescriptor" },
            { "$ref": "#/definitions/GaldrManifestationDescriptor" },
            { "$ref": "#/definitions/GaldrOutcomeDescriptor" },
            { "$ref": "#/definitions/GaldrMiscastDescriptor" },
            { "$ref": "#/definitions/WeaponArtDescriptor" },
            { "$ref": "#/definitions/SkillUsageDescriptor" }
          ]
        },
        "minItems": 1
      },
      "propertyNames": {
        "pattern": "^[a-z][a-z0-9_]*$"
      }
    }
  },
  "required": ["version", "category", "pools"],
  "additionalProperties": false,
  "definitions": {
    "GaldrActionDescriptor": {
      "type": "object",
      "description": "Galdr casting sequence descriptor",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique descriptor identifier",
          "pattern": "^[a-z][a-z0-9_-]*$"
        },
        "text": {
          "type": "string",
          "description": "Descriptor text with {Variable} placeholders",
          "minLength": 1
        },
        "weight": {
          "type": "integer",
          "description": "Selection weight (higher = more likely)",
          "minimum": 1,
          "default": 10
        },
        "actionType": {
          "type": "string",
          "description": "Casting phase",
          "enum": [
            "Invocation",
            "Chant",
            "RuneManifestation",
            "Discharge",
            "Aftermath",
            "EffectTrigger",
            "Activation"
          ]
        },
        "runeSchool": {
          "oneOf": [
            { "$ref": "#/definitions/RuneSchool" },
            { "type": "null" }
          ],
          "description": "Associated rune school (null for generic)"
        },
        "abilityName": {
          "type": ["string", "null"],
          "description": "Specific ability name (null for generic)"
        },
        "successLevel": {
          "oneOf": [
            { "$ref": "#/definitions/SuccessLevel" },
            { "type": "null" }
          ],
          "description": "Success level filter"
        },
        "biome": {
          "type": ["string", "null"],
          "description": "Biome-specific variant"
        },
        "tags": {
          "type": "array",
          "description": "Metadata tags for filtering",
          "items": { "type": "string" },
          "default": []
        }
      },
      "required": ["id", "text", "actionType"],
      "additionalProperties": false
    },
    "GaldrManifestationDescriptor": {
      "type": "object",
      "description": "Galdr sensory manifestation descriptor",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique descriptor identifier",
          "pattern": "^[a-z][a-z0-9_-]*$"
        },
        "text": {
          "type": "string",
          "description": "Manifestation description",
          "minLength": 1
        },
        "weight": {
          "type": "integer",
          "description": "Selection weight",
          "minimum": 1,
          "default": 10
        },
        "manifestationType": {
          "type": "string",
          "description": "Sensory type",
          "enum": ["Visual", "Auditory", "Tactile", "Supernatural", "RunicGlyph"]
        },
        "runeSchool": {
          "$ref": "#/definitions/RuneSchool",
          "description": "Associated rune school"
        },
        "element": {
          "type": ["string", "null"],
          "description": "Element type (Fire, Ice, Lightning, etc.)"
        },
        "powerLevel": {
          "type": "string",
          "description": "Power intensity",
          "enum": ["Weak", "Moderate", "Strong", "Devastating", "Catastrophic"],
          "default": "Moderate"
        },
        "biome": {
          "type": ["string", "null"],
          "description": "Biome-specific variant"
        },
        "environmentalInteraction": {
          "type": ["string", "null"],
          "description": "Environmental effect description"
        },
        "tags": {
          "type": "array",
          "items": { "type": "string" },
          "default": []
        }
      },
      "required": ["id", "text", "manifestationType", "runeSchool"],
      "additionalProperties": false
    },
    "GaldrOutcomeDescriptor": {
      "type": "object",
      "description": "Galdr ability outcome descriptor",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique descriptor identifier",
          "pattern": "^[a-z][a-z0-9_-]*$"
        },
        "text": {
          "type": "string",
          "description": "Outcome narrative with {Variables}",
          "minLength": 1
        },
        "weight": {
          "type": "integer",
          "description": "Selection weight",
          "minimum": 1,
          "default": 10
        },
        "outcomeType": {
          "type": "string",
          "description": "Result type",
          "enum": [
            "Hit",
            "Miss",
            "CriticalHit",
            "PartialEffect",
            "FullEffect",
            "Resisted",
            "Immune",
            "Amplified"
          ]
        },
        "abilityName": {
          "type": "string",
          "description": "Associated ability",
          "minLength": 1
        },
        "successCount": {
          "type": ["integer", "null"],
          "description": "Specific success count filter",
          "minimum": 0
        },
        "targetType": {
          "type": ["string", "null"],
          "description": "Target classification",
          "enum": ["Enemy", "Self", "Ally", "Area", "Environment", null]
        },
        "enemyArchetype": {
          "type": ["string", "null"],
          "description": "Enemy-specific variant"
        },
        "effectCategory": {
          "type": ["string", "null"],
          "description": "Effect type classification",
          "enum": ["Damage", "Healing", "Buff", "Debuff", "Control", "Utility", "Summon", null]
        },
        "tags": {
          "type": "array",
          "items": { "type": "string" },
          "default": []
        }
      },
      "required": ["id", "text", "outcomeType", "abilityName"],
      "additionalProperties": false
    },
    "GaldrMiscastDescriptor": {
      "type": "object",
      "description": "Galdr miscast/failure descriptor",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique descriptor identifier",
          "pattern": "^[a-z][a-z0-9_-]*$"
        },
        "text": {
          "type": "string",
          "description": "Miscast narrative",
          "minLength": 1
        },
        "weight": {
          "type": "integer",
          "description": "Selection weight",
          "minimum": 1,
          "default": 10
        },
        "miscastType": {
          "type": "string",
          "description": "Failure type",
          "enum": [
            "BlightCorruption",
            "Paradox",
            "Backlash",
            "Fizzle",
            "WildMagic",
            "AlfheimDistortion",
            "RunicInversion"
          ]
        },
        "severity": {
          "type": "string",
          "description": "Severity level",
          "enum": ["Minor", "Moderate", "Severe", "Catastrophic"]
        },
        "runeSchool": {
          "oneOf": [
            { "$ref": "#/definitions/RuneSchool" },
            { "type": "null" }
          ],
          "description": "Affected rune school"
        },
        "abilityName": {
          "type": ["string", "null"],
          "description": "Specific ability"
        },
        "corruptionSource": {
          "type": ["string", "null"],
          "description": "Cause of corruption",
          "enum": ["RunicBlight", "AlfheimCursedChoir", "AethericOverload", null]
        },
        "biome": {
          "type": ["string", "null"],
          "description": "Biome-specific variant"
        },
        "mechanicalEffect": {
          "type": ["object", "null"],
          "description": "Game mechanical effects (JSON)",
          "properties": {
            "damage": { "type": "integer" },
            "status": { "type": "string" },
            "duration": { "type": "integer" },
            "target": { "type": "string" },
            "ap_loss": { "type": "integer" },
            "healing_to_enemy": { "type": "integer" },
            "random_effect": { "type": "boolean" },
            "corruption": { "type": "integer" },
            "permanent_effect": { "type": "string" },
            "cosmetic": { "type": "boolean" }
          },
          "additionalProperties": true
        },
        "tags": {
          "type": "array",
          "items": { "type": "string" },
          "default": []
        }
      },
      "required": ["id", "text", "miscastType", "severity"],
      "additionalProperties": false
    },
    "WeaponArtDescriptor": {
      "type": "object",
      "description": "Weapon art ability descriptor",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique descriptor identifier",
          "pattern": "^[a-z][a-z0-9_-]*$"
        },
        "text": {
          "type": "string",
          "description": "Ability description with {Variables}",
          "minLength": 1
        },
        "weight": {
          "type": "integer",
          "description": "Selection weight",
          "minimum": 1,
          "default": 10
        },
        "abilityCategory": {
          "type": "string",
          "description": "Ability type",
          "enum": [
            "WeaponArt",
            "TacticalAbility",
            "DefensiveAbility",
            "PassiveAbility",
            "ResourceAbility"
          ]
        },
        "abilityName": {
          "type": "string",
          "description": "Specific ability name",
          "minLength": 1
        },
        "weaponType": {
          "type": ["string", "null"],
          "description": "Associated weapon type",
          "enum": ["TwoHanded", "OneHanded", "DualWield", "Bow", "Crossbow", "Unarmed", "Shield", null]
        },
        "specialization": {
          "type": ["string", "null"],
          "description": "Player specialization"
        },
        "successLevel": {
          "oneOf": [
            { "$ref": "#/definitions/SuccessLevel" },
            { "type": "null" }
          ],
          "description": "Success level filter"
        },
        "tags": {
          "type": "array",
          "items": { "type": "string" },
          "default": []
        }
      },
      "required": ["id", "text", "abilityCategory", "abilityName"],
      "additionalProperties": false
    },
    "SkillUsageDescriptor": {
      "type": "object",
      "description": "Skill usage descriptor",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique descriptor identifier",
          "pattern": "^[a-z][a-z0-9_-]*$"
        },
        "text": {
          "type": "string",
          "description": "Skill usage description",
          "minLength": 1
        },
        "weight": {
          "type": "integer",
          "description": "Selection weight",
          "minimum": 1,
          "default": 10
        },
        "skillName": {
          "type": "string",
          "description": "Associated skill",
          "minLength": 1
        },
        "successLevel": {
          "oneOf": [
            { "$ref": "#/definitions/SuccessLevel" },
            { "type": "null" }
          ],
          "description": "Success level filter"
        },
        "difficulty": {
          "type": ["string", "null"],
          "description": "Task difficulty",
          "enum": ["trivial", "easy", "moderate", "hard", "very_hard", "near_impossible", null]
        },
        "tags": {
          "type": "array",
          "items": { "type": "string" },
          "default": []
        }
      },
      "required": ["id", "text", "skillName"],
      "additionalProperties": false
    },
    "RuneSchool": {
      "type": "string",
      "description": "Elder Futhark rune school",
      "enum": [
        "Fehu", "Uruz", "Thurisaz", "Ansuz", "Raido", "Kenaz", "Gebo", "Wunjo",
        "Hagalaz", "Naudiz", "Isa", "Jera", "Eihwaz", "Perthro", "Algiz", "Sowilo",
        "Tiwaz", "Berkanan", "Ehwaz", "Mannaz", "Laguz", "Ingwaz", "Dagaz", "Othala"
      ]
    },
    "SuccessLevel": {
      "type": "string",
      "description": "Ability success level",
      "enum": [
        "MinorSuccess",
        "SolidSuccess",
        "ExceptionalSuccess",
        "Failure",
        "CriticalFailure"
      ]
    }
  }
}
```

---

## 15. Logging Specifications

### Schema Validation Logging

| Event | Level | Message Format |
|-------|-------|----------------|
| Schema loaded | INFO | `Ability descriptor schema loaded from {path}` |
| Validation success | DEBUG | `Ability descriptors validated ({poolCount} pools, {descriptorCount} descriptors)` |
| Validation failure | ERROR | `Ability descriptor validation failed: {errors}` |
| Invalid category | ERROR | `Category '{category}' not in valid enum` |
| Invalid rune school | ERROR | `RuneSchool '{school}' not in valid enum` |
| Invalid action type | ERROR | `ActionType '{type}' not in valid enum` |
| Invalid miscast type | ERROR | `MiscastType '{type}' not in valid enum` |
| Missing required | ERROR | `Descriptor missing required field: {field}` |
| Empty pool | WARN | `Pool '{poolId}' contains no descriptors` |

### Runtime Logging

| Event | Level | Message Format |
|-------|-------|----------------|
| Pool loaded | DEBUG | `Loaded pool '{poolId}' ({count} descriptors)` |
| Descriptor selected | DEBUG | `Selected descriptor '{id}' from pool '{poolId}'` |
| Variable substitution | TRACE | `Substituted {count} variables in descriptor '{id}'` |
| Missing pool | WARN | `Pool '{poolId}' not found, using fallback` |
| No matching descriptor | WARN | `No descriptor matches filters: {filters}` |

---

## 16. Unit Testing Requirements

### Test Summary

| Test ID | Test Name | Description |
|---------|-----------|-------------|
| ABL-001 | ValidAbilityDescriptorConfiguration | Validates complete configuration file |
| ABL-002 | GaldrActionDescriptorValidation | Validates action descriptor structure |
| ABL-003 | GaldrMiscastDescriptorValidation | Validates miscast descriptor structure |
| ABL-004 | RuneSchoolEnumValidation | Validates all 24 rune schools |
| ABL-005 | SuccessLevelEnumValidation | Validates success level enums |
| ABL-006 | PoolIdPatternValidation | Validates pool ID naming pattern |

### Test Specifications

#### ABL-001: ValidAbilityDescriptorConfiguration

```
Test: Valid complete ability descriptor configuration passes validation
Given: An ability descriptor JSON file with multiple pools and descriptors
When: Schema validation is performed
Then: Validation passes with no errors
And: All pools contain at least one descriptor
And: Rune schools are valid enum values
And: Action types are valid enum values
```

#### ABL-002: GaldrActionDescriptorValidation

```
Test: Galdr action descriptor structure validates correctly
Given: Action descriptors with various configurations
When: Schema validation is performed:
  - { "id": "test", "text": "You invoke...", "actionType": "Invocation" } → passes (minimal)
  - { "id": "test", "text": "...", "actionType": "Invocation", "runeSchool": "Fehu" } → passes
  - { "text": "...", "actionType": "Invocation" } → fails (missing id)
  - { "id": "test", "actionType": "Invocation" } → fails (missing text)
  - { "id": "test", "text": "...", "actionType": "Invalid" } → fails (invalid actionType)
  - { "id": "test", "text": "...", "actionType": "Invocation", "runeSchool": "Invalid" } → fails
Then: Required fields enforced, enums validated
```

#### ABL-003: GaldrMiscastDescriptorValidation

```
Test: Galdr miscast descriptor validates miscast types and severities
Given: Miscast descriptors with various configurations
When: Schema validation is performed:
  - { "id": "test", "text": "...", "miscastType": "Fizzle", "severity": "Minor" } → passes
  - { "id": "test", "text": "...", "miscastType": "BlightCorruption", "severity": "Severe" } → passes
  - { "id": "test", "text": "...", "miscastType": "Invalid", "severity": "Minor" } → fails
  - { "id": "test", "text": "...", "miscastType": "Fizzle", "severity": "Invalid" } → fails
  - { "id": "test", "text": "...", "miscastType": "Fizzle" } → fails (missing severity)
Then: Miscast types and severities validated against enums
```

#### ABL-004: RuneSchoolEnumValidation

```
Test: All 24 Elder Futhark rune schools validate correctly
Given: Descriptors with each rune school
When: Schema validation is performed:
  - runeSchool: "Fehu" → passes
  - runeSchool: "Uruz" → passes
  - runeSchool: "Thurisaz" → passes
  - ... (all 24 runes)
  - runeSchool: "Othala" → passes
  - runeSchool: "InvalidRune" → fails
  - runeSchool: "fehu" → fails (lowercase)
  - runeSchool: "FEHU" → fails (uppercase)
Then: Only valid PascalCase rune school names accepted
```

#### ABL-005: SuccessLevelEnumValidation

```
Test: Success levels validate correctly
Given: Descriptors with various success levels
When: Schema validation is performed:
  - successLevel: "MinorSuccess" → passes
  - successLevel: "SolidSuccess" → passes
  - successLevel: "ExceptionalSuccess" → passes
  - successLevel: "Failure" → passes
  - successLevel: "CriticalFailure" → passes
  - successLevel: null → passes (optional)
  - successLevel: "minor_success" → fails (snake_case)
  - successLevel: "Invalid" → fails
Then: Only valid success level enum values accepted
```

#### ABL-006: PoolIdPatternValidation

```
Test: Pool ID pattern validates correctly
Given: Configuration with various pool IDs
When: Schema validation is performed:
  - "fehu_flamebolt_solid" → passes
  - "generic_invocation" → passes
  - "miscast_blight_minor" → passes
  - "Fehu_FlameBolt" → fails (uppercase)
  - "fehu-flamebolt" → fails (hyphen)
  - "123_pool" → fails (starts with number)
  - "" → fails (empty)
Then: Pool IDs must match pattern ^[a-z][a-z0-9_]*$
```

---

## 17. Use Cases

### UC-001: Load Galdr Action Descriptors

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ UC-001: Load Galdr Action Descriptors                                        │
├─────────────────────────────────────────────────────────────────────────────┤
│ Actors: Game System                                                          │
│ Trigger: Game initialization                                                 │
│ Preconditions: Descriptor files exist                                        │
├─────────────────────────────────────────────────────────────────────────────┤
│ Flow:                                                                        │
│ 1. System loads ability-descriptors.schema.json                              │
│ 2. System reads galdr-actions.json                                           │
│ 3. Validate configuration against schema                                     │
│ 4. Build pool lookup by ID                                                   │
│ 5. Cache descriptors for performance                                         │
│ 6. Log pool statistics                                                       │
├─────────────────────────────────────────────────────────────────────────────┤
│ Postconditions: Descriptors loaded and cached                                │
│ Exceptions: Invalid JSON → log error, use fallback text                      │
└─────────────────────────────────────────────────────────────────────────────┘
```

### UC-002: Select Casting Descriptor

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ UC-002: Select Casting Descriptor                                            │
├─────────────────────────────────────────────────────────────────────────────┤
│ Actors: Combat System                                                        │
│ Trigger: Player casts Galdr ability                                          │
│ Preconditions: Descriptors loaded                                            │
├─────────────────────────────────────────────────────────────────────────────┤
│ Flow:                                                                        │
│ 1. Determine rune school (e.g., "Fehu")                                      │
│ 2. Determine ability name (e.g., "FlameBolt")                                │
│ 3. Determine success level (e.g., "SolidSuccess")                            │
│ 4. Build pool ID: "fehu_flamebolt_solid"                                     │
│ 5. Retrieve pool from cache                                                  │
│ 6. Filter by biome if applicable                                             │
│ 7. Select descriptor by weighted random                                      │
│ 8. Substitute variables ({Target}, {Damage}, etc.)                           │
│ 9. Return formatted text                                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│ Postconditions: Descriptor text ready for display                            │
│ Exceptions: Pool not found → use generic pool or fallback text               │
└─────────────────────────────────────────────────────────────────────────────┘
```

### UC-003: Select Miscast Descriptor

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ UC-003: Select Miscast Descriptor                                            │
├─────────────────────────────────────────────────────────────────────────────┤
│ Actors: Combat System                                                        │
│ Trigger: Galdr casting fails                                                 │
│ Preconditions: Miscast descriptors loaded                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│ Flow:                                                                        │
│ 1. Determine miscast type (e.g., "BlightCorruption")                         │
│ 2. Determine severity from failure margin                                    │
│ 3. Check biome for special effects (Alfheim → AlfheimDistortion)             │
│ 4. Build pool ID: "miscast_blight_moderate"                                  │
│ 5. Retrieve pool from cache                                                  │
│ 6. Filter by rune school if available                                        │
│ 7. Select descriptor by weighted random                                      │
│ 8. Extract mechanical effects if present                                     │
│ 9. Substitute variables                                                      │
│ 10. Apply mechanical effects to game state                                   │
│ 11. Return formatted text                                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│ Postconditions: Miscast text and effects ready                               │
│ Exceptions: Missing pool → use generic miscast                               │
└─────────────────────────────────────────────────────────────────────────────┘
```

### UC-004: Select Outcome Descriptor

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ UC-004: Select Outcome Descriptor                                            │
├─────────────────────────────────────────────────────────────────────────────┤
│ Actors: Combat System                                                        │
│ Trigger: Ability resolves against target                                     │
│ Preconditions: Outcome descriptors loaded                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│ Flow:                                                                        │
│ 1. Determine ability name (e.g., "FlameBolt")                                │
│ 2. Determine outcome type (Hit, Miss, CriticalHit, etc.)                     │
│ 3. Determine target type (Enemy, Self, etc.)                                 │
│ 4. Check for enemy archetype specific descriptors                            │
│ 5. Build pool ID: "flamebolt_hit_enemy"                                      │
│ 6. Retrieve pool from cache                                                  │
│ 7. Filter by archetype if match exists                                       │
│ 8. Select descriptor by weighted random                                      │
│ 9. Substitute variables ({Target}, {Damage}, {Target_Location})              │
│ 10. Return formatted text                                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│ Postconditions: Outcome text ready for display                               │
│ Exceptions: Missing pool → use generic outcome                               │
└─────────────────────────────────────────────────────────────────────────────┘
```

### UC-005: Select Weapon Art Descriptor

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ UC-005: Select Weapon Art Descriptor                                         │
├─────────────────────────────────────────────────────────────────────────────┤
│ Actors: Combat System                                                        │
│ Trigger: Player uses weapon art ability                                      │
│ Preconditions: Weapon art descriptors loaded                                 │
├─────────────────────────────────────────────────────────────────────────────┤
│ Flow:                                                                        │
│ 1. Determine ability category (e.g., "WeaponArt")                            │
│ 2. Determine ability name (e.g., "WhirlwindStrike")                          │
│ 3. Determine weapon type (e.g., "TwoHanded")                                 │
│ 4. Determine success level                                                   │
│ 5. Build pool ID: "weaponart_whirlwind_twohanded"                            │
│ 6. Retrieve pool from cache                                                  │
│ 7. Filter by specialization if applicable                                    │
│ 8. Select descriptor by weighted random                                      │
│ 9. Substitute variables ({Weapon}, {Target}, {Damage})                       │
│ 10. Return formatted text                                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│ Postconditions: Weapon art text ready for display                            │
│ Exceptions: Missing pool → use generic weapon art                            │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 18. Deliverable Checklist

### Configuration Files

| Status | File | Description |
|--------|------|-------------|
| ☐ | `config/schemas/ability-descriptors.schema.json` | JSON Schema for validation |
| ☐ | `config/ability-descriptors/galdr-actions.json` | Example Galdr action descriptors |
| ☐ | `config/ability-descriptors/galdr-manifestations.json` | Example manifestation descriptors |
| ☐ | `config/ability-descriptors/galdr-outcomes.json` | Example outcome descriptors |
| ☐ | `config/ability-descriptors/galdr-miscasts.json` | Example miscast descriptors |
| ☐ | `config/ability-descriptors/weapon-arts.json` | Example weapon art descriptors |

### Unit Tests

| Status | Test | Description |
|--------|------|-------------|
| ☐ | ABL-001 | Valid complete configuration |
| ☐ | ABL-002 | Galdr action descriptor validation |
| ☐ | ABL-003 | Galdr miscast descriptor validation |
| ☐ | ABL-004 | Rune school enum validation |
| ☐ | ABL-005 | Success level enum validation |
| ☐ | ABL-006 | Pool ID pattern validation |

### Documentation

| Status | Document | Description |
|--------|----------|-------------|
| ☑ | Design Specification | This document |
| ☐ | Schema Documentation | Inline in schema file |
| ☐ | Variable Placeholder Guide | Developer reference |

---

## 19. Acceptance Criteria

### Functional Criteria

- [ ] `ability-descriptors.schema.json` created in `config/schemas/`
- [ ] Schema validates all 24 rune schools (Elder Futhark)
- [ ] Action types validated (7 types)
- [ ] Manifestation types validated (5 types)
- [ ] Outcome types validated (8 types)
- [ ] Miscast types validated (7 types)
- [ ] Severity levels validated (4 levels)
- [ ] Success levels validated (5 levels)
- [ ] Pool ID pattern validated (snake_case)
- [ ] Descriptor ID pattern validated
- [ ] Variable placeholders documented
- [ ] ~6 unit tests pass

### Quality Criteria

- [ ] Schema follows JSON Schema Draft-07 specification
- [ ] All properties include descriptive comments
- [ ] Default values documented for optional fields
- [ ] Pattern constraints clearly specified
- [ ] Enum values match existing SQL content

### Integration Criteria

- [ ] Schema follows patterns from v0.14.9a (dialogue schema)
- [ ] Compatible with existing SQL schema structure
- [ ] Pool IDs use snake_case
- [ ] Property names use camelCase within descriptors
- [ ] Rune school names use PascalCase (Fehu, not fehu)

---

## 20. Dependencies

### Required From

| Version | Dependency | Usage |
|---------|------------|-------|
| v0.14.8 | Dice Configuration Schemas | Schema infrastructure patterns |
| v0.14.9a | Dialogue Schema | Schema pattern reference |
| Existing | `galdr_flavor_text_schema.sql` | Source structure |
| Existing | `galdr_action_descriptors.sql` | Source content |
| Existing | `galdr_outcome_descriptors.sql` | Source content |
| Existing | `galdr_miscast_descriptors.sql` | Source content |

### Provides To

| Version | Consumer | Usage |
|---------|----------|-------|
| v0.14.9c | NPC Descriptor Schema | Schema pattern reference |
| v0.14.9d | Psychological Descriptor Schema | Schema pattern reference |
| Future | AbilityDescriptorService | Descriptor loading and selection |
| Future | CombatService | Ability flavor text |
| Future | GaldrCastingSystem | Magic casting narratives |

---

## 21. Future Considerations

### Deferred to Later Versions

| Feature | Rationale |
|---------|-----------|
| NPC descriptor schema | v0.14.9c scope |
| Psychological descriptor schema | v0.14.9d scope |
| Descriptor execution logic | Runtime concern |
| Audio cue integration | Future audio version |
| Localization support | Future i18n version |

### Potential Enhancements

| Enhancement | Description |
|-------------|-------------|
| Descriptor chaining | Multiple descriptors per cast (invocation → manifestation → discharge) |
| Mood modifiers | Descriptors affected by character emotional state |
| Experience-based | Descriptors change as caster gains experience |
| Custom player descriptors | Allow players to customize their casting style |
| Caster voice profiles | NPC-specific casting styles (VardWarden, RustWitch) |
| Descriptor combos | Special descriptors for ability combinations |
| Seasonal variants | Descriptors change with in-game seasons |

---

## 22. Appendix: Schema Validation Examples

### Valid Galdr Action Descriptor (Minimal)

```json
{
  "id": "fehu_flamebolt_invocation_001",
  "text": "You invoke Fehu...",
  "actionType": "Invocation"
}
```

### Valid Galdr Action Descriptor (Complete)

```json
{
  "id": "fehu_flamebolt_solid_001",
  "text": "You sing the Fehu rune, its ancient will igniting the air. A bolt of flame streaks toward the {Target}, trailing embers.",
  "weight": 10,
  "actionType": "Invocation",
  "runeSchool": "Fehu",
  "abilityName": "FlameBolt",
  "successLevel": "SolidSuccess",
  "biome": null,
  "tags": ["Verbose", "Descriptive"]
}
```

### Valid Galdr Miscast Descriptor

```json
{
  "id": "blight_corruption_fehu_moderate_001",
  "text": "Fehu inverts! Fire erupts—but it's cold flame, paradoxical and painful! You stagger as reality rebels!",
  "weight": 10,
  "miscastType": "BlightCorruption",
  "severity": "Moderate",
  "runeSchool": "Fehu",
  "abilityName": "FlameBolt",
  "corruptionSource": "RunicBlight",
  "mechanicalEffect": {
    "damage": 6,
    "status": "Corrupted",
    "duration": 2,
    "target": "Self"
  },
  "tags": ["Paradoxical", "Dangerous"]
}
```

### Valid Galdr Outcome Descriptor

```json
{
  "id": "flamebolt_hit_enemy_001",
  "text": "Fire engulfs the {Target}, scorching their {Target_Location}! Acrid smoke rises from charred flesh.",
  "weight": 10,
  "outcomeType": "Hit",
  "abilityName": "FlameBolt",
  "successCount": 3,
  "targetType": "Enemy",
  "effectCategory": "Damage",
  "tags": ["Damage", "Fire"]
}
```

### Valid Weapon Art Descriptor

```json
{
  "id": "whirlwind_strike_twohanded_001",
  "text": "You spin your {Weapon} in a devastating arc, steel singing through the air as it cleaves through {Target}!",
  "weight": 10,
  "abilityCategory": "WeaponArt",
  "abilityName": "WhirlwindStrike",
  "weaponType": "TwoHanded",
  "successLevel": "SolidSuccess",
  "tags": ["Melee", "AoE"]
}
```

### Valid Configuration File

```json
{
  "$schema": "../../config/schemas/ability-descriptors.schema.json",
  "version": "1.0.0",
  "category": "galdr-actions",
  "pools": {
    "fehu_flamebolt_minor": [
      {
        "id": "fehu_flamebolt_minor_001",
        "text": "You chant the Fehu rune, its fiery syllables harsh on your tongue. Flames sputter weakly from your palm, barely reaching the {Target}.",
        "weight": 10,
        "actionType": "Invocation",
        "runeSchool": "Fehu",
        "abilityName": "FlameBolt",
        "successLevel": "MinorSuccess",
        "tags": ["Verbose", "Descriptive"]
      },
      {
        "id": "fehu_flamebolt_minor_002",
        "text": "You intone Fehu's name—a small gout of fire leaps forth, more smoke than flame.",
        "weight": 10,
        "actionType": "Invocation",
        "runeSchool": "Fehu",
        "abilityName": "FlameBolt",
        "successLevel": "MinorSuccess",
        "tags": ["Concise"]
      }
    ],
    "fehu_flamebolt_solid": [
      {
        "id": "fehu_flamebolt_solid_001",
        "text": "You sing the Fehu rune, its ancient will igniting the air. A bolt of flame streaks toward the {Target}, trailing embers.",
        "weight": 10,
        "actionType": "Invocation",
        "runeSchool": "Fehu",
        "abilityName": "FlameBolt",
        "successLevel": "SolidSuccess",
        "tags": ["Verbose", "Descriptive"]
      }
    ],
    "fehu_flamebolt_exceptional": [
      {
        "id": "fehu_flamebolt_exceptional_001",
        "text": "You invoke Fehu with perfect resonance—the rune blazes in the air before you! A devastating torrent of flame engulfs the {Target}!",
        "weight": 10,
        "actionType": "Invocation",
        "runeSchool": "Fehu",
        "abilityName": "FlameBolt",
        "successLevel": "ExceptionalSuccess",
        "tags": ["Dramatic", "Epic"]
      }
    ]
  }
}
```

### Invalid Examples

```json
// Invalid: Missing required 'actionType'
{
  "id": "test_001",
  "text": "You invoke..."
}
// Error: Missing required property 'actionType'

// Invalid: Invalid rune school
{
  "id": "test_001",
  "text": "...",
  "actionType": "Invocation",
  "runeSchool": "InvalidRune"
}
// Error: 'runeSchool' must be one of the valid rune schools

// Invalid: Invalid action type
{
  "id": "test_001",
  "text": "...",
  "actionType": "InvalidAction"
}
// Error: 'actionType' must be one of: Invocation, Chant, RuneManifestation, etc.

// Invalid: Invalid severity in miscast
{
  "id": "test_001",
  "text": "...",
  "miscastType": "Fizzle",
  "severity": "VeryBad"
}
// Error: 'severity' must be one of: Minor, Moderate, Severe, Catastrophic

// Invalid: Pool ID with uppercase
{
  "pools": {
    "Fehu_FlameBolt": [...]
  }
}
// Error: Pool ID must match pattern ^[a-z][a-z0-9_]*$

// Invalid: Empty pool
{
  "pools": {
    "fehu_flamebolt": []
  }
}
// Error: Pool must contain at least 1 descriptor
```

---

*End of v0.14.9b Design Specification*
