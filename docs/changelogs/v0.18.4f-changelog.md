# v0.18.4f Changelog — Configuration & Persistence

**Date:** 2026-02-02  
**Phase:** 6/6 of v0.18.4 (Specialization Resources)

---

## Summary

Implements the configuration loading infrastructure for specialization resources (Rage, Momentum, Coherence) per v0.18.4f design specification.

---

## Added

### Configuration Files

- `config/specialization-resources.json` — Complete resource configuration with thresholds, sources, and decay values
- `config/schemas/specialization-resources.schema.json` — JSON Schema for validation

### Application Layer

- `SpecializationResourceConfiguration.cs` — Root configuration record
- `RageConfigurationSection.cs` — Rage thresholds, sources, decay (Berserker)
- `MomentumConfigurationSection.cs` — Momentum thresholds, sources, decay (Storm Blade)
- `CoherenceConfigurationSection.cs` — Coherence thresholds, cascade risk, Apotheosis (Arcanist)
- `ResourceSourceConfig.cs` — Shared source configuration (flat, formula, variable)
- `ConfigurationMetadata.cs` — Config file metadata record

### Interface Extension

- `IGameConfigurationProvider.GetSpecializationResourceConfiguration()` — New method for loading specialization config

### Infrastructure

- `JsonConfigurationProvider.GetSpecializationResourceConfiguration()` — JSON file loading with caching
- `MockConfigurationProvider.GetSpecializationResourceConfiguration()` — Test mock support

### Unit Tests

- `SpecializationResourcesConfigTests.cs` — 11 tests covering:
    - Default value validation for all three sections
    - Threshold lookup via `GetThresholdForValue()`
    - Threshold constraint verification (MustAttackNearest, UltimateAbilitiesEnabled)
    - Source configuration (flat vs formula types)

---

## Verification

| Check     | Result   |
| --------- | -------- |
| Build     | ✅ Pass  |
| New Tests | 11/11 ✅ |
| Warnings  | 0        |
| Errors    | 0        |
