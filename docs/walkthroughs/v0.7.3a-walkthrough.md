# v0.7.3a Walkthrough - Combat Grid Panel

## Summary
This version implements the Combat Grid Panel for the Avalonia GUI, displaying a tactical battlefield during combat encounters.

---

## Components Created

### Enums
| File | Purpose |
|------|---------|
| `Enums/GridCellType.cs` | Cell terrain types: Floor, Wall, Water, Hazard, Cover |

### ViewModels
| File | Purpose |
|------|---------|
| `ViewModels/GridCellViewModel.cs` | Cell state with position, terrain, walkability, highlights |
| `ViewModels/EntityTokenViewModel.cs` | Token state with symbol, color, canvas positioning |
| `ViewModels/CombatGridPanelViewModel.cs` | Main ViewModel with cells, tokens, labels, legend |

### Controls
| File | Purpose |
|------|---------|
| `Controls/GridCellControl.cs` | Templated control for grid cells |
| `Controls/EntityTokenControl.cs` | Templated control for entity tokens |
| `Controls/CombatGridPanel.axaml` | Main panel with grid, tokens, and legend |
| `Controls/CombatGridPanel.axaml.cs` | Panel code-behind |

### Styles
| File | Purpose |
|------|---------|
| `Styles/CombatGridStyles.axaml` | Class-based styling for cells and tokens |

---

## Key Features

### Grid Display
- 8x8 tactical grid (configurable via `Initialize()`)
- Coordinate labels (A-H rows, 1-8 columns)
- Terrain-based cell coloring (Floor=gray, Wall=dark, Water=blue, Hazard=red)
- Cell highlighting for movement, attack, and ability ranges

### Entity Tokens
- Player token displayed as `@` in green
- Monster tokens displayed as first letter in orange-red
- Current turn indicator with accent border
- Tooltips showing entity name and HP

### Legend
- Displays symbol meanings at bottom of panel
- Colored symbols for quick reference

---

## Test Results

```
Total tests: 17
Passed: 17
Failed: 0
```

---

## Integration Notes

The panel binds to `CombatGridPanelViewModel` and shows when `IsInCombat` is true. To display the grid during combat:

```csharp
// In the main window ViewModel
_combatGridVm.SetCombatState(true);
_combatGridVm.Initialize(combatGrid);
_combatGridVm.RefreshTokens(combatants, combatGrid, currentTurnId);
```
