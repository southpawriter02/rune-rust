# v0.0.5a Changelog: Core Dice Engine

**Release Date:** 2026-01-07  
**Version:** 0.0.5a  

## Overview

Establishes the foundational dice rolling infrastructure that powers all randomization in Rune & Rust. This phase creates pure dice mechanics without game integration.

---

## Features

### Dice Pool System
- `DicePool` value object supports d4, d6, d8, d10 dice types
- Standard dice notation parsing (e.g., "3d6+5", "1d10-2", "2d8!")
- Positive and negative modifiers
- Statistical properties: min, max, average calculations

### Exploding Dice
- Dice that re-roll on maximum value
- Configurable explosion cap (default: 10)
- Explosion chain tracking in results

### Advantage/Disadvantage
- Roll twice, take higher (Advantage)
- Roll twice, take lower (Disadvantage)
- Full breakdown of both rolls in result

### Critical Detection
- `IsNaturalMax` - first die rolled maximum
- `IsNaturalOne` - first die rolled 1
- Foundation for critical success/failure mechanics

---

## Technical Changes

### Domain Layer (5 new files)

| File | Type |
|------|------|
| `Enums/DiceType.cs` | NEW - D4, D6, D8, D10 with face counts |
| `Enums/AdvantageType.cs` | NEW - Normal, Advantage, Disadvantage |
| `Enums/SuccessLevel.cs` | NEW - CriticalFailure through CriticalSuccess |
| `ValueObjects/DicePool.cs` | NEW - Dice pool with parsing and fluent API |
| `ValueObjects/DiceRollResult.cs` | NEW - Complete roll results with criticals |

### Application Layer (2 new files)

| File | Type |
|------|------|
| `Services/DiceService.cs` | NEW - Core rolling logic with explosions |
| `DTOs/DiceDtos.cs` | NEW - DiceRollDto, DicePoolDto for presentation |

---

## API Examples

```csharp
// Static factory methods
var pool = DicePool.D10();           // 1d10
var pool = DicePool.D6(3, 5);        // 3d6+5

// Notation parsing
var pool = DicePool.Parse("2d8-3");  // 2d8-3
var pool = DicePool.Parse("1d6!");   // Exploding 1d6

// Fluent modification
var exploding = pool.WithExploding();
var modified = pool.WithModifier(10);

// Rolling
var result = diceService.Roll(pool);
var result = diceService.Roll("3d6+5", AdvantageType.Advantage);
int total = diceService.RollTotal(pool);
```

---

## Testing

### New Test Files

| Test File | Count |
|-----------|-------|
| `DicePoolTests.cs` | 17 |
| `DiceRollResultTests.cs` | 9 |
| `DiceServiceTests.cs` | 14 |
| **v0.0.5a Total** | **40** |

### Test Breakdown
- DicePool: construction, validation, parsing, formatting (17 tests)
- DiceRollResult: critical detection, explosions, formatting (9 tests)
- DiceService: rolling, advantage, explosions, determinism (14 tests)

### Final Test Summary

| Suite | Count | Status |
|-------|-------|--------|
| Domain | 152 | Pass |
| Application | 78 | Pass |
| Architecture | 8 | Pass |
| **Total** | **238** | **Pass** |

---

## Acceptance Criteria (All Complete)

- [x] Roll d4, d6, d8, d10 dice
- [x] Support multiple dice (3d6)
- [x] Positive and negative modifiers
- [x] Parse dice notation strings
- [x] Advantage: roll twice, take higher
- [x] Disadvantage: roll twice, take lower
- [x] Exploding dice chain on max
- [x] Explosion cap enforced
- [x] Natural max/one detection
- [x] All 40 new tests pass
- [x] All 238 total tests pass
- [x] Build: 0 errors, 0 warnings

---

## Next Phase

**v0.0.5b: Skill Check System** - Integrates dice with skill resolution and DC comparisons.
