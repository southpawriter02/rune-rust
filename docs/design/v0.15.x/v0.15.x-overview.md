## v0.15.x - Advanced Skill Systems Pass

**Focus:** Dice pool refactor to success-counting mechanics, then expanding the 4 Core Skills to rich, contextual gameplay systems

### Overview

This version begins with a fundamental refactor of the dice pool system to align with the Aethelgard specification's success-counting mechanics. The current sum-based implementation must be converted to count successes (8-10) and botches (1s), which forms the foundation for all subsequent skill work.

After the dice refactor, v0.15.x implements the full mechanical depth defined in the Aethelgard skill specifications. While v0.4.x-v0.5.x established the foundational skill check infrastructure (dice pools, proficiency progression, basic checks), v0.15.x brings the skills to life with:

- **Success-counting mechanics** - Count 8-10 as successes, 1s as botches, net = successes - botches
- **Contextual subsystems** - Each skill gets dedicated mechanics (climbing stages, negotiation tracks, terminal infiltration layers)
- **Fumble consequences** - Catastrophic failure states with lasting effects (0 successes + ≥1 botch)
- **Master rank abilities** - Powerful capstone abilities for Rank 5 specialists
- **Specialization integration** - Archetype-specific bonuses and unique abilities
- **Rich descriptive feedback** - Voice-guided narrative outcomes

---

### Version Structure

| Version | Focus | Primary Deliverables |
|---------|-------|----------------------|
| v0.15.0 | Dice Pool Refactor | Success-counting, fumble/critical detection, seeded RNG |
| v0.15.1 | Skill Infrastructure | SkillContext, master abilities, equipment modifiers |
| v0.15.2 | Acrobatics Expansion | Climbing, leaping, stealth, chase sequences |
| v0.15.3 | Rhetoric Expansion | Persuasion, deception, intimidation, negotiation |
| v0.15.4 | System Bypass Expansion | Lockpicking, terminal hacking, trap disarmament |
| v0.15.5 | Wasteland Survival Expansion | Tracking, foraging, navigation, hazard detection |
| v0.15.6 | Advanced Perception | Passive perception, three-layer examination, flora/fauna |

---

### v0.15.0 - Dice Pool System Refactor

**Source:** [dice-system.md](../../aethelgard/design/01-core/dice-system.md)

**Scope Breakdown:** [v0.15.0-dice-pool-refactor-scope-breakdown.md](v0.15.0-dice-pool-refactor-scope-breakdown.md)

#### Current vs Target Comparison

| Aspect | Current Implementation | Target (Aethelgard Spec) |
|--------|----------------------|--------------------------|
| Success Determination | Sum all dice, compare to DC | Count 8-10 as successes (30% each) |
| Failure/Botch | No botch tracking | Count 1s as botches (10% each) |
| Net Result | Raw sum | Successes - Botches (min 0) |
| Critical Success | First die = 10 | Net Successes ≥ 5 |
| Fumble | First die = 1 | 0 Successes AND ≥1 Botch |
| Degrees of Success | Not implemented | Marginal/Full/Exceptional/Critical |

#### Sub-Versions

| Version | Focus | Tests |
|---------|-------|-------|
| v0.15.0a | Core Dice Mechanics Refactor | ~8 |
| v0.15.0b | Seeded Random Provider | ~6 |
| v0.15.0c | Skill Check Service Refactor | ~8 |
| v0.15.0d | Contested & Extended Checks | ~8 |
| v0.15.0e | Dice Roll Logging | ~5 |
| v0.15.0f | Combat Integration | ~5 |

---

### The Four Core Skills

| Skill | Attribute | Spec Document | Version |
|-------|-----------|---------------|---------|
| [Acrobatics](../../aethelgard/design/01-core/skills/acrobatics.md) | FINESSE | v0.15.2 | Climbing, leaping, stealth, chase |
| [Rhetoric](../../aethelgard/design/01-core/skills/rhetoric.md) | WILL | v0.15.3 | Persuasion, deception, intimidation |
| [System Bypass](../../aethelgard/design/01-core/skills/system-bypass.md) | WITS | v0.15.4 | Lockpicking, hacking, traps |
| [Wasteland Survival](../../aethelgard/design/01-core/skills/wasteland-survival.md) | WITS | v0.15.5 | Tracking, foraging, navigation |

---

### Current Implementation Status

**Already Implemented (v0.4.x-v0.5.x):**
- Basic skill definitions in `skills.json`
- Skill check command (`check <skill>`)
- Proficiency levels (Untrained → Master)
- Advantage/disadvantage mechanics
- Difficulty class system
- Hazard avoidance (2 hazards use Athletics)

**Gap Analysis:**

| Feature Category | Spec Coverage | Implementation | Gap |
|------------------|---------------|----------------|-----|
| Success-counting dice | 100% | 0% | Entire mechanic needs refactor |
| Fumble detection | 100% | ~20% | Need 0 success + botch logic |
| Critical success | 100% | ~30% | Need net ≥ 5 logic |
| Degrees of success | 100% | 0% | Marginal/Full/Exceptional/Critical |
| Contextual modifiers | 100% | ~10% | Equipment, surface, disposition |
| Multi-stage procedures | 100% | 0% | Climbing, terminal, tracking |
| Master rank abilities | 100% | 0% | Spider Climb, Polyglot, etc. |

---

### v0.15.1 - Skill System Infrastructure

**Scope Breakdown:** [v0.15.1-scope-breakdown.md](v0.15.1-scope-breakdown.md)

#### Core Framework Enhancements
- [ ] **SkillContext value object** - Contextual modifiers container
- [ ] **SkillOutcome enum expansion** - Uses degrees from dice refactor
- [ ] **Fumble consequence system** - Lasting effect tracking
- [ ] **Master ability registry** - Rank 5 passive/active abilities
- [ ] **Equipment modifier service** - Tool bonuses for skill checks
- [ ] **Situational modifier service** - Environmental/contextual bonuses

#### Skill Check Enhancements
- [ ] **Cooperative skill checks** - Party member assistance
- [ ] **Skill check chaining** - Sequential check requirements

#### Integration Points
- [ ] **Trauma economy integration** - Psychic stress from corrupted objects
- [ ] **Specialization bonus hooks** - Archetype-specific modifiers
- [ ] **Voice guidance integration** - Narrative outcome descriptors

---

### v0.15.2 - Acrobatics Skill Expansion

**Source:** [acrobatics.md](../../aethelgard/design/01-core/skills/acrobatics.md)

**Scope Breakdown:** [v0.15.2-scope-breakdown.md](v0.15.2-scope-breakdown.md)

#### Climbing System
- [ ] **Multi-stage climbing** - Height-based stage requirements
- [ ] **Surface modifiers** - Stable (+1d10), Compromised (-2d10), Collapsing (-3d10)
- [ ] **Climbing gear bonuses** - Equipment integration
- [ ] **[The Slip] fumble** - Fall from current height + stress

#### Leaping System
- [ ] **Distance-based DCs** - 5ft (DC 8) → 20ft (DC 20)
- [ ] **Running start bonus** - +5ft effective distance
- [ ] **Precision landing modifiers** - Small target penalties
- [ ] **[The Long Fall] fumble** - Bonus damage + disorientation

#### Stealth Movement
- [ ] **Surface noise DCs** - Silent (10) → Very Noisy (22)
- [ ] **[Hidden] status** - Cannot be directly targeted
- [ ] **Party stealth (weakest link)** - Lowest pool makes check
- [ ] **[System-Wide Alert] fumble** - Adjacent room convergence

#### Fall Damage System
- [ ] **Height-based damage** - 1d10 per 10ft (max 10d10)
- [ ] **Crash landing checks** - DC 12 + height modifier
- [ ] **Damage reduction** - Successes reduce damage dice

#### Chase Sequences
- [ ] **Chase round state machine** - Obstacle → Check → Position change
- [ ] **Distance track** - Close (0-1) → Lost (6+)
- [ ] **Random obstacle generator** - Gap, climb, debris, crowd

#### Master Rank Abilities
- [ ] **Spider Climb** - Auto-succeed DC ≤ 12, full speed
- [ ] **Cat's Grace** - No damage from 30ft falls
- [ ] **Ghost Walk** - Auto-succeed stealth DC ≤ 14
- [ ] **Death-Defying Leap** - +10ft maximum distance
- [ ] **Perfect Balance** - Auto-succeed balance DC ≤ 16

---

### v0.15.3 - Rhetoric Skill Expansion

**Source:** [rhetoric.md](../../aethelgard/design/01-core/skills/rhetoric.md)

**Scope Breakdown:** [v0.15.3-scope-breakdown.md](v0.15.3-scope-breakdown.md)

#### Persuasion System
- [ ] **Disposition modifiers** - Friendly (+2d10) → Hostile (-2d10)
- [ ] **Value alignment bonuses** - Argument matches NPC beliefs
- [ ] **Evidence support** - +2d10 for proof
- [ ] **[Trust Shattered] fumble** - Permanent persuasion lock

#### Deception System
- [ ] **Lie plausibility DCs** - White lie (10) → Outrageous (22)
- [ ] **NPC suspicion modifiers** - +4 DC if suspicious
- [ ] **Liar's burden stress** - Mental cost for deception
- [ ] **[Lie Exposed] fumble** - Combat, exile, quest failure

#### Intimidation System
- [ ] **Attribute choice** - MIGHT or WILL
- [ ] **Target comparison** - Weaker/stronger modifiers
- [ ] **Reputation bonuses** - [Feared] status effects
- [ ] **[Challenge Accepted] fumble** - Combat with buffed enemy

#### Negotiation System
- [ ] **Position track** - Maximum Demand ↔ Walk Away
- [ ] **Summit phases** - Opening → Bargaining → Finalization
- [ ] **Concession effects** - DC reductions for offerings
- [ ] **Multi-round negotiation** - Extended skill checks

#### Interrogation System
- [ ] **Method selection** - Good Cop, Bad Cop, Deception, Bribery
- [ ] **Resistance track** - Checks to break subject
- [ ] **Information reliability** - Method affects accuracy
- [ ] **Disposition consequences** - Reputation costs

#### Cultural Protocols
- [ ] **Dvergr Logic-Chain** - DC 18, precise sequences
- [ ] **Utgard Veil-Speech** - DC 16, deception-as-respect
- [ ] **Faction cant modifiers** - Fluency bonuses

#### Master Rank Abilities
- [ ] **Polyglot** - Know all common cants
- [ ] **Cultural Diplomat** - Auto-succeed protocol DC ≤ 14
- [ ] **Master Negotiator** - Re-roll one failed check per conversation
- [ ] **Silver Tongue** - Auto-succeed persuasion DC ≤ 12
- [ ] **Fearsome Reputation** - +2d10 to all intimidation

---

### v0.15.4 - System Bypass Skill Expansion

**Source:** [system-bypass.md](../../aethelgard/design/01-core/skills/system-bypass.md)

**Scope Breakdown:** [v0.15.4-scope-breakdown.md](v0.15.4-scope-breakdown.md)

#### Lockpicking System
- [ ] **Lock type classification** - Simple → [Glitched]
- [ ] **Tool requirements** - Tinker's Toolkit for DC 4+
- [ ] **Degrees of success** - Critical salvages components
- [ ] **[Mechanism Jammed] fumble** - Permanent DC +2, key useless

#### Terminal Hacking System
- [ ] **Multi-layer infiltration** - Access → Authentication → Navigation
- [ ] **ICE countermeasures** - Passive (Trace), Active (Attack), Lethal (Neural)
- [ ] **Lockout states** - Temporary and permanent
- [ ] **Access levels** - User-Level vs Admin-Level
- [ ] **[System Lockout] fumble** - Terminal disabled + alert

#### Trap Disarmament System
- [ ] **Three-step procedure** - Detection → Analysis → Disarmament
- [ ] **Salvageable components** - Critical success yields parts
- [ ] **Failure escalation** - DC +1 per failed attempt
- [ ] **[Forced Execution] fumble** - Trap triggers on disarmer

#### Jury-Rigging System
- [ ] **Physical bypass methods** - Percussive, wire, glitch, sequence
- [ ] **Trial-and-error procedure** - Observe → Probe → Pattern → Experiment
- [ ] **Complication table** - d10 failure effects
- [ ] **Improvised tool crafting** - Shim picks, wire probes

#### Glitch Exploitation
- [ ] **Glitch cycle identification** - WITS DC 14
- [ ] **Timing-based DC reduction** - -4 DC if patient
- [ ] **Chaos roll** - d6 for unpredictable behavior

#### Master Rank Abilities
- [ ] **Auto-Bypass** - Succeed on DC ≤ 10 automatically
- [ ] **Salvage Expertise** - Always recover trap components
- [ ] **Silent Bypass** - No noise on success
- [ ] **Glitch Reader** - Reduce [Glitched] DC penalty by 2

---

### v0.15.5 - Wasteland Survival Skill Expansion

**Source:** [wasteland-survival.md](../../aethelgard/design/01-core/skills/wasteland-survival.md)

**Scope Breakdown:** [v0.15.5-scope-breakdown.md](v0.15.5-scope-breakdown.md)

#### Extended Tracking System
- [ ] **Multi-phase pursuit** - Acquisition → Pursuit → Closing
- [ ] **Trail degradation** - Cumulative DC modifiers over time
- [ ] **Loss recovery** - Backtrack, spiral search, new lead
- [ ] **Counter-tracking** - Contested concealment checks

#### Foraging System
- [ ] **Time-based search** - Quick (10min) → Complete (4hr)
- [ ] **Yield tables** - Scrap, supplies, components by success
- [ ] **Hidden cache discovery** - Bonus on rolled 10s
- [ ] **Biome-specific loot tables** - Location affects finds

#### Navigation System
- [ ] **Terrain-based DCs** - Open (8) → [Glitched] Labyrinth (24)
- [ ] **Compass/equipment bonuses** - Working compass +1d10
- [ ] **Familiar territory** - +2d10 for known areas

#### Hazard Detection
- [ ] **Hazard type classification** - Obvious → Ambush site
- [ ] **Consequence table** - Damage, poison, glitch effects
- [ ] **Passive detection** - High-WITS automatic hints

#### Scavenger Sign Reading
- [ ] **Territorial marker interpretation** - Faction warnings
- [ ] **Cache indicator recognition** - Hidden supply detection

#### Master Rank Abilities
- [ ] **Wasteland Cartographer** - Auto-succeed navigation DC ≤ 10
- [ ] **Apex Scavenger** - Never empty-handed, +50% yields
- [ ] **Master Tracker** - Follow trails up to 48 hours old
- [ ] **Hazard Sense** - Auto-detect DC ≤ 16 hazards

---

### v0.15.6 - Advanced Perception System

**Source:** [examination.md](../../aethelgard/design/07-environment/room-engine/examination.md)

**Scope Breakdown:** [v0.15.6-scope-breakdown.md](v0.15.6-scope-breakdown.md)

#### Passive Perception System
- [ ] **Automatic room entry checks** - WITS ÷ 2 vs hidden element DCs
- [ ] **Hidden element revelation** - Auto-reveal when passive >= DC
- [ ] **Status effect modifiers** - [Alert], [Fatigued] affect perception
- [ ] **Perception-gated descriptions** - Room details based on passive value

#### Three-Layer Examination System
- [ ] **Cursory (Layer 1)** - Always available, basic description
- [ ] **Detailed (Layer 2)** - WITS DC 12, functional details
- [ ] **Expert (Layer 3)** - WITS DC 18, historical context, secrets
- [ ] **Composite description** - All unlocked layers combined

#### Flora & Fauna Observation
- [ ] **Biome-specific flora** - Luminous Fungus, Ember Moss, Frost Lichen
- [ ] **Ambient fauna** - Cave Rats, Rust Beetles, Blight-Moths
- [ ] **Alchemical uses** - Expert knowledge reveals harvesting info
- [ ] **Harvestable resources** - Flora collection mechanics

#### Puzzle Integration
- [ ] **Hint revelation** - Expert examination reveals puzzle hints
- [ ] **Interaction unlocks** - New commands from discoveries
- [ ] **Solution tracking** - Track revealed puzzle solutions

#### Investigation System
- [ ] **Crime scene analysis** - Clue discovery mechanics
- [ ] **Deduction system** - Multiple clues enable conclusions
- [ ] **Remains examination** - Corpse/skeleton analysis

---

### Implementation Estimates

| Version | Focus | Entities | Services | Tests |
|---------|-------|----------|----------|-------|
| v0.15.0 | Dice Pool Refactor | ~4 | ~3 | ~40 |
| v0.15.1 | Skill Infrastructure | ~6 | ~4 | ~25 |
| v0.15.2 | Acrobatics | ~8 | ~5 | ~30 |
| v0.15.3 | Rhetoric | ~10 | ~6 | ~35 |
| v0.15.4 | System Bypass | ~8 | ~5 | ~30 |
| v0.15.5 | Wasteland Survival | ~6 | ~4 | ~25 |
| v0.15.6 | Advanced Perception | ~2 | ~3 | ~25 |
| **Total** | | **~44** | **~30** | **~210** |

---

### Cross-Cutting Concerns

#### Trauma Economy Integration
- All skill interactions with corrupted objects inflict Psychic Stress
- Stress costs scale with corruption tier: Normal (0) → Resonance (8-15)
- Fumbles in stressful situations add bonus stress

#### Specialization Integration
- **Gantry-Runner** - Acrobatics focus, climbing/leaping bonuses
- **Myrk-gengr** - Stealth focus, [Hidden] maintenance
- **Thul** - Rhetoric focus, no rep loss on failed persuasion
- **Skald** - Rhetoric focus, party inspiration
- **Kupmaðr** - Rhetoric focus, negotiation mastery
- **Scrap-Tinker** - System Bypass focus, tool crafting
- **Ruin-Stalker** - System Bypass focus, trap mastery
- **Jötun-Reader** - System Bypass focus, terminal mastery
- **Veiðimaðr** - Wasteland Survival focus, creature tracking
- **Myr-Stalker** - Wasteland Survival focus, terrain bonuses

#### Voice Guidance
Each skill has defined tone profiles and narrative examples:
- Success/failure flavor text
- Critical success special descriptions
- Fumble consequence narratives
- Thematic vocabulary per skill

---

### Dependencies

**Requires from Previous Versions:**
- v0.4.x: Basic skill definitions
- v0.5.x: Skill check service
- v0.10.x: Status effect system (for [Hidden], buffs)
- v0.11.x: Combat system integration

**Provides to Future Versions:**
- Foundation for quest objective skill checks
- Social interaction mechanics for dialogue system
- Environmental traversal for exploration
- Resource gathering for crafting

---

### Acceptance Criteria (Overall)

- [ ] Dice pool uses success-counting (8-10 = success, 1 = botch)
- [ ] Fumble detection works (0 successes + ≥1 botch)
- [ ] Critical success triggers on net ≥ 5
- [ ] Degrees of success calculate correctly
- [ ] All 4 core skills have full contextual subsystems
- [ ] Multi-stage procedures work correctly (climbing, hacking, tracking)
- [ ] Fumble consequences apply and persist appropriately
- [ ] Master rank abilities function for Rank 5 characters
- [ ] Equipment modifiers apply correctly
- [ ] Contested checks resolve properly
- [ ] Chase sequences function as state machines
- [ ] Social combat tracks (negotiation, interrogation) work
- [ ] Specialization bonuses integrate correctly
- [ ] Voice guidance descriptors display for outcomes
- [ ] Trauma economy integration complete
- [ ] Passive perception triggers on room entry
- [ ] Three-layer examination provides progressive detail
- [ ] Hidden elements auto-reveal at appropriate DCs
- [ ] Flora/fauna observations match room biome
- [ ] ~210 unit tests pass
