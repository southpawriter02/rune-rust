# v0.5.1a Changelog: Range Core

**Version:** 0.5.1a  
**Phase:** Range Core  
**Date:** 2026-01-14  
**Status:** ✅ Complete

---

## Summary

Establishes range mechanics for tactical combat. Melee weapons require adjacency (distance 1), reach weapons extend to distance 2, ranged weapons use configurable distance.

---

## Added

### Domain Layer

| Component | File | Description |
|-----------|------|-------------|
| `RangeType` | Enums/RangeType.cs | Melee, Reach, Ranged enum |

### Domain - Entity Modifications

| Entity | Properties Added |
|--------|------------------|
| `Item` | `Range`, `RangeType`, `GetEffectiveRange()`, `IsInRange()` |
| `AbilityDefinition` | `Range`, `RangeType`, `GetEffectiveRange()`, `IsInRange()` |

### Application Layer

| Component | File | Description |
|-----------|------|-------------|
| `IRangeService` | Interfaces/IRangeService.cs | Range validation interface |
| `RangeService` | Services/RangeService.cs | Range validation implementation |
| `RangeCheckResult` | Interfaces/IRangeService.cs | Range check result record |
| `RangeFailureReason` | Interfaces/IRangeService.cs | Failure reasons enum |

---

## Range System

| Type | Valid Distance | Examples |
|------|----------------|----------|
| Melee | 1 only | Sword, Axe, Dagger |
| Reach | 1-2 | Spear, Halberd |
| Ranged | 1-N | Bow, Spell |

---

## Test Results

```
Domain Tests:       1,364 passed (+20 from v0.5.0c)
Application Tests:    534 passed (+17 from v0.5.0c)
Architecture Tests:     8 passed
─────────────────────────────────────────────────
Total:              1,906 passed
```

### New v0.5.1a Tests (37 tests)

| Test File | Tests |
|-----------|-------|
| ItemRangeTests.cs | 11 |
| AbilityRangeTests.cs | 8 |
| RangeServiceTests.cs | 18 |

---

## Logging Strategy

| Level | Template |
|-------|----------|
| Debug | `Checking range: attacker {Id}, target {Id}, range {Range}, type {Type}` |
| Debug | `Range check passed/failed` |
| Warning | `Range check failed: {Reason}` |

---

## Next Steps

- **v0.5.1b** — Range Mechanics (min range, penalties, ranged weapons)
