# v0.7.0c Walkthrough: Game Window Layout

**Version:** 0.7.0c  
**Phase:** Application Shell - Game Window Layout  
**Date:** 2026-01-15  
**Status:** ✅ Complete

---

## Overview

This version implements the main game window with region-based layout, navigation services, and panel management. It provides the foundation for all future GUI panels.

---

## Implementation Summary

### Services Created

| Service | Purpose |
|---------|---------|
| [`INavigationService`](file:///Users/turtle1/Documents/GitHub/rune-rust-26-01-13/src/Presentation/RuneAndRust.Presentation.Gui/Services/INavigationService.cs) | Window navigation, file dialogs, application lifecycle |
| [`NavigationService`](file:///Users/turtle1/Documents/GitHub/rune-rust-26-01-13/src/Presentation/RuneAndRust.Presentation.Gui/Services/NavigationService.cs) | Implementation with window replacement, file pickers |
| [`IWindowLayoutService`](file:///Users/turtle1/Documents/GitHub/rune-rust-26-01-13/src/Presentation/RuneAndRust.Presentation.Gui/Services/IWindowLayoutService.cs) | Panel registration and visibility management |
| [`WindowLayoutService`](file:///Users/turtle1/Documents/GitHub/rune-rust-26-01-13/src/Presentation/RuneAndRust.Presentation.Gui/Services/WindowLayoutService.cs) | Implementation with panel tracking |
| [`PanelRegion`](file:///Users/turtle1/Documents/GitHub/rune-rust-26-01-13/src/Presentation/RuneAndRust.Presentation.Gui/Services/PanelRegion.cs) | Enum defining layout regions |

### Views Created

| View | Purpose |
|------|---------|
| [`GameWindow.axaml`](file:///Users/turtle1/Documents/GitHub/rune-rust-26-01-13/src/Presentation/RuneAndRust.Presentation.Gui/Views/GameWindow.axaml) | DockPanel layout with menu bar and region placeholders |

### ViewModels Created

| ViewModel | Purpose |
|-----------|---------|
| [`GameWindowViewModel`](file:///Users/turtle1/Documents/GitHub/rune-rust-26-01-13/src/Presentation/RuneAndRust.Presentation.Gui/ViewModels/GameWindowViewModel.cs) | Window state, combat mode, menu commands |

---

## Window Layout

```
┌─────────────────────────────────────────────────────────────────────────┐
│  File   Game   Help                                      [_]  [□]  [X]  │
├─────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────┐  ┌───────────────────────────┐ │
│  │           MAIN CONTENT              │  │      RIGHT SIDEBAR        │ │
│  │        (Room Display v0.7.1)        │  │     TOP (Status v0.7.1)   │ │
│  ├─────────────────────────────────────┤  ├───────────────────────────┤ │
│  │       BOTTOM CONTENT                │  │     BOTTOM (Inv v0.7.2)   │ │
│  │       (Messages v0.7.1)             │  │                           │ │
│  └─────────────────────────────────────┘  └───────────────────────────┘ │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │                      INPUT REGION (v0.7.2)                        │  │
│  └───────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## Key Features

### Navigation Service
- **NavigateTo\<T>()**: Replaces current window with new window
- **ShowDialog\<T>()**: Displays modal dialog
- **ShowLoadDialogAsync()**: File picker for loading saves
- **ShowSaveDialogAsync()**: File picker for saving games
- **ReturnToMainMenu()**: Navigates back to MainMenuWindow
- **Quit()**: Shuts down the application

### Window Layout Service
- **RegisterPanel()**: Associates a control with a region
- **UnregisterPanel()**: Removes a control from a region
- **GetPanel()**: Retrieves the registered panel
- **SetPanelVisible()**: Toggles panel visibility
- **OnLayoutChanged**: Event fired on layout changes

### Panel Regions
| Region | Purpose |
|--------|---------|
| MainContent | Room display |
| BottomContent | Message log |
| RightSidebarTop | Player status |
| RightSidebarBottom | Inventory |
| Input | Command entry |
| CombatOverlay | Combat grid overlay |

---

## Test Results

```
v0.7.0c Unit Tests: 17 passed
├── NavigationServiceTests: 3 tests
├── WindowLayoutServiceTests: 5 tests
└── GameWindowViewModelTests: 9 tests

Build: 0 errors, 0 warnings
```

---

## Files Changed

### New Files (7)
- `Services/PanelRegion.cs`
- `Services/INavigationService.cs`
- `Services/NavigationService.cs`
- `Services/IWindowLayoutService.cs`
- `Services/WindowLayoutService.cs`
- `Views/GameWindow.axaml`
- `Views/GameWindow.axaml.cs`
- `ViewModels/GameWindowViewModel.cs`

### Modified Files (2)
- `App.axaml.cs` - DI registration
- `ViewModels/MainMenuViewModel.cs` - Uses INavigationService

---

## Acceptance Criteria

- [x] Game window opens from main menu "New Game"
- [x] Window has defined panel regions with placeholders
- [x] Window can be resized (min 1024x600)
- [x] Menu bar displays with File/Game/Help
- [x] Save/Load Game opens file dialogs
- [x] Return to Menu navigates to MainMenuWindow
- [x] Combat overlay hidden by default
- [x] 17 unit tests pass
- [x] Build completes with 0 errors/warnings
