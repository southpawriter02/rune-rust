# v0.8.3a Changelog: Combat Visual Feedback

**Version:** 0.8.3a  
**Phase:** Combat Visual Feedback  
**Date:** 2026-01-16  
**Status:** ✅ Complete

---

## Summary

Implements visual feedback elements for combat actions: floating damage/healing numbers, miss/block indicators, critical hit styling, turn start glow effects, and status effect notifications.

---

## Added

### Presentation Layer - Enums

| Enum | Values | Notes |
|------|--------|-------|
| `DamagePopupType` | Damage, Healing, Miss, Block | Determines popup styling |

### Presentation Layer - Controls

| Control | Description |
|---------|-------------|
| `DamagePopupControl` | Floating damage/healing numbers with rise-and-fade animation |

**DamagePopupControl Properties:**
- `Value` — Numeric value to display
- `PopupType` — Type determining color and format
- `IsCritical` — Enables gold stars and larger font
- `DisplayText` — Computed formatted text
- `TextColor` — Computed color based on type
- `FontSize` — 24 for critical, 18 for normal

### Presentation Layer - Services

| Interface | Implementation | Methods |
|-----------|----------------|---------|
| `IAttackAnimationService` | `AttackAnimationService` | 7 methods |
| `ICombatGridOverlay` | — | 6 methods (for future implementation) |

**AttackAnimationService Methods:**
- `ShowDamagePopupAsync(position, damage, isCritical)`
- `ShowHealingPopupAsync(position, healing)`
- `ShowMissPopupAsync(position)`
- `ShowBlockPopupAsync(position)`
- `HighlightTurnStartAsync(combatant)`
- `ShowStatusAppliedAsync(position, effect)`
- `ShowStatusExpiredAsync(position, effect)`

### Presentation Layer - Styles

| File | Description |
|------|-------------|
| `CombatFeedbackStyles.axaml` | Styles for popups, glow effects, status indicators |

### EntityTokenControl Updates

| Property | Description |
|----------|-------------|
| `ShowGlowEffect` | Enables/disables glow border |
| `GlowOpacity` | Opacity for pulse animation |

---

## Animation Timings

| Animation | Duration |
|-----------|----------|
| Popup rise/fade | 800ms |
| Glow pulse | 500ms × 3 |
| Status indicator | 600ms |

---

## Test Results

| Category | Tests |
|----------|-------|
| DamagePopupControlTests | 7 |
| AttackAnimationServiceTests | 8 |
| **Total new** | **15** |

---

## Files Changed

### New Files
- `src/Presentation/.../Enums/DamagePopupType.cs`
- `src/Presentation/.../Controls/DamagePopupControl.cs`
- `src/Presentation/.../Services/IAttackAnimationService.cs`
- `src/Presentation/.../Services/AttackAnimationService.cs`
- `src/Presentation/.../Services/ICombatGridOverlay.cs`
- `src/Presentation/.../Styles/CombatFeedbackStyles.axaml`
- `tests/.../Controls/DamagePopupControlTests.cs`
- `tests/.../Services/AttackAnimationServiceTests.cs`

### Modified Files
- `src/Presentation/.../Controls/EntityTokenControl.cs` (+glow properties)

---

## Next Steps

- **v0.8.3b** — Overlay Refinement (gradient movement, quick-slot bar)
