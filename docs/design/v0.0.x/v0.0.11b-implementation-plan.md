# v0.0.11b Implementation Plan: Combat & Ability Descriptors

**Version:** 0.0.11b
**Parent:** v0.0.11 (Descriptors & Ambience)
**Prerequisites:** v0.0.11a Complete (Descriptor Framework Expansion)
**Design Specification:** [v0.0.11b-design-specification.md](v0.0.11b-design-specification.md)
**Status:** Ready for Implementation
**Target Tests:** ~15 unit tests

---

## Table of Contents

1. [Executive Summary](#executive-summary)
2. [Current System Analysis](#current-system-analysis)
3. [Detailed Implementation](#detailed-implementation)
4. [Testing Strategy](#testing-strategy)
5. [Implementation Checklist](#implementation-checklist)
6. [Acceptance Criteria](#acceptance-criteria)
7. [File Summary](#file-summary)

---

## Executive Summary

### Purpose

Expand combat descriptor variety with weapon-specific attack descriptions, damage-tier narratives, ability effect flavor text, and death descriptions that vary by monster type. This creates dynamic, engaging combat narration that changes based on weapon type, damage amount, ability used, and target characteristics.

### Scope

- **In Scope:**
  - Weapon-type hit descriptor pools (8 types: sword, axe, bow, staff, dagger, fist, mace, spear)
  - Damage-tier descriptors (6 tiers based on damage percentage)
  - Critical hit and fumble descriptor pools
  - Miss descriptor pools (dodge, parry, block, whiff)
  - Monster death descriptors by category (6: humanoid, undead, beast, construct, elemental, demon)
  - Player near-death and death descriptors
  - Ability activation/impact/aftermath descriptors
  - Status effect application/removal descriptors
  - `CombatDescriptorService` and `AbilityDescriptorService`

- **Out of Scope:**
  - Environmental descriptors (v0.0.11c)
  - Sensory descriptors (v0.0.11c)
  - Interactive objects (v0.0.11d)

### Key Decisions

| Decision | Choice | Rationale |
|----------|--------|-----------|
| **Weapon Pools** | Per-weapon-type pools | Distinct combat feel per weapon |
| **Damage Tiers** | 6 tiers | Granular severity descriptions |
| **Monster Categories** | Tag-based lookup | Flexible creature classification |
| **Fallback** | Generic pools | Always produces output |

---

## Current System Analysis

### Existing Descriptor System (v0.0.11a)

| Component | Current Capability |
|-----------|-------------------|
| `DescriptorService` | Tag-based filtering, environment context |
| `EnvironmentContext` | Biome, climate, lighting for coherence |
| Hit descriptions | Generic pool (`hit_descriptions`) |
| Death descriptions | Limited pool, basic tag filtering |
| Damage tiers | 4 tiers only |

### Target Enhancements (v0.0.11b)

| Component | Enhancement |
|-----------|-------------|
| Hit descriptions | 8 weapon-specific pools + generic |
| Death descriptions | 6 creature category pools |
| Damage tiers | 6 tiers with richer variety |
| Critical hits | Dedicated pool |
| Miss/fumble | Separate pools |
| Abilities | Activation + impact + aftermath phases |

### New Components

| Component | Purpose |
|-----------|---------|
| `CombatDescriptorContext` | Combat-specific context (weapon, damage, critical) |
| `AbilityDescriptorContext` | Ability-specific context (ability, damage type, effects) |
| `DeathDescriptorContext` | Death-specific context (creature tags, kill type) |
| `DamageTier` enum | 6 damage severity levels |
| `CombatDescriptorService` | Generate combat narratives |
| `AbilityDescriptorService` | Generate ability narratives |

---

## Detailed Implementation

### Layer Interactions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Configuration Layer                         â”‚
â”‚  combat-hits.json, combat-deaths.json, damage-tiers.json     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Application Layer                           â”‚
â”‚  CombatDescriptorService                                     â”‚
â”‚  - GetHitDescription(), GetMissDescription()                 â”‚
â”‚  - GetDeathDescription(), GetPlayerDeathDescription()        â”‚
â”‚  AbilityDescriptorService                                    â”‚
â”‚  - GetActivationDescription(), GetImpactDescription()        â”‚
â”‚  - GetStatusEffectAppliedDescription()                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Domain Layer                              â”‚
â”‚  CombatService (uses CombatDescriptorService)                â”‚
â”‚  AbilityService (uses AbilityDescriptorService)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Combat Hit Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  COMBAT HIT DESCRIPTION FLOW                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    CombatService.ResolveCombatRound()
           â”‚
           â–¼
    CombatDescriptorService.GetHitDescription(context)
           â”‚
           â”œâ”€â”€ Determine pool path
           â”‚   â”œâ”€â”€ Critical? â†’ "combat.critical_{weapon}" or "combat.critical_hit"
           â”‚   â””â”€â”€ Normal? â†’ "combat.hit_{weapon}" or "combat.hit_descriptions"
           â”‚
           â”œâ”€â”€ Get action descriptor
           â”‚   â””â”€â”€ DescriptorService.GetDescriptor(poolPath, tags, context)
           â”‚
           â”œâ”€â”€ Get damage tier descriptor
           â”‚   â””â”€â”€ "combat.damage_tier_{glancing|light|solid|heavy|devastating|lethal}"
           â”‚
           â”œâ”€â”€ Get damage type flavor (if not physical)
           â”‚   â””â”€â”€ "combat.damage_type_{fire|ice|lightning|...}"
           â”‚
           â””â”€â”€ Format complete description
                   â”‚
                   â–¼
           "Thorin slashes the Goblin with his sword, striking true. Fire sears the wound!"
```

---

## Testing Strategy

### Unit Tests (~15 tests)

#### CombatDescriptorServiceTests.cs (~9 tests)

| Test | Description |
|------|-------------|
| `GetHitDescription_WithWeaponType_UsesWeaponPool` | Weapon-specific pool selection |
| `GetHitDescription_WithoutWeaponType_UsesGenericPool` | Fallback to generic |
| `GetHitDescription_WhenCritical_UsesCriticalPool` | Critical hit handling |
| `GetMissDescription_WhenFumble_UsesFumblePool` | Fumble pool selection |
| `GetMissDescription_NormalMiss_UsesMissPool` | Normal miss handling |
| `GetDeathDescription_ByCreatureCategory_UsesCorrectPool` | Category-based death |
| `GetDeathDescription_WithCriticalKill_IncludesFlair` | Critical kill flair |
| `GetNearDeathDescription_AtLowHealth_ReturnsWarning` | Low health warning |
| `GetNearDeathDescription_AtNormalHealth_ReturnsNull` | Normal health returns null |

#### AbilityDescriptorServiceTests.cs (~6 tests)

| Test | Description |
|------|-------------|
| `GetActivationDescription_WithDamageType_UsesDamageTypePool` | Type-specific activation |
| `GetImpactDescription_WithFireDamage_UsesFireEffects` | Fire damage effects |
| `GetAftermathDescription_WithAppliedEffects_ReturnsDescription` | Aftermath with effects |
| `GetStatusEffectAppliedDescription_FormatsCorrectly` | Effect application |
| `GetStatusEffectRemovedDescription_FormatsCorrectly` | Effect removal |
| `GetCompleteAbilityNarrative_CombinesAllPhases` | Full narrative |

---

## Implementation Checklist

> **Legend:** ğŸŸ¢ No dependencies | ğŸŸ¡ Has dependencies | ğŸ”´ Critical path
> **Complexity:** â­ Simple | â­â­ Moderate | â­â­â­ Complex

---

### Phase 1: Context Classes & Enum

#### 1.1 Create DamageTier Enum ğŸŸ¢ â­

**File:** `src/Core/RuneAndRust.Application/Services/CombatDescriptorService.cs`

- [ ] Create `DamageTier` enum with 6 values
  - `Glancing` (0-15%)
  - `Light` (15-30%)
  - `Solid` (30-50%)
  - `Heavy` (50-75%)
  - `Devastating` (75-90%)
  - `Lethal` (90-100%+)

**Acceptance:** Enum defined with XML documentation.

---

#### 1.2 Create CombatDescriptorContext ğŸŸ¢ â­â­

**File:** `src/Core/RuneAndRust.Application/Services/CombatDescriptorService.cs`

- [ ] Create `CombatDescriptorContext` record
  - `WeaponType` (nullable string)
  - `DamageType` (nullable string)
  - `DamagePercent` (double)
  - `IsCritical` (bool)
  - `IsFumble` (bool)
  - `AttackerName` (string)
  - `TargetName` (string)
  - `TargetTags` (IReadOnlyList<string>)
  - `Environment` (nullable EnvironmentContext)
- [ ] Add `GetDamageTier()` method

**Acceptance:** Context captures all combat descriptor requirements.

---

#### 1.3 Create AbilityDescriptorContext ğŸŸ¢ â­â­

**File:** `src/Core/RuneAndRust.Application/Services/AbilityDescriptorService.cs`

- [ ] Create `AbilityDescriptorContext` record
  - `AbilityId` (string)
  - `DamageType` (nullable string)
  - `AbilityTags` (IReadOnlyList<string>)
  - `TargetType` (string)
  - `CasterName` (string)
  - `TargetName` (nullable string)
  - `AppliedEffects` (IReadOnlyList<string>)
  - `Environment` (nullable EnvironmentContext)

**Acceptance:** Context captures all ability descriptor requirements.

---

#### 1.4 Create DeathDescriptorContext ğŸŸ¢ â­â­

**File:** `src/Core/RuneAndRust.Application/Services/CombatDescriptorService.cs`

- [ ] Create `DeathDescriptorContext` record
  - `CreatureName` (string)
  - `CreatureTags` (IReadOnlyList<string>)
  - `WasCriticalKill` (bool)
  - `KillingDamageType` (nullable string)
  - `KillingWeaponType` (nullable string)
  - `IsPlayerDeath` (bool)
- [ ] Add `GetPrimaryCategory()` method (priority: undead, beast, construct, elemental, demon, humanoid)

**Acceptance:** Context captures all death descriptor requirements.

---

### Phase 2: Configuration Extensions

#### 2.1 Extend Descriptor Configuration ğŸŸ¢ â­

**File:** `src/Core/RuneAndRust.Application/Configuration/DescriptorConfiguration.cs`

- [ ] Add `WeaponTypes` property (IReadOnlyList<string>)
- [ ] Add `DamageTypes` property (IReadOnlyList<string>)
- [ ] Add `CreatureCategories` property (IReadOnlyList<string>)
- [ ] Add `CriticalOnly` property (bool)
- [ ] Add `MissOnly` property (bool)

**Acceptance:** Descriptor class supports combat filtering properties.

---

### Phase 3: Configuration Files

#### 3.1 Create combat-hits.json ğŸŸ¢ â­â­

**File:** `config/descriptors/combat-hits.json`

- [ ] Create `hit_sword` pool (5+ descriptors)
- [ ] Create `hit_axe` pool (5+ descriptors)
- [ ] Create `hit_bow` pool (4+ descriptors)
- [ ] Create `hit_staff` pool (4+ descriptors)
- [ ] Create `hit_dagger` pool (4+ descriptors)
- [ ] Create `hit_fist` pool (4+ descriptors)
- [ ] Create `hit_mace` pool (4+ descriptors)
- [ ] Create `hit_spear` pool (4+ descriptors)
- [ ] Create `critical_hit` pool (4+ descriptors)
- [ ] Create `miss_descriptions` pool (5+ descriptors)
- [ ] Create `fumble_descriptions` pool (4+ descriptors)

**Acceptance:** 11 pools with weapon-appropriate descriptors.

---

#### 3.2 Create combat-deaths.json ğŸŸ¢ â­â­

**File:** `config/descriptors/combat-deaths.json`

- [ ] Create `death_humanoid` pool (5+ descriptors)
- [ ] Create `death_undead` pool (5+ descriptors)
- [ ] Create `death_beast` pool (5+ descriptors)
- [ ] Create `death_construct` pool (4+ descriptors)
- [ ] Create `death_elemental` pool (4+ descriptors)
- [ ] Create `death_demon` pool (4+ descriptors)
- [ ] Create `critical_kill` pool (4+ flair prefixes)
- [ ] Create `player_death` pool (4+ descriptors with `{player}` and `{killer}` placeholders)
- [ ] Create `near_death_warning` pool (4+ descriptors at 25%)
- [ ] Create `near_death_critical` pool (4+ descriptors at 10%)

**Acceptance:** 10 pools with category-appropriate death descriptors.

---

#### 3.3 Create damage-tiers.json ğŸŸ¢ â­â­

**File:** `config/descriptors/damage-tiers.json`

- [ ] Create `damage_tier_glancing` pool (0-15%)
- [ ] Create `damage_tier_light` pool (15-30%)
- [ ] Create `damage_tier_solid` pool (30-50%)
- [ ] Create `damage_tier_heavy` pool (50-75%)
- [ ] Create `damage_tier_devastating` pool (75-90%)
- [ ] Create `damage_tier_lethal` pool (90-100%+)

**Acceptance:** 6 pools with 4+ descriptors each.

---

### Phase 4: Application Services

#### 4.1 Create CombatDescriptorService ğŸŸ¡ â­â­â­ ğŸ”´

**File:** `src/Core/RuneAndRust.Application/Services/CombatDescriptorService.cs`

- [ ] Create `CombatDescriptorService` class
- [ ] Inject `DescriptorService`, `ILogger`
- [ ] Implement `GetHitDescription(CombatDescriptorContext context)`
  - Determine pool path based on weapon type and critical
  - Get action descriptor
  - Get damage tier descriptor
  - Add damage type flavor if applicable
  - Format complete description
- [ ] Implement `GetMissDescription(CombatDescriptorContext context)`
  - Use fumble pool if `IsFumble`, else miss pool
- [ ] Implement `GetDeathDescription(DeathDescriptorContext context)`
  - Get primary creature category
  - Try category-specific pool, fall back to generic
  - Add critical kill flair if applicable
- [ ] Implement `GetPlayerDeathDescription(string playerName, string killerName)`
  - Use player_death pool with placeholder replacement
- [ ] Implement `GetNearDeathDescription(double healthPercent)`
  - Return warning at â‰¤25%, critical at â‰¤10%, null otherwise
- [ ] Implement private helpers:
  - `GetHitPoolPath(context)`
  - `GetDamageTierDescription(context)`
  - `BuildDescriptorContext(context)`
  - `FormatHitDescription(context, action, severity)`

**Acceptance:** Service generates varied combat narratives.

---

#### 4.2 Create AbilityDescriptorService ğŸŸ¡ â­â­â­

**File:** `src/Core/RuneAndRust.Application/Services/AbilityDescriptorService.cs`

- [ ] Create `AbilityDescriptorService` class
- [ ] Inject `DescriptorService`, `ILogger`
- [ ] Implement `GetActivationDescription(AbilityDescriptorContext context)`
  - Try ability-specific, then damage-type, then generic casting pool
- [ ] Implement `GetImpactDescription(AbilityDescriptorContext context)`
  - Try damage-type effect pool, then generic impact
- [ ] Implement `GetAftermathDescription(AbilityDescriptorContext context)`
  - Return lingering effect description if effects applied
- [ ] Implement `GetCompleteAbilityNarrative(AbilityDescriptorContext context)`
  - Combine activation + impact + aftermath
- [ ] Implement `GetStatusEffectAppliedDescription(string effectId, string targetName)`
- [ ] Implement `GetStatusEffectRemovedDescription(string effectId, string targetName)`
- [ ] Implement private helpers:
  - `FormatWithCaster(template, casterName)`
  - `FormatWithTarget(template, targetName)`

**Acceptance:** Service generates ability narratives with phases.

---

### Phase 5: Service Integration

#### 5.1 Integrate with CombatService ğŸŸ¡ â­â­

**File:** `src/Core/RuneAndRust.Domain/Services/CombatService.cs`

- [ ] Add `CombatDescriptorService` dependency (optional)
- [ ] Update `GetCombatDescription()` to use `CombatDescriptorService` when available
- [ ] Build `CombatDescriptorContext` from combat results
- [ ] Build `DeathDescriptorContext` when monster defeated
- [ ] Add near-death warning to player combat results

**Acceptance:** CombatService produces enhanced narratives.

---

#### 5.2 Integrate with AbilityService ğŸŸ¡ â­â­

**File:** `src/Core/RuneAndRust.Application/Services/AbilityService.cs`

- [ ] Add `AbilityDescriptorService` dependency (optional)
- [ ] Update ability use methods to generate narratives
- [ ] Build `AbilityDescriptorContext` from ability usage

**Acceptance:** AbilityService produces enhanced narratives.

---

#### 5.3 Register Services in DI ğŸŸ¡ â­

**File:** `src/Infrastructure/RuneAndRust.Infrastructure/DependencyInjection.cs`

- [ ] Register `CombatDescriptorService`
- [ ] Register `AbilityDescriptorService`

**Acceptance:** Services available via dependency injection.

---

### Phase 6: Unit Tests

#### 6.1 CombatDescriptorServiceTests.cs ğŸŸ¡ â­â­

**File:** `tests/RuneAndRust.Application.UnitTests/Services/CombatDescriptorServiceTests.cs`

- [ ] Implement 9 tests per specification

**Acceptance:** All combat descriptor tests pass.

---

#### 6.2 AbilityDescriptorServiceTests.cs ğŸŸ¡ â­â­

**File:** `tests/RuneAndRust.Application.UnitTests/Services/AbilityDescriptorServiceTests.cs`

- [ ] Implement 6 tests per specification

**Acceptance:** All ability descriptor tests pass.

---

### Implementation Order Summary

```
Phase 1: Context Classes & Enum
  1.1 DamageTier enum â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  1.2 CombatDescriptorContext â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  1.3 AbilityDescriptorContext â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  1.4 DeathDescriptorContext â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                                              â†“
Phase 2: Configuration Extensions
  2.1 Extend Descriptor class
                                                              â†“
Phase 3: Configuration Files (Parallel)
  3.1 combat-hits.json
  3.2 combat-deaths.json
  3.3 damage-tiers.json
                                                              â†“
Phase 4: Application Services
  4.1 CombatDescriptorService â† CRITICAL
  4.2 AbilityDescriptorService
                                                              â†“
Phase 5: Service Integration
  5.1 CombatService integration
  5.2 AbilityService integration
  5.3 DI registration
                                                              â†“
Phase 6: Unit Tests
  6.1 CombatDescriptorServiceTests
  6.2 AbilityDescriptorServiceTests
```

### Estimated Effort

| Phase | Tasks | Complexity | Est. Time |
|-------|-------|------------|-----------|
| Context Classes | 4 items | â­-â­â­ | 1.5 hours |
| Configuration Extensions | 1 file | â­ | 30 min |
| Configuration Files | 3 files | â­â­ | 2 hours |
| Application Services | 2 services | â­â­â­ | 3 hours |
| Service Integration | 3 items | â­â­ | 2 hours |
| Unit Tests | 15 tests | â­â­ | 2 hours |
| **Total** | | | **~11 hours** |

---

## Acceptance Criteria

### Combat Descriptors

- [ ] Weapon-type specific hit pools implemented (8 weapon types)
- [ ] Hit descriptions selected based on equipped weapon type
- [ ] Damage tier descriptions scale with damage percentage (6 tiers)
- [ ] Critical hit descriptions use dedicated pool
- [ ] Miss descriptions vary (dodge, parry, block, whiff)
- [ ] Fumble descriptions for critical misses

### Death Descriptors

- [ ] Monster death descriptions vary by creature category (6 categories)
- [ ] Death descriptions filtered by monster tags
- [ ] Critical kill descriptions include flair prefix
- [ ] Player death descriptions use template placeholders
- [ ] Near-death warnings at 25% and 10% health

### Ability Descriptors

- [ ] Ability activation descriptions implemented
- [ ] Ability impact descriptions per damage type
- [ ] Ability aftermath descriptions for lingering effects
- [ ] Status effect application/removal descriptions

### Integration

- [ ] CombatDescriptorService integrates with CombatService
- [ ] AbilityDescriptorService integrates with AbilityService
- [ ] Environment context passed through for biome-aware descriptors
- [ ] Fallback to generic pools when specific pools empty

### Tests

- [ ] ~15 unit tests pass
- [ ] Build completes with 0 errors
- [ ] Existing combat flow unchanged (enhanced output only)

---

## File Summary

### New Files (7)

| File | Purpose |
|------|---------|
| `src/Core/RuneAndRust.Application/Services/CombatDescriptorService.cs` | Combat descriptor generation |
| `src/Core/RuneAndRust.Application/Services/AbilityDescriptorService.cs` | Ability descriptor generation |
| `config/descriptors/combat-hits.json` | Weapon-type hit descriptors |
| `config/descriptors/combat-deaths.json` | Death descriptors by category |
| `config/descriptors/damage-tiers.json` | Damage tier descriptors |
| `tests/RuneAndRust.Application.UnitTests/Services/CombatDescriptorServiceTests.cs` | Combat tests |
| `tests/RuneAndRust.Application.UnitTests/Services/AbilityDescriptorServiceTests.cs` | Ability tests |

### Modified Files (5)

| File | Changes |
|------|---------|
| `DescriptorConfiguration.cs` | Add weapon/damage/creature category fields |
| `CombatService.cs` | Integrate CombatDescriptorService |
| `AbilityService.cs` | Integrate AbilityDescriptorService |
| `config/descriptors/abilities.json` | Enhanced with activation/impact pools |
| `DependencyInjection.cs` | Register new services |

---

## Descriptor Examples

### Hit Descriptions by Weapon

| Weapon | Example |
|--------|---------|
| Sword | "slashes across", "drives the blade into" |
| Axe | "hews into", "buries the axe head in" |
| Bow | "arrow pierces", "shaft buries itself in" |
| Staff | "cracks the staff against", "brings down upon" |
| Dagger | "stabs into", "slips the blade between" |
| Fist | "hammers a fist into", "pummels" |
| Mace | "smashes into", "crushes" |
| Spear | "thrusts the spear into", "impales" |

### Death Descriptions by Category

| Category | Example |
|----------|---------|
| Humanoid | "crumples to the ground", "falls lifeless" |
| Undead | "collapses into a heap of bones", "the unholy light fades" |
| Beast | "lets out a final howl", "thrashes briefly before going still" |
| Construct | "shatters into fragments", "grinds to a halt" |
| Elemental | "disperses into wisps of energy", "fades back into the ether" |
| Demon | "dissolves into shadows with a terrible shriek", "is banished" |

---

## Provides to Future Phases

### To v0.0.11c (Sensory Descriptors)

| Type | Usage |
|------|-------|
| `CombatDescriptorContext` | May reference for sensory combat effects |
| `DamageTier` enum | Could influence sensory reactions |

### To v0.0.11d (Interactive Objects)

| Type | Usage |
|------|-------|
| Combat narrative patterns | Similar narrative structure for object interactions |

---

*This implementation plan establishes rich, varied combat narratives that respond to weapon types, damage severity, creature categories, and ability characteristics. The descriptor system creates immersive combat experiences while remaining fully configurable through JSON.*
