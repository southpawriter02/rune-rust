# v0.0.6a Changelog - Multi-Monster Combat Foundation

**Date:** 2026-01-08

## Added

### Domain Layer
- `CombatState` enum with values: NotStarted, Active, Victory, PlayerDefeated, Fled
- `InitiativeRoll` value object for tracking initiative dice results and modifiers
- `Combatant` entity wrapping Player/Monster with combat state tracking
- `CombatEncounter` aggregate root managing multi-monster encounters
- `Monster.InitiativeModifier` property for combat turn order
- `Monster.MonsterDefinitionId` property for grouping duplicate monsters
- `Monster.CreateSkeleton()` and `Monster.CreateOrc()` factory methods
- `GameSession.ActiveEncounter` property for tracking combat state
- `GameSession.IsInCombat` computed property
- `GameSession.PreviousRoomId` for flee destination tracking
- `GameSession.StartCombat()` and `GameSession.EndCombat()` methods

### Application Layer
- `InitiativeService` for rolling initiative and creating encounters
- `TargetResolver` for resolving target specifications to combatants
- `MultiMonsterCombatDtos`: CombatantInitiativeDto, TurnOrderEntryDto, EnemyStatusDto, CombatStateDisplayDto, CombatEndResultDto
- `IGameRenderer.RenderCombatStartAsync()` interface method
- `IGameRenderer.RenderInitiativeAsync()` interface method
- `IGameRenderer.RenderCombatStateAsync()` interface method
- `IGameRenderer.RenderCombatEndAsync()` interface method

### Presentation Layer
- `SpectreGameRenderer` combat UI rendering with initiative tables, turn order panels, enemy status

### Tests
- `CombatStateTests` (3 tests)
- `InitiativeRollTests` (6 tests)
- `CombatantTests` (10 tests)
- `CombatEncounterTests` (15 tests)
- `InitiativeServiceTests` (8 tests)
- `TargetResolverTests` (11 tests)

## Technical Notes

- Initiative formula: 1d10 + modifier (Finesse for players, InitiativeModifier for monsters)
- Ties broken by highest modifier value
- Maximum 5 monsters per room (enforced in encounter creation)
- Monsters of same type automatically numbered (e.g., "Goblin 1", "Goblin 2")
- Target resolution supports: number ("2"), name ("goblin"), or name+number ("goblin 2")

## Test Results

```
Domain Tests:      217 passed
Application Tests: 112 passed
Architecture Tests:  8 passed
Total:             337 passed
```
