# v0.16.1d Changelog - Character Proficiency Tracking

## Summary

Implements **Character Proficiency Tracking** that maintains per-character weapon category proficiency state including current levels and combat experience progress. This creates the data structure for tracking proficiency advancement through gameplay without coupling to specific combat or acquisition logic.

## Proficiency Progression

| Transition                     | Combats Required | Description                                     |
| ------------------------------ | :--------------: | ----------------------------------------------- |
| NonProficient → Proficient     |        10        | Learning basics, removes -3 attack / -2 damage  |
| Proficient → Expert            |        25        | Developing technique, grants +1 attack          |
| Expert → Master                |        50        | Achieving mastery, grants +2 attack / +1 damage |
| **Total (from NonProficient)** |      **85**      | Complete mastery from scratch                   |
| **Total (from Proficient)**    |      **75**      | Mastery for archetype-proficient categories     |

## Added

### Domain Layer - Entities (1 file)

| File                        | Description                                                          |
| --------------------------- | -------------------------------------------------------------------- |
| `CharacterProficiencies.cs` | Entity tracking all 11 weapon category proficiencies for a character |

#### CharacterProficiencies Features

- **Properties**: `Id`, `CharacterId`, `Proficiencies` (dictionary)
- **Factory**: `CreateFromArchetype()` initializes from archetype matrix
- **Query Methods**: `GetLevel()`, `GetProgress()`, `GetCombatExperience()`, `CanAdvance()`, `IsAtMaxLevel()`
- **Aggregate Queries**: `GetCategoriesAtLevel()`, `GetCountAtLevel()`, `GetTotalCombatExperience()`, `GetCategoriesReadyToAdvance()`
- **Update**: `UpdateProgress()` (internal)

### Domain Layer - Value Objects (2 files)

| File                       | Description                                     |
| -------------------------- | ----------------------------------------------- |
| `ProficiencyThresholds.cs` | Combat experience thresholds (10/25/50 default) |
| `ProficiencyProgress.cs`   | Progress state for a single weapon category     |

#### ProficiencyThresholds Features

- **Properties**: `NonProficientToProficient`, `ProficientToExpert`, `ExpertToMaster`
- **Derived**: `TotalToMaster`, `TotalToMasterFromProficient`
- **Factory**: `Default` (static), `Create()` with validation

#### ProficiencyProgress Features

- **Properties**: `Category`, `CurrentLevel`, `CombatExperience`, `Thresholds`
- **Derived**: `IsAtMaxLevel`, `CanAdvance`, `ThresholdForNextLevel`, `ExperienceToNextLevel`, `ProgressPercentage`, `HasReachedNextThreshold`
- **Methods**: `AddExperience()`, `AdvanceToNextLevel()`
- **Formatting**: `FormatProgress()`, `FormatWithCategory()`

### Configuration (2 files)

| File                                                | Description                         |
| --------------------------------------------------- | ----------------------------------- |
| `config/proficiency-thresholds.json`                | Threshold configuration (10/25/50)  |
| `config/schemas/proficiency-thresholds.schema.json` | JSON Schema draft-07 for validation |

### Unit Tests (3 files)

| File                             | Tests                                                  |
| -------------------------------- | ------------------------------------------------------ |
| `ProficiencyThresholdsTests.cs`  | Default values, factory validation, derived properties |
| `ProficiencyProgressTests.cs`    | Creation, advancement, experience tracking, formatting |
| `CharacterProficienciesTests.cs` | Archetype initialization, queries, aggregate methods   |

## Character Initialization Example

```csharp
// Create proficiencies for a new Mystic character
var archetypeSet = archetypeProficiencyProvider.GetProficiencySet("mystic");
var thresholds = ProficiencyThresholds.Default;

var proficiencies = CharacterProficiencies.CreateFromArchetype(
    characterId: character.Id,
    archetypeProficiencySet: archetypeSet,
    thresholds: thresholds);

// Mystic starts with:
// - Daggers, Staves, ArcaneImplements: Proficient (0/25 to Expert)
// - 8 other categories: NonProficient (0/10 to Proficient)
```

## Files Changed

### Added (7 files)

- `src/Core/RuneAndRust.Domain/Entities/CharacterProficiencies.cs`
- `src/Core/RuneAndRust.Domain/ValueObjects/ProficiencyProgress.cs`
- `src/Core/RuneAndRust.Domain/ValueObjects/ProficiencyThresholds.cs`
- `config/proficiency-thresholds.json`
- `config/schemas/proficiency-thresholds.schema.json`
- `tests/RuneAndRust.Domain.UnitTests/Entities/CharacterProficienciesTests.cs`
- `tests/RuneAndRust.Domain.UnitTests/ValueObjects/ProficiencyProgressTests.cs`
- `tests/RuneAndRust.Domain.UnitTests/ValueObjects/ProficiencyThresholdsTests.cs`

## Dependencies

### Requires from v0.16.1a

- `WeaponProficiencyLevel` enum for level tracking

### Requires from v0.16.1b

- `WeaponCategory` enum for category identification

### Requires from v0.16.1c

- `ArchetypeProficiencySet` for character initialization

### Provides to v0.16.1e

- `CharacterProficiencies` for acquisition service updates
- `ProficiencyProgress` for experience and advancement tracking

### Provides to v0.16.1f

- `CharacterProficiencies` for combat integration queries
- `GetLevel()` for proficiency modifier lookups

## Logging Specifications

| Component                | Level       | Events                                |
| ------------------------ | ----------- | ------------------------------------- |
| `CharacterProficiencies` | Information | Creation, level advancement           |
| `CharacterProficiencies` | Debug       | Level queries, progress updates       |
| `ProficiencyProgress`    | Debug       | Experience addition, threshold checks |

## Notes

- `ProficiencyProgress` is immutable; mutations return new instances
- `CharacterProficiencies.UpdateProgress()` is internal (use acquisition service for external updates)
- Experience resets to 0 when advancing to the next level
- Configuration thresholds are loaded from `proficiency-thresholds.json`
- All 179 proficiency-related unit tests pass
