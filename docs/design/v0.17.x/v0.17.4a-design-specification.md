# v0.17.4a Design Specification: Specialization Enum & Path Types

**Version:** 0.17.4a
**Theme:** Specialization Enum & Path Types
**Author:** Claude
**Created:** 2026-01-27
**Status:** Draft
**Prerequisites:** v0.17.3 Complete (Archetype System)

---

## Table of Contents

1. [Overview](#1-overview)
2. [Dependencies](#2-dependencies)
3. [Architecture Diagrams](#3-architecture-diagrams)
4. [SpecializationPathType Enum](#4-specializationpathtype-enum)
5. [SpecializationId Enum](#5-specializationid-enum)
6. [Path Type Classification](#6-path-type-classification)
7. [Configuration](#7-configuration)
8. [Commands](#8-commands)
9. [User-Facing Changes](#9-user-facing-changes)
10. [Logging Specifications](#10-logging-specifications)
11. [Unit Testing Requirements](#11-unit-testing-requirements)
12. [Use Cases](#12-use-cases)
13. [Deliverable Checklist](#13-deliverable-checklist)
14. [Acceptance Criteria](#14-acceptance-criteria)
15. [Future Considerations](#15-future-considerations)
16. [Implementation Notes](#16-implementation-notes)
17. [Document Metadata](#17-document-metadata)

---

## 1. Overview

### 1.1 Purpose

This document provides a comprehensive design specification for v0.17.4a, the Specialization Enum & Path Types phase. This phase establishes the foundational enumeration and classification infrastructure for the Specialization system.

Key components:

1. **SpecializationPathType Enum**: Classifies specializations as either Coherent (stable reality) or Heretical (corrupted Aether), determining Trauma Economy interactions.

2. **SpecializationId Enum**: Defines all 17 specializations across the 4 archetypes, providing type-safe identification for specialization selection and lookup.

3. **Path Type Classification Logic**: Associates each specialization with its path type and Corruption risk profile.

This infrastructure is foundational for all subsequent Specialization system components (v0.17.4b-v0.17.4e).

### 1.2 Current vs. Target Implementation

| Aspect                      | Current Implementation         | Target Implementation                              |
| --------------------------- | ------------------------------ | -------------------------------------------------- |
| **Specialization Identity** | Not implemented                | `SpecializationId` enum with 17 values             |
| **Path Classification**     | Not implemented                | `SpecializationPathType` enum (Coherent/Heretical) |
| **Corruption Risk**         | Not tracked per specialization | Path type determines Corruption interaction        |
| **Type Safety**             | N/A                            | Compile-time specialization validation             |

### 1.3 Scope

**In Scope:**

- Define `SpecializationPathType` enum with 2 values (Coherent, Heretical)
- Define `SpecializationId` enum with 17 specialization values
- Define extension methods for path type lookups
- Configuration file section for path type mappings
- Unit tests for enum values and path type classification (~2 tests)

**Out of Scope:**

- Specialization definition entity - v0.17.4b
- Ability tiers - v0.17.4c
- Specialization provider service - v0.17.4d
- Specialization application service - v0.17.4e

### 1.4 Key Deliverables

| Type          | Count | Details                                      |
| ------------- | ----- | -------------------------------------------- |
| Enums         | 2     | `SpecializationPathType`, `SpecializationId` |
| Extensions    | 1     | `SpecializationIdExtensions`                 |
| Configuration | 1     | Path type mappings in `specializations.json` |
| Unit Tests    | ~2    | Enum value count, path type classification   |

---

## 2. Dependencies

### 2.1 Required from v0.17.3 (Archetype System)

| Component             | Location                                       | Usage in v0.17.4a                               |
| --------------------- | ---------------------------------------------- | ----------------------------------------------- |
| `Archetype`           | `Domain/Enums/Archetype.cs`                    | Parent archetype for each specialization        |
| `ArchetypeDefinition` | `Domain/Entities/ArchetypeDefinition.cs`       | AvailableSpecializations list                   |
| `IArchetypeProvider`  | `Application/Interfaces/IArchetypeProvider.cs` | Validate specialization-archetype relationships |

### 2.2 Required from v0.15.x (Trauma Economy)

| Component         | Location                                 | Usage in v0.17.4a                     |
| ----------------- | ---------------------------------------- | ------------------------------------- |
| `CorruptionLevel` | `Domain/ValueObjects/CorruptionLevel.cs` | Heretical path Corruption interaction |
| `StressLevel`     | `Domain/ValueObjects/StressLevel.cs`     | Stress costs for certain abilities    |

### 2.3 Provides to Future Versions

| Version  | Component                | Usage                                           |
| -------- | ------------------------ | ----------------------------------------------- |
| v0.17.4b | `SpecializationId`       | Primary key for SpecializationDefinition entity |
| v0.17.4b | `SpecializationPathType` | Path type property on definition                |
| v0.17.4c | `SpecializationId`       | Links abilities to specialization               |
| v0.17.4d | `SpecializationId`       | Provider lookup key                             |
| v0.17.4e | `SpecializationPathType` | Display Corruption warnings                     |

---

## 3. Architecture Diagrams

### 3.1 Specialization Hierarchy

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                      SPECIALIZATION HIERARCHY                                │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  WARRIOR (6 Specializations)                                                │
│  ├── Berserkr ────────── [HERETICAL] Rage risks Corruption                  │
│  ├── IronBane ────────── [COHERENT]  Righteous monster hunting              │
│  ├── Skjaldmaer ─────── [COHERENT]  Protective defense                      │
│  ├── SkarHorde ────────── [COHERENT]  Leadership and unity                  │
│  ├── AtgeirWielder ───── [COHERENT]  Disciplined reach combat               │
│  └── GorgeMaw ─────────── [HERETICAL] Consuming enemies risks Corruption    │
│                                                                              │
│  SKIRMISHER (4 Specializations)                                             │
│  ├── Veidimadr ────────── [COHERENT]  Traditional hunting                   │
│  ├── MyrkGengr ────────── [HERETICAL] Shadow manipulation                   │
│  ├── Strandhogg ─────── [COHERENT]  Tactical raiding                        │
│  └── HlekkrMaster ────── [COHERENT]  Control and restraint                  │
│                                                                              │
│  MYSTIC (2 Specializations)                                                 │
│  ├── Seidkona ─────────── [HERETICAL] Traditional Aether manipulation       │
│  └── EchoCaller ─────── [HERETICAL] Communing with the dead                 │
│                                                                              │
│  ADEPT (5 Specializations)                                                  │
│  ├── BoneSetter ─────── [COHERENT]  Traditional medicine                    │
│  ├── JotunReader ────── [COHERENT]  Knowledge and lore                      │
│  ├── Skald ──────────── [COHERENT]  Inspiration through song                │
│  ├── ScrapTinker ────── [COHERENT]  Practical invention                     │
│  └── Einbui ───────────── [COHERENT]  Self-reliant survival                 │
│                                                                              │
│  TOTAL: 17 Specializations (5 Heretical, 12 Coherent)                       │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 Path Type Decision Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                      PATH TYPE DECISION FLOW                                 │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  SPECIALIZATION SELECTED                                                    │
│           │                                                                  │
│           ▼                                                                  │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │            GET PATH TYPE FROM EXTENSION                              │    │
│  │                                                                      │    │
│  │  var pathType = specializationId.GetPathType();                      │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│           │                                                                  │
│           ▼                                                                  │
│      ┌────────────────────────────────────────────────┐                     │
│      │           IS HERETICAL?                         │                     │
│      └────────────────────────────────────────────────┘                     │
│           │                          │                                       │
│     [YES] │                          │ [NO]                                  │
│           ▼                          ▼                                       │
│  ┌──────────────────┐       ┌──────────────────┐                            │
│  │    HERETICAL     │       │     COHERENT     │                            │
│  ├──────────────────┤       ├──────────────────┤                            │
│  │                  │       │                  │                            │
│  │ • Display        │       │ • No Corruption  │                            │
│  │   Corruption     │       │   warning        │                            │
│  │   warning        │       │                  │                            │
│  │                  │       │ • Standard       │                            │
│  │ • Track          │       │   ability usage  │                            │
│  │   Corruption     │       │                  │                            │
│  │   from abilities │       │ • Works within   │                            │
│  │                  │       │   stable reality │                            │
│  │ • May trigger    │       │                  │                            │
│  │   Aether events  │       │                  │                            │
│  │                  │       │                  │                            │
│  └──────────────────┘       └──────────────────┘                            │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.3 Layer Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           LAYER ARCHITECTURE                                 │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                      DOMAIN LAYER                                    │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │                                                                      │    │
│  │  Enums/                                                             │    │
│  │  ├── SpecializationPathType.cs      ←── NEW                         │    │
│  │  └── SpecializationId.cs            ←── NEW                         │    │
│  │                                                                      │    │
│  │  Extensions/                                                        │    │
│  │  └── SpecializationIdExtensions.cs  ←── NEW                         │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                  │                                           │
│                                  │ uses                                      │
│                                  ▼                                           │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                  INFRASTRUCTURE LAYER                                │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │                                                                      │    │
│  │  Configuration/                                                     │    │
│  │  └── specializations.json           ←── NEW (path type section)     │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 4. SpecializationPathType Enum

### 4.1 Enum Definition

**File:** `src/Core/RuneAndRust.Domain/Enums/SpecializationPathType.cs`

```csharp
namespace RuneAndRust.Domain.Enums;

/// <summary>
/// Classifies specializations by their relationship with reality and the Aether.
/// </summary>
/// <remarks>
/// <para>
/// Path type determines how a specialization interacts with the Trauma Economy,
/// particularly Corruption. Heretical paths risk Corruption gain when using
/// certain abilities, while Coherent paths operate within stable reality.
/// </para>
/// <para>
/// Path type is permanent and determined by the specialization itself, not
/// player choice. Some archetypes (like Mystic) only have Heretical options.
/// </para>
/// </remarks>
public enum SpecializationPathType
{
    /// <summary>
    /// Works within stable reality. No special Corruption risk from abilities.
    /// </summary>
    /// <remarks>
    /// <para>Coherent specializations use skills, training, and natural abilities.</para>
    /// <para>Abilities do not interact with corrupted Aether.</para>
    /// <para>Examples: Skjaldmaer (defense), Veidimadr (hunting), BoneSetter (medicine).</para>
    /// </remarks>
    Coherent = 0,

    /// <summary>
    /// Interfaces with corrupted Aether. Abilities may trigger Corruption gain.
    /// </summary>
    /// <remarks>
    /// <para>Heretical specializations tap into unstable or corrupted power sources.</para>
    /// <para>Certain abilities have Corruption costs or risks on fumble.</para>
    /// <para>UI displays warning when selecting Heretical specialization.</para>
    /// <para>Examples: Berserkr (rage), Seidkona (Aether), EchoCaller (dead).</para>
    /// </remarks>
    Heretical = 1
}
```

### 4.2 Extension Methods

**File:** `src/Core/RuneAndRust.Domain/Extensions/SpecializationPathTypeExtensions.cs`

```csharp
namespace RuneAndRust.Domain.Extensions;

using RuneAndRust.Domain.Enums;

/// <summary>
/// Extension methods for <see cref="SpecializationPathType"/> enum.
/// </summary>
public static class SpecializationPathTypeExtensions
{
    /// <summary>
    /// Gets whether this path type risks Corruption from ability use.
    /// </summary>
    /// <param name="pathType">The path type.</param>
    /// <returns>True if abilities may trigger Corruption gain.</returns>
    public static bool RisksCorruption(this SpecializationPathType pathType)
    {
        return pathType == SpecializationPathType.Heretical;
    }

    /// <summary>
    /// Gets the warning message for this path type during character creation.
    /// </summary>
    /// <param name="pathType">The path type.</param>
    /// <returns>Warning text for UI display, or null for Coherent paths.</returns>
    public static string? GetCreationWarning(this SpecializationPathType pathType)
    {
        return pathType switch
        {
            SpecializationPathType.Heretical =>
                "This specialization interfaces with corrupted Aether. " +
                "Some abilities may trigger Corruption gain.",
            SpecializationPathType.Coherent => null,
            _ => null
        };
    }

    /// <summary>
    /// Gets a human-readable description of the path type.
    /// </summary>
    /// <param name="pathType">The path type.</param>
    /// <returns>A descriptive string for UI display.</returns>
    public static string GetDescription(this SpecializationPathType pathType)
    {
        return pathType switch
        {
            SpecializationPathType.Coherent => "Works within stable reality",
            SpecializationPathType.Heretical => "Interfaces with corrupted Aether",
            _ => "Unknown path type"
        };
    }
}
```

---

## 5. SpecializationId Enum

### 5.1 Enum Definition

**File:** `src/Core/RuneAndRust.Domain/Enums/SpecializationId.cs`

```csharp
namespace RuneAndRust.Domain.Enums;

/// <summary>
/// Unique identifier for each specialization in the game.
/// </summary>
/// <remarks>
/// <para>
/// Each specialization belongs to a single parent archetype and cannot be
/// changed after selection. The first specialization is free at character
/// creation; additional ones cost 3 Progression Points.
/// </para>
/// <para>
/// Specializations are grouped by parent archetype:
/// - Warrior: 6 specializations (Berserkr through GorgeMaw)
/// - Skirmisher: 4 specializations (Veidimadr through HlekkrMaster)
/// - Mystic: 2 specializations (Seidkona, EchoCaller)
/// - Adept: 5 specializations (BoneSetter through Einbui)
/// </para>
/// </remarks>
public enum SpecializationId
{
    // ═══════════════════════════════════════════════════════════════════════
    // WARRIOR SPECIALIZATIONS (6)
    // ═══════════════════════════════════════════════════════════════════════

    /// <summary>
    /// Fury-powered damage dealer. Heretical path - rage risks Corruption.
    /// </summary>
    /// <remarks>
    /// <para>Parent: Warrior</para>
    /// <para>Path: Heretical</para>
    /// <para>Special Resource: Rage (0-100)</para>
    /// </remarks>
    Berserkr = 0,

    /// <summary>
    /// Monster hunter specializing in fighting Blighted creatures.
    /// </summary>
    /// <remarks>
    /// <para>Parent: Warrior</para>
    /// <para>Path: Coherent</para>
    /// <para>Special Resource: Righteous Fervor (0-50)</para>
    /// </remarks>
    IronBane = 1,

    /// <summary>
    /// Living shield, protector of allies.
    /// </summary>
    /// <remarks>
    /// <para>Parent: Warrior</para>
    /// <para>Path: Coherent</para>
    /// <para>Special Resource: Block Charges (0-3)</para>
    /// </remarks>
    Skjaldmaer = 2,

    /// <summary>
    /// Leader commanding allies in battle.
    /// </summary>
    /// <remarks>
    /// <para>Parent: Warrior</para>
    /// <para>Path: Coherent</para>
    /// </remarks>
    SkarHorde = 3,

    /// <summary>
    /// Master of reach weapons and battlefield control.
    /// </summary>
    /// <remarks>
    /// <para>Parent: Warrior</para>
    /// <para>Path: Coherent</para>
    /// </remarks>
    AtgeirWielder = 4,

    /// <summary>
    /// Consumes enemies to fuel power. Heretical path - consumption risks Corruption.
    /// </summary>
    /// <remarks>
    /// <para>Parent: Warrior</para>
    /// <para>Path: Heretical</para>
    /// </remarks>
    GorgeMaw = 5,

    // ═══════════════════════════════════════════════════════════════════════
    // SKIRMISHER SPECIALIZATIONS (4)
    // ═══════════════════════════════════════════════════════════════════════

    /// <summary>
    /// Traditional hunter and tracker.
    /// </summary>
    /// <remarks>
    /// <para>Parent: Skirmisher</para>
    /// <para>Path: Coherent</para>
    /// </remarks>
    Veidimadr = 6,

    /// <summary>
    /// Shadow manipulator. Heretical path - shadow abilities risk Corruption.
    /// </summary>
    /// <remarks>
    /// <para>Parent: Skirmisher</para>
    /// <para>Path: Heretical</para>
    /// </remarks>
    MyrkGengr = 7,

    /// <summary>
    /// Tactical raider specializing in hit-and-run.
    /// </summary>
    /// <remarks>
    /// <para>Parent: Skirmisher</para>
    /// <para>Path: Coherent</para>
    /// </remarks>
    Strandhogg = 8,

    /// <summary>
    /// Master of chains and restraint.
    /// </summary>
    /// <remarks>
    /// <para>Parent: Skirmisher</para>
    /// <para>Path: Coherent</para>
    /// </remarks>
    HlekkrMaster = 9,

    // ═══════════════════════════════════════════════════════════════════════
    // MYSTIC SPECIALIZATIONS (2)
    // ═══════════════════════════════════════════════════════════════════════

    /// <summary>
    /// Traditional Aether manipulation. Heretical path - spellcasting risks Corruption.
    /// </summary>
    /// <remarks>
    /// <para>Parent: Mystic</para>
    /// <para>Path: Heretical</para>
    /// <para>Special Resource: Aether Resonance (0-10)</para>
    /// </remarks>
    Seidkona = 10,

    /// <summary>
    /// Communes with the dead. Heretical path - communing risks Corruption.
    /// </summary>
    /// <remarks>
    /// <para>Parent: Mystic</para>
    /// <para>Path: Heretical</para>
    /// <para>Special Resource: Echoes (0-5)</para>
    /// </remarks>
    EchoCaller = 11,

    // ═══════════════════════════════════════════════════════════════════════
    // ADEPT SPECIALIZATIONS (5)
    // ═══════════════════════════════════════════════════════════════════════

    /// <summary>
    /// Healer and traditional medicine practitioner.
    /// </summary>
    /// <remarks>
    /// <para>Parent: Adept</para>
    /// <para>Path: Coherent</para>
    /// </remarks>
    BoneSetter = 12,

    /// <summary>
    /// Scholar of lore and ancient knowledge.
    /// </summary>
    /// <remarks>
    /// <para>Parent: Adept</para>
    /// <para>Path: Coherent</para>
    /// </remarks>
    JotunReader = 13,

    /// <summary>
    /// Performer inspiring allies through song and story.
    /// </summary>
    /// <remarks>
    /// <para>Parent: Adept</para>
    /// <para>Path: Coherent</para>
    /// </remarks>
    Skald = 14,

    /// <summary>
    /// Crafter of gadgets and practical inventions.
    /// </summary>
    /// <remarks>
    /// <para>Parent: Adept</para>
    /// <para>Path: Coherent</para>
    /// </remarks>
    ScrapTinker = 15,

    /// <summary>
    /// Self-reliant survivalist.
    /// </summary>
    /// <remarks>
    /// <para>Parent: Adept</para>
    /// <para>Path: Coherent</para>
    /// </remarks>
    Einbui = 16
}
```

---

## 6. Path Type Classification

### 6.1 Extension Methods

**File:** `src/Core/RuneAndRust.Domain/Extensions/SpecializationIdExtensions.cs`

```csharp
namespace RuneAndRust.Domain.Extensions;

using RuneAndRust.Domain.Enums;

/// <summary>
/// Extension methods for <see cref="SpecializationId"/> enum.
/// </summary>
public static class SpecializationIdExtensions
{
    /// <summary>
    /// Gets the path type (Coherent or Heretical) for this specialization.
    /// </summary>
    /// <param name="specializationId">The specialization identifier.</param>
    /// <returns>The <see cref="SpecializationPathType"/> for this specialization.</returns>
    public static SpecializationPathType GetPathType(this SpecializationId specializationId)
    {
        return specializationId switch
        {
            // Heretical paths (5 total)
            SpecializationId.Berserkr => SpecializationPathType.Heretical,
            SpecializationId.GorgeMaw => SpecializationPathType.Heretical,
            SpecializationId.MyrkGengr => SpecializationPathType.Heretical,
            SpecializationId.Seidkona => SpecializationPathType.Heretical,
            SpecializationId.EchoCaller => SpecializationPathType.Heretical,

            // All others are Coherent (12 total)
            _ => SpecializationPathType.Coherent
        };
    }

    /// <summary>
    /// Gets the parent archetype for this specialization.
    /// </summary>
    /// <param name="specializationId">The specialization identifier.</param>
    /// <returns>The parent <see cref="Archetype"/>.</returns>
    public static Archetype GetParentArchetype(this SpecializationId specializationId)
    {
        return specializationId switch
        {
            // Warrior specializations
            SpecializationId.Berserkr => Archetype.Warrior,
            SpecializationId.IronBane => Archetype.Warrior,
            SpecializationId.Skjaldmaer => Archetype.Warrior,
            SpecializationId.SkarHorde => Archetype.Warrior,
            SpecializationId.AtgeirWielder => Archetype.Warrior,
            SpecializationId.GorgeMaw => Archetype.Warrior,

            // Skirmisher specializations
            SpecializationId.Veidimadr => Archetype.Skirmisher,
            SpecializationId.MyrkGengr => Archetype.Skirmisher,
            SpecializationId.Strandhogg => Archetype.Skirmisher,
            SpecializationId.HlekkrMaster => Archetype.Skirmisher,

            // Mystic specializations
            SpecializationId.Seidkona => Archetype.Mystic,
            SpecializationId.EchoCaller => Archetype.Mystic,

            // Adept specializations
            SpecializationId.BoneSetter => Archetype.Adept,
            SpecializationId.JotunReader => Archetype.Adept,
            SpecializationId.Skald => Archetype.Adept,
            SpecializationId.ScrapTinker => Archetype.Adept,
            SpecializationId.Einbui => Archetype.Adept,

            _ => throw new ArgumentOutOfRangeException(
                nameof(specializationId),
                $"Unknown specialization: {specializationId}")
        };
    }

    /// <summary>
    /// Gets whether this specialization is Heretical (risks Corruption).
    /// </summary>
    /// <param name="specializationId">The specialization identifier.</param>
    /// <returns>True if the specialization is Heretical.</returns>
    public static bool IsHeretical(this SpecializationId specializationId)
    {
        return specializationId.GetPathType() == SpecializationPathType.Heretical;
    }

    /// <summary>
    /// Gets a human-readable display name for this specialization.
    /// </summary>
    /// <param name="specializationId">The specialization identifier.</param>
    /// <returns>The display name with proper formatting.</returns>
    public static string GetDisplayName(this SpecializationId specializationId)
    {
        return specializationId switch
        {
            SpecializationId.Berserkr => "Berserkr",
            SpecializationId.IronBane => "Iron-Bane",
            SpecializationId.Skjaldmaer => "Skjaldmaer",
            SpecializationId.SkarHorde => "Skar-Horde",
            SpecializationId.AtgeirWielder => "Atgeir-Wielder",
            SpecializationId.GorgeMaw => "Gorge-Maw",
            SpecializationId.Veidimadr => "Veiðimaðr",
            SpecializationId.MyrkGengr => "Myrk-gengr",
            SpecializationId.Strandhogg => "Strandhögg",
            SpecializationId.HlekkrMaster => "Hlekkr-master",
            SpecializationId.Seidkona => "Seiðkona",
            SpecializationId.EchoCaller => "Echo-Caller",
            SpecializationId.BoneSetter => "Bone-Setter",
            SpecializationId.JotunReader => "Jötun-Reader",
            SpecializationId.Skald => "Skald",
            SpecializationId.ScrapTinker => "Scrap-Tinker",
            SpecializationId.Einbui => "Einbúi",
            _ => specializationId.ToString()
        };
    }

    /// <summary>
    /// Gets the Corruption risk description for this specialization.
    /// </summary>
    /// <param name="specializationId">The specialization identifier.</param>
    /// <returns>Description of Corruption risk, or null for Coherent paths.</returns>
    public static string? GetCorruptionRisk(this SpecializationId specializationId)
    {
        return specializationId switch
        {
            SpecializationId.Berserkr => "Rage abilities may trigger Corruption gain",
            SpecializationId.GorgeMaw => "Consuming enemies risks Corruption",
            SpecializationId.MyrkGengr => "Shadow manipulation risks Corruption",
            SpecializationId.Seidkona => "Aether spellcasting risks Corruption",
            SpecializationId.EchoCaller => "Communing with the dead risks Corruption",
            _ => null
        };
    }
}
```

### 6.2 Path Type Classification Table

| Specialization | Parent Archetype | Path Type     | Corruption Risk                            |
| -------------- | ---------------- | ------------- | ------------------------------------------ |
| Berserkr       | Warrior          | **Heretical** | Rage abilities may trigger Corruption gain |
| Iron-Bane      | Warrior          | Coherent      | None                                       |
| Skjaldmaer     | Warrior          | Coherent      | None                                       |
| Skar-Horde     | Warrior          | Coherent      | None                                       |
| Atgeir-Wielder | Warrior          | Coherent      | None                                       |
| Gorge-Maw      | Warrior          | **Heretical** | Consuming enemies risks Corruption         |
| Veiðimaðr      | Skirmisher       | Coherent      | None                                       |
| Myrk-gengr     | Skirmisher       | **Heretical** | Shadow manipulation risks Corruption       |
| Strandhögg     | Skirmisher       | Coherent      | None                                       |
| Hlekkr-master  | Skirmisher       | Coherent      | None                                       |
| Seiðkona       | Mystic           | **Heretical** | Aether spellcasting risks Corruption       |
| Echo-Caller    | Mystic           | **Heretical** | Communing with the dead risks Corruption   |
| Bone-Setter    | Adept            | Coherent      | None                                       |
| Jötun-Reader   | Adept            | Coherent      | None                                       |
| Skald          | Adept            | Coherent      | None                                       |
| Scrap-Tinker   | Adept            | Coherent      | None                                       |
| Einbúi         | Adept            | Coherent      | None                                       |

**Summary:**

- Heretical: 5 (Berserkr, GorgeMaw, MyrkGengr, Seidkona, EchoCaller)
- Coherent: 12 (all others)

---

## 7. Configuration

### 7.1 Specializations JSON Structure

**File:** `config/specializations.json`

```json
{
    "$schema": "./schemas/specializations.schema.json",
    "pathTypes": [
        {
            "specializationId": "Berserkr",
            "pathType": "Heretical",
            "corruptionRisk": "Rage abilities may trigger Corruption gain"
        },
        {
            "specializationId": "IronBane",
            "pathType": "Coherent",
            "corruptionRisk": null
        },
        {
            "specializationId": "Skjaldmaer",
            "pathType": "Coherent",
            "corruptionRisk": null
        },
        {
            "specializationId": "SkarHorde",
            "pathType": "Coherent",
            "corruptionRisk": null
        },
        {
            "specializationId": "AtgeirWielder",
            "pathType": "Coherent",
            "corruptionRisk": null
        },
        {
            "specializationId": "GorgeMaw",
            "pathType": "Heretical",
            "corruptionRisk": "Consuming enemies risks Corruption"
        },
        {
            "specializationId": "Veidimadr",
            "pathType": "Coherent",
            "corruptionRisk": null
        },
        {
            "specializationId": "MyrkGengr",
            "pathType": "Heretical",
            "corruptionRisk": "Shadow manipulation risks Corruption"
        },
        {
            "specializationId": "Strandhogg",
            "pathType": "Coherent",
            "corruptionRisk": null
        },
        {
            "specializationId": "HlekkrMaster",
            "pathType": "Coherent",
            "corruptionRisk": null
        },
        {
            "specializationId": "Seidkona",
            "pathType": "Heretical",
            "corruptionRisk": "Aether spellcasting risks Corruption"
        },
        {
            "specializationId": "EchoCaller",
            "pathType": "Heretical",
            "corruptionRisk": "Communing with the dead risks Corruption"
        },
        {
            "specializationId": "BoneSetter",
            "pathType": "Coherent",
            "corruptionRisk": null
        },
        {
            "specializationId": "JotunReader",
            "pathType": "Coherent",
            "corruptionRisk": null
        },
        {
            "specializationId": "Skald",
            "pathType": "Coherent",
            "corruptionRisk": null
        },
        {
            "specializationId": "ScrapTinker",
            "pathType": "Coherent",
            "corruptionRisk": null
        },
        {
            "specializationId": "Einbui",
            "pathType": "Coherent",
            "corruptionRisk": null
        }
    ]
}
```

---

## 8. Commands

No new commands are introduced in v0.17.4a. Enumeration types are internal to the system.

---

## 9. User-Facing Changes

### 9.1 No Direct UI Changes

v0.17.4a introduces foundational enums that will be consumed by future UI components in v0.17.4e and v0.17.5. No direct user-facing changes in this phase.

### 9.2 Future UI Integration Points

The enums defined here will enable:

- Specialization selection dropdown (v0.17.5)
- Path type indicator with Heretical warning (v0.17.5)
- Corruption risk tooltip (v0.17.5)

---

## 10. Logging Specifications

### 10.1 Log Levels by Component

| Component                    | Level   | Events                                    |
| ---------------------------- | ------- | ----------------------------------------- |
| `SpecializationIdExtensions` | Debug   | Path type lookup, parent archetype lookup |
| `SpecializationIdExtensions` | Warning | Unknown specialization ID encountered     |

### 10.2 Log Message Templates

```csharp
// Debug: Path type lookup
_logger.LogDebug(
    "Path type lookup for {SpecializationId}: {PathType}",
    specializationId,
    pathType);

// Warning: Unknown specialization
_logger.LogWarning(
    "Unknown specialization ID encountered: {SpecializationId}",
    specializationId);
```

---

## 11. Unit Testing Requirements

### 11.1 Test Count by Feature

| Feature                              | Test Count |
| ------------------------------------ | ---------- |
| SpecializationPathType enum          | 1          |
| SpecializationId enum and extensions | 1          |
| **Total**                            | **~2**     |

### 11.2 Test Specifications

**File:** `tests/RuneAndRust.Domain.UnitTests/Enums/SpecializationEnumTests.cs`

```csharp
[TestFixture]
public class SpecializationEnumTests
{
    [Test]
    public void SpecializationPathType_HasTwoValues()
    {
        // Arrange & Act
        var values = Enum.GetValues<SpecializationPathType>();

        // Assert
        values.Should().HaveCount(2);
        values.Should().Contain(SpecializationPathType.Coherent);
        values.Should().Contain(SpecializationPathType.Heretical);
    }

    [Test]
    public void SpecializationId_Has17Values_WithCorrectPathTypes()
    {
        // Arrange & Act
        var values = Enum.GetValues<SpecializationId>();

        // Assert - Count
        values.Should().HaveCount(17);

        // Assert - Heretical count (5)
        var hereticalCount = values.Count(s => s.IsHeretical());
        hereticalCount.Should().Be(5);

        // Assert - Specific Heretical specializations
        SpecializationId.Berserkr.IsHeretical().Should().BeTrue();
        SpecializationId.GorgeMaw.IsHeretical().Should().BeTrue();
        SpecializationId.MyrkGengr.IsHeretical().Should().BeTrue();
        SpecializationId.Seidkona.IsHeretical().Should().BeTrue();
        SpecializationId.EchoCaller.IsHeretical().Should().BeTrue();

        // Assert - Coherent examples
        SpecializationId.Skjaldmaer.IsHeretical().Should().BeFalse();
        SpecializationId.BoneSetter.IsHeretical().Should().BeFalse();
    }
}
```

---

## 12. Use Cases

### UC-001: Get Specialization Path Type

**Actor:** System
**Precondition:** SpecializationId is known
**Flow:**

1. System retrieves SpecializationId
2. System calls `specializationId.GetPathType()`
3. System receives SpecializationPathType (Coherent or Heretical)
4. If Heretical, system can display warning

### UC-002: Get Parent Archetype

**Actor:** System
**Precondition:** SpecializationId is known
**Flow:**

1. System retrieves SpecializationId
2. System calls `specializationId.GetParentArchetype()`
3. System receives parent Archetype enum value
4. System uses this to validate specialization availability

---

## 13. Deliverable Checklist

### Enums

- [ ] `SpecializationPathType` enum with 2 values (Coherent, Heretical)
- [ ] `SpecializationId` enum with 17 values

### Extensions

- [ ] `SpecializationPathTypeExtensions.cs` with RisksCorruption, GetCreationWarning, GetDescription
- [ ] `SpecializationIdExtensions.cs` with GetPathType, GetParentArchetype, IsHeretical, GetDisplayName, GetCorruptionRisk

### Configuration

- [ ] `config/specializations.json` with pathTypes section

### Testing

- [ ] `SpecializationEnumTests.cs` with ~2 unit tests
- [ ] All tests passing

### Documentation

- [ ] XML documentation on all public types
- [ ] Remarks sections with examples

---

## 14. Acceptance Criteria

### Functional

- [ ] `SpecializationPathType` enum has exactly 2 values: Coherent (0) and Heretical (1)
- [ ] `SpecializationId` enum has exactly 17 values (6 Warrior + 4 Skirmisher + 2 Mystic + 5 Adept)
- [ ] Exactly 5 specializations return Heretical from GetPathType()
- [ ] Exactly 12 specializations return Coherent from GetPathType()
- [ ] GetParentArchetype returns correct archetype for all 17 specializations
- [ ] IsHeretical() returns true for Berserkr, GorgeMaw, MyrkGengr, Seidkona, EchoCaller
- [ ] GetDisplayName() returns proper formatted names with diacritics

### Quality

- [ ] Build succeeds with 0 errors/warnings
- [ ] All ~2 unit tests pass
- [ ] XML documentation complete on all public members
- [ ] Configuration file `specializations.json` created with path type mappings

---

## 15. Future Considerations

### Deferred to v0.17.4b

- **SpecializationDefinition Entity**: Full definition with display name, tagline, description
- **SpecialResourceDefinition**: Resource types like Rage, Block Charges

### Deferred to v0.17.4c

- **SpecializationAbilityTier**: Tier 1/2/3 ability structures
- **SpecializationAbility**: Individual ability definitions

### Deferred to v0.17.4d-e

- **ISpecializationProvider**: Service for loading/querying specializations
- **ISpecializationApplicationService**: Service for applying specialization to character

---

## 16. Implementation Notes

### 16.1 Enum Value Stability

Enum integer values are explicitly assigned to ensure database compatibility:

- `SpecializationPathType.Coherent = 0`
- `SpecializationPathType.Heretical = 1`
- `SpecializationId` values 0-16 assigned sequentially

### 16.2 Extension Method Performance

Extension methods use switch expressions for O(1) lookup time. No dictionary or configuration file access required at runtime for basic operations.

### 16.3 Diacritics in Display Names

Display names preserve Old Norse diacritics (ð, ö, ú) for authenticity. Extension method `GetDisplayName()` returns these properly formatted.

---

## 17. Document Metadata

---

_Document Version: 1.0_
_Last Updated: 2026-01-27_
_Author: Claude_
