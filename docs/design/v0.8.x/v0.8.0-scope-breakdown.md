# v0.8.0 Character & Settings - Scope Breakdown

**Version:** 0.8.0
**Theme:** Character & Settings
**Prerequisites:** v0.7.3c Complete (GUI Foundation - Combat UI Components)
**Total Estimated Tests:** ~30 new tests

---

## Executive Summary

The Character & Settings sub-version implements the character creation wizard for step-by-step character setup, a comprehensive settings window with tabbed categories, and a keyboard shortcut system for full keyboard navigation. These components provide essential setup and customization functionality for the GUI experience.

Key focus areas:
- **Character Wizard**: Multi-step character creation with previews
- **Settings Window**: Audio, display, gameplay, and controls configuration
- **Keyboard Shortcuts**: Configurable keybindings with overlay help

The work is divided into **three sub-parts**:

| Part | Name | Focus | Est. Tests |
|------|------|-------|------------|
| v0.8.0a | Character Creation Wizard | Name, race, class, stats, appearance, review | ~12 |
| v0.8.0b | Settings Window | Audio, display, gameplay, controls tabs | ~10 |
| v0.8.0c | Keyboard Shortcuts | Keybinding service, shortcuts overlay, config | ~8 |

---

## Existing Infrastructure

### Already Implemented (from v0.7.x)

| Feature | Location | Notes |
|---------|----------|-------|
| MainMenuWindow | `Views/MainMenuWindow.axaml` | Entry point |
| GameWindow | `Views/GameWindow.axaml` | Game container |
| NavigationService | `Services/NavigationService.cs` | Window navigation |
| BaseTheme | `Themes/BaseTheme.axaml` | Styling |
| SettingsWindow (basic) | `Views/SettingsWindow.axaml` | Placeholder from v0.7.1b |

### Already Implemented (from prior versions)

| Feature | Location | Notes |
|---------|----------|-------|
| RaceDefinition | `Domain/Entities/RaceDefinition.cs` | Race data |
| ClassDefinition | `Domain/Entities/ClassDefinition.cs` | Class data |
| CharacterCreationService | `Application/Services/CharacterCreationService.cs` | TUI creation |
| ISettingsService | `Application/Interfaces/ISettingsService.cs` | Settings management |
| SettingsService | `Application/Services/SettingsService.cs` | Settings implementation |

### Needs Implementation (v0.8.0)

| Feature | Part | Notes |
|---------|------|-------|
| CharacterCreationWizard | v0.8.0a | Multi-step window |
| WizardStepViewModels | v0.8.0a | Step logic |
| SettingsWindow (full) | v0.8.0b | Tabbed categories |
| SettingsTabViewModels | v0.8.0b | Tab logic |
| IKeyboardShortcutService | v0.8.0c | Shortcut interface |
| KeyboardShortcutService | v0.8.0c | Shortcut handling |
| ShortcutOverlayWindow | v0.8.0c | Help overlay |

---

## Feature Analysis & Categorization

### Character Wizard Features

| Feature | Complexity | Dependencies | Assigned Part |
|---------|------------|--------------|---------------|
| Wizard step navigation | Medium | Window framework | **v0.8.0a** |
| Name entry step | Low | Validation | **v0.8.0a** |
| Race selection step | Medium | RaceDefinition | **v0.8.0a** |
| Class selection step | Medium | ClassDefinition | **v0.8.0a** |
| Stat allocation step | High | Point system | **v0.8.0a** |
| Appearance step | Medium | Portrait assets | **v0.8.0a** |
| Review/confirm step | Low | All prior steps | **v0.8.0a** |

### Settings Features

| Feature | Complexity | Dependencies | Assigned Part |
|---------|------------|--------------|---------------|
| Tabbed layout | Low | TabControl | **v0.8.0b** |
| Audio settings | Medium | Audio system | **v0.8.0b** |
| Display settings | Medium | Theme system | **v0.8.0b** |
| Gameplay settings | Low | Config | **v0.8.0b** |
| Controls settings | Medium | Keybindings | **v0.8.0b** |
| Settings persistence | Medium | JSON config | **v0.8.0b** |

### Keyboard Shortcut Features

| Feature | Complexity | Dependencies | Assigned Part |
|---------|------------|--------------|---------------|
| Shortcut service | Medium | Input handling | **v0.8.0c** |
| Configurable bindings | Medium | JSON config | **v0.8.0c** |
| Shortcut overlay | Medium | Popup window | **v0.8.0c** |
| Context-specific shortcuts | Medium | Game state | **v0.8.0c** |

---

## Part Definitions

---

## v0.8.0a: Character Creation Wizard

[v0.8.0a Design Specification](v0.8.0a-design-specification.md)

### Overview

Implement a multi-step character creation wizard that guides players through name entry, race selection, class selection, stat allocation, appearance/portrait selection, and final review. Each step provides previews and validation before allowing progression.

### Scope

**In Scope:**
- `CharacterCreationWizard` window
- `WizardViewModel` with step management
- Step 1: `NameEntryStep` - character name input with validation
- Step 2: `RaceSelectionStep` - race list with details preview
- Step 3: `ClassSelectionStep` - class list with details preview
- Step 4: `StatAllocationStep` - point-buy stat distribution
- Step 5: `AppearanceStep` - portrait/icon selection
- Step 6: `ReviewStep` - summary with confirm button
- Step progress indicator
- Back/Next navigation
- Step validation
- Character creation on confirm

**Out of Scope:**
- Settings window (v0.8.0b)
- Keyboard shortcuts (v0.8.0c)
- Advanced appearance customization (future)

### Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Windows | 1 | `CharacterCreationWizard` |
| ViewModels | 7 | Wizard + 6 step VMs |
| User Controls | 6 | One per step |
| Styles | 1 | `WizardStyles.axaml` |
| Unit Tests | ~12 | Step validation, navigation tests |

### Character Creation Wizard Design

```
STEP 1 - NAME ENTRY:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHARACTER CREATION                                â”‚
â”‚                    Step 1 of 6: Choose Your Name                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚               Enter your character's name:                           â”‚
â”‚                                                                      â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚               â”‚ Thorin                              â”‚               â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                      â”‚
â”‚               âœ“ Name must be 2-20 characters                         â”‚
â”‚               âœ“ Letters, numbers, and spaces allowed                 â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â—â”€â”€â”€â”€â—‹â”€â”€â”€â”€â—‹â”€â”€â”€â”€â—‹â”€â”€â”€â”€â—‹â”€â”€â”€â”€â—‹                                    â”‚ â”‚
â”‚  â”‚  1    2    3    4    5    6    Name  Race  Class  Stats  Look  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚                              [ Next > ]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


STEP 2 - RACE SELECTION:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHARACTER CREATION                                â”‚
â”‚                    Step 2 of 6: Choose Race                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                             â”‚  â”‚ RACE DETAILS                  â”‚ â”‚
â”‚  â”‚   â—‹ Human                   â”‚  â”‚                               â”‚ â”‚
â”‚  â”‚   â— Elf          â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚ ELF                           â”‚ â”‚
â”‚  â”‚   â—‹ Dwarf                   â”‚  â”‚ â•â•â•                           â”‚ â”‚
â”‚  â”‚   â—‹ Halfling                â”‚  â”‚                               â”‚ â”‚
â”‚  â”‚   â—‹ Orc                     â”‚  â”‚ Elves are graceful beings     â”‚ â”‚
â”‚  â”‚                             â”‚  â”‚ with keen senses and natural  â”‚ â”‚
â”‚  â”‚                             â”‚  â”‚ affinity for magic.           â”‚ â”‚
â”‚  â”‚                             â”‚  â”‚                               â”‚ â”‚
â”‚  â”‚                             â”‚  â”‚ STAT BONUSES:                 â”‚ â”‚
â”‚  â”‚                             â”‚  â”‚   +2 Dexterity                â”‚ â”‚
â”‚  â”‚                             â”‚  â”‚   +1 Intelligence             â”‚ â”‚
â”‚  â”‚                             â”‚  â”‚                               â”‚ â”‚
â”‚  â”‚                             â”‚  â”‚ TRAITS:                       â”‚ â”‚
â”‚  â”‚                             â”‚  â”‚   â€¢ Darkvision (60 ft)        â”‚ â”‚
â”‚  â”‚                             â”‚  â”‚   â€¢ Keen Senses (+2 Percep)   â”‚ â”‚
â”‚  â”‚                             â”‚  â”‚   â€¢ Fey Ancestry              â”‚ â”‚
â”‚  â”‚                             â”‚  â”‚                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚  [Progress indicator...]                                             â”‚
â”‚                                                                      â”‚
â”‚                        [ < Back ]  [ Next > ]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


STEP 4 - STAT ALLOCATION:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHARACTER CREATION                                â”‚
â”‚                    Step 4 of 6: Allocate Stats                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  Points Remaining: 8                                                 â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ STAT          BASE   RACIAL   TOTAL   MODIFIER                  â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ Strength      [âˆ’]  10  [+]      10       +0                     â”‚â”‚
â”‚  â”‚ Dexterity     [âˆ’]  14  [+]  +2   16       +3                     â”‚â”‚
â”‚  â”‚ Constitution  [âˆ’]  12  [+]      12       +1                     â”‚â”‚
â”‚  â”‚ Intelligence  [âˆ’]  13  [+]  +1   14       +2                     â”‚â”‚
â”‚  â”‚ Wisdom        [âˆ’]  11  [+]      11       +0                     â”‚â”‚
â”‚  â”‚ Charisma      [âˆ’]  10  [+]      10       +0                     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                      â”‚
â”‚  Point Cost: 8=0, 9=1, 10=2, 11=3, 12=4, 13=5, 14=7, 15=9            â”‚
â”‚                                                                      â”‚
â”‚  [Progress indicator...]                                             â”‚
â”‚                                                                      â”‚
â”‚                        [ < Back ]  [ Next > ]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


STEP 6 - REVIEW:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHARACTER CREATION                                â”‚
â”‚                    Step 6 of 6: Review Character                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                 â”‚â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    THORIN                                        â”‚â”‚
â”‚  â”‚   â”‚  [ğŸ§]   â”‚    Elf Warrior                                   â”‚â”‚
â”‚  â”‚   â”‚ Portrait â”‚                                                  â”‚â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    STATS                                         â”‚â”‚
â”‚  â”‚                   STR: 10 (+0)   DEX: 16 (+3)                   â”‚â”‚
â”‚  â”‚                   CON: 12 (+1)   INT: 14 (+2)                   â”‚â”‚
â”‚  â”‚                   WIS: 11 (+0)   CHA: 10 (+0)                   â”‚â”‚
â”‚  â”‚                                                                 â”‚â”‚
â”‚  â”‚                   TRAITS                                        â”‚â”‚
â”‚  â”‚                   â€¢ Darkvision (60 ft)                          â”‚â”‚
â”‚  â”‚                   â€¢ Keen Senses                                 â”‚â”‚
â”‚  â”‚                   â€¢ Second Wind (Warrior ability)               â”‚â”‚
â”‚  â”‚                                                                 â”‚â”‚
â”‚  â”‚                   STARTING EQUIPMENT                            â”‚â”‚
â”‚  â”‚                   â€¢ Longsword                                   â”‚â”‚
â”‚  â”‚                   â€¢ Chain Mail                                  â”‚â”‚
â”‚  â”‚                   â€¢ Healing Potion x2                           â”‚â”‚
â”‚  â”‚                                                                 â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                      â”‚
â”‚  [Progress indicator...]                                             â”‚
â”‚                                                                      â”‚
â”‚                 [ < Back ]  [ Create Character ]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### WizardViewModel

```csharp
namespace RuneAndRust.Avalonia.ViewModels.Wizard;

public partial class WizardViewModel : ViewModelBase
{
    private readonly ICharacterCreationService _creationService;
    private readonly INavigationService _navigation;
    
    [ObservableProperty]
    private int _currentStep = 1;
    
    [ObservableProperty]
    private int _totalSteps = 6;
    
    [ObservableProperty]
    private WizardStepViewModelBase _currentStepViewModel;
    
    [ObservableProperty]
    private CharacterCreationData _creationData = new();
    
    [ObservableProperty]
    private bool _canGoBack;
    
    [ObservableProperty]
    private bool _canGoNext;
    
    [ObservableProperty]
    private bool _isLastStep;
    
    private readonly List<WizardStepViewModelBase> _steps;
    
    public WizardViewModel(
        ICharacterCreationService creationService,
        INavigationService navigation,
        IRaceDefinitionService raceService,
        IClassDefinitionService classService)
    {
        _creationService = creationService;
        _navigation = navigation;
        
        _steps = new List<WizardStepViewModelBase>
        {
            new NameEntryStepViewModel(CreationData),
            new RaceSelectionStepViewModel(CreationData, raceService),
            new ClassSelectionStepViewModel(CreationData, classService),
            new StatAllocationStepViewModel(CreationData),
            new AppearanceStepViewModel(CreationData),
            new ReviewStepViewModel(CreationData)
        };
        
        CurrentStepViewModel = _steps[0];
        UpdateNavigationState();
    }
    
    [RelayCommand(CanExecute = nameof(CanGoBack))]
    private void GoBack()
    {
        if (CurrentStep > 1)
        {
            CurrentStep--;
            CurrentStepViewModel = _steps[CurrentStep - 1];
            UpdateNavigationState();
        }
    }
    
    [RelayCommand(CanExecute = nameof(CanGoNext))]
    private async Task GoNextAsync()
    {
        if (!CurrentStepViewModel.Validate())
            return;
        
        if (IsLastStep)
        {
            await CreateCharacterAsync();
        }
        else
        {
            CurrentStep++;
            CurrentStepViewModel = _steps[CurrentStep - 1];
            UpdateNavigationState();
        }
    }
    
    private async Task CreateCharacterAsync()
    {
        var player = await _creationService.CreateCharacterAsync(CreationData);
        _navigation.NavigateTo<GameWindow>(player);
    }
    
    private void UpdateNavigationState()
    {
        CanGoBack = CurrentStep > 1;
        CanGoNext = CurrentStepViewModel.IsValid;
        IsLastStep = CurrentStep == TotalSteps;
    }
}
```

### Acceptance Criteria

- [ ] Wizard opens from main menu "New Game"
- [ ] Name step validates character name
- [ ] Race step shows all available races
- [ ] Race selection shows preview details
- [ ] Class step shows all available classes
- [ ] Class selection shows abilities preview
- [ ] Stat allocation uses point-buy system
- [ ] Points remaining updates correctly
- [ ] Appearance step shows portrait options
- [ ] Review step shows complete character
- [ ] Create Character starts new game
- [ ] Back/Next navigation works correctly
- [ ] ~12 unit tests pass

---

## v0.8.0b: Settings Window

[v0.8.0b Design Specification](v0.8.0b-design-specification.md)

### Overview

Implement a comprehensive settings window with tabbed categories for audio, display, gameplay, and controls configuration. Settings persist across sessions and apply in real-time where possible.

### Scope

**In Scope:**
- `SettingsWindow` full implementation
- `SettingsWindowViewModel` with tab management
- Audio tab: master, music, SFX volume sliders
- Display tab: theme, font size, animation toggle
- Gameplay tab: difficulty, auto-save, hints
- Controls tab: keybinding list with rebind
- Apply/Cancel/OK buttons
- Settings persistence to JSON
- Real-time preview where applicable

**Out of Scope:**
- Character wizard (v0.8.0a)
- Keyboard shortcuts service (v0.8.0c)
- Advanced graphics options (future)

### Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Windows | 1 | `SettingsWindow` (expanded) |
| ViewModels | 5 | Window + 4 tab VMs |
| User Controls | 4 | One per tab |
| Configuration | 1 | `settings.json` schema |
| Unit Tests | ~10 | Settings persistence, validation tests |

### Settings Window Design

```
AUDIO TAB:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SETTINGS                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            â”‚                                                         â”‚
â”‚ >[Audio]   â”‚  AUDIO SETTINGS                                        â”‚
â”‚   Display  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚   Gameplay â”‚                                                         â”‚
â”‚   Controls â”‚  Master Volume                                          â”‚
â”‚            â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  75%            â”‚
â”‚            â”‚                                                         â”‚
â”‚            â”‚  Music Volume                                           â”‚
â”‚            â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  50%            â”‚
â”‚            â”‚                                                         â”‚
â”‚            â”‚  Sound Effects                                          â”‚
â”‚            â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  85%            â”‚
â”‚            â”‚                                                         â”‚
â”‚            â”‚  â˜‘ Enable Sound Effects                                 â”‚
â”‚            â”‚  â˜ Mute All Audio                                       â”‚
â”‚            â”‚                                                         â”‚
â”‚            â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      [ Apply ]  [ Cancel ]  [ OK ]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


DISPLAY TAB:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SETTINGS                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            â”‚                                                         â”‚
â”‚   Audio    â”‚  DISPLAY SETTINGS                                      â”‚
â”‚ >[Display] â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚   Gameplay â”‚                                                         â”‚
â”‚   Controls â”‚  Theme                                                  â”‚
â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚            â”‚  â”‚ Dark Fantasy (Default)                    â–¼  â”‚      â”‚
â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚            â”‚                                                         â”‚
â”‚            â”‚  Font Size                                              â”‚
â”‚            â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  100%   â”‚
â”‚            â”‚  Range: 80% - 150%                                      â”‚
â”‚            â”‚                                                         â”‚
â”‚            â”‚  â˜‘ Enable Combat Animations                             â”‚
â”‚            â”‚  â˜‘ Enable Room Transition Effects                       â”‚
â”‚            â”‚  â˜ High Contrast Mode                                   â”‚
â”‚            â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      [ Apply ]  [ Cancel ]  [ OK ]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


GAMEPLAY TAB:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SETTINGS                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            â”‚                                                         â”‚
â”‚   Audio    â”‚  GAMEPLAY SETTINGS                                     â”‚
â”‚   Display  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚ >[Gameplay]â”‚                                                         â”‚
â”‚   Controls â”‚  Difficulty                                             â”‚
â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚            â”‚  â”‚ Normal                                    â–¼  â”‚      â”‚
â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚            â”‚  Easy: +20% damage dealt, -20% damage taken             â”‚
â”‚            â”‚  Normal: Standard experience                            â”‚
â”‚            â”‚  Hard: -20% damage dealt, +20% damage taken             â”‚
â”‚            â”‚                                                         â”‚
â”‚            â”‚  Auto-Save Frequency                                    â”‚
â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚            â”‚  â”‚ Every 5 minutes                           â–¼  â”‚      â”‚
â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚            â”‚                                                         â”‚
â”‚            â”‚  â˜‘ Show Combat Tooltips                                 â”‚
â”‚            â”‚  â˜‘ Show Tutorial Hints                                  â”‚
â”‚            â”‚  â˜ Confirm Before Dangerous Actions                     â”‚
â”‚            â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      [ Apply ]  [ Cancel ]  [ OK ]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


CONTROLS TAB:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SETTINGS                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            â”‚                                                         â”‚
â”‚   Audio    â”‚  CONTROLS                                              â”‚
â”‚   Display  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚   Gameplay â”‚                                                         â”‚
â”‚ >[Controls]â”‚  GLOBAL                                                â”‚
â”‚            â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚            â”‚  Help / Shortcuts      [F1]           [Rebind]         â”‚
â”‚            â”‚  Quick Save            [F5]           [Rebind]         â”‚
â”‚            â”‚  Quick Load            [F9]           [Rebind]         â”‚
â”‚            â”‚  Close Window          [Escape]       [Rebind]         â”‚
â”‚            â”‚                                                         â”‚
â”‚            â”‚  GAME                                                  â”‚
â”‚            â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚            â”‚  Toggle Inventory      [I]            [Rebind]         â”‚
â”‚            â”‚  Toggle Map            [M]            [Rebind]         â”‚
â”‚            â”‚  Toggle Quest Log      [J]            [Rebind]         â”‚
â”‚            â”‚  Toggle Character      [C]            [Rebind]         â”‚
â”‚            â”‚                                                         â”‚
â”‚            â”‚           [ Reset to Defaults ]                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      [ Apply ]  [ Cancel ]  [ OK ]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### SettingsWindowViewModel

```csharp
namespace RuneAndRust.Avalonia.ViewModels;

public partial class SettingsWindowViewModel : ViewModelBase
{
    private readonly ISettingsService _settingsService;
    private readonly GameSettings _originalSettings;
    
    [ObservableProperty]
    private AudioSettingsTabViewModel _audioTab;
    
    [ObservableProperty]
    private DisplaySettingsTabViewModel _displayTab;
    
    [ObservableProperty]
    private GameplaySettingsTabViewModel _gameplayTab;
    
    [ObservableProperty]
    private ControlsSettingsTabViewModel _controlsTab;
    
    [ObservableProperty]
    private int _selectedTabIndex;
    
    [ObservableProperty]
    private bool _hasChanges;
    
    public SettingsWindowViewModel(ISettingsService settingsService)
    {
        _settingsService = settingsService;
        _originalSettings = settingsService.GetSettings().Clone();
        
        var settings = settingsService.GetSettings();
        AudioTab = new AudioSettingsTabViewModel(settings.Audio, OnSettingChanged);
        DisplayTab = new DisplaySettingsTabViewModel(settings.Display, OnSettingChanged);
        GameplayTab = new GameplaySettingsTabViewModel(settings.Gameplay, OnSettingChanged);
        ControlsTab = new ControlsSettingsTabViewModel(settings.Controls, OnSettingChanged);
    }
    
    [RelayCommand]
    private void Apply()
    {
        var settings = BuildSettings();
        _settingsService.SaveSettings(settings);
        HasChanges = false;
    }
    
    [RelayCommand]
    private void Cancel()
    {
        // Revert to original settings
        _settingsService.SaveSettings(_originalSettings);
        CloseWindow();
    }
    
    [RelayCommand]
    private void Ok()
    {
        Apply();
        CloseWindow();
    }
    
    private void OnSettingChanged()
    {
        HasChanges = true;
    }
}
```

### Acceptance Criteria

- [ ] Settings window opens from menu
- [ ] Four tabs display correctly
- [ ] Audio sliders adjust volumes
- [ ] Mute checkbox works
- [ ] Theme dropdown changes theme
- [ ] Font size slider adjusts text
- [ ] Difficulty dropdown saves
- [ ] Auto-save frequency saves
- [ ] Keybinding list shows current bindings
- [ ] Rebind captures new key
- [ ] Reset to Defaults works
- [ ] Apply saves without closing
- [ ] Cancel reverts changes
- [ ] OK saves and closes
- [ ] ~10 unit tests pass

---

## v0.8.0c: Keyboard Shortcuts

[v0.8.0c Design Specification](v0.8.0c-design-specification.md)

### Overview

Implement a keyboard shortcut service that handles configurable keybindings with context-specific shortcuts (global, game, combat). Includes a shortcut overlay (F1) that displays available bindings.

### Scope

**In Scope:**
- `IKeyboardShortcutService` interface
- `KeyboardShortcutService` implementation
- Global context shortcuts (F1, F5, F9, Escape)
- Game context shortcuts (I, M, J, C, 1-9)
- Combat context shortcuts (A, M, Space, Tab)
- Keybinding configuration file (`keybindings.json`)
- `ShortcutOverlayWindow` (F1 help)
- Context detection
- Shortcut registration/unregistration
- Custom keybinding support
- Conflict detection

**Out of Scope:**
- Character wizard (v0.8.0a)
- Settings window (v0.8.0b)
- Macro recording (future)

### Key Deliverables

| Type | Count | Details |
|------|-------|---------|
| Interfaces | 1 | `IKeyboardShortcutService` |
| Services | 1 | `KeyboardShortcutService` |
| Windows | 1 | `ShortcutOverlayWindow` |
| Configuration | 1 | `keybindings.json` |
| Unit Tests | ~8 | Shortcut handling, context tests |

### Keyboard Shortcut Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  KEYBOARD SHORTCUT ARCHITECTURE                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Key Input                    Shortcut Service              Actions
    â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€
    
    [Key Press] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â””â”€â”€â–¶â”‚ KeyboardShortcutService â”‚
                                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                  â”‚ CurrentContext: Game    â”‚
                                  â”‚ Bindings:               â”‚
                                  â”‚   Global:               â”‚
                                  â”‚     F1 â†’ show-help      â”‚
                                  â”‚     F5 â†’ quick-save     â”‚
                                  â”‚   Game:                 â”‚
                                  â”‚     I â†’ toggle-inventoryâ”‚
                                  â”‚     M â†’ toggle-map      â”‚
                                  â”‚   Combat:               â”‚
                                  â”‚     A â†’ attack-mode     â”‚
                                  â”‚     Space â†’ end-turn    â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                         â–¼                         â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  Check Global â”‚       â”‚  Check Contextâ”‚       â”‚  Execute      â”‚
           â”‚  Bindings     â”‚       â”‚  Bindings     â”‚       â”‚  Action       â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### IKeyboardShortcutService Interface

```csharp
namespace RuneAndRust.Avalonia.Services;

/// <summary>
/// Manages keyboard shortcuts and keybindings.
/// </summary>
public interface IKeyboardShortcutService
{
    /// <summary>Gets or sets the current context.</summary>
    ShortcutContext CurrentContext { get; set; }
    
    /// <summary>Processes a key press.</summary>
    bool ProcessKeyDown(KeyEventArgs e);
    
    /// <summary>Registers an action for a shortcut.</summary>
    void RegisterAction(string actionId, Action action);
    
    /// <summary>Unregisters an action.</summary>
    void UnregisterAction(string actionId);
    
    /// <summary>Gets the binding for an action.</summary>
    KeyGesture? GetBinding(string actionId);
    
    /// <summary>Sets a custom binding for an action.</summary>
    void SetBinding(string actionId, KeyGesture gesture);
    
    /// <summary>Resets all bindings to defaults.</summary>
    void ResetToDefaults();
    
    /// <summary>Gets all bindings for current context.</summary>
    IReadOnlyDictionary<string, KeyGesture> GetBindingsForContext(ShortcutContext context);
    
    /// <summary>Checks for binding conflicts.</summary>
    bool HasConflict(string actionId, KeyGesture gesture);
}

public enum ShortcutContext
{
    Global,
    MainMenu,
    Game,
    Combat,
    Dialogue,
    Puzzle
}
```

### KeyboardShortcutService Implementation

```csharp
namespace RuneAndRust.Avalonia.Services;

public class KeyboardShortcutService : IKeyboardShortcutService
{
    private readonly Dictionary<string, Action> _actions = new();
    private readonly Dictionary<ShortcutContext, Dictionary<KeyGesture, string>> _bindings = new();
    private readonly ILogger<KeyboardShortcutService> _logger;
    
    public ShortcutContext CurrentContext { get; set; } = ShortcutContext.Game;
    
    public KeyboardShortcutService(ILogger<KeyboardShortcutService> logger)
    {
        _logger = logger;
        LoadDefaultBindings();
    }
    
    public bool ProcessKeyDown(KeyEventArgs e)
    {
        var gesture = new KeyGesture(e.Key, e.KeyModifiers);
        
        // Check global bindings first
        if (TryExecuteBinding(ShortcutContext.Global, gesture))
        {
            e.Handled = true;
            return true;
        }
        
        // Check current context bindings
        if (TryExecuteBinding(CurrentContext, gesture))
        {
            e.Handled = true;
            return true;
        }
        
        return false;
    }
    
    private bool TryExecuteBinding(ShortcutContext context, KeyGesture gesture)
    {
        if (!_bindings.TryGetValue(context, out var contextBindings))
            return false;
        
        if (!contextBindings.TryGetValue(gesture, out var actionId))
            return false;
        
        if (!_actions.TryGetValue(actionId, out var action))
        {
            _logger.LogWarning("Action not registered: {ActionId}", actionId);
            return false;
        }
        
        _logger.LogDebug("Executing shortcut: {ActionId} ({Gesture})", actionId, gesture);
        action();
        return true;
    }
    
    private void LoadDefaultBindings()
    {
        // Global
        AddBinding(ShortcutContext.Global, Key.F1, "show-help");
        AddBinding(ShortcutContext.Global, Key.F5, "quick-save");
        AddBinding(ShortcutContext.Global, Key.F9, "quick-load");
        AddBinding(ShortcutContext.Global, Key.Escape, "close-window");
        
        // Game
        AddBinding(ShortcutContext.Game, Key.I, "toggle-inventory");
        AddBinding(ShortcutContext.Game, Key.M, "toggle-map");
        AddBinding(ShortcutContext.Game, Key.J, "toggle-quest-log");
        AddBinding(ShortcutContext.Game, Key.C, "toggle-character");
        
        // Combat
        AddBinding(ShortcutContext.Combat, Key.A, "attack-mode");
        AddBinding(ShortcutContext.Combat, Key.M, "move-mode");
        AddBinding(ShortcutContext.Combat, Key.Space, "end-turn");
        AddBinding(ShortcutContext.Combat, Key.Tab, "next-target");
    }
}
```

### Shortcut Overlay Design

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      KEYBOARD SHORTCUTS                              â”‚
â”‚                      Press any key to close                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  GLOBAL                                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚  F1              Show this help                                      â”‚
â”‚  F5              Quick Save                                          â”‚
â”‚  F9              Quick Load                                          â”‚
â”‚  Escape          Close window / Cancel                               â”‚
â”‚                                                                      â”‚
â”‚  GAME                                                                â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚  I               Toggle Inventory                                    â”‚
â”‚  M               Toggle Map                                          â”‚
â”‚  J               Toggle Quest Log                                    â”‚
â”‚  C               Toggle Character Sheet                              â”‚
â”‚  1-9             Use quick slot item                                 â”‚
â”‚                                                                      â”‚
â”‚  COMBAT                                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚  A               Attack Mode                                         â”‚
â”‚  M               Move Mode                                           â”‚
â”‚  B               Ability Menu                                        â”‚
â”‚  D               Defend                                              â”‚
â”‚  Space           End Turn                                            â”‚
â”‚  Tab             Cycle Targets                                       â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Keybindings Configuration

```json
{
  "$schema": "./schemas/keybindings.schema.json",
  "version": "1.0",
  "bindings": {
    "global": {
      "show-help": "F1",
      "quick-save": "F5",
      "quick-load": "F9",
      "close-window": "Escape"
    },
    "game": {
      "toggle-inventory": "I",
      "toggle-map": "M",
      "toggle-quest-log": "J",
      "toggle-character": "C",
      "quick-slot-1": "1",
      "quick-slot-2": "2",
      "quick-slot-3": "3"
    },
    "combat": {
      "attack-mode": "A",
      "move-mode": "M",
      "ability-menu": "B",
      "defend": "D",
      "end-turn": "Space",
      "next-target": "Tab",
      "previous-target": "Shift+Tab"
    }
  }
}
```

### Acceptance Criteria

- [ ] F1 opens shortcut overlay
- [ ] Overlay shows all bindings by context
- [ ] Any key closes overlay
- [ ] Global shortcuts work everywhere
- [ ] Game shortcuts work in game context
- [ ] Combat shortcuts work in combat
- [ ] I toggles inventory panel
- [ ] M toggles map panel
- [ ] Custom keybindings persist
- [ ] Conflict detection prevents duplicates
- [ ] Reset to Defaults works
- [ ] ~8 unit tests pass

---

## Dependencies & Prerequisites

```
v0.7.3c (Combat UI Components) - REQUIRED
    â”‚
    â””â”€â”€ GUI Foundation complete â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                                          â”‚
v0.8.0 (Character & Settings)                                             â”‚
    â”‚                                                                     â”‚
    â”œâ”€â”€ v0.8.0a: Character Creation Wizard â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚       Dependencies: MainMenuWindow, NavigationService               â”‚
    â”‚       Provides: CharacterCreationWizard, WizardViewModel            â”‚
    â”‚                                                                     â”‚
    â”œâ”€â”€ v0.8.0b: Settings Window â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚       Dependencies: SettingsService, v0.8.0a (theme may change)     â”‚
    â”‚       Provides: SettingsWindow, settings tabs                       â”‚
    â”‚                                                                     â”‚
    â””â”€â”€ v0.8.0c: Keyboard Shortcuts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            Dependencies: Input handling, v0.8.0b (controls tab)
            Provides: IKeyboardShortcutService, ShortcutOverlayWindow
```

---

## Estimated Effort Summary

| Part | New Files | Modified Files | Est. Tests | Complexity |
|------|-----------|----------------|------------|------------|
| v0.8.0a | ~9 | ~2 | ~12 | High |
| v0.8.0b | ~6 | ~2 | ~10 | Medium |
| v0.8.0c | ~4 | ~2 | ~8 | Medium |
| **Total** | **~19** | **~6** | **~30** | |

---

## Risk Assessment

| Risk | Impact | Probability | Mitigation |
|------|--------|-------------|------------|
| Wizard state complexity | Medium | Medium | Clear step validation |
| Settings migration | Low | Low | Version settings schema |
| Key capture conflicts | Medium | Medium | Dedicated capture mode |
| Context detection errors | Low | Low | Clear context boundaries |

---

## Design Decisions (Confirmed)

### Character Wizard

| Decision | Value | Notes |
|----------|-------|-------|
| **Step Count** | 6 steps | Complete but not overwhelming |
| **Navigation** | Back/Next | Linear with back support |
| **Stat System** | Point-buy | Configurable points |
| **Portraits** | Pre-defined | Asset-based selection |

### Settings Window

| Decision | Value | Notes |
|----------|-------|-------|
| **Layout** | Tabbed | Category-based |
| **Apply Behavior** | Real-time preview | Immediate feedback |
| **Persistence** | JSON | `settings.json` |

### Keyboard Shortcuts

| Decision | Value | Notes |
|----------|-------|-------|
| **Contexts** | Global, Game, Combat | Plus Dialogue, Puzzle |
| **Global Priority** | Always checked first | Override context |
| **Conflict Handling** | Prevent duplicates | Warning on conflict |

---

## Next Steps

1. **Review & Approve** - Confirm scope breakdown
2. **v0.8.0a Design Spec** - Create detailed design for Character Wizard
3. **v0.8.0a Implementation** - Build wizard window and steps
4. **v0.8.0b Design Spec** - Create specification for Settings Window
5. **v0.8.0b Implementation** - Build settings tabs and persistence
6. **v0.8.0c Design Spec** - Create specification for Keyboard Shortcuts
7. **v0.8.0c Implementation** - Build shortcut service and overlay

---

*This scope breakdown provides a structured approach to implementing v0.8.0 Character & Settings. The character wizard enables new game setup, settings provide customization, and keyboard shortcuts enable full keyboard navigation throughout the GUI.*
