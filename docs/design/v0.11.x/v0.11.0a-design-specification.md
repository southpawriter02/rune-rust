# v0.11.0a Design Specification: Resource Definitions

**Version:** 0.11.0a
**Parent:** v0.11.0 (Resources & Gathering)
**Prerequisites:** v0.10.4c Complete (Monster Groups)
**Status:** Design Complete
**Estimated Unit Tests:** ~8

---

## Table of Contents

1. [Executive Summary](#1-executive-summary)
2. [Feature Overview](#2-feature-overview)
3. [Architecture](#3-architecture)
4. [ResourceCategory Enum](#4-resourcecategory-enum)
5. [ResourceQuality Enum](#5-resourcequality-enum)
6. [ResourceDefinition Entity](#6-resourcedefinition-entity)
7. [IResourceProvider Interface](#7-iresourceprovider-interface)
8. [ResourceProvider Implementation](#8-resourceprovider-implementation)
9. [Configuration Schema](#9-configuration-schema)
10. [Configuration File](#10-configuration-file)
11. [Logging Specifications](#11-logging-specifications)
12. [Unit Testing Requirements](#12-unit-testing-requirements)
13. [Use Cases](#13-use-cases)
14. [Deliverable Checklist](#14-deliverable-checklist)
15. [Acceptance Criteria](#15-acceptance-criteria)
16. [Dependencies](#16-dependencies)
17. [Future Considerations](#17-future-considerations)

---

## 1. Executive Summary

### Purpose

Define the resource data model for gatherable items including resource definitions, categories, and quality tiers. Resources are loaded from JSON configuration and extend the item system with stacking and category classification. This establishes the foundation for the v0.11.0 crafting and gathering system.

### Key Deliverables

| Category | Items |
|----------|-------|
| **Domain Entities** | `ResourceDefinition` |
| **Domain Enums** | `ResourceCategory`, `ResourceQuality` |
| **Extension Methods** | `ResourceQualityExtensions` |
| **Interfaces** | `IResourceProvider` |
| **Infrastructure** | `ResourceProvider` |
| **Configuration** | `resources.json`, `resources.schema.json` |
| **Tests** | ~8 unit tests |

### Architectural Significance

This version establishes the **Resource Definition Pattern** that will be used throughout the crafting system:
- Resources are templates loaded from JSON configuration
- Categories enable crafting recipe requirements by type
- Quality tiers affect resource value and crafting outcomes
- Stacking behavior allows efficient inventory management

---

## 2. Feature Overview

```
v0.11.0a Features
├── ResourceCategory Enum
│   ├── Ore (mined from rock)
│   ├── Herb (gathered from plants)
│   ├── Leather (harvested from creatures)
│   ├── Gem (found in veins or drops)
│   ├── Wood (cut from trees)
│   └── Cloth (crafted or found)
│
├── ResourceQuality Enum
│   ├── Common (1.0x value)
│   ├── Fine (1.5x value)
│   ├── Rare (3.0x value)
│   └── Legendary (10.0x value)
│
├── ResourceQualityExtensions
│   ├── GetValueMultiplier()
│   └── GetCraftingBonus()
│
├── ResourceDefinition Entity
│   ├── ResourceId (string key)
│   ├── Name, Description
│   ├── Category (ResourceCategory)
│   ├── Quality (ResourceQuality)
│   ├── BaseValue (int)
│   ├── StackSize (int)
│   ├── IconPath (optional)
│   ├── GetActualValue() method
│   └── CanStackWith() method
│
├── IResourceProvider Interface
│   ├── GetResource(resourceId)
│   ├── GetAllResources()
│   ├── GetResourcesByCategory(category)
│   ├── GetResourcesByQuality(quality)
│   └── Exists(resourceId)
│
├── ResourceProvider Implementation
│   ├── JSON loading
│   ├── Validation
│   └── Caching
│
└── Configuration
    ├── resources.json (16 sample resources)
    └── resources.schema.json (validation)
```

---

## 3. Architecture

```
┌─────────────────────────────────────────────────────────────────────────┐
│                   RESOURCE DEFINITION ARCHITECTURE                       │
└─────────────────────────────────────────────────────────────────────────┘

     Configuration                        Domain
     ─────────────                        ──────

   resources.json                ┌─────────────────────────────┐
   ┌─────────────────┐           │     ResourceDefinition      │
   │ {                │           ├─────────────────────────────┤
   │   "id": "iron-", │  ─────▶   │ + Id: Guid                  │
   │   "name": ...,   │           │ + ResourceId: string        │
   │   "category":...,│           │ + Name: string              │
   │   "quality": ... │           │ + Description: string       │
   │ }                │           │ + Category: ResourceCategory│
   └─────────────────┘           │ + Quality: ResourceQuality  │
                                  │ + BaseValue: int            │
                                  │ + StackSize: int            │
                                  │ + IconPath: string?         │
                                  │ + GetActualValue(): int     │
                                  │ + CanStackWith(): bool      │
                                  └─────────────────────────────┘


┌─────────────────────────────────────────────────────────────────────────┐
│                         LAYER DIAGRAM                                    │
└─────────────────────────────────────────────────────────────────────────┘

    ┌─────────────────────────────────────────────────────────────────┐
    │                      PRESENTATION LAYER                          │
    │                        (v0.13.x UI)                              │
    └─────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                      APPLICATION LAYER                           │
    ├─────────────────────────────────────────────────────────────────┤
    │  ┌─────────────────────────────────────────────────────────┐    │
    │  │              IResourceProvider (Interface)               │    │
    │  ├─────────────────────────────────────────────────────────┤    │
    │  │ + GetResource(resourceId): ResourceDefinition?          │    │
    │  │ + GetAllResources(): IReadOnlyList<ResourceDefinition>  │    │
    │  │ + GetResourcesByCategory(cat): IReadOnlyList<...>       │    │
    │  │ + GetResourcesByQuality(qual): IReadOnlyList<...>       │    │
    │  │ + Exists(resourceId): bool                              │    │
    │  └─────────────────────────────────────────────────────────┘    │
    └─────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                        DOMAIN LAYER                              │
    ├─────────────────────────────────────────────────────────────────┤
    │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
    │  │ResourceDefinition│  │ResourceCategory │  │ ResourceQuality │  │
    │  │    (Entity)     │  │     (Enum)      │  │     (Enum)      │  │
    │  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
    └─────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    INFRASTRUCTURE LAYER                          │
    ├─────────────────────────────────────────────────────────────────┤
    │  ┌─────────────────────────────────────────────────────────┐    │
    │  │           ResourceProvider (Implementation)              │    │
    │  ├─────────────────────────────────────────────────────────┤    │
    │  │ - _resources: Dictionary<string, ResourceDefinition>    │    │
    │  │ - _logger: ILogger<ResourceProvider>                    │    │
    │  │                                                         │    │
    │  │ + LoadResources(configProvider)                         │    │
    │  │ + GetResource(resourceId)                               │    │
    │  │ + GetAllResources()                                     │    │
    │  │ + GetResourcesByCategory(category)                      │    │
    │  │ + GetResourcesByQuality(quality)                        │    │
    │  │ + Exists(resourceId)                                    │    │
    │  └─────────────────────────────────────────────────────────┘    │
    └─────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                     CONFIGURATION LAYER                          │
    ├─────────────────────────────────────────────────────────────────┤
    │  ┌──────────────────────┐  ┌──────────────────────────────┐     │
    │  │   resources.json     │  │  resources.schema.json       │     │
    │  │   (16 resources)     │  │  (JSON Schema validation)    │     │
    │  └──────────────────────┘  └──────────────────────────────┘     │
    └─────────────────────────────────────────────────────────────────┘
```

### Resource Category Diagram

```
    RESOURCE CATEGORIES
    ────────────────────

    ORE             HERB            LEATHER         GEM
    ───             ────            ───────         ───
    ┌─────┐        ┌─────┐         ┌─────┐        ┌─────┐
    │ �ite │        │  H  │         │  L  │        │  G  │
    │ Ore │        │Herb │         │Hide │        │ Gem │
    └─────┘        └─────┘         └─────┘        └─────┘

    - Iron Ore     - Healing Herb  - Leather       - Ruby
    - Copper Ore   - Mana Leaf     - Thick Hide    - Sapphire
    - Gold Ore     - Poison Root   - Dragon Scale  - Emerald
    - Mithril Ore  - Firebloom     - Demon Hide    - Diamond

    WOOD            CLOTH
    ────            ─────
    ┌─────┐        ┌─────┐
    │  W  │        │  C  │
    │Wood │        │Cloth│
    └─────┘        └─────┘

    - Oak Wood     - Linen
    - Ash Wood     - Silk
    - Ironwood     - Enchanted Silk
```

### Quality Tiers Diagram

```
    QUALITY TIERS
    ─────────────

    ┌──────────┬───────────┬──────────────┬───────────────┐
    │ Quality  │ Modifier  │ Value Mult   │ Crafting Bonus│
    ├──────────┼───────────┼──────────────┼───────────────┤
    │ Common   │ +0        │ 1.0x         │ +0            │
    │ Fine     │ +1        │ 1.5x         │ +1            │
    │ Rare     │ +2        │ 3.0x         │ +2            │
    │ Legendary│ +3        │ 10.0x        │ +3            │
    └──────────┴───────────┴──────────────┴───────────────┘

    QUALITY VALUE FLOW
    ──────────────────

    BaseValue (5) ─────▶ Quality (Fine) ─────▶ ActualValue (7)
                              │
                              │ GetValueMultiplier()
                              │ = 1.5
                              ▼
                         5 * 1.5 = 7.5 → 7 (int)
```

---

## 4. ResourceCategory Enum

**File:** `src/Core/RuneAndRust.Domain/Enums/ResourceCategory.cs`

```csharp
namespace RuneAndRust.Domain.Enums;

/// <summary>
/// Categories of gatherable resources in the game world.
/// </summary>
/// <remarks>
/// Each category represents a distinct source of materials that can be
/// gathered from the environment or harvested from creatures. Categories
/// are used to filter recipe requirements and organize inventory.
/// </remarks>
public enum ResourceCategory
{
    /// <summary>
    /// Metal ores mined from rock formations and veins.
    /// Used primarily in weapon and armor crafting.
    /// </summary>
    /// <example>Iron Ore, Copper Ore, Gold Ore, Mithril Ore</example>
    Ore,

    /// <summary>
    /// Plants and herbs gathered from the environment.
    /// Used primarily in alchemy and potion crafting.
    /// </summary>
    /// <example>Healing Herb, Mana Leaf, Firebloom, Poison Root</example>
    Herb,

    /// <summary>
    /// Hides and materials harvested from creatures.
    /// Used primarily in armor and accessory crafting.
    /// </summary>
    /// <example>Leather, Thick Hide, Dragon Scale, Demon Hide</example>
    Leather,

    /// <summary>
    /// Precious stones found in veins or as monster drops.
    /// Used primarily in jewelry and enchanting.
    /// </summary>
    /// <example>Ruby, Sapphire, Emerald, Diamond</example>
    Gem,

    /// <summary>
    /// Timber cut from trees and wooden structures.
    /// Used primarily in weapon handles and construction.
    /// </summary>
    /// <example>Oak Wood, Ash Wood, Ironwood</example>
    Wood,

    /// <summary>
    /// Fabrics either crafted or found as loot.
    /// Used primarily in cloth armor and bags.
    /// </summary>
    /// <example>Linen, Silk, Enchanted Silk</example>
    Cloth
}
```

---

## 5. ResourceQuality Enum

**File:** `src/Core/RuneAndRust.Domain/Enums/ResourceQuality.cs`

```csharp
namespace RuneAndRust.Domain.Enums;

/// <summary>
/// Quality tiers for resources affecting their value and crafting outcomes.
/// </summary>
/// <remarks>
/// Higher quality resources are rarer, more valuable, and provide bonuses
/// when used in crafting. Quality affects both the sale value and the
/// potential quality of crafted items.
/// </remarks>
public enum ResourceQuality
{
    /// <summary>
    /// Standard quality resources. No bonuses.
    /// Most commonly found through basic gathering.
    /// </summary>
    Common,

    /// <summary>
    /// Above-average quality. +1 crafting bonus, 1.5x value.
    /// Found through skilled gathering or in better locations.
    /// </summary>
    Fine,

    /// <summary>
    /// High quality, valuable resources. +2 crafting bonus, 3x value.
    /// Found in difficult locations or from challenging creatures.
    /// </summary>
    Rare,

    /// <summary>
    /// Exceptional, legendary quality. +3 crafting bonus, 10x value.
    /// Extremely rare, often from unique sources.
    /// </summary>
    Legendary
}

/// <summary>
/// Extension methods for <see cref="ResourceQuality"/>.
/// </summary>
public static class ResourceQualityExtensions
{
    /// <summary>
    /// Gets the value multiplier for this quality tier.
    /// </summary>
    /// <param name="quality">The resource quality.</param>
    /// <returns>The multiplier applied to base value.</returns>
    /// <example>
    /// var multiplier = ResourceQuality.Fine.GetValueMultiplier(); // 1.5f
    /// var actualValue = (int)(baseValue * multiplier);
    /// </example>
    public static float GetValueMultiplier(this ResourceQuality quality) => quality switch
    {
        ResourceQuality.Common => 1.0f,
        ResourceQuality.Fine => 1.5f,
        ResourceQuality.Rare => 3.0f,
        ResourceQuality.Legendary => 10.0f,
        _ => 1.0f
    };

    /// <summary>
    /// Gets the crafting bonus provided by this quality tier.
    /// </summary>
    /// <param name="quality">The resource quality.</param>
    /// <returns>The bonus added to crafting rolls when using this quality.</returns>
    /// <example>
    /// var bonus = ResourceQuality.Rare.GetCraftingBonus(); // 2
    /// var craftRoll = diceRoll + skillModifier + bonus;
    /// </example>
    public static int GetCraftingBonus(this ResourceQuality quality) => quality switch
    {
        ResourceQuality.Common => 0,
        ResourceQuality.Fine => 1,
        ResourceQuality.Rare => 2,
        ResourceQuality.Legendary => 3,
        _ => 0
    };

    /// <summary>
    /// Gets the display color for this quality tier (for UI rendering).
    /// </summary>
    /// <param name="quality">The resource quality.</param>
    /// <returns>A hex color string for display.</returns>
    public static string GetDisplayColor(this ResourceQuality quality) => quality switch
    {
        ResourceQuality.Common => "#FFFFFF",    // White
        ResourceQuality.Fine => "#1EFF00",      // Green
        ResourceQuality.Rare => "#0070DD",      // Blue
        ResourceQuality.Legendary => "#FF8000", // Orange
        _ => "#FFFFFF"
    };

    /// <summary>
    /// Gets the display name with proper formatting.
    /// </summary>
    /// <param name="quality">The resource quality.</param>
    /// <returns>Human-readable quality name.</returns>
    public static string GetDisplayName(this ResourceQuality quality) => quality switch
    {
        ResourceQuality.Common => "Common",
        ResourceQuality.Fine => "Fine",
        ResourceQuality.Rare => "Rare",
        ResourceQuality.Legendary => "Legendary",
        _ => "Unknown"
    };
}
```

---

## 6. ResourceDefinition Entity

**File:** `src/Core/RuneAndRust.Domain/Definitions/ResourceDefinition.cs`

```csharp
namespace RuneAndRust.Domain.Definitions;

/// <summary>
/// Defines a resource type that can be gathered and used in crafting.
/// </summary>
/// <remarks>
/// <para>
/// Resource definitions are data-driven templates loaded from JSON configuration.
/// They define the properties of gatherable materials including their category,
/// quality tier, base value, and stacking behavior.
/// </para>
/// <para>
/// Resources are identified by a unique string ID (e.g., "iron-ore") and can
/// be filtered by category or quality for recipe matching and inventory display.
/// </para>
/// </remarks>
/// <example>
/// var ironOre = ResourceDefinition.Create(
///     "iron-ore",
///     "Iron Ore",
///     "Raw iron ore, can be smelted into iron ingots",
///     ResourceCategory.Ore,
///     ResourceQuality.Common,
///     baseValue: 5,
///     stackSize: 20);
/// </example>
public class ResourceDefinition : IEntity
{
    /// <summary>
    /// Gets the unique identifier for this resource definition.
    /// </summary>
    public Guid Id { get; private set; }

    /// <summary>
    /// Gets the string identifier used for lookups and configuration references.
    /// </summary>
    /// <example>"iron-ore", "healing-herb", "dragon-scale"</example>
    public string ResourceId { get; private set; } = null!;

    /// <summary>
    /// Gets the display name of the resource.
    /// </summary>
    public string Name { get; private set; } = null!;

    /// <summary>
    /// Gets the description shown in tooltips and inventory.
    /// </summary>
    public string Description { get; private set; } = null!;

    /// <summary>
    /// Gets the category of this resource for filtering and recipes.
    /// </summary>
    public ResourceCategory Category { get; private set; }

    /// <summary>
    /// Gets the quality tier affecting value and crafting bonuses.
    /// </summary>
    public ResourceQuality Quality { get; private set; }

    /// <summary>
    /// Gets the base gold value before quality multiplier.
    /// </summary>
    public int BaseValue { get; private set; }

    /// <summary>
    /// Gets the maximum stack size in inventory.
    /// </summary>
    /// <remarks>
    /// Common resources typically stack to 20-50, while rare resources
    /// may have lower stack sizes (5-10) to reflect their scarcity.
    /// </remarks>
    public int StackSize { get; private set; }

    /// <summary>
    /// Gets the optional path to the resource's icon.
    /// </summary>
    public string? IconPath { get; private set; }

    // Private constructor for EF Core and JSON deserialization
    private ResourceDefinition() { }

    /// <summary>
    /// Creates a new resource definition with the specified properties.
    /// </summary>
    /// <param name="resourceId">Unique string identifier (will be lowercased).</param>
    /// <param name="name">Display name.</param>
    /// <param name="description">Description text.</param>
    /// <param name="category">Resource category.</param>
    /// <param name="quality">Quality tier.</param>
    /// <param name="baseValue">Base gold value (must be positive).</param>
    /// <param name="stackSize">Maximum stack size (must be positive, default 20).</param>
    /// <returns>A new <see cref="ResourceDefinition"/> instance.</returns>
    /// <exception cref="ArgumentException">Thrown when resourceId or name is null/whitespace.</exception>
    /// <exception cref="ArgumentOutOfRangeException">Thrown when baseValue or stackSize is non-positive.</exception>
    public static ResourceDefinition Create(
        string resourceId,
        string name,
        string description,
        ResourceCategory category,
        ResourceQuality quality,
        int baseValue,
        int stackSize = 20)
    {
        ArgumentException.ThrowIfNullOrWhiteSpace(resourceId, nameof(resourceId));
        ArgumentException.ThrowIfNullOrWhiteSpace(name, nameof(name));
        ArgumentOutOfRangeException.ThrowIfNegativeOrZero(baseValue, nameof(baseValue));
        ArgumentOutOfRangeException.ThrowIfNegativeOrZero(stackSize, nameof(stackSize));

        return new ResourceDefinition
        {
            Id = Guid.NewGuid(),
            ResourceId = resourceId.ToLowerInvariant(),
            Name = name,
            Description = description ?? string.Empty,
            Category = category,
            Quality = quality,
            BaseValue = baseValue,
            StackSize = stackSize
        };
    }

    /// <summary>
    /// Sets the icon path for this resource.
    /// </summary>
    /// <param name="iconPath">Path to the icon file.</param>
    /// <returns>This instance for fluent chaining.</returns>
    public ResourceDefinition WithIcon(string iconPath)
    {
        IconPath = iconPath;
        return this;
    }

    /// <summary>
    /// Gets the actual value after applying quality multiplier.
    /// </summary>
    /// <returns>The gold value adjusted for quality.</returns>
    /// <example>
    /// // Iron Ore (Common, BaseValue=5): 5 * 1.0 = 5
    /// // Gold Ore (Fine, BaseValue=25): 25 * 1.5 = 37
    /// var sellPrice = resource.GetActualValue();
    /// </example>
    public int GetActualValue()
    {
        return (int)(BaseValue * Quality.GetValueMultiplier());
    }

    /// <summary>
    /// Gets the crafting bonus provided by this resource's quality.
    /// </summary>
    /// <returns>The bonus to add to crafting rolls.</returns>
    public int GetCraftingBonus()
    {
        return Quality.GetCraftingBonus();
    }

    /// <summary>
    /// Checks if this resource can stack with another resource.
    /// </summary>
    /// <param name="other">The other resource to check.</param>
    /// <returns>True if the resources can stack (same ResourceId).</returns>
    /// <remarks>
    /// Resources can only stack if they have the same ResourceId.
    /// Quality is part of the definition, so different quality versions
    /// are different resources and cannot stack.
    /// </remarks>
    public bool CanStackWith(ResourceDefinition other)
    {
        ArgumentNullException.ThrowIfNull(other, nameof(other));
        return ResourceId == other.ResourceId;
    }

    /// <summary>
    /// Checks if this resource matches the specified category.
    /// </summary>
    /// <param name="category">The category to check.</param>
    /// <returns>True if the resource belongs to the category.</returns>
    public bool IsCategory(ResourceCategory category)
    {
        return Category == category;
    }

    /// <summary>
    /// Checks if this resource meets a minimum quality requirement.
    /// </summary>
    /// <param name="minimumQuality">The minimum required quality.</param>
    /// <returns>True if this resource's quality is equal to or higher.</returns>
    public bool MeetsQualityRequirement(ResourceQuality minimumQuality)
    {
        return Quality >= minimumQuality;
    }

    /// <summary>
    /// Returns a display string for this resource.
    /// </summary>
    /// <returns>Formatted string with name and quality.</returns>
    public override string ToString()
    {
        return Quality == ResourceQuality.Common
            ? Name
            : $"{Name} ({Quality.GetDisplayName()})";
    }
}
```

---

## 7. IResourceProvider Interface

**File:** `src/Core/RuneAndRust.Application/Interfaces/IResourceProvider.cs`

```csharp
namespace RuneAndRust.Application.Interfaces;

/// <summary>
/// Provides access to resource definitions loaded from configuration.
/// </summary>
/// <remarks>
/// This interface abstracts the loading and retrieval of resource definitions,
/// allowing for different implementations (JSON, database, etc.) while
/// maintaining a consistent API for the application layer.
/// </remarks>
public interface IResourceProvider
{
    /// <summary>
    /// Gets a resource definition by its unique string identifier.
    /// </summary>
    /// <param name="resourceId">The resource identifier (case-insensitive).</param>
    /// <returns>The resource definition, or null if not found.</returns>
    /// <example>
    /// var ironOre = resourceProvider.GetResource("iron-ore");
    /// if (ironOre is not null)
    /// {
    ///     Console.WriteLine($"Found: {ironOre.Name}");
    /// }
    /// </example>
    ResourceDefinition? GetResource(string resourceId);

    /// <summary>
    /// Gets all registered resource definitions.
    /// </summary>
    /// <returns>A read-only list of all resource definitions.</returns>
    IReadOnlyList<ResourceDefinition> GetAllResources();

    /// <summary>
    /// Gets all resources belonging to a specific category.
    /// </summary>
    /// <param name="category">The category to filter by.</param>
    /// <returns>A read-only list of matching resource definitions.</returns>
    /// <example>
    /// var ores = resourceProvider.GetResourcesByCategory(ResourceCategory.Ore);
    /// foreach (var ore in ores)
    /// {
    ///     Console.WriteLine($"- {ore.Name}");
    /// }
    /// </example>
    IReadOnlyList<ResourceDefinition> GetResourcesByCategory(ResourceCategory category);

    /// <summary>
    /// Gets all resources of a specific quality tier.
    /// </summary>
    /// <param name="quality">The quality tier to filter by.</param>
    /// <returns>A read-only list of matching resource definitions.</returns>
    IReadOnlyList<ResourceDefinition> GetResourcesByQuality(ResourceQuality quality);

    /// <summary>
    /// Gets all resources matching both category and minimum quality.
    /// </summary>
    /// <param name="category">The category to filter by.</param>
    /// <param name="minimumQuality">The minimum quality tier required.</param>
    /// <returns>A read-only list of matching resource definitions.</returns>
    IReadOnlyList<ResourceDefinition> GetResources(ResourceCategory category, ResourceQuality minimumQuality);

    /// <summary>
    /// Checks if a resource with the specified ID exists.
    /// </summary>
    /// <param name="resourceId">The resource identifier to check.</param>
    /// <returns>True if the resource exists, false otherwise.</returns>
    bool Exists(string resourceId);

    /// <summary>
    /// Gets all registered resource IDs.
    /// </summary>
    /// <returns>A read-only list of all resource identifiers.</returns>
    IReadOnlyList<string> GetResourceIds();

    /// <summary>
    /// Gets the total count of registered resources.
    /// </summary>
    /// <returns>The number of resource definitions.</returns>
    int Count { get; }
}
```

---

## 8. ResourceProvider Implementation

**File:** `src/Infrastructure/RuneAndRust.Infrastructure/Services/ResourceProvider.cs`

```csharp
namespace RuneAndRust.Infrastructure.Services;

/// <summary>
/// Provides resource definitions loaded from JSON configuration.
/// </summary>
/// <remarks>
/// Resources are loaded once at construction and cached for the lifetime
/// of the provider. The provider is registered as a singleton in DI.
/// </remarks>
public class ResourceProvider : IResourceProvider
{
    private readonly Dictionary<string, ResourceDefinition> _resources = new(StringComparer.OrdinalIgnoreCase);
    private readonly ILogger<ResourceProvider> _logger;

    /// <summary>
    /// Initializes a new instance of the <see cref="ResourceProvider"/> class.
    /// </summary>
    /// <param name="configProvider">The configuration provider for loading JSON.</param>
    /// <param name="logger">The logger instance.</param>
    public ResourceProvider(
        IConfigurationProvider configProvider,
        ILogger<ResourceProvider> logger)
    {
        _logger = logger;
        LoadResources(configProvider);
    }

    private void LoadResources(IConfigurationProvider configProvider)
    {
        try
        {
            var json = configProvider.LoadConfig<ResourcesJson>("resources.json");

            if (json?.Resources is null || json.Resources.Count == 0)
            {
                _logger.LogWarning("No resources found in configuration");
                return;
            }

            foreach (var resourceJson in json.Resources)
            {
                if (!TryParseResource(resourceJson, out var definition))
                {
                    continue;
                }

                if (_resources.ContainsKey(definition!.ResourceId))
                {
                    _logger.LogWarning(
                        "Duplicate resource ID '{ResourceId}' - skipping",
                        definition.ResourceId);
                    continue;
                }

                _resources[definition.ResourceId] = definition;
                _logger.LogDebug(
                    "Loaded resource: {ResourceId} ({Category}, {Quality})",
                    definition.ResourceId,
                    definition.Category,
                    definition.Quality);
            }

            _logger.LogInformation(
                "Loaded {Count} resource definitions from configuration",
                _resources.Count);
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, "Failed to load resource definitions");
            throw;
        }
    }

    private bool TryParseResource(ResourceJsonEntry entry, out ResourceDefinition? definition)
    {
        definition = null;

        try
        {
            if (string.IsNullOrWhiteSpace(entry.Id))
            {
                _logger.LogWarning("Resource entry missing ID - skipping");
                return false;
            }

            if (!Enum.TryParse<ResourceCategory>(entry.Category, ignoreCase: true, out var category))
            {
                _logger.LogWarning(
                    "Invalid category '{Category}' for resource '{Id}' - skipping",
                    entry.Category,
                    entry.Id);
                return false;
            }

            if (!Enum.TryParse<ResourceQuality>(entry.Quality, ignoreCase: true, out var quality))
            {
                _logger.LogWarning(
                    "Invalid quality '{Quality}' for resource '{Id}' - skipping",
                    entry.Quality,
                    entry.Id);
                return false;
            }

            definition = ResourceDefinition.Create(
                entry.Id,
                entry.Name ?? entry.Id,
                entry.Description ?? string.Empty,
                category,
                quality,
                entry.BaseValue > 0 ? entry.BaseValue : 1,
                entry.StackSize > 0 ? entry.StackSize : 20);

            if (!string.IsNullOrEmpty(entry.Icon))
            {
                definition.WithIcon(entry.Icon);
            }

            return true;
        }
        catch (Exception ex)
        {
            _logger.LogWarning(ex, "Failed to parse resource '{Id}'", entry.Id);
            return false;
        }
    }

    /// <inheritdoc />
    public ResourceDefinition? GetResource(string resourceId)
    {
        if (string.IsNullOrWhiteSpace(resourceId))
        {
            return null;
        }

        return _resources.GetValueOrDefault(resourceId.ToLowerInvariant());
    }

    /// <inheritdoc />
    public IReadOnlyList<ResourceDefinition> GetAllResources()
    {
        return _resources.Values.ToList();
    }

    /// <inheritdoc />
    public IReadOnlyList<ResourceDefinition> GetResourcesByCategory(ResourceCategory category)
    {
        return _resources.Values
            .Where(r => r.Category == category)
            .ToList();
    }

    /// <inheritdoc />
    public IReadOnlyList<ResourceDefinition> GetResourcesByQuality(ResourceQuality quality)
    {
        return _resources.Values
            .Where(r => r.Quality == quality)
            .ToList();
    }

    /// <inheritdoc />
    public IReadOnlyList<ResourceDefinition> GetResources(
        ResourceCategory category,
        ResourceQuality minimumQuality)
    {
        return _resources.Values
            .Where(r => r.Category == category && r.Quality >= minimumQuality)
            .ToList();
    }

    /// <inheritdoc />
    public bool Exists(string resourceId)
    {
        if (string.IsNullOrWhiteSpace(resourceId))
        {
            return false;
        }

        return _resources.ContainsKey(resourceId.ToLowerInvariant());
    }

    /// <inheritdoc />
    public IReadOnlyList<string> GetResourceIds()
    {
        return _resources.Keys.ToList();
    }

    /// <inheritdoc />
    public int Count => _resources.Count;
}

/// <summary>
/// JSON model for resources configuration file.
/// </summary>
internal class ResourcesJson
{
    public List<ResourceJsonEntry> Resources { get; set; } = new();
}

/// <summary>
/// JSON model for a single resource entry.
/// </summary>
internal class ResourceJsonEntry
{
    public string Id { get; set; } = null!;
    public string? Name { get; set; }
    public string? Description { get; set; }
    public string Category { get; set; } = null!;
    public string Quality { get; set; } = null!;
    public int BaseValue { get; set; }
    public int StackSize { get; set; }
    public string? Icon { get; set; }
}
```

---

## 9. Configuration Schema

**File:** `config/schemas/resources.schema.json`

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://runeandrust.game/schemas/resources.schema.json",
  "title": "Resources Configuration",
  "description": "Schema for defining gatherable resources in Rune & Rust",
  "type": "object",
  "required": ["resources"],
  "properties": {
    "$schema": {
      "type": "string",
      "description": "Reference to this schema file"
    },
    "resources": {
      "type": "array",
      "description": "List of resource definitions",
      "items": {
        "$ref": "#/$defs/resource"
      },
      "minItems": 1
    }
  },
  "$defs": {
    "resource": {
      "type": "object",
      "description": "A single resource definition",
      "required": ["id", "name", "category", "quality", "baseValue"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the resource (lowercase, hyphenated)",
          "pattern": "^[a-z][a-z0-9-]*$",
          "examples": ["iron-ore", "healing-herb", "dragon-scale"]
        },
        "name": {
          "type": "string",
          "description": "Display name of the resource",
          "minLength": 1,
          "maxLength": 50
        },
        "description": {
          "type": "string",
          "description": "Detailed description shown in tooltips",
          "maxLength": 500
        },
        "category": {
          "type": "string",
          "description": "Resource category",
          "enum": ["Ore", "Herb", "Leather", "Gem", "Wood", "Cloth"]
        },
        "quality": {
          "type": "string",
          "description": "Quality tier affecting value and crafting",
          "enum": ["Common", "Fine", "Rare", "Legendary"]
        },
        "baseValue": {
          "type": "integer",
          "description": "Base gold value before quality multiplier",
          "minimum": 1,
          "maximum": 10000
        },
        "stackSize": {
          "type": "integer",
          "description": "Maximum stack size in inventory",
          "minimum": 1,
          "maximum": 999,
          "default": 20
        },
        "icon": {
          "type": "string",
          "description": "Path to the resource icon",
          "pattern": "^icons/.*\\.(png|jpg|svg)$"
        }
      },
      "additionalProperties": false
    }
  }
}
```

---

## 10. Configuration File

**File:** `config/resources.json`

```json
{
  "$schema": "./schemas/resources.schema.json",
  "resources": [
    {
      "id": "iron-ore",
      "name": "Iron Ore",
      "description": "Raw iron ore, can be smelted into iron ingots",
      "category": "Ore",
      "quality": "Common",
      "baseValue": 5,
      "stackSize": 20,
      "icon": "icons/resources/iron_ore.png"
    },
    {
      "id": "copper-ore",
      "name": "Copper Ore",
      "description": "Soft copper ore, useful for basic crafting",
      "category": "Ore",
      "quality": "Common",
      "baseValue": 3,
      "stackSize": 20,
      "icon": "icons/resources/copper_ore.png"
    },
    {
      "id": "gold-ore",
      "name": "Gold Ore",
      "description": "Valuable gold ore for fine crafting",
      "category": "Ore",
      "quality": "Fine",
      "baseValue": 25,
      "stackSize": 20,
      "icon": "icons/resources/gold_ore.png"
    },
    {
      "id": "mithril-ore",
      "name": "Mithril Ore",
      "description": "Legendary metal of ancient origin",
      "category": "Ore",
      "quality": "Rare",
      "baseValue": 100,
      "stackSize": 10,
      "icon": "icons/resources/mithril_ore.png"
    },
    {
      "id": "healing-herb",
      "name": "Healing Herb",
      "description": "A herb with restorative properties",
      "category": "Herb",
      "quality": "Common",
      "baseValue": 3,
      "stackSize": 50,
      "icon": "icons/resources/healing_herb.png"
    },
    {
      "id": "mana-leaf",
      "name": "Mana Leaf",
      "description": "A leaf infused with arcane energy",
      "category": "Herb",
      "quality": "Fine",
      "baseValue": 10,
      "stackSize": 50,
      "icon": "icons/resources/mana_leaf.png"
    },
    {
      "id": "firebloom",
      "name": "Firebloom",
      "description": "A rare flower that radiates warmth",
      "category": "Herb",
      "quality": "Rare",
      "baseValue": 40,
      "stackSize": 30,
      "icon": "icons/resources/firebloom.png"
    },
    {
      "id": "leather",
      "name": "Leather",
      "description": "Tanned leather from common creatures",
      "category": "Leather",
      "quality": "Common",
      "baseValue": 8,
      "stackSize": 20,
      "icon": "icons/resources/leather.png"
    },
    {
      "id": "thick-hide",
      "name": "Thick Hide",
      "description": "Sturdy hide from tough creatures",
      "category": "Leather",
      "quality": "Fine",
      "baseValue": 20,
      "stackSize": 15,
      "icon": "icons/resources/thick_hide.png"
    },
    {
      "id": "dragon-scale",
      "name": "Dragon Scale",
      "description": "A scale from a mighty dragon",
      "category": "Leather",
      "quality": "Rare",
      "baseValue": 150,
      "stackSize": 5,
      "icon": "icons/resources/dragon_scale.png"
    },
    {
      "id": "ruby",
      "name": "Ruby",
      "description": "A brilliant red gemstone",
      "category": "Gem",
      "quality": "Rare",
      "baseValue": 100,
      "stackSize": 10,
      "icon": "icons/resources/ruby.png"
    },
    {
      "id": "sapphire",
      "name": "Sapphire",
      "description": "A deep blue gemstone",
      "category": "Gem",
      "quality": "Rare",
      "baseValue": 100,
      "stackSize": 10,
      "icon": "icons/resources/sapphire.png"
    },
    {
      "id": "oak-wood",
      "name": "Oak Wood",
      "description": "Sturdy oak wood for crafting",
      "category": "Wood",
      "quality": "Common",
      "baseValue": 4,
      "stackSize": 20,
      "icon": "icons/resources/oak_wood.png"
    },
    {
      "id": "ironwood",
      "name": "Ironwood",
      "description": "Incredibly dense and strong wood",
      "category": "Wood",
      "quality": "Fine",
      "baseValue": 30,
      "stackSize": 15,
      "icon": "icons/resources/ironwood.png"
    },
    {
      "id": "linen",
      "name": "Linen",
      "description": "Basic cloth material",
      "category": "Cloth",
      "quality": "Common",
      "baseValue": 5,
      "stackSize": 30,
      "icon": "icons/resources/linen.png"
    },
    {
      "id": "silk",
      "name": "Silk",
      "description": "Fine silk cloth",
      "category": "Cloth",
      "quality": "Fine",
      "baseValue": 25,
      "stackSize": 20,
      "icon": "icons/resources/silk.png"
    }
  ]
}
```

---

## 11. Logging Specifications

### Log Levels by Component

| Component | Level | Events |
|-----------|-------|--------|
| `ResourceProvider` | Information | Resource loading summary, count |
| `ResourceProvider` | Debug | Individual resource loading |
| `ResourceProvider` | Warning | Duplicate IDs, invalid entries, missing data |
| `ResourceProvider` | Error | Configuration loading failures |

### Logging Decision Tree

```
ResourceProvider.LoadResources()
│
├── [INFO] "Loading resource definitions from configuration"
│
├── For each resource entry:
│   │
│   ├── ID missing or empty?
│   │   └── [WARN] "Resource entry missing ID - skipping"
│   │
│   ├── Invalid category?
│   │   └── [WARN] "Invalid category '{Category}' for resource '{Id}' - skipping"
│   │
│   ├── Invalid quality?
│   │   └── [WARN] "Invalid quality '{Quality}' for resource '{Id}' - skipping"
│   │
│   ├── Duplicate ID?
│   │   └── [WARN] "Duplicate resource ID '{ResourceId}' - skipping"
│   │
│   └── Success?
│       └── [DEBUG] "Loaded resource: {ResourceId} ({Category}, {Quality})"
│
├── [INFO] "Loaded {Count} resource definitions from configuration"
│
└── Exception?
    └── [ERROR] "Failed to load resource definitions"
```

### Sample Log Output

```
[INF] Loading resource definitions from configuration
[DBG] Loaded resource: iron-ore (Ore, Common)
[DBG] Loaded resource: copper-ore (Ore, Common)
[DBG] Loaded resource: gold-ore (Ore, Fine)
[DBG] Loaded resource: mithril-ore (Ore, Rare)
[DBG] Loaded resource: healing-herb (Herb, Common)
[DBG] Loaded resource: mana-leaf (Herb, Fine)
[DBG] Loaded resource: firebloom (Herb, Rare)
[DBG] Loaded resource: leather (Leather, Common)
[DBG] Loaded resource: thick-hide (Leather, Fine)
[DBG] Loaded resource: dragon-scale (Leather, Rare)
[DBG] Loaded resource: ruby (Gem, Rare)
[DBG] Loaded resource: sapphire (Gem, Rare)
[DBG] Loaded resource: oak-wood (Wood, Common)
[DBG] Loaded resource: ironwood (Wood, Fine)
[DBG] Loaded resource: linen (Cloth, Common)
[DBG] Loaded resource: silk (Cloth, Fine)
[INF] Loaded 16 resource definitions from configuration
```

---

## 12. Unit Testing Requirements

### Test Count by Feature

| Feature | Test Count | Description |
|---------|------------|-------------|
| ResourceDefinition creation | 2 | Valid creation, validation errors |
| ResourceDefinition methods | 2 | GetActualValue, CanStackWith |
| ResourceQualityExtensions | 2 | GetValueMultiplier, GetCraftingBonus |
| ResourceProvider loading | 1 | Loads from JSON configuration |
| ResourceProvider.GetResource | 1 | Returns definition or null |
| ResourceProvider.GetResourcesByCategory | 1 | Filters by category |
| ResourceProvider.GetResourcesByQuality | 1 | Filters by quality |
| ResourceProvider.Exists | 1 | Checks existence |
| **Total** | **~8** | |

### Test Specifications

**File:** `tests/RuneAndRust.Domain.Tests/Definitions/ResourceDefinitionTests.cs`

```csharp
[TestFixture]
public class ResourceDefinitionTests
{
    [Test]
    public void Create_WithValidParameters_ReturnsDefinition()
    {
        // Arrange
        var resourceId = "iron-ore";
        var name = "Iron Ore";
        var description = "Raw iron ore";
        var category = ResourceCategory.Ore;
        var quality = ResourceQuality.Common;
        var baseValue = 5;
        var stackSize = 20;

        // Act
        var definition = ResourceDefinition.Create(
            resourceId, name, description, category, quality, baseValue, stackSize);

        // Assert
        Assert.That(definition.ResourceId, Is.EqualTo("iron-ore"));
        Assert.That(definition.Name, Is.EqualTo("Iron Ore"));
        Assert.That(definition.Category, Is.EqualTo(ResourceCategory.Ore));
        Assert.That(definition.Quality, Is.EqualTo(ResourceQuality.Common));
        Assert.That(definition.BaseValue, Is.EqualTo(5));
        Assert.That(definition.StackSize, Is.EqualTo(20));
    }

    [Test]
    public void Create_WithNullResourceId_ThrowsArgumentException()
    {
        // Act & Assert
        Assert.Throws<ArgumentException>(() =>
            ResourceDefinition.Create(null!, "Name", "Desc", ResourceCategory.Ore,
                ResourceQuality.Common, 5));
    }

    [Test]
    public void Create_WithZeroBaseValue_ThrowsArgumentOutOfRangeException()
    {
        // Act & Assert
        Assert.Throws<ArgumentOutOfRangeException>(() =>
            ResourceDefinition.Create("test", "Test", "Desc", ResourceCategory.Ore,
                ResourceQuality.Common, 0));
    }

    [Test]
    public void GetActualValue_WithFineQuality_ReturnsMultipliedValue()
    {
        // Arrange
        var definition = ResourceDefinition.Create(
            "gold-ore", "Gold Ore", "Desc", ResourceCategory.Ore,
            ResourceQuality.Fine, 25);

        // Act
        var actualValue = definition.GetActualValue();

        // Assert: 25 * 1.5 = 37.5 -> 37
        Assert.That(actualValue, Is.EqualTo(37));
    }

    [Test]
    public void CanStackWith_SameResourceId_ReturnsTrue()
    {
        // Arrange
        var resource1 = ResourceDefinition.Create(
            "iron-ore", "Iron Ore", "Desc", ResourceCategory.Ore,
            ResourceQuality.Common, 5);
        var resource2 = ResourceDefinition.Create(
            "iron-ore", "Iron Ore", "Desc", ResourceCategory.Ore,
            ResourceQuality.Common, 5);

        // Act & Assert
        Assert.That(resource1.CanStackWith(resource2), Is.True);
    }

    [Test]
    public void CanStackWith_DifferentResourceId_ReturnsFalse()
    {
        // Arrange
        var resource1 = ResourceDefinition.Create(
            "iron-ore", "Iron Ore", "Desc", ResourceCategory.Ore,
            ResourceQuality.Common, 5);
        var resource2 = ResourceDefinition.Create(
            "copper-ore", "Copper Ore", "Desc", ResourceCategory.Ore,
            ResourceQuality.Common, 3);

        // Act & Assert
        Assert.That(resource1.CanStackWith(resource2), Is.False);
    }
}
```

**File:** `tests/RuneAndRust.Domain.Tests/Enums/ResourceQualityExtensionsTests.cs`

```csharp
[TestFixture]
public class ResourceQualityExtensionsTests
{
    [TestCase(ResourceQuality.Common, 1.0f)]
    [TestCase(ResourceQuality.Fine, 1.5f)]
    [TestCase(ResourceQuality.Rare, 3.0f)]
    [TestCase(ResourceQuality.Legendary, 10.0f)]
    public void GetValueMultiplier_ReturnsCorrectMultiplier(
        ResourceQuality quality, float expected)
    {
        // Act
        var result = quality.GetValueMultiplier();

        // Assert
        Assert.That(result, Is.EqualTo(expected));
    }

    [TestCase(ResourceQuality.Common, 0)]
    [TestCase(ResourceQuality.Fine, 1)]
    [TestCase(ResourceQuality.Rare, 2)]
    [TestCase(ResourceQuality.Legendary, 3)]
    public void GetCraftingBonus_ReturnsCorrectBonus(
        ResourceQuality quality, int expected)
    {
        // Act
        var result = quality.GetCraftingBonus();

        // Assert
        Assert.That(result, Is.EqualTo(expected));
    }
}
```

**File:** `tests/RuneAndRust.Infrastructure.Tests/Services/ResourceProviderTests.cs`

```csharp
[TestFixture]
public class ResourceProviderTests
{
    private ResourceProvider _provider = null!;

    [SetUp]
    public void SetUp()
    {
        var configProvider = new MockConfigurationProvider();
        var logger = new NullLogger<ResourceProvider>();
        _provider = new ResourceProvider(configProvider, logger);
    }

    [Test]
    public void Constructor_LoadsResourcesFromConfiguration()
    {
        // Assert
        Assert.That(_provider.Count, Is.GreaterThan(0));
    }

    [Test]
    public void GetResource_WithExistingId_ReturnsDefinition()
    {
        // Act
        var resource = _provider.GetResource("iron-ore");

        // Assert
        Assert.That(resource, Is.Not.Null);
        Assert.That(resource!.Name, Is.EqualTo("Iron Ore"));
    }

    [Test]
    public void GetResource_WithNonExistingId_ReturnsNull()
    {
        // Act
        var resource = _provider.GetResource("nonexistent");

        // Assert
        Assert.That(resource, Is.Null);
    }

    [Test]
    public void GetResourcesByCategory_ReturnsFilteredList()
    {
        // Act
        var ores = _provider.GetResourcesByCategory(ResourceCategory.Ore);

        // Assert
        Assert.That(ores, Is.Not.Empty);
        Assert.That(ores.All(r => r.Category == ResourceCategory.Ore), Is.True);
    }

    [Test]
    public void GetResourcesByQuality_ReturnsFilteredList()
    {
        // Act
        var rareResources = _provider.GetResourcesByQuality(ResourceQuality.Rare);

        // Assert
        Assert.That(rareResources, Is.Not.Empty);
        Assert.That(rareResources.All(r => r.Quality == ResourceQuality.Rare), Is.True);
    }

    [Test]
    public void Exists_WithExistingId_ReturnsTrue()
    {
        // Act & Assert
        Assert.That(_provider.Exists("iron-ore"), Is.True);
    }

    [Test]
    public void Exists_WithNonExistingId_ReturnsFalse()
    {
        // Act & Assert
        Assert.That(_provider.Exists("nonexistent"), Is.False);
    }
}
```

---

## 13. Use Cases

### UC-001: Load Resource Definitions

**Actor:** System (on startup)
**Flow:** Application starts → ConfigurationProvider loads resources.json → ResourceProvider parses entries → Resources cached in memory → Application ready

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    UC-001: LOAD RESOURCE DEFINITIONS                    │
└─────────────────────────────────────────────────────────────────────────┘

    Application Startup
           │
           ▼
    ┌──────────────────────────────────────┐
    │ 1. DI Container resolves             │
    │    IResourceProvider                 │
    └──────────────────────────────────────┘
           │
           ▼
    ┌──────────────────────────────────────┐
    │ 2. ResourceProvider constructor      │
    │    calls LoadResources()             │
    └──────────────────────────────────────┘
           │
           ▼
    ┌──────────────────────────────────────┐
    │ 3. ConfigurationProvider loads       │
    │    config/resources.json             │
    └──────────────────────────────────────┘
           │
           ▼
    ┌──────────────────────────────────────┐
    │ 4. Each entry parsed to              │
    │    ResourceDefinition                │
    └──────────────────────────────────────┘
           │
           ▼
    ┌──────────────────────────────────────┐
    │ 5. Definitions cached in             │
    │    Dictionary<string, ResourceDef>   │
    └──────────────────────────────────────┘
           │
           ▼
    Resources Available for Use
```

### UC-002: Retrieve Resource by ID

**Actor:** GatheringService / CraftingService
**Flow:** Service needs resource → Calls GetResource(id) → Returns definition or null → Service uses definition

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    UC-002: RETRIEVE RESOURCE BY ID                      │
└─────────────────────────────────────────────────────────────────────────┘

    Service Request
    (e.g., GatheringService.Gather())
           │
           ▼
    ┌──────────────────────────────────────┐
    │ resourceProvider.GetResource(        │
    │     "iron-ore")                      │
    └──────────────────────────────────────┘
           │
           ▼
    ┌──────────────────────────────────────┐
    │ Lookup in _resources dictionary      │
    │ (case-insensitive)                   │
    └──────────────────────────────────────┘
           │
           ├── Found ─────▶ Return ResourceDefinition
           │
           └── Not Found ──▶ Return null
```

### UC-003: Filter Resources by Category

**Actor:** Crafting UI / Recipe Validator
**Flow:** UI needs ore list → Calls GetResourcesByCategory(Ore) → Returns filtered list → UI displays options

### UC-004: Calculate Resource Value

**Actor:** Shop / Inventory
**Flow:** Need sell price → Get resource definition → Call GetActualValue() → Returns base * quality multiplier

### UC-005: Check Resource Stacking

**Actor:** Inventory System
**Flow:** Player picks up resource → Check CanStackWith existing → If true, increase stack → If false, new slot

---

## 14. Deliverable Checklist

### Domain Layer

- [ ] `ResourceCategory` enum with 6 categories
- [ ] `ResourceQuality` enum with 4 tiers
- [ ] `ResourceQualityExtensions` with GetValueMultiplier, GetCraftingBonus
- [ ] `ResourceDefinition` entity with all properties and methods

### Application Layer

- [ ] `IResourceProvider` interface with 6 methods

### Infrastructure Layer

- [ ] `ResourceProvider` implementation
- [ ] `ResourcesJson` internal model
- [ ] `ResourceJsonEntry` internal model

### Configuration

- [ ] `config/resources.json` with 16 resources
- [ ] `config/schemas/resources.schema.json`

### Testing

- [ ] `ResourceDefinitionTests.cs` (~4 tests)
- [ ] `ResourceQualityExtensionsTests.cs` (~2 tests)
- [ ] `ResourceProviderTests.cs` (~5 tests)
- [ ] All tests passing

### Documentation

- [ ] XML documentation on all public members
- [ ] Code examples in XML docs

---

## 15. Acceptance Criteria

### Functional

- [ ] ResourceDefinition.Create validates all parameters
- [ ] ResourceDefinition.Create lowercases resourceId
- [ ] ResourceDefinition.GetActualValue applies quality multiplier
- [ ] ResourceDefinition.CanStackWith compares resourceIds
- [ ] ResourceQuality.GetValueMultiplier returns correct values (1.0, 1.5, 3.0, 10.0)
- [ ] ResourceQuality.GetCraftingBonus returns correct values (0, 1, 2, 3)
- [ ] ResourceProvider loads all 16 resources from JSON
- [ ] ResourceProvider.GetResource returns definition by ID (case-insensitive)
- [ ] ResourceProvider.GetResource returns null for unknown ID
- [ ] ResourceProvider.GetResourcesByCategory filters correctly
- [ ] ResourceProvider.GetResourcesByQuality filters correctly
- [ ] ResourceProvider.Exists returns true for known IDs
- [ ] All 6 categories represented in configuration

### Quality

- [ ] Build succeeds with 0 errors
- [ ] Build succeeds with 0 warnings
- [ ] All ~8 unit tests pass
- [ ] Configuration validates against schema
- [ ] XML documentation complete on all public members
- [ ] No duplicate resource IDs in configuration

---

## 16. Dependencies

### Required From Prior Versions

| Type | Location | Usage |
|------|----------|-------|
| `IEntity` | `Domain/Interfaces/IEntity.cs` | Base interface for entities |
| `IConfigurationProvider` | `Application/Interfaces/IConfigurationProvider.cs` | JSON loading |
| `ILogger<T>` | Microsoft.Extensions.Logging | Logging |

### Provides To v0.11.0b

| Type | Usage |
|------|-------|
| `ResourceDefinition` | HarvestableFeature references resource to yield |
| `IResourceProvider` | HarvestableFeatureProvider validates resource IDs |
| `ResourceCategory` | Filtering harvestable features by resource type |
| `ResourceQuality` | Quality rolls during gathering |

### Provides To v0.11.0c

| Type | Usage |
|------|-------|
| `ResourceDefinition` | GatheringService determines what to add to inventory |
| `IResourceProvider` | GatheringService retrieves resource definitions |
| `ResourceQuality` | Quality upgrade logic on successful gather |

---

## 17. Future Considerations

### Deferred to v0.11.1 (Crafting Recipes)

- **Resource Conversion**: Smelting ore into ingots
- **Recipe Requirements**: Recipes requiring specific resource categories/qualities
- **Resource Combinations**: Combining resources in crafting

### Deferred to v0.13.x (UI Consolidation)

- **Resource Icons**: Visual display in inventory
- **Quality Color Coding**: UI display of quality tiers
- **Stack Display**: Showing stack counts and limits

### Out of Scope

- **Resource Trading**: Player-to-player or NPC trading (future economy system)
- **Resource Decay**: Time-based degradation (not planned)
- **Resource Weight**: Encumbrance system (not in current roadmap)

---

## Resource Summary Table

| Resource ID | Name | Category | Quality | Base Value | Stack | Actual Value |
|-------------|------|----------|---------|------------|-------|--------------|
| `iron-ore` | Iron Ore | Ore | Common | 5 | 20 | 5 |
| `copper-ore` | Copper Ore | Ore | Common | 3 | 20 | 3 |
| `gold-ore` | Gold Ore | Ore | Fine | 25 | 20 | 37 |
| `mithril-ore` | Mithril Ore | Ore | Rare | 100 | 10 | 300 |
| `healing-herb` | Healing Herb | Herb | Common | 3 | 50 | 3 |
| `mana-leaf` | Mana Leaf | Herb | Fine | 10 | 50 | 15 |
| `firebloom` | Firebloom | Herb | Rare | 40 | 30 | 120 |
| `leather` | Leather | Leather | Common | 8 | 20 | 8 |
| `thick-hide` | Thick Hide | Leather | Fine | 20 | 15 | 30 |
| `dragon-scale` | Dragon Scale | Leather | Rare | 150 | 5 | 450 |
| `ruby` | Ruby | Gem | Rare | 100 | 10 | 300 |
| `sapphire` | Sapphire | Gem | Rare | 100 | 10 | 300 |
| `oak-wood` | Oak Wood | Wood | Common | 4 | 20 | 4 |
| `ironwood` | Ironwood | Wood | Fine | 30 | 15 | 45 |
| `linen` | Linen | Cloth | Common | 5 | 30 | 5 |
| `silk` | Silk | Cloth | Fine | 25 | 20 | 37 |

---

*Document Version: 1.0*
*Last Updated: 2026-01-16*
*Author: Claude (AI Assistant)*
