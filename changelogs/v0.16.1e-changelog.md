# Changelog - v0.16.1e: Proficiency Acquisition Service

**Release Date:** 2026-01-28

## Overview

This version implements the Proficiency Acquisition Service interface and supporting value objects for managing all methods of acquiring and advancing weapon proficiencies.

---

## Added

### Domain Layer - Enums

- **`AcquisitionMethod.cs`** - Enum defining the five methods for acquiring proficiencies:
    - `Archetype` (0) - Starting proficiencies from archetype selection
    - `Specialization` (1) - Proficiencies granted by specialization choice
    - `NpcTraining` (2) - Training with NPC trainers (costs time and currency)
    - `CombatExperience` (3) - Advancement through weapon usage in combat
    - `ProgressionPointPurchase` (4) - Instant advancement using PP currency

### Domain Layer - Value Objects

- **`AcquisitionCost.cs`** - Immutable value object representing acquisition costs:
    - Properties: `ProgressionPoints`, `PiecesSilver`, `TrainingWeeks`
    - Derived: `IsFree`, `SpentPP`, `SpentPS`, `SpentTime`
    - Factory methods: `None`, `FromPP(int)`, `FromTraining(int, int)`

- **`ProficiencyGainResult.cs`** - Value object for acquisition outcomes:
    - Properties: `Success`, `Category`, `OldLevel`, `NewLevel`, `Method`, `CostPaid`, `FailureReason`
    - Derived: `LevelChanged`, `WasFree`, `ReachedMaster`
    - Factory methods: `CreateSuccess(...)`, `CreateFailure(...)`
    - Formatting: `FormatResult()`, `ToString()`

- **`TrainingResult.cs`** - Value object for NPC training outcomes:
    - Properties: `Success`, `Category`, `PsCost`, `TrainingWeeks`, `TrainerId`, `OldLevel`, `NewLevel`, `FailureReason`
    - Derived: `LevelChanged`, `TotalCost`
    - Factory methods: `CreateSuccess(...)`, `CreateFailure(...)`
    - Formatting: `FormatResult()`, `ToString()`

### Application Layer - Interfaces

- **`IProficiencyAcquisitionService.cs`** - Service interface with 8 methods:
    - `InitializeFromArchetypeAsync` - Set starting proficiencies from archetype
    - `GrantFromSpecializationAsync` - Grant proficiencies from specialization
    - `RecordCombatExperienceAsync` - Track combat experience and trigger level-ups
    - `PurchaseWithProgressionPointsAsync` - Instant PP purchase
    - `TrainWithNPCAsync` - NPC training with time/currency costs
    - `GetTrainingCostAsync` - Query training costs
    - `CanAffordPPPurchaseAsync` - Check PP affordability
    - `CanAffordTrainingAsync` - Check training affordability

### Configuration

- **`proficiency-acquisition.json`** - Configuration for acquisition methods:
    - PP purchase: 2 PP per level (configurable)
    - NPC training costs by level transition (50-400 PS, 2-8 weeks)
    - Enable/disable flags for each acquisition method

- **`proficiency-acquisition.schema.json`** - JSON schema for configuration validation

### Unit Tests

- **`AcquisitionCostTests.cs`** - 18 tests covering factory methods, derived properties, and formatting
- **`ProficiencyGainResultTests.cs`** - 17 tests covering success/failure creation and formatting
- **`TrainingResultTests.cs`** - 18 tests covering training outcomes and validation

---

## Dependencies

- Requires v0.16.1a (WeaponProficiencyLevel enum)
- Requires v0.16.1b (WeaponCategory enum)
- Requires v0.16.1c (IArchetypeProficiencyProvider)
- Requires v0.16.1d (CharacterProficiencies entity)

## Provides To

- v0.16.1f (Combat Integration) will use `IProficiencyAcquisitionService`

---

## Statistics

| Category          | Count |
| ----------------- | ----- |
| New Enums         | 1     |
| New Value Objects | 3     |
| New Interfaces    | 1     |
| New Config Files  | 2     |
| New Unit Tests    | ~53   |
