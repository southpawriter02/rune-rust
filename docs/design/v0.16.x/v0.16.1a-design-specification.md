# v0.16.1a Design Specification: Proficiency Level Enum

**Version:** 0.16.1a  
**Phase Name:** Proficiency Level Enum  
**Parent Version:** v0.16.1 (Weapon Proficiency System)  
**Prerequisites:** v0.16.0 Complete (Quality Tier System)  
**Estimated Tests:** ~4 unit tests

---

## Table of Contents

1. [Executive Summary](#1-executive-summary)
2. [Feature Overview](#2-feature-overview)
3. [Architecture Diagrams](#3-architecture-diagrams)
4. [WeaponProficiencyLevel Enum](#4-weaponproficiencylevel-enum)
5. [ProficiencyEffect Value Object](#5-proficiencyeffect-value-object)
6. [IProficiencyEffectProvider Interface](#6-iproficiencyeffectprovider-interface)
7. [Data Model Changes](#7-data-model-changes)
8. [Configuration File Schemas](#8-configuration-file-schemas)
9. [Logging Specifications](#9-logging-specifications)
10. [Unit Testing Requirements](#10-unit-testing-requirements)
11. [Use Cases](#11-use-cases)
12. [Deliverable Checklist](#12-deliverable-checklist)
13. [Acceptance Criteria](#13-acceptance-criteria)
14. [Dependencies](#14-dependencies)
15. [Future Considerations](#15-future-considerations)

---

## 1. Executive Summary

### 1.1 Purpose

This specification defines the weapon proficiency level enumeration and its associated combat effects. Proficiency levels determine how effectively a character can wield weapons, applying attack/damage modifiers and gating access to special properties and combat techniques.

The four proficiency levels are:

- **NonProficient**: Severe penalties (-3 attack, -2 damage), no special properties
- **Proficient**: Baseline competency, full access to weapon capabilities
- **Expert**: Improved performance (+1 attack), access to advanced techniques
- **Master**: Peak proficiency (+2 attack, +1 damage), signature techniques unlocked

This phase establishes the enum and effect definitions that all subsequent v0.16.1 phases depend upon.

### 1.2 Key Deliverables

| Category          | Items                                                         |
| ----------------- | ------------------------------------------------------------- |
| **Enums**         | `WeaponProficiencyLevel`                                      |
| **Value Objects** | `ProficiencyEffect`                                           |
| **Interfaces**    | `IProficiencyEffectProvider`                                  |
| **Configuration** | `proficiency-effects.json`, `proficiency-effects.schema.json` |
| **Tests**         | ~4 unit tests                                                 |

### 1.3 Architectural Significance

This version establishes the **Proficiency Effect Pattern** that will be used throughout the weapon and armor systems:

- **Enum-Based Level Identification**: All proficiency checks reference a `WeaponProficiencyLevel` value
- **Effect-Driven Modifiers**: Combat modifiers come from configuration, not hardcoded values
- **Technique Gating**: Special properties and techniques unlocked by proficiency progression
- **Provider Pattern**: `IProficiencyEffectProvider` centralizes effect data access

---

## 2. Feature Overview

```
v0.16.1a Proficiency Level Enum
├── WeaponProficiencyLevel Enum
│   ├── NonProficient (0) — Severe penalties, no special abilities
│   ├── Proficient (1) — Baseline competency
│   ├── Expert (2) — Enhanced attack bonus
│   └── Master (3) — Peak performance bonuses
├── ProficiencyEffect Value Object
│   ├── Level: WeaponProficiencyLevel
│   ├── AttackModifier: int (-3 to +2)
│   ├── DamageModifier: int (-2 to +1)
│   ├── CanUseSpecialProperties: bool
│   ├── UnlockedTechniques: TechniqueAccess
│   └── DisplayName: string
└── IProficiencyEffectProvider Interface
    ├── GetEffect(level): ProficiencyEffect
    ├── GetAllEffects(): IReadOnlyList<ProficiencyEffect>
    └── ValidateConfiguration(): bool
```

### 2.1 Scope Alignment

**In Scope:**

- `WeaponProficiencyLevel` enum with four levels (0-3)
- `ProficiencyEffect` value object with combat modifiers
- `TechniqueAccess` enum for technique tier gating
- `IProficiencyEffectProvider` interface for effect data access
- `proficiency-effects.json` configuration file
- `proficiency-effects.schema.json` validation schema

**Out of Scope:**

- Weapon categories (v0.16.1b)
- Archetype proficiency matrix (v0.16.1c)
- Character proficiency tracking (v0.16.1d)
- Proficiency acquisition methods (v0.16.1e)
- Combat integration (v0.16.1f)

---

## 3. Architecture Diagrams

### 3.1 Proficiency Effect System Overview

```
┌─────────────────────────────────────────────────────────────────────┐
│                PROFICIENCY EFFECT SYSTEM OVERVIEW                    │
└─────────────────────────────────────────────────────────────────────┘

    Character + Weapon
           │
           │  Lookup proficiency level
           ▼
┌─────────────────────────────────────────────────────────────────────┐
│                    WeaponProficiencyLevel Enum                       │
├─────────────────────────────────────────────────────────────────────┤
│  NonProficient (0)  │  Proficient (1)  │  Expert (2)  │ Master (3)  │
└─────────────────────────────────────────────────────────────────────┘
           │
           │  Get combat effects
           ▼
┌─────────────────────────────────────────────────────────────────────┐
│                   IProficiencyEffectProvider                         │
├─────────────────────────────────────────────────────────────────────┤
│  + GetEffect(level): ProficiencyEffect                              │
│  + GetAllEffects(): IReadOnlyList<ProficiencyEffect>                │
│  + ValidateConfiguration(): bool                                     │
└─────────────────────────────────────────────────────────────────────┘
           │
           │  Returns effect data
           ▼
┌─────────────────────────────────────────────────────────────────────┐
│                       ProficiencyEffect                              │
├─────────────────────────────────────────────────────────────────────┤
│  Level: WeaponProficiencyLevel                                       │
│  AttackModifier: int           (e.g., -3, 0, +1, +2)                │
│  DamageModifier: int           (e.g., -2, 0, 0, +1)                 │
│  CanUseSpecialProperties: bool                                       │
│  UnlockedTechniques: TechniqueAccess                                 │
│  DisplayName: string           (e.g., "Non-Proficient")              │
└─────────────────────────────────────────────────────────────────────┘
```

### 3.2 Proficiency Level Decision Tree

```
┌─────────────────────────────────────────────────────────────────────┐
│                 PROFICIENCY LEVEL DECISION TREE                      │
└─────────────────────────────────────────────────────────────────────┘

    Character Attacks with Weapon
           │
           ▼
    ┌──────────────────────────────────────────────────────────────────┐
    │             GET PROFICIENCY LEVEL                                 │
    ├──────────────────────────────────────────────────────────────────┤
    │  1. Get weapon's category (v0.16.1b)                             │
    │  2. Check character's proficiency in that category (v0.16.1d)    │
    │  3. Return WeaponProficiencyLevel                                 │
    └──────────────────────────────────────────────────────────────────┘
           │
           ▼
    ┌──────────────────────────────────────────────────────────────────┐
    │             APPLY PROFICIENCY EFFECTS                             │
    ├──────────────────────────────────────────────────────────────────┤
    │                                                                   │
    │  Level == NonProficient?                                          │
    │     ├─ Attack: -3 modifier                                        │
    │     ├─ Damage: -2 modifier                                        │
    │     ├─ Special Properties: BLOCKED                                │
    │     └─ Techniques: None available                                 │
    │                                                                   │
    │  Level == Proficient?                                             │
    │     ├─ Attack: +0 modifier (baseline)                             │
    │     ├─ Damage: +0 modifier (baseline)                             │
    │     ├─ Special Properties: AVAILABLE                              │
    │     └─ Techniques: Basic techniques                               │
    │                                                                   │
    │  Level == Expert?                                                 │
    │     ├─ Attack: +1 modifier                                        │
    │     ├─ Damage: +0 modifier                                        │
    │     ├─ Special Properties: AVAILABLE                              │
    │     └─ Techniques: Basic + Advanced                               │
    │                                                                   │
    │  Level == Master?                                                 │
    │     ├─ Attack: +2 modifier                                        │
    │     ├─ Damage: +1 modifier                                        │
    │     ├─ Special Properties: AVAILABLE                              │
    │     └─ Techniques: Basic + Advanced + Signature                   │
    │                                                                   │
    └──────────────────────────────────────────────────────────────────┘
```

### 3.3 Layer Diagram

```
┌─────────────────────────────────────────────────────────────────────┐
│                        PRESENTATION LAYER                            │
├─────────────────────────────────────────────────────────────────────┤
│  CombatView                                                          │
│  └── Displays proficiency warnings when using non-proficient weapons│
│                                                                      │
│  CharacterSheet                                                      │
│  └── Shows proficiency levels per weapon category                   │
│                                                                      │
│  WeaponTooltip                                                       │
│  └── Shows effective attack/damage with proficiency applied         │
└───────┬─────────────────────────────────────────────────────────────┘
        │
        ▼
┌─────────────────────────────────────────────────────────────────────┐
│                       APPLICATION LAYER                              │
├─────────────────────────────────────────────────────────────────────┤
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │              ProficiencyEffectProvider                         │  │
│  │          (implements IProficiencyEffectProvider)               │  │
│  ├───────────────────────────────────────────────────────────────┤  │
│  │  + GetEffect(level): ProficiencyEffect                        │  │
│  │  + GetAllEffects(): IReadOnlyList<ProficiencyEffect>          │  │
│  │  + ValidateConfiguration(): bool                              │  │
│  │                                                               │  │
│  │  - LoadConfiguration(): void (from JSON)                      │  │
│  │  - _effects: Dictionary<WeaponProficiencyLevel, Effect>       │  │
│  └───────────────────────────────────────────────────────────────┘  │
│                                                                      │
│  ProficiencyCheckService (v0.16.1f)                                  │
│  └── Uses effects to calculate combat modifiers                     │
└───────┬─────────────────────────────────────────────────────────────┘
        │
        ▼
┌─────────────────────────────────────────────────────────────────────┐
│                         DOMAIN LAYER                                 │
├─────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────┐  ┌────────────────────────────────┐   │
│  │ WeaponProficiencyLevel  │  │       ProficiencyEffect        │   │
│  │        (Enum)           │  │       (Value Object)           │   │
│  ├─────────────────────────┤  ├────────────────────────────────┤   │
│  │ NonProficient = 0       │  │ Level: WeaponProficiencyLevel  │   │
│  │ Proficient = 1          │  │ AttackModifier: int            │   │
│  │ Expert = 2              │  │ DamageModifier: int            │   │
│  │ Master = 3              │  │ CanUseSpecialProperties: bool  │   │
│  └─────────────────────────┘  │ UnlockedTechniques: enum       │   │
│                               │ DisplayName: string            │   │
│  ┌─────────────────────────┐  └────────────────────────────────┘   │
│  │    TechniqueAccess      │                                        │
│  │        (Enum)           │                                        │
│  ├─────────────────────────┤                                        │
│  │ None = 0                │                                        │
│  │ Basic = 1               │                                        │
│  │ Advanced = 2            │                                        │
│  │ Signature = 3           │                                        │
│  └─────────────────────────┘                                        │
└─────────────────────────────────────────────────────────────────────┘
```

### 3.4 Combat Modifier Application Flow

```
┌─────────────────────────────────────────────────────────────────────┐
│                 COMBAT MODIFIER APPLICATION FLOW                     │
└─────────────────────────────────────────────────────────────────────┘

    Attack Action
         │
         ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  1. GET BASE ATTACK VALUE                                       │
    ├─────────────────────────────────────────────────────────────────┤
    │  Base attack from character stats (e.g., 5)                     │
    └─────────────────────────────────────────────────────────────────┘
         │
         ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  2. GET WEAPON TIER BONUS                                       │
    ├─────────────────────────────────────────────────────────────────┤
    │  From v0.16.0b: WeaponTierScaling.AccuracyModifier              │
    │  Example: Optimized weapon = +1                                 │
    └─────────────────────────────────────────────────────────────────┘
         │
         ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  3. GET PROFICIENCY MODIFIER                                    │
    ├─────────────────────────────────────────────────────────────────┤
    │  From ProficiencyEffect.AttackModifier                          │
    │  NonProficient: -3 │ Proficient: 0 │ Expert: +1 │ Master: +2    │
    └─────────────────────────────────────────────────────────────────┘
         │
         ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  4. CALCULATE FINAL ATTACK                                      │
    ├─────────────────────────────────────────────────────────────────┤
    │  FinalAttack = BaseAttack + TierBonus + ProficiencyMod          │
    │                                                                  │
    │  Example (NonProficient with Optimized sword):                  │
    │    5 (base) + 1 (tier) + (-3) (proficiency) = 3                 │
    │                                                                  │
    │  Example (Expert with Optimized sword):                         │
    │    5 (base) + 1 (tier) + 1 (proficiency) = 7                    │
    └─────────────────────────────────────────────────────────────────┘
         │
         ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  5. CHECK SPECIAL PROPERTY ACCESS                               │
    ├─────────────────────────────────────────────────────────────────┤
    │  if (effect.CanUseSpecialProperties)                            │
    │      → Apply weapon's special effects (lifesteal, cleave, etc.) │
    │  else                                                           │
    │      → Skip special effects, log warning                        │
    └─────────────────────────────────────────────────────────────────┘
```

---

## 4. WeaponProficiencyLevel Enum

### 4.1 Purpose

The `WeaponProficiencyLevel` enum defines the four levels of weapon proficiency a character can have. This enum is the foundation for determining combat effectiveness with different weapon types.

### 4.2 Implementation

**File:** `src/Core/RuneAndRust.Domain/Enums/WeaponProficiencyLevel.cs`

```csharp
namespace RuneAndRust.Domain.Enums;

/// <summary>
/// Defines the proficiency levels for weapon usage.
/// </summary>
/// <remarks>
/// <para>
/// Weapon proficiency levels determine how effectively a character can
/// wield weapons of a specific category. Higher proficiency provides
/// combat bonuses and unlocks advanced techniques.
/// </para>
/// <para>
/// The four levels represent a clear progression:
/// - NonProficient: Severely hampered, cannot use special properties
/// - Proficient: Baseline competency, full weapon functionality
/// - Expert: Enhanced attack bonus, advanced techniques available
/// - Master: Peak performance, signature techniques unlocked
/// </para>
/// <para>
/// Level values are explicitly assigned (0-3) to ensure stable
/// serialization and database storage.
/// </para>
/// </remarks>
public enum WeaponProficiencyLevel
{
    /// <summary>
    /// No training with this weapon category.
    /// </summary>
    /// <remarks>
    /// Non-proficient characters suffer -3 attack and -2 damage penalties.
    /// They cannot activate weapon special properties and have no access
    /// to combat techniques requiring training.
    /// </remarks>
    NonProficient = 0,

    /// <summary>
    /// Basic training with this weapon category.
    /// </summary>
    /// <remarks>
    /// Proficient characters have no penalties and can use all standard
    /// weapon functions including special properties. Basic combat
    /// techniques are available.
    /// </remarks>
    Proficient = 1,

    /// <summary>
    /// Advanced training with this weapon category.
    /// </summary>
    /// <remarks>
    /// Expert characters gain +1 attack bonus and unlock advanced
    /// combat techniques specific to the weapon category.
    /// </remarks>
    Expert = 2,

    /// <summary>
    /// Mastery of this weapon category.
    /// </summary>
    /// <remarks>
    /// Master characters gain +2 attack and +1 damage bonuses.
    /// They unlock signature techniques that define their combat style.
    /// </remarks>
    Master = 3
}
```

### 4.3 Proficiency Level Reference Table

| Enum Value      | Integer | Attack Mod | Damage Mod | Special Props | Techniques |
| --------------- | ------- | ---------- | ---------- | ------------- | ---------- |
| `NonProficient` | 0       | -3         | -2         | No            | None       |
| `Proficient`    | 1       | 0          | 0          | Yes           | Basic      |
| `Expert`        | 2       | +1         | 0          | Yes           | Advanced   |
| `Master`        | 3       | +2         | +1         | Yes           | Signature  |

---

## 5. ProficiencyEffect Value Object

### 5.1 Purpose

The `ProficiencyEffect` value object encapsulates all combat effects for a proficiency level. This separates the enum definition from its gameplay impact, allowing balance adjustments without code changes.

### 5.2 Implementation

**File:** `src/Core/RuneAndRust.Domain/ValueObjects/ProficiencyEffect.cs`

```csharp
namespace RuneAndRust.Domain.ValueObjects;

using RuneAndRust.Domain.Enums;

/// <summary>
/// Contains combat effects for a weapon proficiency level.
/// </summary>
/// <remarks>
/// <para>
/// ProficiencyEffect is loaded from configuration (proficiency-effects.json)
/// rather than hardcoded, allowing balance adjustments without code changes.
/// </para>
/// <para>
/// This value object is immutable after creation. Use the factory method
/// <see cref="Create"/> to construct new instances with validation.
/// </para>
/// </remarks>
/// <param name="Level">The proficiency level this effect describes.</param>
/// <param name="AttackModifier">Modifier applied to attack rolls (-3 to +2).</param>
/// <param name="DamageModifier">Modifier applied to damage rolls (-2 to +1).</param>
/// <param name="CanUseSpecialProperties">Whether special weapon properties are accessible.</param>
/// <param name="UnlockedTechniques">Highest tier of techniques available.</param>
/// <param name="DisplayName">Human-readable name for UI (e.g., "Non-Proficient").</param>
/// <param name="Description">Flavor text describing this proficiency level.</param>
public readonly record struct ProficiencyEffect(
    WeaponProficiencyLevel Level,
    int AttackModifier,
    int DamageModifier,
    bool CanUseSpecialProperties,
    TechniqueAccess UnlockedTechniques,
    string DisplayName,
    string Description)
{
    /// <summary>
    /// Gets the level as an integer value.
    /// </summary>
    public int LevelValue => (int)Level;

    /// <summary>
    /// Gets whether this level has attack penalties.
    /// </summary>
    public bool HasAttackPenalty => AttackModifier < 0;

    /// <summary>
    /// Gets whether this level has attack bonuses.
    /// </summary>
    public bool HasAttackBonus => AttackModifier > 0;

    /// <summary>
    /// Gets whether this level has damage penalties.
    /// </summary>
    public bool HasDamagePenalty => DamageModifier < 0;

    /// <summary>
    /// Gets whether this level has damage bonuses.
    /// </summary>
    public bool HasDamageBonus => DamageModifier > 0;

    /// <summary>
    /// Gets whether this is the lowest proficiency level.
    /// </summary>
    public bool IsNonProficient => Level == WeaponProficiencyLevel.NonProficient;

    /// <summary>
    /// Gets whether this is the highest proficiency level.
    /// </summary>
    public bool IsMaster => Level == WeaponProficiencyLevel.Master;

    /// <summary>
    /// Gets whether the character can use basic techniques.
    /// </summary>
    public bool CanUseBasicTechniques =>
        UnlockedTechniques >= TechniqueAccess.Basic;

    /// <summary>
    /// Gets whether the character can use advanced techniques.
    /// </summary>
    public bool CanUseAdvancedTechniques =>
        UnlockedTechniques >= TechniqueAccess.Advanced;

    /// <summary>
    /// Gets whether the character can use signature techniques.
    /// </summary>
    public bool CanUseSignatureTechniques =>
        UnlockedTechniques >= TechniqueAccess.Signature;

    /// <summary>
    /// Creates a new ProficiencyEffect with validation.
    /// </summary>
    /// <param name="level">The proficiency level.</param>
    /// <param name="attackModifier">Attack roll modifier.</param>
    /// <param name="damageModifier">Damage roll modifier.</param>
    /// <param name="canUseSpecialProperties">Special property access.</param>
    /// <param name="unlockedTechniques">Technique access tier.</param>
    /// <param name="displayName">Display name for UI.</param>
    /// <param name="description">Flavor description.</param>
    /// <returns>A new ProficiencyEffect instance.</returns>
    /// <exception cref="ArgumentException">Thrown when string parameters are null or empty.</exception>
    /// <exception cref="ArgumentOutOfRangeException">Thrown when modifiers are out of expected range.</exception>
    public static ProficiencyEffect Create(
        WeaponProficiencyLevel level,
        int attackModifier,
        int damageModifier,
        bool canUseSpecialProperties,
        TechniqueAccess unlockedTechniques,
        string displayName,
        string description)
    {
        ArgumentException.ThrowIfNullOrWhiteSpace(displayName);
        ArgumentException.ThrowIfNullOrWhiteSpace(description);
        ArgumentOutOfRangeException.ThrowIfLessThan(attackModifier, -5);
        ArgumentOutOfRangeException.ThrowIfGreaterThan(attackModifier, 5);
        ArgumentOutOfRangeException.ThrowIfLessThan(damageModifier, -5);
        ArgumentOutOfRangeException.ThrowIfGreaterThan(damageModifier, 5);

        return new ProficiencyEffect(
            level,
            attackModifier,
            damageModifier,
            canUseSpecialProperties,
            unlockedTechniques,
            displayName,
            description);
    }

    /// <summary>
    /// Formats the attack modifier for display.
    /// </summary>
    /// <returns>Formatted string (e.g., "+1", "-3", "0").</returns>
    public string FormatAttackModifier() =>
        AttackModifier >= 0 ? $"+{AttackModifier}" : $"{AttackModifier}";

    /// <summary>
    /// Formats the damage modifier for display.
    /// </summary>
    /// <returns>Formatted string (e.g., "+1", "-2", "0").</returns>
    public string FormatDamageModifier() =>
        DamageModifier >= 0 ? $"+{DamageModifier}" : $"{DamageModifier}";

    /// <summary>
    /// Creates a display string for debug/logging purposes.
    /// </summary>
    public override string ToString() =>
        $"{DisplayName}: Atk {FormatAttackModifier()}, Dmg {FormatDamageModifier()}, " +
        $"Special: {CanUseSpecialProperties}, Techniques: {UnlockedTechniques}";
}
```

### 5.3 TechniqueAccess Enum

**File:** `src/Core/RuneAndRust.Domain/Enums/TechniqueAccess.cs`

```csharp
namespace RuneAndRust.Domain.Enums;

/// <summary>
/// Defines the tiers of combat techniques accessible at different proficiency levels.
/// </summary>
/// <remarks>
/// <para>
/// Technique access is cumulative - having Advanced access includes Basic,
/// and Signature access includes both Basic and Advanced.
/// </para>
/// </remarks>
public enum TechniqueAccess
{
    /// <summary>
    /// No techniques available.
    /// </summary>
    /// <remarks>
    /// Non-proficient characters cannot use any weapon-specific techniques.
    /// </remarks>
    None = 0,

    /// <summary>
    /// Basic techniques available.
    /// </summary>
    /// <remarks>
    /// Standard combat maneuvers taught during initial training.
    /// </remarks>
    Basic = 1,

    /// <summary>
    /// Advanced techniques available (includes Basic).
    /// </summary>
    /// <remarks>
    /// Complex maneuvers that require significant practice to execute.
    /// </remarks>
    Advanced = 2,

    /// <summary>
    /// Signature techniques available (includes Basic and Advanced).
    /// </summary>
    /// <remarks>
    /// Master-level techniques that define a weapon expert's combat style.
    /// </remarks>
    Signature = 3
}
```

---

## 6. IProficiencyEffectProvider Interface

### 6.1 Purpose

The `IProficiencyEffectProvider` interface defines the contract for accessing proficiency effect data. This abstraction allows the effect source to be configured without affecting consuming code.

### 6.2 Implementation

**File:** `src/Core/RuneAndRust.Application/Interfaces/IProficiencyEffectProvider.cs`

```csharp
namespace RuneAndRust.Application.Interfaces;

using RuneAndRust.Domain.Enums;
using RuneAndRust.Domain.ValueObjects;

/// <summary>
/// Provides access to weapon proficiency effect data.
/// </summary>
/// <remarks>
/// <para>
/// This interface abstracts the source of proficiency effect data, allowing
/// it to be loaded from configuration files, databases, or hardcoded defaults.
/// </para>
/// <para>
/// Implementations should cache loaded effects for performance and validate
/// that all proficiency levels have corresponding effect entries.
/// </para>
/// </remarks>
public interface IProficiencyEffectProvider
{
    /// <summary>
    /// Gets the combat effects for a specific proficiency level.
    /// </summary>
    /// <param name="level">The proficiency level to get effects for.</param>
    /// <returns>The ProficiencyEffect for the specified level.</returns>
    /// <exception cref="ArgumentException">Thrown when effect for level is not found.</exception>
    ProficiencyEffect GetEffect(WeaponProficiencyLevel level);

    /// <summary>
    /// Gets effects for all proficiency levels.
    /// </summary>
    /// <returns>
    /// A read-only list of all proficiency effects, ordered by level ascending.
    /// </returns>
    IReadOnlyList<ProficiencyEffect> GetAllEffects();

    /// <summary>
    /// Gets the attack modifier for a specific proficiency level.
    /// </summary>
    /// <param name="level">The proficiency level.</param>
    /// <returns>The attack modifier (-3 to +2).</returns>
    int GetAttackModifier(WeaponProficiencyLevel level);

    /// <summary>
    /// Gets the damage modifier for a specific proficiency level.
    /// </summary>
    /// <param name="level">The proficiency level.</param>
    /// <returns>The damage modifier (-2 to +1).</returns>
    int GetDamageModifier(WeaponProficiencyLevel level);

    /// <summary>
    /// Checks if a proficiency level allows special property usage.
    /// </summary>
    /// <param name="level">The proficiency level.</param>
    /// <returns>True if special properties can be used.</returns>
    bool CanUseSpecialProperties(WeaponProficiencyLevel level);

    /// <summary>
    /// Gets the technique access tier for a proficiency level.
    /// </summary>
    /// <param name="level">The proficiency level.</param>
    /// <returns>The highest technique tier accessible.</returns>
    TechniqueAccess GetTechniqueAccess(WeaponProficiencyLevel level);

    /// <summary>
    /// Gets the display name for a proficiency level.
    /// </summary>
    /// <param name="level">The proficiency level.</param>
    /// <returns>The localized display name.</returns>
    string GetDisplayName(WeaponProficiencyLevel level);

    /// <summary>
    /// Validates that all required levels have effect entries.
    /// </summary>
    /// <returns>True if all levels are configured, false otherwise.</returns>
    bool ValidateConfiguration();
}
```

### 6.3 Usage Examples

```csharp
// Get effect for a proficiency level
var masterEffect = _proficiencyProvider.GetEffect(WeaponProficiencyLevel.Master);
Console.WriteLine($"Attack: {masterEffect.FormatAttackModifier()}");  // "+2"
Console.WriteLine($"Damage: {masterEffect.FormatDamageModifier()}");  // "+1"

// Check if character can use special properties
var level = WeaponProficiencyLevel.NonProficient;
if (!_proficiencyProvider.CanUseSpecialProperties(level))
{
    Console.WriteLine("Cannot activate weapon's lifesteal effect!");
}

// Get all effects for UI display
var allEffects = _proficiencyProvider.GetAllEffects();
foreach (var effect in allEffects)
{
    Console.WriteLine($"{effect.DisplayName}: Atk {effect.FormatAttackModifier()}");
}
// Output:
// Non-Proficient: Atk -3
// Proficient: Atk +0
// Expert: Atk +1
// Master: Atk +2
```

---

## 7. Data Model Changes

### 7.1 New Types Summary

| Type                         | Layer       | Category     | Description                           |
| ---------------------------- | ----------- | ------------ | ------------------------------------- |
| `WeaponProficiencyLevel`     | Domain      | Enum         | Four-level proficiency classification |
| `TechniqueAccess`            | Domain      | Enum         | Technique tier gating                 |
| `ProficiencyEffect`          | Domain      | Value Object | Combat modifiers for a level          |
| `IProficiencyEffectProvider` | Application | Interface    | Abstraction for effect data access    |

### 7.2 File Locations

```
src/Core/RuneAndRust.Domain/
├── Enums/
│   ├── WeaponProficiencyLevel.cs        ← NEW
│   └── TechniqueAccess.cs               ← NEW
└── ValueObjects/
    └── ProficiencyEffect.cs             ← NEW

src/Core/RuneAndRust.Application/
└── Interfaces/
    └── IProficiencyEffectProvider.cs    ← NEW

config/
├── proficiency-effects.json             ← NEW
└── schemas/
    └── proficiency-effects.schema.json  ← NEW
```

### 7.3 Entity Relationships

```
┌───────────────────────────┐         ┌─────────────────────────┐
│  WeaponProficiencyLevel   │◄────────│    ProficiencyEffect    │
│         (Enum)            │   1:1   │     (Value Object)      │
└───────────────────────────┘         └───────────┬─────────────┘
                                                  │
                                                  │ contains
                                                  ▼
                                      ┌─────────────────────────┐
                                      │    TechniqueAccess      │
                                      │        (Enum)           │
                                      └─────────────────────────┘

┌───────────────────────────────┐
│  IProficiencyEffectProvider   │
│        (Interface)            │
└────────────┬──────────────────┘
             │
             │ returns
             ▼
┌───────────────────────────────┐
│      ProficiencyEffect        │
│       (Value Object)          │
└───────────────────────────────┘
```

---

## 8. Configuration File Schemas

### 8.1 proficiency-effects.json

**File:** `config/proficiency-effects.json`

```json
{
    "$schema": "./schemas/proficiency-effects.schema.json",
    "effects": [
        {
            "level": "NonProficient",
            "levelValue": 0,
            "attackModifier": -3,
            "damageModifier": -2,
            "canUseSpecialProperties": false,
            "unlockedTechniques": "None",
            "displayName": "Non-Proficient",
            "description": "No training with this weapon type. Severe penalties apply and special properties cannot be activated."
        },
        {
            "level": "Proficient",
            "levelValue": 1,
            "attackModifier": 0,
            "damageModifier": 0,
            "canUseSpecialProperties": true,
            "unlockedTechniques": "Basic",
            "displayName": "Proficient",
            "description": "Basic training completed. Full access to weapon capabilities and basic combat techniques."
        },
        {
            "level": "Expert",
            "levelValue": 2,
            "attackModifier": 1,
            "damageModifier": 0,
            "canUseSpecialProperties": true,
            "unlockedTechniques": "Advanced",
            "displayName": "Expert",
            "description": "Advanced training mastered. Enhanced attack accuracy and access to advanced combat techniques."
        },
        {
            "level": "Master",
            "levelValue": 3,
            "attackModifier": 2,
            "damageModifier": 1,
            "canUseSpecialProperties": true,
            "unlockedTechniques": "Signature",
            "displayName": "Master",
            "description": "Complete mastery achieved. Peak combat performance with signature techniques that define your fighting style."
        }
    ]
}
```

### 8.2 proficiency-effects.schema.json

**File:** `config/schemas/proficiency-effects.schema.json`

```json
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "proficiency-effects.schema.json",
    "title": "Proficiency Effects Configuration",
    "description": "Defines combat effects for each weapon proficiency level",
    "type": "object",
    "required": ["effects"],
    "properties": {
        "$schema": {
            "type": "string",
            "description": "JSON schema reference"
        },
        "effects": {
            "type": "array",
            "description": "Array of proficiency effect definitions",
            "minItems": 4,
            "maxItems": 4,
            "items": {
                "$ref": "#/$defs/effectDefinition"
            }
        }
    },
    "$defs": {
        "effectDefinition": {
            "type": "object",
            "description": "Definition of combat effects for a proficiency level",
            "required": [
                "level",
                "levelValue",
                "attackModifier",
                "damageModifier",
                "canUseSpecialProperties",
                "unlockedTechniques",
                "displayName",
                "description"
            ],
            "properties": {
                "level": {
                    "type": "string",
                    "description": "The enum name for this level",
                    "enum": ["NonProficient", "Proficient", "Expert", "Master"]
                },
                "levelValue": {
                    "type": "integer",
                    "description": "The integer value of the level (0-3)",
                    "minimum": 0,
                    "maximum": 3
                },
                "attackModifier": {
                    "type": "integer",
                    "description": "Modifier applied to attack rolls",
                    "minimum": -5,
                    "maximum": 5
                },
                "damageModifier": {
                    "type": "integer",
                    "description": "Modifier applied to damage rolls",
                    "minimum": -5,
                    "maximum": 5
                },
                "canUseSpecialProperties": {
                    "type": "boolean",
                    "description": "Whether weapon special properties can be activated"
                },
                "unlockedTechniques": {
                    "type": "string",
                    "description": "Highest tier of techniques available",
                    "enum": ["None", "Basic", "Advanced", "Signature"]
                },
                "displayName": {
                    "type": "string",
                    "description": "Human-readable name for UI",
                    "minLength": 1,
                    "maxLength": 50
                },
                "description": {
                    "type": "string",
                    "description": "Flavor text describing this proficiency level",
                    "minLength": 10,
                    "maxLength": 500
                }
            },
            "additionalProperties": false
        }
    }
}
```

---

## 9. Logging Specifications

### 9.1 Log Levels by Component

| Component                   | Level       | Events                                        |
| --------------------------- | ----------- | --------------------------------------------- |
| `ProficiencyEffectProvider` | Information | Configuration loaded, validation complete     |
| `ProficiencyEffectProvider` | Debug       | Effect lookup, modifier retrieval             |
| `ProficiencyEffectProvider` | Warning     | Missing level in configuration, fallback used |
| `ProficiencyEffectProvider` | Error       | Configuration file not found, invalid JSON    |

### 9.2 Structured Logging Templates

```csharp
// Information - Configuration loaded
_logger.LogInformation(
    "Proficiency effects configuration loaded. EffectCount={EffectCount}",
    effects.Count);

// Information - Validation complete
_logger.LogInformation(
    "Proficiency effects validated. AllLevelsPresent={AllPresent}",
    allLevelsPresent);

// Debug - Effect retrieved
_logger.LogDebug(
    "Proficiency effect retrieved. Level={Level}, Attack={Attack}, Damage={Damage}",
    level,
    effect.AttackModifier,
    effect.DamageModifier);

// Warning - Missing level fallback
_logger.LogWarning(
    "Proficiency effect missing, using default. Level={Level}",
    level);

// Error - Configuration failure
_logger.LogError(
    "Failed to load proficiency effects configuration. FilePath={FilePath}, Error={Error}",
    filePath,
    exception.Message);
```

---

## 10. Unit Testing Requirements

### 10.1 Test Count by Feature

| Feature                        | Test Count |
| ------------------------------ | ---------- |
| WeaponProficiencyLevel enum    | ~1         |
| TechniqueAccess enum           | ~1         |
| ProficiencyEffect value object | ~1         |
| IProficiencyEffectProvider     | ~1         |
| **Total**                      | **~4**     |

### 10.2 Test Specifications

#### WeaponProficiencyLevelTests.cs

**File:** `tests/RuneAndRust.Domain.UnitTests/Enums/WeaponProficiencyLevelTests.cs`

```csharp
[TestFixture]
public class WeaponProficiencyLevelTests
{
    [Test]
    public void WeaponProficiencyLevel_AllLevelsHaveExpectedValues_ValuesMatchSpecification();

    [Test]
    public void WeaponProficiencyLevel_CanCastToInt_ReturnsCorrectValues();

    [Test]
    public void WeaponProficiencyLevel_CanCompare_HigherLevelsGreaterThanLower();

    [Test]
    public void WeaponProficiencyLevel_AllFourLevelsDefined_CountEquals4();
}
```

#### TechniqueAccessTests.cs

**File:** `tests/RuneAndRust.Domain.UnitTests/Enums/TechniqueAccessTests.cs`

```csharp
[TestFixture]
public class TechniqueAccessTests
{
    [Test]
    public void TechniqueAccess_AllLevelsHaveExpectedValues_ValuesMatchSpecification();

    [Test]
    public void TechniqueAccess_CanCompare_HigherTiersGreaterThanLower();

    [Test]
    public void TechniqueAccess_AllFourTiersDefined_CountEquals4();
}
```

#### ProficiencyEffectTests.cs

**File:** `tests/RuneAndRust.Domain.UnitTests/ValueObjects/ProficiencyEffectTests.cs`

```csharp
[TestFixture]
public class ProficiencyEffectTests
{
    [Test]
    public void Create_WithValidParameters_CreatesProficiencyEffect();

    [Test]
    public void Create_WithNullDisplayName_ThrowsArgumentException();

    [Test]
    public void Create_WithOutOfRangeAttackModifier_ThrowsArgumentOutOfRangeException();

    [Test]
    public void FormatAttackModifier_WithPositiveValue_ReturnsPlusFormat();

    [Test]
    public void FormatAttackModifier_WithNegativeValue_ReturnsMinusFormat();

    [Test]
    public void HasAttackPenalty_ForNonProficient_ReturnsTrue();

    [Test]
    public void HasAttackBonus_ForMaster_ReturnsTrue();

    [Test]
    public void CanUseAdvancedTechniques_ForExpert_ReturnsTrue();

    [Test]
    public void CanUseAdvancedTechniques_ForProficient_ReturnsFalse();
}
```

---

## 11. Use Cases

### UC-001: Retrieve Proficiency Effects for Combat

**Actor:** Combat Service (v0.16.1f)  
**Flow:** Get character proficiency level → Get effects from provider → Apply attack modifier → Apply damage modifier → Check special property access → Execute combat

### UC-002: Display Proficiency Information

**Actor:** Character Sheet UI  
**Flow:** Get all proficiency effects → Display level names with modifiers → Highlight current level → Show technique access

### UC-003: Validate Proficiency Configuration on Startup

**Actor:** Application Startup  
**Flow:** Load configuration → Parse effect definitions → Validate all 4 levels present → Log validation result

### UC-004: Check Special Property Access

**Actor:** Combat Service  
**Flow:** Get equipped weapon → Check weapon has special property → Get proficiency effect → Check CanUseSpecialProperties → Allow or block property activation

---

## 12. Deliverable Checklist

### Domain Layer

- [ ] `WeaponProficiencyLevel.cs` enum created in `src/Core/RuneAndRust.Domain/Enums/`
- [ ] `TechniqueAccess.cs` enum created in `src/Core/RuneAndRust.Domain/Enums/`
- [ ] `ProficiencyEffect.cs` value object created in `src/Core/RuneAndRust.Domain/ValueObjects/`
- [ ] All types have complete XML documentation

### Application Layer

- [ ] `IProficiencyEffectProvider.cs` interface created in `src/Core/RuneAndRust.Application/Interfaces/`
- [ ] Interface has complete XML documentation

### Configuration Files

- [ ] `config/proficiency-effects.json` created with all 4 levels
- [ ] `config/schemas/proficiency-effects.schema.json` created
- [ ] Configuration validates against schema

### Testing

- [ ] `WeaponProficiencyLevelTests.cs` created
- [ ] `TechniqueAccessTests.cs` created
- [ ] `ProficiencyEffectTests.cs` created
- [ ] ~4 unit tests passing

### Documentation

- [ ] `v0.16.1a-changelog.md` created
- [ ] Inline code comments complete

---

## 13. Acceptance Criteria

### Functional

- [ ] `WeaponProficiencyLevel` enum defines exactly 4 levels with values 0-3
- [ ] `TechniqueAccess` enum defines exactly 4 tiers with values 0-3
- [ ] NonProficient applies -3 attack modifier
- [ ] NonProficient applies -2 damage modifier
- [ ] NonProficient blocks special property access
- [ ] Proficient has +0 attack and +0 damage (baseline)
- [ ] Expert grants +1 attack modifier
- [ ] Master grants +2 attack and +1 damage modifiers
- [ ] `ProficiencyEffect.Create()` validates all parameters
- [ ] `ProficiencyEffect.FormatAttackModifier()` returns "+X" or "-X" format
- [ ] `IProficiencyEffectProvider.GetEffect()` returns correct effect for each level
- [ ] `IProficiencyEffectProvider.ValidateConfiguration()` returns true when all levels present

### Quality

- [ ] Build succeeds with 0 errors
- [ ] Build succeeds with 0 warnings
- [ ] ~4 unit tests pass
- [ ] Configuration validates against JSON schema
- [ ] All public types have XML documentation

---

## 14. Dependencies

### Required from Prior Versions

| Type | Location | Usage                  |
| ---- | -------- | ---------------------- |
| N/A  | N/A      | First phase of v0.16.1 |

### Provides to v0.16.1b

| Type                     | Usage                                      |
| ------------------------ | ------------------------------------------ |
| `WeaponProficiencyLevel` | Used for archetype proficiency definitions |
| `ProficiencyEffect`      | Effect data for proficiency checks         |

### Provides to v0.16.1c

| Type                     | Usage                                    |
| ------------------------ | ---------------------------------------- |
| `WeaponProficiencyLevel` | Archetype matrix references these levels |

### Provides to v0.16.1d

| Type                     | Usage                                   |
| ------------------------ | --------------------------------------- |
| `WeaponProficiencyLevel` | Character tracking stores current level |
| `ProficiencyEffect`      | Effects applied based on tracked level  |

### Provides to v0.16.1e

| Type                     | Usage                                       |
| ------------------------ | ------------------------------------------- |
| `WeaponProficiencyLevel` | Acquisition service advances between levels |

### Provides to v0.16.1f

| Type                         | Usage                                    |
| ---------------------------- | ---------------------------------------- |
| `WeaponProficiencyLevel`     | Combat checks reference current level    |
| `ProficiencyEffect`          | Modifiers applied to attack/damage rolls |
| `IProficiencyEffectProvider` | Service for retrieving combat effects    |

---

## 15. Future Considerations

### Deferred to v0.16.1b

- **WeaponCategory Enum**: 11 weapon categorizations
- **WeaponCategoryDefinition**: Category metadata and attributes
- **weapon-categories.json**: Category configuration

### Deferred to v0.16.1c

- **ArchetypeProficiencySet Entity**: Archetype-to-category mappings
- **IArchetypeProficiencyProvider Interface**: Matrix access

### Deferred to v0.16.1d

- **CharacterProficiencies Entity**: Per-character proficiency state
- **ProficiencyProgress Value Object**: Combat experience tracking

### Deferred to v0.16.1e

- **IProficiencyAcquisitionService**: Training and experience logic
- **ProficiencyGainResult**: Acquisition outcome reporting

### Deferred to v0.16.1f

- **IProficiencyCheckService**: Combat integration
- **Attack/damage modifier application**: Combat system hookup

### Out of Scope

- **Level 4+ Expansion**: Four levels are sufficient for gameplay depth
- **Per-Weapon Proficiency**: Proficiency is per-category, not per-item
- **Armor Proficiency Effects**: Covered in v0.16.2, different system

---

_Document Version: 1.0_  
_Last Updated: 2026-01-27_  
_Author: AI Assistant_
